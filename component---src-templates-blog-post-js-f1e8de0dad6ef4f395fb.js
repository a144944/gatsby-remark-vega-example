webpackJsonp([0x620f737b6699],[,function(e,t,n){(function(e){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?l(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t,n,r){return s(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}function c(e,t){if(s(t),e=a(e,t<0?0:0|g(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=a(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function d(e,t){var n=t.length<0?0:0|g(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=d(e,t),e}function p(e,t){if(o.isBuffer(t)){var n=0|g(t.length);return e=a(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Z(t.length)?a(e,0):d(e,t);if("Buffer"===t.type&&K(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),o.alloc(+e)}function v(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return z(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:x(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):x(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,r,i){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,u=e.length,s=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,n/=2}var f;if(i){var c=-1;for(f=n;f<u;f++)if(a(e,f)===a(t,c===-1?0:f-c)){if(c===-1&&(c=f),f-c+1===s)return c*o}else c!==-1&&(f-=f-c),c=-1}else for(n+s>u&&(n=u-s),f=n;f>=0;f--){for(var l=!0,d=0;d<s;d++)if(a(e,f+d)!==a(t,d)){l=!1;break}if(l)return f}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[n+o]=u}return o}function k(e,t,n,r){return X(G(t,e.length-n),e,n,r)}function M(e,t,n,r){return X(Y(t),e,n,r)}function S(e,t,n,r){return M(e,t,n,r)}function E(e,t,n,r){return X(V(t),e,n,r)}function O(e,t,n,r){return X(H(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,u=a>239?4:a>223?3:a>191?2:1;if(i+u<=n){var s,f,c,l;switch(u){case 1:a<128&&(o=a);break;case 2:s=e[i+1],128===(192&s)&&(l=(31&a)<<6|63&s,l>127&&(o=l));break;case 3:s=e[i+1],f=e[i+2],128===(192&s)&&128===(192&f)&&(l=(15&a)<<12|(63&s)<<6|63&f,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:s=e[i+1],f=e[i+2],c=e[i+3],128===(192&s)&&128===(192&f)&&128===(192&c)&&(l=(15&a)<<18|(63&s)<<12|(63&f)<<6|63&c,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=u}return R(r)}function R(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function z(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=W(e[a]);return i}function D(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function P(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function q(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function $(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function j(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,i){return i||j(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function I(e,t,n,r,i){return i||j(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function U(e){if(e=B(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function B(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function V(e){return J.toByteArray(U(e))}function X(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Z(e){return e!==e}var J=n(121),Q=n(177),K=n(83);t.Buffer=o,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=i(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return u(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return f(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,u=n-t,s=Math.min(a,u),f=this.slice(r,i),c=e.slice(t,n),l=0;l<s;++l)if(f[l]!==c[l]){a=f[l],u=c[l];break}return a<u?-1:u<a?1:0},o.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},o.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return M(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,e,t,n,i,0)}var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):q(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):q(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):$(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var a=0,o=1,u=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var a=n-1,o=1,u=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):q(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):q(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):$(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var u=o.isBuffer(e)?e:G(new o(e,r).toString()),s=u.length;for(a=0;a<n-t;++a)this[a+t]=u[a%s]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function o(){g&&h&&(g=!1,h.length?p=h.concat(p):m=-1,p.length&&u())}function u(){if(!g){var e=i(o);g=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,g=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function f(){}var c,l,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var h,p=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||g||i(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=f,d.addListener=f,d.once=f,d.off=f,d.removeListener=f,d.removeAllListeners=f,d.emit=f,d.prependListener=f,d.prependOnceListener=f,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},,,function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(e){return this instanceof r?(f.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||o.nextTick(a,this)}function a(e){e.end()}var o=n(27),u=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var s=n(11);s.inherits=n(5);var f=n(93),c=n(49);s.inherits(r,f);for(var l=u(c.prototype),d=0;d<l.length;d++){var h=l[d];r.prototype[h]||(r.prototype[h]=c.prototype[h])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),o.nextTick(t,e)}},,,function(e,t,n){(function(t){"use strict";var r,i=n(1),a=i.Buffer,o={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(o[r]=i[r]);var u=o.Buffer={};for(r in a)a.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(u[r]=a[r]);if(o.Buffer.prototype=a.prototype,u.from&&u.from!==Uint8Array.from||(u.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&"undefined"==typeof e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return a(e,t,n)}),u.alloc||(u.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=a(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!o.kStringMaxLength)try{o.kStringMaxLength=t.binding("buffer").kStringMaxLength}catch(e){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),e.exports=o}).call(t,n(2))},,function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function a(e){return null==e}function o(e){return"number"==typeof e}function u(e){return"string"==typeof e}function s(e){return"symbol"==typeof e}function f(e){return void 0===e}function c(e){return"[object RegExp]"===m(e)}function l(e){return"object"==typeof e&&null!==e}function d(e){return"[object Date]"===m(e)}function h(e){return"[object Error]"===m(e)||e instanceof Error}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function m(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=a,t.isNumber=o,t.isString=u,t.isSymbol=s,t.isUndefined=f,t.isRegExp=c,t.isObject=l,t.isDate=d,t.isError=h,t.isFunction=p,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,n(1).Buffer)},function(e,t,n){t=e.exports=n(93),t.Stream=t,t.Readable=t,t.Writable=n(49),t.Duplex=n(6),t.Transform=n(94),t.PassThrough=n(250)},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(41).EventEmitter,a=n(5);a(r,i),r.Readable=n(12),r.Writable=n(253),r.Duplex=n(249),r.Transform=n(97),r.PassThrough=n(252),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&f.pause&&f.pause()}function r(){f.readable&&f.resume&&f.resume()}function a(){c||(c=!0,e.end())}function o(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(s(),0===i.listenerCount(this,"error"))throw e}function s(){f.removeListener("data",n),e.removeListener("drain",r),f.removeListener("end",a),f.removeListener("close",o),f.removeListener("error",u),e.removeListener("error",u),f.removeListener("end",s),f.removeListener("close",s),e.removeListener("close",s)}var f=this;f.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(f.on("end",a),f.on("close",o));var c=!1;return f.on("error",u),e.on("error",u),f.on("end",s),f.on("close",s),e.on("close",s),e.emit("pipe",f),e}},,,function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return function(t,n){return o(e(t),n)}}function n(e,t){return[e,t]}function r(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=M?10:a>=S?5:a>=E?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=M?10:a>=S?5:a>=E?2:1)}function i(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=M?i*=10:a>=S?i*=5:a>=E&&(i*=2),t<e?-i:i}function a(e){return e.length}var o=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},u=function(e){return 1===e.length&&(e=t(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}},s=u(o),f=s.right,c=s.left,l=function(e,t){null==t&&(t=n);for(var r=0,i=e.length-1,a=e[0],o=new Array(i<0?0:i);r<i;)o[r]=t(a,a=e[++r]);return o},d=function(e,t,r){var i,a,o,u,s=e.length,f=t.length,c=new Array(s*f);for(null==r&&(r=n),i=o=0;i<s;++i)for(u=e[i],a=0;a<f;++a,++o)c[o]=r(u,t[a]);return c},h=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},p=function(e){return null===e?NaN:+e},g=function(e,t){var n,r,i=e.length,a=0,o=-1,u=0,s=0;if(null==t)for(;++o<i;)isNaN(n=p(e[o]))||(r=n-u,u+=r/++a,s+=r*(n-u));else for(;++o<i;)isNaN(n=p(t(e[o],o,e)))||(r=n-u,u+=r/++a,s+=r*(n-u));if(a>1)return s/(a-1)},m=function(e,t){var n=g(e,t);return n?Math.sqrt(n):n},v=function(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},y=Array.prototype,b=y.slice,_=y.map,x=function(e){return function(){return e}},w=function(e){return e},k=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a},M=Math.sqrt(50),S=Math.sqrt(10),E=Math.sqrt(2),O=function(e,t,n){var i,a,o,u,s=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(u=r(e,t,n))||!isFinite(u))return[];if(u>0)for(e=Math.ceil(e/u),t=Math.floor(t/u),o=new Array(a=Math.ceil(t-e+1));++s<a;)o[s]=(e+s)*u;else for(e=Math.floor(e*u),t=Math.ceil(t*u),o=new Array(a=Math.ceil(e-t+1));++s<a;)o[s]=(e-s)/u;return i&&o.reverse(),o},A=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},C=function(){function e(e){var a,o,u=e.length,s=new Array(u);for(a=0;a<u;++a)s[a]=t(e[a],a,e);var c=n(s),l=c[0],d=c[1],h=r(s,l,d);Array.isArray(h)||(h=i(l,d,h),h=k(Math.ceil(l/h)*h,Math.floor(d/h)*h,h));for(var p=h.length;h[0]<=l;)h.shift(),--p;for(;h[p-1]>d;)h.pop(),--p;var g,m=new Array(p+1);for(a=0;a<=p;++a)g=m[a]=[],g.x0=a>0?h[a-1]:l,g.x1=a<p?h[a]:d;for(a=0;a<u;++a)o=s[a],l<=o&&o<=d&&m[f(h,o,0,p)].push(e[a]);return m}var t=w,n=v,r=A;return e.value=function(n){return arguments.length?(t="function"==typeof n?n:x(n),e):t},e.domain=function(t){return arguments.length?(n="function"==typeof t?t:x([t[0],t[1]]),e):n},e.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:x(Array.isArray(t)?b.call(t):t),e):r},e},R=function(e,t,n){if(null==n&&(n=p),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}},T=function(e,t,n){return e=_.call(e,p).sort(o),Math.ceil((n-t)/(2*(R(e,.75)-R(e,.25))*Math.pow(e.length,-1/3)))},z=function(e,t,n){return Math.ceil((n-t)/(3.5*m(e)*Math.pow(e.length,-1/3)))},N=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r},D=function(e,t){var n,r=e.length,i=r,a=-1,o=0;if(null==t)for(;++a<r;)isNaN(n=p(e[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=p(t(e[a],a,e)))?--i:o+=n;if(i)return o/i},P=function(e,t){var n,r=e.length,i=-1,a=[];if(null==t)for(;++i<r;)isNaN(n=p(e[i]))||a.push(n);else for(;++i<r;)isNaN(n=p(t(e[i],i,e)))||a.push(n);return R(a.sort(o),.5)},L=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n},q=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r>n&&(r=n);return r},$=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},j=function(e,t){if(n=e.length){var n,r,i=0,a=0,u=e[a];for(null==t&&(t=o);++i<n;)(t(r=e[i],u)<0||0!==t(u,u))&&(u=r,a=i);return 0===t(u,u)?a:void 0}},F=function(e,t,n){for(var r,i,a=(null==n?e.length:n)-(t=null==t?0:+t);a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},I=function(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a},U=function(e){if(!(i=e.length))return[];for(var t=-1,n=q(e,a),r=new Array(n);++t<n;)for(var i,o=-1,u=r[t]=new Array(i);++o<i;)u[o]=e[o][t];return r},B=function(){return U(arguments)};e.bisect=f,e.bisectRight=f,e.bisectLeft=c,e.ascending=o,e.bisector=u,e.cross=d,e.descending=h,e.deviation=m,e.extent=v,e.histogram=C,e.thresholdFreedmanDiaconis=T,e.thresholdScott=z,e.thresholdSturges=A,
e.max=N,e.mean=D,e.median=P,e.merge=L,e.min=q,e.pairs=l,e.permute=$,e.quantile=R,e.range=k,e.scan=j,e.shuffle=F,e.sum=I,e.ticks=O,e.tickIncrement=r,e.tickStep=i,e.transpose=U,e.variance=g,e.zip=B,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){}function n(e,n){var r=new t;if(e instanceof t)e.each(function(e,t){r.set(t,e)});else if(Array.isArray(e)){var i,a=-1,o=e.length;if(null==n)for(;++a<o;)r.set(a,e[a]);else for(;++a<o;)r.set(n(i=e[a],a,e),i)}else if(e)for(var u in e)r.set(u,e[u]);return r}function r(){return{}}function i(e,t,n){e[t]=n}function a(){return n()}function o(e,t,n){e.set(t,n)}function u(){}function s(e,t){var n=new u;if(e instanceof u)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}var f="$";t.prototype=n.prototype={constructor:t,has:function(e){return f+e in this},get:function(e){return this[f+e]},set:function(e,t){return this[f+e]=t,this},remove:function(e){var t=f+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===f&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===f&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===f&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===f&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===f&&++e;return e},empty:function(){for(var e in this)if(e[0]===f)return!1;return!0},each:function(e){for(var t in this)t[0]===f&&e(this[t],t.slice(1),this)}};var c=function(){function e(t,r,i,a){if(r>=c.length)return null!=u&&t.sort(u),null!=s?s(t):t;for(var o,f,l,d=-1,h=t.length,p=c[r++],g=n(),m=i();++d<h;)(l=g.get(o=p(f=t[d])+""))?l.push(f):g.set(o,[f]);return g.each(function(t,n){a(m,n,e(t,r,i,a))}),m}function t(e,n){if(++n>c.length)return e;var r,i=l[n-1];return null!=s&&n>=c.length?r=e.entries():(r=[],e.each(function(e,i){r.push({key:i,values:t(e,n)})})),null!=i?r.sort(function(e,t){return i(e.key,t.key)}):r}var u,s,f,c=[],l=[];return f={object:function(t){return e(t,0,r,i)},map:function(t){return e(t,0,a,o)},entries:function(n){return t(e(n,0,a,o),0)},key:function(e){return c.push(e),f},sortKeys:function(e){return l[c.length-1]=e,f},sortValues:function(e){return u=e,f},rollup:function(e){return s=e,f}}},l=n.prototype;u.prototype=s.prototype={constructor:u,has:l.has,add:function(e){return e+="",this[f+e]=e,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each};var d=function(e){var t=[];for(var n in e)t.push(n);return t},h=function(e){var t=[];for(var n in e)t.push(e[n]);return t},p=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t};e.nest=c,e.set=s,e.map=n,e.keys=d,e.values=h,e.entries=p,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function n(){}function r(e){var t;return e=(e+"").trim().toLowerCase(),(t=L.exec(e))?(t=parseInt(t[1],16),new s(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=q.exec(e))?i(parseInt(t[1],16)):(t=$.exec(e))?new s(t[1],t[2],t[3],1):(t=j.exec(e))?new s(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=F.exec(e))?a(t[1],t[2],t[3],t[4]):(t=I.exec(e))?a(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=U.exec(e))?c(t[1],t[2]/100,t[3]/100,1):(t=B.exec(e))?c(t[1],t[2]/100,t[3]/100,t[4]):W.hasOwnProperty(e)?i(W[e]):"transparent"===e?new s(NaN,NaN,NaN,0):null}function i(e){return new s(e>>16&255,e>>8&255,255&e,1)}function a(e,t,n,r){return r<=0&&(e=t=n=NaN),new s(e,t,n,r)}function o(e){return e instanceof n||(e=r(e)),e?(e=e.rgb(),new s(e.r,e.g,e.b,e.opacity)):new s}function u(e,t,n,r){return 1===arguments.length?o(e):new s(e,t,n,null==r?1:r)}function s(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function f(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function c(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new h(e,t,n,r)}function l(e){if(e instanceof h)return new h(e.h,e.s,e.l,e.opacity);if(e instanceof n||(e=r(e)),!e)return new h;if(e instanceof h)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,o=Math.min(t,i,a),u=Math.max(t,i,a),s=NaN,f=u-o,c=(u+o)/2;return f?(s=t===u?(i-a)/f+6*(i<a):i===u?(a-t)/f+2:(t-i)/f+4,f/=c<.5?u+o:2-u-o,s*=60):f=c>0&&c<1?0:s,new h(s,f,c,e.opacity)}function d(e,t,n,r){return 1===arguments.length?l(e):new h(e,t,n,null==r?1:r)}function h(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function p(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function g(e){if(e instanceof y)return new y(e.l,e.a,e.b,e.opacity);if(e instanceof E){if(isNaN(e.h))return new y(e.l,0,0,e.opacity);var t=e.h*G;return new y(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof s||(e=o(e));var n,r,i=w(e.r),a=w(e.g),u=w(e.b),f=b((.2225045*i+.7168786*a+.0606169*u)/X);return i===a&&a===u?n=r=f:(n=b((.4360747*i+.3850649*a+.1430804*u)/V),r=b((.0139322*i+.0971045*a+.7141733*u)/Z)),new y(116*f-16,500*(n-f),200*(f-r),e.opacity)}function m(e,t){return new y(e,0,0,null==t?1:t)}function v(e,t,n,r){return 1===arguments.length?g(e):new y(e,t,n,null==r?1:r)}function y(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function b(e){return e>ee?Math.pow(e,1/3):e/K+J}function _(e){return e>Q?e*e*e:K*(e-J)}function x(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function w(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function k(e){if(e instanceof E)return new E(e.h,e.c,e.l,e.opacity);if(e instanceof y||(e=g(e)),0===e.a&&0===e.b)return new E(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Y;return new E(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function M(e,t,n,r){return 1===arguments.length?k(e):new E(n,t,e,null==r?1:r)}function S(e,t,n,r){return 1===arguments.length?k(e):new E(e,t,n,null==r?1:r)}function E(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function O(e){if(e instanceof C)return new C(e.h,e.s,e.l,e.opacity);e instanceof s||(e=o(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(se*r+oe*t-ue*n)/(se+oe-ue),a=r-i,u=(ae*(n-i)-re*a)/ie,f=Math.sqrt(u*u+a*a)/(ae*i*(1-i)),c=f?Math.atan2(u,a)*Y-120:NaN;return new C(c<0?c+360:c,f,i,e.opacity)}function A(e,t,n,r){return 1===arguments.length?O(e):new C(e,t,n,null==r?1:r)}function C(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}var R=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e},T=.7,z=1/T,N="\\s*([+-]?\\d+)\\s*",D="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",P="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",L=/^#([0-9a-f]{3})$/,q=/^#([0-9a-f]{6})$/,$=new RegExp("^rgb\\("+[N,N,N]+"\\)$"),j=new RegExp("^rgb\\("+[P,P,P]+"\\)$"),F=new RegExp("^rgba\\("+[N,N,N,D]+"\\)$"),I=new RegExp("^rgba\\("+[P,P,P,D]+"\\)$"),U=new RegExp("^hsl\\("+[D,P,P]+"\\)$"),B=new RegExp("^hsla\\("+[D,P,P,D]+"\\)$"),W={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R(n,r,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),R(s,u,t(n,{brighter:function(e){return e=null==e?z:Math.pow(z,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new s(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+f(this.r)+f(this.g)+f(this.b)},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),R(h,d,t(n,{brighter:function(e){return e=null==e?z:Math.pow(z,e),new h(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new h(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new s(p(e>=240?e-240:e+120,i,r),p(e,i,r),p(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var G=Math.PI/180,Y=180/Math.PI,H=18,V=.96422,X=1,Z=.82521,J=4/29,Q=6/29,K=3*Q*Q,ee=Q*Q*Q;R(y,v,t(n,{brighter:function(e){return new y(this.l+H*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new y(this.l-H*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=V*_(t),e=X*_(e),n=Z*_(n),new s(x(3.1338561*t-1.6168667*e-.4906146*n),x(-.9787684*t+1.9161415*e+.033454*n),x(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),R(E,S,t(n,{brighter:function(e){return new E(this.h,this.c,this.l+H*(null==e?1:e),this.opacity)},darker:function(e){return new E(this.h,this.c,this.l-H*(null==e?1:e),this.opacity)},rgb:function(){return g(this).rgb()}}));var te=-.14861,ne=1.78277,re=-.29227,ie=-.90649,ae=1.97294,oe=ae*ie,ue=ae*ne,se=ne*re-ie*te;R(C,A,t(n,{brighter:function(e){return e=null==e?z:Math.pow(z,e),new C(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new C(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*G,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new s(255*(t+n*(te*r+ne*i)),255*(t+n*(re*r+ie*i)),255*(t+n*(ae*r)),this.opacity)}})),e.color=r,e.rgb=u,e.hsl=d,e.lab=v,e.hcl=S,e.lch=M,e.gray=m,e.cubehelix=A,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(18))}(this,function(e,t){"use strict";function n(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function r(e,t){return function(n){return e+n*t}}function i(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function a(e,t){var n=t-e;return n?r(e,n>180||n<-180?n-360*Math.round(n/360):n):A(isNaN(e)?t:e)}function o(e){return 1===(e=+e)?u:function(t,n){return n-t?i(t,n,e):A(isNaN(t)?n:t)}}function u(e,t){var n=t-e;return n?r(e,n):A(isNaN(e)?t:e)}function s(e){return function(n){var r,i,a=n.length,o=new Array(a),u=new Array(a),s=new Array(a);for(r=0;r<a;++r)i=t.rgb(n[r]),o[r]=i.r||0,u[r]=i.g||0,s[r]=i.b||0;return o=e(o),u=e(u),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=u(e),i.b=s(e),i+""}}}function f(e){return function(){return e}}function c(e){return function(t){return e(t)+""}}function l(e){return"none"===e?U:(w||(w=document.createElement("DIV"),k=document.documentElement,M=document.defaultView),w.style.transform=e,e=M.getComputedStyle(k.appendChild(w),null).getPropertyValue("transform"),k.removeChild(w),e=e.slice(7,-1).split(","),B(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function d(e){return null==e?U:(S||(S=document.createElementNS("http://www.w3.org/2000/svg","g")),S.setAttribute("transform",e),(e=S.transform.baseVal.consolidate())?(e=e.matrix,B(e.a,e.b,e.c,e.d,e.e,e.f)):U)}function h(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function a(e,r,i,a,o,u){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:D(e,i)},{i:s-2,x:D(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}function o(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:D(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function u(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:D(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function s(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:D(e,n)},{i:u-2,x:D(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),u(t.skewX,n.skewX,r,i),s(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t,n=-1,a=i.length;++n<a;)r[(t=i[n]).i]=t.x(e);return r.join("")}}}function p(e){return((e=Math.exp(e))+1/e)/2}function g(e){return((e=Math.exp(e))-1/e)/2}function m(e){return((e=Math.exp(2*e))-1)/(e+1)}function v(e){return function(n,r){var i=e((n=t.hsl(n)).h,(r=t.hsl(r)).h),a=u(n.s,r.s),o=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(e){return n.h=i(e),n.s=a(e),n.l=o(e),n.opacity=s(e),n+""}}}function y(e,n){var r=u((e=t.lab(e)).l,(n=t.lab(n)).l),i=u(e.a,n.a),a=u(e.b,n.b),o=u(e.opacity,n.opacity);return function(t){return e.l=r(t),e.a=i(t),e.b=a(t),e.opacity=o(t),e+""}}function b(e){return function(n,r){var i=e((n=t.hcl(n)).h,(r=t.hcl(r)).h),a=u(n.c,r.c),o=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(e){return n.h=i(e),n.c=a(e),n.l=o(e),n.opacity=s(e),n+""}}}function _(e){return function n(r){function i(n,i){var a=e((n=t.cubehelix(n)).h,(i=t.cubehelix(i)).h),o=u(n.s,i.s),s=u(n.l,i.l),f=u(n.opacity,i.opacity);return function(e){return n.h=a(e),n.s=o(e),n.l=s(Math.pow(e,r)),n.opacity=f(e),n+""}}return r=+r,i.gamma=n,i}(1)}function x(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}var w,k,M,S,E=function(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[i],o=e[i+1],u=i>0?e[i-1]:2*a-o,s=i<t-1?e[i+2]:2*o-a;return n((r-i/t)*t,u,a,o,s)}},O=function(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),a=e[(i+t-1)%t],o=e[i%t],u=e[(i+1)%t],s=e[(i+2)%t];return n((r-i/t)*t,a,o,u,s)}},A=function(e){return function(){return e}},C=function e(n){function r(e,n){var r=i((e=t.rgb(e)).r,(n=t.rgb(n)).r),a=i(e.g,n.g),o=i(e.b,n.b),s=u(e.opacity,n.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=s(t),e+""}}var i=o(n);return r.gamma=e,r}(1),R=s(E),T=s(O),z=function(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=j(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}},N=function(e,t){var n=new Date;return e=+e,t-=e,function(r){return n.setTime(e+t*r),n}},D=function(e,t){return e=+e,t-=e,function(n){return e+t*n}},P=function(e,t){var n,r={},i={};null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={});for(n in t)n in e?r[n]=j(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},L=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,q=new RegExp(L.source,"g"),$=function(e,t){var n,r,i,a=L.lastIndex=q.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=L.exec(e))&&(r=q.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:D(n,r)})),a=q.lastIndex;return a<t.length&&(i=t.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?c(s[0].x):f(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})},j=function(e,n){var r,i=typeof n;return null==n||"boolean"===i?A(n):("number"===i?D:"string"===i?(r=t.color(n))?(n=r,C):$:n instanceof t.color?C:n instanceof Date?N:Array.isArray(n)?z:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?P:D)(e,n)},F=function(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}},I=180/Math.PI,U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},B=function(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*I,skewX:Math.atan(s)*I,scaleX:o,scaleY:u}},W=h(l,"px, ","px)","deg)"),G=h(d,", ",")",")"),Y=Math.SQRT2,H=2,V=4,X=1e-12,Z=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=t[0],s=t[1],f=t[2],c=u-i,l=s-a,d=c*c+l*l;if(d<X)r=Math.log(f/o)/Y,n=function(e){return[i+e*c,a+e*l,o*Math.exp(Y*e*r)]};else{var h=Math.sqrt(d),v=(f*f-o*o+V*d)/(2*o*H*h),y=(f*f-o*o-V*d)/(2*f*H*h),b=Math.log(Math.sqrt(v*v+1)-v),_=Math.log(Math.sqrt(y*y+1)-y);r=(_-b)/Y,n=function(e){var t=e*r,n=p(b),u=o/(H*h)*(n*m(Y*t+b)-g(b));return[i+u*c,a+u*l,o*n/p(Y*t+b)]}}return n.duration=1e3*r,n},J=v(a),Q=v(u),K=b(a),ee=b(u),te=_(a),ne=_(u),re=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};e.interpolate=j,e.interpolateArray=z,e.interpolateBasis=E,e.interpolateBasisClosed=O,e.interpolateDate=N,e.interpolateNumber=D,e.interpolateObject=P,e.interpolateRound=F,e.interpolateString=$,e.interpolateTransformCss=W,e.interpolateTransformSvg=G,e.interpolateZoom=Z,e.interpolateRgb=C,e.interpolateRgbBasis=R,e.interpolateRgbBasisClosed=T,e.interpolateHsl=J,e.interpolateHslLong=Q,e.interpolateLab=y,e.interpolateHcl=K,e.interpolateHclLong=ee,e.interpolateCubehelix=te,e.interpolateCubehelixLong=ne,e.piecewise=x,e.quantize=re,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,n,r,o){function u(t){return e(t=new Date(+t)),t}return u.floor=u,u.ceil=function(t){return e(t=new Date(t-1)),n(t,1),e(t),t},u.round=function(e){var t=u(e),n=u.ceil(e);return e-t<n-e?t:n},u.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},u.range=function(t,r,i){var a,o=[];if(t=u.ceil(t),i=null==i?1:Math.floor(i),!(t<r&&i>0))return o;do o.push(a=new Date(+t)),n(t,i),e(t);while(a<t&&t<r);return o},u.filter=function(r){return t(function(t){if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){if(e>=e)if(t<0)for(;++t<=0;)for(;n(e,-1),!r(e););else for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(u.count=function(t,n){return i.setTime(+t),a.setTime(+n),e(i),e(a),Math.floor(r(i,a))},u.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?u.filter(o?function(t){return o(t)%e===0}:function(t){return u.count(0,t)%e===0}):u:null}),u}function n(e){return t(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*f)/d})}function r(e){return t(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/d})}var i=new Date,a=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):o:null};var u=o.range,s=1e3,f=6e4,c=36e5,l=864e5,d=6048e5,h=t(function(e){e.setTime(Math.floor(e/s)*s)},function(e,t){e.setTime(+e+t*s)},function(e,t){return(t-e)/s},function(e){return e.getUTCSeconds()}),p=h.range,g=t(function(e){e.setTime(Math.floor(e/f)*f)},function(e,t){e.setTime(+e+t*f)},function(e,t){return(t-e)/f},function(e){return e.getMinutes()}),m=g.range,v=t(function(e){var t=e.getTimezoneOffset()*f%c;t<0&&(t+=c),e.setTime(Math.floor((+e-t)/c)*c+t)},function(e,t){e.setTime(+e+t*c)},function(e,t){return(t-e)/c},function(e){return e.getHours()}),y=v.range,b=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*f)/l},function(e){return e.getDate()-1}),_=b.range,x=n(0),w=n(1),k=n(2),M=n(3),S=n(4),E=n(5),O=n(6),A=x.range,C=w.range,R=k.range,T=M.range,z=S.range,N=E.range,D=O.range,P=t(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),L=P.range,q=t(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});q.every=function(e){return isFinite(e=Math.floor(e))&&e>0?t(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var $=q.range,j=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*f)},function(e,t){return(t-e)/f},function(e){return e.getUTCMinutes()}),F=j.range,I=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*c)},function(e,t){return(t-e)/c},function(e){return e.getUTCHours()}),U=I.range,B=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/l},function(e){return e.getUTCDate()-1}),W=B.range,G=r(0),Y=r(1),H=r(2),V=r(3),X=r(4),Z=r(5),J=r(6),Q=G.range,K=Y.range,ee=H.range,te=V.range,ne=X.range,re=Z.range,ie=J.range,ae=t(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),oe=ae.range,ue=t(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ue.every=function(e){return isFinite(e=Math.floor(e))&&e>0?t(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var se=ue.range;e.timeInterval=t,e.timeMillisecond=o,e.timeMilliseconds=u,e.utcMillisecond=o,e.utcMilliseconds=u,e.timeSecond=h,e.timeSeconds=p,e.utcSecond=h,e.utcSeconds=p,e.timeMinute=g,e.timeMinutes=m,e.timeHour=v,e.timeHours=y,e.timeDay=b,e.timeDays=_,e.timeWeek=x,e.timeWeeks=A,e.timeSunday=x,e.timeSundays=A,e.timeMonday=w,e.timeMondays=C,e.timeTuesday=k,e.timeTuesdays=R,e.timeWednesday=M,e.timeWednesdays=T,e.timeThursday=S,e.timeThursdays=z,e.timeFriday=E,e.timeFridays=N,e.timeSaturday=O,e.timeSaturdays=D,e.timeMonth=P,e.timeMonths=L,e.timeYear=q,e.timeYears=$,e.utcMinute=j,e.utcMinutes=F,e.utcHour=I,e.utcHours=U,e.utcDay=B,e.utcDays=W,e.utcWeek=G,e.utcWeeks=Q,e.utcSunday=G,e.utcSundays=Q,e.utcMonday=Y,e.utcMondays=K,e.utcTuesday=H,e.utcTuesdays=ee,e.utcWednesday=V,e.utcWednesdays=te,e.utcThursday=X,e.utcThursdays=ne,e.utcFriday=Z,e.utcFridays=re,e.utcSaturday=J,e.utcSaturdays=ie,e.utcMonth=ae,e.utcMonths=oe,e.utcYear=ue,e.utcYears=se,Object.defineProperty(e,"__esModule",{value:!0})})},,function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}var i=n(225);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}var i=n(208);e.exports=r},function(e,t,n){var r=n(87),i=r(Object,"create");e.exports=i},function(e,t,n){(function(t,r){function i(e,n){if(!(this instanceof i))return new i(e,n);if(!i.Promise)throw new Error("native promise missing, set Fetch.Promise to your favorite alternative");c.Promise=i.Promise;var r=this;return new i.Promise(function(c,g){var m=new h(e,n);if(!m.protocol||!m.hostname)throw new Error("only absolute urls are supported");if("http:"!==m.protocol&&"https:"!==m.protocol)throw new Error("only http(s) protocols are supported");var v;v="https:"===m.protocol?u.request:o.request;var y=new d(m.headers);m.compress&&y.set("accept-encoding","gzip,deflate"),y.has("user-agent")||y.set("user-agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),y.has("connection")||m.agent||y.set("connection","close"),y.has("accept")||y.set("accept","*/*"),!y.has("content-type")&&m.body&&"function"==typeof m.body.getBoundary&&y.set("content-type","multipart/form-data; boundary="+m.body.getBoundary()),!y.has("content-length")&&/post|put|patch|delete/i.test(m.method)&&("string"==typeof m.body?y.set("content-length",t.byteLength(m.body)):m.body&&"function"==typeof m.body.getLengthSync?m.body._lengthRetrievers&&0==m.body._lengthRetrievers.length?y.set("content-length",m.body.getLengthSync().toString()):m.body.hasKnownLength&&m.body.hasKnownLength()&&y.set("content-length",m.body.getLengthSync().toString()):void 0!==m.body&&null!==m.body||y.set("content-length","0")),m.headers=y.raw(),m.headers.host&&(m.headers.host=m.headers.host[0]);var b,_=v(m);m.timeout&&_.once("socket",function(e){b=setTimeout(function(){_.abort(),g(new p("network timeout at: "+m.url,"request-timeout"))},m.timeout)}),_.on("error",function(e){clearTimeout(b),g(new p("request to "+m.url+" failed, reason: "+e.message,"system",e))}),_.on("response",function(e){if(clearTimeout(b),r.isRedirect(e.statusCode)&&"manual"!==m.redirect)return"error"===m.redirect?void g(new p("redirect mode is set to error: "+m.url,"no-redirect")):m.counter>=m.follow?void g(new p("maximum redirect reached at: "+m.url,"max-redirect")):e.headers.location?(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==m.method)||(m.method="GET",delete m.body,delete m.headers["content-length"]),m.counter++,void c(i(a(m.url,e.headers.location),m))):void g(new p("redirect location header missing at: "+m.url,"invalid-redirect"));var t=new d(e.headers);"manual"===m.redirect&&t.has("location")&&t.set("location",a(m.url,t.get("location")));var n,o=e.pipe(new f.PassThrough),u={url:m.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:m.size,timeout:m.timeout};if(!m.compress||"HEAD"===m.method||!t.has("content-encoding")||204===e.statusCode||304===e.statusCode)return n=new l(o,u),void c(n);var h=t.get("content-encoding");if("gzip"==h||"x-gzip"==h)return o=o.pipe(s.createGunzip()),n=new l(o,u),void c(n);if("deflate"==h||"x-deflate"==h){var v=e.pipe(new f.PassThrough);return void v.once("data",function(e){o=8===(15&e[0])?o.pipe(s.createInflate()):o.pipe(s.createInflateRaw()),n=new l(o,u),c(n)})}n=new l(o,u),c(n)}),"string"==typeof m.body?(_.write(m.body),_.end()):m.body instanceof t?(_.write(m.body),_.end()):"object"==typeof m.body&&m.body.pipe?m.body.pipe(_):"object"==typeof m.body?(_.write(m.body.toString()),_.end()):_.end()})}var a=(n(28).parse,n(28).resolve),o=n(51),u=n(271),s=n(270),f=n(13),c=n(47),l=n(232),d=n(48),h=n(231),p=n(89);e.exports=i,e.exports.default=e.exports,i.prototype.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},i.Promise=r.Promise,i.Response=l,i.Headers=d,i.Request=h}).call(t,n(1).Buffer,function(){return this}())},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},a={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(r)},function(e,t,n){(function(t){"use strict";function n(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,u=arguments.length;switch(u){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(a=new Array(u-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick(function(){e.apply(null,a)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(t,n(2))},function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&f.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function a(e){return f.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function o(e,t){return i(e,!1,!0).resolve(t)}function u(e,t){return e?i(e,!1,!0).resolveObject(t):t}var s=n(261),f=n(262);t.parse=i,t.resolve=o,t.resolveObject=u,t.format=a,t.Url=r;var c=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(h),g=["'"].concat(p),m=["%","/","?",";","#"].concat(g),v=["/","?","#"],y=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},M=n(245);r.prototype.parse=function(e,t,n){if(!f.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=r!==-1&&r<e.indexOf("#")?"?":"#",a=e.split(i),o=/\\/g;
a[0]=a[0].replace(o,"/"),e=a.join(i);var u=e;if(u=u.trim(),!n&&1===e.split("#").length){var l=d.exec(u);if(l)return this.path=u,this.href=u,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=M.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=c.exec(u);if(h){h=h[0];var p=h.toLowerCase();this.protocol=p,u=u.substr(h.length)}if(n||h||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===u.substr(0,2);!S||h&&w[h]||(u=u.substr(2),this.slashes=!0)}if(!w[h]&&(S||h&&!k[h])){for(var E=-1,O=0;O<v.length;O++){var A=u.indexOf(v[O]);A!==-1&&(E===-1||A<E)&&(E=A)}var C,R;R=E===-1?u.lastIndexOf("@"):u.lastIndexOf("@",E),R!==-1&&(C=u.slice(0,R),u=u.slice(R+1),this.auth=decodeURIComponent(C)),E=-1;for(var O=0;O<m.length;O++){var A=u.indexOf(m[O]);A!==-1&&(E===-1||A<E)&&(E=A)}E===-1&&(E=u.length),this.host=u.slice(0,E),u=u.slice(E),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var z=this.hostname.split(/\./),O=0,N=z.length;O<N;O++){var D=z[O];if(D&&!D.match(b)){for(var P="",L=0,q=D.length;L<q;L++)P+=D.charCodeAt(L)>127?"x":D[L];if(!P.match(b)){var $=z.slice(0,O),j=z.slice(O+1),F=D.match(_);F&&($.push(F[1]),j.unshift(F[2])),j.length&&(u="/"+j.join(".")+u),this.hostname=$.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=s.toASCII(this.hostname));var I=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+I,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!x[p])for(var O=0,N=g.length;O<N;O++){var B=g[O];if(u.indexOf(B)!==-1){var W=encodeURIComponent(B);W===B&&(W=escape(B)),u=u.split(B).join(W)}}var G=u.indexOf("#");G!==-1&&(this.hash=u.substr(G),u=u.slice(0,G));var Y=u.indexOf("?");if(Y!==-1?(this.search=u.substr(Y),this.query=u.substr(Y+1),t&&(this.query=M.parse(this.query)),u=u.slice(0,Y)):t&&(this.search="",this.query={}),u&&(this.pathname=u),k[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",H=this.search||"";this.path=I+H}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(a=M.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+i+n+o+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(f.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),a=0;a<i.length;a++){var o=i[a];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),s=0;s<u.length;s++){var c=u[s];"protocol"!==c&&(n[c]=e[c])}return k[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!k[e.protocol]){for(var l=Object.keys(e),d=0;d<l.length;d++){var h=l[d];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||w[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",m=n.search||"";n.path=g+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||v||n.host&&e.pathname,_=b,x=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],M=n.protocol&&!k[n.protocol];if(M&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),b=b&&(""===p[0]||""===x[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),n.search=e.search,n.query=e.query;else if(!f.isNullOrUndefined(e.search)){if(M){n.hostname=n.host=x.shift();var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return n.search=e.search,n.query=e.query,f.isNull(n.pathname)&&f.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=x.slice(-1)[0],O=(n.host||e.host||x.length>1)&&("."===E||".."===E)||""===E,A=0,C=x.length;C>=0;C--)E=x[C],"."===E?x.splice(C,1):".."===E?(x.splice(C,1),A++):A&&(x.splice(C,1),A--);if(!b&&!_)for(;A--;A)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),O&&"/"!==x.join("/").substr(-1)&&x.push("");var R=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(M){n.hostname=n.host=R?"":x.length?x.shift():"";var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return b=b||n.host&&x.length,b&&!R&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),f.isNull(n.pathname)&&f.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){function r(e){return n(i(e))}function i(e){return a[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var a={"./vega":55,"./vega-core":100,"./vega-core.js":100,"./vega-core.min":101,"./vega-core.min.js":101,"./vega-schema.json":187,"./vega.js":55,"./vega.min":102,"./vega.min.js":102};r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=29},function(e,t){},,,,,function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return new n(e)}function n(e){if(!(t=s.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function r(t){return c=v(t),e.format=c.format,e.formatPrefix=c.formatPrefix,c}var i=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},a=function(e){return e=i(Math.abs(e)),e?e[1]:NaN},o=function(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}},u=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},s=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;t.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var f,c,l=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e},d=function(e,t){var n=i(e,t);if(!n)return e+"";var r=n[0],a=n[1],o=a-(f=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+i(e,Math.max(0,t+o-1))[0]},h=function(e,t){var n=i(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")},p={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return h(100*e,t)},r:h,s:d,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},g=function(e){return e},m=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],v=function(e){function n(e){function n(e){var t,n,u,s=w,h=k;if("c"===x)h=M(e)+h,e="";else{e=+e;var p=e<0;if(e=M(Math.abs(e),b),_&&(e=l(e)),p&&0===+e&&(p=!1),s=(p?"("===o?o:"-":"-"===o||"("===o?"":o)+s,h=("s"===x?m[8+f/3]:"")+h+(p&&"("===o?")":""),S)for(t=-1,n=e.length;++t<n;)if(u=e.charCodeAt(t),48>u||u>57){h=(46===u?c+e.slice(t+1):e.slice(t))+h,e=e.slice(0,t);break}}y&&!g&&(e=i(e,1/0));var E=s.length+e.length+h.length,O=E<v?new Array(v-E+1).join(r):"";switch(y&&g&&(e=i(O+e,O.length?v-h.length:1/0),O=""),a){case"<":e=s+e+h+O;break;case"=":e=s+O+e+h;break;case"^":e=O.slice(0,E=O.length>>1)+s+e+h+O.slice(E);break;default:e=O+s+e+h}return d(e)}e=t(e);var r=e.fill,a=e.align,o=e.sign,u=e.symbol,g=e.zero,v=e.width,y=e.comma,b=e.precision,_=e.trim,x=e.type;"n"===x?(y=!0,x="g"):p[x]||(null==b&&(b=12),_=!0,x="g"),(g||"0"===r&&"="===a)&&(g=!0,r="0",a="=");var w="$"===u?s[0]:"#"===u&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",k="$"===u?s[1]:/[%p]/.test(x)?h:"",M=p[x],S=/[defgprs%]/.test(x);return b=null==b?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b)),n.toString=function(){return e+""},n}function r(e,r){var i=n((e=t(e),e.type="f",e)),o=3*Math.max(-8,Math.min(8,Math.floor(a(r)/3))),u=Math.pow(10,-o),s=m[8+o/3];return function(e){return i(u*e)+s}}var i=e.grouping&&e.thousands?o(e.grouping,e.thousands):g,s=e.currency,c=e.decimal,d=e.numerals?u(e.numerals):g,h=e.percent||"%";return{format:n,formatPrefix:r}};r({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var y=function(e){return Math.max(0,-a(Math.abs(e)))},b=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(a(t)/3)))-a(Math.abs(e)))},_=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,a(t)-a(e))+1};e.formatDefaultLocale=r,e.formatLocale=v,e.formatSpecifier=t,e.precisionFixed=y,e.precisionPrefix=b,e.precisionRound=_,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new t}var r=Math.PI,i=2*r,a=1e-6,o=i-a;t.prototype=n.prototype={constructor:t,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,i,o){e=+e,t=+t,n=+n,i=+i,o=+o;var u=this._x1,s=this._y1,f=n-e,c=i-t,l=u-e,d=s-t,h=l*l+d*d;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>a)if(Math.abs(d*f-c*l)>a&&o){var p=n-u,g=i-s,m=f*f+c*c,v=p*p+g*g,y=Math.sqrt(m),b=Math.sqrt(h),_=o*Math.tan((r-Math.acos((m+h-v)/(2*y*b)))/2),x=_/b,w=_/y;Math.abs(x-1)>a&&(this._+="L"+(e+x*l)+","+(t+x*d)),this._+="A"+o+","+o+",0,0,"+ +(d*p>l*g)+","+(this._x1=e+w*f)+","+(this._y1=t+w*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,u,s,f){e=+e,t=+t,n=+n;var c=n*Math.cos(u),l=n*Math.sin(u),d=e+c,h=t+l,p=1^f,g=f?u-s:s-u;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+d+","+h:(Math.abs(this._x1-d)>a||Math.abs(this._y1-h)>a)&&(this._+="L"+d+","+h),n&&(g<0&&(g=g%i+i),g>o?this._+="A"+n+","+n+",0,1,"+p+","+(e-c)+","+(t-l)+"A"+n+","+n+",0,1,"+p+","+(this._x1=d)+","+(this._y1=h):g>a&&(this._+="A"+n+","+n+",0,"+ +(g>=r)+","+p+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=t+n*Math.sin(s))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},e.path=n,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(20))}(this,function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){function a(e,t){return function(n){var r,i,a,o=[],u=-1,s=0,f=e.length;for(n instanceof Date||(n=new Date(+n));++u<f;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(i=me[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function o(e,n){return function(a){var o,s,f=i(1900),c=u(f,e,a+="",0);if(c!=a.length)return null;if("Q"in f)return new Date(f.Q);if("p"in f&&(f.H=f.H%12+12*f.p),"V"in f){if(f.V<1||f.V>53)return null;"w"in f||(f.w=1),"Z"in f?(o=r(i(f.y)),s=o.getUTCDay(),o=s>4||0===s?t.utcMonday.ceil(o):t.utcMonday(o),o=t.utcDay.offset(o,7*(f.V-1)),f.y=o.getUTCFullYear(),f.m=o.getUTCMonth(),f.d=o.getUTCDate()+(f.w+6)%7):(o=n(i(f.y)),s=o.getDay(),o=s>4||0===s?t.timeMonday.ceil(o):t.timeMonday(o),o=t.timeDay.offset(o,7*(f.V-1)),f.y=o.getFullYear(),f.m=o.getMonth(),f.d=o.getDate()+(f.w+6)%7)}else("W"in f||"U"in f)&&("w"in f||(f.w="u"in f?f.u%7:"W"in f?1:0),s="Z"in f?r(i(f.y)).getUTCDay():n(i(f.y)).getDay(),f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(s+5)%7:f.w+7*f.U-(s+6)%7);return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,r(f)):n(f)}}function u(e,t,n,r){for(var i,a,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=Je[i in me?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function de(e,t,n){var r=je.exec(t.slice(n));return r?(e.p=Fe[r[0].toLowerCase()],n+r[0].length):-1}function he(e,t,n){var r=Be.exec(t.slice(n));return r?(e.w=We[r[0].toLowerCase()],n+r[0].length):-1}function pe(e,t,n){var r=Ie.exec(t.slice(n));return r?(e.w=Ue[r[0].toLowerCase()],n+r[0].length):-1}function ge(e,t,n){var r=He.exec(t.slice(n));return r?(e.m=Ve[r[0].toLowerCase()],n+r[0].length):-1}function ve(e,t,n){var r=Ge.exec(t.slice(n));return r?(e.m=Ye[r[0].toLowerCase()],n+r[0].length):-1}function ye(e,t,n){return u(e,Te,t,n)}function be(e,t,n){return u(e,ze,t,n)}function _e(e,t,n){return u(e,Ne,t,n)}function xe(e){return Le[e.getDay()]}function we(e){return Pe[e.getDay()]}function ke(e){return $e[e.getMonth()]}function Me(e){return qe[e.getMonth()]}function Se(e){return De[+(e.getHours()>=12)]}function Ee(e){return Le[e.getUTCDay()]}function Oe(e){return Pe[e.getUTCDay()]}function Ae(e){return $e[e.getUTCMonth()]}function Ce(e){return qe[e.getUTCMonth()]}function Re(e){return De[+(e.getUTCHours()>=12)]}var Te=e.dateTime,ze=e.date,Ne=e.time,De=e.periods,Pe=e.days,Le=e.shortDays,qe=e.months,$e=e.shortMonths,je=s(De),Fe=f(De),Ie=s(Pe),Ue=f(Pe),Be=s(Le),We=f(Le),Ge=s(qe),Ye=f(qe),He=s($e),Ve=f($e),Xe={a:xe,A:we,b:ke,B:Me,c:null,d:C,e:C,f:D,H:R,I:T,j:z,L:N,m:P,M:L,p:Se,Q:ce,s:le,S:q,u:$,U:j,V:F,w:I,W:U,x:null,X:null,y:B,Y:W,Z:G,"%":fe},Ze={a:Ee,A:Oe,b:Ae,B:Ce,c:null,d:Y,e:Y,f:J,H:H,I:V,j:X,L:Z,m:Q,M:K,p:Re,Q:ce,s:le,S:ee,u:te,U:ne,V:re,w:ie,W:ae,x:null,X:null,y:oe,Y:ue,Z:se,"%":fe},Je={a:he,A:pe,b:ge,B:ve,c:ye,d:b,e:b,f:S,H:x,I:x,j:_,L:M,m:y,M:w,p:de,Q:O,s:A,S:k,u:l,U:d,V:h,w:c,W:p,x:be,X:_e,y:m,Y:g,Z:v,"%":E};return Xe.x=a(ze,Xe),Xe.X=a(Ne,Xe),Xe.c=a(Te,Xe),Ze.x=a(ze,Ze),Ze.X=a(Ne,Ze),Ze.c=a(Te,Ze),{format:function(e){var t=a(e+="",Xe);return t.toString=function(){return e},t},parse:function(e){var t=o(e+="",n);return t.toString=function(){return e},t},utcFormat:function(e){var t=a(e+="",Ze);return t.toString=function(){return e},t},utcParse:function(e){var t=o(e,r);return t.toString=function(){return e},t}}}function o(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function u(e){return e.replace(be,"\\$&")}function s(e){return new RegExp("^(?:"+e.map(u).join("|")+")","i")}function f(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function c(e,t,n){var r=ve.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function l(e,t,n){var r=ve.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function d(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function h(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function p(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function g(e,t,n){var r=ve.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function m(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function v(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function y(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function _(e,t,n){var r=ve.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function x(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function w(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function k(e,t,n){var r=ve.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function M(e,t,n){var r=ve.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function S(e,t,n){var r=ve.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function E(e,t,n){var r=ye.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function O(e,t,n){var r=ve.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function A(e,t,n){var r=ve.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function C(e,t){return o(e.getDate(),t,2)}function R(e,t){return o(e.getHours(),t,2)}function T(e,t){return o(e.getHours()%12||12,t,2)}function z(e,n){return o(1+t.timeDay.count(t.timeYear(e),e),n,3)}function N(e,t){return o(e.getMilliseconds(),t,3)}function D(e,t){return N(e,t)+"000"}function P(e,t){return o(e.getMonth()+1,t,2)}function L(e,t){return o(e.getMinutes(),t,2)}function q(e,t){return o(e.getSeconds(),t,2)}function $(e){var t=e.getDay();return 0===t?7:t}function j(e,n){return o(t.timeSunday.count(t.timeYear(e),e),n,2)}function F(e,n){var r=e.getDay();return e=r>=4||0===r?t.timeThursday(e):t.timeThursday.ceil(e),o(t.timeThursday.count(t.timeYear(e),e)+(4===t.timeYear(e).getDay()),n,2)}function I(e){return e.getDay()}function U(e,n){return o(t.timeMonday.count(t.timeYear(e),e),n,2)}function B(e,t){return o(e.getFullYear()%100,t,2)}function W(e,t){return o(e.getFullYear()%1e4,t,4)}function G(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function Y(e,t){return o(e.getUTCDate(),t,2)}function H(e,t){return o(e.getUTCHours(),t,2)}function V(e,t){return o(e.getUTCHours()%12||12,t,2)}function X(e,n){return o(1+t.utcDay.count(t.utcYear(e),e),n,3)}function Z(e,t){return o(e.getUTCMilliseconds(),t,3)}function J(e,t){return Z(e,t)+"000"}function Q(e,t){return o(e.getUTCMonth()+1,t,2)}function K(e,t){return o(e.getUTCMinutes(),t,2)}function ee(e,t){return o(e.getUTCSeconds(),t,2)}function te(e){var t=e.getUTCDay();return 0===t?7:t}function ne(e,n){return o(t.utcSunday.count(t.utcYear(e),e),n,2)}function re(e,n){var r=e.getUTCDay();return e=r>=4||0===r?t.utcThursday(e):t.utcThursday.ceil(e),o(t.utcThursday.count(t.utcYear(e),e)+(4===t.utcYear(e).getUTCDay()),n,2)}function ie(e){return e.getUTCDay()}function ae(e,n){return o(t.utcMonday.count(t.utcYear(e),e),n,2)}function oe(e,t){return o(e.getUTCFullYear()%100,t,2)}function ue(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function se(){return"+0000"}function fe(){return"%"}function ce(e){return+e}function le(e){return Math.floor(+e/1e3)}function de(t){return ge=a(t),e.timeFormat=ge.format,e.timeParse=ge.parse,e.utcFormat=ge.utcFormat,e.utcParse=ge.utcParse,ge}function he(e){return e.toISOString()}function pe(e){var t=new Date(e);return isNaN(t)?null:t}var ge,me={"-":"",_:" ",0:"0"},ve=/^\s*\d+/,ye=/^%/,be=/[\\^$*+?|[\]().{}]/g;de({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var _e="%Y-%m-%dT%H:%M:%S.%LZ",xe=Date.prototype.toISOString?he:e.utcFormat(_e),we=+new Date("2000-01-01T00:00:00.000Z")?pe:e.utcParse(_e);e.timeFormatDefaultLocale=de,e.timeFormatLocale=a,e.isoFormat=xe,e.isoParse=we,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){return v||(_(n),v=b.now()+y)}function n(){v=0}function r(){this._call=this._time=this._next=null}function i(e,t,n){var i=new r;return i.restart(e,t,n),i}function a(){t(),++d;for(var e,n=c;n;)(e=v-n._time)>=0&&n._call.call(null,e),n=n._next;--d}function o(){v=(m=b.now())+y,d=h=0;try{a()}finally{d=0,s(),v=0}}function u(){var e=b.now(),t=e-m;t>g&&(y-=t,m=e)}function s(){for(var e,t,n=c,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:c=t);l=e,f(r)}function f(e){if(!d){h&&(h=clearTimeout(h));var t=e-v;t>24?(e<1/0&&(h=setTimeout(o,e-b.now()-y)),p&&(p=clearInterval(p))):(p||(m=b.now(),p=setInterval(u,g)),d=1,_(o))}}var c,l,d=0,h=0,p=0,g=1e3,m=0,v=0,y=0,b="object"==typeof performance&&performance.now?performance:Date,_="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};r.prototype=i.prototype={constructor:r,restart:function(e,n,r){if("function"!=typeof e)throw new TypeError("callback is not a function");r=(null==r?t():+r)+(null==n?0:+n),this._next||l===this||(l?l._next=this:c=this,l=this),this._call=e,this._time=r,f()},stop:function(){this._call&&(this._call=null,this._time=1/0,f())}};var x=function(e,t,n){var i=new r;return t=null==t?0:+t,i.restart(function(n){i.stop(),e(n+t)},t,n),i},w=function(e,n,i){var a=new r,o=n;return null==n?(a.restart(e,n,i),a):(n=+n,i=null==i?t():+i,a.restart(function t(r){r+=o,a.restart(t,o+=n,i),e(r)},n,i),a)};e.now=t,e.timer=i,e.timerFlush=a,e.timeout=x,e.interval=w,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){(function(t){"use strict";function r(e,n,r,u){r=o(r||"UTF-8"),n=o(n||"UTF-8"),e=e||"";var f;if("UTF-8"!==r&&"string"==typeof e&&(e=new t(e,"binary")),r===n)f="string"==typeof e?new t(e):e;else if(s&&!u)try{f=i(e,n,r)}catch(t){console.error(t);try{f=a(e,n,r)}catch(t){console.error(t),f=e}}else try{f=a(e,n,r)}catch(t){console.error(t),f=e}return"string"==typeof f&&(f=new t(f,"utf-8")),f}function i(e,t,n){var r,i;return i=new s(n,t+"//TRANSLIT//IGNORE"),r=i.convert(e),r.slice(0,r.length)}function a(e,t,n){return"UTF-8"===t?u.decode(e,n):"UTF-8"===n?u.encode(e,t):u.encode(u.decode(e,n),t)}function o(e){return(e||"").toString().trim().replace(/^latin[\-_]?(\d+)$/i,"ISO-8859-$1").replace(/^win(?:dows)?[\-_]?(\d+)$/i,"WINDOWS-$1").replace(/^utf[\-_]?(\d+)$/i,"UTF-$1").replace(/^ks_c_5601\-1987$/i,"CP949").replace(/^us[\-_]?ascii$/i,"ASCII").toUpperCase()}var u=n(175),s=n(40);e.exports.convert=r}).call(t,n(1).Buffer)},function(e,t,n){"use strict";var r,i;try{r="iconv",i=n(150)(r).Iconv}catch(e){}e.exports=i},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,s,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(a(n))for(u=Array.prototype.slice.call(arguments,1),f=n.slice(),i=f.length,s=0;s<i;s++)f[s].apply(this,u);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(u=o;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){e.exports=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]];
},function(e,t,n){var r=n(44),i=r.Symbol;e.exports=i},function(e,t,n){var r=n(199),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){function r(e){return"symbol"==typeof e||a(e)&&i(e)==o}var i=n(86),a=n(228),o="[object Symbol]";e.exports=r},function(e,t,n){(function(t,r){function i(e,t){t=t||{},this.body=e,this.bodyUsed=!1,this.size=t.size||0,this.timeout=t.timeout||0,this._raw=[],this._abort=!1}var a=n(39).convert,o=n(180),u=n(13).PassThrough,s=n(89);e.exports=i,i.prototype.json=function(){var e=this;return this._decode().then(function(t){try{return JSON.parse(t.toString())}catch(t){return i.Promise.reject(new s("invalid json response body at "+e.url+" reason: "+t.message,"invalid-json"))}})},i.prototype.text=function(){return this._decode().then(function(e){return e.toString()})},i.prototype.buffer=function(){return this._decode()},i.prototype._decode=function(){var e=this;return this.bodyUsed?i.Promise.reject(new Error("body used already for: "+this.url)):(this.bodyUsed=!0,this._bytes=0,this._abort=!1,this._raw=[],new i.Promise(function(n,r){var i;return"string"==typeof e.body?(e._bytes=e.body.length,e._raw=[new t(e.body)],n(e._convert())):e.body instanceof t?(e._bytes=e.body.length,e._raw=[e.body],n(e._convert())):(e.timeout&&(i=setTimeout(function(){e._abort=!0,r(new s("response timeout at "+e.url+" over limit: "+e.timeout,"body-timeout"))},e.timeout)),e.body.on("error",function(t){r(new s("invalid response body at: "+e.url+" reason: "+t.message,"system",t))}),e.body.on("data",function(t){if(!e._abort&&null!==t){if(e.size&&e._bytes+t.length>e.size)return e._abort=!0,void r(new s("content size at "+e.url+" over limit: "+e.size,"max-size"));e._bytes+=t.length,e._raw.push(t)}}),void e.body.on("end",function(){e._abort||(clearTimeout(i),n(e._convert()))}))}))},i.prototype._convert=function(e){e=e||"utf-8";var n,r,i=this.headers.get("content-type"),o="utf-8";if(i){if(!/text\/html|text\/plain|\+xml|\/xml/i.test(i))return t.concat(this._raw);n=/charset=([^;]*)/i.exec(i)}if(!n&&this._raw.length>0){for(var u=0;u<this._raw.length&&(r+=this._raw[u].toString(),!(r.length>1024));u++);r=r.substr(0,1024)}return!n&&r&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(r)),!n&&r&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(r),n&&(n=/charset=(.*)/i.exec(n.pop()))),!n&&r&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(r)),n&&(o=n.pop(),"gb2312"!==o&&"gbk"!==o||(o="gb18030")),a(t.concat(this._raw),e,o)},i.prototype._clone=function(e){var t,n,r=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o(r)&&"function"!=typeof r.getBoundary&&(t=new u,n=new u,r.pipe(t),r.pipe(n),e.body=t,r=n),r},i.Promise=r.Promise}).call(t,n(1).Buffer,function(){return this}())},function(e,t){function n(e){var t=this;this._headers={},e instanceof n&&(e=e.raw());for(var r in e)e.hasOwnProperty(r)&&("string"==typeof e[r]?this.set(r,e[r]):"number"!=typeof e[r]||isNaN(e[r])?Array.isArray(e[r])&&e[r].forEach(function(e){t.append(r,e.toString())}):this.set(r,e[r].toString()))}e.exports=n,n.prototype.get=function(e){var t=this._headers[e.toLowerCase()];return t?t[0]:null},n.prototype.getAll=function(e){return this.has(e)?this._headers[e.toLowerCase()]:[]},n.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this._headers).forEach(function(n){this._headers[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},n.prototype.set=function(e,t){this._headers[e.toLowerCase()]=[t]},n.prototype.append=function(e,t){return this.has(e)?void this._headers[e.toLowerCase()].push(t):void this.set(e,t)},n.prototype.has=function(e){return this._headers.hasOwnProperty(e.toLowerCase())},n.prototype.delete=function(e){delete this._headers[e.toLowerCase()]},n.prototype.raw=function(){return this._headers}},function(e,t,n){(function(t,r,i){"use strict";function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){O(t,e)}}function o(e){return D.from(e)}function u(e){return D.isBuffer(e)||e instanceof P}function s(){}function f(e,t){C=C||n(6),e=e||{};var r=t instanceof C;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,o=e.writableHighWaterMark,u=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:r&&(o||0===o)?this.highWaterMark=o:this.highWaterMark=u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function c(e){return C=C||n(6),q.call(c,this)||this instanceof C?(this._writableState=new f(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),void N.call(this)):new c(e)}function l(e,t){var n=new Error("write after end");e.emit("error",n),A.nextTick(t,n)}function d(e,t,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),A.nextTick(r,a),i=!1),i}function h(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=D.from(t,n)),t}function p(e,t,n,r,i,a){if(!n){var o=h(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var u=t.objectMode?1:r.length;t.length+=u;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,u,r,i,a);return s}function g(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function m(e,t,n,r,i){--t.pendingcb,n?(A.nextTick(i,r),A.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(v(n),t)m(e,n,r,t,i);else{var a=w(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),r?R(b,e,n,a,i):b(e,n,a,i)}}function b(e,t,n,r){n||_(e,t),t.pendingcb--,r(),S(e,t)}function _(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var u=0,s=!0;n;)i[u]=n,n.isBuf||(s=!1),n=n.next,u+=1;i.allBuffers=s,g(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var f=n.chunk,c=n.encoding,l=n.callback,d=t.objectMode?1:f.length;if(g(e,t,!1,d,f,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)})}function M(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,A.nextTick(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function S(e,t){var n=w(t);return n&&(M(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function E(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?A.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function O(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var A=n(27);e.exports=c;var C,R=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:A.nextTick;c.WritableState=f;var T=n(11);T.inherits=n(5);var z={deprecate:n(263)},N=n(96),D=n(50).Buffer,P=i.Uint8Array||function(){},L=n(95);T.inherits(c,N),f.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(f.prototype,"buffer",{get:z.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var q;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(q=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!q.call(this,e)||this===c&&(e&&e._writableState instanceof f)}})):q=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(e,t,n){var r=this._writableState,i=!1,a=!r.objectMode&&u(e);return a&&!D.isBuffer(e)&&(e=o(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=s),r.ended?l(this,n):(a||d(this,r,e,n))&&(r.pendingcb++,i=p(this,r,a,e,t,n)),i},c.prototype.cork=function(){var e=this._writableState;e.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||E(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=L.destroy,c.prototype._undestroy=L.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(2),n(258).setImmediate,function(){return this}())},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return o(e,t,n)}var a=n(1),o=a.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=a:(r(a,t),t.Buffer=i),r(o,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},function(e,t,n){(function(e){var r=n(257),i=n(99),a=n(272),o=n(122),u=n(28),s=t;s.request=function(t,n){t="string"==typeof t?u.parse(t):a(t);var i=e.location.protocol.search(/^https?:$/)===-1?"http:":"",o=t.protocol||i,s=t.hostname||t.host,f=t.port,c=t.path||"/";s&&s.indexOf(":")!==-1&&(s="["+s+"]"),t.url=(s?o+"//"+s:"")+(f?":"+f:"")+c,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var l=new r(t);return n&&l.on("response",n),l},s.get=function(e,t){var n=s.request(e,t);return n.end(),n},s.ClientRequest=r,s.IncomingMessage=i.IncomingMessage,s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.globalAgent=new s.Agent,s.STATUS_CODES=o,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(t,function(){return this}())},function(e,t,n){function r(e){if(e&&!s(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function a(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var u=n(1).Buffer,s=u.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=i)}this.charBuffer=new u(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&r<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,i)}return t},f.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},f.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){(function(e,r){function i(e,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),s(r,e,r.depth)}function a(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=s(e,i,r)),i}var a=f(e,n);if(a)return a;var o=Object.keys(n),g=u(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),S(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return c(n);if(0===o.length){if(E(n)){var m=n.name?": "+n.name:"";return e.stylize("[Function"+m+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(M(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return c(n)}var v="",y=!1,_=["{","}"];if(p(n)&&(y=!0,_=["[","]"]),E(n)){var x=n.name?": "+n.name:"";v=" [Function"+x+"]"}if(w(n)&&(v=" "+RegExp.prototype.toString.call(n)),M(n)&&(v=" "+Date.prototype.toUTCString.call(n)),S(n)&&(v=" "+c(n)),0===o.length&&(!y||0==n.length))return _[0]+v+_[1];if(r<0)return w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var k;return k=y?l(e,n,r,g,o):o.map(function(t){return d(e,n,r,g,t,y)}),e.seen.pop(),h(k,v,_)}function f(e,t){if(x(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,i){for(var a=[],o=0,u=t.length;o<u;++o)T(t,String(o))?a.push(d(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(d(e,t,n,r,i,!0))}),a}function d(e,t,n,r,i,a){var o,u,f;if(f=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},f.get?u=f.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):f.set&&(u=e.stylize("[Setter]","special")),T(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(f.value)<0?(u=m(n)?s(e,f.value,null):s(e,f.value,n-1),u.indexOf("\n")>-1&&(u=a?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),x(o)){if(a&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function h(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function x(e){return void 0===e}function w(e){return k(e)&&"[object RegExp]"===A(e)}function k(e){return"object"==typeof e&&null!==e}function M(e){return k(e)&&"[object Date]"===A(e)}function S(e){return k(e)&&("[object Error]"===A(e)||e instanceof Error)}function E(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function A(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var z=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,a=r.length,o=String(e).replace(z,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<a;u=r[++n])o+=m(u)||!k(u)?" "+u:" "+i(u);return o},t.deprecate=function(n,i){function a(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}if(x(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var o=!1;return a};var N,D={};t.debuglog=function(e){if(x(N)&&(N={NODE_ENV:"production",PUBLIC_DIR:"/www/gatsby-remark-vega-example/public"}.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(new RegExp("\\b"+e+"\\b","i").test(N)){var n=r.pid;D[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else D[e]=function(){};return D[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=g,t.isNull=m,t.isNullOrUndefined=v,t.isNumber=y,t.isString=b,t.isSymbol=_,t.isUndefined=x,t.isRegExp=w,t.isObject=k,t.isDate=M,t.isError=S,t.isFunction=E,t.isPrimitive=O,t.isBuffer=n(265);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))},t.inherits=n(264),t._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,function(){return this}(),n(2))},function(e,t,n){(function(e){!function(e,n){n(t)}(this,function(t){"use strict";function r(e,t,n){return e.fields=t||[],e.fname=n,e}function i(e){return null==e?null:e.fname}function a(e){return null==e?null:e.fields}function o(e){throw Error(e)}function u(e){function t(){a.push(c+e.substring(n,r)),c="",n=r+1}var n,r,i,a=[],u=null,s=0,f=e.length,c="";for(e+="",n=r=0;r<f;++r)if(i=e[r],"\\"===i)c+=e.substring(n,r),n=++r;else if(i===u)t(),u=null,s=-1;else{if(u)continue;n===s&&'"'===i?(n=r+1,u=i):n===s&&"'"===i?(n=r+1,u=i):"."!==i||s?"["===i?(r>n&&t(),s=n=r+1):"]"===i&&(s||o("Access path missing open bracket: "+e),s>0&&t(),s=0,n=r+1):r>n?t():n=r+1}return s&&o("Access path missing closing bracket: "+e),u&&o("Access path missing closing quote: "+e),r>n&&(r++,t()),a}function s(e){return e===Object(e)}function f(e){return"string"==typeof e}function c(e){return eA(e)?"["+e.map(c)+"]":s(e)||f(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function l(e,t){var n=u(e),i="return _["+n.map(c).join("][")+"];";return r(Function("_",i),[e=1===n.length?n[0]:e],t||e)}function d(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function h(e){var t=e||sA;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=fA&&d("error","ERROR",arguments),this},warn:function(){return t>=cA&&d("warn","WARN",arguments),this},info:function(){return t>=lA&&d("log","INFO",arguments),this},debug:function(){return t>=dA&&d("log","DEBUG",arguments),this}}}function p(e){return e[e.length-1]}function g(e){return null==e||""===e?null:+e}function m(e){return function(t){return e*Math.exp(t)}}function v(e){return function(t){return Math.log(e*t)}}function y(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function b(e,t,n,r){var i=n(e[0]),a=n(p(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function _(e,t){return b(e,t,g,rA)}function x(e,t){var n=Math.sign(e[0]);return b(e,t,v(n),m(n))}function w(e,t,n){return b(e,t,y(n),y(1/n))}function k(e,t,n,r,i){var a=r(e[0]),o=r(p(e)),u=null!=t?r(t):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function M(e,t,n){return k(e,t,n,g,rA)}function S(e,t,n){var r=Math.sign(e[0]);return k(e,t,n,v(r),m(r))}function E(e,t,n,r){return k(e,t,n,y(r),y(1/r))}function O(e){return null!=e?eA(e)?e:[e]:[]}function A(e){return"function"==typeof e}function C(e,t){var n,i,o,s,f,l,d,h,p,g=[],m=(e=O(e)).map(function(e,t){return null==e?null:(g.push(t),A(e)?e:u(e).map(c).join("]["))}),v=g.length-1,y=O(t),b="var u,v;return ";if(v<0)return null;for(i=0;i<=v;++i)n=g[i],o=m[n],A(o)?(l="f"+n,s="(u=this."+l+"(a))",f="(v=this."+l+"(b))",(d=d||{})[l]=o):(s="(u=a["+o+"])",f="(v=b["+o+"])"),l="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[n]?(p=1,h=-1):(p=-1,h=1),b+="("+s+"<"+f+"||u==null)&&v!=null?"+h+":(u>v||v==null)&&u!=null?"+p+":"+l+"!==u&&v===v?"+h+":v!==v&&u===u?"+p+(n<v?":":":0");return o=Function("a","b",b+";"),d&&(o=o.bind(d)),e=e.reduce(function(e,t){return A(t)?(a(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),r(o,Object.keys(e))}function R(e){return A(e)?e:function(){return e}}function T(e,t){function n(){t(i),r=i=null}var r,i;return function(t){i=t,r&&clearTimeout(r),r=setTimeout(n,e)}}function z(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function N(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(r=e[u],null!=r&&r>=r){n=i=r;break}for(a=o=u;++u<s;)r=e[u],null!=r&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(r=t(e[u],u,e),null!=r&&r>=r){n=i=r;break}for(a=o=u;++u<s;)r=t(e[u],u,e),null!=r&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function D(e){function t(e){return i.hasOwnProperty(e)&&i[e]!==hA}var n,r,i={};return n={size:0,empty:0,object:i,has:t,get:function(e){return t(e)?i[e]:void 0},set:function(e,r){return t(e)||(++n.size,i[e]===hA&&--n.empty),i[e]=r,this},delete:function(e){return t(e)&&(--n.size,++n.empty,i[e]=hA),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(e){return arguments.length?(r=e,n):r},clean:function(){var e,t,a={},o=0;for(e in i)t=i[e],t===hA||r&&r(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=i=a}},e&&Object.keys(e).forEach(function(t){n.set(t,e[t])}),n}function P(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function L(e){return"boolean"==typeof e}function q(e){return"[object Date]"===Object.prototype.toString.call(e)}function $(e){return"number"==typeof e}function j(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function F(e,t){e&&(e=t?O(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):O(e));var n=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?c(e):u(e).map(c).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return r(n,e,"key")}function I(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<i;++u,++f)o[f]=t[u];for(;s<a;++s,++f)o[f]=n[s];return o}function U(e,t){for(var n="";--t>=0;)n+=e;return n}function B(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?U(i,o)+a:"center"===r?U(i,~~(o/2))+a+U(i,Math.ceil(o/2)):a+U(i,o)}function W(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}function G(e){return $(e)?e:q(e)?e:Date.parse(e)}function Y(e,t){return t=t||G,null==e||""===e?null:t(e)}function H(e){return null==e||""===e?null:e+""}function V(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function X(e,t,n,r){var i=null!=r?r:"",a=e+"",o=a.length,u=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function Z(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}function J(e){var t=e||rA,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0,(i=n.indexOf(e))>=0&&n.splice(i,1)),n},n}function Q(e){return!(!e||!K(e))}function K(e){return e[pA]}function ee(e,t){return e[pA]=t,e}function te(e){var t=e===Object(e)?e:{data:e};return K(t)?t:ee(t,gA++)}function ne(e){return re(e,te({}))}function re(e,t){for(var n in e)t[n]=e[n];return t}function ie(e,t){return ee(t,K(e))}function ae(e){return e&&e.constructor===oe}function oe(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:oe,insert:function(t){for(var n=O(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=A(e)?r:t,i=O(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:R(r)};return A(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return A(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(e,t,n){n?e[t]=n(e):o.encode=t,a||(f[K(e)]=e)}var f,c,l,d,h,p,g;for(c=0,l=e.length;c<l;++c)o.add.push(te(e[c]));for(f={},c=0,l=t.length;c<l;++c)p=t[c],f[K(p)]=p;for(c=0,l=r.length;c<l;++c)h=r[c],u.forEach(function(e){h(e)&&(f[K(e)]=e)});for(g in f)o.rem.push(f[g]);for(f={},c=0,l=n.length;c<l;++c)d=n[c],s(d.tuple,d.field,d.value),o.modifies(d.field);for(c=0,l=i.length;c<l;++c)d=i[c],h=d.filter,u.forEach(function(e){h(e)&&s(e,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?u.filter(function(e){return f.hasOwnProperty(K(e))}):u.slice();else for(g in f)o.mod.push(f[g]);return o}}}function ue(){Object.defineProperty(this,mA,{writable:!0,value:{}})}function se(e,t,n,r){this.id=++yA,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function fe(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function ce(e,t,n,r){var i,a=1;return e instanceof se?i=e:e&&e.prototype instanceof se?i=new e:A(e)?i=new se(null,e):(a=0,i=new se(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i}function le(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)}function de(e,t,n){this.id=++MA,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function he(e,t,n){return new de(e,t,n)}function pe(e,t,n,r){var i,a=this,o=he(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(e){a.error(e)}finally{a.run()}};i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):O(e);for(var s=0,f=i.length;s<f;++s)i[s].addEventListener(t,u);return o}function ge(e){return{options:e||{},sanitize:ve,load:me,file:be,http:ye}}function me(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function ve(e,t){return t=z({},this.options,t),new Promise(function(n,r){var i,a,o,u,s={href:null};return null==e||"string"!=typeof e?void r("Sanitize failure, invalid URI: "+c(e)):(a=EA.test(e),(u=t.baseURL)&&!a&&(we(e,"/")||"/"===u[u.length-1]||(e="/"+e),e=u+e),o=(i=we(e,OA))||"file"===t.mode||"http"!==t.mode&&!a&&xe(),i?e=e.slice(OA.length):we(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(s,"localFile",{value:!!o}),s.href=e,t.target&&(s.target=t.target+""),void n(s))})}function ye(e,t){return _e(e,z({},this.options.http,t)).then(function(e){if(!e.ok)throw e.status+""+e.statusText;return e.text()})}function be(e){return new Promise(function(t,n){var r=xe();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function _e(e,t){var r="function"==typeof fetch?fetch:n(25);return r?r(e,t):Promise.reject("No fetch method available.")}function xe(){var e=n(30);return e&&A(e.readFile)?e:null}function we(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function ke(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o=CA.slice();for(r=0,i=e.length;r<i;++r){for(n=t?e[r][t]:e[r],a=0;a<o.length;++a)Se(n)&&!o[a](n)&&(o.splice(a,1),--a);if(0===o.length)return"string"}return RA[CA.indexOf(o[0])]}function Me(e,t){return t.reduce(function(t,n){return t[n]=ke(e,n),t},{})}function Se(e){return null!=e&&e===e}function Ee(e){return"true"===e||"false"===e||e===!0||e===!1}function Oe(e){return!isNaN(Date.parse(e))}function Ae(e){return!(isNaN(+e)||e instanceof Date)}function Ce(e){return Ae(e)&&(e=+e)===~~e}function Re(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Te(e,t){var n=Re(e);return function(r,i){return t(n(r),i,e)}}function ze(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r);
}),n}function Ne(e){function t(e,t){var r,i,a=n(e,function(e,n){return r?r(e,n-1):(i=e,void(r=t?Te(e,t):Re(e)))});return a.columns=i||[],a}function n(e,t){function n(){if(f)return zA;if(c)return c=!1,TA;var t,n,r=o;if(e.charCodeAt(r)===NA){for(;o++<a&&e.charCodeAt(o)!==NA||e.charCodeAt(++o)===NA;);return(t=o)>=a?f=!0:(n=e.charCodeAt(o++))===DA?c=!0:n===PA&&(c=!0,e.charCodeAt(o)===DA&&++o),e.slice(r+1,t-1).replace(/""/g,'"')}for(;o<a;){if((n=e.charCodeAt(t=o++))===DA)c=!0;else if(n===PA)c=!0,e.charCodeAt(o)===DA&&++o;else if(n!==s)continue;return e.slice(r,t)}return f=!0,e.slice(r,a)}var r,i=[],a=e.length,o=0,u=0,f=a<=0,c=!1;for(e.charCodeAt(a-1)===DA&&--a,e.charCodeAt(a-1)===PA&&--a;(r=n())!==zA;){for(var l=[];r!==TA&&r!==zA;)l.push(r),r=n();t&&null==(l=t(l,u++))||i.push(l)}return i}function r(t,n){return null==n&&(n=ze(t)),[n.map(o).join(e)].concat(t.map(function(t){return n.map(function(e){return o(t[e])}).join(e)})).join("\n")}function i(e){return e.map(a).join("\n")}function a(t){return t.map(o).join(e)}function o(e){return null==e?"":u.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n\r]"),s=e.charCodeAt(0);return{parse:t,parseRows:n,format:r,formatRows:i}}function De(e){return function(t,n){var r={delimiter:e};return Pe(t,n?z(n,r):r)}}function Pe(e,t){return t.header&&(e=t.header.map(c).join(t.delimiter)+"\n"+e),Ne(t.delimiter).parse(e+"")}function Le(t){return!("function"!=typeof e||!A(e.isBuffer))&&e.isBuffer(t)}function qe(e,t){var n=t&&t.property?l(t.property):rA;return s(e)&&!Le(e)?$e(n(e)):n(JSON.parse(e))}function $e(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}function je(e){return e}function Fe(e){if(null==e)return je;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,f=e.length,c=new Array(f);for(c[0]=(t+=e[0])*r+a,c[1]=(n+=e[1])*i+o;s<f;)c[s]=e[s],++s;return c}}function Ie(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Ue(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return Be(e,t)})}:Be(e,t)}function Be(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=We(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function We(e,t){function n(e,t){t.length&&t.pop();for(var n=f[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(s(n[r],r));e<0&&Ie(t,i)}function r(e){return s(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}function u(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(u)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":t=i(e.arcs);break;case"MultiLineString":t=e.arcs.map(i);break;case"Polygon":t=o(e.arcs);break;case"MultiPolygon":t=e.arcs.map(o);break;default:return null}return{type:n,coordinates:t}}var s=Fe(e.transform),f=e.arcs;return u(t)}function Ge(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),u.push(r)}}var i={},a={},o={},u=[],s=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++s],t[s]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),u=i[0],s=i[1];if(t=o[u])if(delete o[t.end],t.push(e),t.end=s,r=a[s]){delete a[r.start];var f=r===t?t:t.concat(r);a[f.start=t.start]=o[f.end=r.end]=f}else a[t.start]=o[t.end]=t;else if(t=a[s])if(delete a[t.start],t.unshift(e),t.start=u,r=o[u]){delete o[r.end];var c=r===t?t:r.concat(t);a[c.start=r.start]=o[c.end=t.end]=c}else a[t.start]=o[t.end]=t;else t=[e],a[t.start=u]=o[t.end=s]=t}),r(o,a),r(a,o),t.forEach(function(e){i[e<0?~e:e]||u.push([e])}),u}function Ye(e){return We(e,He.apply(this,arguments))}function He(e,t,n){var r,i,a;if(arguments.length>1)r=Ve(e,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Ge(e,r)}}function Ve(e,t,n){function r(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:s})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function u(e){switch(s=e,e.type){case"GeometryCollection":e.geometries.forEach(u);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":a(e.arcs);break;case"MultiPolygon":o(e.arcs)}}var s,f=[],c=[];return u(t),c.forEach(null==n?function(e){f.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&f.push(e[0].i)}),f}function Xe(e,t){var n,r,i;return e=qe(e,t),n=t&&(i=t.feature)?Ue:t&&(i=t.mesh)?Ye:o("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r):o("Invalid TopoJSON object: "+i),r&&r.features||[r]}function Ze(e,t){return arguments.length>1?(LA[e]=t,this):LA.hasOwnProperty(e)?LA[e]:null}function Je(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,u=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return u;do u.push(o=new Date(+n)),t(n,a),e(n);while(o<n&&n<r);return u},i.filter=function(n){return Je(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,r){return qA.setTime(+t),$A.setTime(+r),e(qA),e($A),Math.floor(n(qA,$A))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}function Qe(e){return Je(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*IA)/WA})}function Ke(e){return Je(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/WA})}function et(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tt(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nt(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function rt(e){function t(e,t){return function(n){var r,i,a,o=[],u=-1,s=0,f=e.length;for(n instanceof Date||(n=new Date(+n));++u<f;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(i=hC[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function n(e,t){return function(n){var i,a,o=nt(1900),u=r(o,e,n+="",0);if(u!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=tt(nt(o.y)),a=i.getUTCDay(),i=a>4||0===a?iC.ceil(i):iC(i),i=nC.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(i=t(nt(o.y)),a=i.getDay(),i=a>4||0===a?ZA.ceil(i):ZA(i),i=VA.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?tt(nt(o.y)).getUTCDay():t(nt(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,tt(o)):t(o)}}function r(e,t,n,r){for(var i,a,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=U[i in hC?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function i(e,t,n){var r=R.exec(t.slice(n));return r?(e.p=T[r[0].toLowerCase()],n+r[0].length):-1}function a(e,t,n){var r=D.exec(t.slice(n));return r?(e.w=P[r[0].toLowerCase()],n+r[0].length):-1}function o(e,t,n){var r=z.exec(t.slice(n));return r?(e.w=N[r[0].toLowerCase()],n+r[0].length):-1}function u(e,t,n){var r=$.exec(t.slice(n));return r?(e.m=j[r[0].toLowerCase()],n+r[0].length):-1}function s(e,t,n){var r=L.exec(t.slice(n));return r?(e.m=q[r[0].toLowerCase()],n+r[0].length):-1}function f(e,t,n){return r(e,w,t,n)}function c(e,t,n){return r(e,k,t,n)}function l(e,t,n){return r(e,M,t,n)}function d(e){return O[e.getDay()]}function h(e){return E[e.getDay()]}function p(e){return C[e.getMonth()]}function g(e){return A[e.getMonth()]}function m(e){return S[+(e.getHours()>=12)]}function v(e){return O[e.getUTCDay()]}function y(e){return E[e.getUTCDay()]}function b(e){return C[e.getUTCMonth()]}function _(e){return A[e.getUTCMonth()]}function x(e){return S[+(e.getUTCHours()>=12)]}var w=e.dateTime,k=e.date,M=e.time,S=e.periods,E=e.days,O=e.shortDays,A=e.months,C=e.shortMonths,R=ot(S),T=ut(S),z=ot(E),N=ut(E),D=ot(O),P=ut(O),L=ot(A),q=ut(A),$=ot(C),j=ut(C),F={a:d,A:h,b:p,B:g,c:null,d:Ot,e:Ot,f:zt,H:At,I:Ct,j:Rt,L:Tt,m:Nt,M:Dt,p:m,Q:fn,s:cn,S:Pt,u:Lt,U:qt,V:$t,w:jt,W:Ft,x:null,X:null,y:It,Y:Ut,Z:Bt,"%":sn},I={a:v,A:y,b:b,B:_,c:null,d:Wt,e:Wt,f:Xt,H:Gt,I:Yt,j:Ht,L:Vt,m:Zt,M:Jt,p:x,Q:fn,s:cn,S:Qt,u:Kt,U:en,V:tn,w:nn,W:rn,x:null,X:null,y:an,Y:on,Z:un,"%":sn},U={a:a,A:o,b:u,B:s,c:f,d:vt,e:vt,f:kt,H:bt,I:bt,j:yt,L:wt,m:mt,M:_t,p:i,Q:St,s:Et,S:xt,u:ft,U:ct,V:lt,w:st,W:dt,x:c,X:l,y:pt,Y:ht,Z:gt,"%":Mt};return F.x=t(k,F),F.X=t(M,F),F.c=t(w,F),I.x=t(k,I),I.X=t(M,I),I.c=t(w,I),{format:function(e){var n=t(e+="",F);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",et);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",I);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,tt);return t.toString=function(){return e},t}}}function it(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function at(e){return e.replace(mC,"\\$&")}function ot(e){return new RegExp("^(?:"+e.map(at).join("|")+")","i")}function ut(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function st(e,t,n){var r=pC.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ft(e,t,n){var r=pC.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ct(e,t,n){var r=pC.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function lt(e,t,n){var r=pC.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function dt(e,t,n){var r=pC.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ht(e,t,n){var r=pC.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function pt(e,t,n){var r=pC.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mt(e,t,n){var r=pC.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function vt(e,t,n){var r=pC.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function yt(e,t,n){var r=pC.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function bt(e,t,n){var r=pC.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _t(e,t,n){var r=pC.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function xt(e,t,n){var r=pC.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function wt(e,t,n){var r=pC.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function kt(e,t,n){var r=pC.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Mt(e,t,n){var r=gC.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function St(e,t,n){var r=pC.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Et(e,t,n){var r=pC.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function Ot(e,t){return it(e.getDate(),t,2)}function At(e,t){return it(e.getHours(),t,2)}function Ct(e,t){return it(e.getHours()%12||12,t,2)}function Rt(e,t){return it(1+VA.count(KA(e),e),t,3)}function Tt(e,t){return it(e.getMilliseconds(),t,3)}function zt(e,t){return Tt(e,t)+"000"}function Nt(e,t){return it(e.getMonth()+1,t,2)}function Dt(e,t){return it(e.getMinutes(),t,2)}function Pt(e,t){return it(e.getSeconds(),t,2)}function Lt(e){var t=e.getDay();return 0===t?7:t}function qt(e,t){return it(XA.count(KA(e),e),t,2)}function $t(e,t){var n=e.getDay();return e=n>=4||0===n?JA(e):JA.ceil(e),it(JA.count(KA(e),e)+(4===KA(e).getDay()),t,2)}function jt(e){return e.getDay()}function Ft(e,t){return it(ZA.count(KA(e),e),t,2)}function It(e,t){return it(e.getFullYear()%100,t,2)}function Ut(e,t){return it(e.getFullYear()%1e4,t,4)}function Bt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+it(t/60|0,"0",2)+it(t%60,"0",2)}function Wt(e,t){return it(e.getUTCDate(),t,2)}function Gt(e,t){return it(e.getUTCHours(),t,2)}function Yt(e,t){return it(e.getUTCHours()%12||12,t,2)}function Ht(e,t){return it(1+nC.count(uC(e),e),t,3)}function Vt(e,t){return it(e.getUTCMilliseconds(),t,3)}function Xt(e,t){return Vt(e,t)+"000"}function Zt(e,t){return it(e.getUTCMonth()+1,t,2)}function Jt(e,t){return it(e.getUTCMinutes(),t,2)}function Qt(e,t){return it(e.getUTCSeconds(),t,2)}function Kt(e){var t=e.getUTCDay();return 0===t?7:t}function en(e,t){return it(rC.count(uC(e),e),t,2)}function tn(e,t){var n=e.getUTCDay();return e=n>=4||0===n?aC(e):aC.ceil(e),it(aC.count(uC(e),e)+(4===uC(e).getUTCDay()),t,2)}function nn(e){return e.getUTCDay()}function rn(e,t){return it(iC.count(uC(e),e),t,2)}function an(e,t){return it(e.getUTCFullYear()%100,t,2)}function on(e,t){return it(e.getUTCFullYear()%1e4,t,4)}function un(){return"+0000"}function sn(){return"%"}function fn(e){return+e}function cn(e){return Math.floor(+e/1e3)}function ln(e){return sC=rt(e),fC=sC.format,cC=sC.parse,lC=sC.utcFormat,dC=sC.utcParse,sC}function dn(e){return e.toISOString()}function hn(e){var t=new Date(e);return isNaN(t)?null:t}function pn(e,t,n){t=t||{};var r=Ze(t.type||"json");return r||o("Unknown data format type: "+t.type),e=r(e,t),t.parse&&gn(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}function gn(e,t,n){if(e.length){n=n||cC;var r,i,a,o,u,s,f,c=e.columns||Object.keys(e[0]);for("auto"===t&&(t=Me(e,c)),c=Object.keys(t),r=c.map(function(e){var r,i,a=t[e];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return r=a.split(/:(.+)?/,2),i=r[1],("'"===i[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?dC(i):n(i);if(!AA[a])throw Error("Illegal format pattern: "+e+":"+a);return AA[a]}),o=0,s=e.length,f=c.length;o<s;++o)for(i=e[o],u=0;u<f;++u)a=c[u],i[a]=r[u](i[a])}}function mn(e,t,n){return this.pulse(e,this.changeset().insert(pn(t,n)))}function vn(e){var t,n,r=new Promise(function(e,r){t=e,n=r});return r.requests=0,r.done=function(){0===--r.requests&&e.runAfter(function(){e._pending=null;try{e.run(),t(e)}catch(e){n(e)}})},e._pending=r}function yn(e,t,n){var r=this,i=r._pending||vn(r);i.requests+=1,r.loader().load(t,{context:"dataflow"}).then(function(t){r.ingest(e,t,n)},function(e){r.error("Loading failed",t,e)}).catch(function(e){r.error("Data ingestion failed",t,e)}).then(i.done,i.done)}function bn(e,t,n,r,i){var a=e instanceof se?xn:_n;return a(this,e,t,n,r,i),this}function _n(e,t,n,r,i,a){var o,u,s=z({},a,yC);A(n)||(n=R(n)),void 0===r?o=function(t){e.touch(n(t))}:A(r)?(u=new se(null,r,i,!1),o=function(t){var r,i=n(t);u.evaluate(t),ae(r=u.value)?e.pulse(i,r,a):e.update(i,r,s)}):o=function(t){e.update(n(t),r,s)},t.apply(o)}function xn(e,t,n,r,i,a){var o,u;void 0===r?u=n:(o=A(r)?r:R(r),r=n?function(e,t){var r=o(e,t);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,u=new se(null,r,i,!1),u.modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),t.targets().add(u)}function wn(e){e.rank=++this._rank}function kn(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;--r>=0;)i.push(t=n[r]),t===e&&o("Cycle detected in dataflow graph.")}function Mn(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Sn(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function En(e,t){var n=[];return Z(e,t,function(e){n.push(e)}),n}function On(e,t){var n={};return e.visit(t,function(e){n[K(e)]=1}),function(e){return n[K(e)]?null:e}}function An(e,t,n,r){var i,a,o,u,s,f=this,c=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n,o=0,u=n.length;o<u;++o)if(i=n[o],i.stamp===t){if(i.fields){a=f.fields||(f.fields={});for(s in i.fields)a[s]=1}i.changed(f.ADD)&&(c|=f.ADD),i.changed(f.REM)&&(c|=f.REM),i.changed(f.MOD)&&(c|=f.MOD)}this.changes=c}function Cn(e){var t,n,r,i,a=this,o=0,u=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new Mn(a,++a._clock,e),u>=lA&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach(function(e){a._enqueue(e,!0)}),a._touched=J(nA);try{for(;a._heap.size()>0;)t=a._heap.pop(),t.rank===t.qrank?(n=t.run(a._getPulse(t,e)),u>=dA&&a.debug(t.id,n===bC?"STOP":n,t),n!==bC&&(a._pulse=n,t._targets&&t._targets.forEach(function(e){a._enqueue(e)})),++o):a._enqueue(t,!0)}catch(e){i=e}if(a._pulses={},a._pulse=null,u>=lA&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(e){a.error(e)}if(a._postrun.length){var s=a._postrun;a._postrun=[],s.sort(function(e,t){return t.priority-e.priority}).forEach(function(e){Rn(a,e.callback)})}return o}function Rn(e,t){try{t(e)}catch(t){e.error(t)}}function Tn(){return this._pending||Promise.resolve(this.run())}function zn(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):Rn(this,e)}function Nn(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Dn(e,t){var n,r=e.source,i=this._clock;return r&&eA(r)?(n=r.map(function(e){return e.pulse}),new An(this,i,n,t)):(n=this._pulses[e.id],r&&(r=r.pulse,r&&r!==bC?r.stamp===i&&n.target!==e?n=r:n.source=r.source:n.source=[]),n)}function Pn(e,t){var n=t||zC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Ln(e,t,n){var r=n||zC;return(e.set(t)||r.force)&&this.touch(e,r),this}function qn(e,t,n){this.touch(e,n||zC);var r=new Mn(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._pulses[e.id]=t.pulse(r,i),this}function $n(e){this.cmp=e,this.nodes=[]}function jn(e,t,n,r){var i,a,o;for(i=e[n];n>t&&(o=n-1>>1,a=e[o],r(i,a)<0);)e[n]=a,n=o;return e[n]=i}function Fn(e,t,n){for(var r,i=t,a=e.length,o=e[t],u=2*t+1;u<a;)r=u+1,r<a&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],t=u,u=2*t+1;return e[t]=o,jn(e,i,t,n)}function In(){this._log=h(),this.logLevel(fA),this._clock=0,this._rank=0;try{this._loader=ge()}catch(e){}this._touched=J(nA),this._pulses={},this._pulse=null,this._heap=new $n(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function Un(e){return function(){return this._log[e].apply(this,arguments)}}function Bn(e,t){se.call(this,e,null,t)}function Wn(e){var t=Gn(e);return t&&t.Definition||null}function Gn(e){return e=e&&e.toLowerCase(),LC.hasOwnProperty(e)?LC[e]:null}function Yn(e){return function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}}function Hn(e){return e&&e.length?1===e.length?e[0]:Yn(e):function(){return""}}function Vn(e,t,n){return n||e+(t?"_"+t:"")}function Xn(e,t){return qC[e](t)}function Zn(e){return function(t){var n=z({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function Jn(e,t){return e.idx-t.idx}function Qn(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=qC[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r,i=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{})),a=[];for(r in i)a.push(i[r]);return a.sort(Jn)}function Kn(e,t){var n=t||rA,r=Qn(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach(function(e){i+=e.init,o+=e.add,u+=e.rem}),e.slice().sort(Jn).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",a=Function("cell",a),a.prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",u),a.prototype.set=Function("t",s),a.prototype.get=n,a.fields=e.map(function(e){return e.out}),a}function er(e){var t,n,r,i,a,o,u,s,f=e.maxbins||20,c=e.base||10,l=Math.log(c),d=e.divide||[5,2],h=e.extent[0],p=e.extent[1],g=p-h;if(e.step)t=e.step;else if(e.steps){for(a=g/f,o=0,u=e.steps.length;o<u&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/l),r=e.minstep||0,t=Math.max(r,Math.pow(c,Math.round(Math.log(g)/l)-n));Math.ceil(g/t)>f;)t*=c;for(o=0,u=d.length;o<u;++o)a=t/d[o],a>=r&&g/a<=f&&(t=a)}return a=Math.log(t),i=a>=0?0:~~(-a/l)+1,s=Math.pow(c,-i-1),(e.nice||void 0===e.nice)&&(a=Math.floor(h/t+s)*t,h=h<a?a-t:a,p=Math.ceil(p/t)*t),{start:h,stop:p,step:t}}function tr(e,t){var n,r=[],i=e.length,a=-1;if(null==t)for(;++a<i;)isNaN(n=nr(e[a]))||r.push(n);else for(;++a<i;)isNaN(n=nr(t(e[a],a,e)))||r.push(n);return r}function nr(e){return null===e?NaN:+e}function rr(e){t.random=e}function ir(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ar(e){return 1===e.length&&(e=or(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function or(e){return function(t,n){return ir(e(t),n)}}function ur(e){return null===e?NaN:+e}function sr(e,t){var n,r,i=e.length,a=0,o=-1,u=0,s=0;if(null==t)for(;++o<i;)isNaN(n=ur(e[o]))||(r=n-u,u+=r/++a,s+=r*(n-u));else for(;++o<i;)isNaN(n=ur(t(e[o],o,e)))||(r=n-u,u+=r/++a,s+=r*(n-u));if(a>1)return s/(a-1)}function fr(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}function cr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}function lr(e,t,n){var r,i,a,o,u=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=dr(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++u<i;)a[u]=(e+u)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++u<i;)a[u]=(e-u)/o;return r&&a.reverse(),a}function dr(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=UC?10:a>=BC?5:a>=WC?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=UC?10:a>=BC?5:a>=WC?2:1)}function hr(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=UC?i*=10:a>=BC?i*=5:a>=WC&&(i*=2),t<e?-i:i}function pr(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function gr(e,t,n){if(null==n&&(n=ur),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function mr(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r}function vr(e,t){var n,r=e.length,i=r,a=-1,o=0;if(null==t)for(;++a<r;)isNaN(n=ur(e[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=ur(t(e[a],a,e)))?--i:o+=n;if(i)return o/i}function yr(e,t){var n,r=e.length,i=-1,a=[];if(null==t)for(;++i<r;)isNaN(n=ur(e[i]))||a.push(n);else for(;++i<r;)isNaN(n=ur(t(e[i],i,e)))||a.push(n);return gr(a.sort(ir),.5)}function br(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n}function _r(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r>n&&(r=n);return r}function xr(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r}function wr(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a}function kr(e,n,r,i){var a,o,u,s,f=tr(e,i),c=f.length,l=n;for(u=0,s=Array(l);u<l;++u){for(a=0,o=0;o<c;++o)a+=f[~~(t.random()*c)];s[u]=a/c}return[gr(s.sort(ir),r/2),gr(s,1-r/2)]}function Mr(e,t){var n=tr(e,t);return[gr(n.sort(ir),.25),gr(n,.5),gr(n,.75)]}function Sr(e,n){null==n&&(n=e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(r=e||0,a=i-r,o):r},o.max=function(e){return arguments.length?(i=e||0,a=i-r,o):i},o.sample=function(){return r+Math.floor(a*t.random())},o.pdf=function(e){return e===Math.floor(e)&&e>=r&&e<i?1/a:0},o.cdf=function(e){var t=Math.floor(e);return t<r?0:t>=i?1:(t-r+1)/a},o.icdf=function(e){return e>=0&&e<=1?r-1+Math.floor(e*a):NaN},o.min(e).max(n)}function Er(e,n){var r,i,a=NaN,o={};return o.mean=function(e){return arguments.length?(r=e||0,a=NaN,o):r},o.stdev=function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},o.sample=function(){var e,n,o=0,u=0;if(a===a)return o=a,a=NaN,o;do o=2*t.random()-1,u=2*t.random()-1,e=o*o+u*u;while(0===e||e>1);return n=Math.sqrt(-2*Math.log(e)/e),a=r+u*n*i,r+o*n*i},o.pdf=function(e){var t=Math.exp(Math.pow(e-r,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*t},o.cdf=function(e){var t,n=(e-r)/i,a=Math.abs(n);if(a>37)t=0;else{var o,u=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,t=u*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,t/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,t=u/o/2.506628274631)}return n>0?1-t:t},o.icdf=function(e){if(e<=0||e>=1)return NaN;var t=2*e-1,n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*n)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/n,u=(t>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return r+i*Math.SQRT2*u},o.mean(e).stdev(n)}function Or(e,n){var r=Er(),i={},a=0;return i.data=function(t){return arguments.length?(e=t,a=t?t.length:0,i.bandwidth(n)):e},i.bandwidth=function(t){return arguments.length?(n=t,!n&&e&&(n=Ar(e)),i):n},i.sample=function(){return e[~~(t.random()*a)]+n*r.sample()},i.pdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.pdf((t-e[o])/n);return i/n/a},i.cdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.cdf((t-e[o])/n);return i/a},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)}function Ar(e){var t=e.length,n=Mr(e),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(sr(e)),r)*Math.pow(t,-.2)}function Cr(e,n){function r(e){var t,n=[],r=0;for(t=0;t<o;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<o;++t)n[t]/=r;return n}var i,a={},o=0;return a.weights=function(e){return arguments.length?(i=r(n=e||[]),a):n},a.distributions=function(t){return arguments.length?(t?(o=t.length,e=t):(o=0,e=[]),a.weights(n)):e},a.sample=function(){for(var n=t.random(),r=e[o-1],a=i[0],u=0;u<o-1;a+=i[++u])if(n<a){r=e[u];break}return r.sample()},a.pdf=function(t){for(var n=0,r=0;r<o;++r)n+=i[r]*e[r].pdf(t);return n},a.cdf=function(t){for(var n=0,r=0;r<o;++r)n+=i[r]*e[r].cdf(t);return n},a.icdf=function(){throw Error("Mixture icdf not supported.")},a.distributions(e).weights(n)}function Rr(e,n){null==n&&(n=null==e?1:e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(r=e||0,a=i-r,o):r},o.max=function(e){return arguments.length?(i=e||0,a=i-r,o):i},o.sample=function(){return r+a*t.random()},o.pdf=function(e){return e>=r&&e<=i?1/a:0},o.cdf=function(e){return e<r?0:e>i?1:(e-r)/a},o.icdf=function(e){return e>=0&&e<=1?r+e*a:NaN},o.min(e).max(n)}function Tr(e){this._key=e?l(e):K,this.reset()}function zr(e){Bn.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Nr(e){Bn.call(this,null,e)}function Dr(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter(function(e){return!o[r(e)]}),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?I(e,i,a.sort(e)):i.concat(a),a=[]),i}}}function Pr(e){Bn.call(this,[],e)}function Lr(e){se.call(this,null,qr,e)}function qr(e){return this.value&&!e.modified()?this.value:C(e.fields,e.orders)}function $r(e){Bn.call(this,null,e)}function jr(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}function Fr(e){Bn.call(this,null,e)}function Ir(e,t,n,r){for(var i,a,o=[],u={},s=e.length,f=0;f<s;++f)for(u[t]=a=e[f],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(te(u)),u={},u[t]=a);return o}function Ur(e,t){var n=e[KC];JC.hasOwnProperty(n)||o("Unknown distribution function: "+n);var r=JC[n]();for(var i in e)i===eR?r.data((e.from||t()).map(e[i])):i===QC?r[i](e[i].map(function(e){return Ur(e,t)})):typeof r[i]===KC&&r[i](e[i]);return r}function Br(e){Bn.call(this,null,e)}function Wr(e){return function(){return e.materialize(e.SOURCE).source}}function Gr(e){Bn.call(this,[+(1/0),-(1/0)],e)}function Yr(e,t){se.call(this,e),this.parent=t}function Hr(e){Bn.call(this,{},e),this._keys=D();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function Vr(e){se.call(this,null,Xr,e)}function Xr(e){return this.value&&!e.modified()?this.value:eA(e.name)?O(e.name).map(function(e){return l(e)}):l(e.name,e.as)}function Zr(e){Bn.call(this,D(),e)}function Jr(e,t){return e?e.map(function(e,n){return t[n]||i(e)}):null}function Qr(e){Bn.call(this,[],e)}function Kr(e){Bn.call(this,[],e)}function ei(e){Bn.call(this,null,e)}function ti(e){Bn.call(this,[],e)}function ni(e){Bn.call(this,[],e)}function ri(e){var t,n=e.method||dR.value;return null!=dR[n]?n===dR.value?(t=void 0!==e.value?e.value:0,function(){return t}):dR[n]:void o("Unrecognized imputation method: "+n)}function ii(e){var t=e.field;return function(e){return e?t(e):NaN}}function ai(e,t,n,r){var i,a,o,u,s,f,c,l,d=function(e){return e(l)},h=[],p=r?r.slice():[],g={},m={};for(p.forEach(function(e,t){g[e]=t+1}),u=0,c=e.length;u<c;++u)l=e[u],f=n(l),s=g[f]||(g[f]=p.push(f)),a=(i=t?t.map(d):hR)+"",(o=m[a])||(o=m[a]=[],h.push(o),o.values=i),o[s-1]=l;return h.domain=p,h}function oi(e){zr.call(this,e)}function ui(e){se.call(this,null,si,e)}function si(e){return this.value&&!e.modified()?this.value:F(e.fields,e.flat)}function fi(e){Bn.call(this,{},e)}function ci(e){se.call(this,null,li,e)}function li(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=+(1/0),a=-(1/0),o=e.extents;for(t=0,n=o.length;t<n;++t)r=o[t],r[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function di(e){se.call(this,null,hi,e)}function hi(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function pi(e){Bn.call(this,null,e);
}function gi(e){zr.call(this,e)}function mi(e,t){var n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",o=a(n).concat(a(r)),u=yi(n,e.limit||0,t);return{key:e.key,groupby:e.groupby,ops:u.map(function(){return i}),fields:u.map(function(e){return vi(e,n,r,o)}),as:u.map(function(e){return e+""}),modified:e.modified.bind(e)}}function vi(e,t,n,i){return r(function(r){return t(r)===e?n(r):NaN},i,e+"")}function yi(e,t,n){var r={},i=[];return n.visit(n.SOURCE,function(t){var n=e(t);r[n]||(r[n]=1,i.push(n))}),i.sort(function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)}),t?i.slice(0,t):i}function bi(e){Hr.call(this,e)}function _i(e){Bn.call(this,null,e)}function xi(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}function wi(e){Bn.call(this,null,e)}function ki(e){Bn.call(this,null,e)}function Mi(e){Bn.call(this,[],e),this.count=0}function Si(e){Bn.call(this,null,e)}function Ei(e){Bn.call(this,null,e),this.modified(!0)}function Oi(e){Bn.call(this,D(),e)}function Ai(e){Bn.call(this,null,e)}function Ci(e,t,n,r){var i=OR[e](t,n);return{init:i.init||iA,update:function(e,t){t[r]=i.next(e)}}}function Ri(e){function t(e){O(a(e)).forEach(function(e){d[e]=1})}var n=this,r=O(e.ops),u=O(e.fields),s=O(e.params),f=O(e.as),c=n.outputs=[],l=n.windows=[],d={},h={},p=!0,g=[],m=[];t(e.sort),r.forEach(function(e,n){var r=u[n],a=i(r),d=Vn(e,a,f[n]);if(t(r),c.push(d),OR.hasOwnProperty(e))l.push(Ci(e,u[n],s[n],d));else{if(null==r&&"count"!==e&&o("Null aggregate field specified."),"count"===e)return void g.push(d);p=!1;var v=h[a];v||(v=h[a]=[],v.field=r,m.push(v)),v.push(Xn(e,d))}}),(g.length||m.length)&&(n.cell=Ti(m,g,p)),n.inputs=Object.keys(d)}function Ti(e,t,n){e=e.map(function(e){return Kn(e,e.field)});var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new Tr;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}function zi(e){Bn.call(this,{},e),this._mlen=0,this._mods=[]}function Ni(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,a=n.frame||[null,0],o=e.data(r),u=o.length,s=0,f=i?ar(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||R(-1)};for(t.init();s<u;++s)Di(c,a,s,u),i&&Pi(c,f),t.update(c,o[s])}function Di(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Pi(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function Li(e){this.clear(),e&&this.union(e)}function qi(e,t){var n,r=[];return n={id:"gradient_"+hT++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}function $i(e){this.mark=e,this.bounds=this.bounds||new Li}function ji(e){$i.call(this,e),this.items=this.items||[]}function Fi(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}function Ii(){return"undefined"!=typeof Image?Image:null}function Ui(e,t){if(pT)try{return new pT(e,t)}catch(e){}return null}function Bi(){return pT&&pT.Image||null}function Wi(e,t){return Fi(e,t)||Ui(e,t)||null}function Gi(){return Ii()||Bi()||null}function Yi(e){this._pending=0,this._loader=e||ge()}function Hi(e){e._pending+=1}function Vi(e){e._pending-=1}function Xi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Zi(){return new Xi}function Ji(e){return function(){return e}}function Qi(e){return e>1?0:e<-1?AT:Math.acos(e)}function Ki(e){return e>=1?CT:e<=-1?-CT:Math.asin(e)}function ea(e){return e.innerRadius}function ta(e){return e.outerRadius}function na(e){return e.startAngle}function ra(e){return e.endAngle}function ia(e){return e&&e.padAngle}function aa(e,t,n,r,i,a,o,u){var s=n-e,f=r-t,c=o-i,l=u-a,d=(c*(t-a)-l*(e-i))/(l*s-c*f);return[e+d*s,t+d*f]}function oa(e,t,n,r,i,a,o){var u=e-n,s=t-r,f=(o?a:-a)/ET(u*u+s*s),c=f*s,l=-f*u,d=e+c,h=t+l,p=n+c,g=r+l,m=(d+p)/2,v=(h+g)/2,y=p-d,b=g-h,_=y*y+b*b,x=i-a,w=d*g-p*h,k=(b<0?-1:1)*ET(kT(0,x*x*_-w*w)),M=(w*b-y*k)/_,S=(-w*y-b*k)/_,E=(w*b+y*k)/_,O=(-w*y+b*k)/_,A=M-m,C=S-v,R=E-m,T=O-v;return A*A+C*C>R*R+T*T&&(M=E,S=O),{cx:M,cy:S,x01:-c,y01:-l,x11:M*(i/x-1),y11:S*(i/x-1)}}function ua(){function e(){var e,f,c=+t.apply(this,arguments),l=+n.apply(this,arguments),d=a.apply(this,arguments)-CT,h=o.apply(this,arguments)-CT,p=_T(h-d),g=h>d;if(s||(s=e=Zi()),l<c&&(f=l,l=c,c=f),l>OT)if(p>RT-OT)s.moveTo(l*wT(d),l*ST(d)),s.arc(0,0,l,d,h,!g),c>OT&&(s.moveTo(c*wT(h),c*ST(h)),s.arc(0,0,c,h,d,g));else{var m,v,y=d,b=h,_=d,x=h,w=p,k=p,M=u.apply(this,arguments)/2,S=M>OT&&(i?+i.apply(this,arguments):ET(c*c+l*l)),E=MT(_T(l-c)/2,+r.apply(this,arguments)),O=E,A=E;if(S>OT){var C=Ki(S/c*ST(M)),R=Ki(S/l*ST(M));(w-=2*C)>OT?(C*=g?1:-1,_+=C,x-=C):(w=0,_=x=(d+h)/2),(k-=2*R)>OT?(R*=g?1:-1,y+=R,b-=R):(k=0,y=b=(d+h)/2)}var T=l*wT(y),z=l*ST(y),N=c*wT(x),D=c*ST(x);if(E>OT){var P=l*wT(b),L=l*ST(b),q=c*wT(_),$=c*ST(_);if(p<AT){var j=w>OT?aa(T,z,q,$,P,L,N,D):[N,D],F=T-j[0],I=z-j[1],U=P-j[0],B=L-j[1],W=1/ST(Qi((F*U+I*B)/(ET(F*F+I*I)*ET(U*U+B*B)))/2),G=ET(j[0]*j[0]+j[1]*j[1]);O=MT(E,(c-G)/(W-1)),A=MT(E,(l-G)/(W+1))}}k>OT?A>OT?(m=oa(q,$,T,z,l,A,g),v=oa(P,L,N,D,l,A,g),s.moveTo(m.cx+m.x01,m.cy+m.y01),A<E?s.arc(m.cx,m.cy,A,xT(m.y01,m.x01),xT(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,A,xT(m.y01,m.x01),xT(m.y11,m.x11),!g),s.arc(0,0,l,xT(m.cy+m.y11,m.cx+m.x11),xT(v.cy+v.y11,v.cx+v.x11),!g),s.arc(v.cx,v.cy,A,xT(v.y11,v.x11),xT(v.y01,v.x01),!g))):(s.moveTo(T,z),s.arc(0,0,l,y,b,!g)):s.moveTo(T,z),c>OT&&w>OT?O>OT?(m=oa(N,D,P,L,c,-O,g),v=oa(T,z,q,$,c,-O,g),s.lineTo(m.cx+m.x01,m.cy+m.y01),O<E?s.arc(m.cx,m.cy,O,xT(m.y01,m.x01),xT(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,O,xT(m.y01,m.x01),xT(m.y11,m.x11),!g),s.arc(0,0,c,xT(m.cy+m.y11,m.cx+m.x11),xT(v.cy+v.y11,v.cx+v.x11),g),s.arc(v.cx,v.cy,O,xT(v.y11,v.x11),xT(v.y01,v.x01),!g))):s.arc(0,0,c,x,_,g):s.lineTo(N,D)}else s.moveTo(0,0);if(s.closePath(),e)return s=null,e+""||null}var t=ea,n=ta,r=Ji(0),i=null,a=na,o=ra,u=ia,s=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-AT/2;return[wT(r)*e,ST(r)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Ji(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),e):n},e.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:Ji(+t),e):r},e.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Ji(+t),e):i},e.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:Ji(+t),e):a},e.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ji(+t),e):o},e.padAngle=function(t){return arguments.length?(u="function"==typeof t?t:Ji(+t),e):u},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}function sa(e){this._context=e}function fa(e){return new sa(e)}function ca(e){return e[0]}function la(e){return e[1]}function da(){function e(e){var u,s,f,c=e.length,l=!1;for(null==i&&(o=a(f=Zi())),u=0;u<=c;++u)!(u<c&&r(s=e[u],u,e))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(s,u,e),+n(s,u,e));if(f)return o=null,f+""||null}var t=ca,n=la,r=Ji(!0),i=null,a=fa,o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Ji(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),e):n},e.defined=function(t){return arguments.length?(r="function"==typeof t?t:Ji(!!t),e):r},e.curve=function(t){return arguments.length?(a=t,null!=i&&(o=a(i)),e):a},e.context=function(t){return arguments.length?(null==t?i=o=null:o=a(i=t),e):i},e}function ha(){function e(e){var t,c,l,d,h,p=e.length,g=!1,m=new Array(p),v=new Array(p);for(null==u&&(f=s(h=Zi())),t=0;t<=p;++t){if(!(t<p&&o(d=e[t],t,e))===g)if(g=!g)c=t,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),l=t-1;l>=c;--l)f.point(m[l],v[l]);f.lineEnd(),f.areaEnd()}g&&(m[t]=+n(d,t,e),v[t]=+i(d,t,e),f.point(r?+r(d,t,e):m[t],a?+a(d,t,e):v[t]))}if(h)return f=null,h+""||null}function t(){return da().defined(o).curve(s).context(u)}var n=ca,r=null,i=Ji(0),a=la,o=Ji(!0),u=null,s=fa,f=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),r=null,e):n},e.x0=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),e):n},e.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Ji(+t),e):r},e.y=function(t){return arguments.length?(i="function"==typeof t?t:Ji(+t),a=null,e):i},e.y0=function(t){return arguments.length?(i="function"==typeof t?t:Ji(+t),e):i},e.y1=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:Ji(+t),e):a},e.lineX0=e.lineY0=function(){return t().x(n).y(i)},e.lineY1=function(){return t().x(n).y(a)},e.lineX1=function(){return t().x(r).y(i)},e.defined=function(t){return arguments.length?(o="function"==typeof t?t:Ji(!!t),e):o},e.curve=function(t){return arguments.length?(s=t,null!=u&&(f=s(u)),e):s},e.context=function(t){return arguments.length?(null==t?u=f=null:f=s(u=t),e):u},e}function pa(){function e(){var e;if(r||(r=e=Zi()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),e)return r=null,e+""||null}var t=Ji(TT),n=Ji(64),r=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:Ji(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:Ji(+t),e):n},e.context=function(t){return arguments.length?(r=null==t?null:t,e):r},e}function ga(){}function ma(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function va(e){this._context=e}function ya(e){return new va(e)}function ba(e){this._context=e}function _a(e){return new ba(e)}function xa(e){this._context=e}function wa(e){return new xa(e)}function ka(e,t){this._basis=new va(e),this._beta=t}function Ma(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Sa(e,t){this._context=e,this._k=(1-t)/6}function Ea(e,t){this._context=e,this._k=(1-t)/6}function Oa(e,t){this._context=e,this._k=(1-t)/6}function Aa(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>OT){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>OT){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Ca(e,t){this._context=e,this._alpha=t}function Ra(e,t){this._context=e,this._alpha=t}function Ta(e,t){this._context=e,this._alpha=t}function za(e){this._context=e}function Na(e){return new za(e)}function Da(e){return e<0?-1:1}function Pa(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(Da(a)+Da(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function La(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function qa(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function $a(e){this._context=e}function ja(e){this._context=new Fa(e)}function Fa(e){this._context=e}function Ia(e){return new $a(e)}function Ua(e){return new ja(e)}function Ba(e){this._context=e}function Wa(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Ga(e){return new Ba(e)}function Ya(e,t){this._context=e,this._t=t}function Ha(e){return new Ya(e,.5)}function Va(e){return new Ya(e,0)}function Xa(e){return new Ya(e,1)}function Za(e,t,n){var r=FT.hasOwnProperty(e)&&FT[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function Ja(e){var t,n,r,i,a,o,u,s,f,c,l,d=[];for(t=e.slice().replace(UT[0],"###$1").split(UT[1]).slice(1),s=0,c=t.length;s<c;++s){for(n=t[s],r=n.slice(1).trim().replace(UT[2],"$1###$2").split(UT[3]),o=n.charAt(0),i=[o],f=0,l=r.length;f<l;++f)(a=+r[f])===a&&i.push(a);if(u=IT[o.toLowerCase()],i.length-1>u)for(f=1,l=i.length;f<l;f+=u)d.push([o].concat(i.slice(f,f+u)));else d.push(i)}return d}function Qa(e,t,n,r,i,a,o,u,s){var f=GT.call(arguments);if(BT[f])return BT[f];var c=o*(Math.PI/180),l=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);var h=d*(u-e)*.5+l*(s-t)*.5,p=d*(s-t)*.5-l*(u-e)*.5,g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);var m=d/n,v=l/n,y=-l/r,b=d/r,_=m*u+v*s,x=y*u+b*s,w=m*e+v*t,k=y*e+b*t,M=(w-_)*(w-_)+(k-x)*(k-x),S=1/M-.25;S<0&&(S=0);var E=Math.sqrt(S);a==i&&(E=-E);var O=.5*(_+w)-E*(k-x),A=.5*(x+k)+E*(w-_),C=Math.atan2(x-A,_-O),R=Math.atan2(k-A,w-O),T=R-C;T<0&&1===a?T+=2*Math.PI:T>0&&0===a&&(T-=2*Math.PI);for(var z=Math.ceil(Math.abs(T/(.5*Math.PI+.001))),N=[],D=0;D<z;++D){var P=C+D*T/z,L=C+(D+1)*T/z;N[D]=[O,A,P,L,n,r,l,d]}return BT[f]=N}function Ka(e){var t=GT.call(e);if(WT[t])return WT[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],f=e[7],c=f*o,l=-s*u,d=s*o,h=f*u,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,k=n+m,M=r+v,S=k+_*v,E=M-_*m;return WT[t]=[c*x+l*w,d*x+h*w,c*S+l*E,d*S+h*E,c*k+l*M,d*k+h*M]}function eo(e,t){var n=YT[0]=e[0];if("a"===n||"A"===n)YT[1]=t*e[1],YT[2]=t*e[2],YT[6]=t*e[6],YT[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)YT[r]=t*e[r];return YT}function to(e,t,n,r,i){var a,o,u,s,f,c=null,l=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=eo(a,i)),a[0]){case"l":l+=a[1],d+=a[2],e.lineTo(l+n,d+r);break;case"L":l=a[1],d=a[2],e.lineTo(l+n,d+r);break;case"h":l+=a[1],e.lineTo(l+n,d+r);break;case"H":l=a[1],e.lineTo(l+n,d+r);break;case"v":d+=a[1],e.lineTo(l+n,d+r);break;case"V":d=a[1],e.lineTo(l+n,d+r);break;case"m":l+=a[1],d+=a[2],e.moveTo(l+n,d+r);break;case"M":l=a[1],d=a[2],e.moveTo(l+n,d+r);break;case"c":o=l+a[5],u=d+a[6],h=l+a[3],p=d+a[4],e.bezierCurveTo(l+a[1]+n,d+a[2]+r,h+n,p+r,o+n,u+r),l=o,d=u;break;case"C":l=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,l+n,d+r);break;case"s":o=l+a[3],u=d+a[4],h=2*l-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,l+a[1]+n,d+a[2]+r,o+n,u+r),h=l+a[1],p=d+a[2],l=o,d=u;break;case"S":o=a[3],u=a[4],h=2*l-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,u+r),l=o,d=u,h=a[1],p=a[2];break;case"q":o=l+a[3],u=d+a[4],h=l+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),l=o,d=u,h=a[1],p=a[2];break;case"t":o=l+a[1],u=d+a[2],null===c[0].match(/[QqTt]/)?(h=l,p=d):"t"===c[0]?(h=2*l-s,p=2*d-f):"q"===c[0]&&(h=2*l-h,p=2*d-p),s=h,f=p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u,h=l+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*l-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u;break;case"a":no(e,l+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+d+r]),l+=a[6],d+=a[7];break;case"A":no(e,l+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}}function no(e,t,n,r){for(var i=Qa(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=Ka(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function ro(e){return XT.hasOwnProperty(e)?XT[e]:io(e)}function io(e){if(!ZT.hasOwnProperty(e)){var t=Ja(e);ZT[e]={draw:function(e,n){to(e,t,0,0,Math.sqrt(n)/2)}}}return ZT[e]}function ao(e){return e.x}function oo(e){return e.y}function uo(e){return e.width}function so(e){return e.height}function fo(e){return function(){return e}}function co(){function e(e,u,s){var f,c=null!=u?u:+t.call(this,e),l=null!=s?s:+n.call(this,e),d=+r.call(this,e),h=+i.call(this,e),p=+a.call(this,e);if(o||(o=f=Zi()),p<=0)o.rect(c,l,d,h);else{var g=c+d,m=l+h;o.moveTo(c+p,l),o.lineTo(g-p,l),o.quadraticCurveTo(g,l,g,l+p),o.lineTo(g,m-p),o.quadraticCurveTo(g,m,g-p,m),o.lineTo(c+p,m),o.quadraticCurveTo(c,m,c,m-p),o.lineTo(c,l+p),o.quadraticCurveTo(c,l,c+p,l),o.closePath()}if(f)return o=null,f+""||null}var t=ao,n=oo,r=uo,i=so,a=fo(0),o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:fo(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:fo(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:fo(+t),e):r},e.height=function(t){return arguments.length?(i="function"==typeof t?t:fo(+t),e):i},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:fo(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function lo(){function e(e,t,n){var r=n/2;if(o){var i=s-t,a=e-u;if(i||a){var l=Math.sqrt(i*i+a*a),d=(i/=l)*f,h=(a/=l)*f,p=Math.atan2(a,i);c.moveTo(u-d,s-h),c.lineTo(e-i*r,t-a*r),c.arc(e,t,r,p-JT,p),c.lineTo(u+d,s+h),c.arc(u,s,f,p,p+JT)}else c.arc(e,t,r,0,2*JT);c.closePath()}else o=1;u=e,s=t,f=r}function t(t){var u,s,f,l=t.length,d=!1;for(null==c&&(c=f=Zi()),u=0;u<=l;++u)!(u<l&&a(s=t[u],u,t))===d&&(d=!d)&&(o=0),d&&e(+n(s,u,t),+r(s,u,t),+i(s,u,t));if(f)return c=null,f+""||null}var n,r,i,a,o,u,s,f,c=null;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.context=function(e){return arguments.length?(c=null==e?null:e,t):c},t}function ho(e){return e.x||0}function po(e){return e.y||0}function go(e){return e.width||0}function mo(e){return e.size||1}function vo(e){return e.height||0}function yo(e){return(e.x||0)+(e.width||0)}function bo(e){return(e.y||0)+(e.height||0)}function _o(e){return e.startAngle||0}function xo(e){return e.endAngle||0}function wo(e){return e.padAngle||0}function ko(e){return e.innerRadius||0}function Mo(e){return e.outerRadius||0}function So(e){return e.cornerRadius||0}function Eo(e){return!(e.defined===!1)}function Oo(e){return null==e.size?64:e.size}function Ao(e){return ro(e.shape||"circle")}function Co(e,t){return QT.context(e)(t)}function Ro(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?ez:KT).curve(Za(r,n.orient,n.tension)).context(e)(t)}function To(e,t){var n=t[0],r=n.interpolate||"linear";return tz.curve(Za(r,n.orient,n.tension)).context(e)(t)}function zo(e,t,n,r){return nz.context(e)(t,n,r)}function No(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Do(e,t){return rz.context(e)(t)}function Po(e,t){return iz.context(e)(t)}function Lo(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e}function qo(e){return jT=e,qo}function $o(){}function jo(e,t){jT.add(e,t)}function Fo(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,u=n.x1+t.x2*r,s=n.y1+t.y2*i,f=t.stops,c=0,l=f.length,d=e.createLinearGradient(a,o,u,s);c<l;++c)d.addColorStop(f[c].offset,f[c].color);return d}function Io(e,t,n){return n.id?Fo(e,n,t.bounds):n}function Uo(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,n>0&&(e.globalAlpha=n,e.fillStyle=Io(e,t,t.fill),!0)}function Bo(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity,n>0&&(e.globalAlpha=n,e.strokeStyle=Io(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||cz),e.lineDashOffset=t.strokeDashOffset||0),!0))}function Wo(e,t){return e.zindex-t.zindex||e.index-t.index}function Go(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)t=i[n],t.index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(Wo)}function Yo(e,t){var n,r,i=e.items;if(i&&i.length){var a=Go(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function Ho(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=Go(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(i=e.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function Vo(e){return function(t,n,r){Yo(n,function(n){r&&!r.intersects(n.bounds)||Zo(e,t,n,n)})}}function Xo(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||Zo(e,t,n.items[0],n.items)}}function Zo(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&Uo(t,n,i)&&t.fill(),n.stroke&&Bo(t,n,i)&&t.stroke()))}function Jo(e){return e||(e=lz),function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,Ho(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return e(t,n,r,i,a,o)?n:void 0})}}function Qo(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==t?s.fill:t,c=s.stroke&&n.isPointInStroke;return c&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(f&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function Ko(e){return Jo(Qo(e))}function eu(e,t){return"translate("+e+","+t+")"}function tu(e){return eu(e.x||0,e.y||0)}function nu(e,t){function n(e,n){e("transform",tu(n)),e("d",t(null,n))}function r(e,n){return t(qo(e),n),Lo(e,n).translate(n.x||0,n.y||0)}function i(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:n,bound:r,draw:Vo(i),pick:Ko(i)}}function ru(e,t){var n="horizontal"===e[0].orient?t[1]:t[0],r="horizontal"===e[0].orient?"y":"x",i=0,a=e.length;if(1===a)return e[0];for(;i<a;){var o=i+a>>>1;e[o][r]<n?i=o+1:a=o}return i=Math.max(0,i-1),a=Math.min(e.length-1,a),n-e[i][r]<e[a][r]-n?e[i]:e[a]}function iu(e,t){for(var n,r,i,a=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(e[o].defined!==!1&&(n=e[o].x-t[0],r=e[o].y-t[1],i=n*n+r*r,i<a))return e[o];return null}function au(e,t){for(var n,r,i,a=e.length;--a>=0;)if(e[a].defined!==!1&&(n=e[a].x-t[0],r=e[a].y-t[1],i=n*n+r*r,n=e[a].size||1,i<n*n))return e[a];return null}function ou(e,t,n){function r(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))}function i(e,n){var r=n.items;return 0===r.length?e:(t(qo(e),r),Lo(e,r[0]))}function a(e,n){e.beginPath(),t(e,n)}function o(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,u(e,o,n,r)?o[0]:null)}var u=Qo(a);return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Xo(a),pick:o,tip:n}}function uu(){pz=1}function su(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+pz++),o=i.clipping[a]||(i.clipping[a]={id:a});return A(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function fu(e,t){e("transform",tu(t))}function cu(e,t){var n=t.stroke?gz:0;e("class","background"),e("d",zo(null,t,n,n))}function lu(e,t,n){var r=t.clip?su(n,t,t):null;e("clip-path",r)}function du(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&Lo(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)}function hu(e,t){var n=t.stroke?gz:0;e.beginPath(),zo(e,t,n,n)}function pu(e,t,n){var r=this;Yo(t,function(t){var i,a=t.x||0,o=t.y||0,u=t.width||0,s=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&(i=null==t.opacity?1:t.opacity,i>0&&(hu(e,t),t.fill&&Uo(e,t,i)&&e.fill(),t.stroke&&Bo(e,t,i)&&e.stroke())),t.clip&&(e.beginPath(),e.rect(0,0,u,s),e.clip()),n&&n.translate(-a,-o),Yo(t,function(t){r.draw(e,t,n)}),n&&n.translate(a,o),e.restore()})}function gu(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return Ho(t,function(f){var c,l,d,h;if(h=f.bounds,!h||h.contains(i,a))return l=f.x||0,d=f.y||0,e.save(),e.translate(l,d),l=i-l,d=a-d,c=Ho(f,function(e){return mu(e,l,d)?o.pick(e,n,r,l,d):null}),!c&&t.interactive!==!1&&(f.fill||f.stroke)&&mz(e,f,u,s)&&(c=f),e.restore(),c||null})}function mu(e,t,n){return(e.interactive!==!1||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}function vu(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function yu(e,t){return"center"===e?t/2:"right"===e?t:0}function bu(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function _u(e,t,n){var r=vu(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,u=(null!=t.height?t.height:r.height)||0,s=t.aspect===!1?"none":"xMidYMid";i-=yu(t.align,o),a-=bu(t.baseline,u),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",eu(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)}function xu(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=yu(t.align,a),i-=bu(t.baseline,o),e.set(r,i,r+a,i+o)}function wu(e,t,n){var r=this;Yo(t,function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=vu(t,r),f=t.x||0,c=t.y||0,l=(null!=t.width?t.width:s.width)||0,d=(null!=t.height?t.height:s.height)||0;f-=yu(t.align,l),c-=bu(t.baseline,d),t.aspect!==!1&&(a=s.width/s.height,o=t.width/t.height,a===a&&o===o&&a!==o&&(o<a?(u=l/a,c+=(d-u)/2,d=u):(u=d*a,f+=(l-u)/2,l=u))),s.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(s,f,c,l,d))}})}function ku(e,t){e("transform",tu(t)),e("d",t.path)}function Mu(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=Ja(n)).path=n),to(e,r,t.x,t.y)}function Su(e,t){return Mu(qo(e),t)?e.set(0,0,0,0):Lo(e,t)}function Eu(e,t){e("d",zo(null,t))}function Ou(e,t){var n,r;return Lo(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Au(e,t){e.beginPath(),zo(e,t)}function Cu(e,t){e("transform",tu(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)}function Ru(e,t){var n,r;return Lo(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)}function Tu(e,t,n){var r,i,a,o;return!(!t.stroke||!Bo(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}function zu(e,t,n){Yo(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&Tu(e,t,r)&&e.stroke()}})}function Nu(e,t,n,r){return!!e.isPointInStroke&&(Tu(e,t,1)&&e.isPointInStroke(n,r))}function Du(e){return fz=$u(e),Pu(Fu(e))}function Pu(e){return~~(.8*e.length*fz)}function Lu(e){return sz.font=Uu(e),qu(Fu(e))}function qu(e){return sz.measureText(e).width}function $u(e){return null!=e.fontSize?e.fontSize:11}function ju(e){sz=e&&(sz=Wi(1,1))?sz.getContext("2d"):null,Sz.width=sz?Lu:Du}function Fu(e){var t=e.text;return null==t?"":e.limit>0?Iu(e):t+""}function Iu(e){var t,n=+e.limit,r=e.text+"";if(sz?(sz.font=Uu(e),t=qu):(fz=$u(e),t=Pu),t(r)<n)return r;var i,a=e.ellipsis||"",o="rtl"===e.dir,u=0,s=r.length;if(n-=t(a),o){for(;u<s;)i=u+s>>>1,t(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),t(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}function Uu(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+$u(e)+"px "+(n||"sans-serif")}function Bu(e){var t=e.baseline,n=$u(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}function Wu(e,t){var n,r=t.dx||0,i=(t.dy||0)+Bu(t),a=t.x||0,o=t.y||0,u=t.angle||0,s=t.radius||0;s&&(n=(t.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),e("text-anchor",Ez[t.align]||"start"),u?(n=eu(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+eu(r,i))):n=eu(a+r,o+i),e("transform",n)}function Gu(e,t,n){var r,i,a=Sz.height(t),o=t.align,u=t.radius||0,s=t.x||0,f=t.y||0,c=t.dx||0,l=(t.dy||0)+Bu(t)-Math.round(.8*a);return u&&(i=(t.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=Sz.width(t),"center"===o?c-=r/2:"right"===o&&(c-=r),e.set(c+=s,l+=f,c+r,l+a),t.angle&&!n&&e.rotate(t.angle*Math.PI/180,s,f),e.expand(n||!r?0:1)}function Yu(e,t,n){Yo(t,function(t){var r,i,a,o,u,s;n&&!n.intersects(t.bounds)||(s=Fu(t))&&(r=null==t.opacity?1:t.opacity,0!==r&&(e.font=Uu(t),e.textAlign=t.align||"left",i=t.x||0,a=t.y||0,(o=t.radius)&&(u=(t.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Math.PI/180),i=a=0),i+=t.dx||0,a+=(t.dy||0)+Bu(t),t.fill&&Uo(e,t,r)&&e.fillText(s,i,a),t.stroke&&Bo(e,t,r)&&e.strokeText(s,i,a),t.angle&&e.restore()))})}function Hu(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Gu(Oz,t,!0),u=-t.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),c=t.x,l=t.y,d=s*i-f*a+(c-c*s+l*f),h=f*i+s*a+(l-c*f-l*s);return o.contains(d,h)}function Vu(e,t,n){var r=Rz[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Li),e,n)}function Xu(e,t,n){var r,i,a,o,u=Rz[e.marktype],s=u.bound,f=e.items,c=f&&f.length;if(u.nested)return c?a=f[0]:(Tz.mark=e,a=Tz),o=Vu(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new Li,c)for(r=0,i=f.length;r<i;++r)t.union(Vu(f[r],s,n));return e.bounds=t}function Zu(e,t){return JSON.stringify(e,zz,t)}function Ju(e){var t="string"==typeof e?JSON.parse(e):e;return Qu(t)}function Qu(e){var t,n,r,i=e.marktype,a=e.items;if(a)for(n=0,r=a.length;n<r;++n)t=i?"mark":"group",a[n][t]=e,a[n].zindex&&(a[n][t].zdirty=!0),"group"===(i||t)&&Qu(a[n]);return i&&Xu(e),e}function Ku(e){arguments.length?this.root=Ju(e):(this.root=es({marktype:"group",name:"root",role:"frame"}),this.root.items=[new ji(this.root)])}function es(e,t){return{bounds:new Li,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function ts(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function ns(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function rs(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=ts(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function is(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function as(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function os(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function us(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=Rz[o.marktype]).tip){for(a=os(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}function ss(e,t){this._active=null,this._handlers={},this._loader=e||ge(),this._tooltip=t||fs}function fs(e,t,n,r){e.element().setAttribute("title",r||"")}function cs(e){this._el=null,this._bgcolor=null,this._loader=new Yi(e)}function ls(e,t){ss.call(this,e,t),this._down=null,this._touch=null,this._first=!0}function ds(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function hs(e){return function(t){this.fire(e,t),this._active=null}}function ps(e,t){var n=t.clip;if(e.save(),e.beginPath(),A(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}function gs(){return"undefined"!=typeof window?window.devicePixelRatio||1:1}function ms(e,t,n,r,i){var a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),u=a?Iz:i;
return e.width=t*u,e.height=n*u,a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=u,o.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function vs(e){cs.call(this,e),this._redraw=!1,this._dirty=new Li}function ys(e,t,n){return t.expand(1).round(),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}function bs(e,t){if(null==t)return e;for(var n=Wz.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}function _s(e,t){ss.call(this,e,t);var n=this;n._hrefHandler=xs(n,function(e,t){t&&t.href&&n.handleHref(e,t,t.href)}),n._tooltipHandler=xs(n,function(e,t){n.handleTooltip(e,t,e.type!==$z)})}function xs(e,t){return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,t.call(e._obj,n,i)}}function ws(e,t,n){var r,i,a="<"+e;if(t)for(r in t)i=t[r],null!=i&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function ks(e){return"</"+e+">"}function Ms(e){cs.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Ss(e,t,n){var r,i,a;for(e=rs(e,n,"linearGradient",Xz),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)a=rs(e,r,"stop",Xz),a.setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);is(e,r)}function Es(e,t,n){var r;e=rs(e,n,"clipPath",Xz),e.setAttribute("id",t.id),t.path?(r=rs(e,0,"path",Xz),r.setAttribute("d",t.path)):(r=rs(e,0,"rect",Xz),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function Os(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function As(e,t,n){t=t.lastChild;var r,i=0;Yo(n,function(n){r=e.draw(t,n,r),++i}),is(t,1+i)}function Cs(e,t,n,r,i){var a,o=e._svg;if(!o&&(a=t.ownerDocument,o=ts(a,r,Xz),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=ts(a,"path",Xz);u.setAttribute("class","background"),o.appendChild(u),u.__data__=e;var s=ts(a,"g",Xz);o.appendChild(s),s.__data__=e}return(o.ownerSVGElement!==i||Rs(e)&&o.previousSibling!==n)&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function Rs(e){var t=e.mark||e.group;return t&&t.items.length>1}function Ts(e,t,n){t!==Kz[e]&&(null!=t?n?Qz.setAttributeNS(n,e,t):Qz.setAttribute(e,t):n?Qz.removeAttributeNS(n,e):Qz.removeAttribute(e),Kz[e]=t)}function zs(){var e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Ns(e){cs.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function Ds(e,t,n,r){rN[r||e]=t}function Ps(e,t,n,r){if(null==e)return"";var i,a,o,u,s,f="";for("bgrect"===n&&t.interactive===!1&&(f+="pointer-events: none; "),"text"===n&&(f+="font: "+Uu(e)+"; "),i=0,a=Vz.length;i<a;++i)o=Vz[i],u=Hz[o],s=e[o],null==s?"fill"===u&&(f+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(r.gradient[s.id]=s,s="url(#"+s.id+")"),f+=u+": "+s+"; "):f+=u+": none; ";return f?'style="'+f.trim()+'"':null}function Ls(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qs(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(fN[e]=t,this):fN[e]}function $s(e){var t=e.clip;if(A(t))t(qo(cN.clear()));else{if(!t)return;cN.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(cN)}function js(e,t,n){return e===t||("path"===n?Fs(e,t):e instanceof Date&&t instanceof Date?+e===+t:$(e)&&$(t)?Math.abs(e-t)<=lN:e&&t&&(s(e)||s(t))?null!=e&&null!=t&&Is(e,t):e==t)}function Fs(e,t){return js(Ja(e),Ja(t))}function Is(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!js(e[n],t[n],n))return!1;return typeof e==typeof t}function Us(e){Bn.call(this,null,e)}function Bs(e,t,n){return t(e.bounds.clear(),e,n)}function Ws(e){Bn.call(this,0,e)}function Gs(e){var t=e._signals[hN];return t||(e._signals[hN]=t=e.add(0)),t}function Ys(e){Bn.call(this,null,e)}function Hs(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Vs(e){Bn.call(this,null,e)}function Xs(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function Zs(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(Xs(i,t=e[n].bounds))return!0}function Js(e){var t=e.bounds;return t.width()>1&&t.height()>1}function Qs(e,t,n){var r=e.range(),i=new Li;return t===zR||t===PR?i.set(r[0],-(1/0),r[1],+(1/0)):i.set(-(1/0),r[0],+(1/0),r[1]),i.expand(n||1),function(e){return i.encloses(e.bounds)}}function Ks(e){Bn.call(this,null,e)}function ef(e){for(var t,n,r=e.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(t=r[a],n=t.items,t.marktype===UR)switch(t.role){case BR:case HR:break;case VR:tf(n,o.rowheaders);break;case XR:tf(n,o.rowfooters);break;case JR:tf(n,o.colheaders);break;case QR:tf(n,o.colfooters);break;case ZR:o.rowtitle=n[0];break;case KR:o.coltitle=n[0];break;default:tf(n,o.marks)}return o}function tf(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function nf(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function rf(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function af(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function of(e,t){return e.bounds[t]}function uf(e,t,n){var r=s(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function sf(e){return e<0?Math.ceil(-e):0}function ff(e,t,n){function r(e,t){return Math.floor(Math.min(e,t))}function i(e,t){return Math.ceil(Math.max(e,t))}var a,o,u,s,f,c,l,d,h,p,g,m,v=ef(t,n),y=v.marks,b=n.bounds===fT,_=b?nf:rf,x=new Li(0,0,0,0),w=uf(n.align,cT),k=uf(n.align,lT),M=uf(n.padding,cT),S=uf(n.padding,lT),E=n.offset,O=t.columns||n.columns||y.length,A=O<0?1:Math.ceil(y.length/O),C=A*O,R=[],T=[],z=0,N=0,D=[],P=[],L=0,q=0,$=y.length;for(o=0;o<O;++o)T[o]=0;for(o=0;o<A;++o)P[o]=0;for(o=0;o<$;++o)f=_(y[o]),u=o%O,s=~~(o/O),l=Math.ceil(_(y[o]).x2),d=Math.ceil(_(y[o]).y2),z=Math.max(z,l),L=Math.max(L,d),T[u]=Math.max(T[u],l),P[s]=Math.max(P[s],d),R.push(M+sf(f.x1)),D.push(S+sf(f.y1)),e.dirty(y[o]);for(o=0;o<$;++o)o%O===0&&(R[o]=N),o<O&&(D[o]=q);if(w===sT)for(u=1;u<O;++u){for(m=0,o=u;o<$;o+=O)m<R[o]&&(m=R[o]);for(o=u;o<$;o+=O)R[o]=m+T[u-1]}else if(w===uT){for(m=0,o=0;o<$;++o)o%O&&m<R[o]&&(m=R[o]);for(o=0;o<$;++o)o%O&&(R[o]=m+z)}else for(w=!1,u=1;u<O;++u)for(o=u;o<$;o+=O)R[o]+=T[u-1];if(k===sT)for(s=1;s<A;++s){for(m=0,o=s*O,a=o+O;o<a;++o)m<D[o]&&(m=D[o]);for(o=s*O;o<a;++o)D[o]=m+P[s-1]}else if(k===uT){for(m=0,o=O;o<$;++o)m<D[o]&&(m=D[o]);for(o=O;o<$;++o)D[o]=m+L}else for(k=!1,s=1;s<A;++s)for(o=s*O,a=o+O;o<a;++o)D[o]+=P[s-1];for(h=0,o=0;o<$;++o)c=y[o],l=c.x||0,c.x=h=R[o]+(o%O?h:0),c.bounds.translate(h-l,0);for(u=0;u<O;++u)for(p=0,o=u;o<$;o+=O)c=y[o],d=c.y||0,c.y=p+=D[o],c.bounds.translate(0,p-d);if(uf(n.center,cT)&&A>1&&w)for(o=0;o<$;++o)c=y[o],f=w===uT?z:T[o%O],h=f-_(c).x2,h>0&&(c.x+=l=h/2,c.bounds.translate(l,0));if(uf(n.center,lT)&&1!==O&&k)for(o=0;o<$;++o)c=y[o],f=k===uT?L:P[~~(o/O)],p=f-_(c).y2,p>0&&(c.y+=d=p/2,c.bounds.translate(0,d));for(o=0;o<$;++o)y[o].mark.bounds.clear();for(o=0;o<$;++o)c=y[o],e.dirty(c),x.union(c.mark.bounds.union(c.bounds));_=b?af:of,g=uf(n.headerBand,lT,null),h=cf(e,v.rowheaders,y,O,A,-uf(E,"rowHeader"),r,0,_,"x1",0,O,1,g),g=uf(n.headerBand,cT,null),p=cf(e,v.colheaders,y,O,O,-uf(E,"columnHeader"),r,1,_,"y1",0,1,O,g),g=uf(n.footerBand,lT,null),cf(e,v.rowfooters,y,O,A,uf(E,"rowFooter"),i,0,_,"x2",O-1,O,1,g),g=uf(n.footerBand,cT,null),cf(e,v.colfooters,y,O,O,uf(E,"columnFooter"),i,1,_,"y2",C-O,1,O,g),v.rowtitle&&(m=h-uf(E,"rowTitle"),g=uf(n.titleBand,lT,.5),lf(e,v.rowtitle,m,0,x,g)),v.coltitle&&(m=p-uf(E,"columnTitle"),g=uf(n.titleBand,cT,.5),lf(e,v.coltitle,m,1,x,g))}function cf(e,t,n,r,i,a,o,u,s,f,c,l,d,h){var p,g,m,v,y,b,_,x,w,k=n.length,M=0,S=0;if(!k)return M;for(p=c;p<k;p+=l)n[p]&&(M=o(M,s(n[p],f)));if(!t.length)return M;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),M+=a,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=c,g=0,v=t.length;g<v;++g,p+=l){for(b=t[g],y=b.mark.bounds,m=p;m>=0&&null==(_=n[m]);m-=d);u?(x=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),w=M):(x=M,w=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,e.dirty(b),S=o(S,y[f])}return S}function lf(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function df(e){Bn.call(this,null,e)}function hf(e,t,n){var r,i,a,o,u,s,f=t.items,c=Math.max(0,t.width||0),l=Math.max(0,t.height||0),d=(new Li).set(0,0,c,l),h=d.clone(),p=d.clone(),g=[];for(u=0,s=f.length;u<s;++u)switch(i=f[u],i.role){case BR:o=gf(i)?h:p,o.union(vf(e,i,c,l));break;case WR:r=i;break;case HR:g.push(i);break;case GR:case YR:case VR:case XR:case ZR:case JR:case QR:case KR:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}if(g.length)for(a={leftWidth:_f(e,g),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},u=0,s=g.length;u<s;++u)if(o=wf(e,g[u],a,h,p,c,l),n.autosize&&n.autosize.type===nT){var m=g[u].items[0].datum.orient;m===NR||m===DR?d.add(o.x1,0).add(o.x2,0):m!==zR&&m!==PR||d.add(0,o.y1).add(0,o.y2)}else d.union(o);d.union(h).union(p),r&&d.union(bf(e,r,c,l,d)),Mf(e,t,d,n)}function pf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function gf(e){var t=e.items[0].datum.orient;return t===NR||t===DR}function mf(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function vf(e,t,n,r){var i,a,o=t.items[0],u=o.datum,s=u.orient,f=mf(u),c=o.range,l=o.offset,d=o.position,h=o.minExtent,p=o.maxExtent,g=u.title&&o.items[f[2]].items[0],m=o.titlePadding,v=o.bounds,y=0,b=0;switch(_N.clear().union(v),v.clear(),(i=f[0])>-1&&v.union(o.items[i].bounds),(i=f[1])>-1&&v.union(o.items[i].bounds),s){case zR:y=d||0,b=-l,a=Math.max(h,Math.min(p,-v.y1)),g&&(a=yf(g,a,m,0,-1,v)),v.add(0,-a).add(c,0);break;case NR:y=-l,b=d||0,a=Math.max(h,Math.min(p,-v.x1)),g&&(a=yf(g,a,m,1,-1,v)),v.add(-a,0).add(0,c);break;case DR:y=n+l,b=d||0,a=Math.max(h,Math.min(p,v.x2)),g&&(a=yf(g,a,m,1,1,v)),v.add(0,0).add(a,c);break;case PR:y=d||0,b=r+l,a=Math.max(h,Math.min(p,v.y2)),g&&(a=yf(g,a,m,0,1,v)),v.add(0,0).add(c,a);break;default:y=o.x,b=o.y}return Lo(v.translate(y,b),o),pf(o,"x",y+bN)|pf(o,"y",b+bN)&&(o.bounds=_N,e.dirty(o),o.bounds=v,e.dirty(o)),o.mark.bounds.clear().union(v)}function yf(e,t,n,r,i,a){var o=e.bounds,u=0,s=0;return e.auto?(t+=n,r?u=(e.x||0)-(e.x=i*t):s=(e.y||0)-(e.y=i*t),o.translate(-u,-s),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}function bf(e,t,n,r,i){var a,o=t.items[0],u=o.orient,s=o.frame,f=o.anchor,c=o.offset,l=o.bounds,d=u===NR||u===DR,h=0,p=d?r:n,g=0,m=0;switch(s!==UR?u===NR?(h=i.y2,p=i.y1):u===DR?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):u===NR&&(h=r,p=0),a=f===FR?h:f===IR?p:(h+p)/2,_N.clear().union(l),u){case zR:g=a,m=i.y1-c;break;case NR:g=i.x1-c,m=a;break;case DR:g=i.x2+c,m=a;break;case PR:g=a,m=i.y2+c;break;default:g=o.x,m=o.y}return l.translate(g-o.x,m-o.y),pf(o,"x",g)|pf(o,"y",m)&&(o.bounds=_N,e.dirty(o),o.bounds=l,e.dirty(o)),t.bounds.clear().union(l)}function _f(e,t){return t.reduce(function(t,n){var r=n.items[0];if(xf(e,r,r.items[0].items[0]),r.datum.orient===NR){var i=_N.clear();r.items.forEach(function(e){i.union(e.bounds)}),t=Math.max(t,Math.round(i.width())+2*r.padding-1)}return t},0)}function xf(e,t,n){var r=t.padding-n.x,i=t.padding-n.y;if(t.datum.title){var a=t.items[1].items[0];i+=t.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),e.dirty(n))}function wf(e,t,n,r,i,a,o){var u,s,f,c=t.items[0],l=c.datum,d=l.orient,h=c.offset,p=c.bounds,g=0,m=0;switch(d===zR||d===PR?(f=i,g=n[d]):d!==NR&&d!==DR||(f=r,m=n[d]),_N.clear().union(p),p.clear(),c.items.forEach(function(e){p.union(e.bounds)}),u=Math.round(p.width())+2*c.padding-1,s=Math.round(p.height())+2*c.padding-1,l.type===tT&&kf(c.items[0].items[0].items[0].items),d){case NR:g-=n.leftWidth+h-Math.floor(f.x1),n.left+=s+n.margin;break;case DR:g+=h+Math.ceil(f.x2),n.right+=s+n.margin;break;case zR:m-=s+h-Math.floor(f.y1),n.top+=u+n.margin;break;case PR:m+=h+Math.ceil(f.y2),n.bottom+=u+n.margin;break;case LR:g+=h,m+=h;break;case qR:g+=a-u-h,m+=h;break;case $R:g+=h,m+=o-s-h;break;case jR:g+=a-u-h,m+=o-s-h;break;default:g=c.x,m=c.y}return Lo(p.set(g,m,g+u,m+s),c),pf(c,"x",g)|pf(c,"width",u)|pf(c,"y",m)|pf(c,"height",s)&&(c.bounds=_N,e.dirty(c),c.bounds=p,e.dirty(c)),c.mark.bounds.clear().union(p)}function kf(e){var t=e.reduce(function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e},{});e.forEach(function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y})}function Mf(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,u=e._height,s=e.padding();if(!(e._autosize<1)&&a){var f=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,Math.ceil(n.x2-f)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===eT&&(o-=s.left+s.right,u-=s.top+s.bottom),a===oT?(c=0,h=0,f=o,d=u):a===nT?(f=Math.max(0,o-c-l),d=Math.max(0,u-h-p)):a===rT?(f=Math.max(0,o-c-l),u=d+h+p):a===iT?(o=f+c+l,d=Math.max(0,u-h-p)):a===aT&&(o=f+c+l,u=d+h+p),e._resizeView(o,u,f,d,[c,h],i.resize)}}function Sf(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function Ef(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function Of(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function Af(){}function Cf(e,t){var n=new Af;if(e instanceof Af)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function Rf(){function e(t,i,o,u){if(i>=a.length)return null!=n&&t.sort(n),null!=r?r(t):t;for(var s,f,c,l=-1,d=t.length,h=a[i++],p=Cf(),g=o();++l<d;)(c=p.get(s=h(f=t[l])+""))?c.push(f):p.set(s,[f]);return p.each(function(t,n){u(g,n,e(t,i,o,u))}),g}function t(e,n){if(++n>a.length)return e;var i,u=o[n-1];return null!=r&&n>=a.length?i=e.entries():(i=[],e.each(function(e,r){i.push({key:r,values:t(e,n)})})),null!=u?i.sort(function(e,t){return u(e.key,t.key)}):i}var n,r,i,a=[],o=[];return i={object:function(t){return e(t,0,Tf,zf)},map:function(t){return e(t,0,Nf,Df)},entries:function(n){return t(e(n,0,Nf,Df),0)},key:function(e){return a.push(e),i},sortKeys:function(e){return o[a.length-1]=e,i},sortValues:function(e){return n=e,i},rollup:function(e){return r=e,i}}}function Tf(){return{}}function zf(e,t,n){e[t]=n}function Nf(){return Cf()}function Df(e,t,n){e.set(t,n)}function Pf(){}function Lf(e,t){var n=new Pf;if(e instanceof Pf)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}function qf(e){function t(t){var a=t+"",o=n.get(a);if(!o){if(i!==BN)return i;n.set(a,o=r.push(t))}return e[(o-1)%e.length]}var n=Cf(),r=[],i=BN;return e=null==e?[]:UN.call(e),t.domain=function(e){if(!arguments.length)return r.slice();r=[],n=Cf();for(var i,a,o=-1,u=e.length;++o<u;)n.has(a=(i=e[o])+"")||n.set(a,r.push(i));return t},t.range=function(n){return arguments.length?(e=UN.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(i=e,t):i},t.copy=function(){return qf().domain(r).range(e).unknown(i)},t}function $f(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jf(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ff(){}function If(e){var t;return e=(e+"").trim().toLowerCase(),(t=XN.exec(e))?(t=parseInt(t[1],16),new Yf(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=ZN.exec(e))?Uf(parseInt(t[1],16)):(t=JN.exec(e))?new Yf(t[1],t[2],t[3],1):(t=QN.exec(e))?new Yf(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=KN.exec(e))?Bf(t[1],t[2],t[3],t[4]):(t=eD.exec(e))?Bf(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=tD.exec(e))?Vf(t[1],t[2]/100,t[3]/100,1):(t=nD.exec(e))?Vf(t[1],t[2]/100,t[3]/100,t[4]):rD.hasOwnProperty(e)?Uf(rD[e]):"transparent"===e?new Yf(NaN,NaN,NaN,0):null}function Uf(e){return new Yf(e>>16&255,e>>8&255,255&e,1)}function Bf(e,t,n,r){return r<=0&&(e=t=n=NaN),new Yf(e,t,n,r)}function Wf(e){return e instanceof Ff||(e=If(e)),e?(e=e.rgb(),new Yf(e.r,e.g,e.b,e.opacity)):new Yf}function Gf(e,t,n,r){return 1===arguments.length?Wf(e):new Yf(e,t,n,null==r?1:r)}function Yf(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Hf(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Vf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Jf(e,t,n,r)}function Xf(e){if(e instanceof Jf)return new Jf(e.h,e.s,e.l,e.opacity);if(e instanceof Ff||(e=If(e)),!e)return new Jf;if(e instanceof Jf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=t===a?(n-r)/u+6*(n<r):n===a?(r-t)/u+2:(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new Jf(o,u,s,e.opacity)}function Zf(e,t,n,r){return 1===arguments.length?Xf(e):new Jf(e,t,n,null==r?1:r)}function Jf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Qf(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Kf(e){if(e instanceof tc)return new tc(e.l,e.a,e.b,e.opacity);if(e instanceof sc){if(isNaN(e.h))return new tc(e.l,0,0,e.opacity);var t=e.h*iD;return new tc(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof Yf||(e=Wf(e));var n,r,i=ac(e.r),a=ac(e.g),o=ac(e.b),u=nc((.2225045*i+.7168786*a+.0606169*o)/sD);return i===a&&a===o?n=r=u:(n=nc((.4360747*i+.3850649*a+.1430804*o)/uD),r=nc((.0139322*i+.0971045*a+.7141733*o)/fD)),new tc(116*u-16,500*(n-u),200*(u-r),e.opacity)}function ec(e,t,n,r){return 1===arguments.length?Kf(e):new tc(e,t,n,null==r?1:r)}function tc(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function nc(e){return e>hD?Math.pow(e,1/3):e/dD+cD}function rc(e){return e>lD?e*e*e:dD*(e-cD)}function ic(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ac(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function oc(e){if(e instanceof sc)return new sc(e.h,e.c,e.l,e.opacity);if(e instanceof tc||(e=Kf(e)),0===e.a&&0===e.b)return new sc(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*aD;return new sc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function uc(e,t,n,r){return 1===arguments.length?oc(e):new sc(e,t,n,null==r?1:r)}function sc(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function fc(e){if(e instanceof lc)return new lc(e.h,e.s,e.l,e.opacity);e instanceof Yf||(e=Wf(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(xD*r+bD*t-_D*n)/(xD+bD-_D),a=r-i,o=(yD*(n-i)-mD*a)/vD,u=Math.sqrt(o*o+a*a)/(yD*i*(1-i)),s=u?Math.atan2(o,a)*aD-120:NaN;return new lc(s<0?s+360:s,u,i,e.opacity)}function cc(e,t,n,r){return 1===arguments.length?fc(e):new lc(e,t,n,null==r?1:r)}function lc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function dc(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function hc(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return dc((n-r/t)*t,o,i,a,u)}}function pc(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return dc((n-r/t)*t,i,a,o,u)}}function gc(e){return function(){return e}}function mc(e,t){return function(n){return e+n*t}}function vc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yc(e,t){var n=t-e;return n?mc(e,n>180||n<-180?n-360*Math.round(n/360):n):gc(isNaN(e)?t:e)}function bc(e){return 1===(e=+e)?_c:function(t,n){return n-t?vc(t,n,e):gc(isNaN(t)?n:t)}}function _c(e,t){var n=t-e;return n?mc(e,n):gc(isNaN(e)?t:e)}function xc(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=Gf(t[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=e(a),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=u(e),r+""}}}function wc(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Cc(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function kc(e,t){var n=new Date;return e=+e,t-=e,function(r){return n.setTime(e+t*r),n}}function Mc(e,t){return e=+e,t-=e,function(n){return e+t*n}}function Sc(e,t){var n,r={},i={};null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={});for(n in t)n in e?r[n]=Cc(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function Ec(e){return function(){return e}}function Oc(e){return function(t){return e(t)+""}}function Ac(e,t){var n,r,i,a=CD.lastIndex=RD.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=CD.exec(e))&&(r=RD.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:Mc(n,r)})),a=RD.lastIndex;return a<t.length&&(i=t.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?Oc(s[0].x):Ec(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})}function Cc(e,t){var n,r=typeof t;return null==t||"boolean"===r?gc(t):("number"===r?Mc:"string"===r?(n=If(t))?(t=n,ED):Ac:t instanceof If?ED:t instanceof Date?kc:Array.isArray(t)?wc:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Sc:Mc)(e,t)}function Rc(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}}function Tc(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*TD,skewX:Math.atan(s)*TD,scaleX:o,scaleY:u}}function zc(e){return"none"===e?zD:(wD||(wD=document.createElement("DIV"),kD=document.documentElement,MD=document.defaultView),wD.style.transform=e,e=MD.getComputedStyle(kD.appendChild(wD),null).getPropertyValue("transform"),kD.removeChild(wD),e=e.slice(7,-1).split(","),Tc(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function Nc(e){return null==e?zD:(SD||(SD=document.createElementNS("http://www.w3.org/2000/svg","g")),SD.setAttribute("transform",e),(e=SD.transform.baseVal.consolidate())?(e=e.matrix,Tc(e.a,e.b,e.c,e.d,e.e,e.f)):zD)}function Dc(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function a(e,r,i,a,o,u){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:Mc(e,i)},{i:s-2,x:Mc(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}function o(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Mc(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function u(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Mc(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function s(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:Mc(e,n)},{i:u-2,x:Mc(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),u(t.skewX,n.skewX,r,i),s(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t,n=-1,a=i.length;++n<a;)r[(t=i[n]).i]=t.x(e);return r.join("")}}}function Pc(e){return((e=Math.exp(e))+1/e)/2}function Lc(e){return((e=Math.exp(e))-1/e)/2}function qc(e){return((e=Math.exp(2*e))-1)/(e+1)}function $c(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=t[0],s=t[1],f=t[2],c=u-i,l=s-a,d=c*c+l*l;if(d<$D)r=Math.log(f/o)/PD,n=function(e){return[i+e*c,a+e*l,o*Math.exp(PD*e*r)]};else{var h=Math.sqrt(d),p=(f*f-o*o+qD*d)/(2*o*LD*h),g=(f*f-o*o-qD*d)/(2*f*LD*h),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/PD,n=function(e){var t=e*r,n=Pc(m),u=o/(LD*h)*(n*qc(PD*t+m)-Lc(m));return[i+u*c,a+u*l,o*n/Pc(PD*t+m)]}}return n.duration=1e3*r,n}function jc(e){return function(t,n){var r=e((t=Zf(t)).h,(n=Zf(n)).h),i=_c(t.s,n.s),a=_c(t.l,n.l),o=_c(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function Fc(e,t){var n=_c((e=ec(e)).l,(t=ec(t)).l),r=_c(e.a,t.a),i=_c(e.b,t.b),a=_c(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}}function Ic(e){return function(t,n){var r=e((t=uc(t)).h,(n=uc(n)).h),i=_c(t.c,n.c),a=_c(t.l,n.l),o=_c(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function Uc(e){return function t(n){function r(t,r){var i=e((t=cc(t)).h,(r=cc(r)).h),a=_c(t.s,r.s),o=_c(t.l,r.l),u=_c(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}function Bc(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}function Wc(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function Gc(e){return function(){return e}}function Yc(e){return+e}function Hc(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Gc(t)}function Vc(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}function Xc(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}function Zc(e,t,n,r){var i=e[0],a=e[1],o=t[0],u=t[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(e){return o(i(e))}}function Jc(e,t,n,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),u=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<i;)a[u]=n(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(t){var n=FC(e,t,1,i)-1;return o[n](a[n](t))}}function Qc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Kc(e,t){function n(){return i=Math.min(u.length,s.length)>2?Jc:Zc,a=o=null,r}function r(t){return(a||(a=i(u,s,c?Vc(e):e,f)))(+t)}var i,a,o,u=YD,s=YD,f=Cc,c=!1;return r.invert=function(e){return(o||(o=i(s,u,Hc,c?Xc(t):t)))(+e)},r.domain=function(e){return arguments.length?(u=IN.call(e,Yc),n()):u.slice()},r.range=function(e){return arguments.length?(s=UN.call(e),n()):s.slice()},r.rangeRound=function(e){return s=UN.call(e),f=Rc,n()},r.clamp=function(e){return arguments.length?(c=!!e,n()):c},r.interpolate=function(e){return arguments.length?(f=e,n()):f},n()}function el(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function tl(e){return e=el(Math.abs(e)),e?e[1]:NaN}function nl(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function rl(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}function il(e){return new al(e)}function al(e){if(!(t=HD.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function ol(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}function ul(e,t){var n=el(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(VD=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+el(e,Math.max(0,t+a-1))[0]}function sl(e,t){var n=el(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function fl(e){return e}function cl(e){function t(e){function t(e){var t,i,u,c=v,x=y;if("c"===m)x=b(e)+x,e="";else{e=+e;var w=e<0;if(e=b(Math.abs(e),p),g&&(e=ol(e)),w&&0===+e&&(w=!1),c=(w?"("===f?f:"-":"-"===f||"("===f?"":f)+c,x=("s"===m?KD[8+VD/3]:"")+x+(w&&"("===f?")":""),_)for(t=-1,i=e.length;++t<i;)if(u=e.charCodeAt(t),48>u||u>57){x=(46===u?a+e.slice(t+1):e.slice(t))+x,e=e.slice(0,t);break}}h&&!l&&(e=r(e,1/0));var k=c.length+e.length+x.length,M=k<d?new Array(d-k+1).join(n):"";switch(h&&l&&(e=r(M+e,M.length?d-x.length:1/0),M=""),s){case"<":e=c+e+x+M;break;case"=":e=c+M+e+x;break;case"^":e=M.slice(0,k=M.length>>1)+c+e+x+M.slice(k);break;default:e=M+c+e+x}return o(e)}e=il(e);var n=e.fill,s=e.align,f=e.sign,c=e.symbol,l=e.zero,d=e.width,h=e.comma,p=e.precision,g=e.trim,m=e.type;"n"===m?(h=!0,m="g"):QD[m]||(null==p&&(p=12),g=!0,m="g"),(l||"0"===n&&"="===s)&&(l=!0,n="0",s="=");var v="$"===c?i[0]:"#"===c&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===c?i[1]:/[%p]/.test(m)?u:"",b=QD[m],_=/[defgprs%]/.test(m);return p=null==p?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),t.toString=function(){return e+""},t}function n(e,n){var r=t((e=il(e),e.type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(tl(n)/3))),a=Math.pow(10,-i),o=KD[8+i/3];return function(e){return r(a*e)+o}}var r=e.grouping&&e.thousands?nl(e.grouping,e.thousands):fl,i=e.currency,a=e.decimal,o=e.numerals?rl(e.numerals):fl,u=e.percent||"%";return{format:t,formatPrefix:n}}function ll(e){return XD=cl(e),ZD=XD.format,JD=XD.formatPrefix,XD}function dl(e){return Math.max(0,-tl(Math.abs(e)))}function hl(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(tl(t)/3)))-tl(Math.abs(e)))}function pl(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tl(t)-tl(e))+1}function gl(e,t,n){var r,i=e[0],a=e[e.length-1],o=hr(i,a,null==t?10:t);switch(n=il(null==n?",f":n),n.type){case"s":var u=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=hl(o,u))||(n.precision=r),JD(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=pl(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=dl(o))||(n.precision=r-2*("%"===n.type))}return ZD(n)}function ml(e){var t=e.domain;return e.ticks=function(e){var n=t();return lr(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return gl(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,u=i[a],s=i[o];return s<u&&(r=u,u=s,s=r,r=a,a=o,o=r),r=dr(u,s,n),r>0?(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,r=dr(u,s,n)):r<0&&(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,r=dr(u,s,n)),r>0?(i[a]=Math.floor(u/r)*r,i[o]=Math.ceil(s/r)*r,t(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[o]=Math.floor(s*r)/r,t(i)),e},e}function vl(){var e=Kc(Hc,Mc);return e.copy=function(){return Qc(e,vl())},ml(e)}function yl(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=IN.call(n,Yc),e):t.slice()},e.copy=function(){return yl().domain(t)},ml(e)}function bl(e,t){e=e.slice();var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function _l(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:Gc(t)}function xl(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function wl(e){return isFinite(e)?+("1e"+e):e<0?0:e}function kl(e){return 10===e?wl:e===Math.E?Math.exp:function(t){
return Math.pow(e,t)}}function Ml(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function Sl(e){return function(t){return-e(-t)}}function El(){function e(){return i=Ml(r),a=kl(r),n()[0]<0&&(i=Sl(i),a=Sl(a)),t}var t=Kc(_l,xl).domain([1,10]),n=t.domain,r=10,i=Ml(10),a=kl(10);return t.base=function(t){return arguments.length?(r=+t,e()):r},t.domain=function(t){return arguments.length?(n(t),e()):n()},t.ticks=function(e){var t,o=n(),u=o[0],s=o[o.length-1];(t=s<u)&&(d=u,u=s,s=d);var f,c,l,d=i(u),h=i(s),p=null==e?10:+e,g=[];if(!(r%1)&&h-d<p){if(d=Math.round(d)-1,h=Math.round(h)+1,u>0){for(;d<h;++d)for(c=1,f=a(d);c<r;++c)if(l=f*c,!(l<u)){if(l>s)break;g.push(l)}}else for(;d<h;++d)for(c=r-1,f=a(d);c>=1;--c)if(l=f*c,!(l<u)){if(l>s)break;g.push(l)}}else g=lr(d,h,Math.min(h-d,p)).map(a);return t?g.reverse():g},t.tickFormat=function(e,n){if(null==n&&(n=10===r?".0e":","),"function"!=typeof n&&(n=ZD(n)),e===1/0)return n;null==e&&(e=10);var o=Math.max(1,r*e/t.ticks().length);return function(e){var t=e/a(Math.round(i(e)));return t*r<r-.5&&(t*=r),t<=o?n(e):""}},t.nice=function(){return n(bl(n(),{floor:function(e){return a(Math.floor(i(e)))},ceil:function(e){return a(Math.ceil(i(e)))}}))},t.copy=function(){return Qc(t,El().base(r))},t}function Ol(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function Al(){function e(e,t){return(t=Ol(t,n)-(e=Ol(e,n)))?function(r){return(Ol(r,n)-e)/t}:Gc(t)}function t(e,t){return t=Ol(t,n)-(e=Ol(e,n)),function(r){return Ol(e+t*r,1/n)}}var n=1,r=Kc(e,t),i=r.domain;return r.exponent=function(e){return arguments.length?(n=+e,i(i())):n},r.copy=function(){return Qc(r,Al().exponent(n))},ml(r)}function Cl(){return Al().exponent(.5)}function Rl(){function e(){var e=0,a=Math.max(1,r.length);for(i=new Array(a-1);++e<a;)i[e-1]=gr(n,e/a);return t}function t(e){if(!isNaN(e=+e))return r[FC(i,e)]}var n=[],r=[],i=[];return t.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},t.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var r,i=0,a=t.length;i<a;++i)r=t[i],null==r||isNaN(r=+r)||n.push(r);return n.sort(ir),e()},t.range=function(t){return arguments.length?(r=UN.call(t),e()):r.slice()},t.quantiles=function(){return i.slice()},t.copy=function(){return Rl().domain(n).range(r)},t}function Tl(){function e(e){if(e<=e)return o[FC(a,e,0,i)]}function t(){var t=-1;for(a=new Array(i);++t<i;)a[t]=((t+1)*r-(t-i)*n)/(i+1);return e}var n=0,r=1,i=1,a=[.5],o=[0,1];return e.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],t()):[n,r]},e.range=function(e){return arguments.length?(i=(o=UN.call(e)).length-1,t()):o.slice()},e.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:t>=i?[a[i-1],r]:[a[t-1],a[t]]},e.copy=function(){return Tl().domain([n,r]).range(o)},ml(e)}function zl(){function e(e){if(e<=e)return n[FC(t,e,0,r)]}var t=[.5],n=[0,1],r=1;return e.domain=function(i){return arguments.length?(t=UN.call(i),r=Math.min(t.length,n.length-1),e):t.slice()},e.range=function(i){return arguments.length?(n=UN.call(i),r=Math.min(t.length,n.length-1),e):n.slice()},e.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},e.copy=function(){return zl().domain(t).range(n)},e}function Nl(e){return new Date(e)}function Dl(e){return e instanceof Date?+e:+new Date(+e)}function Pl(e,t,n,r,i,a,o,u,s){function f(u){return(o(u)<u?p:a(u)<u?g:i(u)<u?m:r(u)<u?v:t(u)<u?n(u)<u?y:b:e(u)<u?_:x)(u)}function c(t,n,r,i){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-n)/t,o=ar(function(e){return e[2]}).right(w,a);o===w.length?(i=hr(n/oP,r/oP,t),t=e):o?(o=w[a/w[o-1][2]<w[o][2]/a?o-1:o],i=o[1],t=o[0]):(i=Math.max(hr(n,r,t),1),t=u)}return null==i?t:t.every(i)}var l=Kc(Hc,Mc),d=l.invert,h=l.domain,p=s(".%L"),g=s(":%S"),m=s("%I:%M"),v=s("%I %p"),y=s("%a %d"),b=s("%b %d"),_=s("%B"),x=s("%Y"),w=[[o,1,eP],[o,5,5*eP],[o,15,15*eP],[o,30,30*eP],[a,1,tP],[a,5,5*tP],[a,15,15*tP],[a,30,30*tP],[i,1,nP],[i,3,3*nP],[i,6,6*nP],[i,12,12*nP],[r,1,rP],[r,2,2*rP],[n,1,iP],[t,1,aP],[t,3,3*aP],[e,1,oP]];return l.invert=function(e){return new Date(d(e))},l.domain=function(e){return arguments.length?h(IN.call(e,Dl)):h().map(Nl)},l.ticks=function(e,t){var n,r=h(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=c(e,i,a,t),n=n?n.range(i,a+1):[],o?n.reverse():n},l.tickFormat=function(e,t){return null==t?f:s(t)},l.nice=function(e,t){var n=h();return(e=c(e,n[0],n[n.length-1],t))?h(bl(n,e)):l},l.copy=function(){return Qc(l,Pl(e,t,n,r,i,a,o,u,s))},l}function Ll(){return Pl(KA,QA,XA,VA,HA,YA,GA,jA,fC).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function ql(){return Pl(uC,oC,rC,nC,tC,eC,GA,jA,lC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function $l(){function e(){var e=i().length,r=o[1]<o[0],l=o[r-0],d=o[1-r],h=Of(e,s,f);t=(d-l)/(h||1),u&&(t=Math.floor(t)),l+=(d-l-t*(e-s))*c,n=t*(1-s),u&&(l=Math.round(l),n=Math.round(n));var p=cr(e).map(function(e){return l+t*e});return a(r?p.reverse():p)}var t,n,r=qf().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,c=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],c=o[1]<o[0],l=c?a().reverse():a(),d=l.length-1;if(s===s&&f===f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return t=Math.max(0,FC(l,s)-1),r=s===f?t:FC(l,f)-1,s-l[t]>n+1e-10&&++t,c&&(u=t,t=d-r,r=d-u),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return $l().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(c)},e()}function jl(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return jl(t())},e}function Fl(){return jl($l().paddingInner(1))}function Il(e){return uP.call(e,function(e){return+e})}function Ul(){function e(e){return n(e)}function t(e){r=Il(e),n.domain([r[0],p(r)])}var n=vl(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return Ul().domain(e.domain()).range(e.range())},e}function Bl(){function e(e){return null==e||e!==e?void 0:n[(FC(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=Il(n),e):t.slice()},e.range=function(t){return arguments.length?(n=sP.call(t),e):n.slice()},e.copy=function(){return Bl().domain(e.domain()).range(e.range())},e}function Wl(e){function t(){var e=r.domain();i=e[0],a=p(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=vl(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Wl().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function Gl(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?Sf(n):n.invertExtent?Ef(n):void 0),n.type=e,n}}function Yl(e,t){return arguments.length>1?(fP[e]=Gl(e,t),this):fP.hasOwnProperty(e)?fP[e]:void 0}function Hl(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Vl(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Xl(e){return OD(e[e.length-1])}function Zl(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return CL.h=360*e-100,CL.s=1.5-1.5*t,CL.l=.8-.9*t,CL+""}function Jl(e){var t;return e=(.5-e)*Math.PI,RL.r=255*(t=Math.sin(e))*t,RL.g=255*(t=Math.sin(e+TL))*t,RL.b=255*(t=Math.sin(e+zL))*t,RL+""}function Ql(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Kl(e,t){jL[e]=qL["interpolate"+t],$L[e]=qL["scheme"+t]}function ed(e,t){if(arguments.length>1)return jL[e]=t,this;var n=e.split("-");return e=n[0],n=+n[1]+1,n&&$L.hasOwnProperty(e)?$L[e][n-1]:!n&&jL.hasOwnProperty(e)?jL[e]:void 0}function td(e,t){var n=t[0],r=p(t)-n;return function(t){return e(n+t*r)}}function nd(e,t,n){var r=n-t;return r?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(rd):R(0)}function rd(e,t){var n=t-e;return function(t){return e+t*n}}function id(e,t){var n=GD[ad(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function ad(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function od(e){return FL.hasOwnProperty(e)&&FL[e]}function ud(e){return IL.hasOwnProperty(e)&&IL[e]}function sd(e,t){var n;return s(t)&&(n=t.step,t=t.interval),f(t)&&(t="time"===e.type?od(t):"utc"===e.type?ud(t):o("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function fd(e,t,n){var r=e.range(),i=r[0],a=p(r);if(i>a&&(r=a,a=i,i=r),t=t.filter(function(t){return t=e(t),!(t<i||t>a)}),n>0&&t.length>1){for(var o=[t[0],p(t)];t.length>n&&t.length>=3;)t=t.filter(function(e,t){return!(t%2)});t.length<3&&(t=o)}return t}function cd(e,t){return e.ticks?e.ticks(t):e.domain()}function ld(e,t,n){var r=e.tickFormat?e.tickFormat(t,n):n?ZD(n):String;return e.type===kN?dd(r,hd(n)):r}function dd(e,t){return function(n){return e(n)?t(n):""}}function hd(e){var t=il(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return pd(ZD(t),ZD(".1f")(1)[1])}return ZD(t)}function pd(e,t){return function(n){var r,i,a=e(n),o=a.indexOf(t);if(o<0)return a;for(r=gd(a,o),i=r<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}function gd(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}function md(e){Bn.call(this,null,e)}function vd(e){Bn.call(this,null,e)}function yd(){return te({})}function bd(e){return e.exit}function _d(e){Bn.call(this,null,e)}function xd(e,t){var n=VL[e.type];return n?n(e):cd(e,t)}function wd(e){var t=e.domain(),n=t[0],r=p(t),i=e.range().length,a=new Array(i),o=0;for(a[0]=-(1/0);++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=+(1/0),a}function kd(e){var t=[-(1/0)].concat(e.quantiles());return t.max=+(1/0),t}function Md(e){var t=[-(1/0)].concat(e.domain());return t.max=+(1/0),t}function Sd(e){var t=e.domain();return t.max=t.pop(),t}function Ed(e,t,n){return n===GL&&VL[e.type]?Od(t):n===YL?Ad(t):Cd(t)}function Od(e){return function(t,n,r){var i=r[n+1]||r.max||+(1/0),a=Rd(t,e),o=Rd(i,e);return a&&o?a+""+o:o?"< "+o:" "+a}}function Ad(e){return function(t,n){return n?e(t):null}}function Cd(e){return function(t){return e(t)}}function Rd(e,t){return isFinite(e)?t(e):null}function Td(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+p(t),a=i-r;if(e.type===DN){var o=n?a/n:.1;r-=o,i+=o,a=i-r}return function(e){return(e-r)/a}}function zd(e){Bn.call(this,[],e)}function Nd(e){return e.source.x}function Dd(e){return e.source.y}function Pd(e){return e.target.x}function Ld(e){return e.target.y}function qd(e){Bn.call(this,{},e)}function $d(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function jd(e,t,n,r){return $d(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function Fd(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2,u=180*Math.atan2(a,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+u+" 0 1 "+n+","+r}function Id(e,t,n,r){return Fd(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function Ud(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function Bd(e,t,n,r){return Ud(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function Wd(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n}function Gd(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r}function Yd(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u}function Hd(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r}function Vd(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r}function Xd(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*i+","+t*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}function Zd(e){Bn.call(this,null,e)}function Jd(e){Bn.call(this,null,e),this.modified(!0)}function Qd(e,t,n){var r=Kd(e,t.domainRaw);if(r>-1)return r;var i,a,o=t.domain,u=e.type,s=t.zero||void 0===t.zero&&eq[u];return o?(tq[u]&&t.padding&&o[0]!==p(o)&&(o=eh(u,o,t.range,t.padding,t.exponent)),(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[i]=t.domainMax),null!=t.domainMid&&(a=t.domainMid,(a<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a))),e.domain(o),u===TN&&e.unknown(void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&sd(e,t.nice)||null),o.length):0}function Kd(e,t){return t?(e.domain(t),t.length):-1}function eh(e,t,n,r,i){var a=Math.abs(p(n)-n[0]),o=a/(a-2*r),u=e===kN?S(t,null,o):e===EN?E(t,null,o,.5):e===MN?E(t,null,o,i):M(t,null,o);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function th(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=nh(e.type,t,n);else if(t.scheme){if(i=rh(e.type,t,n),A(i))return e.interpolator(i)}else if(i&&e.type===qN)return e.interpolator(OD(ah(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(id(t.interpolate,t.interpolateGamma)):A(e.round)?e.round(r):A(e.rangeRound)&&e.interpolate(r?Rc:Cc),i&&e.range(ah(i,t.reverse))}function nh(e,t,n){e!==ON&&e!==CN&&o("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===CN?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Of(n,i,r)]}function rh(e,t,n){var r,i=t.scheme.toLowerCase(),a=ed(i),u=t.schemeExtent;return a||o("Unrecognized scheme name: "+t.scheme),n=e===DN?n+1:e===LN?n-1:e===zN||e===NN?+t.schemeCount||KL:n,e===qN?ih(a,u,t.reverse):!u&&(r=ed(i+"-"+n))?r:A(a)?oh(ih(a,u),n):e===TN?a:a.slice(0,n)}function ih(e,t,n){return A(e)&&(t||n)?td(e,ah(t||[0,1],n)):e}function ah(e,t){return t?e.slice().reverse():e}function oh(e,t){for(var n=new Array(t),r=t+2,i=0;i<t;)n[i]=e(++i/r);return n}function uh(e){Bn.call(this,null,e)}function sh(e){Bn.call(this,null,e)}function fh(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)a=e[s],a[r]=o,a[i]=o+=Math.abs(n(a))}function ch(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,f=0,c=0;f<s;++f)a=e[f],a[r]=u,a[i]=u=o*(c+=Math.abs(n(a)))}function lh(e,t,n,r,i){for(var a,o,u=0,s=0,f=e.length,c=0;c<f;++c)o=e[c],a=n(o),a<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function dh(e,t,n,r){var i,a,o,u,s,f,c,l,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],f=t.map(p),c=i[f],c||(i[f]=c=[],h.push(c)),c.push(s);for(f=0,d=0,u=h.length;f<u;++f){for(c=h[f],a=0,l=0,o=c.length;a<o;++a)l+=Math.abs(r(c[a]));c.sum=l,l>d&&(d=l),n&&c.sort(n)}return h.max=d,h}function hh(e,t){return e-t}function ph(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function gh(e){return function(){return e}}function mh(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=vh(e,t[r]))return n;return 0}function vh(e,t){for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,u=o-1;a<o;u=a++){var s=e[a],f=s[0],c=s[1],l=e[u],d=l[0],h=l[1];if(yh(s,l,t))return 0;c>r!=h>r&&n<(d-f)*(r-c)/(h-c)+f&&(i=-i)}return i}function yh(e,t,n){var r;return bh(e,t,n)&&_h(e[r=+(e[0]===t[0])],n[r],t[r])}function bh(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function _h(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function xh(){}function wh(){function e(e){var n=u(e);if(Array.isArray(n))n=n.slice().sort(hh);else{var r=fr(e),i=r[0],a=r[1];n=hr(i,a,n),n=cr(Math.floor(i/n)*n,Math.floor(a/n)*n,n)}return n.map(function(n){return t(e,n)})}function t(e,t){var r=[],i=[];return n(e,t,function(n){s(n,e,t),ph(n)>0?r.push([n]):i.push(n)}),i.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(mh((t=r[n])[0],e)!==-1)return void t.push(e)}),{type:"MultiPolygon",value:t,coordinates:r}}function n(e,t,n){function i(e){var t,i,a=[e[0][0]+u,e[0][1]+s],o=[e[1][0]+u,e[1][1]+s],f=r(a),c=r(o);(t=p[f])?(i=h[c])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(o),n(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(o),p[t.end=c]=t):(t=h[c])?(i=p[f])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(o),n(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(a),h[t.start=f]=t):h[f]=p[c]={start:f,end:c,ring:[a,o]}}var u,s,f,c,l,d,h=new Array,p=new Array;for(u=s=-1,c=e[0]>=t,cq[c<<1].forEach(i);++u<a-1;)f=c,c=e[u+1]>=t,cq[f|c<<1].forEach(i);for(cq[c<<0].forEach(i);++s<o-1;){for(u=-1,c=e[s*a+a]>=t,l=e[s*a]>=t,cq[c<<1|l<<2].forEach(i);++u<a-1;)f=c,c=e[s*a+a+u+1]>=t,d=l,l=e[s*a+u+1]>=t,cq[f|c<<1|l<<2|d<<3].forEach(i);cq[c|l<<3].forEach(i)}for(u=-1,l=e[s*a]>=t,cq[l<<2].forEach(i);++u<a-1;)d=l,l=e[s*a+u+1]>=t,cq[l<<2|d<<3].forEach(i);cq[l<<3].forEach(i)}function r(e){return 2*e[0]+e[1]*(a+1)*4}function i(e,t,n){e.forEach(function(e){var r,i=e[0],u=e[1],s=0|i,f=0|u,c=t[f*a+s];i>0&&i<a&&s===i&&(r=t[f*a+s-1],e[0]=i+(n-r)/(c-r)-.5),u>0&&u<o&&f===u&&(r=t[(f-1)*a+s],e[1]=u+(n-r)/(c-r)-.5)})}var a=1,o=1,u=pr,s=i;return e.contour=t,e.size=function(t){if(!arguments.length)return[a,o];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(n>0&&r>0))throw new Error("invalid size");return a=n,o=r,e},e.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:gh(Array.isArray(t)?fq.call(t):t),e):u},e.smooth=function(t){return arguments.length?(s=t?i:xh,e):s===i},e}function kh(e,t,n){for(var r=e.width,i=e.height,a=(n<<1)+1,o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=e.data[u+o*r]),u>=n&&(u>=a&&(s-=e.data[u-a+o*r]),t.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function Mh(e,t,n){for(var r=e.width,i=e.height,a=(n<<1)+1,o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=e.data[o+u*r]),u>=n&&(u>=a&&(s-=e.data[o+(u-a)*r]),t.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function Sh(e){return e[0]}function Eh(e){return e[1]}function Oh(){function e(e){var n=new Float32Array(h*p),r=new Float32Array(h*p);e.forEach(function(e,t,r){var i=o(e,t,r)+d>>l,a=u(e,t,r)+d>>l;i>=0&&i<h&&a>=0&&a<p&&++n[i+a*h]}),kh({width:h,height:p,data:n},{width:h,height:p,data:r},c>>l),Mh({width:h,height:p,data:r},{width:h,height:p,data:n},c>>l),kh({width:h,height:p,data:n},{width:h,height:p,data:r},c>>l),Mh({width:h,height:p,data:r},{width:h,height:p,data:n},c>>l),kh({width:h,height:p,data:n},{width:h,height:p,data:r},c>>l),Mh({width:h,height:p,data:r},{width:h,height:p,data:n},c>>l);var i=g(n);if(!Array.isArray(i)){var a=mr(n);i=hr(0,a,i),i=cr(0,Math.floor(a/i)*i,i),i.shift()}return wh().thresholds(i).size([h,p])(n).map(t)}function t(e){return e.value*=Math.pow(2,-2*l),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(i)}function i(e){e[0]=e[0]*Math.pow(2,l)-d,e[1]=e[1]*Math.pow(2,l)-d}function a(){return d=3*c,h=s+2*d>>l,p=f+2*d>>l,e}var o=Sh,u=Eh,s=960,f=500,c=20,l=2,d=3*c,h=s+2*d>>l,p=f+2*d>>l,g=gh(20);return e.x=function(t){return arguments.length?(o="function"==typeof t?t:gh(+t),e):o},e.y=function(t){return arguments.length?(u="function"==typeof t?t:gh(+t),e):u},e.size=function(e){if(!arguments.length)return[s,f];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return s=t,f=n,a()},e.cellSize=function(e){if(!arguments.length)return 1<<l;if(!((e=+e)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(e)/Math.LN2),a()},e.thresholds=function(t){return arguments.length?(g="function"==typeof t?t:gh(Array.isArray(t)?fq.call(t):t),e):g},e.bandwidth=function(e){if(!arguments.length)return Math.sqrt(c*(c+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return c=Math.round((Math.sqrt(4*e*e+1)-1)/2),a()},e}function Ah(e){Bn.call(this,null,e)}function Ch(e){return function(t){for(var n=fr(t),r=n[0],i=n[1]-r,a=[],o=1;o<=e;++o)a.push(r+i*o/(e+1));return a}}function Rh(e){Bn.call(this,null,e)}function Th(){return new zh}function zh(){this.reset()}function Nh(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}function Dh(e){return e>1?0:e<-1?Qq:Math.acos(e)}function Ph(e){return e>1?Kq:e<-1?-Kq:Math.asin(e)}function Lh(){}function qh(e,t){e&&v$.hasOwnProperty(e.type)&&v$[e.type](e,t)}function $h(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function jh(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)$h(e[n],t,1);t.polygonEnd()}function Fh(e,t){e&&m$.hasOwnProperty(e.type)?m$[e.type](e,t):qh(e,t)}function Ih(){_$.point=Bh}function Uh(){Wh(yq,bq)}function Bh(e,t){_$.point=Wh,yq=e,bq=t,e*=r$,t*=r$,_q=e,xq=u$(t=t/2+e$),wq=d$(t)}function Wh(e,t){e*=r$,t*=r$,t=t/2+e$;var n=e-_q,r=n>=0?1:-1,i=r*n,a=u$(t),o=d$(t),u=wq*o,s=xq*a+u*u$(i),f=u*r*d$(i);y$.add(o$(f,s)),_q=e,xq=a,wq=o}function Gh(e){return b$.reset(),Fh(e,_$),2*b$}function Yh(e){return[o$(e[1],e[0]),Ph(e[2])]}function Hh(e){var t=e[0],n=e[1],r=u$(n);return[r*u$(t),r*d$(t),d$(n)]}function Vh(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Xh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Zh(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Jh(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Qh(e){var t=p$(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Kh(e,t){Tq.push(zq=[kq=e,Sq=e]),t<Mq&&(Mq=t),t>Eq&&(Eq=t)}function ep(e,t){var n=Hh([e*r$,t*r$]);if(Rq){var r=Xh(Rq,n),i=[r[1],-r[0],0],a=Xh(i,r);Qh(a),a=Yh(a);var o,u=e-Oq,s=u>0?1:-1,f=a[0]*n$*s,c=i$(u)>180;c^(s*Oq<f&&f<s*e)?(o=a[1]*n$,o>Eq&&(Eq=o)):(f=(f+360)%360-180,c^(s*Oq<f&&f<s*e)?(o=-a[1]*n$,o<Mq&&(Mq=o)):(t<Mq&&(Mq=t),t>Eq&&(Eq=t))),c?e<Oq?op(kq,e)>op(kq,Sq)&&(Sq=e):op(e,Sq)>op(kq,Sq)&&(kq=e):Sq>=kq?(e<kq&&(kq=e),e>Sq&&(Sq=e)):e>Oq?op(kq,e)>op(kq,Sq)&&(Sq=e):op(e,Sq)>op(kq,Sq)&&(kq=e)}else Tq.push(zq=[kq=e,Sq=e]);t<Mq&&(Mq=t),t>Eq&&(Eq=t),Rq=n,Oq=e}function tp(){w$.point=ep}function np(){zq[0]=kq,zq[1]=Sq,w$.point=Kh,Rq=null}function rp(e,t){if(Rq){var n=e-Oq;x$.add(i$(n)>180?n+(n>0?360:-360):n)}else Aq=e,Cq=t;_$.point(e,t),ep(e,t)}function ip(){_$.lineStart()}function ap(){rp(Aq,Cq),_$.lineEnd(),i$(x$)>Zq&&(kq=-(Sq=180)),zq[0]=kq,zq[1]=Sq,Rq=null}function op(e,t){return(t-=e)<0?t+360:t}function up(e,t){return e[0]-t[0]}function sp(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function fp(e){var t,n,r,i,a,o,u;if(Eq=Sq=-(kq=Mq=1/0),Tq=[],Fh(e,w$),n=Tq.length){for(Tq.sort(up),t=1,r=Tq[0],a=[r];t<n;++t)i=Tq[t],sp(r,i[0])||sp(r,i[1])?(op(r[0],i[1])>op(r[0],r[1])&&(r[1]=i[1]),op(i[0],r[1])>op(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-(1/0),n=a.length-1,t=0,r=a[n];t<=n;r=i,++t)i=a[t],(u=op(r[1],i[0]))>o&&(o=u,kq=i[0],Sq=r[1])}return Tq=zq=null,kq===1/0||Mq===1/0?[[NaN,NaN],[NaN,NaN]]:[[kq,Mq],[Sq,Eq]]}function cp(e,t){e*=r$,t*=r$;var n=u$(t);lp(n*u$(e),n*d$(e),d$(t))}function lp(e,t,n){++Nq,Pq+=(e-Pq)/Nq,Lq+=(t-Lq)/Nq,qq+=(n-qq)/Nq}function dp(){k$.point=hp}function hp(e,t){e*=r$,t*=r$;var n=u$(t);Yq=n*u$(e),Hq=n*d$(e),Vq=d$(t),k$.point=pp,lp(Yq,Hq,Vq)}function pp(e,t){e*=r$,t*=r$;var n=u$(t),r=n*u$(e),i=n*d$(e),a=d$(t),o=o$(p$((o=Hq*a-Vq*i)*o+(o=Vq*r-Yq*a)*o+(o=Yq*i-Hq*r)*o),Yq*r+Hq*i+Vq*a);Dq+=o,$q+=o*(Yq+(Yq=r)),jq+=o*(Hq+(Hq=i)),Fq+=o*(Vq+(Vq=a)),lp(Yq,Hq,Vq)}function gp(){k$.point=cp}function mp(){k$.point=yp}function vp(){bp(Wq,Gq),k$.point=cp}function yp(e,t){Wq=e,Gq=t,e*=r$,t*=r$,k$.point=bp;var n=u$(t);Yq=n*u$(e),Hq=n*d$(e),Vq=d$(t),lp(Yq,Hq,Vq)}function bp(e,t){e*=r$,t*=r$;var n=u$(t),r=n*u$(e),i=n*d$(e),a=d$(t),o=Hq*a-Vq*i,u=Vq*r-Yq*a,s=Yq*i-Hq*r,f=p$(o*o+u*u+s*s),c=Ph(f),l=f&&-c/f;Iq+=l*o,Uq+=l*u,Bq+=l*s,Dq+=c,$q+=c*(Yq+(Yq=r)),jq+=c*(Hq+(Hq=i)),Fq+=c*(Vq+(Vq=a)),lp(Yq,Hq,Vq)}function _p(e){Nq=Dq=Pq=Lq=qq=$q=jq=Fq=Iq=Uq=Bq=0,Fh(e,k$);var t=Iq,n=Uq,r=Bq,i=t*t+n*n+r*r;return i<Jq&&(t=$q,n=jq,r=Fq,Dq<Zq&&(t=Pq,n=Lq,r=qq),i=t*t+n*n+r*r,i<Jq)?[NaN,NaN]:[o$(n,t)*n$,Ph(r/p$(i))*n$]}function xp(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function wp(e,t){return[e>Qq?e-t$:e<-Qq?e+t$:e,t]}function kp(e,t,n){return(e%=t$)?t||n?xp(Sp(e),Ep(t,n)):Sp(e):t||n?Ep(t,n):wp}function Mp(e){return function(t,n){return t+=e,[t>Qq?t-t$:t<-Qq?t+t$:t,n]}}function Sp(e){var t=Mp(e);return t.invert=Mp(-e),t}function Ep(e,t){function n(e,t){var n=u$(t),u=u$(e)*n,s=d$(e)*n,f=d$(t),c=f*r+u*i;return[o$(s*a-c*o,u*r-f*i),Ph(c*a+s*o)]}var r=u$(e),i=d$(e),a=u$(t),o=d$(t);return n.invert=function(e,t){var n=u$(t),u=u$(e)*n,s=d$(e)*n,f=d$(t),c=f*a-s*o;return[o$(s*a+f*o,u*r+c*i),Ph(c*r-u*i)]},n}function Op(e){function t(t){return t=e(t[0]*r$,t[1]*r$),t[0]*=n$,t[1]*=n$,t}return e=kp(e[0]*r$,e[1]*r$,e.length>2?e[2]*r$:0),t.invert=function(t){return t=e.invert(t[0]*r$,t[1]*r$),t[0]*=n$,t[1]*=n$,t},t}function Ap(e,t,n,r,i,a){if(n){var o=u$(t),u=d$(t),s=r*n;null==i?(i=t+r*t$,a=t-s/2):(i=Cp(o,i),a=Cp(o,a),(r>0?i<a:i>a)&&(i+=r*t$));for(var f,c=i;r>0?c>a:c<a;c-=s)f=Yh([o,-u*u$(c),-u*d$(c)]),e.point(f[0],f[1])}}function Cp(e,t){t=Hh(t),t[0]-=e,Qh(t);var n=Dh(-t[1]);return((-t[2]<0?-n:n)+t$-Zq)%t$}function Rp(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:Lh,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Tp(e,t){return i$(e[0]-t[0])<Zq&&i$(e[1]-t[1])<Zq}function zp(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Np(e,t,n,r,i){var a,o,u=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(Tp(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);return void i.lineEnd()}u.push(n=new zp(r,e,null,!0)),s.push(n.o=new zp(r,null,n,!1)),u.push(n=new zp(o,e,null,!1)),s.push(n.o=new zp(o,null,n,!0))}}),u.length){for(s.sort(t),Dp(u),Dp(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var f,c,l=u[0];;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=f.length;a<o;++a)i.point((c=f[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(f=d.p.z,a=f.length-1;a>=0;--a)i.point((c=f[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,f=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Dp(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Pp(e,t){var n=t[0],r=t[1],i=d$(r),a=[d$(n),-u$(n),0],o=0,u=0;z$.reset(),1===i?r=Kq+Zq:i===-1&&(r=-Kq-Zq);for(var s=0,f=e.length;s<f;++s)if(l=(c=e[s]).length)for(var c,l,d=c[l-1],h=d[0],p=d[1]/2+e$,g=d$(p),m=u$(p),v=0;v<l;++v,h=b,g=x,m=w,d=y){var y=c[v],b=y[0],_=y[1]/2+e$,x=d$(_),w=u$(_),k=b-h,M=k>=0?1:-1,S=M*k,E=S>Qq,O=g*x;if(z$.add(o$(O*M*d$(S),m*w+O*u$(S))),o+=E?k+M*t$:k,E^h>=n^b>=n){var A=Xh(Hh(d),Hh(y));Qh(A);var C=Xh(a,A);Qh(C);var R=(E^k>=0?-1:1)*Ph(C[2]);(r>R||r===R&&(A[0]||A[1]))&&(u+=E^k>=0?1:-1)}}return(o<-Zq||o<Zq&&z$<-Zq)^1&u}function Lp(e,t,n,r){return function(i){function a(t,n){e(t,n)&&i.point(t,n)}function o(e,t){g.point(e,t)}function u(){b.point=o,g.lineStart()}function s(){b.point=a,g.lineEnd()}function f(e,t){p.push([e,t]),v.point(e,t)}function c(){v.lineStart(),p=[]}function l(){f(p[0][0],p[0][1]),v.lineEnd();var e,t,n,r,a=v.clean(),o=m.result(),u=o.length;if(p.pop(),d.push(p),p=null,u)if(1&a){if(n=o[0],(t=n.length-1)>0){for(y||(i.polygonStart(),y=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else u>1&&2&a&&o.push(o.pop().concat(o.shift())),h.push(o.filter(qp))}var d,h,p,g=t(i),m=Rp(),v=t(m),y=!1,b={point:a,lineStart:u,lineEnd:s,polygonStart:function(){b.point=f,b.lineStart=c,b.lineEnd=l,h=[],d=[]},polygonEnd:function(){b.point=a,b.lineStart=u,b.lineEnd=s,h=br(h);var e=Pp(d,r);h.length?(y||(i.polygonStart(),y=!0),Np(h,$p,e,n,i)):e&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=d=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return b}}function qp(e){return e.length>1}function $p(e,t){return((e=e.x)[0]<0?e[1]-Kq-Zq:Kq-e[1])-((t=t.x)[0]<0?t[1]-Kq-Zq:Kq-t[1])}function jp(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var u=a>0?Qq:-Qq,s=i$(a-n);i$(s-Qq)<Zq?(e.point(n,r=(r+o)/2>0?Kq:-Kq),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(a,r),t=0):i!==u&&s>=Qq&&(i$(n-i)<Zq&&(n-=i*Zq),i$(a-u)<Zq&&(a-=u*Zq),r=Fp(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=a,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Fp(e,t,n,r){var i,a,o=d$(e-n);return i$(o)>Zq?a$((d$(t)*(a=u$(r))*d$(n)-d$(r)*(i=u$(t))*d$(e))/(i*a*o)):(t+r)/2}function Ip(e,t,n,r){var i;if(null==e)i=n*Kq,r.point(-Qq,i),r.point(0,i),r.point(Qq,i),r.point(Qq,0),r.point(Qq,-i),r.point(0,-i),r.point(-Qq,-i),r.point(-Qq,0),r.point(-Qq,i);else if(i$(e[0]-t[0])>Zq){var a=e[0]<t[0]?Qq:-Qq;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Up(e){function t(t,n,r,i){Ap(i,e,u,r,t,n)}function n(e,t){return u$(e)*u$(t)>o}function r(e){var t,r,o,u,c;return{lineStart:function(){u=o=!1,c=1},point:function(l,d){var h,p=[l,d],g=n(l,d),m=s?g?0:a(l,d):g?a(l+(l<0?Qq:-Qq),d):0;if(!t&&(u=o=g)&&e.lineStart(),g!==o&&(h=i(t,p),(!h||Tp(t,h)||Tp(p,h))&&(p[0]+=Zq,p[1]+=Zq,g=n(p[0],p[1]))),g!==o)c=0,g?(e.lineStart(),h=i(p,t),e.point(h[0],h[1])):(h=i(t,p),e.point(h[0],h[1]),e.lineEnd()),t=h;else if(f&&t&&s^g){var v;m&r||!(v=i(p,t,!0))||(c=0,s?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||t&&Tp(t,p)||e.point(p[0],p[1]),t=p,o=g,r=m},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return c|(u&&o)<<1}}}function i(e,t,n){var r=Hh(e),i=Hh(t),a=[1,0,0],u=Xh(r,i),s=Vh(u,u),f=u[0],c=s-f*f;if(!c)return!n&&e;var l=o*s/c,d=-o*f/c,h=Xh(a,u),p=Jh(a,l),g=Jh(u,d);Zh(p,g);var m=h,v=Vh(p,m),y=Vh(m,m),b=v*v-y*(Vh(p,p)-1);if(!(b<0)){var _=p$(b),x=Jh(m,(-v-_)/y);if(Zh(x,p),x=Yh(x),!n)return x;var w,k=e[0],M=t[0],S=e[1],E=t[1];M<k&&(w=k,k=M,M=w);var O=M-k,A=i$(O-Qq)<Zq,C=A||O<Zq;if(!A&&E<S&&(w=S,S=E,E=w),C?A?S+E>0^x[1]<(i$(x[0]-k)<Zq?S:E):S<=x[1]&&x[1]<=E:O>Qq^(k<=x[0]&&x[0]<=M)){var R=Jh(m,(-v+_)/y);return Zh(R,p),[x,Yh(R)]}}}function a(t,n){var r=s?e:Qq-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=u$(e),u=6*r$,s=o>0,f=i$(o)>Zq;return Lp(n,r,t,s?[0,-e]:[-Qq,e-Qq])}function Bp(e,t,n,r,i,a){var o,u=e[0],s=e[1],f=t[0],c=t[1],l=0,d=1,h=f-u,p=c-s;if(o=n-u,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>l&&(l=o)}if(o=i-u,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<d&&(d=o)}if(o=r-s,
p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>l&&(l=o)}if(o=a-s,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<d&&(d=o)}return l>0&&(e[0]=u+l*h,e[1]=s+l*p),d<1&&(t[0]=u+d*h,t[1]=s+d*p),!0}}}}}function Wp(e,t,n,r){function i(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function a(i,a,u,f){var c=0,l=0;if(null==i||(c=o(i,u))!==(l=o(a,u))||s(i,a)<0^u>0){do f.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+u+4)%4)!==l)}else f.point(a[0],a[1])}function o(r,i){return i$(r[0]-e)<Zq?i>0?0:3:i$(r[0]-n)<Zq?i>0?2:1:i$(r[1]-t)<Zq?i>0?1:0:i>0?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){function s(e,t){i(e,t)&&E.point(e,t)}function f(){for(var t=0,n=0,i=m.length;n<i;++n)for(var a,o,u=m[n],s=1,f=u.length,c=u[0],l=c[0],d=c[1];s<f;++s)a=l,o=d,c=u[s],l=c[0],d=c[1],o<=r?d>r&&(l-a)*(r-o)>(d-o)*(e-a)&&++t:d<=r&&(l-a)*(r-o)<(d-o)*(e-a)&&--t;return t}function c(){E=O,g=[],m=[],S=!0}function l(){var e=f(),t=S&&e,n=(g=br(g)).length;(t||n)&&(o.polygonStart(),t&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),n&&Np(g,u,e,a,o),o.polygonEnd()),E=o,g=m=v=null}function d(){A.point=p,m&&m.push(v=[]),M=!0,k=!1,x=w=NaN}function h(){g&&(p(y,b),_&&k&&O.rejoin(),g.push(O.result())),A.point=s,k&&E.lineEnd()}function p(a,o){var u=i(a,o);if(m&&v.push([a,o]),M)y=a,b=o,_=u,M=!1,u&&(E.lineStart(),E.point(a,o));else if(u&&k)E.point(a,o);else{var s=[x=Math.max(P$,Math.min(D$,x)),w=Math.max(P$,Math.min(D$,w))],f=[a=Math.max(P$,Math.min(D$,a)),o=Math.max(P$,Math.min(D$,o))];Bp(s,f,e,t,n,r)?(k||(E.lineStart(),E.point(s[0],s[1])),E.point(f[0],f[1]),u||E.lineEnd(),S=!1):u&&(E.lineStart(),E.point(a,o),S=!1)}x=a,w=o,k=u}var g,m,v,y,b,_,x,w,k,M,S,E=o,O=Rp(),A={point:s,lineStart:d,lineEnd:h,polygonStart:c,polygonEnd:l};return A}}function Gp(e,t,n){var r=cr(e,t-Zq,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function Yp(e,t,n){var r=cr(e,t-Zq,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Hp(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return cr(s$(a/m)*m,i,m).map(d).concat(cr(s$(f/v)*v,s,v).map(h)).concat(cr(s$(r/p)*p,n,p).filter(function(e){return i$(e%m)>Zq}).map(c)).concat(cr(s$(u/g)*g,o,g).filter(function(e){return i$(e%v)>Zq}).map(l))}var n,r,i,a,o,u,s,f,c,l,d,h,p=10,g=p,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(s).slice(1),d(i).reverse().slice(1),h(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],f=+t[0][1],s=+t[1][1],a>i&&(t=a,a=i,i=t),f>s&&(t=f,f=s,s=t),e.precision(y)):[[a,f],[i,s]]},e.extentMinor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.stepMinor=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(y=+t,c=Gp(u,o,90),l=Yp(r,n,y),d=Gp(f,s,90),h=Yp(a,i,y),e):y},e.extentMajor([[-180,-90+Zq],[180,90-Zq]]).extentMinor([[-180,-80-Zq],[180,80+Zq]])}function Vp(e){return e}function Xp(){$$.point=Zp}function Zp(e,t){$$.point=Jp,M$=E$=e,S$=O$=t}function Jp(e,t){q$.add(O$*e-E$*t),E$=e,O$=t}function Qp(){Jp(M$,S$)}function Kp(e,t){e<j$&&(j$=e),e>I$&&(I$=e),t<F$&&(F$=t),t>U$&&(U$=t)}function eg(e,t){W$+=e,G$+=t,++Y$}function tg(){K$.point=ng}function ng(e,t){K$.point=rg,eg(R$=e,T$=t)}function rg(e,t){var n=e-R$,r=t-T$,i=p$(n*n+r*r);H$+=i*(R$+e)/2,V$+=i*(T$+t)/2,X$+=i,eg(R$=e,T$=t)}function ig(){K$.point=eg}function ag(){K$.point=ug}function og(){sg(A$,C$)}function ug(e,t){K$.point=sg,eg(A$=R$=e,C$=T$=t)}function sg(e,t){var n=e-R$,r=t-T$,i=p$(n*n+r*r);H$+=i*(R$+e)/2,V$+=i*(T$+t)/2,X$+=i,i=T$*e-R$*t,Z$+=i*(R$+e),J$+=i*(T$+t),Q$+=3*i,eg(R$=e,T$=t)}function fg(e){this._context=e}function cg(e,t){oj.point=lg,tj=rj=e,nj=ij=t}function lg(e,t){rj-=e,ij-=t,aj.add(p$(rj*rj+ij*ij)),rj=e,ij=t}function dg(){this._string=[]}function hg(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function pg(e,t){function n(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),Fh(e,r(i))),i.result()}var r,i,a=4.5;return n.area=function(e){return Fh(e,r($$)),$$.result()},n.measure=function(e){return Fh(e,r(oj)),oj.result()},n.bounds=function(e){return Fh(e,r(B$)),B$.result()},n.centroid=function(e){return Fh(e,r(K$)),K$.result()},n.projection=function(t){return arguments.length?(r=null==t?(e=null,Vp):(e=t).stream,n):e},n.context=function(e){return arguments.length?(i=null==e?(t=null,new dg):new fg(t=e),"function"!=typeof a&&i.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),n):a},n.projection(e).context(t)}function gg(e){return function(t){var n=new mg;for(var r in e)n[r]=e[r];return n.stream=t,n}}function mg(){}function vg(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Fh(n,e.stream(B$)),t(B$.result()),null!=r&&e.clipExtent(r),e}function yg(e,t,n){return vg(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,u])},n)}function bg(e,t,n){return yg(e,[[0,0],t],n)}function _g(e,t,n){return vg(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])},n)}function xg(e,t,n){return vg(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])},n)}function wg(e,t){return+t?Mg(e,t):kg(e)}function kg(e){return gg({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Mg(e,t){function n(r,i,a,o,u,s,f,c,l,d,h,p,g,m){var v=f-r,y=c-i,b=v*v+y*y;if(b>4*t&&g--){var _=o+d,x=u+h,w=s+p,k=p$(_*_+x*x+w*w),M=Ph(w/=k),S=i$(i$(w)-1)<Zq||i$(a-l)<Zq?(a+l)/2:o$(x,_),E=e(S,M),O=E[0],A=E[1],C=O-r,R=A-i,T=y*C-v*R;(T*T/b>t||i$((v*C+y*R)/b-.5)>.3||o*d+u*h+s*p<sj)&&(n(r,i,a,o,u,s,O,A,S,_/=k,x/=k,w,g,m),m.point(O,A),n(O,A,S,_,x,w,f,c,l,d,h,p,g,m))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){v=NaN,w.point=a,t.lineStart()}function a(r,i){var a=Hh([r,i]),o=e(r,i);n(v,y,m,b,_,x,v=o[0],y=o[1],m=r,b=a[0],_=a[1],x=a[2],uj,t),t.point(v,y)}function o(){w.point=r,t.lineEnd()}function u(){i(),w.point=s,w.lineEnd=f}function s(e,t){a(c=e,t),l=v,d=y,h=b,p=_,g=x,w.point=a}function f(){n(v,y,m,b,_,x,l,d,c,h,p,g,uj,t),w.lineEnd=o,o()}var c,l,d,h,p,g,m,v,y,b,_,x,w={point:r,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),w.lineStart=u},polygonEnd:function(){t.polygonEnd(),w.lineStart=i}};return w}}function Sg(e){return gg({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Eg(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r}function Og(e,t,n,r){function i(e,r){return[u*e-s*r+t,n-s*e-u*r]}var a=u$(r),o=d$(r),u=a*e,s=o*e,f=a/e,c=o/e,l=(o*n-a*t)/e,d=(o*t+a*n)/e;return i.invert=function(e,t){return[f*e-c*t+l,d-c*e-f*t]},i}function Ag(e){return Cg(function(){return e})()}function Cg(e){function t(e){return d(e[0]*r$,e[1]*r$)}function n(e){return e=d.invert(e[0],e[1]),e&&[e[0]*n$,e[1]*n$]}function r(){var e=Og(g,0,0,k).apply(null,a(y,b)),t=(k?Og:Eg)(g,m-e[0],v-e[1],k);return o=kp(_,x,w),l=xp(a,t),d=xp(o,l),c=wg(l,A),i()}function i(){return h=p=null,t}var a,o,u,s,f,c,l,d,h,p,g=150,m=480,v=250,y=0,b=0,_=0,x=0,w=0,k=0,M=null,S=N$,E=null,O=Vp,A=.5;return t.stream=function(e){return h&&p===e?h:h=fj(Sg(o)(S(c(O(p=e)))))},t.preclip=function(e){return arguments.length?(S=e,M=void 0,i()):S},t.postclip=function(e){return arguments.length?(O=e,E=u=s=f=null,i()):O},t.clipAngle=function(e){return arguments.length?(S=+e?Up(M=e*r$):(M=null,N$),i()):M*n$},t.clipExtent=function(e){return arguments.length?(O=null==e?(E=u=s=f=null,Vp):Wp(E=+e[0][0],u=+e[0][1],s=+e[1][0],f=+e[1][1]),i()):null==E?null:[[E,u],[s,f]]},t.scale=function(e){return arguments.length?(g=+e,r()):g},t.translate=function(e){return arguments.length?(m=+e[0],v=+e[1],r()):[m,v]},t.center=function(e){return arguments.length?(y=e[0]%360*r$,b=e[1]%360*r$,r()):[y*n$,b*n$]},t.rotate=function(e){return arguments.length?(_=e[0]%360*r$,x=e[1]%360*r$,w=e.length>2?e[2]%360*r$:0,r()):[_*n$,x*n$,w*n$]},t.angle=function(e){return arguments.length?(k=e%360*r$,r()):k*n$},t.precision=function(e){return arguments.length?(c=wg(l,A=e*e),i()):p$(A)},t.fitExtent=function(e,n){return yg(t,e,n)},t.fitSize=function(e,n){return bg(t,e,n)},t.fitWidth=function(e,n){return _g(t,e,n)},t.fitHeight=function(e,n){return xg(t,e,n)},function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function Rg(e){var t=0,n=Qq/3,r=Cg(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*r$,n=e[1]*r$):[t*n$,n*n$]},i}function Tg(e){function t(e,t){return[e*n,d$(t)/n]}var n=u$(e);return t.invert=function(e,t){return[e/n,Ph(t*n)]},t}function zg(e,t){function n(e,t){var n=p$(a-2*i*d$(t))/i;return[n*d$(e*=i),o-n*u$(e)]}var r=d$(e),i=(r+d$(t))/2;if(i$(i)<Zq)return Tg(e);var a=1+r*(2*i-r),o=p$(a)/i;return n.invert=function(e,t){var n=o-t;return[o$(e,i$(n))/i*h$(n),Ph((a-(e*e+n*n)*i*i)/(2*i))]},n}function Ng(){return Rg(zg).scale(155.424).center([0,33.6442])}function Dg(){return Ng().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Pg(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Lg(){function e(e){var t=e[0],n=e[1];return u=null,i.point(t,n),u||(a.point(t,n),u)||(o.point(t,n),u)}function t(){return n=r=null,e}var n,r,i,a,o,u,s=Dg(),f=Ng().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Ng().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){u=[e,t]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?f:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:s).invert(e)},e.stream=function(e){return n&&r===e?n:n=Pg([s.stream(r=e),f.stream(e),c.stream(e)])},e.precision=function(e){return arguments.length?(s.precision(e),f.precision(e),c.precision(e),t()):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),f.scale(.35*t),c.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(e){if(!arguments.length)return s.translate();var n=s.scale(),r=+e[0],u=+e[1];return i=s.translate(e).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(l),a=f.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+Zq,u+.12*n+Zq],[r-.214*n-Zq,u+.234*n-Zq]]).stream(l),o=c.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+Zq,u+.166*n+Zq],[r-.115*n-Zq,u+.234*n-Zq]]).stream(l),t()},e.fitExtent=function(t,n){return yg(e,t,n)},e.fitSize=function(t,n){return bg(e,t,n)},e.fitWidth=function(t,n){return _g(e,t,n)},e.fitHeight=function(t,n){return xg(e,t,n)},e.scale(1070)}function qg(e){return function(t,n){var r=u$(t),i=u$(n),a=e(r*i);return[a*i*d$(t),a*d$(n)]}}function $g(e){return function(t,n){var r=p$(t*t+n*n),i=e(r),a=d$(i),o=u$(i);return[o$(t*a,r*o),Ph(r&&n*a/r)]}}function jg(){return Ag(cj).scale(124.75).clipAngle(179.999)}function Fg(){return Ag(lj).scale(79.4188).clipAngle(179.999)}function Ig(e,t){return[e,c$(g$((Kq+t)/2))]}function Ug(){return Bg(Ig).scale(961/t$)}function Bg(e){function t(){var t=Qq*u(),o=a(Op(a.rotate()).invert([0,0]));return f(null==c?[[o[0]-t,o[1]-t],[o[0]+t,o[1]+t]]:e===Ig?[[Math.max(o[0]-t,c),n],[Math.min(o[0]+t,r),i]]:[[c,Math.max(o[1]-t,n)],[r,Math.min(o[1]+t,i)]])}var n,r,i,a=Ag(e),o=a.center,u=a.scale,s=a.translate,f=a.clipExtent,c=null;return a.scale=function(e){return arguments.length?(u(e),t()):u()},a.translate=function(e){return arguments.length?(s(e),t()):s()},a.center=function(e){return arguments.length?(o(e),t()):o()},a.clipExtent=function(e){return arguments.length?(null==e?c=n=r=i=null:(c=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),t()):null==c?null:[[c,n],[r,i]]},t()}function Wg(e){return g$((Kq+e)/2)}function Gg(e,t){function n(e,t){a>0?t<-Kq+Zq&&(t=-Kq+Zq):t>Kq-Zq&&(t=Kq-Zq);var n=a/l$(Wg(t),i);return[n*d$(i*e),a-n*u$(i*e)]}var r=u$(e),i=e===t?d$(e):c$(r/u$(t))/c$(Wg(t)/Wg(e)),a=r*l$(Wg(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,r=h$(i)*p$(e*e+n*n);return[o$(e,i$(n))/i*h$(n),2*a$(l$(a/r,1/i))-Kq]},n):Ig}function Yg(){return Rg(Gg).scale(109.5).parallels([30,30])}function Hg(e,t){return[e,t]}function Vg(){return Ag(Hg).scale(152.63)}function Xg(e,t){function n(e,t){var n=a-t,r=i*e;return[n*d$(r),a-n*u$(r)]}var r=u$(e),i=e===t?d$(e):(r-u$(t))/(t-e),a=r/i+e;return i$(i)<Zq?Hg:(n.invert=function(e,t){var n=a-t;return[o$(e,i$(n))/i*h$(n),a-h$(i)*p$(e*e+n*n)]},n)}function Zg(){return Rg(Xg).scale(131.154).center([0,13.9389])}function Jg(e,t){var n=u$(t),r=u$(e)*n;return[n*d$(e)/r,d$(t)/r]}function Qg(){return Ag(Jg).scale(144.049).clipAngle(60)}function Kg(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?Vp:gg({point:function(i,a){this.stream.point(i*e+n,a*t+r)}})}function em(){function e(){return i=a=null,o}var t,n,r,i,a,o,u=1,s=0,f=0,c=1,l=1,d=Vp,h=null,p=Vp;return o={stream:function(e){return i&&a===e?i:i=d(p(a=e))},postclip:function(i){return arguments.length?(p=i,h=t=n=r=null,e()):p},clipExtent:function(i){return arguments.length?(p=null==i?(h=t=n=r=null,Vp):Wp(h=+i[0][0],t=+i[0][1],n=+i[1][0],r=+i[1][1]),e()):null==h?null:[[h,t],[n,r]]},scale:function(t){return arguments.length?(d=Kg((u=+t)*c,u*l,s,f),e()):u},translate:function(t){return arguments.length?(d=Kg(u*c,u*l,s=+t[0],f=+t[1]),e()):[s,f]},reflectX:function(t){return arguments.length?(d=Kg(u*(c=t?-1:1),u*l,s,f),e()):c<0},reflectY:function(t){return arguments.length?(d=Kg(u*c,u*(l=t?-1:1),s,f),e()):l<0},fitExtent:function(e,t){return yg(o,e,t)},fitSize:function(e,t){return bg(o,e,t)},fitWidth:function(e,t){return _g(o,e,t)},fitHeight:function(e,t){return xg(o,e,t)}}}function tm(e,t){return[u$(t)*d$(e),d$(t)]}function nm(){return Ag(tm).scale(249.5).clipAngle(90+Zq)}function rm(e,t){var n=u$(t),r=1+u$(e)*n;return[n*d$(e)/r,d$(t)/r]}function im(){return Ag(rm).scale(250).clipAngle(142)}function am(e,t){return[c$(g$((Kq+t)/2)),-e]}function om(){var e=Bg(am),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}function um(e,t){return function n(){var r=t();return r.type=e,r.path=pg().projection(r),r.copy=r.copy||function(){var e=n();return hj.forEach(function(t){r.hasOwnProperty(t)&&e[t](r[t]())}),e.path.pointRadius(r.path.pointRadius()),e},r}}function sm(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(pj[e]=um(e,t),this):pj.hasOwnProperty(e)?pj[e]:null}function fm(e){return e&&e.path||dj}function cm(e){Bn.call(this,null,e)}function lm(e,t){var n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}function dm(e){Bn.call(this,null,e)}function hm(e){Bn.call(this,null,e)}function pm(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var i=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(i),a};return r.context=function(t){return e.context(t),r},r}function gm(e){Bn.call(this,[],e),this.generator=Hp()}function mm(e){Bn.call(this,null,e),this.modified(!0)}function vm(e,t){var n=_m(t.fit);t.extent?e.fitExtent(t.extent,n):t.size?e.fitSize(t.size,n):0}function ym(e){var t=sm((e||"mercator").toLowerCase());return t||o("Unrecognized projection type: "+e),t()}function bm(e,t,n){A(e[t])&&e[t](n)}function _m(e){return e=O(e),1===e.length?e[0]:{type:gq,features:e.reduce(function(e,t){return t&&t.type===gq?e.push.apply(e,t.features):eA(t)?e.push.apply(e,t):e.push(t),e},[])}}function xm(e,t){function n(){var n,i,a=r.length,o=0,u=0;for(n=0;n<a;++n)i=r[n],o+=i.x,u+=i.y;for(o=o/a-e,u=u/a-t,n=0;n<a;++n)i=r[n],i.x-=o,i.y-=u}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n}function wm(e){return function(){return e}}function km(){return 1e-6*(Math.random()-.5)}function Mm(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Sm(this.cover(t,n),t,n,e)}function Sm(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,u,s,f,c,l,d,h=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((f=t>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o,i=h,!(h=h[l=c<<1|f]))return i[l]=p,e;if(u=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===u&&n===s)return p.next=h,i?i[l]=p:e._root=p,e;do i=i?i[l]=new Array(4):e._root=new Array(4),(f=t>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o;while((l=c<<1|f)===(d=(s>=o)<<1|u>=a));return i[d]=h,i[l]=p,e}function Em(e){var t,n,r,i,a=e.length,o=new Array(a),u=new Array(a),s=1/0,f=1/0,c=-(1/0),l=-(1/0);for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(o[n]=r,u[n]=i,r<s&&(s=r),r>c&&(c=r),i<f&&(f=i),i>l&&(l=i));for(c<s&&(s=this._x0,c=this._x1),l<f&&(f=this._y0,l=this._y1),this.cover(s,f).cover(c,l),n=0;n<a;++n)Sm(this,o[n],u[n],e[n]);return this}function Om(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{if(!(n>e||e>i||r>t||t>a))return this;var o,u,s=i-n,f=this._root;switch(u=(t<(r+a)/2)<<1|e<(n+i)/2){case 0:do o=new Array(4),o[u]=f,f=o;while(s*=2,i=n+s,a=r+s,e>i||t>a);break;case 1:do o=new Array(4),o[u]=f,f=o;while(s*=2,n=i-s,a=r+s,n>e||t>a);break;case 2:do o=new Array(4),o[u]=f,f=o;while(s*=2,i=n+s,r=a-s,e>i||r>t);break;case 3:do o=new Array(4),o[u]=f,f=o;while(s*=2,n=i-s,r=a-s,n>e||r>t)}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function Am(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Cm(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Rm(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Tm(e,t,n){var r,i,a,o,u,s,f,c=this._x0,l=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new Rm(g,c,l,d,h)),null==n?n=1/0:(c=e-n,l=t-n,d=e+n,h=t+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(i=s.x0)>d||(a=s.y0)>h||(o=s.x1)<c||(u=s.y1)<l))if(g.length){var m=(i+o)/2,v=(a+u)/2;p.push(new Rm(g[3],m,v,o,u),new Rm(g[2],i,v,m,u),new Rm(g[1],m,a,o,v),new Rm(g[0],i,a,m,v)),(f=(t>=v)<<1|e>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=s)}else{var y=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);c=e-x,l=t-x,d=e+x,h=t+x,r=g.data}}return r}function zm(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,u,s,f,c,l,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((f=a>=(u=(p+m)/2))?p=u:m=u,(c=o>=(s=(g+v)/2))?g=s:v=s,t=h,!(h=h[l=c<<1|f]))return this;if(!h.length)break;(t[l+1&3]||t[l+2&3]||t[l+3&3])&&(n=t,d=l)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[l]=i:delete t[l],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)}function Nm(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Dm(){return this._root}function Pm(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Lm(e){var t,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new Rm(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&s.length){var f=(r+a)/2,c=(i+o)/2;(n=s[3])&&u.push(new Rm(n,f,c,a,o)),(n=s[2])&&u.push(new Rm(n,r,c,f,o)),(n=s[1])&&u.push(new Rm(n,f,i,a,c)),(n=s[0])&&u.push(new Rm(n,r,i,f,c))}return this}function qm(e){var t,n=[],r=[];for(this._root&&n.push(new Rm(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,u=t.y0,s=t.x1,f=t.y1,c=(o+s)/2,l=(u+f)/2;(a=i[0])&&n.push(new Rm(a,o,u,c,l)),(a=i[1])&&n.push(new Rm(a,c,u,s,l)),(a=i[2])&&n.push(new Rm(a,o,l,c,f)),(a=i[3])&&n.push(new Rm(a,c,l,s,f))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function $m(e){return e[0]}function jm(e){return arguments.length?(this._x=e,this):this._x}function Fm(e){return e[1]}function Im(e){return arguments.length?(this._y=e,this):this._y}function Um(e,t,n){var r=new Bm(null==t?$m:t,null==n?Fm:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Bm(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Wm(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}function Gm(e){return e.x+e.vx}function Ym(e){return e.y+e.vy}function Hm(e){function t(){function e(e,t,n,r,i){var a=e.data,u=e.r,h=l+u;{if(!a)return t>f+h||r<f-h||n>c+h||i<c-h;if(a.index>s.index){var p=f-a.x-a.vx,g=c-a.y-a.vy,m=p*p+g*g;m<h*h&&(0===p&&(p=km(),m+=p*p),0===g&&(g=km(),m+=g*g),m=(h-(m=Math.sqrt(m)))/m*o,s.vx+=(p*=m)*(h=(u*=u)/(d+u)),s.vy+=(g*=m)*h,a.vx-=p*(h=1-h),a.vy-=g*h)}}}for(var t,r,s,f,c,l,d,h=i.length,p=0;p<u;++p)for(r=Um(i,Gm,Ym).visitAfter(n),t=0;t<h;++t)s=i[t],l=a[s.index],d=l*l,f=s.x+s.vx,c=s.y+s.vy,r.visit(e)}function n(e){if(e.data)return e.r=a[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function r(){if(i){var t,n,r=i.length;for(a=new Array(r),t=0;t<r;++t)n=i[t],a[n.index]=+e(n,t,i)}}var i,a,o=1,u=1;return"function"!=typeof e&&(e=wm(null==e?1:+e)),t.initialize=function(e){i=e,r()},t.iterations=function(e){return arguments.length?(u=+e,t):u},t.strength=function(e){return arguments.length?(o=+e,t):o},t.radius=function(n){return arguments.length?(e="function"==typeof n?n:wm(+n),r(),t):e},t}function Vm(e){return e.index}function Xm(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Zm(e){function t(e){return 1/Math.min(f[e.source.index],f[e.target.index])}function n(t){for(var n=0,r=e.length;n<p;++n)for(var i,a,s,f,l,d,h,g=0;g<r;++g)i=e[g],a=i.source,s=i.target,f=s.x+s.vx-a.x-a.vx||km(),l=s.y+s.vy-a.y-a.vy||km(),d=Math.sqrt(f*f+l*l),d=(d-u[g])/d*t*o[g],f*=d,l*=d,s.vx-=f*(h=c[g]),s.vy-=l*h,a.vx+=f*(h=1-h),a.vy+=l*h}function r(){if(s){var t,n,r=s.length,d=e.length,h=Cf(s,l);for(t=0,f=new Array(r);t<d;++t)n=e[t],n.index=t,"object"!=typeof n.source&&(n.source=Xm(h,n.source)),"object"!=typeof n.target&&(n.target=Xm(h,n.target)),f[n.source.index]=(f[n.source.index]||0)+1,f[n.target.index]=(f[n.target.index]||0)+1;for(t=0,c=new Array(d);t<d;++t)n=e[t],c[t]=f[n.source.index]/(f[n.source.index]+f[n.target.index]);o=new Array(d),i(),u=new Array(d),a()}}function i(){if(s)for(var t=0,n=e.length;t<n;++t)o[t]=+d(e[t],t,e)}function a(){if(s)for(var t=0,n=e.length;t<n;++t)u[t]=+h(e[t],t,e)}var o,u,s,f,c,l=Vm,d=t,h=wm(30),p=1;return null==e&&(e=[]),n.initialize=function(e){s=e,r()},n.links=function(t){return arguments.length?(e=t,r(),n):e},n.id=function(e){return arguments.length?(l=e,n):l},n.iterations=function(e){return arguments.length?(p=+e,n):p},n.strength=function(e){return arguments.length?(d="function"==typeof e?e:wm(+e),i(),n):d},n.distance=function(e){return arguments.length?(h="function"==typeof e?e:wm(+e),a(),n):h},n}function Jm(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new Qm(r)}function Qm(e){this._=e}function Km(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function ev(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function tv(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=kj,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function nv(){return Tj||(Dj(rv),Tj=Nj.now()+zj)}function rv(){Tj=0}function iv(){this._call=this._time=this._next=null}function av(e,t,n){var r=new iv;return r.restart(e,t,n),r}function ov(){nv(),++Ej;for(var e,t=Mj;t;)(e=Tj-t._time)>=0&&t._call.call(null,e),t=t._next;--Ej}function uv(){Tj=(Rj=Nj.now())+zj,Ej=Oj=0;try{ov()}finally{Ej=0,fv(),Tj=0}}function sv(){var e=Nj.now(),t=e-Rj;t>Cj&&(zj-=t,Rj=e)}function fv(){for(var e,t,n=Mj,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Mj=t);Sj=e,cv(r)}function cv(e){if(!Ej){Oj&&(Oj=clearTimeout(Oj));var t=e-Tj;t>24?(e<1/0&&(Oj=setTimeout(uv,e-Nj.now()-zj)),Aj&&(Aj=clearInterval(Aj))):(Aj||(Rj=Nj.now(),Aj=setInterval(sv,Cj)),Ej=1,Dj(uv))}}function lv(e,t,n){var r=new iv,i=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?nv():+n,r.restart(function a(o){o+=i,r.restart(a,i+=t,n),e(o)},t,n),r)}function dv(e){return e.x}function hv(e){return e.y}function pv(e){function t(){n(),h.call("tick",a),o<u&&(d.stop(),h.call("end",a))}function n(){var t,n,r=e.length;for(o+=(f-o)*s,l.each(function(e){e(o)}),t=0;t<r;++t)n=e[t],null==n.fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0)}function r(){for(var t,n=0,r=e.length;n<r;++n){if(t=e[n],t.index=n,isNaN(t.x)||isNaN(t.y)){var i=Pj*Math.sqrt(n),a=n*Lj;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function i(t){return t.initialize&&t.initialize(e),t}var a,o=1,u=.001,s=1-Math.pow(u,1/300),f=0,c=.6,l=Cf(),d=av(t),h=Jm("tick","end");return null==e&&(e=[]),r(),a={tick:n,restart:function(){return d.restart(t),a},stop:function(){return d.stop(),a},nodes:function(t){return arguments.length?(e=t,r(),l.each(i),a):e},alpha:function(e){return arguments.length?(o=+e,a):o},alphaMin:function(e){return arguments.length?(u=+e,a):u},alphaDecay:function(e){return arguments.length?(s=+e,a):+s},alphaTarget:function(e){return arguments.length?(f=+e,a):f},velocityDecay:function(e){return arguments.length?(c=1-e,a):1-c},force:function(e,t){return arguments.length>1?(null==t?l.remove(e):l.set(e,i(t)),a):l.get(e)},find:function(t,n,r){var i,a,o,u,s,f=0,c=e.length;for(null==r?r=1/0:r*=r,f=0;f<c;++f)u=e[f],i=t-u.x,a=n-u.y,o=i*i+a*a,o<r&&(s=u,r=o);return s},on:function(e,t){return arguments.length>1?(h.on(e,t),a):h.on(e)}}}function gv(){function e(e){var t,u=i.length,s=Um(i,dv,hv).visitAfter(n);for(o=e,t=0;t<u;++t)a=i[t],s.visit(r)}function t(){if(i){var e,t,n=i.length;for(u=new Array(n),e=0;e<n;++e)t=i[e],u[t.index]=+s(t,e,i)}}function n(e){var t,n,r,i,a,o=0,s=0;if(e.length){for(r=i=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else{t=e,t.x=t.data.x,t.y=t.data.y;do o+=u[t.data.index];while(t=t.next)}e.value=o}function r(e,t,n,r){if(!e.value)return!0;var i=e.x-a.x,s=e.y-a.y,d=r-t,h=i*i+s*s;if(d*d/l<h)return h<c&&(0===i&&(i=km(),h+=i*i),0===s&&(s=km(),h+=s*s),h<f&&(h=Math.sqrt(f*h)),a.vx+=i*e.value*o/h,a.vy+=s*e.value*o/h),!0;if(!(e.length||h>=c)){(e.data!==a||e.next)&&(0===i&&(i=km(),h+=i*i),0===s&&(s=km(),h+=s*s),h<f&&(h=Math.sqrt(f*h)));do e.data!==a&&(d=u[e.data.index]*o/h,a.vx+=i*d,a.vy+=s*d);while(e=e.next)}}var i,a,o,u,s=wm(-30),f=1,c=1/0,l=.81;return e.initialize=function(e){i=e,t()},e.strength=function(n){return arguments.length?(s="function"==typeof n?n:wm(+n),t(),e):s},e.distanceMin=function(t){return arguments.length?(f=t*t,e):Math.sqrt(f)},e.distanceMax=function(t){return arguments.length?(c=t*t,e):Math.sqrt(c)},e.theta=function(t){return arguments.length?(l=t*t,e):Math.sqrt(l)},e}function mv(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vx+=(a[n]-t.x)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=wm(.1);return"function"!=typeof e&&(e=wm(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:wm(+e),n(),t):o},t.x=function(r){return arguments.length?(e="function"==typeof r?r:wm(+r),n(),t):e},t}function vv(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vy+=(a[n]-t.y)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=wm(.1);return"function"!=typeof e&&(e=wm(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:wm(+e),n(),t):o},t.y=function(r){return arguments.length?(e="function"==typeof r?r:wm(+r),n(),t):e},t}function yv(e){Bn.call(this,null,e)}function bv(e,t){return function(){e.touch(t).run()}}function _v(e,t){var n=pv(e),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},xv(n,t,!0).on("end",function(){r=!0})}function xv(e,t,n,r){var i,a,o,u,s=O(t.forces);for(i=0,a=jj.length;i<a;++i)o=jj[i],o!==$j&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u=$j+i,o=n||t.modified($j,i)?kv(s[i]):r&&wv(s[i],r)?e.force(u):null,o&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force($j+i,null);return e.numForces=s.length,e}function wv(e,t){var n,r;for(n in e)if(A(r=e[n])&&t.modified(a(r)))return 1;return 0}function kv(e){var t,n;qj.hasOwnProperty(e.force)||o("Unrecognized force: "+e.force),t=qj[e.force]();for(n in e)A(t[n])&&Mv(t[n],e[n],e);return t}function Mv(e,t,n){e(A(t)?function(e){return t(e,n)}:t)}function Sv(e,t,n){var r={};return e.each(function(e){var i=e.data;n(i)&&(r[t(i)]=e)}),e.lookup=r,e}function Ev(e,t){return e.parent===t.parent?1:2}function Ov(e){return e.reduce(Av,0)/e.length}function Av(e,t){return e+t.x}function Cv(e){return 1+e.reduce(Rv,0)}function Rv(e,t){return Math.max(e,t.y)}function Tv(e){for(var t;t=e.children;)e=t[0];return e}function zv(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Nv(){function e(e){var a,o=0;e.eachAfter(function(e){var n=e.children;n?(e.x=Ov(n),e.y=Cv(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)});var u=Tv(e),s=zv(e),f=u.x-t(u,s)/2,c=s.x+t(s,u)/2;return e.eachAfter(i?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*r}:function(t){t.x=(t.x-f)/(c-f)*n,t.y=(1-(e.y?t.y/e.y:1))*r})}var t=Ev,n=1,r=1,i=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(i=!1,n=+t[0],r=+t[1],e):i?null:[n,r]},e.nodeSize=function(t){return arguments.length?(i=!0,n=+t[0],r=+t[1],e):i?[n,r]:null},e}function Dv(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Pv(){return this.eachAfter(Dv)}function Lv(e){var t,n,r,i,a=this,o=[a];do for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);while(o.length);return this}function qv(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this}function $v(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this}function jv(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;
t.value=n})}function Fv(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Iv(e){for(var t=this,n=Uv(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Uv(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Bv(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Wv(){var e=[];return this.each(function(t){e.push(t)}),e}function Gv(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Yv(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function Hv(e,t){var n,r,i,a,o,u=new Qv(e),s=+e.value&&(u.value=e.value),f=[u];for(null==t&&(t=Xv);n=f.pop();)if(s&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)f.push(r=n.children[a]=new Qv(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(Jv)}function Vv(){return Hv(this).eachBefore(Zv)}function Xv(e){return e.children}function Zv(e){e.data=e.data.data}function Jv(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Qv(e){this.data=e,this.depth=this.height=0,this.parent=null}function Kv(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}function ey(e){for(var t,n,r=0,i=(e=Kv(Wj.call(e))).length,a=[];r<i;)t=e[r],n&&ry(n,t)?++r:(n=ay(a=ty(a,t)),r=0);return n}function ty(e,t){var n,r;if(iy(t,e))return[t];for(n=0;n<e.length;++n)if(ny(t,e[n])&&iy(uy(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ny(uy(e[n],e[r]),t)&&ny(uy(e[n],t),e[r])&&ny(uy(e[r],t),e[n])&&iy(sy(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ny(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function ry(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function iy(e,t){for(var n=0;n<t.length;++n)if(!ry(e,t[n]))return!1;return!0}function ay(e){switch(e.length){case 1:return oy(e[0]);case 2:return uy(e[0],e[1]);case 3:return sy(e[0],e[1],e[2])}}function oy(e){return{x:e.x,y:e.y,r:e.r}}function uy(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,u=t.r,s=a-n,f=o-r,c=u-i,l=Math.sqrt(s*s+f*f);return{x:(n+a+s/l*c)/2,y:(r+o+f/l*c)/2,r:(l+i+u)/2}}function sy(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,u=t.y,s=t.r,f=n.x,c=n.y,l=n.r,d=r-o,h=r-f,p=i-u,g=i-c,m=s-a,v=l-a,y=r*r+i*i-a*a,b=y-o*o-u*u+s*s,_=y-f*f-c*c+l*l,x=h*p-d*g,w=(p*_-g*b)/(2*x)-r,k=(g*m-p*v)/x,M=(h*b-d*_)/(2*x)-i,S=(d*v-h*m)/x,E=k*k+S*S-1,O=2*(a+w*k+M*S),A=w*w+M*M-a*a,C=-(E?(O+Math.sqrt(O*O-4*E*A))/(2*E):A/O);return{x:r+w+k*C,y:i+M+S*C,r:C}}function fy(e,t,n){var r,i,a,o,u=e.x-t.x,s=e.y-t.y,f=u*u+s*s;f?(i=t.r+n.r,i*=i,o=e.r+n.r,o*=o,i>o?(r=(f+o-i)/(2*f),a=Math.sqrt(Math.max(0,o/f-r*r)),n.x=e.x-r*u-a*s,n.y=e.y-r*s+a*u):(r=(f+i-o)/(2*f),a=Math.sqrt(Math.max(0,i/f-r*r)),n.x=t.x+r*u-a*s,n.y=t.y+r*s+a*u)):(n.x=t.x+n.r,n.y=t.y)}function cy(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ly(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function dy(e){this._=e,this.next=null,this.previous=null}function hy(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,u,s,f,c,l;if(t=e[0],t.x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;fy(n,t,r=e[2]),t=new dy(t),n=new dy(n),r=new dy(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(u=3;u<i;++u){fy(t._,n._,r=e[u]),r=new dy(r),s=n.next,f=t.previous,c=n._.r,l=t._.r;do if(c<=l){if(cy(s._,r._)){n=s,t.next=n,n.previous=t,--u;continue e}c+=s._.r,s=s.next}else{if(cy(f._,r._)){t=f,t.next=n,n.previous=t,--u;continue e}l+=f._.r,f=f.previous}while(s!==f.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=ly(t);(r=r.next)!==n;)(o=ly(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=ey(t),u=0;u<i;++u)t=e[u],t.x-=r.x,t.y-=r.y;return r.r}function py(e){return null==e?null:gy(e)}function gy(e){if("function"!=typeof e)throw new Error;return e}function my(){return 0}function vy(e){return function(){return e}}function yy(e){return Math.sqrt(e.value)}function by(){function e(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(_y(t)).eachAfter(xy(i,.5)).eachBefore(wy(1)):e.eachBefore(_y(yy)).eachAfter(xy(my,1)).eachAfter(xy(i,e.r/Math.min(n,r))).eachBefore(wy(Math.min(n,r)/(2*e.r))),e}var t=null,n=1,r=1,i=my;return e.radius=function(n){return arguments.length?(t=py(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i="function"==typeof t?t:vy(+t),e):i},e}function _y(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function xy(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,u=e(n)*t||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=hy(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function wy(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function ky(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function My(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(r-t)/e.value;++u<s;)a=o[u],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*f}function Sy(){function e(e){var o=e.height+1;return e.x0=e.y0=i,e.x1=n,e.y1=r/o,e.eachBefore(t(r,o)),a&&e.eachBefore(ky),e}function t(e,t){return function(n){n.children&&My(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var r=n.x0,a=n.y0,o=n.x1-i,u=n.y1-i;o<r&&(r=o=(r+o)/2),u<a&&(a=u=(a+u)/2),n.x0=r,n.y0=a,n.x1=o,n.y1=u}}var n=1,r=1,i=0,a=!1;return e.round=function(t){return arguments.length?(a=!!t,e):a},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i=+t,e):i},e}function Ey(e){return e.id}function Oy(e){return e.parentId}function Ay(){function e(e){var r,i,a,o,u,s,f,c=e.length,l=new Array(c),d={};for(i=0;i<c;++i)r=e[i],u=l[i]=new Qv(r),null!=(s=t(r,i,e))&&(s+="")&&(f=Gj+(u.id=s),d[f]=f in d?Hj:u);for(i=0;i<c;++i)if(u=l[i],s=n(e[i],i,e),null!=s&&(s+="")){if(o=d[Gj+s],!o)throw new Error("missing: "+s);if(o===Hj)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=Yj,a.eachBefore(function(e){e.depth=e.parent.depth+1,--c}).eachBefore(Jv),a.parent=null,c>0)throw new Error("cycle");return a}var t=Ey,n=Oy;return e.id=function(n){return arguments.length?(t=gy(n),e):t},e.parentId=function(t){return arguments.length?(n=gy(t),e):n},e}function Cy(e,t){return e.parent===t.parent?1:2}function Ry(e){var t=e.children;return t?t[0]:e.t}function Ty(e){var t=e.children;return t?t[t.length-1]:e.t}function zy(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ny(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Dy(e,t,n){return e.a.parent===t.parent?e.a:n}function Py(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Ly(e){for(var t,n,r,i,a,o=new Py(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(n=t.children[i]=new Py(r[i],i)),n.parent=t;return(o.parent=new Py(null,0)).children=[o],o}function qy(){function e(e){var r=Ly(e);if(r.eachAfter(t),r.parent.m=-r.z,r.eachBefore(n),s)e.eachBefore(i);else{var f=e,c=e,l=e;e.eachBefore(function(e){e.x<f.x&&(f=e),e.x>c.x&&(c=e),e.depth>l.depth&&(l=e)});var d=f===c?1:a(f,c)/2,h=d-f.x,p=o/(c.x+d+h),g=u/(l.depth||1);e.eachBefore(function(e){e.x=(e.x+h)*p,e.y=e.depth*g})}return e}function t(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t){Ny(e);var o=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+a(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+a(e._,i._));e.parent.A=r(e,i,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,n){if(t){for(var r,i=e,o=e,u=t,s=i.parent.children[0],f=i.m,c=o.m,l=u.m,d=s.m;u=Ty(u),i=Ry(i),u&&i;)s=Ry(s),o=Ty(o),o.a=e,r=u.z+l-i.z-f+a(u._,i._),r>0&&(zy(Dy(u,e,n),e,r),f+=r,c+=r),l+=u.m,f+=i.m,d+=s.m,c+=o.m;u&&!Ty(o)&&(o.t=u,o.m+=l-c),i&&!Ry(s)&&(s.t=i,s.m+=f-d,n=e)}return n}function i(e){e.x*=o,e.y=e.depth*u}var a=Cy,o=1,u=1,s=null;return e.separation=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(s=!1,o=+t[0],u=+t[1],e):s?null:[o,u]},e.nodeSize=function(t){return arguments.length?(s=!0,o=+t[0],u=+t[1],e):s?[o,u]:null},e}function $y(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(i-n)/e.value;++u<s;)a=o[u],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*f}function jy(e,t,n,r,i,a){for(var o,u,s,f,c,l,d,h,p,g,m,v=[],y=t.children,b=0,_=0,x=y.length,w=t.value;b<x;){s=i-n,f=a-r;do c=y[_++].value;while(!c&&_<x);for(l=d=c,g=Math.max(f/s,s/f)/(w*e),m=c*c*g,p=Math.max(d/m,m/l);_<x;++_){if(c+=u=y[_].value,u<l&&(l=u),u>d&&(d=u),m=c*c*g,h=Math.max(d/m,m/l),h>p){c-=u;break}p=h}v.push(o={value:c,dice:s<f,children:y.slice(b,_)}),o.dice?My(o,n,r,i,w?r+=f*c/w:a):$y(o,n,r,w?n+=s*c/w:i,a),w-=c,b=_}return v}function Fy(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=a,e.eachBefore(t),o=[0],r&&e.eachBefore(ky),e}function t(e){var t=o[e.depth],r=e.x0+t,i=e.y0+t,a=e.x1-t,d=e.y1-t;a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),e.x0=r,e.y0=i,e.x1=a,e.y1=d,e.children&&(t=o[e.depth+1]=u(e)/2,r+=l(e)-t,i+=s(e)-t,a-=f(e)-t,d-=c(e)-t,a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),n(e,r,i,a,d))}var n=Xj,r=!1,i=1,a=1,o=[0],u=my,s=my,f=my,c=my,l=my;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(i=+t[0],a=+t[1],e):[i,a]},e.tile=function(t){return arguments.length?(n=gy(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(u="function"==typeof t?t:vy(+t),e):u},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:vy(+t),e):s},e.paddingRight=function(t){return arguments.length?(f="function"==typeof t?t:vy(+t),e):f},e.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:vy(+t),e):c},e.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:vy(+t),e):l},e}function Iy(e,t,n,r,i){function a(e,t,n,r,i,o,u){if(e>=t-1){var f=s[e];return f.x0=r,f.y0=i,f.x1=o,f.y1=u,void 0}for(var l=c[e],d=n/2+l,h=e+1,p=t-1;h<p;){var g=h+p>>>1;c[g]<d?h=g+1:p=g}d-c[h-1]<c[h]-d&&e+1<h&&--h;var m=c[h]-l,v=n-m;if(o-r>u-i){var y=(r*v+o*m)/n;a(e,h,m,r,i,y,u),a(h,t,v,y,i,o,u)}else{var b=(i*v+u*m)/n;a(e,h,m,r,i,o,b),a(h,t,v,r,b,o,u)}}var o,u,s=e.children,f=s.length,c=new Array(f+1);for(c[0]=u=o=0;o<f;++o)c[o+1]=u+=s[o].value;a(0,f,e.value,t,n,r,i)}function Uy(e,t,n,r,i){(1&e.depth?$y:My)(e,t,n,r,i)}function By(e){Bn.call(this,null,e)}function Wy(e){return e.values}function Gy(e){Bn.call(this,null,e)}function Yy(e,t,n){for(var r,i=0,a=t.length;i<a;++i)r=t[i],r in n&&e[r](n[r])}function Hy(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}function Vy(e){Gy.call(this,e)}function Xy(e){Gy.call(this,e)}function Zy(e){Bn.call(this,null,e)}function Jy(e){Gy.call(this,e)}function Qy(e){Bn.call(this,[],e)}function Ky(e){Gy.call(this,e)}function eb(e){return function(){return e}}function tb(e){return e[0]}function nb(e){return e[1]}function rb(){this._=null}function ib(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ab(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ob(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ub(e){for(;e.L;)e=e.L;return e}function sb(e,t,n,r){var i=[null,null],a=mF.push(i)-1;return i.left=e,i.right=t,n&&cb(i,e,t,n),r&&cb(i,t,e,r),pF[e.index].halfedges.push(a),pF[t.index].halfedges.push(a),i}function fb(e,t,n){var r=[t,n];return r.left=e,r}function cb(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function lb(e,t,n,r,i){var a,o=e[0],u=e[1],s=o[0],f=o[1],c=u[0],l=u[1],d=0,h=1,p=c-s,g=l-f;if(a=t-s,p||!(a>0)){if(a/=p,p<0){if(a<d)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=r-s,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<h&&(h=a)}if(a=n-f,g||!(a>0)){if(a/=g,g<0){if(a<d)return;a<h&&(h=a)}else if(g>0){if(a>h)return;a>d&&(d=a)}if(a=i-f,g||!(a<0)){if(a/=g,g<0){if(a>h)return;a>d&&(d=a)}else if(g>0){if(a<d)return;a<h&&(h=a)}return!(d>0||h<1)||(d>0&&(e[0]=[s+d*p,f+d*g]),h<1&&(e[1]=[s+h*p,f+h*g]),!0)}}}}}function db(e,t,n,r,i){var a=e[1];if(a)return!0;var o,u,s=e[0],f=e.left,c=e.right,l=f[0],d=f[1],h=c[0],p=c[1],g=(l+h)/2,m=(d+p)/2;if(p===d){if(g<t||g>=r)return;if(l>h){if(s){if(s[1]>=i)return}else s=[g,n];a=[g,i]}else{if(s){if(s[1]<n)return}else s=[g,i];a=[g,n]}}else if(o=(l-h)/(p-d),u=m-o*g,o<-1||o>1)if(l>h){if(s){if(s[1]>=i)return}else s=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/o,i];a=[(n-u)/o,n]}else if(d<p){if(s){if(s[0]>=r)return}else s=[t,o*t+u];a=[r,o*r+u]}else{if(s){if(s[0]<t)return}else s=[r,o*r+u];a=[t,o*t+u]}return e[0]=s,e[1]=a,!0}function hb(e,t,n,r){for(var i,a=mF.length;a--;)db(i=mF[a],e,t,n,r)&&lb(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>bF||Math.abs(i[0][1]-i[1][1])>bF)||delete mF[a]}function pb(e){return pF[e.index]={site:e,halfedges:[]}}function gb(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function mb(e,t){return t[+(t.left!==e.site)]}function vb(e,t){return t[+(t.left===e.site)]}function yb(){for(var e,t,n,r,i=0,a=pF.length;i<a;++i)if((e=pF[i])&&(r=(t=e.halfedges).length)){var o=new Array(r),u=new Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=gb(e,mF[t[n]]);for(o.sort(function(e,t){return u[t]-u[e]}),n=0;n<r;++n)u[n]=t[o[n]];for(n=0;n<r;++n)t[n]=u[n]}}function bb(e,t,n,r){var i,a,o,u,s,f,c,l,d,h,p,g,m=pF.length,v=!0;for(i=0;i<m;++i)if(a=pF[i]){for(o=a.site,s=a.halfedges,u=s.length;u--;)mF[s[u]]||s.splice(u,1);for(u=0,f=s.length;u<f;)h=vb(a,mF[s[u]]),p=h[0],g=h[1],c=mb(a,mF[s[++u%f]]),l=c[0],d=c[1],(Math.abs(p-l)>bF||Math.abs(g-d)>bF)&&(s.splice(u,0,mF.push(fb(o,h,Math.abs(p-e)<bF&&r-g>bF?[e,Math.abs(l-e)<bF?d:r]:Math.abs(g-r)<bF&&n-p>bF?[Math.abs(d-r)<bF?l:n,r]:Math.abs(p-n)<bF&&g-t>bF?[n,Math.abs(l-n)<bF?d:t]:Math.abs(g-t)<bF&&p-e>bF?[Math.abs(d-t)<bF?l:e,t]:null))-1),++f);f&&(v=!1)}if(v){var y,b,_,x=1/0;for(i=0,v=null;i<m;++i)(a=pF[i])&&(o=a.site,y=o[0]-e,b=o[1]-t,_=y*y+b*b,_<x&&(x=_,v=a));if(v){var w=[e,t],k=[e,r],M=[n,r],S=[n,t];v.halfedges.push(mF.push(fb(o=v.site,w,k))-1,mF.push(fb(o,k,M))-1,mF.push(fb(o,M,S))-1,mF.push(fb(o,S,w))-1)}}for(i=0;i<m;++i)(a=pF[i])&&(a.halfedges.length||delete pF[i])}function _b(){ib(this),this.x=this.y=this.arc=this.site=this.cy=null}function xb(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],u=i[1],s=r[0]-o,f=r[1]-u,c=a[0]-o,l=a[1]-u,d=2*(s*l-f*c);if(!(d>=-_F)){var h=s*s+f*f,p=c*c+l*l,g=(l*h-f*p)/d,m=(s*p-c*h)/d,v=vF.pop()||new _b;v.arc=e,v.site=i,v.x=g+o,v.y=(v.cy=m+u)+Math.sqrt(g*g+m*m),e.circle=v;for(var y=null,b=gF._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}gF.insert(y,v),y||(dF=v)}}}}function wb(e){var t=e.circle;t&&(t.P||(dF=t.N),gF.remove(t),vF.push(t),ib(t),e.circle=null)}function kb(){ib(this),this.edge=this.site=this.circle=null}function Mb(e){var t=yF.pop()||new kb;return t.site=e,t}function Sb(e){wb(e),hF.remove(e),yF.push(e),ib(e)}function Eb(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,u=[e];Sb(e);for(var s=a;s.circle&&Math.abs(n-s.circle.x)<bF&&Math.abs(r-s.circle.cy)<bF;)a=s.P,u.unshift(s),Sb(s),s=a;u.unshift(s),wb(s);for(var f=o;f.circle&&Math.abs(n-f.circle.x)<bF&&Math.abs(r-f.circle.cy)<bF;)o=f.N,u.push(f),Sb(f),f=o;u.push(f),wb(f);var c,l=u.length;for(c=1;c<l;++c)f=u[c],s=u[c-1],cb(f.edge,s.site,f.site,i);s=u[0],f=u[l-1],f.edge=sb(s.site,f.site,null,i),xb(s),xb(f)}function Ob(e){for(var t,n,r,i,a=e[0],o=e[1],u=hF._;u;)if(r=Ab(u,o)-a,r>bF)u=u.L;else{if(i=a-Cb(u,o),!(i>bF)){r>-bF?(t=u.P,n=u):i>-bF?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}pb(e);var s=Mb(e);if(hF.insert(t,s),t||n){if(t===n)return wb(t),n=Mb(t.site),hF.insert(s,n),s.edge=n.edge=sb(t.site,s.site),xb(t),void xb(n);if(!n)return void(s.edge=sb(t.site,s.site));wb(t),wb(n);var f=t.site,c=f[0],l=f[1],d=e[0]-c,h=e[1]-l,p=n.site,g=p[0]-c,m=p[1]-l,v=2*(d*m-h*g),y=d*d+h*h,b=g*g+m*m,_=[(m*y-h*b)/v+c,(d*b-g*y)/v+l];cb(n.edge,f,p,_),s.edge=sb(f,e,null,_),n.edge=sb(e,p,null,_),xb(t),xb(n)}}function Ab(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-(1/0);n=o.site;var u=n[0],s=n[1],f=s-t;if(!f)return u;var c=u-r,l=1/a-1/f,d=c/f;return l?(-d+Math.sqrt(d*d-2*l*(c*c/(-2*f)-s+f/2+i-a/2)))/l+r:(r+u)/2}function Cb(e,t){var n=e.N;if(n)return Ab(n,t);var r=e.site;return r[1]===t?r[0]:1/0}function Rb(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function Tb(e,t){return t[1]-e[1]||t[0]-e[0]}function zb(e,t){var n,r,i,a=e.sort(Tb).pop();for(mF=[],pF=new Array(e.length),hF=new rb,gF=new rb;;)if(i=dF,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(Ob(a),n=a[0],r=a[1]),a=e.pop();else{if(!i)break;Eb(i.arc)}if(yb(),t){var o=+t[0][0],u=+t[0][1],s=+t[1][0],f=+t[1][1];hb(o,u,s,f),bb(o,u,s,f)}this.edges=mF,this.cells=pF,hF=gF=mF=pF=null}function Nb(){function e(e){return new zb(e.map(function(r,i){var a=[Math.round(t(r,i,e)/bF)*bF,Math.round(n(r,i,e)/bF)*bF];return a.index=i,a.data=r,a}),r)}var t=tb,n=nb,r=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:eb(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:eb(+t),e):n},e.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},e.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],e):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},e}function Db(e){Bn.call(this,null,e)}function Pb(){function e(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(SF<<5)/t,e.height=EF/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function t(e,t,n){for(var r,i,a,o=t.x,u=t.y,s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),l=c(f),h=d()<.5?1:-1,p=-h;(r=l(p+=h))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=s));)if(t.x=o+i,t.y=u+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>f[0]||t.y+t.y1>f[1])&&(!n||!qb(t,e,f[0]))&&(!n||jb(t,n))){for(var g,m=t.sprite,v=t.width>>5,y=f[0]>>5,b=t.x-(v<<4),_=127&b,x=32-_,w=t.y1-t.y0,k=(t.y+t.y0)*y+(b>>5),M=0;M<w;M++){g=0;for(var S=0;S<=v;S++)e[k+S]|=g<<x|(S<v?(g=m[M*v+S])>>>_:0);k+=y}return t.sprite=null,!0}return!1}var n,r,i,a,o,u,s,f=[256,256],c=Fb,l=[],d=Math.random,h={};return h.layout=function(){for(var c=e(Wi()),h=Ub((f[0]>>5)*f[1]),p=null,g=l.length,m=-1,v=[],y=l.map(function(e){return{text:n(e),font:r(e),style:a(e),weight:o(e),rotate:u(e),size:~~i(e),padding:s(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size});++m<g;){var b=y[m];b.x=f[0]*(d()+.5)>>1,b.y=f[1]*(d()+.5)>>1,Lb(c,b,y,m),b.hasText&&t(h,b,p)&&(v.push(b),p?$b(p,b):p=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=f[0]>>1,b.y-=f[1]>>1)}return v},h.words=function(e){return arguments.length?(l=e,h):l},h.size=function(e){return arguments.length?(f=[+e[0],+e[1]],h):f},h.font=function(e){return arguments.length?(r=Bb(e),h):r},h.fontStyle=function(e){return arguments.length?(a=Bb(e),h):a},h.fontWeight=function(e){return arguments.length?(o=Bb(e),h):o},h.rotate=function(e){return arguments.length?(u=Bb(e),h):u},h.text=function(e){return arguments.length?(n=Bb(e),h):n},h.spiral=function(e){return arguments.length?(c=OF[e]||e,h):c},h.fontSize=function(e){return arguments.length?(i=Bb(e),h):i},h.padding=function(e){return arguments.length?(s=Bb(e),h):s},h.random=function(e){return arguments.length?(d=e,h):d},h}function Lb(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(SF<<5)/a,EF/a);var o,u,s,f,c,l=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,s=t.size<<1,t.rotate){var g=Math.sin(t.rotate*MF),m=Math.cos(t.rotate*MF),v=o*m,y=o*g,b=s*m,_=s*g;o=Math.max(Math.abs(v+_),Math.abs(v-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(s>h&&(h=s),l+o>=SF<<5&&(l=0,d+=h,h=0),d+s>=EF)break;i.translate((l+(o>>1))/a,(d+(s>>1))/a),t.rotate&&i.rotate(t.rotate*MF),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=s,t.xoff=l,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=o}for(var x=i.getImageData(0,0,(SF<<5)/a,EF/a).data,w=[];--r>=0;)if(t=n[r],t.hasText){for(o=t.width,u=o>>5,s=t.y1-t.y0,f=0;f<s*u;f++)w[f]=0;if(l=t.xoff,null==l)return;d=t.yoff;var k=0,M=-1;for(c=0;c<s;c++){for(f=0;f<o;f++){var S=u*c+(f>>5),E=x[(d+c)*(SF<<5)+(l+f)<<2]?1<<31-f%32:0;w[S]|=E,k|=E}k?M=c:(t.y0++,s--,c--,d++)}t.y1=t.y0+M,t.sprite=w.slice(0,(t.y1-t.y0)*u)}}}function qb(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=32-u,f=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),l=0;l<f;l++){r=0;for(var d=0;d<=a;d++)if((r<<s|(d<a?(r=i[l*a+d])>>>u:0))&t[c+d])return!0;c+=n}return!1}function $b(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function jb(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Fb(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Ib(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t}return[r,i]}}function Ub(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Bb(e){return"function"==typeof e?e:function(){return e}}function Wb(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function Gb(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function Yb(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function Hb(){function e(){var e=i().length,r=o[1]<o[0],l=o[r-0],d=o[1-r],h=Yb(e,s,f);t=(d-l)/(h||1),u&&(t=Math.floor(t)),l+=(d-l-t*(e-s))*c,n=t*(1-s),u&&(l=Math.round(l),n=Math.round(n));var p=cr(e).map(function(e){return l+t*e});return a(r?p.reverse():p)}var t,n,r=qf().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,c=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],c=o[1]<o[0],l=c?a().reverse():a(),d=l.length-1;if(s===s&&f===f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return t=Math.max(0,FC(l,s)-1),r=s===f?t:FC(l,f)-1,s-l[t]>n+1e-10&&++t,c&&(u=t,t=d-r,r=d-u),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return Hb().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(c)},e()}function Vb(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Vb(t())},e}function Xb(){return Vb(Hb().paddingInner(1))}function Zb(e){return AF.call(e,function(e){return+e})}function Jb(){function e(e){return n(e)}function t(e){r=Zb(e),n.domain([r[0],p(r)])}var n=vl(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return Jb().domain(e.domain()).range(e.range())},e}function Qb(){function e(e){return null==e||e!==e?void 0:n[(FC(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=Zb(n),e):t.slice()},e.range=function(t){return arguments.length?(n=CF.call(t),e):n.slice()},e.copy=function(){return Qb().domain(e.domain()).range(e.range())},e}function Kb(e){function t(){var e=r.domain();i=e[0],a=p(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=vl(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Kb().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function e_(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?Wb(n):n.invertExtent?Gb(n):void 0),n.type=e,n}}function t_(e,t){return arguments.length>1?(RF[e]=e_(e,t),this):RF.hasOwnProperty(e)?RF[e]:void 0}function n_(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function r_(e,t){jF[e]=qL["interpolate"+t],$F[e]=qL["scheme"+t]}function i_(e){Bn.call(this,Pb(),e)}function a_(e,t){for(var n,r=+(1/0),i=-(1/0),a=0,o=t.length;a<o;++a)n=e(t[a]),n<r&&(r=n),n>i&&(i=n);return[r,i]}function o_(e){return new Uint8Array(e)}function u_(e){return new Uint16Array(e)}function s_(e){return new Uint32Array(e)}function f_(){var e=8,t=[],n=s_(0),r=l_(0,e),i=l_(0,e);return{data:function(){return t},seen:function(){return n=c_(n,t.length)},add:function(e){for(var n,r=0,i=t.length,a=e.length;r<a;++r)n=e[r],n._index=i++,t.push(n)},remove:function(e,n){var a,o,u,s=t.length,f=Array(s-e),c=t;for(o=0;!n[o]&&o<s;++o)f[o]=t[o],c[o]=o;for(u=o;o<s;++o)a=t[o],n[o]?c[o]=-1:(c[o]=u,r[u]=r[o],i[u]=i[o],f[u]=a,a._index=u++),r[o]=0;return t=f,c},size:function(){return t.length},curr:function(){return r},prev:function(){return i},reset:function(e){i[e]=r[e]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){var a=r.length;(t>a||n>e)&&(e=Math.max(n,e),r=l_(t,e,r),i=l_(t,e))}}}function c_(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function l_(e,t,n){var r=(t<257?o_:t<65537?u_:s_)(e);return n&&r.set(n),r}function d_(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this,a=i.bisect(i.range,e.value),o=e.index,u=a[0],s=a[1],f=o.length;for(n=0;n<u;++n)t[o[n]]|=r;for(n=s;n<f;++n)t[o[n]]|=r;return i}}}function h_(){function e(e,t,n){if(!t.length)return[];var r,u,s,f=o,c=t.length,l=Array(c),d=s_(c);for(s=0;s<c;++s)l[s]=e(t[s]),d[s]=s;if(l=p_(l,d),f)r=a,u=i,a=Array(f+c),i=s_(f+c),g_(n,r,u,f,l,d,c,a,i);else{if(n>0)for(s=0;s<c;++s)d[s]+=n;a=l,i=d}return o=f+c,{index:d,value:l}}function t(e,t){var n,r,u,s=o;for(r=0;!t[i[r]]&&r<s;++r);for(u=r;r<s;++r)t[n=i[r]]||(i[u]=n,a[u]=a[r],++u);o=s-e}function n(e){for(var t=0,n=o;t<n;++t)i[t]=e[i[t]]}function r(e,t){var n;return t?n=t.length:(t=a,n=o),[IC(t,e[0],0,n),FC(t,e[1],0,n)]}var i=s_(0),a=[],o=0;return{insert:e,remove:t,bisect:r,reindex:n,index:function(){return i},size:function(){return o}}}function p_(e,t){return e.sort.call(t,function(t,n){var r=e[t],i=e[n];return r<i?-1:r>i?1:0}),xr(e,t)}function g_(e,t,n,r,i,a,o,u,s){var f,c=0,l=0;for(f=0;c<r&&l<o;++f)t[c]<i[l]?(u[f]=t[c],s[f]=n[c++]):(u[f]=i[l],s[f]=a[l++]+e);for(;c<r;++c,++f)u[f]=t[c],s[f]=n[c];for(;l<o;++l,++f)u[f]=i[l],s[f]=a[l]+e}function m_(e){Bn.call(this,f_(),e),this._indices=null,this._dims=null}function v_(e){Bn.call(this,null,e)}function y_(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function b_(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function __(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function x_(){function e(){var e=i().length,r=o[1]<o[0],l=o[r-0],d=o[1-r],h=__(e,s,f);t=(d-l)/(h||1),u&&(t=Math.floor(t)),l+=(d-l-t*(e-s))*c,n=t*(1-s),u&&(l=Math.round(l),n=Math.round(n));var p=cr(e).map(function(e){return l+t*e});return a(r?p.reverse():p)}var t,n,r=qf().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,c=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],c=o[1]<o[0],l=c?a().reverse():a(),d=l.length-1;if(s===s&&f===f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return t=Math.max(0,FC(l,s)-1),r=s===f?t:FC(l,f)-1,s-l[t]>n+1e-10&&++t,c&&(u=t,t=d-r,r=d-u),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return x_().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(c)},e()}function w_(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return w_(t())},e}function k_(){return w_(x_().paddingInner(1))}function M_(e){return VF.call(e,function(e){return+e})}function S_(){function e(e){return n(e)}function t(e){r=M_(e),n.domain([r[0],p(r)])}var n=vl(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return S_().domain(e.domain()).range(e.range())},e}function E_(){function e(e){return null==e||e!==e?void 0:n[(FC(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=M_(n),e):t.slice()},e.range=function(t){return arguments.length?(n=XF.call(t),e):n.slice()},e.copy=function(){
return E_().domain(e.domain()).range(e.range())},e}function O_(e){function t(){var e=r.domain();i=e[0],a=p(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=vl(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return O_().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function A_(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?y_(n):n.invertExtent?b_(n):void 0),n.type=e,n}}function C_(e,t){return arguments.length>1?(ZF[e]=A_(e,t),this):ZF.hasOwnProperty(e)?ZF[e]:void 0}function R_(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function T_(e,t){aI[e]=qL["interpolate"+t],iI[e]=qL["scheme"+t]}function z_(e,t){if(arguments.length>1)return aI[e]=t,this;var n=e.split("-");return e=n[0],n=+n[1]+1,n&&iI.hasOwnProperty(e)?iI[e][n-1]:!n&&aI.hasOwnProperty(e)?aI[e]:void 0}function N_(e,t){var n=t[0],r=p(t)-n;return function(t){return e(n+t*r)}}function D_(e,t){var n=GD[P_(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function P_(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function L_(e){return oI.hasOwnProperty(e)&&oI[e]}function q_(e){return uI.hasOwnProperty(e)&&uI[e]}function $_(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:sI,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var r=t.value,i=r?f(r)?r:r.user:sI,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),e.add(null,function(e){var t=e.cursor,n=this.value;return f(t)||(n=t.item,t=t.user),j_(t&&t!==sI?t:n||t),n},{cursor:t})}function j_(e){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e)}function F_(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||o("Unrecognized data set: "+t),n[t]}function I_(e){return F_(this,e).values.value}function U_(e,t){ae(t)||o("Second argument to changes must be a changeset.");var n=F_(this,e);return n.modified=!0,this.pulse(n.input,t)}function B_(e,t){return U_.call(this,e,oe().insert(t))}function W_(e,t){return U_.call(this,e,oe().remove(t))}function G_(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Y_(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function H_(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function V_(e){var t=H_(e),n=G_(e),r=Y_(e);e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(function(t){try{t(n,r)}catch(t){e.error(t)}})}function X_(e,t,n){var r,i,a,o=e._renderer.canvas();return o&&(a=H_(e),i=t.changedTouches?t.changedTouches[0]:t,r=os(i,o),r[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.vega=Z_(e,n,r),t.item=n,t}function Z_(e,t,n){function r(e){var n,r=a;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(e){if(!e)return n;f(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var a=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:R(e),item:R(t||{}),group:r,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}function J_(e){e=z({},e);var t=e.defaults;return t&&(eA(t.prevent)&&(t.prevent=V(t.prevent)),eA(t.allow)&&(t.allow=V(t.allow))),e}function Q_(e,t){var n=e._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return r!==!1&&i!==!0&&(r===!0||i===!1||(r?r[t]:i?!i[t]:e.preventDefault()))}function K_(e,t,n){var r,i=this,a=new de(n),o=function(n,r){e===fI&&Q_(i,t)&&n.preventDefault();try{a.receive(X_(i,n,r))}catch(e){i.error(e)}finally{i.run()}};if(e===cI)i.timer(o,t);else if(e===fI)i.addEventListener(t,o,dI);else if(e===lI?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a}function ex(e){return e.item}function tx(e){var t=e.item.mark.source;return t.source||t}function nx(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function rx(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",ex),tx,nx(e)),this.on(this.events("view","mouseout",ex),tx,nx(t)),this}function ix(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=a.length;--e>=0;)for(n=a[e],t=n.sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this}function ax(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function ox(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&(i.source=!0,e.signal(r.signal,t).run())}},r.debounce&&(i.update=T(r.debounce,i.update))),ux(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,function(){i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}}function ux(e,t,n,r){var i=ax("div",{class:hI});i.appendChild(ax("span",{class:pI},n.name||n.signal)),t.appendChild(i);var a=sx;switch(n.input){case"checkbox":a=fx;break;case"select":a=cx;break;case"radio":a=lx;break;case"range":a=dx}a(e,i,n,r)}function sx(e,t,n,r){var i=ax("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function fx(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=ax("input",i);t.appendChild(a),a.addEventListener("change",function(){e.update(a.checked)}),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function cx(e,t,n,r){var i=ax("select",{name:n.signal});n.options.forEach(function(e){var t={value:e};hx(e,r)&&(t.selected=!0),i.appendChild(ax("option",t,e+""))}),t.appendChild(i),i.addEventListener("change",function(){e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(hx(n.options[t],e))return void(i.selectedIndex=t)}}function lx(e,t,n,r){var i=ax("span",{class:gI});t.appendChild(i),e.elements=n.options.map(function(t){var a=mI+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};hx(t,r)&&(o.checked=!0);var u=ax("input",o);return u.addEventListener("change",function(){e.update(t)}),i.appendChild(u),i.appendChild(ax("label",{for:a},t+"")),u}),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)hx(n[r].value,t)&&(n[r].checked=!0)}}function dx(e,t,n,r){function i(){f.textContent=s.value,e.update(+s.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var a=n.min||Math.min(0,+r)||0,o=n.max||Math.max(100,+r)||100,u=n.step||hr(a,o,100),s=ax("input",{type:"range",name:n.signal,min:a,max:o,step:u});s.value=r;var f=ax("label",{},+r);t.appendChild(s),t.appendChild(f),s.addEventListener("input",i),s.addEventListener("change",i),e.elements=[s],e.set=function(e){s.value=e,f.textContent=e}}function hx(e,t){return e===t||e+""==t+""}function px(e,t,n,r,i){return t=t||new r(e.loader()),t.initialize(n,G_(e),Y_(e),H_(e),i).background(e._background)}function gx(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function mx(e,t,n,r){var i=new r(e.loader(),gx(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,H_(e),e);return t&&t.handlers().forEach(function(e){i.on(e.type,e.handler)}),i}function vx(e,t){var n,r,i=this,a=i._renderType,o=qs(a);return e=i._el=e?yx(i,e):null,o||i.error("Unrecognized renderer type: "+a),n=o.handler||ls,r=e?o.renderer:o.headless,i._renderer=r?px(i,i._renderer,e,r):null,i._handler=mx(i,i._handler,e,n),i._redraw=!0,e&&(t=t?yx(i,t):e.appendChild(ax("div",{class:"vega-bindings"})),i._bind.forEach(function(e){e.param.element&&(e.element=yx(i,e.param.element))}),i._bind.forEach(function(e){ox(i,e.element||t,e)})),i}function yx(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}function bx(e,t,n){var r=qs(t),i=r&&r.headless;return i?e.runAsync().then(function(){return px(e,null,null,i,n).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)}function _x(e,t){return e!==sN.Canvas&&e!==sN.SVG&&e!==sN.PNG?Promise.reject("Unrecognized image type: "+e):bx(this,e,t).then(function(t){return e===sN.SVG?xx(t.svg(),"image/svg+xml"):t.canvas().toDataURL("image/png")})}function xx(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function wx(e){return bx(this,sN.Canvas,e).then(function(e){return e.canvas()})}function kx(e){return bx(this,sN.SVG,e).then(function(e){return e.svg()})}function Mx(e,t){return e=e||t.autosize,s(e)?e:(e=e||"pad",{type:e})}function Sx(e,t){return e=e||t.padding,s(e)?{top:Ex(e.top),bottom:Ex(e.bottom),left:Ex(e.left),right:Ex(e.right)}:Ox(Ex(e))}function Ex(e){return+e||0}function Ox(e){return{top:e,bottom:e,left:e,right:e}}function Ax(e,t){o(e+' for "outer" push: '+c(t))}function Cx(e,t){var n=e.name;if(e.push===vI)t.signals[n]||Ax("No prior signal definition",n),yI.forEach(function(t){void 0!==e[t]&&Ax("Invalid property ",t)});else{var r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Rx(e){this.type=e}function Tx(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}function zx(e,t){if(!e)throw new Error("ASSERT: "+t)}function Nx(e){return e>=48&&e<=57}function Dx(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Px(e){return"01234567".indexOf(e)>=0}function Lx(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function qx(e){return 10===e||13===e||8232===e||8233===e}function $x(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&nU.test(String.fromCharCode(e))}function jx(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&rU.test(String.fromCharCode(e))}function Fx(){for(var e;xI<wI&&(e=_I.charCodeAt(xI),Lx(e)||qx(e));)++xI}function Ix(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)xI<wI&&Dx(_I[xI])?(r=_I[xI++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):gw({},WI,eU);return String.fromCharCode(i)}function Ux(){var e,t,n,r;for(e=_I[xI],t=0,"}"===e&&gw({},WI,eU);xI<wI&&(e=_I[xI++],Dx(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&gw({},WI,eU),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Bx(){var e,t;for(e=_I.charCodeAt(xI++),t=String.fromCharCode(e),92===e&&(117!==_I.charCodeAt(xI)&&gw({},WI,eU),++xI,e=Ix("u"),e&&"\\"!==e&&$x(e.charCodeAt(0))||gw({},WI,eU),t=e);xI<wI&&(e=_I.charCodeAt(xI),jx(e));)++xI,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==_I.charCodeAt(xI)&&gw({},WI,eU),++xI,e=Ix("u"),e&&"\\"!==e&&jx(e.charCodeAt(0))||gw({},WI,eU),t+=e);return t}function Wx(){var e,t;for(e=xI++;xI<wI;){if(t=_I.charCodeAt(xI),92===t)return xI=e,Bx();if(!jx(t))break;++xI}return _I.slice(e,xI)}function Gx(){var e,t,n;return e=xI,t=92===_I.charCodeAt(xI)?Bx():Wx(),n=1===t.length?EI:iU.hasOwnProperty(t)?OI:"null"===t?AI:"true"===t||"false"===t?MI:EI,{type:n,value:t,start:e,end:xI}}function Yx(){var e,t,n,r,i=xI,a=_I.charCodeAt(xI),o=_I[xI];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++xI,{type:RI,value:String.fromCharCode(a),start:i,end:xI};default:if(e=_I.charCodeAt(xI+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return xI+=2,{type:RI,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:xI};case 33:case 61:return xI+=2,61===_I.charCodeAt(xI)&&++xI,{type:RI,value:_I.slice(i,xI),start:i,end:xI}}}return r=_I.substr(xI,4),">>>="===r?(xI+=4,{type:RI,value:r,start:i,end:xI}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(xI+=3,{type:RI,value:n,start:i,end:xI}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(xI+=2,{type:RI,value:t,start:i,end:xI}):"<>=!+-*%&|^/".indexOf(o)>=0?(++xI,{type:RI,value:o,start:i,end:xI}):void gw({},WI,eU)))}function Hx(e){for(var t="";xI<wI&&Dx(_I[xI]);)t+=_I[xI++];return 0===t.length&&gw({},WI,eU),$x(_I.charCodeAt(xI))&&gw({},WI,eU),{type:CI,value:parseInt("0x"+t,16),start:e,end:xI}}function Vx(e){for(var t="0"+_I[xI++];xI<wI&&Px(_I[xI]);)t+=_I[xI++];return($x(_I.charCodeAt(xI))||Nx(_I.charCodeAt(xI)))&&gw({},WI,eU),{type:CI,value:parseInt(t,8),octal:!0,start:e,end:xI}}function Xx(){var e,t,n;if(n=_I[xI],zx(Nx(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=xI,e="","."!==n){if(e=_I[xI++],n=_I[xI],"0"===e){if("x"===n||"X"===n)return++xI,Hx(t);if(Px(n))return Vx(t);n&&Nx(n.charCodeAt(0))&&gw({},WI,eU)}for(;Nx(_I.charCodeAt(xI));)e+=_I[xI++];n=_I[xI]}if("."===n){for(e+=_I[xI++];Nx(_I.charCodeAt(xI));)e+=_I[xI++];n=_I[xI]}if("e"===n||"E"===n)if(e+=_I[xI++],n=_I[xI],"+"!==n&&"-"!==n||(e+=_I[xI++]),Nx(_I.charCodeAt(xI)))for(;Nx(_I.charCodeAt(xI));)e+=_I[xI++];else gw({},WI,eU);return $x(_I.charCodeAt(xI))&&gw({},WI,eU),{type:CI,value:parseFloat(e),start:t,end:xI}}function Zx(){var e,t,n,r,i="",a=!1;for(e=_I[xI],zx("'"===e||'"'===e,"String literal must starts with a quote"),t=xI,++xI;xI<wI;){if(n=_I[xI++],n===e){e="";break}if("\\"===n)if(n=_I[xI++],n&&qx(n.charCodeAt(0)))"\r"===n&&"\n"===_I[xI]&&++xI;else switch(n){case"u":case"x":"{"===_I[xI]?(++xI,i+=Ux()):i+=Ix(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:Px(n)?(r="01234567".indexOf(n),0!==r&&(a=!0),xI<wI&&Px(_I[xI])&&(a=!0,r=8*r+"01234567".indexOf(_I[xI++]),"0123".indexOf(n)>=0&&xI<wI&&Px(_I[xI])&&(r=8*r+"01234567".indexOf(_I[xI++]))),i+=String.fromCharCode(r)):i+=n}else{if(qx(n.charCodeAt(0)))break;i+=n}}return""!==e&&gw({},WI,eU),{type:TI,value:i,octal:a,start:t,end:xI}}function Jx(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void gw({},ZI)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{}catch(e){gw({},ZI)}try{return new RegExp(e,t)}catch(e){return null}}function Qx(){var e,t,n,r,i;for(e=_I[xI],zx("/"===e,"Regular expression literal must start with a slash"),t=_I[xI++],n=!1,r=!1;xI<wI;)if(e=_I[xI++],t+=e,"\\"===e)e=_I[xI++],qx(e.charCodeAt(0))&&gw({},JI),t+=e;else if(qx(e.charCodeAt(0)))gw({},JI);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||gw({},JI),i=t.substr(1,t.length-2),{value:i,literal:t}}function Kx(){var e,t,n;for(t="",n="";xI<wI&&(e=_I[xI],jx(e.charCodeAt(0)));)++xI,"\\"===e&&xI<wI?gw({},WI,eU):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&gw({},ZI,n),{value:n,literal:t}}function ew(){var e,t,n,r;return kI=null,Fx(),e=xI,t=Qx(),n=Kx(),r=Jx(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:xI}}function tw(e){return e.type===EI||e.type===OI||e.type===MI||e.type===AI}function nw(){var e;return Fx(),xI>=wI?{type:SI,start:xI,end:xI}:(e=_I.charCodeAt(xI),$x(e)?Gx():40===e||41===e||59===e?Yx():39===e||34===e?Zx():46===e?Nx(_I.charCodeAt(xI+1))?Xx():Yx():Nx(e)?Xx():Yx())}function rw(){var e;return e=kI,xI=e.end,kI=nw(),xI=e.end,e}function iw(){var e;e=xI,kI=nw(),xI=e}function aw(e){var t=new Rx(NI);return t.elements=e,t}function ow(e,t,n){var r=new Rx("||"===e||"&&"===e?jI:DI);return r.operator=e,r.left=t,r.right=n,r}function uw(e,t){var n=new Rx(PI);return n.callee=e,n.arguments=t,n}function sw(e,t,n){var r=new Rx(LI);return r.test=e,r.consequent=t,r.alternate=n,r}function fw(e){var t=new Rx(qI);return t.name=e,t}function cw(e){var t=new Rx($I);return t.value=e.value,t.raw=_I.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function lw(e,t,n){var r=new Rx(FI);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function dw(e){var t=new Rx(II);return t.properties=e,t}function hw(e,t,n){var r=new Rx(UI);return r.key=t,r.value=n,r.kind=e,r}function pw(e,t){var n=new Rx(BI);return n.operator=e,n.argument=t,n.prefix=!0,n}function gw(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return zx(t<r.length,"Message reference must be in range"),r[t]});throw n=new Error(i),n.index=xI,n.description=i,n}function mw(e){e.type===SI&&gw(e,XI),e.type===CI&&gw(e,GI),e.type===TI&&gw(e,YI),e.type===EI&&gw(e,HI),e.type===OI&&gw(e,VI),gw(e,WI,e.value)}function vw(e){var t=rw();t.type===RI&&t.value===e||mw(t)}function yw(e){return kI.type===RI&&kI.value===e}function bw(e){return kI.type===OI&&kI.value===e}function _w(){var e=[];for(xI=kI.start,vw("[");!yw("]");)yw(",")?(rw(),e.push(null)):(e.push(Pw()),yw("]")||vw(","));return rw(),aw(e)}function xw(){var e;return xI=kI.start,e=rw(),e.type===TI||e.type===CI?(e.octal&&gw(e,QI),cw(e)):fw(e.value)}function ww(){var e,t,n,r;return xI=kI.start,e=kI,e.type===EI?(n=xw(),vw(":"),r=Pw(),hw("init",n,r)):e.type!==SI&&e.type!==RI?(t=xw(),vw(":"),r=Pw(),hw("init",t,r)):void mw(e)}function kw(){var e,t,n,r=[],i={},a=String;for(xI=kI.start,vw("{");!yw("}");)e=ww(),t=e.key.type===qI?e.key.name:a(e.key.value),n="$"+t,Object.prototype.hasOwnProperty.call(i,n)?gw({},KI):i[n]=!0,r.push(e),yw("}")||vw(",");return vw("}"),dw(r)}function Mw(){var e;return vw("("),e=Lw(),vw(")"),e}function Sw(){var e,t,n;if(yw("("))return Mw();if(yw("["))return _w();if(yw("{"))return kw();if(e=kI.type,xI=kI.start,e===EI||aU[kI.value])n=fw(rw().value);else if(e===TI||e===CI)kI.octal&&gw(kI,QI),n=cw(rw());else{if(e===OI)throw new Error(tU);e===MI?(t=rw(),t.value="true"===t.value,n=cw(t)):e===AI?(t=rw(),t.value=null,n=cw(t)):yw("/")||yw("/=")?(n=cw(ew()),iw()):mw(rw())}return n}function Ew(){var e=[];if(vw("("),!yw(")"))for(;xI<wI&&(e.push(Pw()),!yw(")"));)vw(",");return vw(")"),e}function Ow(){var e;return xI=kI.start,e=rw(),tw(e)||mw(e),fw(e.value)}function Aw(){return vw("."),Ow()}function Cw(){var e;return vw("["),e=Lw(),vw("]"),e}function Rw(){var e,t,n;for(e=Sw();;)if(yw("."))n=Aw(),e=lw(".",e,n);else if(yw("("))t=Ew(),e=uw(e,t);else{if(!yw("["))break;n=Cw(),e=lw("[",e,n)}return e}function Tw(){var e=Rw();if(kI.type===RI&&(yw("++")||yw("--")))throw new Error(tU);return e}function zw(){var e,t;if(kI.type!==RI&&kI.type!==OI)t=Tw();else{if(yw("++")||yw("--"))throw new Error(tU);if(yw("+")||yw("-")||yw("~")||yw("!"))e=rw(),t=zw(),t=pw(e.value,t);else{if(bw("delete")||bw("void")||bw("typeof"))throw new Error(tU);t=Tw()}}return t}function Nw(e){var t=0;if(e.type!==RI&&e.type!==OI)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Dw(){var e,t,n,r,i,a,o,u,s,f;if(e=kI,s=zw(),r=kI,i=Nw(r),0===i)return s;for(r.prec=i,rw(),t=[e,kI],o=zw(),a=[s,r,o];(i=Nw(kI))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=ow(u,s,o),a.push(n);r=rw(),r.prec=i,a.push(r),t.push(kI),n=zw(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=ow(a[f-1].value,a[f-2],n),f-=2;return n}function Pw(){var e,t,n;return e=Dw(),yw("?")&&(rw(),t=Pw(),vw(":"),n=Pw(),e=sw(e,t,n)),e}function Lw(){var e=Pw();if(yw(","))throw new Error(tU);return e}function qw(e){_I=e,xI=0,wI=_I.length,kI=null,iw();var t=Lw();if(kI.type!==SI)throw new Error("Unexpect token after expression.");return t}function $w(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&o("Missing arguments to clamp function."),t.length>3&&o("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),replace:n("replace",i),regexp:a,test:n("test",a),if:function(t){t.length<3&&o("Missing arguments to if function."),t.length>3&&o("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function jw(e){function t(e){if(f(e))return e;var t=g[e.type];return null==t&&o("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(l),fields:Object.keys(d)};return l={},d={},n}e=e||{};var r=e.whitelist?V(e.whitelist):{},i=e.blacklist?V(e.blacklist):{},a=e.constants||oU,u=(e.functions||$w)(t),s=e.globalvar,c=e.fieldvar,l={},d={},h=0,p=A(s)?s:function(e){return s+'["'+e+'"]'},g={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return h>0?t:i.hasOwnProperty(t)?o("Illegal identifier: "+t):a.hasOwnProperty(t)?a[t]:r.hasOwnProperty(t)?t:(l[t]=1,p(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(h+=1);var i=t(e.property);return r===c&&(d[i]=1),n&&(h-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&o("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,i=u.hasOwnProperty(n)&&u[n];return i||o("Unrecognized function: "+n),A(i)?i(r):i+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){h+=1;var n=t(e.key);return h-=1,n+":"+t(e.value)}};return n.functions=u,n.constants=a,n}function Fw(e,t,n){var r=e+":"+n,i=uU[r];return i&&i[0]===t||(uU[r]=i=[t,t(n)]),i[1]}function Iw(e,t){return Fw("format",ZD,t)(e)}function Uw(e,t){return Fw("timeFormat",fC,t)(e)}function Bw(e,t){return Fw("utcFormat",lC,t)(e)}function Ww(e,t){return Fw("timeParse",cC,t)(e)}function Gw(e,t){return Fw("utcParse",dC,t)(e)}function Yw(e,t,n){return sU.setMonth(e),sU.setDate(t),Uw(sU,n)}function Hw(e){return Yw(e,1,"%B")}function Vw(e){return Yw(e,1,"%b")}function Xw(e){return Yw(0,2+e,"%A")}function Zw(e){return Yw(0,2+e,"%a")}function Jw(e){return 1+~~(new Date(e).getMonth()/3)}function Qw(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Kw(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function ek(){return Kw(this.context.dataflow,"warn",arguments)}function tk(){return Kw(this.context.dataflow,"info",arguments)}function nk(){return Kw(this.context.dataflow,"debug",arguments)}function rk(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function ik(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-t?[t,n]:[Math.min(Math.max(i,t),n-r),Math.min(Math.max(a,r),n)]}function ak(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function ok(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}function uk(){return fU?fU.screen:{}}function sk(){return fU?[fU.innerWidth,fU.innerHeight]:[void 0,void 0]}function fk(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function ck(e,t,n,r,i,a){var o,u,s=e[0],f=p(e);return f<s&&(o=s,s=f,f=o),o=Math.abs(t-s),u=Math.abs(f-t),o<u&&o<=n?r:u<=n?i:a}function lk(){var e=[].slice.call(arguments);return e.unshift({}),z.apply(null,e)}function dk(e){return e[e.length-1]-e[0]||0}function hk(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function pk(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function gk(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function mk(){function e(){var e=i().length,r=o[1]<o[0],l=o[r-0],d=o[1-r],h=gk(e,s,f);t=(d-l)/(h||1),u&&(t=Math.floor(t)),l+=(d-l-t*(e-s))*c,n=t*(1-s),u&&(l=Math.round(l),n=Math.round(n));var p=cr(e).map(function(e){return l+t*e});return a(r?p.reverse():p)}var t,n,r=qf().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,c=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],c=o[1]<o[0],l=c?a().reverse():a(),d=l.length-1;if(s===s&&f===f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return t=Math.max(0,FC(l,s)-1),r=s===f?t:FC(l,f)-1,s-l[t]>n+1e-10&&++t,c&&(u=t,t=d-r,r=d-u),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return mk().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(c)},e()}function vk(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return vk(t())},e}function yk(){return vk(mk().paddingInner(1))}function bk(e){return gU.call(e,function(e){return+e})}function _k(){function e(e){return n(e)}function t(e){r=bk(e),n.domain([r[0],p(r)])}var n=vl(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return _k().domain(e.domain()).range(e.range())},e}function xk(){function e(e){return null==e||e!==e?void 0:n[(FC(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=bk(n),e):t.slice()},e.range=function(t){return arguments.length?(n=mU.call(t),e):n.slice()},e.copy=function(){return xk().domain(e.domain()).range(e.range())},e}function wk(e){function t(){var e=r.domain();i=e[0],a=p(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=vl(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return wk().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function kk(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?hk(n):n.invertExtent?pk(n):void 0),n.type=e,n}}function Mk(e,t){return arguments.length>1?(vU[e]=kk(e,t),this):vU.hasOwnProperty(e)?vU[e]:void 0}function Sk(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Ek(e,t){EU[e]=qL["interpolate"+t],SU[e]=qL["scheme"+t]}function Ok(e,t,n){var r=n-t;return r?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(Ak):R(0)}function Ak(e,t){var n=t-e;return function(t){return e+t*n}}function Ck(e,t){var n;return A(e)?e:f(e)?(n=t.scales[e])&&n.value:void 0}function Rk(e,t,n){var r=hU+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(e){}}function Tk(e,t,n,r){if(t[0].type===cU)Rk(n,r,t[0].value);else if(t[0].type===lU)for(e in n.scales)Rk(n,r,e)}function zk(e,t){var n=Ck(e,(t||this).context);return n&&n.range?n.range():[]}function Nk(e,t){var n=Ck(e,(t||this).context);return n?n.domain():[]}function Dk(e,t){var n=Ck(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Pk(e,t,n){return gk(e||0,t||0,n||0)}function Lk(e,t){var n=Ck(e,(t||this).context);return n?n.copy():void 0}function qk(e,t,n){var r=Ck(e,(n||this).context);return r?r(t):void 0}function $k(e,t,n){var r=Ck(e,(n||this).context);return r?eA(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function jk(e,t,n,r,i){e=Ck(e,(i||this).context);var a=qi(t,n),o=e.domain(),u=o[0],s=o[o.length-1],f=Ok(e,u,s);e.ticks&&(o=e.ticks(+r||15),u!==o[0]&&o.unshift(u),s!==o[o.length-1]&&o.push(s));for(var c=0,l=o.length;c<l;++c)a.stop(f(o[c]),e(o[c]));return a}function Fk(e,t){return function(n,r,i){if(n){var a=Ck(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}function Ik(e,t,n){var r=Ck(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}function Uk(e){var t=null;return function(n){return n?to(n,t=t||Ja(e)):e}}function Bk(e){var t=this.context.data[e];return t?t.values.value:[]}function Wk(e,t,n,r){t[0].type!==cU&&o("First argument to data functions must be a string literal.");var i=t[0].value,a=pU+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function Gk(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;
return i?i.count:i}function Yk(e,t,n,r){t[0].type!==cU&&o("First argument to indata must be a string literal."),t[1].type!==cU&&o("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,u=dU+a;r.hasOwnProperty(u)||(r[u]=n.getData(i).indataRef(n,a))}function Hk(e,t){var n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(oA).insert(t)),1}function Vk(e){return e.data}function Xk(e,t){var n=Bk.call(t,e);return n.root&&n.root.lookup||RU}function Zk(e,t,n){var r=Xk(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(Vk):void 0}function Jk(e,t){var n=Xk(e,this)[t];return n?n.ancestors().map(Vk):void 0}function Qk(e,t,n,r){var i,a=t[0],o=t[t.length-1];return a>o&&(i=a,a=o,o=i),n=void 0===n||n,r=void 0===r||r,(n?a<=e:a<e)&&(r?e<=o:e<o)}function Kk(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e}function eM(e,t){return e===t||e!==e&&t!==t||!(!eA(e)||!eA(t)||e.length!==t.length)&&tM(e,t)}function tM(e,t){for(var n=0,r=e.length;n<r;++n)if(!eM(e[n],t[n]))return!1;return!0}function nM(e){return function(t){for(var n in e)if(!eM(t[n],e[n]))return!1;return!0}}function rM(e,t,n,r,i,a){var o,u,s=this.context.dataflow,f=this.context.data[e],c=f.input,l=f.changes,d=s.stamp();if(s._trigger===!1||!(c.value.length||t||r))return 0;if((!l||l.stamp<d)&&(f.changes=l=s.changeset(),l.stamp=d,s.runAfter(function(){f.modified=!0,s.pulse(c,l).run()},!0,1)),n&&(o=n===!0?oA:eA(n)||Q(n)?n:nM(n),l.remove(o)),t&&l.insert(t),r&&(o=nM(r),c.value.some(o)?l.remove(o):l.insert(r)),i)for(u in a)l.modify(i,u,a[u]);return 1}function iM(e,t){for(var n,r=t.fields,i=t.values,a=t.getter||(t.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||l(r[u]),n=a[u](e),q(n)&&(n=g(n)),q(i[u])&&(i[u]=g(i[u])),t[TU+r[u]]){if(q(i[u][0])&&(i[u]=i[u].map(g)),!Qk(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function aM(e,t){for(var n,r,i,a=t.intervals,o=a.length,u=0;u<o;++u){if(r=a[u].extent,n=a[u].getter||(a[u].getter=l(a[u].field)),i=n(e),!r||r[0]===r[1])return!1;if(q(i)&&(i=g(i)),q(r[0])&&(r=a[u].extent=r.map(g)),$(r[0])&&!Qk(i,r))return!1;if(f(r[0])&&r.indexOf(i)<0)return!1}return!0}function oM(e,t,n,r){for(var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=f?f[DU]&&f[DU].value:void 0,d=n===zU,h=c.length,p=0;p<h;++p)if(i=c[p],l&&d){if(a=a||{},o=a[u=i.unit]||0,o===-1)continue;if(s=r(t,i),a[u]=s?-1:++o,s&&1===l.size)return!0;if(!s&&o===l.get(u).count)return!1}else if(s=r(t,i),d^s)return s;return h&&d}function uM(e,t,n){return oM.call(this,e,t,n,iM)}function sM(e,t,n){return oM.call(this,e,t,n,aM)}function fM(e,t,n,r){t[0].type!==cU&&o("First argument to indata must be a string literal.");var i=t[0].value,a=t.length>=2&&t[t.length-1].value,u="unit",s=dU+u;a!==zU||r.hasOwnProperty(s)||(r[s]=n.getData(i).indataRef(n,u)),Wk(e,t,n,r)}function cM(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=f?f[DU]&&f[DU].value:void 0,d=c[0],h=0;if(d){for(i=t?d.encodings.length:d.fields.length;h<i;++h)if(t&&d.encodings[h]===t||n&&d.fields[h]===n){a=h,u=d[TU+d.fields[h]];break}return l&&1===l.size&&(r=NU),l&&r===zU?(s=c.reduce(function(e,t){var n=e[t.unit]||(e[t.unit]=[]);return n.push({unit:t.unit,value:t.values[a]}),e},{}),o=Object.keys(s).map(function(e){return{unit:e,value:u?hM(s[e],NU):dM(s[e],NU)}})):o=c.map(function(e){return{unit:e.unit,value:e.values[a]}}),u?hM(o,r):dM(o,r)}}function lM(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=c[0],d=0;if(l){for(i=l.intervals.length;d<i;++d)if(a=l.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,s=a.extent.length>2;break}return u=c.reduce(function(e,t){var n=t.intervals[o].extent,r=s?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return s?e.push.apply(e,r):e.push(r),e},[]),s?dM(u,r):hM(u,r)}}function dM(e,t){for(var n,r,i,a,o={},u=0,s={},f=[],c=0,l=e.length;c<l;++c)n=e[c],r=n.unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],t===zU&&i.count!==u||f.push(i.value);return f.length?f:void 0}function hM(e,t){for(var n,r,i,a,o=t===zU?gM:pM,u=0,s=e.length;u<s;++u)n=e[u].value,q(n[0])&&(n=n.map(g)),i=n[0],a=n[1],i>a&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!==+r[1]?r:void 0}function pM(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function gM(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function mM(e,t,n){return 1===arguments.length?PU[e]:(PU[e]=t,n&&(jU[e]=n),BU&&(BU.functions[e]=$U+e),this)}function vM(e){var t=$w(e);LU.forEach(function(e){t[e]=qU+e});for(var n in PU)t[n]=$U+n;return t}function yM(e,t,n){var r,i,a={};try{e=f(e)?e:c(e)+"",r=qw(e)}catch(t){o("Expression parse error: "+e)}return r.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,r=UU.visitors[n];r&&r(n,e.arguments,t,a)}}),i=BU(r),i.globals.forEach(function(e){var n=WU+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function bM(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function _M(e,t,n,r){return new bM(e,t,n,r)}function xM(e,t){return _M("operator",e,t)}function wM(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function kM(e,t){return t?{$field:e,$name:t}:{$field:e}}function MM(e,t){return{$compare:e,$order:t}}function SM(e,t){var n={$key:e};return t&&(n.$flat=!0),n}function EM(e){return s(e)?(e.order===VU?"-":"+")+OM(e.op,e.field):""}function OM(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function AM(e){return e&&e.signal}function CM(e,t){return null!=e?e:t}function RM(e){return e&&e.signal||e}function TM(e,t){var n=e.merge?NM:e.stream?DM:e.type?PM:o("Invalid stream specification: "+c(e));return n(e,t)}function zM(e){return e===XU?ZU:e||ZU}function NM(e,t){var n=e.merge.map(function(e){return TM(e,t)}),r=LM({merge:n},e,t);return t.addStream(r).id}function DM(e,t){var n=TM(e.stream,t),r=LM({stream:n},e,t);return t.addStream(r).id}function PM(e,t){var n,r;return e.type===JU?(n=t.event(JU,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(zM(e.source),e.type),r=LM({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function LM(e,t,n){var r=t.between;return r&&(2!==r.length&&o('Stream "between" parameter must have 2 entries: '+c(t)),e.between=[TM(r[0],n),TM(r[1],n)]),r=t.filter?O(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(qM(t.marktype,t.markname,t.markrole)),t.source===XU&&r.push("inScope(event.item)"),r.length&&(e.filter=yM("("+r.join(")&&(")+")").$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function qM(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}function $M(e,t,n){return FU=t||QU,IU=n||sB,IM(e.trim()).map(UM)}function jM(e){return IU.hasOwnProperty(e)}function FM(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function IM(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=FM(e,i,iB,KU+tB,eB+nB),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function UM(e){return"["===e[0]?BM(e):WM(e)}function BM(e){var t,n,r=e.length,i=1;if(i=FM(e,i,eB,KU,eB),i===r)throw"Empty between selector: "+e;if(t=IM(e.substring(1,i)),2!==t.length)throw"Between selector must have two elements: "+e;if(e=e.slice(i+1).trim(),e[0]!==oB)throw"Expected '>' after between selector: "+e;return t=t.map(UM),n=UM(e.slice(1).trim()),n.between?{between:t,stream:n}:(n.between=t,n)}function WM(e){var t,n,r={source:FU},i=[],a=[0,0],o=0,u=0,s=e.length,f=0;if(e[s-1]===nB){if(f=e.lastIndexOf(tB),!(f>=0))throw"Unmatched right brace: "+e;try{a=GM(e.substring(f+1,s-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,f).trim(),s=e.length,f=0}if(!s)throw e;if(e[0]===aB&&(o=++f),t=FM(e,f,rB),t<s&&(i.push(e.substring(u,t).trim()),u=f=++t),f=FM(e,f,KU),f===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,f).trim()),n=[],u=++f,u===s)throw"Unmatched left bracket: "+e;for(;f<s;){if(f=FM(e,f,eB),f===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,f).trim()),f<s-1&&e[++f]!==KU)throw"Expected left bracket: "+e;u=++f}if(!(s=i.length)||uB.test(i[s-1]))throw"Invalid event selector: "+e;return s>1?(r.type=i[1],o?r.markname=i[0].slice(1):jM(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}function GM(e){var t=e.split(iB);if(!e.length||t.length>2)throw e;return t.map(function(t){var n=+t;if(n!==n)throw e;return n})}function YM(e,t,n){var r,i=e.events,a=e.update,u=e.encode,s=[],l="";i||o("Signal update missing events specification."),f(i)&&(i=$M(i,t.isSubscope()?XU:ZU)),i=O(i).filter(function(e){return e.signal||e.scale?(s.push(e),0):1}),i.length&&s.push(i.length>1?{merge:i}:i[0]),null!=u&&(a&&o("Signal encode and update are mutually exclusive."),a="encode(item(),"+c(u)+")"),l=f(a)?yM(a,t,fB):null!=a.expr?yM(a.expr,t,fB):null!=a.value?a.value:null!=a.signal?{$expr:"_.value",$params:{value:t.signalRef(a.signal)}}:o("Invalid signal update specification."),r={target:n,update:l},e.force&&(r.options={force:!0}),s.forEach(function(e){t.addUpdate(z(HM(e,t),r))})}function HM(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):TM(e,t)}}function VM(e,t){var n=t.getSignal(e.name);if(e.update){var r=yM(e.update,t);n.update=r.$expr,n.params=r.$params}e.on&&e.on.forEach(function(e){YM(e,t,n.id)})}function XM(e){return function(t,n,r){return _M(e,n,t||void 0,r)}}function ZM(e){return IB.hasOwnProperty(e)}function JM(e){return jB.hasOwnProperty(e)}function QM(e){return FB.hasOwnProperty(e)}function KM(e){return"quantile"===e}function eS(e,t){var n=e.type||"linear";$B.hasOwnProperty(n)||o("Unrecognized scale type: "+c(n)),t.addScale(e.name,{type:n,domain:void 0})}function tS(e,t){var n,r=t.getScale(e.name).params;r.domain=aS(e.domain,e,t),null!=e.range&&(r.range=mS(e,t,r)),null!=e.interpolate&&gS(e.interpolate,r),null!=e.nice&&pS(e.nice,r);for(n in e)r.hasOwnProperty(n)||"name"===n||(r[n]=nS(e[n],t))}function nS(e,t){return s(e)?e.signal?t.signalRef(e.signal):o("Unsupported object: "+c(e)):e}function rS(e,t){return e.signal?t.signalRef(e.signal):e.map(function(e){return nS(e,t)})}function iS(e){o("Can not find data set: "+c(e))}function aS(e,t,n){return e?e.signal?n.signalRef(e.signal):(eA(e)?oS:e.fields?sS:uS)(e,t,n):void(null==t.domainMin&&null==t.domainMax||o("No scale domain defined for domainMin/domainMax to override."))}function oS(e,t,n){return e.map(function(e){return nS(e,n)})}function uS(e,t,n){var r=n.getData(e.data);return r||iS(e.data),ZM(t.type)?r.valuesRef(n,e.field,lS(e.sort,!1)):KM(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function sS(e,t,n){var r=e.data,i=e.fields.reduce(function(e,t){return t=f(t)?{data:r,field:t}:eA(t)||t.signal?fS(t,n):t,e.push(t),e},[]);return(ZM(t.type)?cS:KM(t.type)?dS:hS)(e,n,i)}function fS(e,t){var n="_:vega:_"+LB++,r=hB({});if(eA(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+c(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,zB({})]),{data:n,field:"data"}}function cS(e,t,n){var r,i,a,o;return r=n.map(function(e){var n=t.getData(e.data);return n||iS(e.data),n.countsRef(t,e.field)}),i=t.add(cB({groupby:YU,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(hB({pulse:wM(i)})),o=t.add(PB({field:YU,sort:t.sortRef(lS(e.sort,!0)),pulse:wM(a)})),wM(o)}function lS(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?o("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&o("Multiple domain scales support op count only."):o("No field provided for sort aggregate op: "+e.op):s(e)?e.field="key":e={field:"key"}),e}function dS(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||iS(e.data),n.domainRef(t,e.field)});return wM(t.add(kB({values:r})))}function hS(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||iS(e.data),n.extentRef(t,e.field)});return wM(t.add(wB({extents:r})))}function pS(e,t){t.nice=s(e)?{interval:nS(e.interval),step:nS(e.step)}:nS(e)}function gS(e,t){t.interpolate=nS(e.type||e),null!=e.gamma&&(t.interpolateGamma=nS(e.gamma))}function mS(e,t,n){var r=e.range,i=t.config.range;if(r.signal)return t.signalRef(r.signal);if(f(r)){if(i&&i.hasOwnProperty(r))return e=z({},e,{range:i[r]}),mS(e,t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=ZM(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:o("Unrecognized scale range value: "+c(r))}else{if(r.scheme)return n.scheme=nS(r.scheme,t),r.extent&&(n.schemeExtent=rS(r.extent,t)),void(r.count&&(n.schemeCount=nS(r.count,t)));if(r.step)return void(n.rangeStep=nS(r.step,t));if(ZM(e.type)&&!eA(r))return aS(r,e,t);eA(r)||o("Unsupported range type: "+c(r))}return r.map(function(e){return nS(e,t)})}function vS(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=yS(e[r],r,t));t.addProjection(e.name,n)}function yS(e,t,n){return eA(e)?e.map(function(e){return yS(e,t,n)}):s(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:o("Unsupported parameter object: "+c(e)):e}function bS(e,t){var n="";return lW[t]?n:(e.x2&&(e.x?(dW[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(dW[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)}function _S(e,t,n,r){function i(e,i,a,o){var u=CS(null,i,t,n,r),s=CS(null,a,t,n,r),f=CS(null,o,t,n,r);return"this."+e+"("+[u,s,f].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}function xS(e,t,n,r){var i=yM(e,t);return i.$fields.forEach(function(e){r[e]=1}),z(n,i.$params),i.$expr}function wS(e,t,n,r){return kS(s(e)?e:{datum:e},t,n,r)}function kS(e,t,n,r){var i,a,s;if(e.signal)i="datum",s=xS(e.signal,t,n,r);else if(e.group||e.parent){for(a=Math.max(1,e.level||1),i="item";a-- >0;)i+=".mark.group";e.parent?(s=e.parent,i+=".datum"):s=e.group}else e.datum?(i="datum",s=e.datum):o("Invalid field reference: "+c(e));return e.signal||(f(s)?(r[s]=1,s=u(s).map(c).join("][")):s=kS(s,t,n,r)),i+"["+s+"]"}function MS(e,t,n,r,i){var a,o,u,s=ES(e.scale,n,r,i);return null!=e.range?(a=+e.range,o=s+".range()",t=0===a?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=SS(e.scale,n))&&(o=s+".bandwidth",a=+e.band,a=o+"()"+(1===a?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t}function SS(e,t){if(!f(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}function ES(e,t,n,r){var i;if(f(e))i=hU+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=c(i);else{for(i in t.scales)n[hU+i]=t.scaleRef(i);i=c(hU)+"+"+(e.signal?"("+xS(e.signal,t,n,r)+")":wS(e,t,n,r))}return"_["+i+"]"}function OS(e,t,n,r){return"this.gradient("+ES(e.gradient,t,n,r)+","+c(e.start)+","+c(e.stop)+","+c(e.count)+")"}function AS(e,t,n,r){return s(e)?"("+CS(null,e,t,n,r)+")":e}function CS(e,t,n,r,i){if(null!=t.gradient)return OS(t,n,r,i);var a=t.signal?xS(t.signal,n,r,i):t.color?_S(t.color,n,r,i):null!=t.field?wS(t.field,n,r,i):void 0!==t.value?c(t.value):void 0;return null!=t.scale&&(a=MS(t,a,n,r,i)),void 0===a&&(a=null),null!=t.exponent&&(a="Math.pow("+a+","+AS(t.exponent,n,r,i)+")"),null!=t.mult&&(a+="*"+AS(t.mult,n,r,i)),null!=t.offset&&(a+="+"+AS(t.offset,n,r,i)),t.round&&(a="Math.round("+a+")"),a}function RS(e,t,n){return e+"["+c(t)+"]="+n+";"}function TS(e,t,n,r,i){var a="";return t.forEach(function(t){var o=CS(e,t,n,r,i);a+=t.test?xS(t.test,n,r,i)+"?"+o+":":o}),RS("o",e,a)}function zS(e,t,n,r){var i,a,o,u={},s="var o=item,datum=o.datum,$;";for(i in e)a=e[i],eA(a)?s+=TS(i,a,r,n,u):(o=CS(i,a,r,n,u),s+=RS("o",i,o));return s+=bS(e,t),s+="return 1;",{$expr:s,$fields:Object.keys(u),$output:Object.keys(e)}}function NS(e){return s(e)?z({},e):{value:e}}function DS(e,t,n){return null!=n?(e[t]=s(n)&&!eA(n)?n:{value:n},1):0}function PS(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=z(e[r]||{},t[r]));return e}function LS(e,t,n,r,i,a){var o,u;a=a||{},a.encoders={$encode:o={}},e=qS(e,t,n,r,i.config);for(u in e)o[u]=zS(e[u],t,a,i);return a}function qS(e,t,n,r,i){var a,o,u,s={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null),u=n===pW?i.group:n===hW?z({},i.mark,i[t]):null;for(a in u)o=jS(a,e)||("fill"===a||"stroke"===a)&&(jS("fill",e)||jS("stroke",e)),o||(s[a]=$S(u[a]));return O(r).forEach(function(t){var n=i.style&&i.style[t];for(var r in n)jS(r,e)||(s[r]=$S(n[r]))}),e=z({},e),e.enter=z(s,e.enter),e}function $S(e){return e&&e.signal?{signal:e.signal}:{value:e}}function jS(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function FS(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:PS(a,o,cW)}}function IS(e,t,n){return CM(t[e],n[e])}function US(e,t){return CM(e.direction,t)===HB}function BS(e,t){return CM(e.gradientLength,t.gradientLength||t.gradientWidth)}function WS(e,t){return CM(e.gradientThickness,t.gradientThickness||t.gradientHeight)}function GS(e,t){return CM(e.columns,CM(t.columns,+US(e,t.symbolDirection)))}function YS(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function HS(e,t,n){var r=t.config.style[n];return r&&r[e]}function VS(e,t,n,r){var i,a,o,u,s,f,c={value:0},l=US(e,n.gradientDirection),d=WS(e,n),h=BS(e,n),p={};return l?(o=[0,1],u=[0,0],s=d,f=h):(o=[0,0],u=[1,0],s=h,f=d),p.enter=i={opacity:c,x:c,y:c},DS(i,"stroke",IS("gradientStrokeColor",e,n)),DS(i,"strokeWidth",IS("gradientStrokeWidth",e,n)),p.exit={opacity:c},p.update=a={x:c,y:c,fill:{gradient:t,start:o,stop:u},opacity:{value:1}},i.width=a.width=NS(s),i.height=a.height=NS(f),FS(TW,SW,null,void 0,void 0,p,r)}function XS(e,t,n,r,i){var a,o,u,s,f,c,l={value:0},d=US(e,n.gradientDirection),h=WS(e,n),p=BS(e,n),g={},m="";return d?(u="y",f="y2",s="x",c="width",m="1-"):(u="x",f="x2",s="y",c="height"),g.enter=a={opacity:l},DS(a,"stroke",IS("gradientStrokeColor",e,n)),DS(a,"strokeWidth",IS("gradientStrokeWidth",e,n)),g.exit={opacity:l},g.update=o={opacity:{value:1}},a.fill=o.fill={scale:t,field:nW},a[u]=o[u]={signal:m+"datum."+KB,mult:p},a[s]=o[s]={value:0},a[f]=o[f]={signal:m+"datum."+eW,mult:p},a[c]=o[c]=NS(h),FS(TW,kW,null,nW,i,g,r)}function ZS(e,t,n,r){var i,a,o,u,s={value:0},f=US(e,t.gradientDirection),c=NS(WS(e,t)),l=BS(e,t),d=IS("labelOverlap",e,t),h={},p="";return h.enter=i={opacity:s},DS(i,"fill",IS("labelColor",e,t)),DS(i,"font",IS("labelFont",e,t)),DS(i,"fontSize",IS("labelFontSize",e,t)),DS(i,"fontWeight",IS("labelFontWeight",e,t)),DS(i,"limit",CM(e.labelLimit,t.gradientLabelLimit)),h.exit={opacity:s},h.update=a={opacity:{value:1},text:{field:JB}},f?(i.align={value:"left"},i.baseline=a.baseline={signal:LW},o="y",u="x",p="1-"):(i.align=a.align={signal:PW},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:p+"datum."+KB,mult:l},i[u]=a[u]=c,c.offset=CM(e.labelOffset,t.gradientLabelOffset)||0,e=FS(DW,EW,rW,nW,r,h,n),d&&(e.overlap={method:d,order:"datum."+ZB}),e}function JS(e,t,n,r,i,a,o,u){return{type:RW,name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}}function QS(e,t,n,r,i){var a,o,u,s,f,c,l,d=n.entries,h=!(!d||!d.interactive),p=d?d.name:void 0,g=IS("clipHeight",e,t),m=IS("symbolOffset",e,t),v={data:"value"},y={},b=i+"?datum."+QB+":datum."+tW,_=g?NS(g):{field:tW},x="datum."+ZB,w="max(1,"+i+")";return y={enter:a={opacity:qW},exit:{opacity:qW},update:o={opacity:{value:1}}},e.fill||(DS(a,"fill",t.symbolBaseFillColor),DS(a,"stroke",t.symbolBaseStrokeColor)),DS(a,"shape",IS("symbolType",e,t)),DS(a,"size",IS("symbolSize",e,t)),DS(a,"strokeWidth",IS("symbolStrokeWidth",e,t)),DS(a,"fill",IS("symbolFillColor",e,t)),DS(a,"stroke",IS("symbolStrokeColor",e,t)),a.x=o.x={signal:b,mult:.5,offset:m},_.mult=.5,a.y=o.y=_,fW.forEach(function(t){e[t]&&(o[t]=a[t]={scale:e[t],field:nW})}),s=FS(NW,OW,null,nW,v,y,n.symbols),g&&(s.clip=!0),y={enter:a={opacity:qW},exit:{opacity:qW},update:o={opacity:{value:1},text:{field:JB}}},DS(a,"align",IS("labelAlign",e,t)),DS(a,"baseline",IS("labelBaseline",e,t)),DS(a,"fill",IS("labelColor",e,t)),DS(a,"font",IS("labelFont",e,t)),DS(a,"fontSize",IS("labelFontSize",e,t)),DS(a,"fontWeight",IS("labelFontWeight",e,t)),DS(a,"limit",IS("labelLimit",e,t)),u=NS(m),u.offset=IS("labelOffset",e,t),a.x=o.x={signal:b,offset:u},a.y=o.y=_,f=FS(DW,EW,rW,nW,v,y,n.labels),y={enter:{width:qW,height:g?NS(g):qW,opacity:qW},exit:{opacity:qW},update:o={opacity:{value:1},row:{signal:null},column:{signal:null}}},US(e,t.symbolDirection)?(c="ceil(item.mark.items.length/"+w+")",o.row.signal=x+"%"+c,o.column.signal="floor("+x+"/"+c+")",l={field:["row",x]}):(o.row.signal="floor("+x+"/"+w+")",o.column.signal=x+"%"+w,l={field:x}),o.column.signal=i+"?"+o.column.signal+":"+x,r={facet:{data:r,name:"value",groupby:ZB}},e=JS(gW,null,p,r,h,PS(y,d,cW),[s,f]),e.sort=l,e}function KS(e,t){return{align:IS("gridAlign",e,t),center:{row:!0,column:!1},columns:GS(e,t),padding:{row:IS("rowPadding",e,t),column:IS("columnPadding",e,t)}}}function eE(e,t,n,r){var i,a={value:0},o={};return o.enter=i={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:a},DS(i,"align",IS("titleAlign",e,t)),DS(i,"baseline",IS("titleBaseline",e,t)),DS(i,"fill",IS("titleColor",e,t)),DS(i,"font",IS("titleFont",e,t)),DS(i,"fontSize",IS("titleFontSize",e,t)),DS(i,"fontWeight",IS("titleFontWeight",e,t)),DS(i,"limit",IS("titleLimit",e,t)),o.exit={opacity:a},o.update={opacity:{value:1},text:NS(e.title)},FS(DW,AW,iW,null,r,o,n)}function tE(e,t){var n;return s(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+nE(e.path)+")":e.sphere&&(n="geoShape("+nE(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function nE(e){return s(e)&&e.signal?e.signal:c(e)}function rE(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===RW?gW:t||hW:t}function iE(e){return{marktype:e.type,name:e.name||void 0,role:e.role||rE(e),zindex:+e.zindex||void 0}}function aE(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function oE(e,t){var n=Wn(e.type);n||o("Unrecognized transform type: "+c(e.type));var r=_M(n.type.toLowerCase(),null,uE(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function uE(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)r=e.params[i],o[r.name]=sE(r,t,n);return o}function sE(e,t,n){var r=e.type,i=t[e.name];return"index"===r?cE(e,t,n):void 0===i?void(e.required&&o("Missing required "+c(t.type)+" parameter: "+c(e.name))):"param"===r?lE(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!AM(i)?i.map(function(t){return fE(e,t,n)}):fE(e,i,n)}function fE(e,t,n){var r=e.type;if(AM(t))return mE(r)?o("Expression references can not be signals."):vE(r)?n.fieldRef(t):yE(r)?n.compareRef(t):n.signalRef(t.signal);var i=e.expr||vE(r);return i&&hE(t)?yM(t.expr,n):i&&pE(t)?kM(t.field):mE(r)?yM(t,n):gE(r)?wM(n.getData(t).values):vE(r)?kM(t):yE(r)?n.compareRef(t):t}function cE(e,t,n){return f(t.from)||o('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function lE(e,t,n){var r=t[e.name];return e.array?(eA(r)||o("Expected an array of sub-parameters. Instead: "+c(r)),r.map(function(t){return dE(e,t,n)})):dE(e,r,n)}function dE(e,t,n){var r,i,a,u,s;for(u=0,s=e.params.length;u<s;++u){i=e.params[u];for(a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||o("Unsupported parameter: "+c(t)),r=z(uE(i,t,n),i.key),wM(n.add(SB(r)))}function hE(e){return e&&e.expr}function pE(e){return e&&e.field}function gE(e){return"data"===e}function mE(e){return"expr"===e}function vE(e){return"field"===e}function yE(e){return"compare"===e}function bE(e,t,n){var r,i,a,u,s;return e?(r=e.facet)&&(t||o("Only group marks can be faceted."),null!=r.field?u=s=_E(r,n):(e.data?s=wM(n.getData(e.data).aggregate):(a=oE(z({type:"aggregate",groupby:O(r.groupby)},r.aggregate),n),a.params.key=n.keyRef(r.groupby),a.params.pulse=_E(r,n),u=s=wM(n.add(a))),i=n.keyRef(r.groupby,!0))):u=wM(n.add(hB(null,[{}]))),u||(u=_E(e,n)),{key:i,pulse:u,parent:s}}function _E(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:wM(t.getData(e.data).output)}function xE(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function wE(e){return f(e)?e:null}function kE(e,t,n){var r,i=OM(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function ME(e,t,n,r,i,a,o){var u,s,f=t[n]||(t[n]={}),c=EM(a),l=wE(i);if(null!=l&&(e=t.scope,l+=c?"|"+c:"",u=f[l]),!u){var d=a?{field:YU,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:wM(t.output)};c&&(d.sort=e.sortRef(a)),s=e.add(_M(r,void 0,d)),o&&(t.index[i]=s),u=wM(s),null!=l&&(f[l]=u)}return u}function SE(e,t,n){var r,i,a,u,s=e.from.facet,f=s.name,l=_E(s,t);s.name||o("Facet must have a name: "+c(s)),s.data||o("Facet must reference a data set: "+c(s)),s.field?u=t.add(EB({field:t.fieldRef(s.field),pulse:l})):s.groupby?u=t.add(vB({key:t.keyRef(s.groupby),group:wM(t.proxy(n.parent)),pulse:l})):o("Facet must specify groupby or field: "+c(s)),r=t.fork(),i=r.add(hB()),a=r.add(zB({pulse:wM(i)})),r.addData(f,new xE(r,i,i,a)),r.addSignal("parent",null),u.params.subflow={$subflow:ZE(e,r).toRuntime()}}function EE(e,t,n){var r=t.add(EB({pulse:n.pulse})),i=t.fork();i.add(zB()),i.addSignal("parent",null),r.params.subflow={$subflow:ZE(e,i).toRuntime()}}function OE(e,t,n){var r,i,a=e.remove,o=e.insert,u=e.toggle,s=e.modify,f=e.values,c=t.add(xM());r="if("+e.trigger+',modify("'+n+'",'+[o,a,u,s,f].map(function(e){return null==e?"null":e}).join(",")+"),0)",i=yM(r,t),c.update=i.$expr,c.params=i.$params}function AE(e,t){var n,r,i,a,u,s,f,c,l,d,h,p,g,m=rE(e),v=e.type===RW,y=e.from&&e.from.facet,b=e.layout||m===gW||m===pW,_=m===hW||b||y,x=e.overlap;i=bE(e.from,v,t),r=t.add(gB({key:i.key||(e.key?kM(e.key):void 0),pulse:i.pulse,clean:!v})),l=wM(r),r=a=t.add(hB({pulse:l})),r=t.add(xB({markdef:iE(e),interactive:aE(e.interactive,t),clip:tE(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:wM(r)})),d=wM(r),r=t.add(mB(LS(e.encode,e.type,m,e.style,t,{pulse:d}))),r.params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=oE(e,t);(n.metadata.generates||n.metadata.changes)&&o("Mark transforms should not generate new data."),n.params.pulse=wM(r),t.add(r=n)}),e.sort&&(r=t.add(NB({sort:t.compareRef(e.sort,!0),pulse:wM(r)}))),h=wM(r),(y||b)&&(b=t.add(DB({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:d,pulse:h})),p=wM(b)),u=t.add(dB({mark:d,pulse:p||h})),g=wM(u),v&&(_&&(n=t.operators,n.pop(),b&&n.pop()),t.pushState(h,p||g,l),y?SE(e,t,i):_?EE(e,t,i):ZE(e,t),t.popState(),_&&(b&&n.push(b),n.push(u))),x&&(r={method:x.method===!0?"parity":x.method,pulse:g},x.order&&(r.sort=t.compareRef({field:x.order})),x.bound&&(r.boundScale=t.scaleRef(x.bound.scale),r.boundOrient=x.bound.orient,r.boundTolerance=x.bound.tolerance),g=wM(t.add(MB(r)))),s=t.add(RB({pulse:g})),f=t.add(zB({pulse:wM(s)},void 0,t.parent())),null!=e.name&&(c=e.name,t.addData(c,new xE(t,a,s,f)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&o("Marks only support modify triggers."),OE(e,t,c)}))}function CE(e,t){var n,r,i,a,u,s,f,c,l,d=t.config.legend,h=e.encode||{},p=h.legend||{},g=p.name||void 0,m=p.interactive,v=p.style,y=fW.reduce(function(t,n){return t||e[n]},0);return y||o("Missing valid scale for legend."),u=RE(e,t.scaleType(y)),s={orient:IS("orient",e,d),title:null!=e.title,type:u},f=wM(t.add(hB(null,[s]))),p=PS({enter:zE(e,d),update:{offset:NS(IS("offset",e,d)),padding:NS(IS("padding",e,d)),titlePadding:NS(IS("titlePadding",e,d))}},p,cW),n={enter:{x:{value:0},y:{value:0}}},c=wM(t.add(_B(i={type:u,scale:t.scaleRef(y),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u===uW?(a=[VS(e,y,d,h.gradient),ZS(e,d,h.labels,c)],i.count=i.count||t.signalRef("max(2,2*floor(("+RM(BS(e,d))+")/100))")):u===sW?a=[XS(e,y,d,h.gradient,c),ZS(e,d,h.labels,c)]:(r=KS(e,d),a=[QS(e,d,h,c,RM(r.columns))],i.size=NE(e,t,a[0].marks)),a=[JS(MW,null,null,f,m,n,a,r)],s.title&&a.push(eE(e,d,h.title,f)),l=JS(wW,v,g,f,m,p,a),e.zindex&&(l.zindex=e.zindex),AE(l,t)}function RE(e,t){var n=e.type||oW;return e.type||1!==TE(e)||!e.fill&&!e.stroke||(n=QM(t)?uW:JM(t)?sW:oW),n!==uW?n:JM(t)?sW:uW}function TE(e){return fW.reduce(function(t,n){return t+(e[n]?1:0)},0)}function zE(e,t){var n={},r=DS(n,"fill",IS("fillColor",e,t))+DS(n,"stroke",IS("strokeColor",e,t))+DS(n,"strokeWidth",IS("strokeWidth",e,t))+DS(n,"cornerRadius",IS("cornerRadius",e,t))+DS(n,"strokeDash",t.strokeDash);return r?n:void 0}function NE(e,t,n){var r,i,a,o;return a=YS("strokeWidth",n[0].encode),i=e.size?'scale("'+e.size+'",datum)':YS("size",n[0].encode,t),r=DE(n[1].encode,t,rW),o="max(ceil(sqrt("+RM(i)+")+"+RM(a)+"),"+RM(r)+")",yM(o,t)}function DE(e,t,n){return YS("fontSize",e)||HS("fontSize",t,n)}function PE(e,t,n){return'item.anchor==="'+VB+'"?'+e+':item.anchor==="'+XB+'"?'+t+":"+n}function LE(e,t){e=f(e)?{text:e}:e;var n,r,i,a=t.config.title,o=z({},e.encode);return n={orient:IS("orient",e,a)},r=wM(t.add(hB(null,[n]))),o.name=e.name,o.interactive=e.interactive,i=qE(e,a,o,r),e.zindex&&(i.zindex=e.zindex),AE(i,t)}function qE(e,t,n,r){var i,a,o,u,s={value:0},f=e.text,c=IS("orient",e,t),l=IS("anchor",e,t),d=c===BB||c===UB?-1:1,h=c===UB||c===GB,p={group:h?"width":"height"},g={};return o={field:p,mult:{signal:FW}},u=d<0?s:h?{field:{group:"height"}}:{field:{group:"width"}},g.enter=i={opacity:s},DS(i,"fill",IS("color",e,t)),DS(i,"font",IS("font",e,t)),DS(i,"fontSize",IS("fontSize",e,t)),DS(i,"fontWeight",IS("fontWeight",e,t)),g.exit={opacity:s},g.update=a={opacity:{value:1},text:NS(f),anchor:NS(l),orient:NS(c),extent:{field:p},align:{signal:jW}},h?(a.x=o,a.y=u,a.angle=s,a.baseline={value:c===UB?GB:UB}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:GB}),DS(a,"offset",IS("offset",e,t)||0),DS(a,"frame",IS("frame",e,t)),DS(a,"angle",IS("angle",e,t)),DS(a,"baseline",IS("baseline",e,t)),DS(a,"limit",IS("limit",e,t)),FS(DW,CW,e.style||aW,null,r,g,n)}function $E(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(oE(e,t))}),e.on&&e.on.forEach(function(n){OE(n,t,e.name)}),t.addDataPipeline(e.name,jE(e,t,n))}function jE(e,t,n){var r,i,a,o,u,s=[],f=null,c=!1,l=!1;for(e.values?s.push(f=FE({$ingest:e.values,$format:e.format})):e.url?s.push(f=FE({$request:e.url,$format:e.format})):e.source&&(f=r=O(e.source).map(function(e){return wM(t.getData(e).output)}),s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,f||u.source||s.push(f=FE()),s.push(o),u.generates&&(l=!0),u.modifies&&!l&&(c=!0),u.source?f=o:u.changes&&(f=null);return r&&(a=r.length-1,s[0]=CB({derive:c,pulse:a?r:r[0]}),(c||a)&&s.splice(1,0,FE())),f||s.push(FE()),s.push(zB({})),s}function FE(e){var t=hB({},e);return t.metadata={source:!0},t}function IE(e,t){var n=t.config,r=e.orient,i=r===UB||r===GB?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===t.scaleType(e.scale)&&n.axisBand;return i||a||o?z({},n.axis,i,a,o):n.axis}function UE(e,t,n,r){var i,a,o,u,s,f=e.orient,c={value:0},l={};return l.enter=i={opacity:c},DS(i,"stroke",IS("domainColor",e,t)),DS(i,"strokeWidth",IS("domainWidth",e,t)),l.exit={opacity:c},l.update=a={opacity:{value:1
}},f===UB||f===GB?(o="x",s="y"):(o="y",s="x"),u=o+"2",i[s]=c,a[o]=i[o]=BE(e,0),a[u]=i[u]=BE(e,1),FS(zW,vW,null,null,r,l,n)}function BE(e,t){return{scale:e.scale,range:t}}function WE(e,t,n,r){var i,a,o,u,s,f,c,l,d=e.orient,h=e.gridScale,p=d===BB||d===UB?1:-1,g=p*e.offset||0,m={value:0},v={};return v.enter=i={opacity:m},DS(i,"stroke",IS("gridColor",e,t)),DS(i,"strokeWidth",IS("gridWidth",e,t)),DS(i,"strokeDash",IS("gridDash",e,t)),v.exit=a={opacity:m},v.update=o={},DS(o,"opacity",IS("gridOpacity",e,t)),u={scale:e.scale,field:nW,band:IS("bandPosition",e,t),round:IS("tickRound",e,t),extra:IS("tickExtra",e,t),offset:IS("tickOffset",e,t)},d===UB||d===GB?(s="x",f="y",l="height"):(s="y",f="x",l="width"),c=f+"2",o[s]=i[s]=a[s]=u,h?(i[f]={scale:h,range:0,mult:p,offset:g},o[c]=i[c]={scale:h,range:1,mult:p,offset:g}):(i[f]={value:g},o[c]=i[c]={signal:l,mult:p,offset:g}),FS(zW,yW,null,nW,r,v,n)}function GE(e,t,n,r,i){var a,o,u,s,f,c=e.orient,l=c===BB||c===UB?-1:1,d={value:0},h={};return h.enter=a={opacity:d},DS(a,"stroke",IS("tickColor",e,t)),DS(a,"strokeWidth",IS("tickWidth",e,t)),h.exit=o={opacity:d},h.update=u={opacity:{value:1}},s=NS(i),s.mult=l,f={scale:e.scale,field:nW,band:IS("bandPosition",e,t),round:IS("tickRound",e,t),extra:IS("tickExtra",e,t),offset:IS("tickOffset",e,t)},c===UB||c===GB?(u.y=a.y=d,u.y2=a.y2=s,u.x=a.x=o.x=f):(u.x=a.x=d,u.x2=a.x2=s,u.y=a.y=o.y=f),FS(zW,_W,null,nW,r,h,n)}function YE(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function HE(e,t,n,r,i){var a,o,u,s,f,c=e.orient,l=c===BB||c===UB?-1:1,d=e.scale,h=IS("labelBound",e,t),p=IS("labelFlush",e,t),g=null!=p&&p!==!1&&(p=+p)===p,m=+IS("labelFlushOffset",e,t),v=IS("labelOverlap",e,t),y={value:0},b={};return b.enter=a={opacity:y},DS(a,"angle",IS("labelAngle",e,t)),DS(a,"fill",IS("labelColor",e,t)),DS(a,"font",IS("labelFont",e,t)),DS(a,"fontSize",IS("labelFontSize",e,t)),DS(a,"fontWeight",IS("labelFontWeight",e,t)),DS(a,"limit",IS("labelLimit",e,t)),b.exit=o={opacity:y},b.update=u={opacity:{value:1},text:{field:JB}},s=NS(i),s.mult=l,s.offset=NS(IS("labelPadding",e,t)||0),s.offset.mult=l,f={scale:d,field:nW,band:.5,offset:IS("tickOffset",e,t)},c===UB||c===GB?(u.y=a.y=s,u.x=a.x=o.x=f,DS(u,"align",g?YE(d,p,'"left"','"right"','"center"'):"center"),g&&m&&DS(u,"dx",YE(d,p,-m,m,0)),DS(u,"baseline",c===UB?"bottom":"top")):(u.x=a.x=s,u.y=a.y=o.y=f,DS(u,"align",c===WB?"left":"right"),DS(u,"baseline",g?YE(d,p,'"bottom"','"top"','"middle"'):"middle"),g&&m&&DS(u,"dy",YE(d,p,m,-m,0))),e=FS(DW,bW,rW,nW,r,b,n),(v||h)&&(e.overlap={method:v,order:"datum.index",bound:h?{scale:d,orient:c,tolerance:+h}:null}),e}function VE(e,t,n,r){var i,a,o,u=e.orient,s=u===BB||u===UB?-1:1,f=u===UB||u===GB,c={};return c.enter=i={opacity:{value:0}},DS(i,"align",IS("titleAlign",e,t)),DS(i,"fill",IS("titleColor",e,t)),DS(i,"font",IS("titleFont",e,t)),DS(i,"fontSize",IS("titleFontSize",e,t)),DS(i,"fontWeight",IS("titleFontWeight",e,t)),DS(i,"limit",IS("titleLimit",e,t)),c.exit={opacity:{value:0}},c.update=a={opacity:{value:1},text:NS(e.title)},o={scale:e.scale,range:.5},f?(a.x=o,a.angle={value:0},a.baseline={value:u===UB?"bottom":"top"}):(a.y=o,a.angle={value:90*s},a.baseline={value:"bottom"}),DS(a,"angle",IS("titleAngle",e,t)),DS(a,"baseline",IS("titleBaseline",e,t)),!DS(a,"x",IS("titleX",e,t))&&f&&!jS("x",n)&&(c.enter.auto={value:!0}),!DS(a,"y",IS("titleY",e,t))&&!f&&!jS("y",n)&&(c.enter.auto={value:!0}),FS(DW,xW,iW,null,r,c,n)}function XE(e,t){var n,r,i,a,o,u,s=IE(e,t),f=e.encode||{},c=f.axis||{},l=c.name||void 0,d=c.interactive,h=c.style;return n={orient:e.orient,ticks:!!IS("ticks",e,s),labels:!!IS("labels",e,s),grid:!!IS("grid",e,s),domain:!!IS("domain",e,s),title:!!CM(e.title,!1)},r=wM(t.add(hB({},[n]))),c=PS({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:NS(CM(e.offset,0)),position:NS(CM(e.position,0)),titlePadding:NS(IS("titlePadding",e,s)),minExtent:NS(IS("minExtent",e,s)),maxExtent:NS(IS("maxExtent",e,s))}},f.axis,cW),i=wM(t.add(lB({scale:t.scaleRef(e.scale),extra:t.property(IS("tickExtra",e,s)),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push(WE(e,s,f.grid,i)),n.ticks&&(a=IS("tickSize",e,s),u.push(GE(e,s,f.ticks,i,a))),n.labels&&(a=n.ticks?a:0,u.push(HE(e,s,f.labels,i,a))),n.domain&&u.push(UE(e,s,f.domain,r)),n.title&&u.push(VE(e,s,f.title,r)),o=JS(mW,h,l,r,d,c,u),e.zindex&&(o.zindex=e.zindex),AE(o,t)}function ZE(e,t,n){var r=O(e.signals),i=O(e.scales);return n||r.forEach(function(e){Cx(e,t)}),O(e.projections).forEach(function(e){vS(e,t)}),i.forEach(function(e){eS(e,t)}),O(e.data).forEach(function(e){$E(e,t)}),i.forEach(function(e){tS(e,t)}),r.forEach(function(e){VM(e,t)}),O(e.axes).forEach(function(e){XE(e,t)}),O(e.marks).forEach(function(e){AE(e,t)}),O(e.legends).forEach(function(e){CE(e,t)}),e.title&&LE(e.title,t),t.parseLambdas(),t}function JE(e,t){var n,r,i,a,o,u=t.config;return t.background=e.background||u.background,t.eventConfig=u.events,o=wM(t.root=t.add(xM())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",Sx(e.padding,u)),t.addSignal("autosize",Mx(e.autosize,u)),O(e.signals).forEach(function(e){IW[e.name]||Cx(e,t)}),r=t.add(hB()),i=PS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(mB(LS(i,RW,pW,e.style,t,{pulse:wM(r)}))),a=t.add(DB({layout:t.objectProperty(e.layout),legendMargin:u.legendMargin,autosize:t.signalRef("autosize"),mark:o,pulse:wM(i)})),t.operators.pop(),t.pushState(wM(i),wM(a),null),ZE(e,t,!0),t.operators.push(a),n=t.add(dB({mark:o,pulse:wM(a)})),n=t.add(RB({pulse:wM(n)})),n=t.add(zB({pulse:wM(n)})),t.addData("root",new xE(t,r,r,n)),t}function QE(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function KE(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function eO(e){return(eA(e)?tO:nO)(e)}function tO(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(r>0?",":"")+(s(t)?t.signal||eO(t):c(t));return n+"]"}function nO(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+c(t)+":"+(s(n)?n.signal||eO(n):c(n));return r+"}"}function rO(e){var t=iO();return(e||[]).forEach(function(e){var n,r,i;if(e)for(n in e)if("style"===n){i=t.style||(t.style={});for(n in e.style)i[n]=z(i[n]||{},e.style[n])}else r=e[n],t[n]=s(r)&&!eA(r)?z(s(t[n])?t[n]:{},r):r}),t}function iO(){return{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:YW},area:{fill:YW},image:null,line:{stroke:YW,strokeWidth:GW},path:{stroke:YW},rect:{fill:YW},rule:{stroke:HW},shape:{stroke:YW},symbol:{fill:YW,size:64},text:{fill:HW,font:BW,fontSize:11},style:{"guide-label":{fill:HW,font:BW,fontSize:10},"guide-title":{fill:HW,font:BW,fontSize:11,fontWeight:"bold"},"group-title":{fill:HW,font:BW,fontSize:13,fontWeight:"bold"},point:{size:WW,strokeWidth:GW,shape:"circle"},circle:{size:WW,strokeWidth:GW},square:{size:WW,strokeWidth:GW,shape:"square"},cell:{fill:"transparent",stroke:XW}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:VW,grid:!1,gridWidth:1,gridColor:XW,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:VW,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:XW,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:VW,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function aO(e,t){return s(e)||o("Input Vega specification must be an object."),JE(e,new QE(rO([t,e.config]))).toRuntime()}function oO(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function uO(e,t){return oO(["_"],e,t)}function sO(e,t){return oO(["datum","_"],e,t)}function fO(e,t){return oO(["event"],e,t)}function cO(e,t){return oO(["_","event"],e,t)}function lO(e,t){return oO(["item","_"],e,t)}function dO(e,t,n){n=n||{};var r,i;for(r in e)i=e[r],i&&i.$expr&&i.$params&&dO(i.$params,t,n),n[r]=eA(i)?i.map(function(e){return hO(e,t)}):hO(i,t);return n}function hO(e,t){if(!e||!s(e))return e;for(var n,r=0,i=ZW.length;r<i;++r)if(n=ZW[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function pO(e,t){return t.get(e.$ref)||o("Operator not defined: "+e.$ref)}function gO(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=r(sO(e.$expr,t),e.$fields,e.$name))}function mO(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=F(e.$key,e.$flat))}function vO(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=l(e.$field,e.$name))}function yO(e,t){var n="c:"+e.$compare+"_"+e.$order,r=O(e.$compare).map(function(e){return e&&e.$tupleid?K:e});return t.fn[n]||(t.fn[n]=C(r,e.$order))}function bO(e,t){var n,i,a=e.$encode,o={};for(n in a)i=a[n],o[n]=r(lO(i.$expr,t),i.$fields),o[n].output=i.$output;return o}function _O(e,t){return t}function xO(e,t){var n=e.$subflow;return function(e,r,i){var a=RO(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}function wO(){return K}function kO(e){return(e+"").toLowerCase()}function MO(e){return"operator"===kO(e)}function SO(e){return"collect"===kO(e)}function EO(e,t){MO(e.type)||!e.type?t.operator(e,e.update?uO(e.update,t):null):t.transform(e,e.type)}function OO(e,t){var n,r;e.params&&((n=t.get(e.id))||o("Invalid operator id: "+e.id),r=dO(e.params,t),t.dataflow.connect(n,n.parameters(r)))}function AO(e,t){var n,r=null!=e.filter?fO(e.filter,t):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,r):e.merge&&(n=e.merge.map(t.get.bind(t)),i=n[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&o("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function CO(e,t){var n=s(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,u=void 0;r||o("Source not defined: "+e.source),i=e.target&&e.target.$expr?fO(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(u=dO(a.$params,t)),a=cO(a.$expr,t)),t.update(e,r,i,a,u)}function RO(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){EO(e,t)}),n.forEach(function(e){OO(e,t)}),(e.streams||[]).forEach(function(e){AO(e,t)}),(e.updates||[]).forEach(function(e){CO(e,t)}),t.resolve()}function TO(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n}function zO(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],JW)}),Object.keys(r||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(oA).insert(r[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})}function NO(e,t,n){return new DO(e,t,n)}function DO(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function PO(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function LO(e,t,n){var r=n||PU;return RO(t,NO(e,LC,r))}function qO(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===eG?r.left+r.right:0)}function $O(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===eG?r.top+r.bottom:0)}function jO(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n[QW],i=n[KW],a=n[eG];e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=qO(e,n.size),t()},{size:r}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=$O(e,n.size),t()},{size:i});var o=e.add(null,t,{pad:a});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}function FO(e,t,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(QW,n,tG),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(KW,r,tG),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)}function IO(e){return this._runtime.getState(e||{data:UO,signals:BO,recurse:!0})}function UO(e,t){return t.modified&&eA(t.input.value)&&e.indexOf("_:vega:_")}function BO(e,t){return!("parent"===e||t instanceof LC.proxy)}function WO(e){var t=this;return t.runAfter(function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0})}),this}function GO(e,t){function n(t){e({timestamp:Date.now(),elapsed:t})}this._timers.push(lv(n,t))}function YO(e,t,n,r){var i=e.element();i&&i.setAttribute("title",HO(r))}function HO(e){return null==e?"":eA(e)?XO(e):s(e)&&!q(e)?VO(e):e+""}function VO(e){return Object.keys(e).map(function(t){var n=e[t];return t+": "+(eA(n)?XO(n):ZO(n))}).join("\n")}function XO(e){return"["+e.map(ZO).join(", ")+"]"}function ZO(e){return eA(e)?"[]":s(e)&&!q(e)?"{}":e}function JO(e,t){var n=this;t=t||{},In.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||sN.Canvas,n._scenegraph=new Ku;var r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||YO,n._redraw=!0,n._handler=(new ls).scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i=LO(n,e,t.functions);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:z({},e)}}),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._background=i.background||null,n._eventConfig=J_(i.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=qO(n,n._width),n._viewHeight=$O(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,jO(n),$_(n)}function QO(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:o("Unrecognized signal name: "+c(t))}function KO(e,t){var n=e._targets||[],r=n.filter(function(e){var n=e._update;return n&&n.handler===t});return r.length?r[0]:null}var eA=Array.isArray,tA=[],nA=l("id"),rA=r(function(e){return e},tA,"identity"),iA=r(function(){return 0},tA,"zero"),aA=r(function(){return 1},tA,"one"),oA=r(function(){return!0},tA,"true"),uA=r(function(){return!1},tA,"false"),sA=0,fA=1,cA=2,lA=3,dA=4,hA={},pA=Symbol("vega_id"),gA=1,mA="_:mod:_",vA=ue.prototype;vA.set=function(e,t,n,r){var i=this,a=i[e],o=i[mA];return null!=t&&t>=0?(a[t]!==n||r)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||r)&&(i[e]=n,o[e]=eA(n)?1+n.length:-1),i},vA.modified=function(e,t){var n,r=this[mA];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(eA(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&t>=0?t+1<r[e]||!!r[t+":"+e]:!!r[e]},vA.clear=function(){return this[mA]={},this};var yA=0,bA="pulse",_A=new ue,xA=1,wA=2,kA=se.prototype;kA.targets=function(){return this._targets||(this._targets=J(nA))},kA.set=function(e){return this.value!==e?(this.value=e,1):0},kA.skip=fe(xA),kA.modified=fe(wA),kA.parameters=function(e,t){function n(e,n,r){r instanceof se?(r!==s&&(t&&r.targets().add(s),l.push(r)),c.push({op:r,name:e,index:n})):f.set(e,n,r)}t=t!==!1;var r,i,a,u,s=this,f=s._argval=s._argval||new ue,c=s._argops=s._argops||[],l=[];for(r in e)if(i=e[r],r===bA)O(i).forEach(function(e){e instanceof se?e!==s&&(e.targets().add(s),l.push(e)):o("Pulse parameters must be operator instances.")}),s.source=i;else if(eA(i))for(f.set(r,-1,Array(a=i.length)),u=0;u<a;++u)n(r,u,i[u]);else n(r,-1,i);return this.marshall().clear(),l},kA.marshall=function(e){var t,n,r,i,a,o=this._argval||_A,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)t=u[n],i=t.op,a=i.modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);return o},kA.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},kA.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,this.pulse=t,t||e};var MA=0,SA=de.prototype;SA._filter=oA,SA._apply=rA,SA.targets=function(){return this._targets||(this._targets=J(nA))},SA.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},SA.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},SA.filter=function(e){var t=he(e);return this.targets().add(t),t},SA.apply=function(e){var t=he(null,e);return this.targets().add(t),t},SA.merge=function(){var e=he();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},SA.throttle=function(e){var t=-1;return this.filter(function(){var n=Date.now();return n-t>e?(t=n,1):0})},SA.debounce=function(e){var t=he();return this.targets().add(he(null,null,T(e,function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},SA.between=function(e,t){var n=!1;return e.targets().add(he(null,null,function(){n=!0})),t.targets().add(he(null,null,function(){n=!1})),this.filter(function(){return n})};var EA=/^([A-Za-z]+:)?\/\//,OA="file://",AA={boolean:W,integer:g,number:g,date:Y,string:H,unknown:rA},CA=[Ee,Ce,Ae,Oe],RA=["boolean","integer","number","date"],TA={},zA={},NA=34,DA=10,PA=13,LA=(Ne(","),Ne("\t"),{dsv:Pe,csv:De(","),tsv:De("\t"),json:qe,topojson:Xe}),qA=new Date,$A=new Date,jA=Je(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});jA.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Je(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):jA:null};var FA=1e3,IA=6e4,UA=36e5,BA=864e5,WA=6048e5,GA=Je(function(e){e.setTime(Math.floor(e/FA)*FA)},function(e,t){e.setTime(+e+t*FA)},function(e,t){return(t-e)/FA},function(e){return e.getUTCSeconds()}),YA=Je(function(e){e.setTime(Math.floor(e/IA)*IA)},function(e,t){e.setTime(+e+t*IA)},function(e,t){return(t-e)/IA},function(e){return e.getMinutes()}),HA=Je(function(e){var t=e.getTimezoneOffset()*IA%UA;t<0&&(t+=UA),e.setTime(Math.floor((+e-t)/UA)*UA+t)},function(e,t){e.setTime(+e+t*UA)},function(e,t){return(t-e)/UA},function(e){return e.getHours()}),VA=Je(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*IA)/BA},function(e){return e.getDate()-1}),XA=Qe(0),ZA=Qe(1),JA=(Qe(2),Qe(3),Qe(4)),QA=(Qe(5),Qe(6),Je(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),KA=Je(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});KA.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Je(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var eC=Je(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*IA)},function(e,t){return(t-e)/IA},function(e){return e.getUTCMinutes()}),tC=Je(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*UA)},function(e,t){return(t-e)/UA},function(e){return e.getUTCHours()}),nC=Je(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/BA},function(e){return e.getUTCDate()-1}),rC=Ke(0),iC=Ke(1),aC=(Ke(2),Ke(3),Ke(4)),oC=(Ke(5),Ke(6),Je(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()})),uC=Je(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});uC.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Je(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var sC,fC,cC,lC,dC,hC={"-":"",_:" ",0:"0"},pC=/^\s*\d+/,gC=/^%/,mC=/[\\^$*+?|[\]().{}]/g;ln({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var vC="%Y-%m-%dT%H:%M:%S.%LZ",yC=(Date.prototype.toISOString?dn:lC(vC),+new Date("2000-01-01T00:00:00.000Z")?hn:dC(vC),{skip:!0}),bC={},_C=1,xC=2,wC=4,kC=_C|xC,MC=_C|wC,SC=_C|xC|wC,EC=8,OC=16,AC=32,CC=64,RC=Mn.prototype;RC.StopPropagation=bC,RC.ADD=_C,RC.REM=xC,RC.MOD=wC,RC.ADD_REM=kC,RC.ADD_MOD=MC,RC.ALL=SC,RC.REFLOW=EC,RC.SOURCE=OC,RC.NO_SOURCE=AC,RC.NO_FIELDS=CC,RC.fork=function(e){return new Mn(this.dataflow).init(this,e)},RC.clone=function(){var e=this.fork(SC);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(SC|OC)},RC.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?(e=new Mn(this.dataflow).init(this),e.add=e.source,e):e},RC.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||t&CC||(n.fields=e.fields),t&_C?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&xC?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&wC?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&AC?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},RC.runAfter=function(e){this.dataflow.runAfter(e)},RC.changed=function(e){var t=e||SC;return t&_C&&this.add.length||t&xC&&this.rem.length||t&wC&&this.mod.length},RC.reflow=function(e){if(e)return this.fork(SC).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(wC,On(this,_C))),this},RC.modifies=function(e){var t=O(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},RC.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?eA(e)?e.some(function(e){return t[e]}):t[e]:!!t)},RC.filter=function(e,t){var n=this;return e&_C&&(n.addF=Sn(n.addF,t)),e&xC&&(n.remF=Sn(n.remF,t)),e&wC&&(n.modF=Sn(n.modF,t)),e&OC&&(n.srcF=Sn(n.srcF,t)),n},RC.materialize=function(e){e=e||SC;var t=this;return e&_C&&t.addF&&(t.add=En(t.add,t.addF),t.addF=null),e&xC&&t.remF&&(t.rem=En(t.rem,t.remF),t.remF=null),e&wC&&t.modF&&(t.mod=En(t.mod,t.modF),t.modF=null),e&OC&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},RC.visit=function(e,t){var n,r,i=this,a=t;return e&OC?(Z(i.source,i.srcF,a),i):(e&_C&&Z(i.add,i.addF,a),e&xC&&Z(i.rem,i.remF,a),e&wC&&Z(i.mod,i.modF,a),e&EC&&(n=i.source)&&(r=i.add.length+i.mod.length,r===n.length||(r?Z(n,On(i,MC),a):Z(n,i.srcF,a))),i)};var TC=P(An,Mn);TC.fork=function(e){var t=new Mn(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,function(e){return t.add.push(e)}),e&t.REM&&this.visit(t.REM,function(e){return t.rem.push(e)}),e&t.MOD&&this.visit(t.MOD,function(e){return t.mod.push(e)})),t},TC.changed=function(e){return this.changes&e},TC.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?eA(e)?e.some(function(e){return n[e]}):n[e]:0},TC.filter=function(){o("MultiPulse does not support filtering.")},TC.materialize=function(){o("MultiPulse does not support materialization.")},TC.visit=function(e,t){var n=this,r=n.pulses,i=r.length,a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n};var zC={skip:!1,force:!1},NC=$n.prototype;NC.size=function(){return this.nodes.length},NC.clear=function(){return this.nodes=[],this},NC.peek=function(){return this.nodes[0]},NC.push=function(e){var t=this.nodes;return t.push(e),jn(t,0,t.length-1,this.cmp)},NC.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,Fn(t,0,this.cmp)):e=n,e},NC.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,Fn(t,0,this.cmp),n},NC.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,Fn(t,0,this.cmp)),e};var DC=In.prototype;DC.stamp=function(){return this._clock},DC.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},DC.cleanThreshold=1e4,DC.add=ce,DC.connect=le,DC.rank=wn,DC.rerank=kn,DC.pulse=qn,DC.touch=Pn,DC.update=Ln,DC.changeset=oe,DC.ingest=mn,DC.request=yn,DC.events=pe,DC.on=bn,DC.run=Cn,DC.runAsync=Tn,DC.runAfter=zn,DC._enqueue=Nn,DC._getPulse=Dn,DC.error=Un("error"),DC.warn=Un("warn"),DC.info=Un("info"),DC.debug=Un("debug"),DC.logLevel=Un("level");var PC=P(Bn,se);PC.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t},PC.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},PC.transform=function(){};var LC={},qC={values:Zn({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Zn({name:"count",set:"cell.num"}),__count__:Zn({name:"count",set:"this.missing + this.valid"}),missing:Zn({name:"missing",set:"this.missing"}),valid:Zn({name:"valid",set:"this.valid"}),sum:Zn({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Zn({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:Zn({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:Zn({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:Zn({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:Zn({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:Zn({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:Zn({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:Zn({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Zn({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Zn({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Zn({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Zn({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Zn({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Zn({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Zn({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Zn({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Zn({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},$C=Object.keys(qC);t.random=Math.random;var jC=ar(ir),FC=jC.right,IC=jC.left,UC=Math.sqrt(50),BC=Math.sqrt(10),WC=Math.sqrt(2),GC=Tr.prototype;GC.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},GC.add=function(e){this._add.push(e)},GC.rem=function(e){this._rem.push(e)},GC.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(e=0;e<u;++e)f[a(i[e])]=1;for(e=0,t=0;e<o;++e)f[a(n=r[e])]?f[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},GC.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;--r>=0;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},GC.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=N(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},GC.argmin=function(e){return this.extent(e)[0]||{}},GC.argmax=function(e){return this.extent(e)[1]||{}},GC.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):+(1/0)},GC.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-(1/0)},GC.quartile=function(e){return this._get===e&&this._q||(this._q=Mr(this.values(),e),this._get=e),this._q},GC.q1=function(e){return this.quartile(e)[0]},GC.q2=function(e){return this.quartile(e)[1]},GC.q3=function(e){return this.quartile(e)[2]},GC.ci=function(e){return this._get===e&&this._ci||(this._ci=kr(this.values(),1e3,.05,e),this._get=e),this._ci},GC.ci0=function(e){return this.ci(e)[0]},GC.ci1=function(e){return this.ci(e)[1]},zr.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:$C},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",
null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var YC=P(zr,Bn);YC.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),i.modifies(this._outputs),r._drop=e.drop!==!1,e.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},YC.cross=function(){function e(e){var t,n,r,u;for(t in e)for(r=e[t].tuple,n=0;n<o;++n)a[n][u=r[i[n]]]=u}function t(e,u,s){var f,c,l=i[s],d=a[s++];for(f in d)u[l]=d[f],c=e?e+"|"+f:f,s<o?t(c,u,s):r[c]||n.cell(c,u)}var n=this,r=n.value,i=n._dnames,a=i.map(function(){return{}}),o=i.length;e(n._prev),e(r),t("",{},0)},YC.init=function(e){function t(e){for(var t,r=O(a(e)),i=0,o=r.length;i<o;++i)u[t=r[i]]||(u[t]=1,n.push(t))}var n=this._inputs=[],r=this._outputs=[],u={};this._dims=O(e.groupby),this._dnames=this._dims.map(function(e){var n=i(e);return t(e),r.push(n),n}),this.cellkey=e.key?e.key:Hn(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var s,f,c,l,d,h,p=e.fields||[null],g=e.ops||["count"],m=e.as||[],v=p.length,y={};for(v!==g.length&&o("Unmatched number of fields and aggregate ops."),h=0;h<v;++h)s=p[h],f=g[h],null==s&&"count"!==f&&o("Null aggregate field specified."),l=i(s),d=Vn(f,l,m[h]),r.push(d),"count"!==f?(c=y[l],c||(t(s),c=y[l]=[],c.field=s,this._measures.push(c)),"count"!==f&&(this._countOnly=!1),c.push(Xn(f,d))):this._counts.push(d);return this._measures=this._measures.map(function(e){return Kn(e,e.field)}),{}},YC.cellkey=Hn(),YC.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},YC.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new Tr),n},YC.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?ie(t.tuple,o):te(o)},YC.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),t=a.agg,n=0,r=t.length;n<r;++n)t[n].add(t[n].get(e),e)},YC.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),t=a.agg,n=0,r=t.length;n<r;++n)t[n].rem(t[n].get(e),e)},YC.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(t=e.agg,n=0,r=t.length;n<r;++n)t[n].set(i);return i},YC.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=e.add,c=e.rem,l=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||c.push(t.tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)t=o[r],(0===t.num&&s?c:l).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e},Nr.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var HC=P(Nr,Bn);HC.transform=function(e,t){var n,r=this._bins(e),i=r.start,o=r.step,u=e.as||["bin0","bin1"],s=u[0],f=u[1];return e.modified()?(t=t.reflow(!0),n=t.SOURCE):n=t.modified(a(e.field))?t.ADD_MOD:t.ADD,t.visit(n,function(e){var t=r(e);e[s]=t,e[f]=null==t?null:i+o*(1+(t-i)/o)}),t.modifies(u)},HC._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,o=e.field,u=er(e),s=u.start,f=u.stop,c=u.step;null!=(t=e.anchor)&&(n=t-(s+c*Math.floor((t-s)/c)),s+=n,f+=n);var l=function(e){var t=o(e);return null==t?null:(t=Math.max(s,Math.min(+t,f-c)),s+c*Math.floor((t-s)/c))};return l.start=s,l.stop=f,l.step=c,this.value=r(l,a(o),e.name||"bin_"+i(o))},Pr.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};var VC=P(Pr,Bn);VC.transform=function(e,t){var n=t.fork(t.ALL),r=Dr(K,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),t.source&&t.source.root&&(this.value.root=t.source.root),n},P(Lr,se),$r.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var XC=P($r,Bn);XC.transform=function(e,t){function n(t){return function(n){for(var r,i=jr(u(n),e.case,a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],f=n(function(e){i[e]=1+(i[e]||0)}),c=n(function(e){i[e]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,c)),this._finish(t,s)},XC._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},XC._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],f=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=te({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(t)},Fr.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};var ZC=P(Fr,Bn);ZC.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1],u=!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");return u?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=Ir(r,a,o,e.filter||oA)):n.mod=r,n.source=this.value,n.modifies(i)};var JC={kde:Or,mixture:Cr,normal:Er,uniform:Rr},QC="distributions",KC="function",eR="field",tR=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],nR={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:tR},{name:"weights",type:"number",array:!0}]};Br.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:tR.concat(nR)},{name:"as",type:"string",array:!0,default:["value","density"]}]};var rR=P(Br,Bn);rR.transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=Ur(e.distribution,Wr(t)),i=e.method||"pdf";"pdf"!==i&&"cdf"!==i&&o("Invalid density method: "+i),e.extent||r.data||o("Missing density extent parameter."),i=r[i];var a=e.as||["value","density"],u=e.extent||fr(r.data()),s=(u[1]-u[0])/(e.steps||100),f=cr(u[0],u[1]+s/2,s).map(function(e){var t={};return t[a[0]]=e,t[a[1]]=i(e),te(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n},Gr.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};var iR=P(Gr,Bn);iR.transform=function(e,t){var n,r=this.value,i=e.field,a=r[0],o=r[1],u=t.ADD;n=t.changed()||t.modified(i.fields)||e.modified("field"),n&&(u=t.SOURCE,a=+(1/0),o=-(1/0)),t.visit(u,function(e){var t=i(e);null!=t&&(t=+t,t<a&&(a=t),t>o&&(o=t))}),this.value=[a,o]};var aR=P(Yr,se);aR.connect=function(e){return this.targets().add(e),e.source=this},aR.add=function(e){this.value.add.push(e)},aR.rem=function(e){this.value.rem.push(e)},aR.mod=function(e){this.value.mod.push(e)},aR.init=function(e){this.value.init(e,e.NO_SOURCE)},aR.evaluate=function(){return this.value};var oR=P(Hr,Bn);oR.activate=function(e){this._targets[this._targets.active++]=e},oR.subflow=function(e,t,n,r){var i,a,o=this.value,u=o.hasOwnProperty(e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,i=n.dataflow,u=i.add(new Yr(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},oR.transform=function(e,t){function n(e){return i.subflow(e,o,t)}var r=t.dataflow,i=this,a=e.key,o=e.subflow,u=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=K(e),r=u.get(t);void 0!==r&&(u.delete(t),n(r).rem(e))}),t.visit(t.ADD,function(e){var t=a(e);u.set(K(e),t),n(t).add(e)}),s||t.modified(a.fields)?t.visit(t.MOD,function(e){var t=K(e),r=u.get(t),i=a(e);r===i?n(i).mod(e):(u.set(t,i),n(r).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(u.get(K(e))).mod(e)}),s&&t.visit(t.REFLOW,function(e){var t=K(e),r=u.get(t),i=a(e);r!==i&&(u.set(t,i),n(r).rem(e),n(i).add(e))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),t},P(Vr,se),Zr.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};var uR=P(Zr,Bn);uR.transform=function(e,t){function n(t){var n=K(t),r=f(t,e),a=i.get(n);r&&a?(i.delete(n),o.push(t)):r||a?c&&r&&!a&&s.push(t):(i.set(n,1),u.push(t))}var r=t.dataflow,i=this.value,a=t.fork(),o=a.add,u=a.rem,s=a.mod,f=e.expr,c=!0;return t.visit(t.REM,function(e){var t=K(e);i.has(t)?i.delete(t):u.push(e)}),t.visit(t.ADD,function(t){f(t,e)?o.push(t):i.set(K(t),1)}),t.visit(t.MOD,n),e.modified()&&(c=!1,t.visit(t.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},Qr.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]};var sR=P(Qr,Bn);sR.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=Jr(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,o,u,s=r.map(function(t){return t(e)}),f=s.reduce(function(e,t){return Math.max(e,t.length)},0),c=0;c<f;++c){for(o=ne(e),t=0;t<a;++t)o[i[t]]=null==(u=s[t][c])?null:u;n.add.push(o)}}),this.value=n.source=n.add,n.modifies(i)},Kr.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};var fR=P(Kr,Bn);fR.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=r.map(i),o=e.as||["key","value"],u=o[0],s=o[1],f=r.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,i=0;i<f;++i)t=ne(e),t[u]=a[i],t[s]=r[i](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(o)},ei.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};var cR=P(ei,Bn);cR.transform=function(e,t){function n(t){t[i]=r(t,e)}var r=e.expr,i=e.as,a=e.modified(),o=e.initonly?t.ADD:a?t.SOURCE:t.modified(r.fields)?t.ADD_MOD:t.ADD;return a&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,n)};var lR=P(ti,Bn);lR.transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(u>0){for(n=[];--u>=0;)n.push(i=te(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var dR={value:"value",median:yr,mean:vr,min:_r,max:mr},hR=[];ni.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};var pR=P(ni,Bn);pR.transform=function(e,t){var n,r,a,o,u,s,f,c,l,d,h=t.fork(t.ALL),p=ri(e),g=ii(e),m=i(e.field),v=i(e.key),y=(e.groupby||[]).map(i),b=ai(t.source,e.groupby,e.key,e.keyvals),_=[],x=this.value,w=b.domain.length;for(u=0,c=b.length;u<c;++u)for(n=b[u],a=n.values,r=NaN,f=0;f<w;++f)if(null==n[f]){for(o=b.domain[f],d={_impute:!0},s=0,l=a.length;s<l;++s)d[y[s]]=a[s];d[v]=o,d[m]=isNaN(r)?r=p(n,g):r,_.push(te(d))}return _.length&&(h.add=h.materialize(h.ADD).add.concat(_)),x.length&&(h.rem=h.materialize(h.REM).rem.concat(x)),this.value=_,h},oi.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:$C},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var gR=P(oi,zr);gR.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(n=r.value=r.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),r.changes(),t.visit(t.SOURCE,function(e){z(e,n[r.cellkey(e)].tuple)}),t.reflow(i).modifies(this._outputs)},gR.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},P(ui,se),fi.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};var mR=P(fi,Bn);mR.transform=function(e,t){var n,r,a,u=t,s=e.as,f=e.fields,c=e.index,l=e.values,d=null==e.default?null:e.default,h=e.modified(),p=h?t.SOURCE:t.ADD,g=f.length;return l?(r=l.length,g>1&&!s&&o('Multi-field lookup requires explicit "as" parameter.'),s&&s.length!==g*r&&o('The "as" parameter has too few output field names.'),s=s||l.map(i),n=function(e){for(var t,n,i=0,a=0;i<g;++i)if(n=c.get(f[i](e)),null==n)for(t=0;t<r;++t,++a)e[s[a]]=d;else for(t=0;t<r;++t,++a)e[s[a]]=l[t](n)}):(s||o("Missing output field names."),n=function(e){for(var t,n=0;n<g;++n)t=c.get(f[n](e)),e[s[n]]=null==t?d:t}),h?u=t.reflow(!0):(a=f.some(function(e){return t.modified(e.fields)}),p|=a?t.MOD:0),t.visit(p,n),u.modifies(s)},P(ci,se),P(di,se),P(pi,Bn),pi.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},gi.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:$C,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var vR=P(gi,zr);vR._transform=vR.transform,vR.transform=function(e,t){return this._transform(mi(e,t),t)};var yR=P(bi,Hr);yR.transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(a(i)))&&o("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.mod(e)}):a.mod(e)}),t.visit(t.ADD,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.add(te(e))}):a.add(e)}),t.visit(t.REM,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.rem(e)}):a.rem(e)}),t},_i.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};var bR=P(_i,Bn);bR.transform=function(e,t){var n,r,i=e.fields,a=Jr(e.fields,e.as||[]),o=i?function(e,t){return xi(e,t,i,a)}:re;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=K(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=o(e,te({}));r[K(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(o(e,r[K(e)]))}),n};var _R=P(wi,Bn);_R.transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var xR=P(ki,Bn);xR.transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=K(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=ne(e);r[K(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(re(e,r[K(e)]))})),n},Mi.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};var wR=P(Mi,Bn);wR.transform=function(e,n){function r(e){var n,r;u.length<o?u.push(e):(r=~~((s+1)*t.random()),r<u.length&&r>=f&&(n=u[r],c[K(n)]&&i.rem.push(n),u[r]=e)),++s}var i=n.fork(n.NO_SOURCE),a=e.modified("size"),o=e.size,u=this.value,s=this.count,f=0,c=u.reduce(function(e,t){return e[K(t)]=1,e},{});if(n.rem.length&&(n.visit(n.REM,function(e){var t=K(e);c[t]&&(c[t]=-1,i.rem.push(e)),--s}),u=u.filter(function(e){return c[K(e)]!==-1})),(n.rem.length||a)&&u.length<o&&n.source&&(f=s=u.length,n.visit(n.SOURCE,function(e){c[K(e)]||r(e)}),f=-1),a&&u.length>o){for(var l=0,d=u.length-o;l<d;++l)c[K(u[l])]=-1,i.rem.push(u[l]);u=u.slice(d)}return n.mod.length&&n.visit(n.MOD,function(e){c[K(e)]&&i.mod.push(e)}),n.add.length&&n.visit(n.ADD,r),(n.add.length||f<0)&&(i.add=u.filter(function(e){return!c[K(e)]})),this.count=s,this.value=i.source=u,i},Si.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]};var kR=P(Si,Bn);kR.transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=cr(e.start,e.stop,e.step||1).map(te),n.add=t.add.concat(this.value),n}};var MR=P(Ei,Bn);MR.transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var SR=P(Oi,Bn);SR.transform=function(e,t){function n(e){a.set(i(e),e)}var r=t.dataflow,i=e.field,a=this.value,o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){a.delete(i(e))}),t.visit(t.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),t.fork()};var ER=P(Ai,Bn);ER.transform=function(e,t){var n=!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields);n&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var OR={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=OR.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){t=+t,t>0||o("ntile num must be greater than zero.");var n=OR.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return t=+t,t>0||o("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},AR=Object.keys(OR),CR=Ri.prototype;CR.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},CR.update=function(e,t){var n,r=this,i=r.cell,a=r.windows,o=e.data,u=a&&a.length;if(i){for(n=e.p0;n<e.i0;++n)i.rem(o[n]);for(n=e.p1;n<e.i1;++n)i.add(o[n]);i.set(t)}for(n=0;n<u;++n)a[n].update(e,t)},zi.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:AR.concat($C)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var RR=P(zi,Bn);RR.transform=function(e,t){function n(e){return a.group(s(e))}var r,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,o&&!u||(o=a.state=new Ri(e));var s=Hn(e.groupby);for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){n(e).add(e)})):(t.visit(t.REM,function(e){n(e).remove(e)}),t.visit(t.ADD,function(e){n(e).add(e)})),r=0,i=a._mlen;r<i;++r)Ni(a._mods[r],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},RR.group=function(e){var t=this,n=t.value[e];return n||(n=t.value[e]=Dr(K),n.stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var TR=Object.freeze({aggregate:zr,bin:Nr,collect:Pr,compare:Lr,countpattern:$r,cross:Fr,density:Br,extent:Gr,facet:Hr,field:Vr,filter:Zr,flatten:Qr,fold:Kr,formula:ei,generate:ti,impute:ni,joinaggregate:oi,key:ui,lookup:fi,multiextent:ci,multivalues:di,params:pi,pivot:gi,prefacet:bi,project:_i,proxy:wi,relay:ki,sample:Mi,sequence:Si,sieve:Ei,subflow:Yr,tupleindex:Oi,values:Ai,window:zi}),zR="top",NR="left",DR="right",PR="bottom",LR="top-left",qR="top-right",$R="bottom-left",jR="bottom-right",FR="start",IR="end",UR="group",BR="axis",WR="title",GR="frame",YR="scope",HR="legend",VR="row-header",XR="row-footer",ZR="row-title",JR="column-header",QR="column-footer",KR="column-title",eT="padding",tT="symbol",nT="fit",rT="fit-x",iT="fit-y",aT="pad",oT="none",uT="all",sT="each",fT="flush",cT="column",lT="row",dT=Li.prototype;dT.clone=function(){return new Li(this)},dT.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},dT.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},dT.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},dT.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},dT.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},dT.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},dT.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},dT.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,u=this.x1,s=this.x2,f=this.y1,c=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*c+a,i*u+r*c+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*c+a,i*s+r*c+o)},dT.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},dT.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},dT.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},dT.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},dT.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},dT.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},dT.width=function(){return this.x2-this.x1},dT.height=function(){return this.y2-this.y1};var hT=0;P(ji,$i);var pT;["canvas","canvas-prebuilt"].some(function(e){try{pT=n(29)(e),"function"!=typeof pT&&(pT=null)}catch(e){pT=null}return pT});var gT=Yi.prototype;gT.pending=function(){return this._pending},gT.sanitizeURL=function(e){var t=this;return Hi(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return Vi(t),e}).catch(function(){return Vi(t),null})},gT.loadImage=function(e){var t=this,n=Gi();return Hi(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){Vi(t),i.loaded=!0},i.onerror=function(){Vi(t),i.loaded=!1},i.src=r,i}).catch(function(e){return Vi(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}})},gT.ready=function(){var e=this;return new Promise(function(t){function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}n(!1)})};var mT=Math.PI,vT=2*mT,yT=1e-6,bT=vT-yT;Xi.prototype=Zi.prototype={constructor:Xi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,u=n-e,s=r-t,f=a-e,c=o-t,l=f*f+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(l>yT)if(Math.abs(c*u-s*f)>yT&&i){var d=n-a,h=r-o,p=u*u+s*s,g=d*d+h*h,m=Math.sqrt(p),v=Math.sqrt(l),y=i*Math.tan((mT-Math.acos((p+l-g)/(2*m*v)))/2),b=y/v,_=y/m;Math.abs(b-1)>yT&&(this._+="L"+(e+b*f)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>f*h)+","+(this._x1=e+_*u)+","+(this._y1=t+_*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,a){e=+e,t=+t,n=+n;var o=n*Math.cos(r),u=n*Math.sin(r),s=e+o,f=t+u,c=1^a,l=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+f:(Math.abs(this._x1-s)>yT||Math.abs(this._y1-f)>yT)&&(this._+="L"+s+","+f),n&&(l<0&&(l=l%vT+vT),l>bT?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+c+","+(this._x1=s)+","+(this._y1=f):l>yT&&(this._+="A"+n+","+n+",0,"+ +(l>=mT)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var _T=Math.abs,xT=Math.atan2,wT=Math.cos,kT=Math.max,MT=Math.min,ST=Math.sin,ET=Math.sqrt,OT=1e-12,AT=Math.PI,CT=AT/2,RT=2*AT;sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var TT={draw:function(e,t){var n=Math.sqrt(t/AT);e.moveTo(n,0),e.arc(0,0,n,0,RT)}};va.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ma(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ma(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ba.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ma(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},xa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ma(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ka.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,u=t[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+r*o),this._beta*t[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var zT=function e(t){function n(e){return 1===t?new va(e):new ka(e,t)}return n.beta=function(t){return e(+t)},n}(.85);Sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ma(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ma(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var NT=function e(t){function n(e){return new Sa(e,t)}return n.tension=function(t){return e(+t)},n}(0);Ea.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,
this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ma(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var DT=function e(t){function n(e){return new Ea(e,t)}return n.tension=function(t){return e(+t)},n}(0);Oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ma(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var PT=function e(t){function n(e){return new Oa(e,t)}return n.tension=function(t){return e(+t)},n}(0);Ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Aa(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var LT=function e(t){function n(e){return t?new Ca(e,t):new Sa(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);Ra.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Aa(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var qT=function e(t){function n(e){return t?new Ra(e,t):new Ea(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);Ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Aa(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var $T=function e(t){function n(e){return t?new Ta(e,t):new Oa(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);za.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},$a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qa(this,this._t0,La(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,qa(this,La(this,n=Pa(this,e,t)),n);break;default:qa(this,this._t0,n=Pa(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(ja.prototype=Object.create($a.prototype)).point=function(e,t){$a.prototype.point.call(this,t,e)},Fa.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},Ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Wa(e),i=Wa(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Ya.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var jT,FT={basis:{curve:ya},"basis-closed":{curve:_a},"basis-open":{curve:wa},bundle:{curve:zT,tension:"beta",value:.85},cardinal:{curve:NT,tension:"tension",value:0},"cardinal-open":{curve:PT,tension:"tension",value:0},"cardinal-closed":{curve:DT,tension:"tension",value:0},"catmull-rom":{curve:LT,tension:"alpha",value:.5},"catmull-rom-closed":{curve:qT,tension:"alpha",value:.5},"catmull-rom-open":{curve:$T,tension:"alpha",value:.5},linear:{curve:fa},"linear-closed":{curve:Na},monotone:{horizontal:Ua,vertical:Ia},natural:{curve:Ga},step:{curve:Ha},"step-after":{curve:Xa},"step-before":{curve:Va}},IT={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},UT=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],BT={},WT={},GT=[].join,YT=["l",0,0,0,0,0,0,0],HT=2*Math.PI,VT=Math.sqrt(3)/2,XT={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,HT)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=VT*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=VT*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=VT*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=VT*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}},ZT={},JT=Math.PI,QT=ua().startAngle(_o).endAngle(xo).padAngle(wo).innerRadius(ko).outerRadius(Mo).cornerRadius(So),KT=ha().x(ho).y1(po).y0(bo).defined(Eo),ez=ha().y(po).x1(ho).x0(yo).defined(Eo),tz=da().x(ho).y(po).defined(Eo),nz=co().x(ho).y(po).width(go).height(vo).cornerRadius(So),rz=pa().type(Ao).size(Oo),iz=lo().x(ho).y(po).defined(Eo).size(mo),az=2*Math.PI,oz=az/4,uz=az-1e-8;qo.beginPath=$o,qo.closePath=$o,qo.moveTo=jo,qo.lineTo=jo,qo.rect=function(e,t,n,r){jo(e,t),jo(e+n,t+r)},qo.quadraticCurveTo=function(e,t,n,r){jo(e,t),jo(n,r)},qo.bezierCurveTo=function(e,t,n,r,i,a){jo(e,t),jo(n,r),jo(i,a)},qo.arc=function(e,t,n,r,i,a){function o(e){f=n*Math.cos(e),c=n*Math.sin(e),f<l&&(l=f),f>d&&(d=f),c<h&&(h=c),c>p&&(p=c)}if(Math.abs(i-r)>uz)return jo(e-n,t-n),void jo(e+n,t+n);var u,s,f,c,l=1/0,d=-(1/0),h=1/0,p=-(1/0);if(o(r),o(i),i!==r)if(r%=az,r<0&&(r+=az),i%=az,i<0&&(i+=az),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=az,u=r-r%oz,s=0;s<4&&u>i;++s,u-=oz)o(u);else for(u=r-r%oz+oz,s=0;s<4&&u<i;++s,u+=oz)o(u);jo(e+l,t+h),jo(e+d,t+p)};var sz,fz,cz=[],lz=function(){return!0},dz=nu("arc",Co),hz=ou("area",Ro,ru),pz=1,gz=.5,mz=Qo(hu),vz={type:"group",tag:"g",nested:!1,attr:fu,bound:du,draw:pu,pick:gu,background:cu,foreground:lu},yz={type:"image",tag:"image",nested:!1,attr:_u,bound:xu,draw:wu,pick:Jo(),get:vu,xOffset:yu,yOffset:bu},bz=ou("line",To,iu),_z={type:"path",tag:"path",nested:!1,attr:ku,bound:Su,draw:Vo(Mu),pick:Ko(Mu)},xz={type:"rect",tag:"path",nested:!1,attr:Eu,bound:Ou,draw:Vo(Au),pick:Ko(Au)},wz={type:"rule",tag:"line",nested:!1,attr:Cu,bound:Ru,draw:zu,pick:Jo(Nu)},kz=nu("shape",No),Mz=nu("symbol",Do),Sz={height:$u,measureWidth:Lu,estimateWidth:Du,width:Du,canvas:ju};ju(!0);var Ez={left:"start",center:"middle",right:"end"},Oz=new Li,Az={type:"text",tag:"text",nested:!1,attr:Wu,bound:Gu,draw:Yu,pick:Jo(Hu)},Cz=ou("trail",Po,au),Rz={arc:dz,area:hz,group:vz,image:yz,line:bz,path:_z,rect:xz,rule:wz,shape:kz,symbol:Mz,text:Az,trail:Cz},Tz={mark:null},zz=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],Nz=Ku.prototype;Nz.toJSON=function(e){return Zu(this.root,e||0)},Nz.mark=function(e,t,n){t=t||this.root.items[0];var r=es(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var Dz=ss.prototype;Dz.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},Dz.element=function(){return this._el},Dz.canvas=function(){return this._el&&this._el.firstChild},Dz.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},Dz.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},Dz.on=function(){},Dz.off=function(){},Dz._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},Dz.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},Dz.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},Dz.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then(function(t){var n=new MouseEvent(e.type,e),r=ts(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)}).catch(function(){})},Dz.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=us(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},Dz.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var Pz=cs.prototype;Pz.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},Pz.element=function(){return this._el},Pz.canvas=function(){return this._el&&this._el.firstChild},Pz.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},Pz.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},Pz.dirty=function(){},Pz.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},Pz._render=function(){},Pz.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},Pz._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return r},Pz.sanitizeURL=function(e){return this._load("sanitizeURL",e)},Pz.loadImage=function(e){return this._load("loadImage",e)};var Lz=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],qz="mousemove",$z="mouseout",jz="click",Fz=P(ls,ss);Fz.initialize=function(e,t,n){var r=this._canvas=e&&ns(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){Fz[e]?Fz[e].call(i,t):i.fire(e,t)})})}return ss.prototype.initialize.call(this,e,t,n)},Fz.canvas=function(){return this._canvas},Fz.context=function(){return this._canvas.getContext("2d")},Fz.events=Lz,Fz.DOMMouseScroll=function(e){this.fire("mousewheel",e)},Fz.mousemove=ds("mousemove","mouseover","mouseout"),Fz.dragover=ds("dragover","dragenter","dragleave"),Fz.mouseout=hs("mouseout"),Fz.dragleave=hs("dragleave"),Fz.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},Fz.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},Fz.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},Fz.touchmove=function(e){this.fire("touchmove",e,!0)},Fz.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},Fz.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,e===jz&&a&&a.href?this.handleHref(t,a,a.href):e!==qz&&e!==$z||this.handleTooltip(t,a,e!==$z),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},Fz.on=function(e,t){var n=this.eventName(e),r=this._handlers,i=this._handlerIndex(r[n],e,t);return i<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},Fz.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},Fz.pickEvent=function(e){var t=os(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},Fz.pick=function(e,t,n,r,i){var a=this.context(),o=Rz[e.marktype];return o.pick.call(this,a,e,t,n,r,i)};var Iz=gs(),Uz=P(vs,cs),Bz=cs.prototype,Wz=new Li;Uz.initialize=function(e,t,n,r,i){return this._canvas=Wi(1,1),e&&(is(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Bz.initialize.call(this,e,t,n,r,i)},Uz.resize=function(e,t,n,r){return Bz.resize.call(this,e,t,n,r),ms(this._canvas,this._width,this._height,this._origin,this._scale),this._redraw=!0,this},Uz.canvas=function(){return this._canvas},Uz.context=function(){return this._canvas?this._canvas.getContext("2d"):null},Uz.dirty=function(e){var t=bs(e.bounds,e.mark.group);this._dirty.union(t)},Uz._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=ys(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},Uz.draw=function(e,t,n){var r=Rz[t.marktype];t.clip&&ps(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},Uz.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var Gz=P(_s,ss);Gz.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(jz,this._hrefHandler),r.removeEventListener(qz,this._tooltipHandler),r.removeEventListener($z,this._tooltipHandler)),this._svg=r=e&&ns(e,"svg"),r&&(r.addEventListener(jz,this._hrefHandler),r.addEventListener(qz,this._tooltipHandler),r.addEventListener($z,this._tooltipHandler)),ss.prototype.initialize.call(this,e,t,n)},Gz.canvas=function(){return this._svg},Gz.on=function(e,t){var n=this.eventName(e),r=this._handlers,i=this._handlerIndex(r[n],e,t);if(i<0){var a={type:e,handler:t,listener:xs(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},Gz.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var Yz={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Hz={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Vz=Object.keys(Hz),Xz=Yz.xmlns,Zz=P(Ms,cs),Jz=cs.prototype;Zz.initialize=function(e,t,n,r){return e&&(this._svg=rs(e,0,"svg",Xz),this._svg.setAttribute("class","marks"),is(e,1),this._root=rs(this._svg,0,"g",Xz),is(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Jz.initialize.call(this,e,t,n,r)},Zz.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Jz.background.apply(this,arguments)},Zz.resize=function(e,t,n,r){return Jz.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Zz.canvas=function(){return this._svg},Zz.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in Yz)e[t]=Yz[t];var n=this._bgcolor?ws("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+ks("rect"):"";return ws("svg",e)+n+this._svg.innerHTML+ks("svg")},Zz._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),is(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Zz.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=rs(t,0,"defs",Xz)),Ss(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=rs(t,0,"defs",Xz)),Es(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):is(r,i))},Zz._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},Zz.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},Zz.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},Zz._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)t=e[a],n=t.mark,n.marktype!==r&&(r=n.marktype,i=Rz[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,Os(t,s),n.items.forEach(function(e){e.dirty=s})),n.zdirty||(t.exit?(i.nested&&n.items.length?(u=n.items[0],u._svg&&this._update(i,u._svg,u)):t._svg&&(u=t._svg.parentNode,u&&u.removeChild(t._svg)),t._svg=null):(t=i.nested?n.items[0]:t,t._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,Os(t,s)),t._update=s)));return!this._dirtyAll},Zz.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=Cs(e,i,c,u.tag,o);t&&(a._update(u,n,e),f&&As(a,n,e)),c=n,++l}if(!this.isDirty(t))return t._svg;var i,a=this,o=this._svg,u=Rz[t.marktype],s=t.interactive===!1?"none":null,f="g"===u.tag,c=null,l=0;return i=Cs(t,e,n,"g",o),i.setAttribute("class",as(t)),f||i.style.setProperty("pointer-events",s),t.clip?i.setAttribute("clip-path",su(a,t,t.group)):i.removeAttribute("clip-path"),u.nested?t.items.length&&r(t.items[0]):Yo(t,r),is(i,l),i};var Qz=null,Kz=null,eN={group:function(e,t,n){Kz=t.__values__,Qz=t.childNodes[1],e.foreground(Ts,n,this),Qz=t.childNodes[0],e.background(Ts,n,this);var r=n.mark.interactive===!1?"none":null;r!==Kz.events&&(Qz.style.setProperty("pointer-events",r),Kz.events=r)},text:function(e,t,n){var r=Fu(n);r!==Kz.text&&(t.textContent=r,Kz.text=r),r=Uu(n),r!==Kz.font&&(t.style.setProperty("font",r),Kz.font=r)}};Zz._update=function(e,t,n){Qz=t,Kz=t.__values__,e.attr(Ts,n,this);var r=eN[e.type];r&&r.call(this,e,t,n),this.style(Qz,n)},Zz.style=function(e,t){if(null!=t){var n,r,i,a,o;for(n=0,r=Vz.length;n<r;++n)i=Vz[n],o=t[i],o!==Kz[i]&&(a=Hz[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+zs()+"#"+o.id+")"),e.style.setProperty(a,o+"")),Kz[i]=o)}};var tN=P(Ns,cs),nN=cs.prototype;tN.resize=function(e,t,n,r){nN.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in Yz)o[u]=Yz[u];a.head=ws("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),s?a.bg=ws("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+ks("rect"):a.bg="",a.root=ws("g",{transform:"translate("+i+")"}),a.foot=ks("g")+ks("svg"),this},tN.background=function(){var e=nN.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},tN.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},tN._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},tN.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(n=i.gradient[t],r=n.stops,a+=ws("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=ws("stop",{offset:r[e].offset,"stop-color":r[e].color})+ks("stop");a+=ks("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=ws("clipPath",{id:t}),a+=n.path?ws("path",{d:n.path})+ks("path"):ws("rect",{x:0,y:0,width:n.width,height:n.height})+ks("rect"),a+=ks("clipPath");return a.length>0?ws("defs")+a+ks("defs"):""};var rN;tN.attributes=function(e,t){return rN={},e(Ds,t,this),rN},tN.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then(function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e})}return null},tN.mark=function(e){function t(t){var s=r.href(t);s&&(u+=ws("a",s)),n="g"!==a?Ps(t,e,a,o):null,u+=ws(a,r.attributes(i.attr,t),n),"text"===a?u+=Ls(Fu(t)):"g"===a&&(u+=ws("path",r.attributes(i.background,t),Ps(t,e,"bgrect",o))+ks("path"),u+=ws("g",r.attributes(i.foreground,t))+r.markGroup(t)+ks("g")),u+=ks(a),s&&(u+=ks("a"))}var n,r=this,i=Rz[e.marktype],a=i.tag,o=this._defs,u="";return"g"!==a&&e.interactive===!1&&(n='style="pointer-events: none;"'),u+=ws("g",{class:as(e),"clip-path":e.clip?su(r,e,e.group):null},n),i.nested?e.items&&e.items.length&&t(e.items[0]):Yo(e,t),u+ks("g")},tN.markGroup=function(e){var t=this,n="";return Yo(e,function(e){n+=t.mark(e)}),n};var iN="canvas",aN="png",oN="svg",uN="none",sN={Canvas:iN,PNG:aN,SVG:oN,None:uN},fN={};fN[iN]=fN[aN]={renderer:vs,headless:vs,handler:ls},fN[oN]={renderer:Ms,headless:Ns,handler:_s},fN[uN]={};var cN=new Li,lN=1e-9,dN=P(Us,Bn);dN.transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=Rz[a],u=o.bound,s=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),s=Bs(i,u),i.items.forEach(function(e){e.bounds.clear().union(s)})):a===UR||e.modified()?(t.visit(t.MOD,function(e){r.dirty(e)}),s.clear(),i.items.forEach(function(e){s.union(Bs(e,u))}),i.role===HR&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,function(e){s.union(Bs(e,u))}),t.visit(t.MOD,function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(Bs(e,u))}),n&&(s.clear(),i.items.forEach(function(e){s.union(e.bounds)}))),$s(i),t.modifies("bounds")};var hN=":vega_identifier:";Ws.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};var pN=P(Ws,Bn);pN.transform=function(e,t){var n=Gs(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++r)}),n.set(this.value=r),t};var gN=P(Ys,Bn);gN.transform=function(e,t){var n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Hs(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r=n.marktype===UR?ji:$i;return t.visit(t.ADD,function(e){r.call(e,n)}),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t};var mN=P(Vs,Bn),vN={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&Xs(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};mN.transform=function(e,t){var n=vN[e.method]||vN.parity,r=t.materialize(t.SOURCE).source;if(r){e.sort&&(r=r.slice().sort(e.sort)),"greedy"===e.method&&(r=r.filter(Js)),r.forEach(function(e){e.opacity=1});var i=r;if(i.length>=3&&Zs(i)){t=t.reflow(e.modified()).modifies("opacity");do i=n(i);while(i.length>=3&&Zs(i));i.length<3&&!p(r).opacity&&(i.length>1&&(p(i).opacity=0),p(r).opacity=1)}if(e.boundScale){var a=Qs(e.boundScale,e.boundOrient,e.boundTolerance);r.forEach(function(e){a(e)||(e.opacity=0)})}return t}};var yN=P(Ks,Bn);yN.transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var bN=.5,_N=new Li,xN=P(df,Bn);xN.transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&ff(n,t,e.layout),hf(n,t,e)}),e.modified()&&t.reflow(),t};var wN=Object.freeze({bound:Us,identifier:Ws,mark:Ys,overlap:Vs,render:Ks,viewlayout:df}),kN="log",MN="pow",SN="utc",EN="sqrt",ON="band",AN="time",CN="point",RN="linear",TN="ordinal",zN="quantile",NN="quantize",DN="threshold",PN="bin-linear",LN="bin-ordinal",qN="sequential",$N="$";Af.prototype=Cf.prototype={constructor:Af,has:function(e){return $N+e in this},get:function(e){return this[$N+e]},set:function(e,t){return this[$N+e]=t,this},remove:function(e){var t=$N+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===$N&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===$N&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===$N&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===$N&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===$N&&++e;return e},empty:function(){for(var e in this)if(e[0]===$N)return!1;return!0},each:function(e){for(var t in this)t[0]===$N&&e(this[t],t.slice(1),this)}};var jN=Cf.prototype;Pf.prototype=Lf.prototype={constructor:Pf,has:jN.has,add:function(e){return e+="",this[$N+e]=e,this},remove:jN.remove,clear:jN.clear,values:jN.keys,size:jN.size,empty:jN.empty,each:jN.each};var FN=Array.prototype,IN=FN.map,UN=FN.slice,BN={name:"implicit"},WN=.7,GN=1/WN,YN="\\s*([+-]?\\d+)\\s*",HN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",VN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XN=/^#([0-9a-f]{3})$/,ZN=/^#([0-9a-f]{6})$/,JN=new RegExp("^rgb\\("+[YN,YN,YN]+"\\)$"),QN=new RegExp("^rgb\\("+[VN,VN,VN]+"\\)$"),KN=new RegExp("^rgba\\("+[YN,YN,YN,HN]+"\\)$"),eD=new RegExp("^rgba\\("+[VN,VN,VN,HN]+"\\)$"),tD=new RegExp("^hsl\\("+[HN,VN,VN]+"\\)$"),nD=new RegExp("^hsla\\("+[HN,VN,VN,HN]+"\\)$"),rD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$f(Ff,If,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),$f(Yf,Gf,jf(Ff,{brighter:function(e){return e=null==e?GN:Math.pow(GN,e),new Yf(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?WN:Math.pow(WN,e),new Yf(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Hf(this.r)+Hf(this.g)+Hf(this.b)},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),$f(Jf,Zf,jf(Ff,{brighter:function(e){return e=null==e?GN:Math.pow(GN,e),new Jf(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?WN:Math.pow(WN,e),new Jf(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Yf(Qf(e>=240?e-240:e+120,i,r),Qf(e,i,r),Qf(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var iD=Math.PI/180,aD=180/Math.PI,oD=18,uD=.96422,sD=1,fD=.82521,cD=4/29,lD=6/29,dD=3*lD*lD,hD=lD*lD*lD;$f(tc,ec,jf(Ff,{brighter:function(e){return new tc(this.l+oD*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new tc(this.l-oD*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=uD*rc(t),e=sD*rc(e),n=fD*rc(n),new Yf(ic(3.1338561*t-1.6168667*e-.4906146*n),ic(-.9787684*t+1.9161415*e+.033454*n),ic(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),$f(sc,uc,jf(Ff,{brighter:function(e){return new sc(this.h,this.c,this.l+oD*(null==e?1:e),this.opacity)},darker:function(e){return new sc(this.h,this.c,this.l-oD*(null==e?1:e),this.opacity)},rgb:function(){return Kf(this).rgb()}}));var pD=-.14861,gD=1.78277,mD=-.29227,vD=-.90649,yD=1.97294,bD=yD*vD,_D=yD*gD,xD=gD*mD-vD*pD;$f(lc,cc,jf(Ff,{brighter:function(e){return e=null==e?GN:Math.pow(GN,e),new lc(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?WN:Math.pow(WN,e),new lc(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*iD,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Yf(255*(t+n*(pD*r+gD*i)),255*(t+n*(mD*r+vD*i)),255*(t+n*(yD*r)),this.opacity)}}));var wD,kD,MD,SD,ED=function e(t){function n(e,t){var n=r((e=Gf(e)).r,(t=Gf(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),o=_c(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}var r=bc(t);return n.gamma=e,n}(1),OD=xc(hc),AD=xc(pc),CD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,RD=new RegExp(CD.source,"g"),TD=180/Math.PI,zD={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ND=Dc(zc,"px, ","px)","deg)"),DD=Dc(Nc,", ",")",")"),PD=Math.SQRT2,LD=2,qD=4,$D=1e-12,jD=jc(yc),FD=jc(_c),ID=Ic(yc),UD=Ic(_c),BD=Uc(yc),WD=Uc(_c),GD=Object.freeze({interpolate:Cc,interpolateArray:wc,interpolateBasis:hc,interpolateBasisClosed:pc,interpolateDate:kc,interpolateNumber:Mc,interpolateObject:Sc,interpolateRound:Rc,interpolateString:Ac,interpolateTransformCss:ND,interpolateTransformSvg:DD,interpolateZoom:$c,interpolateRgb:ED,interpolateRgbBasis:OD,interpolateRgbBasisClosed:AD,interpolateHsl:jD,interpolateHslLong:FD,interpolateLab:Fc,interpolateHcl:ID,interpolateHclLong:UD,interpolateCubehelix:BD,interpolateCubehelixLong:WD,piecewise:Bc,quantize:Wc}),YD=[0,1],HD=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;il.prototype=al.prototype,al.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var VD,XD,ZD,JD,QD={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return sl(100*e,t)},r:sl,s:ul,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},KD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];ll({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var eP=1e3,tP=60*eP,nP=60*tP,rP=24*nP,iP=7*rP,aP=30*rP,oP=365*rP,uP=Array.prototype.map,sP=Array.prototype.slice,fP={identity:yl,linear:vl,log:El,ordinal:qf,pow:Al,sqrt:Cl,quantile:Rl,quantize:Tl,threshold:zl,time:Ll,utc:ql,band:$l,point:Fl,sequential:Wl,"bin-linear":Ul,"bin-ordinal":Bl};for(var cP in fP)Yl(cP,fP[cP]);var lP=Hl("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),dP=Hl("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),hP=Hl("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),pP=Hl("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),gP=Hl("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),mP=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Hl),vP=Vl("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),yP=Vl("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),bP=Vl("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),_P=Vl("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),xP=Vl("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),wP=Vl("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),kP=Vl("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),MP=Vl("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),SP=Vl("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),EP=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Vl),OP=Xl(EP),AP=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Vl),CP=Xl(AP),RP=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Vl),TP=Xl(RP),zP=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Vl),NP=Xl(zP),DP=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Vl),PP=Xl(DP),LP=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Vl),qP=Xl(LP),$P=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Vl),jP=Xl($P),FP=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Vl),IP=Xl(FP),UP=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Vl),BP=Xl(UP),WP=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Vl),GP=Xl(WP),YP=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Vl),HP=Xl(YP),VP=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Vl),XP=Xl(VP),ZP=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Vl),JP=Xl(ZP),QP=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Vl),KP=Xl(QP),eL=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Vl),tL=Xl(eL),nL=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Vl),rL=Xl(nL),iL=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Vl),aL=Xl(iL),oL=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Vl),uL=Xl(oL),sL=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Vl),fL=Xl(sL),cL=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Vl),lL=Xl(cL),dL=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Vl),hL=Xl(dL),pL=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Vl),gL=Xl(pL),mL=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Vl),vL=Xl(mL),yL=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Vl),bL=Xl(yL),_L=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Vl),xL=Xl(_L),wL=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Vl),kL=Xl(wL),ML=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Vl),SL=Xl(ML),EL=WD(cc(300,.5,0),cc(-240,.5,1)),OL=WD(cc(-100,.75,.35),cc(80,1.5,.8)),AL=WD(cc(260,.75,.35),cc(80,1.5,.8)),CL=cc(),RL=Gf(),TL=Math.PI/3,zL=2*Math.PI/3,NL=Ql(Vl("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),DL=Ql(Vl("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),PL=Ql(Vl("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),LL=Ql(Vl("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),qL=Object.freeze({schemeCategory10:vP,schemeAccent:yP,schemeDark2:bP,schemePaired:_P,schemePastel1:xP,schemePastel2:wP,schemeSet1:kP,schemeSet2:MP,schemeSet3:SP,interpolateBrBG:OP,schemeBrBG:EP,interpolatePRGn:CP,schemePRGn:AP,interpolatePiYG:TP,schemePiYG:RP,interpolatePuOr:NP,schemePuOr:zP,interpolateRdBu:PP,schemeRdBu:DP,interpolateRdGy:qP,schemeRdGy:LP,interpolateRdYlBu:jP,schemeRdYlBu:$P,interpolateRdYlGn:IP,schemeRdYlGn:FP,interpolateSpectral:BP,schemeSpectral:UP,interpolateBuGn:GP,schemeBuGn:WP,interpolateBuPu:HP,schemeBuPu:YP,interpolateGnBu:XP,schemeGnBu:VP,interpolateOrRd:JP,schemeOrRd:ZP,interpolatePuBuGn:KP,schemePuBuGn:QP,interpolatePuBu:tL,schemePuBu:eL,interpolatePuRd:rL,schemePuRd:nL,interpolateRdPu:aL,schemeRdPu:iL,interpolateYlGnBu:uL,schemeYlGnBu:oL,interpolateYlGn:fL,schemeYlGn:sL,interpolateYlOrBr:lL,schemeYlOrBr:cL,interpolateYlOrRd:hL,schemeYlOrRd:dL,interpolateBlues:gL,schemeBlues:pL,interpolateGreens:vL,schemeGreens:mL,interpolateGreys:bL,schemeGreys:yL,interpolatePurples:xL,schemePurples:_L,interpolateReds:kL,schemeReds:wL,interpolateOranges:SL,schemeOranges:ML,interpolateCubehelixDefault:EL,interpolateRainbow:Zl,interpolateWarm:OL,interpolateCool:AL,interpolateSinebow:Jl,interpolateViridis:NL,interpolateMagma:DL,interpolateInferno:PL,interpolatePlasma:LL}),$L={blueorange:mP},jL={category10:vP,accent:yP,dark2:bP,paired:_P,pastel1:xP,pastel2:wP,set1:kP,set2:MP,set3:SP,category20:lP,category20b:dP,category20c:hP,tableau10:pP,tableau20:gP,viridis:NL,magma:DL,inferno:PL,plasma:LL,blueorange:OD(p(mP))};Kl("blues","Blues"),Kl("greens","Greens"),Kl("greys","Greys"),Kl("purples","Purples"),Kl("reds","Reds"),Kl("oranges","Oranges"),Kl("brownbluegreen","BrBG"),Kl("purplegreen","PRGn"),Kl("pinkyellowgreen","PiYG"),Kl("purpleorange","PuOr"),Kl("redblue","RdBu"),Kl("redgrey","RdGy"),Kl("redyellowblue","RdYlBu"),Kl("redyellowgreen","RdYlGn"),Kl("spectral","Spectral"),Kl("bluegreen","BuGn"),Kl("bluepurple","BuPu"),Kl("greenblue","GnBu"),Kl("orangered","OrRd"),Kl("purplebluegreen","PuBuGn"),Kl("purpleblue","PuBu"),Kl("purplered","PuRd"),Kl("redpurple","RdPu"),Kl("yellowgreenblue","YlGnBu"),Kl("yellowgreen","YlGn"),Kl("yelloworangebrown","YlOrBr"),Kl("yelloworangered","YlOrRd");var FL={millisecond:jA,second:GA,minute:YA,hour:HA,day:VA,week:XA,month:QA,year:KA},IL={millisecond:jA,second:GA,minute:eC,hour:tC,day:nC,week:rC,month:oC,year:uC},UL=P(md,Bn);UL.transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=null==e.count?e.values?e.values.length:10:sd(i,e.count),o=e.format||ld(i,a,e.formatSpecifier),u=e.values?fd(i,e.values,a):cd(i,a);return r&&(n.rem=r),r=u.map(function(e,t){return te({index:t/(u.length-1),value:e,label:o(e)})}),e.extra&&r.push(te({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n};var BL=P(vd,Bn);BL.transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||yd,a=e.key||K,u=this.value;return eA(r.encode)&&(r.encode=null),u&&(e.modified("key")||t.modified(a))&&o("DataJoin does not support modified key function or fields."),u||(t=t.addAll(),this.value=u=D().test(bd),u.lookup=function(e){return u.get(a(e))}),t.visit(t.ADD,function(e){var t=a(e),n=u.get(t);n?n.exit?(u.empty--,r.add.push(n)):r.mod.push(n):(u.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=a(e),n=u.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,function(e){var t=a(e),n=u.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++u.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&u.empty>n.cleanThreshold&&n.runAfter(u.clean),r};var WL=P(_d,Bn);WL.transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,i=t.encode;if(eA(i)){if(!n.changed()&&!i.every(function(e){return r[e]}))return t.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||uA,u=r.enter||uA,s=r.exit||uA,f=(i&&!a?r[i]:o)||uA;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(t){u(t,e),o(t,e),f!==uA&&f!==o&&f(t,e)}),n.modifies(u.output),n.modifies(o.output),f!==uA&&f!==o&&n.modifies(f.output)),t.changed(t.REM)&&s!==uA&&(t.visit(t.REM,function(t){s(t,e)}),n.modifies(s.output)),a||f!==uA){var c=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(c,function(t){var r=u(t,e);(f(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(u.output)):t.visit(c,function(t){f(t,e)&&n.mod.push(t)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation};var GL="symbol",YL="discrete",HL="gradient",VL={};VL[zN]=kd,VL[NN]=wd,VL[DN]=Md,VL[PN]=VL[LN]=Sd;var XL=P(zd,Bn);XL.transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=this.value,s=e.type||GL,f=e.scale,c=null==e.count?5:sd(f,e.count),l=e.format||ld(f,c,e.formatSpecifier),d=e.values||xd(f,c,s);return l=Ed(f,l,s),u&&(o.rem=u),s===GL?(A(i=e.size)?(e.values||0!==f(d[0])||(d=d.slice(1)),a=d.reduce(function(t,n){return Math.max(t,i(n,e))},0)):i=R(a=i||8),u=d.map(function(t,n){return te({index:n,label:l(t,n,d),value:t,offset:a,size:i(t,e)})})):s===HL?(n=e.values?f.domain():d,r=nd(f,n[0],p(n)),u=d.map(function(e,t){return te({index:t,label:l(e,t,d),value:e,perc:r(e)})})):(i=d.length-1,r=Td(f),u=d.map(function(e,t){return te({index:t,label:l(e,t,d),value:e,perc:t?r(e):0,perc2:t===i?1:r(d[t+1])})})),o.source=u,o.add=u,this.value=u,o};var ZL=D({line:$d,"line-radial":jd,arc:Fd,"arc-radial":Id,curve:Ud,"curve-radial":Bd,"orthogonal-horizontal":Wd,"orthogonal-vertical":Gd,"orthogonal-radial":Yd,"diagonal-horizontal":Hd,"diagonal-vertical":Vd,"diagonal-radial":Xd});qd.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]};var JL=P(qd,Bn);JL.transform=function(e,t){var n=e.sourceX||Nd,r=e.sourceY||Dd,i=e.targetX||Pd,a=e.targetY||Ld,u=e.as||"path",s=e.orient||"vertical",f=e.shape||"line",c=ZL.get(f+"-"+s)||ZL.get(f);return c||o("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[u]=c(n(e),r(e),i(e),a(e))}),t.reflow(e.modified()).modifies(u)},Zd.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};var QL=P(Zd,Bn);QL.transform=function(e,t){var n,r,i,a=e.as||["startAngle","endAngle"],o=a[0],u=a[1],s=e.field||aA,f=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,l=t.source,d=l.map(s),h=d.length,p=f,g=(c-f)/wr(d),m=cr(h);for(e.sort&&m.sort(function(e,t){return d[e]-d[t]}),n=0;n<h;++n)i=d[m[n]],r=l[m[n]],r[o]=p,r[u]=p+=i*g;return this.value=d,t.reflow(e.modified()).modifies(a)};var KL=5,eq=V([RN,MN,EN]),tq=V([RN,kN,MN,EN,AN,SN]),nq=V(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]),rq=P(Jd,Bn);rq.transform=function(e,t){var n,r=t.dataflow,i=this.value;i&&!e.modified("type")||(this.value=i=Yl((e.type||RN).toLowerCase())());for(n in e)if(!nq[n]){if("padding"===n&&tq[i.type])continue;A(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return th(i,e,Qd(i,e,r)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var iq=P(uh,Bn);iq.transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};var aq="center",oq="normalize";sh.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]};var vA=P(sh,Bn);vA.transform=function(e,t){var n,r,i,a,o=e.as||["y0","y1"],u=o[0],s=o[1],f=e.field||aA,c=e.offset===aq?fh:e.offset===oq?ch:lh;for(n=dh(t.source,e.groupby,e.sort,f),r=0,i=n.length,a=n.max;r<i;++r)c(n[r],a,f,u,s);return t.reflow(e.modified()).modifies(o)};var uq=Object.freeze({axisticks:md,datajoin:vd,encode:_d,legendentries:zd,linkpath:qd,pie:Zd,scale:Jd,sortitems:uh,stack:sh,validTicks:fd}),sq=Array.prototype,fq=sq.slice,cq=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],lq=["size","smooth"],dq=["x","y","size","cellSize","bandwidth"];
Ah.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]};var hq=P(Ah,Bn);hq.transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=e.count||10;return e.values?(n=wh(),r=lq,i=e.values):(n=Oh(),r=dq,i=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?o:Ch(o))),r.forEach(function(t){null!=e[t]&&n[t](e[t])}),this.value&&(a.rem=this.value),i=i&&i.length?n(i).map(te):[],this.value=a.source=a.add=i,a};var pq="Feature",gq="FeatureCollection",mq="MultiPoint";Rh.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};var vq=P(Rh,Bn);vq.transform=function(e,t){var n,r=this._features,i=this._points,o=e.fields,u=o&&o[0],s=o&&o[1],f=e.geojson,c=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(a(f))||u&&t.modified(a(u))||s&&t.modified(a(s)),this.value&&!n||(c=t.SOURCE,this._features=r=[],this._points=i=[]),f&&t.visit(c,function(e){r.push(f(e))}),u&&s&&(t.visit(c,function(e){var t=u(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])}),r=r.concat({type:pq,geometry:{type:mq,coordinates:i}})),this.value={type:gq,features:r}},zh.prototype={constructor:zh,reset:function(){this.s=this.t=0},add:function(e){Nh(Xq,e,this.t),Nh(this,Xq.s,this.s),this.s?this.t+=Xq.t:this.s=Xq.t},valueOf:function(){return this.s}};var yq,bq,_q,xq,wq,kq,Mq,Sq,Eq,Oq,Aq,Cq,Rq,Tq,zq,Nq,Dq,Pq,Lq,qq,$q,jq,Fq,Iq,Uq,Bq,Wq,Gq,Yq,Hq,Vq,Xq=new zh,Zq=1e-6,Jq=1e-12,Qq=Math.PI,Kq=Qq/2,e$=Qq/4,t$=2*Qq,n$=180/Qq,r$=Qq/180,i$=Math.abs,a$=Math.atan,o$=Math.atan2,u$=Math.cos,s$=Math.ceil,f$=Math.exp,c$=Math.log,l$=Math.pow,d$=Math.sin,h$=Math.sign||function(e){return e>0?1:e<0?-1:0},p$=Math.sqrt,g$=Math.tan,m$={Feature:function(e,t){qh(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)qh(n[r].geometry,t)}},v$={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){$h(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$h(n[r],t,0)},Polygon:function(e,t){jh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)jh(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)qh(n[r],t)}},y$=Th(),b$=Th(),_$={point:Lh,lineStart:Lh,lineEnd:Lh,polygonStart:function(){y$.reset(),_$.lineStart=Ih,_$.lineEnd=Uh},polygonEnd:function(){var e=+y$;b$.add(e<0?t$+e:e),this.lineStart=this.lineEnd=this.point=Lh},sphere:function(){b$.add(t$)}},x$=Th(),w$={point:Kh,lineStart:tp,lineEnd:np,polygonStart:function(){w$.point=rp,w$.lineStart=ip,w$.lineEnd=ap,x$.reset(),_$.polygonStart()},polygonEnd:function(){_$.polygonEnd(),w$.point=Kh,w$.lineStart=tp,w$.lineEnd=np,y$<0?(kq=-(Sq=180),Mq=-(Eq=90)):x$>Zq?Eq=90:x$<-Zq&&(Mq=-90),zq[0]=kq,zq[1]=Sq}},k$={sphere:Lh,point:cp,lineStart:dp,lineEnd:gp,polygonStart:function(){k$.lineStart=mp,k$.lineEnd=vp},polygonEnd:function(){k$.lineStart=dp,k$.lineEnd=gp}};wp.invert=wp;var M$,S$,E$,O$,A$,C$,R$,T$,z$=Th(),N$=Lp(function(){return!0},jp,Ip,[-Qq,-Kq]),D$=1e9,P$=-D$,L$=(Th(),Th()),q$=Th(),$$={point:Lh,lineStart:Lh,lineEnd:Lh,polygonStart:function(){$$.lineStart=Xp,$$.lineEnd=Qp},polygonEnd:function(){$$.lineStart=$$.lineEnd=$$.point=Lh,L$.add(i$(q$)),q$.reset()},result:function(){var e=L$/2;return L$.reset(),e}},j$=1/0,F$=j$,I$=-j$,U$=I$,B$={point:Kp,lineStart:Lh,lineEnd:Lh,polygonStart:Lh,polygonEnd:Lh,result:function(){var e=[[j$,F$],[I$,U$]];return I$=U$=-(F$=j$=1/0),e}},W$=0,G$=0,Y$=0,H$=0,V$=0,X$=0,Z$=0,J$=0,Q$=0,K$={point:eg,lineStart:tg,lineEnd:ig,polygonStart:function(){K$.lineStart=ag,K$.lineEnd=og},polygonEnd:function(){K$.point=eg,K$.lineStart=tg,K$.lineEnd=ig},result:function(){var e=Q$?[Z$/Q$,J$/Q$]:X$?[H$/X$,V$/X$]:Y$?[W$/Y$,G$/Y$]:[NaN,NaN];return W$=G$=Y$=H$=V$=X$=Z$=J$=Q$=0,e}};fg.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,t$)}},result:Lh};var ej,tj,nj,rj,ij,aj=Th(),oj={point:Lh,lineStart:function(){oj.point=cg},lineEnd:function(){ej&&lg(tj,nj),oj.point=Lh},polygonStart:function(){ej=!0},polygonEnd:function(){ej=null},result:function(){var e=+aj;return aj.reset(),e}};dg.prototype={_radius:4.5,_circle:hg(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=hg(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},mg.prototype={constructor:mg,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var uj=16,sj=u$(30*r$),fj=gg({point:function(e,t){this.stream.point(e*r$,t*r$)}}),cj=qg(function(e){return p$(2/(1+e))});cj.invert=$g(function(e){return 2*Ph(e/2)});var lj=qg(function(e){return(e=Dh(e))&&e/d$(e)});lj.invert=$g(function(e){return e}),Ig.invert=function(e,t){return[e,2*a$(f$(t))-Kq]},Hg.invert=Hg,Jg.invert=$g(a$),tm.invert=$g(Ph),rm.invert=$g(function(e){return 2*a$(e)}),am.invert=function(e,t){return[-t,2*a$(f$(e))-Kq]};var dj=pg(),hj=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],pj={albers:Dg,albersusa:Lg,azimuthalequalarea:jg,azimuthalequidistant:Fg,conicconformal:Yg,conicequalarea:Ng,conicequidistant:Zg,equirectangular:Vg,gnomonic:Qg,identity:em,mercator:Ug,orthographic:nm,stereographic:im,transversemercator:om};for(var gj in pj)sm(gj,pj[gj]);cm.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};var mj=P(cm,Bn);mj.transform=function(e,t){function n(e){e[o]=i(a(e))}var r=t.fork(t.ALL),i=this.value,a=e.field||rA,o=e.as||"path",u=r.SOURCE;!i||e.modified()?(this.value=i=fm(e.projection),r.materialize().reflow()):u=a===rA||t.modified(a.fields)?r.ADD_MOD:r.ADD;var s=lm(i,e.pointRadius);return r.visit(u,n),i.pointRadius(s),r.modifies(o)},dm.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};var vj=P(dm,Bn);vj.transform=function(e,t){function n(e){var t=i([a(e),o(e)]);t?(e[s]=t[0],e[f]=t[1]):(e[s]=void 0,e[f]=void 0)}var r,i=e.projection,a=e.fields[0],o=e.fields[1],u=e.as||["x","y"],s=u[0],f=u[1];return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(r=t.modified(a.fields)||t.modified(o.fields),t.visit(r?t.ADD_MOD:t.ADD,n)),t.modifies(u)},hm.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};var yj=P(hm,Bn);yj.transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||l("datum"),a=e.as||"shape",o=n.ADD_MOD;return r&&!e.modified()||(this.value=r=pm(fm(e.projection),i,e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,function(e){e[a]=r}),n.modifies(a)},gm.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};var bj=P(gm,Bn);bj.transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)A(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(ie(r[0],n)):t.add.push(te(n)),r[0]=n,t};var _j=P(mm,Bn);_j.transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=ym(e.type),hj.forEach(function(t){null!=e[t]&&bm(n,t,e[t])})):hj.forEach(function(t){e.modified(t)&&bm(n,t,e[t])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&vm(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var xj=Object.freeze({contour:Ah,geojson:Rh,geopath:cm,geopoint:dm,geoshape:hm,graticule:gm,projection:mm}),wj=Um.prototype=Bm.prototype;wj.copy=function(){var e,t,n=new Bm(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Wm(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=Wm(t));return n},wj.add=Mm,wj.addAll=Em,wj.cover=Om,wj.data=Am,wj.extent=Cm,wj.find=Tm,wj.remove=zm,wj.removeAll=Nm,wj.root=Dm,wj.size=Pm,wj.visit=Lm,wj.visitAfter=qm,wj.x=jm,wj.y=Im;var kj={value:function(){}};Qm.prototype=Jm.prototype={constructor:Qm,on:function(e,t){var n,r=this._,i=Km(e+"",r),a=-1,o=i.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=tv(r[n],e.name,t);else if(null==t)for(n in r)r[n]=tv(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=i[a]).type)&&(n=ev(r[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qm(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var Mj,Sj,Ej=0,Oj=0,Aj=0,Cj=1e3,Rj=0,Tj=0,zj=0,Nj="object"==typeof performance&&performance.now?performance:Date,Dj="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};iv.prototype=av.prototype={constructor:iv,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?nv():+n)+(null==t?0:+t),this._next||Sj===this||(Sj?Sj._next=this:Mj=this,Sj=this),this._call=e,this._time=n,cv()},stop:function(){this._call&&(this._call=null,this._time=1/0,cv())}};var Pj=10,Lj=Math.PI*(3-Math.sqrt(5)),qj={center:xm,collide:Hm,nbody:gv,link:Zm,x:mv,y:vv},$j="forces",jj=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Fj=["static","iterations"],Ij=["x","y","vx","vy"];yv.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Ij}]};var Uj=P(yv,Bn);Uj.transform=function(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(jj),a=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&xv(n,e,0,t)):(this.value=n=_v(t.source,e),n.on("tick",bv(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Fj)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation;return this.finish(e,t)},Uj.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if(n=i[a],n.name===$j&&"link"===n.op._argval.force)for(var u,s=n.op._argops,f=0,c=s.length;f<c;++f)if("links"===s[f].name&&(u=s[f].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(Ij)};var Bj=Object.freeze({force:yv});Qv.prototype=Hv.prototype={constructor:Qv,count:Pv,each:Lv,eachAfter:$v,eachBefore:qv,sum:jv,sort:Fv,path:Iv,ancestors:Bv,descendants:Wv,leaves:Gv,links:Yv,copy:Vv};var Wj=Array.prototype.slice,Gj="$",Yj={depth:-1},Hj={};Py.prototype=Object.create(Qv.prototype);var Vj=(1+Math.sqrt(5))/2,Xj=function e(t){function n(e,n,r,i,a){jy(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Vj),Zj=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,f,c,l=-1,d=o.length,h=e.value;++l<d;){for(u=o[l],s=u.children,f=u.value=0,c=s.length;f<c;++f)u.value+=s[f].value;u.dice?My(u,n,r,i,r+=(a-r)*u.value/h):$y(u,n,r,n+=(i-n)*u.value/h,a),h-=u.value}else e._squarify=o=jy(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Vj);By.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var Jj=P(By,Bn);Jj.transform=function(e,t){t.source||o("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each(function(e){e.children&&Q(e.data)&&i.rem.push(e.data)}),this.value=a=Hv({values:O(e.keys).reduce(function(e,t){return e.key(t),e},Rf()).entries(i.source)},Wy),n&&a.each(function(e){e.children&&(e=te(e.data),i.add.push(e),i.source.push(e))}),Sv(a,K,K)),i.source.root=a,i};var Qj=P(Gy,Bn);Qj.transform=function(e,t){t.source&&t.source.root||o(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),Yy(n,this.params,e);try{this.value=n(i)}catch(e){o(e)}return i.each(function(e){Hy(e,r,a)}),t.reflow(e.modified()).modifies(a).modifies("leaf")};var Kj=["x","y","r","depth","children"];Vy.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:Kj}]};var eF=P(Vy,Gy);eF.layout=by,eF.params=["size","padding"],eF.fields=Kj;var tF=["x0","y0","x1","y1","depth","children"];Xy.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:tF}]};var nF=P(Xy,Gy);nF.layout=Sy,nF.params=["size","round","padding"],nF.fields=tF,Zy.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};var rF=P(Zy,Bn);rF.transform=function(e,t){t.source||o("Stratify transform requires an upstream data source.");var n=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),i=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),i&&(this.value=Sv(Ay().id(e.key).parentId(e.parentKey)(r.source),e.key,oA)),r.source.root=this.value,r};var iF={tidy:qy,cluster:Nv},aF=["x","y","depth","children"];Jy.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:aF}]};var oF=P(Jy,Gy);oF.layout=function(e){var t=e||"tidy";return iF.hasOwnProperty(t)?iF[t]():void o("Unrecognized Tree layout method: "+t)},oF.params=["size","nodeSize","separation"],oF.fields=aF,Qy.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};var uF=P(Qy,Bn);uF.transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||o("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,function(e){a[K(e)]=1}),r.each(function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[K(t)]&&a[K(n)]&&i.add.push(te({source:n,target:t}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,function(e){a[K(e)]=1}),n.forEach(function(e){(a[K(e.source)]||a[K(e.target)])&&i.mod.push(e)})),i};var sF={binary:Iy,dice:My,slice:$y,slicedice:Uy,squarify:Xj,resquarify:Zj},fF=["x0","y0","x1","y1","depth","children"];Ky.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:fF}]};var cF=P(Ky,Gy);cF.layout=function(){var e=Fy();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){sF.hasOwnProperty(t)?e.tile(sF[t]):o("Unrecognized Treemap layout method: "+t)},e},cF.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],cF.fields=fF;var lF=Object.freeze({nest:By,pack:Vy,partition:Xy,stratify:Zy,tree:Jy,treelinks:Qy,treemap:Ky});rb.prototype={constructor:rb,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ub(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ab(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ob(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ob(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ab(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?ub(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ab(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ob(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ab(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ob(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ab(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ob(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var dF,hF,pF,gF,mF,vF=[],yF=[],bF=1e-6,_F=1e-12;zb.prototype={constructor:zb,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return mb(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u=n.site,s=-1,f=t[i[a-1]],c=f.left===u?f.right:f.left;++s<a;)o=c,f=t[i[s]],c=f.left===u?f.right:f.left,o&&c&&r<o.index&&r<c.index&&Rb(u,o,c)<0&&e.push([u.data,o.data,c.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;var s=e-i.site[0],f=t-i.site[1],c=s*s+f*f;do i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=e-u[0],f=t-u[1],l=s*s+f*f;l<c&&(c=l,o=u.index)}});while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}},Db.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var xF=P(Db,Bn),wF=[[-1e5,-1e5],[1e5,1e5]];xF.transform=function(e,t){var n,r,i,a,o=e.as||"path",u=t.source;for(n=Nb().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||wF),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(o)};var kF=Object.freeze({voronoi:Db}),MF=Math.PI/180,SF=64,EF=2048,OF={archimedean:Fb,rectangular:Ib},AF=Array.prototype.map,CF=Array.prototype.slice,RF={identity:yl,linear:vl,log:El,ordinal:qf,pow:Al,sqrt:Cl,quantile:Rl,quantize:Tl,threshold:zl,time:Ll,utc:ql,band:Hb,point:Xb,sequential:Kb,"bin-linear":Jb,"bin-ordinal":Qb};for(var TF in RF)t_(TF,RF[TF]);var zF=n_("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),NF=n_("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),DF=n_("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),PF=n_("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),LF=n_("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),qF=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(n_),$F={blueorange:qF},jF={category10:vP,accent:yP,dark2:bP,paired:_P,pastel1:xP,pastel2:wP,set1:kP,set2:MP,set3:SP,category20:zF,category20b:NF,category20c:DF,tableau10:PF,tableau20:LF,viridis:NL,magma:DL,inferno:PL,plasma:LL,blueorange:OD(p(qF))};r_("blues","Blues"),r_("greens","Greens"),r_("greys","Greys"),r_("purples","Purples"),r_("reds","Reds"),r_("oranges","Oranges"),r_("brownbluegreen","BrBG"),r_("purplegreen","PRGn"),r_("pinkyellowgreen","PiYG"),r_("purpleorange","PuOr"),r_("redblue","RdBu"),r_("redgrey","RdGy"),r_("redyellowblue","RdYlBu"),r_("redyellowgreen","RdYlGn"),r_("spectral","Spectral"),r_("bluegreen","BuGn"),r_("bluepurple","BuPu"),r_("greenblue","GnBu"),r_("orangered","OrRd"),r_("purplebluegreen","PuBuGn"),r_("purpleblue","PuBu"),r_("purplered","PuRd"),r_("redpurple","RdPu"),r_("yellowgreenblue","YlGnBu"),r_("yellowgreen","YlGn"),r_("yelloworangebrown","YlOrBr"),r_("yelloworangered","YlOrRd");var FF=["x","y","font","fontSize","fontStyle","fontWeight","angle"],IF=["text","font","rotate","fontSize","fontStyle","fontWeight"];i_.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:FF}]};var UF=P(i_,Bn);UF.transform=function(e,n){function r(t){var r=e[t];return A(r)&&n.modified(r.fields)}var i=e.modified();if(i||n.changed(n.ADD_REM)||IF.some(r)){var a,o=n.materialize(n.SOURCE).source,u=this.value,s=e.as||FF,f=e.fontSize||14;if(A(f)?a=e.fontSizeRange:f=R(f),a){var c=f,l=t_("sqrt")().domain(a_(c,o)).range(a);f=function(e){return l(c(e))}}o.forEach(function(e){e[s[0]]=NaN,e[s[1]]=NaN,e[s[3]]=0});for(var d,h,p=u.words(o).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(f).random(t.random).layout(),g=u.size(),m=g[0]>>1,v=g[1]>>1,y=0,b=p.length;y<b;++y)d=p[y],h=d.datum,h[s[0]]=d.x+m,h[s[1]]=d.y+v,h[s[2]]=d.font,h[s[3]]=d.size,h[s[4]]=d.style,h[s[5]]=d.weight,h[s[6]]=d.rotate;return n.reflow(i).modifies(s)}};var BF=Object.freeze({wordcloud:i_});m_.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var WF=P(m_,Bn);WF.transform=function(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)});return n?this.reinit(e,t):this.eval(e,t)}return this.init(e,t)},WF.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)n=i[f].fname,r=o[n]||(o[n]=h_()),u.push(d_(r,f,a[f]));return this.eval(e,t)},WF.reinit=function(e,t){var n,r,i,a,o,u,s,f,c,l=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),b=m.all(),_=l.rem=l.add,x=l.mod,w=h.length,k={};if(y.set(v),t.rem.length&&(o=this.remove(e,t,l)),t.add.length&&m.add(t.add),t.mod.length)for(u={},a=t.mod,s=0,f=a.length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)c=d[s],(!g[s]||e.modified("fields",s)||t.modified(c.fields))&&(i=c.fname,(n=k[i])||(p[i]=r=h_(),k[i]=n=r.insert(c,t.source,0)),g[s]=d_(r,s,h[s]).onAdd(n,v));for(s=0,f=m.data().length;s<f;++s)o[s]||(y[s]!==v[s]?_.push(s):u[s]&&v[s]!==b&&x.push(s));return m.mask=(1<<w)-1,l},WF.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},WF.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,f=this._indices,c=e.fields,l={},d=n.add,h=u.size(),p=h+o.length,g=s.length;u.resize(p,g),u.add(o);var m=u.curr(),v=u.prev(),y=u.all();for(r=0;r<g;++r)i=c[r].fname,a=l[i]||(l[i]=f[i].insert(c[r],o,h)),s[r].onAdd(a,m);for(;h<p;++h)v[h]=y,m[h]!==y&&d.push(h)},WF.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),f=e.mod;for(n=0,r=f.length;n<r;++n)i=f[n]._index,u[i]!==s&&a.push(i)},WF.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),c=s.prev(),l=s.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)a=p[r]._index,d[a]=1,c[a]=o=f[a],f[a]=l,o!==l&&h.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},WF.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)})},WF.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,f=0;for(n.filters=0,i=0;i<s;++i)e.modified("query",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,f=0;i<s;++i)e.modified("query",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},WF.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),c=u.prev(),l=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],g=h[1],m=d[0],v=d[1],y=e.one;if(p<m)for(i=p,a=Math.min(m,g);i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(p>m)for(i=m,a=Math.min(p,v);i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(g>v)for(i=Math.max(p,v),a=g;i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<v)for(i=Math.max(m,g),a=v;i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;e.range=t.slice()},WF.incrementOne=function(e,t,n,r){var i,a,o,u=this.value,s=u.curr(),f=e.index(),c=e.bisect(e.range),l=e.bisect(t),d=l[0],h=l[1],p=c[0],g=c[1],m=e.one;if(d<p)for(i=d,a=Math.min(p,h);i<a;++i)o=f[i],s[o]^=m,n.push(o);else if(d>p)for(i=p,a=Math.min(d,g);i<a;++i)o=f[i],s[o]^=m,r.push(o);if(h>g)for(i=Math.max(d,g),a=h;i<a;++i)o=f[i],s[o]^=m,n.push(o);else if(h<g)for(i=Math.max(p,h),a=g;i<a;++i)o=f[i],s[o]^=m,r.push(o);e.range=t.slice()},v_.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};var GF=P(v_,Bn);GF.transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0===(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(e){var t=u[e]&n,r=!t&&t^s[e]&n;return r?o[e]:null}),a.filter(a.REM,function(e){var t=u[e]&n,r=t&&!(t^(t^s[e]&n));return r?o[e]:null})):(a.filter(a.ADD,f),a.filter(a.REM,function(e){return(u[e]&n)===i?o[e]:null})),a.filter(a.SOURCE,function(e){return f(e._index)})};var YF=Object.freeze({crossfilter:m_,resolvefilter:v_}),HF="4.0.0-rc.2",VF=Array.prototype.map,XF=Array.prototype.slice,ZF={identity:yl,linear:vl,log:El,ordinal:qf,pow:Al,sqrt:Cl,quantile:Rl,quantize:Tl,threshold:zl,time:Ll,utc:ql,band:x_,point:k_,sequential:O_,"bin-linear":S_,"bin-ordinal":E_};for(var JF in ZF)C_(JF,ZF[JF]);var QF=R_("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),KF=R_("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),eI=R_("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),tI=R_("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),nI=R_("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),rI=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(R_),iI={
blueorange:rI},aI={category10:vP,accent:yP,dark2:bP,paired:_P,pastel1:xP,pastel2:wP,set1:kP,set2:MP,set3:SP,category20:QF,category20b:KF,category20c:eI,tableau10:tI,tableau20:nI,viridis:NL,magma:DL,inferno:PL,plasma:LL,rainbow:Zl,sinebow:Jl,blueorange:OD(p(rI))};T_("blues","Blues"),T_("greens","Greens"),T_("greys","Greys"),T_("purples","Purples"),T_("reds","Reds"),T_("oranges","Oranges"),T_("brownbluegreen","BrBG"),T_("purplegreen","PRGn"),T_("pinkyellowgreen","PiYG"),T_("purpleorange","PuOr"),T_("redblue","RdBu"),T_("redgrey","RdGy"),T_("redyellowblue","RdYlBu"),T_("redyellowgreen","RdYlGn"),T_("spectral","Spectral"),T_("bluegreen","BuGn"),T_("bluepurple","BuPu"),T_("greenblue","GnBu"),T_("orangered","OrRd"),T_("purplebluegreen","PuBuGn"),T_("purpleblue","PuBu"),T_("purplered","PuRd"),T_("redpurple","RdPu"),T_("yellowgreenblue","YlGnBu"),T_("yellowgreen","YlGn"),T_("yelloworangebrown","YlOrBr"),T_("yelloworangered","YlOrRd");var oI={millisecond:jA,second:GA,minute:YA,hour:HA,day:VA,week:XA,month:QA,year:KA},uI={millisecond:jA,second:GA,minute:eC,hour:tC,day:nC,week:rC,month:oC,year:uC},sI="default",fI="view",cI="timer",lI="window",dI={trap:!1},hI="vega-bind",pI="vega-bind-name",gI="vega-bind-radio",mI="vega-option-",vI="outer",yI=["value","update","react","bind"];Rx.prototype.visit=function(e){var t,n,r,i=this;if(e(i))return 1;for(t=Tx(i),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};var bI,_I,xI,wI,kI,MI=1,SI=2,EI=3,OI=4,AI=5,CI=6,RI=7,TI=8,zI=9;bI={},bI[MI]="Boolean",bI[SI]="<end>",bI[EI]="Identifier",bI[OI]="Keyword",bI[AI]="Null",bI[CI]="Numeric",bI[RI]="Punctuator",bI[TI]="String",bI[zI]="RegularExpression";var NI="ArrayExpression",DI="BinaryExpression",PI="CallExpression",LI="ConditionalExpression",qI="Identifier",$I="Literal",jI="LogicalExpression",FI="MemberExpression",II="ObjectExpression",UI="Property",BI="UnaryExpression",WI="Unexpected token %0",GI="Unexpected number",YI="Unexpected string",HI="Unexpected identifier",VI="Unexpected reserved word",XI="Unexpected end of input",ZI="Invalid regular expression",JI="Invalid regular expression: missing /",QI="Octal literals are not allowed in strict mode.",KI="Duplicate data property in object literal not allowed in strict mode",eU="ILLEGAL",tU="Disabled.",nU=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),rU=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),iU={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},aU={if:1,this:1},oU={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},uU={},sU=new Date(2e3,0,1),fU="undefined"!=typeof window&&window||null,cU="Literal",lU="Identifier",dU="@",hU="%",pU=":",gU=Array.prototype.map,mU=Array.prototype.slice,vU={identity:yl,linear:vl,log:El,ordinal:qf,pow:Al,sqrt:Cl,quantile:Rl,quantize:Tl,threshold:zl,time:Ll,utc:ql,band:mk,point:yk,sequential:wk,"bin-linear":_k,"bin-ordinal":xk};for(var yU in vU)Mk(yU,vU[yU]);var bU=Sk("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),_U=Sk("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),xU=Sk("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),wU=Sk("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),kU=Sk("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),MU=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Sk),SU={blueorange:MU},EU={category10:vP,accent:yP,dark2:bP,paired:_P,pastel1:xP,pastel2:wP,set1:kP,set2:MP,set3:SP,category20:bU,category20b:_U,category20c:xU,tableau10:wU,tableau20:kU,viridis:NL,magma:DL,inferno:PL,plasma:LL,blueorange:OD(p(MU))};Ek("blues","Blues"),Ek("greens","Greens"),Ek("greys","Greys"),Ek("purples","Purples"),Ek("reds","Reds"),Ek("oranges","Oranges"),Ek("brownbluegreen","BrBG"),Ek("purplegreen","PRGn"),Ek("pinkyellowgreen","PiYG"),Ek("purpleorange","PuOr"),Ek("redblue","RdBu"),Ek("redgrey","RdGy"),Ek("redyellowblue","RdYlBu"),Ek("redyellowgreen","RdYlGn"),Ek("spectral","Spectral"),Ek("bluegreen","BuGn"),Ek("bluepurple","BuPu"),Ek("greenblue","GnBu"),Ek("orangered","OrRd"),Ek("purplebluegreen","PuBuGn"),Ek("purpleblue","PuBu"),Ek("purplered","PuRd"),Ek("redpurple","RdPu"),Ek("yellowgreenblue","YlGnBu"),Ek("yellowgreen","YlGn"),Ek("yelloworangebrown","YlOrBr"),Ek("yelloworangered","YlOrRd");var OU=Fk("area",Gh),AU=Fk("bounds",fp),CU=Fk("centroid",_p),RU={},TU="bin_",zU="intersect",NU="union",DU="index:unit",PU={random:function(){return t.random()},isArray:eA,isBoolean:L,isDate:q,isNumber:$,isObject:s,isRegExp:j,isString:f,isTuple:Q,toBoolean:W,toDate:Y,toNumber:g,toString:H,pad:B,peek:p,truncate:X,rgb:Gf,lab:ec,hcl:uc,hsl:Zf,sequence:cr,format:Iw,utcFormat:Bw,utcParse:Gw,timeFormat:Uw,timeParse:Ww,monthFormat:Hw,monthAbbrevFormat:Vw,dayFormat:Xw,dayAbbrevFormat:Zw,quarter:Jw,utcquarter:Qw,warn:ek,info:tk,debug:nk,inScope:rk,clampRange:ik,pinchDistance:ak,pinchAngle:ok,screen:uk,containerSize:fk,windowSize:sk,span:dk,merge:lk,flush:ck,bandspace:Pk,inrange:Qk,setdata:Hk,pathShape:Uk,panLinear:_,panLog:x,panPow:w,zoomLinear:M,zoomLog:S,zoomPow:E,encode:Kk,modify:rM},LU=["view","item","group","xy","x","y"],qU="event.vega.",$U="this.",jU={};mM("bandwidth",Dk,Tk),mM("copy",Lk,Tk),mM("domain",Nk,Tk),mM("range",zk,Tk),mM("invert",$k,Tk),mM("scale",qk,Tk),mM("gradient",jk,Tk),mM("geoArea",OU,Tk),mM("geoBounds",AU,Tk),mM("geoCentroid",CU,Tk),mM("geoShape",Ik,Tk),mM("indata",Gk,Yk),mM("data",Bk,Wk),mM("vlSingle",uM,Wk),mM("vlSingleDomain",cM,Wk),mM("vlMulti",uM,fM),mM("vlMultiDomain",cM,fM),mM("vlInterval",sM,Wk),mM("vlIntervalDomain",lM,Wk),mM("treePath",Zk,Wk),mM("treeAncestors",Jk,Wk);var FU,IU,UU={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+c("$"+e)+"]"},functions:vM,constants:oU,visitors:jU},BU=jw(UU),WU="$",GU={$tupleid:1,toString:function(){return":_tupleid_:"}},YU=kM("key"),HU="ascending",VU="descending",XU="scope",ZU="view",JU="timer",QU="view",KU="[",eB="]",tB="{",nB="}",rB=":",iB=",",aB="@",oB=">",uB=/[[\]{}]/,sB={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},fB="var datum=event.item&&event.item.datum;",cB=XM("aggregate"),lB=XM("axisticks"),dB=XM("bound"),hB=XM("collect"),pB=XM("compare"),gB=XM("datajoin"),mB=XM("encode"),vB=XM("facet"),yB=XM("field"),bB=XM("key"),_B=XM("legendentries"),xB=XM("mark"),wB=XM("multiextent"),kB=XM("multivalues"),MB=XM("overlap"),SB=XM("params"),EB=XM("prefacet"),OB=XM("projection"),AB=XM("proxy"),CB=XM("relay"),RB=XM("render"),TB=XM("scale"),zB=XM("sieve"),NB=XM("sortitems"),DB=XM("viewlayout"),PB=XM("values"),LB=0,qB=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],$B=V(qB),jB=V(qB.slice(4,9)),FB=V(qB.slice(9)),IB=V(qB.slice(1,6)),UB="top",BB="left",WB="right",GB="bottom",YB="center",HB="vertical",VB="start",XB="end",ZB="index",JB="label",QB="offset",KB="perc",eW="perc2",tW="size",nW="value",rW="guide-label",iW="guide-title",aW="group-title",oW="symbol",uW="gradient",sW="discrete",fW=["size","shape","fill","stroke","strokeDash","opacity"],cW={name:1,interactive:1},lW=V(["rule"]),dW=V(["group","image","rect"]),hW="mark",pW="frame",gW="scope",mW="axis",vW="axis-domain",yW="axis-grid",bW="axis-label",_W="axis-tick",xW="axis-title",wW="legend",kW="legend-band",MW="legend-entry",SW="legend-gradient",EW="legend-label",OW="legend-symbol",AW="legend-title",CW="title",RW="group",TW="rect",zW="rule",NW="symbol",DW="text",PW="datum."+KB+'<=0?"left":datum.'+KB+'>=1?"right":"center"',LW="datum."+KB+'<=0?"bottom":datum.'+KB+'>=1?"top":"middle"',qW={value:0};xE.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(e.add(t[0]);r<n;++r)t[r].params.pulse=wM(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new xE(e,i,o,a,u)};var $W=xE.prototype;$W.countsRef=function(e,t,n){var r,i,a,o=this,u=o.counts||(o.counts={}),s=wE(t);return null!=s&&(e=o.scope,r=u[s]),r?n&&n.field&&kE(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:wM(o.output)},n&&n.field&&kE(e,a,n),i=e.add(cB(a)),r=e.add(hB({pulse:wM(i)})),r={agg:i,ref:wM(r)},null!=s&&(u[s]=r)),r.ref},$W.tuplesRef=function(){return wM(this.values)},$W.extentRef=function(e,t){return ME(e,this,"extent","extent",t,!1)},$W.domainRef=function(e,t){return ME(e,this,"domain","values",t,!1)},$W.valuesRef=function(e,t,n){return ME(e,this,"vals","values",t,n||!0)},$W.lookupRef=function(e,t){return ME(e,this,"lookup","tupleindex",t,!1)},$W.indataRef=function(e,t){return ME(e,this,"indata","tupleindex",t,!0,!0)};var jW=PE(c(BB),c(WB),c(YB)),FW=PE('+(item.orient==="'+WB+'")','+(item.orient!=="'+BB+'")',"0.5"),IW=V(["width","height","padding","autosize"]),UW=QE.prototype=KE.prototype;UW.fork=function(){return new KE(this)},UW.isSubscope=function(){return this._subid>0},UW.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},UW.id=function(){return(this._subid?this._subid+":":0)+this._id++},UW.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},UW.proxy=function(e){var t=e instanceof bM?wM(e):e;return this.add(AB({value:t}))},UW.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},UW.addUpdate=function(e){return this.updates.push(e),e},UW.finish=function(){function e(e,t,n){var r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}var t,n;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data){n=this.data[t],e(n.input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values");for(var r in n.index)e(n.index[r],t,"index:"+r)}return this},UW.pushState=function(e,t,n){this._encode.push(wM(this.add(zB({pulse:e})))),this._parent.push(t),this._lookup.push(n?wM(this.proxy(n)):null),this._markpath.push(-1)},UW.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},UW.parent=function(){return p(this._parent)},UW.encode=function(){return p(this._encode)},UW.lookup=function(){return p(this._lookup)},UW.markpath=function(){var e=this._markpath;return++e[e.length-1]},UW.fieldRef=function(e,t){if(f(e))return kM(e,t);e.signal||o("Unsupported field reference: "+c(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=wM(this.add(yB(n)))),i},UW.compareRef=function(e,t){function n(e){return AM(e)?(i=!0,wM(r[e.signal])):e}var r=this.signals,i=!1,a=O(e.field).map(n),o=O(e.order).map(n);return t&&a.push(GU),i?wM(this.add(pB({fields:a,orders:o}))):MM(a,o)},UW.keyRef=function(e,t){function n(e){return AM(e)?(i=!0,wM(r[e.signal])):e}var r=this.signals,i=!1;return e=O(e).map(n),i?wM(this.add(bB({fields:e,flat:t}))):SM(e,t)},UW.sortRef=function(e){if(!e)return e;var t=[OM(e.op,e.field),GU],n=e.order||HU;return n.signal?wM(this.add(pB({fields:t,orders:[n=this.signalRef(n.signal),n]}))):MM(t,[n,n])},UW.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},UW.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&o("Duplicate signal name: "+c(e));var n=t instanceof bM?t:this.add(xM(t));return this.signals[e]=n},UW.getSignal=function(e){return this.signals[e]||o("Unrecognized signal name: "+c(e)),this.signals[e]},UW.signalRef=function(e){return this.signals[e]?wM(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(xM(null))),wM(this.lambdas[e]))},UW.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=yM(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},UW.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},UW.objectProperty=function(e){return e&&s(e)?this.signalRef(e.signal||eO(e)):e},UW.addBinding=function(e,t){this.bindings||o("Nested signals do not support binding: "+c(e)),this.bindings.push(z({signal:e},t))},UW.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&o("Duplicate scale or projection name: "+c(e)),this.scales[e]=this.add(t)},UW.addScale=function(e,t){this.addScaleProj(e,TB(t))},UW.addProjection=function(e,t){this.addScaleProj(e,OB(t))},UW.getScale=function(e){return this.scales[e]||o("Unrecognized scale name: "+c(e)),this.scales[e]},UW.projectionRef=UW.scaleRef=function(e){return wM(this.getScale(e))},UW.projectionType=UW.scaleType=function(e){return this.getScale(e).params.type},UW.addData=function(e,t){return this.data.hasOwnProperty(e)&&o("Duplicate data set name: "+c(e)),this.data[e]=t},UW.getData=function(e){return this.data[e]||o("Undefined data set name: "+c(e)),this.data[e]},UW.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&o("Duplicate data set name: "+c(e)),this.addData(e,xE.fromEntries(this,t))};var BW="sans-serif",WW=30,GW=2,YW="#4c78a8",HW="#000",VW="#888",XW="#ddd",ZW=[{key:"$ref",parse:pO},{key:"$key",parse:mO},{key:"$expr",parse:gO},{key:"$field",parse:vO},{key:"$encode",parse:bO},{key:"$compare",parse:yO},{key:"$context",parse:_O},{key:"$subflow",parse:xO},{key:"$tupleid",parse:wO}],JW={skip:!0};DO.prototype=PO.prototype={fork:function(){var e=new PO(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),SO(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.request(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach(function(e){n[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[kO(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:TO,setState:zO};var QW="width",KW="height",eG="padding",tG={skip:!0},nG=P(JO,In);nG.run=function(e){if(In.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this},nG.render=function(){return this._renderer&&(this._resize&&(this._resize=0,V_(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},nG.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},nG.container=function(){return this._el},nG.scenegraph=function(){return this._scenegraph},nG.origin=function(){return this._origin.slice()},nG.signal=function(e,t,n){var r=QO(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},nG.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},nG.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},nG.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},nG.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},nG.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},nG.renderer=function(e){return arguments.length?(qs(e)||o("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},nG.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},nG.loader=function(e){return arguments.length?(e!==this._loader&&(In.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},nG.resize=function(){return this._autosize=1,this},nG._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},nG._resizeView=FO,nG.addEventListener=function(e,t,n){var r=t;return n&&n.trap===!1||(r=gx(this,t),r.raw=t),this._handler.on(e,r),this},nG.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},nG.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},nG.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},nG.addSignalListener=function(e,t){var n=QO(this,e),r=KO(n,t);return r||(r=gx(this,function(){t(e,n.value)}),r.handler=t,this.on(n,null,r)),this},nG.removeSignalListener=function(e,t){var n=QO(this,e),r=KO(n,t);return r&&n._targets.remove(r),this},nG.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},nG.timer=GO,nG.events=K_,nG.finalize=ix,nG.hover=rx,nG.data=I_,nG.change=U_,nG.insert=B_,nG.remove=W_,nG.initialize=vx,nG.toImageURL=_x,nG.toCanvas=wx,nG.toSVG=kx,nG.getState=IO,nG.setState=WO,z(LC,TR,wN,uq,xj,Bj,lF,kF,BF,YF),t.version=HF,t.Dataflow=In,t.EventStream=de,t.Parameters=ue,t.Pulse=Mn,t.MultiPulse=An,t.Operator=se,t.Transform=Bn,t.changeset=oe,t.ingest=te,t.isTuple=Q,t.definition=Wn,t.transform=Gn,t.transforms=LC,t.tupleid=K,t.scale=C_,t.scheme=z_,t.interpolate=D_,t.interpolateRange=N_,t.timeInterval=L_,t.utcInterval=q_,t.projection=sm,t.View=JO,t.parse=aO,t.expressionFunction=mM,t.formatLocale=ll,t.timeFormatLocale=ln,t.runtime=RO,t.runtimeContext=NO,t.bin=er,t.bootstrapCI=kr,t.quartiles=Mr,t.setRandom=rr,t.randomInteger=Sr,t.randomKDE=Or,t.randomMixture=Cr,t.randomNormal=Er,t.randomUniform=Rr,t.accessor=r,t.accessorName=i,t.accessorFields=a,t.id=nA,t.identity=rA,t.zero=iA,t.one=aA,t.truthy=oA,t.falsy=uA,t.logger=h,t.None=sA,t.Error=fA,t.Warn=cA,t.Info=lA,t.Debug=dA,t.panLinear=_,t.panLog=x,t.panPow=w,t.zoomLinear=M,t.zoomLog=S,t.zoomPow=E,t.array=O,t.compare=C,t.constant=R,t.debounce=T,t.error=o,t.extend=z,t.extentIndex=N,t.fastmap=D,t.field=l,t.inherits=P,t.isArray=eA,t.isBoolean=L,t.isDate=q,t.isFunction=A,t.isNumber=$,t.isObject=s,t.isRegExp=j,t.isString=f,t.key=F,t.merge=I,t.pad=B,t.peek=p,t.repeat=U,t.splitAccessPath=u,t.stringValue=c,t.toBoolean=W,t.toDate=Y,t.toNumber=g,t.toString=H,t.toSet=V,t.truncate=X,t.visitArray=Z,t.loader=ge,t.read=pn,t.inferType=ke,t.inferTypes=Me,t.typeParsers=AA,t.formats=Ze,t.Bounds=Li,t.Gradient=qi,t.GroupItem=ji,t.ResourceLoader=Yi,t.Item=$i,t.Scenegraph=Ku,t.Handler=ss,t.Renderer=cs,t.CanvasHandler=ls,t.CanvasRenderer=vs,t.SVGHandler=_s,t.SVGRenderer=Ms,t.SVGStringRenderer=Ns,t.RenderType=sN,t.renderModule=qs,t.Marks=Rz,t.boundClip=$s,t.boundContext=qo,t.boundStroke=Lo,t.boundItem=Vu,t.boundMark=Xu,t.pathCurves=Za,t.pathSymbols=ro,t.pathRectangle=co,t.pathTrail=lo,t.pathParse=Ja,t.pathRender=to,t.point=os,t.domCreate=ts,t.domFind=ns,t.domChild=rs,t.domClear=is,t.openTag=ws,t.closeTag=ks,t.font=Uu,t.textMetrics=Sz,t.resetSVGClipId=uu,t.sceneEqual=js,t.pathEqual=Fs,t.sceneToJSON=Zu,t.sceneFromJSON=Ju,t.sceneZOrder=Go,t.sceneVisit=Yo,t.scenePickVisit=Ho,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(1).Buffer)},,,,,,,,,,,,,,,,,function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function n(e,n){var r=t(e);return function(t,i){return n(r(t),i,e)}}function r(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}var i={},a={},o=34,u=10,s=13,f=function(e){function f(e,r){var i,a,o=c(e,function(e,o){return i?i(e,o-1):(a=e,void(i=r?n(e,r):t(e)))});return o.columns=a||[],o}function c(e,t){function n(){if(h)return a;if(p)return p=!1,i;var t,n,r=l;if(e.charCodeAt(r)===o){for(;l++<c&&e.charCodeAt(l)!==o||e.charCodeAt(++l)===o;);return(t=l)>=c?h=!0:(n=e.charCodeAt(l++))===u?p=!0:n===s&&(p=!0,e.charCodeAt(l)===u&&++l),e.slice(r+1,t-1).replace(/""/g,'"')}for(;l<c;){if((n=e.charCodeAt(t=l++))===u)p=!0;else if(n===s)p=!0,e.charCodeAt(l)===u&&++l;else if(n!==m)continue;return e.slice(r,t)}return h=!0,e.slice(r,c)}var r,f=[],c=e.length,l=0,d=0,h=c<=0,p=!1;for(e.charCodeAt(c-1)===u&&--c,e.charCodeAt(c-1)===s&&--c;(r=n())!==a;){for(var g=[];r!==i&&r!==a;)g.push(r),r=n();t&&null==(g=t(g,d++))||f.push(g)}return f}function l(t,n){return null==n&&(n=r(t)),[n.map(p).join(e)].concat(t.map(function(t){return n.map(function(e){return p(t[e])}).join(e)})).join("\n")}function d(e){return e.map(h).join("\n")}function h(t){return t.map(p).join(e)}function p(e){return null==e?"":g.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var g=new RegExp('["'+e+"\n\r]"),m=e.charCodeAt(0);return{parse:f,parseRows:c,format:l,formatRows:d}},c=f(","),l=c.parse,d=c.parseRows,h=c.format,p=c.formatRows,g=f("\t"),m=g.parse,v=g.parseRows,y=g.format,b=g.formatRows;e.dsvFormat=f,e.csvParse=l,e.csvParseRows=d,e.csvFormat=h,e.csvFormatRows=p,e.tsvParse=m,e.tsvParseRows=v,e.tsvFormat=y,e.tsvFormatRows=b,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(148),n(17),n(147),n(38))}(this,function(e,t,n,r,i){"use strict";function a(e){return e.x+e.vx}function o(e){return e.y+e.vy}function u(e){return e.index}function s(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function f(e){return e.x}function c(e){return e.y}var l=function(e,t){function n(){var n,i,a=r.length,o=0,u=0;for(n=0;n<a;++n)i=r[n],o+=i.x,u+=i.y;for(o=o/a-e,u=u/a-t,n=0;n<a;++n)i=r[n],i.x-=o,i.y-=u}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n},d=function(e){return function(){return e}},h=function(){return 1e-6*(Math.random()-.5)},p=function(e){function n(){function e(e,t,n,r,i){var a=e.data,o=e.r,u=g+o;{if(!a)return t>d+u||r<d-u||n>p+u||i<p-u;if(a.index>l.index){var s=d-a.x-a.vx,c=p-a.y-a.vy,v=s*s+c*c;v<u*u&&(0===s&&(s=h(),v+=s*s),0===c&&(c=h(),v+=c*c),v=(u-(v=Math.sqrt(v)))/v*f,l.vx+=(s*=v)*(u=(o*=o)/(m+o)),l.vy+=(c*=v)*u,a.vx-=s*(u=1-u),a.vy-=c*u)}}}for(var n,i,l,d,p,g,m,v=u.length,y=0;y<c;++y)for(i=t.quadtree(u,a,o).visitAfter(r),n=0;n<v;++n)l=u[n],g=s[l.index],m=g*g,d=l.x+l.vx,p=l.y+l.vy,i.visit(e)}function r(e){if(e.data)return e.r=s[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function i(){if(u){var t,n,r=u.length;for(s=new Array(r),t=0;t<r;++t)n=u[t],s[n.index]=+e(n,t,u)}}var u,s,f=1,c=1;return"function"!=typeof e&&(e=d(null==e?1:+e)),n.initialize=function(e){u=e,i()},n.iterations=function(e){return arguments.length?(c=+e,n):c},n.strength=function(e){return arguments.length?(f=+e,n):f},n.radius=function(t){return arguments.length?(e="function"==typeof t?t:d(+t),i(),n):e},n},g=function(e){function t(e){return 1/Math.min(p[e.source.index],p[e.target.index])}function r(t){for(var n=0,r=e.length;n<b;++n)for(var i,a,o,u,s,l,d,p=0;p<r;++p)i=e[p],a=i.source,o=i.target,u=o.x+o.vx-a.x-a.vx||h(),s=o.y+o.vy-a.y-a.vy||h(),l=Math.sqrt(u*u+s*s),l=(l-c[p])/l*t*f[p],u*=l,s*=l,o.vx-=u*(d=g[p]),o.vy-=s*d,a.vx+=u*(d=1-d),a.vy+=s*d}function i(){if(l){var t,r,i=l.length,u=e.length,d=n.map(l,m);for(t=0,p=new Array(i);t<u;++t)r=e[t],r.index=t,"object"!=typeof r.source&&(r.source=s(d,r.source)),"object"!=typeof r.target&&(r.target=s(d,r.target)),p[r.source.index]=(p[r.source.index]||0)+1,p[r.target.index]=(p[r.target.index]||0)+1;for(t=0,g=new Array(u);t<u;++t)r=e[t],g[t]=p[r.source.index]/(p[r.source.index]+p[r.target.index]);f=new Array(u),a(),c=new Array(u),o()}}function a(){if(l)for(var t=0,n=e.length;t<n;++t)f[t]=+v(e[t],t,e)}function o(){if(l)for(var t=0,n=e.length;t<n;++t)c[t]=+y(e[t],t,e)}var f,c,l,p,g,m=u,v=t,y=d(30),b=1;return null==e&&(e=[]),r.initialize=function(e){l=e,i()},r.links=function(t){return arguments.length?(e=t,i(),r):e},r.id=function(e){return arguments.length?(m=e,r):m},r.iterations=function(e){return arguments.length?(b=+e,r):b},r.strength=function(e){return arguments.length?(v="function"==typeof e?e:d(+e),a(),r):v},r.distance=function(e){return arguments.length?(y="function"==typeof e?e:d(+e),o(),r):y},r},m=10,v=Math.PI*(3-Math.sqrt(5)),y=function(e){function t(){a(),y.call("tick",s),f<c&&(g.stop(),y.call("end",s))}function a(){var t,n,r=e.length;for(f+=(d-f)*l,p.each(function(e){e(f)}),t=0;t<r;++t)n=e[t],null==n.fx?n.x+=n.vx*=h:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=h:(n.y=n.fy,n.vy=0)}function o(){for(var t,n=0,r=e.length;n<r;++n){if(t=e[n],t.index=n,isNaN(t.x)||isNaN(t.y)){var i=m*Math.sqrt(n),a=n*v;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function u(t){return t.initialize&&t.initialize(e),t}var s,f=1,c=.001,l=1-Math.pow(c,1/300),d=0,h=.6,p=n.map(),g=i.timer(t),y=r.dispatch("tick","end");return null==e&&(e=[]),o(),s={tick:a,restart:function(){return g.restart(t),s},stop:function(){return g.stop(),s},nodes:function(t){return arguments.length?(e=t,o(),p.each(u),s):e},alpha:function(e){return arguments.length?(f=+e,s):f},alphaMin:function(e){return arguments.length?(c=+e,s):c},alphaDecay:function(e){return arguments.length?(l=+e,s):+l},alphaTarget:function(e){return arguments.length?(d=+e,s):d},velocityDecay:function(e){return arguments.length?(h=1-e,s):1-h},force:function(e,t){return arguments.length>1?(null==t?p.remove(e):p.set(e,u(t)),s):p.get(e)},find:function(t,n,r){var i,a,o,u,s,f=0,c=e.length;for(null==r?r=1/0:r*=r,f=0;f<c;++f)u=e[f],i=t-u.x,a=n-u.y,o=i*i+a*a,o<r&&(s=u,r=o);return s},on:function(e,t){return arguments.length>1?(y.on(e,t),s):y.on(e)}}},b=function(){function e(e){var n,s=a.length,l=t.quadtree(a,f,c).visitAfter(r);for(u=e,n=0;n<s;++n)o=a[n],l.visit(i)}function n(){if(a){var e,t,n=a.length;for(s=new Array(n),e=0;e<n;++e)t=a[e],s[t.index]=+l(t,e,a)}}function r(e){var t,n,r,i,a,o=0,u=0;if(e.length){for(r=i=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,u+=n,r+=n*t.x,i+=n*t.y);e.x=r/u,e.y=i/u}else{t=e,t.x=t.data.x,t.y=t.data.y;do o+=s[t.data.index];while(t=t.next)}e.value=o}function i(e,t,n,r){if(!e.value)return!0;var i=e.x-o.x,a=e.y-o.y,f=r-t,c=i*i+a*a;if(f*f/m<c)return c<g&&(0===i&&(i=h(),c+=i*i),0===a&&(a=h(),c+=a*a),c<p&&(c=Math.sqrt(p*c)),o.vx+=i*e.value*u/c,o.vy+=a*e.value*u/c),!0;if(!(e.length||c>=g)){(e.data!==o||e.next)&&(0===i&&(i=h(),c+=i*i),0===a&&(a=h(),c+=a*a),c<p&&(c=Math.sqrt(p*c)));do e.data!==o&&(f=s[e.data.index]*u/c,o.vx+=i*f,o.vy+=a*f);while(e=e.next)}}var a,o,u,s,l=d(-30),p=1,g=1/0,m=.81;return e.initialize=function(e){a=e,n()},e.strength=function(t){return arguments.length?(l="function"==typeof t?t:d(+t),n(),e):l},e.distanceMin=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e.distanceMax=function(t){return arguments.length?(g=t*t,e):Math.sqrt(g)},e.theta=function(t){return arguments.length?(m=t*t,e):Math.sqrt(m)},e},_=function(e,t,n){function r(e){for(var r=0,i=a.length;r<i;++r){var s=a[r],f=s.x-t||1e-6,c=s.y-n||1e-6,l=Math.sqrt(f*f+c*c),d=(u[r]-l)*o[r]*e/l;s.vx+=f*d,s.vy+=c*d}}function i(){if(a){var t,n=a.length;for(o=new Array(n),u=new Array(n),t=0;t<n;++t)u[t]=+e(a[t],t,a),o[t]=isNaN(u[t])?0:+s(a[t],t,a)}}var a,o,u,s=d(.1);return"function"!=typeof e&&(e=d(+e)),null==t&&(t=0),null==n&&(n=0),r.initialize=function(e){a=e,i()},r.strength=function(e){return arguments.length?(s="function"==typeof e?e:d(+e),i(),r):s},r.radius=function(t){return arguments.length?(e="function"==typeof t?t:d(+t),i(),r):e},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(e){return arguments.length?(n=+e,r):n},r},x=function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vx+=(a[n]-t.x)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=d(.1);return"function"!=typeof e&&(e=d(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:d(+e),n(),t):o},t.x=function(r){return arguments.length?(e="function"==typeof r?r:d(+r),n(),t):e},t},w=function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vy+=(a[n]-t.y)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=d(.1);return"function"!=typeof e&&(e=d(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:d(+e),n(),t):o},t.y=function(r){return arguments.length?(e="function"==typeof r?r:d(+r),n(),t):e},t};e.forceCenter=l,e.forceCollide=p,e.forceLink=g,e.forceManyBody=b,e.forceRadial=_,e.forceSimulation=y,e.forceX=x,e.forceY=w,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(16))}(this,function(e,t){"use strict";function n(){return new r}function r(){
this.reset()}function i(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}function a(e){return e>1?0:e<-1?Pn:Math.acos(e)}function o(e){return e>1?Ln:e<-1?-Ln:Math.asin(e)}function u(e){return(e=Xn(e/2))*e}function s(){}function f(e,t){e&&er.hasOwnProperty(e.type)&&er[e.type](e,t)}function c(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function l(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)c(e[n],t,1);t.polygonEnd()}function d(e,t){e&&Kn.hasOwnProperty(e.type)?Kn[e.type](e,t):f(e,t)}function h(){rr.point=g}function p(){m(en,tn)}function g(e,t){rr.point=m,en=e,tn=t,e*=Fn,t*=Fn,nn=e,rn=Wn(t=t/2+qn),an=Xn(t)}function m(e,t){e*=Fn,t*=Fn,t=t/2+qn;var n=e-nn,r=n>=0?1:-1,i=r*n,a=Wn(t),o=Xn(t),u=an*o,s=rn*a+u*Wn(i),f=u*r*Xn(i);tr.add(Bn(f,s)),nn=e,rn=a,an=o}function v(e){return nr.reset(),d(e,rr),2*nr}function y(e){return[Bn(e[1],e[0]),o(e[2])]}function b(e){var t=e[0],n=e[1],r=Wn(n);return[r*Wn(t),r*Xn(t),Xn(n)]}function _(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function x(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function w(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function k(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function M(e){var t=Jn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function S(e,t){pn.push(gn=[on=e,sn=e]),t<un&&(un=t),t>fn&&(fn=t)}function E(e,t){var n=b([e*Fn,t*Fn]);if(hn){var r=x(hn,n),i=[r[1],-r[0],0],a=x(i,r);M(a),a=y(a);var o,u=e-cn,s=u>0?1:-1,f=a[0]*jn*s,c=In(u)>180;c^(s*cn<f&&f<s*e)?(o=a[1]*jn,o>fn&&(fn=o)):(f=(f+360)%360-180,c^(s*cn<f&&f<s*e)?(o=-a[1]*jn,o<un&&(un=o)):(t<un&&(un=t),t>fn&&(fn=t))),c?e<cn?z(on,e)>z(on,sn)&&(sn=e):z(e,sn)>z(on,sn)&&(on=e):sn>=on?(e<on&&(on=e),e>sn&&(sn=e)):e>cn?z(on,e)>z(on,sn)&&(sn=e):z(e,sn)>z(on,sn)&&(on=e)}else pn.push(gn=[on=e,sn=e]);t<un&&(un=t),t>fn&&(fn=t),hn=n,cn=e}function O(){ar.point=E}function A(){gn[0]=on,gn[1]=sn,ar.point=S,hn=null}function C(e,t){if(hn){var n=e-cn;ir.add(In(n)>180?n+(n>0?360:-360):n)}else ln=e,dn=t;rr.point(e,t),E(e,t)}function R(){rr.lineStart()}function T(){C(ln,dn),rr.lineEnd(),In(ir)>Nn&&(on=-(sn=180)),gn[0]=on,gn[1]=sn,hn=null}function z(e,t){return(t-=e)<0?t+360:t}function N(e,t){return e[0]-t[0]}function D(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function P(e){var t,n,r,i,a,o,u;if(fn=sn=-(on=un=1/0),pn=[],d(e,ar),n=pn.length){for(pn.sort(N),t=1,r=pn[0],a=[r];t<n;++t)i=pn[t],D(r,i[0])||D(r,i[1])?(z(r[0],i[1])>z(r[0],r[1])&&(r[1]=i[1]),z(i[0],r[1])>z(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-(1/0),n=a.length-1,t=0,r=a[n];t<=n;r=i,++t)i=a[t],(u=z(r[1],i[0]))>o&&(o=u,on=i[0],sn=r[1])}return pn=gn=null,on===1/0||un===1/0?[[NaN,NaN],[NaN,NaN]]:[[on,un],[sn,fn]]}function L(e,t){e*=Fn,t*=Fn;var n=Wn(t);q(n*Wn(e),n*Xn(e),Xn(t))}function q(e,t,n){++mn,yn+=(e-yn)/mn,bn+=(t-bn)/mn,_n+=(n-_n)/mn}function $(){or.point=j}function j(e,t){e*=Fn,t*=Fn;var n=Wn(t);Cn=n*Wn(e),Rn=n*Xn(e),Tn=Xn(t),or.point=F,q(Cn,Rn,Tn)}function F(e,t){e*=Fn,t*=Fn;var n=Wn(t),r=n*Wn(e),i=n*Xn(e),a=Xn(t),o=Bn(Jn((o=Rn*a-Tn*i)*o+(o=Tn*r-Cn*a)*o+(o=Cn*i-Rn*r)*o),Cn*r+Rn*i+Tn*a);vn+=o,xn+=o*(Cn+(Cn=r)),wn+=o*(Rn+(Rn=i)),kn+=o*(Tn+(Tn=a)),q(Cn,Rn,Tn)}function I(){or.point=L}function U(){or.point=W}function B(){G(On,An),or.point=L}function W(e,t){On=e,An=t,e*=Fn,t*=Fn,or.point=G;var n=Wn(t);Cn=n*Wn(e),Rn=n*Xn(e),Tn=Xn(t),q(Cn,Rn,Tn)}function G(e,t){e*=Fn,t*=Fn;var n=Wn(t),r=n*Wn(e),i=n*Xn(e),a=Xn(t),u=Rn*a-Tn*i,s=Tn*r-Cn*a,f=Cn*i-Rn*r,c=Jn(u*u+s*s+f*f),l=o(c),d=c&&-l/c;Mn+=d*u,Sn+=d*s,En+=d*f,vn+=l,xn+=l*(Cn+(Cn=r)),wn+=l*(Rn+(Rn=i)),kn+=l*(Tn+(Tn=a)),q(Cn,Rn,Tn)}function Y(e){mn=vn=yn=bn=_n=xn=wn=kn=Mn=Sn=En=0,d(e,or);var t=Mn,n=Sn,r=En,i=t*t+n*n+r*r;return i<Dn&&(t=xn,n=wn,r=kn,vn<Nn&&(t=yn,n=bn,r=_n),i=t*t+n*n+r*r,i<Dn)?[NaN,NaN]:[Bn(n,t)*jn,o(r/Jn(i))*jn]}function H(e){return function(){return e}}function V(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function X(e,t){return[e>Pn?e-$n:e<-Pn?e+$n:e,t]}function Z(e,t,n){return(e%=$n)?t||n?V(Q(e),K(t,n)):Q(e):t||n?K(t,n):X}function J(e){return function(t,n){return t+=e,[t>Pn?t-$n:t<-Pn?t+$n:t,n]}}function Q(e){var t=J(e);return t.invert=J(-e),t}function K(e,t){function n(e,t){var n=Wn(t),s=Wn(e)*n,f=Xn(e)*n,c=Xn(t),l=c*r+s*i;return[Bn(f*a-l*u,s*r-c*i),o(l*a+f*u)]}var r=Wn(e),i=Xn(e),a=Wn(t),u=Xn(t);return n.invert=function(e,t){var n=Wn(t),s=Wn(e)*n,f=Xn(e)*n,c=Xn(t),l=c*a-f*u;return[Bn(f*a+c*u,s*r+l*i),o(l*r-s*i)]},n}function ee(e){function t(t){return t=e(t[0]*Fn,t[1]*Fn),t[0]*=jn,t[1]*=jn,t}return e=Z(e[0]*Fn,e[1]*Fn,e.length>2?e[2]*Fn:0),t.invert=function(t){return t=e.invert(t[0]*Fn,t[1]*Fn),t[0]*=jn,t[1]*=jn,t},t}function te(e,t,n,r,i,a){if(n){var o=Wn(t),u=Xn(t),s=r*n;null==i?(i=t+r*$n,a=t-s/2):(i=ne(o,i),a=ne(o,a),(r>0?i<a:i>a)&&(i+=r*$n));for(var f,c=i;r>0?c>a:c<a;c-=s)f=y([o,-u*Wn(c),-u*Xn(c)]),e.point(f[0],f[1])}}function ne(e,t){t=b(t),t[0]-=e,M(t);var n=a(-t[1]);return((-t[2]<0?-n:n)+$n-Nn)%$n}function re(){function e(e,t){n.push(e=r(e,t)),e[0]*=jn,e[1]*=jn}function t(){var e=i.apply(this,arguments),t=a.apply(this,arguments)*Fn,s=o.apply(this,arguments)*Fn;return n=[],r=Z(-e[0]*Fn,-e[1]*Fn,0).invert,te(u,t,s,1),e={type:"Polygon",coordinates:[n]},n=r=null,e}var n,r,i=H([0,0]),a=H(90),o=H(6),u={point:e};return t.center=function(e){return arguments.length?(i="function"==typeof e?e:H([+e[0],+e[1]]),t):i},t.radius=function(e){return arguments.length?(a="function"==typeof e?e:H(+e),t):a},t.precision=function(e){return arguments.length?(o="function"==typeof e?e:H(+e),t):o},t}function ie(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:s,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ae(e,t){return In(e[0]-t[0])<Nn&&In(e[1]-t[1])<Nn}function oe(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ue(e,t,n,r,i){var a,o,u=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(ae(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);return void i.lineEnd()}u.push(n=new oe(r,e,null,!0)),s.push(n.o=new oe(r,null,n,!1)),u.push(n=new oe(o,e,null,!1)),s.push(n.o=new oe(o,null,n,!0))}}),u.length){for(s.sort(t),se(u),se(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var f,c,l=u[0];;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=f.length;a<o;++a)i.point((c=f[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(f=d.p.z,a=f.length-1;a>=0;--a)i.point((c=f[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,f=d.z,h=!h}while(!d.v);i.lineEnd()}}}function se(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function fe(e,t){var n=t[0],r=t[1],i=Xn(r),a=[Xn(n),-Wn(n),0],u=0,s=0;yr.reset(),1===i?r=Ln+Nn:i===-1&&(r=-Ln-Nn);for(var f=0,c=e.length;f<c;++f)if(d=(l=e[f]).length)for(var l,d,h=l[d-1],p=h[0],g=h[1]/2+qn,m=Xn(g),v=Wn(g),y=0;y<d;++y,p=w,m=S,v=E,h=_){var _=l[y],w=_[0],k=_[1]/2+qn,S=Xn(k),E=Wn(k),O=w-p,A=O>=0?1:-1,C=A*O,R=C>Pn,T=m*S;if(yr.add(Bn(T*A*Xn(C),v*E+T*Wn(C))),u+=R?O+A*$n:O,R^p>=n^w>=n){var z=x(b(h),b(_));M(z);var N=x(a,z);M(N);var D=(R^O>=0?-1:1)*o(N[2]);(r>D||r===D&&(z[0]||z[1]))&&(s+=R^O>=0?1:-1)}}return(u<-Nn||u<Nn&&yr<-Nn)^1&s}function ce(e,n,r,i){return function(a){function o(t,n){e(t,n)&&a.point(t,n)}function u(e,t){m.point(e,t)}function s(){_.point=u,m.lineStart()}function f(){_.point=o,m.lineEnd()}function c(e,t){g.push([e,t]),y.point(e,t)}function l(){y.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),y.lineEnd();var e,t,n,r,i=y.clean(),o=v.result(),u=o.length;if(g.pop(),h.push(g),g=null,u)if(1&i){if(n=o[0],(t=n.length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else u>1&&2&i&&o.push(o.pop().concat(o.shift())),p.push(o.filter(le))}var h,p,g,m=n(a),v=ie(),y=n(v),b=!1,_={point:o,lineStart:s,lineEnd:f,polygonStart:function(){_.point=c,_.lineStart=l,_.lineEnd=d,p=[],h=[]},polygonEnd:function(){_.point=o,_.lineStart=s,_.lineEnd=f,p=t.merge(p);var e=fe(h,i);p.length?(b||(a.polygonStart(),b=!0),ue(p,de,e,r,a)):e&&(b||(a.polygonStart(),b=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),p=h=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return _}}function le(e){return e.length>1}function de(e,t){return((e=e.x)[0]<0?e[1]-Ln-Nn:Ln-e[1])-((t=t.x)[0]<0?t[1]-Ln-Nn:Ln-t[1])}function he(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var u=a>0?Pn:-Pn,s=In(a-n);In(s-Pn)<Nn?(e.point(n,r=(r+o)/2>0?Ln:-Ln),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(a,r),t=0):i!==u&&s>=Pn&&(In(n-i)<Nn&&(n-=i*Nn),In(a-u)<Nn&&(a-=u*Nn),r=pe(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=a,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function pe(e,t,n,r){var i,a,o=Xn(e-n);return In(o)>Nn?Un((Xn(t)*(a=Wn(r))*Xn(n)-Xn(r)*(i=Wn(t))*Xn(e))/(i*a*o)):(t+r)/2}function ge(e,t,n,r){var i;if(null==e)i=n*Ln,r.point(-Pn,i),r.point(0,i),r.point(Pn,i),r.point(Pn,0),r.point(Pn,-i),r.point(0,-i),r.point(-Pn,-i),r.point(-Pn,0),r.point(-Pn,i);else if(In(e[0]-t[0])>Nn){var a=e[0]<t[0]?Pn:-Pn;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function me(e){function t(t,n,r,i){te(i,e,u,r,t,n)}function n(e,t){return Wn(e)*Wn(t)>o}function r(e){var t,r,o,u,c;return{lineStart:function(){u=o=!1,c=1},point:function(l,d){var h,p=[l,d],g=n(l,d),m=s?g?0:a(l,d):g?a(l+(l<0?Pn:-Pn),d):0;if(!t&&(u=o=g)&&e.lineStart(),g!==o&&(h=i(t,p),(!h||ae(t,h)||ae(p,h))&&(p[0]+=Nn,p[1]+=Nn,g=n(p[0],p[1]))),g!==o)c=0,g?(e.lineStart(),h=i(p,t),e.point(h[0],h[1])):(h=i(t,p),e.point(h[0],h[1]),e.lineEnd()),t=h;else if(f&&t&&s^g){var v;m&r||!(v=i(p,t,!0))||(c=0,s?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||t&&ae(t,p)||e.point(p[0],p[1]),t=p,o=g,r=m},lineEnd:function(){o&&e.lineEnd(),t=null},clean:function(){return c|(u&&o)<<1}}}function i(e,t,n){var r=b(e),i=b(t),a=[1,0,0],u=x(r,i),s=_(u,u),f=u[0],c=s-f*f;if(!c)return!n&&e;var l=o*s/c,d=-o*f/c,h=x(a,u),p=k(a,l),g=k(u,d);w(p,g);var m=h,v=_(p,m),M=_(m,m),S=v*v-M*(_(p,p)-1);if(!(S<0)){var E=Jn(S),O=k(m,(-v-E)/M);if(w(O,p),O=y(O),!n)return O;var A,C=e[0],R=t[0],T=e[1],z=t[1];R<C&&(A=C,C=R,R=A);var N=R-C,D=In(N-Pn)<Nn,P=D||N<Nn;if(!D&&z<T&&(A=T,T=z,z=A),P?D?T+z>0^O[1]<(In(O[0]-C)<Nn?T:z):T<=O[1]&&O[1]<=z:N>Pn^(C<=O[0]&&O[0]<=R)){var L=k(m,(-v+E)/M);return w(L,p),[O,y(L)]}}}function a(t,n){var r=s?e:Pn-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Wn(e),u=6*Fn,s=o>0,f=In(o)>Nn;return ce(n,r,t,s?[0,-e]:[-Pn,e-Pn])}function ve(e,t,n,r,i,a){var o,u=e[0],s=e[1],f=t[0],c=t[1],l=0,d=1,h=f-u,p=c-s;if(o=n-u,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>l&&(l=o)}if(o=i-u,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<d&&(d=o)}if(o=r-s,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>l&&(l=o)}if(o=a-s,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<d&&(d=o)}return l>0&&(e[0]=u+l*h,e[1]=s+l*p),d<1&&(t[0]=u+d*h,t[1]=s+d*p),!0}}}}}function ye(e,n,r,i){function a(t,a){return e<=t&&t<=r&&n<=a&&a<=i}function o(t,a,o,s){var c=0,l=0;if(null==t||(c=u(t,o))!==(l=u(a,o))||f(t,a)<0^o>0){do s.point(0===c||3===c?e:r,c>1?i:n);while((c=(c+o+4)%4)!==l)}else s.point(a[0],a[1])}function u(t,i){return In(t[0]-e)<Nn?i>0?0:3:In(t[0]-r)<Nn?i>0?2:1:In(t[1]-n)<Nn?i>0?1:0:i>0?3:2}function s(e,t){return f(e.x,t.x)}function f(e,t){var n=u(e,1),r=u(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function f(e,t){a(e,t)&&O.point(e,t)}function c(){for(var t=0,n=0,r=v.length;n<r;++n)for(var a,o,u=v[n],s=1,f=u.length,c=u[0],l=c[0],d=c[1];s<f;++s)a=l,o=d,c=u[s],l=c[0],d=c[1],o<=i?d>i&&(l-a)*(i-o)>(d-o)*(e-a)&&++t:d<=i&&(l-a)*(i-o)<(d-o)*(e-a)&&--t;return t}function l(){O=A,m=[],v=[],E=!0}function d(){var e=c(),n=E&&e,r=(m=t.merge(m)).length;(n||r)&&(u.polygonStart(),n&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),r&&ue(m,s,e,o,u),u.polygonEnd()),O=u,m=v=y=null}function h(){C.point=g,v&&v.push(y=[]),S=!0,M=!1,w=k=NaN}function p(){m&&(g(b,_),x&&M&&A.rejoin(),m.push(A.result())),C.point=f,M&&O.lineEnd()}function g(t,o){var u=a(t,o);if(v&&y.push([t,o]),S)b=t,_=o,x=u,S=!1,u&&(O.lineStart(),O.point(t,o));else if(u&&M)O.point(t,o);else{var s=[w=Math.max(xr,Math.min(_r,w)),k=Math.max(xr,Math.min(_r,k))],f=[t=Math.max(xr,Math.min(_r,t)),o=Math.max(xr,Math.min(_r,o))];ve(s,f,e,n,r,i)?(M||(O.lineStart(),O.point(s[0],s[1])),O.point(f[0],f[1]),u||O.lineEnd(),E=!1):u&&(O.lineStart(),O.point(t,o),E=!1)}w=t,k=o,M=u}var m,v,y,b,_,x,w,k,M,S,E,O=u,A=ie(),C={point:f,lineStart:h,lineEnd:p,polygonStart:l,polygonEnd:d};return C}}function be(){var e,t,n,r=0,i=0,a=960,o=500;return n={stream:function(n){return e&&t===n?e:e=ye(r,i,a,o)(t=n)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],a=+u[1][0],o=+u[1][1],e=t=null,n):[[r,i],[a,o]]}}}function _e(){kr.point=we,kr.lineEnd=xe}function xe(){kr.point=kr.lineEnd=s}function we(e,t){e*=Fn,t*=Fn,ur=e,sr=Xn(t),fr=Wn(t),kr.point=ke}function ke(e,t){e*=Fn,t*=Fn;var n=Xn(t),r=Wn(t),i=In(e-ur),a=Wn(i),o=Xn(i),u=r*o,s=fr*n-sr*r*a,f=sr*n+fr*r*a;wr.add(Bn(Jn(u*u+s*s),f)),ur=e,sr=n,fr=r}function Me(e){return wr.reset(),d(e,kr),+wr}function Se(e,t){return Mr[0]=e,Mr[1]=t,Me(Sr)}function Ee(e,t){return!(!e||!Or.hasOwnProperty(e.type))&&Or[e.type](e,t)}function Oe(e,t){return 0===Se(e,t)}function Ae(e,t){var n=Se(e[0],e[1]),r=Se(e[0],t),i=Se(t,e[1]);return r+i<=n+Nn}function Ce(e,t){return!!fe(e.map(Re),Te(t))}function Re(e){return e=e.map(Te),e.pop(),e}function Te(e){return[e[0]*Fn,e[1]*Fn]}function ze(e,t){return(e&&Er.hasOwnProperty(e.type)?Er[e.type]:Ee)(e,t)}function Ne(e,n,r){var i=t.range(e,n-Nn,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function De(e,n,r){var i=t.range(e,n-Nn,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function Pe(){function e(){return{type:"MultiLineString",coordinates:n()}}function n(){return t.range(Gn(o/v)*v,a,v).map(h).concat(t.range(Gn(c/y)*y,f,y).map(p)).concat(t.range(Gn(i/g)*g,r,g).filter(function(e){return In(e%v)>Nn}).map(l)).concat(t.range(Gn(s/m)*m,u,m).filter(function(e){return In(e%y)>Nn}).map(d))}var r,i,a,o,u,s,f,c,l,d,h,p,g=10,m=g,v=90,y=360,b=2.5;return e.lines=function(){return n().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(f).slice(1),h(a).reverse().slice(1),p(c).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(o=+t[0][0],a=+t[1][0],c=+t[0][1],f=+t[1][1],o>a&&(t=o,o=a,a=t),c>f&&(t=c,c=f,f=t),e.precision(b)):[[o,c],[a,f]]},e.extentMinor=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],s=+t[0][1],u=+t[1][1],i>r&&(t=i,i=r,r=t),s>u&&(t=s,s=u,u=t),e.precision(b)):[[i,s],[r,u]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(v=+t[0],y=+t[1],e):[v,y]},e.stepMinor=function(t){return arguments.length?(g=+t[0],m=+t[1],e):[g,m]},e.precision=function(t){return arguments.length?(b=+t,l=Ne(s,u,90),d=De(i,r,b),h=Ne(c,f,90),p=De(o,a,b),e):b},e.extentMajor([[-180,-90+Nn],[180,90-Nn]]).extentMinor([[-180,-80-Nn],[180,80+Nn]])}function Le(){return Pe()()}function qe(e,t){var n=e[0]*Fn,r=e[1]*Fn,i=t[0]*Fn,a=t[1]*Fn,s=Wn(r),f=Xn(r),c=Wn(a),l=Xn(a),d=s*Wn(n),h=s*Xn(n),p=c*Wn(i),g=c*Xn(i),m=2*o(Jn(u(a-r)+s*c*u(i-n))),v=Xn(m),y=m?function(e){var t=Xn(e*=m)/v,n=Xn(m-e)/v,r=n*d+t*p,i=n*h+t*g,a=n*f+t*l;return[Bn(i,r)*jn,Bn(a,Jn(r*r+i*i))*jn]}:function(){return[n*jn,r*jn]};return y.distance=m,y}function $e(e){return e}function je(){Rr.point=Fe}function Fe(e,t){Rr.point=Ie,cr=dr=e,lr=hr=t}function Ie(e,t){Cr.add(hr*e-dr*t),dr=e,hr=t}function Ue(){Ie(cr,lr)}function Be(e,t){e<Tr&&(Tr=e),e>Nr&&(Nr=e),t<zr&&(zr=t),t>Dr&&(Dr=t)}function We(e,t){Lr+=e,qr+=t,++$r}function Ge(){Gr.point=Ye}function Ye(e,t){Gr.point=He,We(mr=e,vr=t)}function He(e,t){var n=e-mr,r=t-vr,i=Jn(n*n+r*r);jr+=i*(mr+e)/2,Fr+=i*(vr+t)/2,Ir+=i,We(mr=e,vr=t)}function Ve(){Gr.point=We}function Xe(){Gr.point=Je}function Ze(){Qe(pr,gr)}function Je(e,t){Gr.point=Qe,We(pr=mr=e,gr=vr=t)}function Qe(e,t){var n=e-mr,r=t-vr,i=Jn(n*n+r*r);jr+=i*(mr+e)/2,Fr+=i*(vr+t)/2,Ir+=i,i=vr*e-mr*t,Ur+=i*(mr+e),Br+=i*(vr+t),Wr+=3*i,We(mr=e,vr=t)}function Ke(e){this._context=e}function et(e,t){Qr.point=tt,Hr=Xr=e,Vr=Zr=t}function tt(e,t){Xr-=e,Zr-=t,Jr.add(Jn(Xr*Xr+Zr*Zr)),Xr=e,Zr=t}function nt(){this._string=[]}function rt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function it(e,t){function n(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),d(e,r(i))),i.result()}var r,i,a=4.5;return n.area=function(e){return d(e,r(Rr)),Rr.result()},n.measure=function(e){return d(e,r(Qr)),Qr.result()},n.bounds=function(e){return d(e,r(Pr)),Pr.result()},n.centroid=function(e){return d(e,r(Gr)),Gr.result()},n.projection=function(t){return arguments.length?(r=null==t?(e=null,$e):(e=t).stream,n):e},n.context=function(e){return arguments.length?(i=null==e?(t=null,new nt):new Ke(t=e),"function"!=typeof a&&i.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),n):a},n.projection(e).context(t)}function at(e){return{stream:ot(e)}}function ot(e){return function(t){var n=new ut;for(var r in e)n[r]=e[r];return n.stream=t,n}}function ut(){}function st(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),d(n,e.stream(Pr)),t(Pr.result()),null!=r&&e.clipExtent(r),e}function ft(e,t,n){return st(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,u])},n)}function ct(e,t,n){return ft(e,[[0,0],t],n)}function lt(e,t,n){return st(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])},n)}function dt(e,t,n){return st(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])},n)}function ht(e,t){return+t?gt(e,t):pt(e)}function pt(e){return ot({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function gt(e,t){function n(r,i,a,u,s,f,c,l,d,h,p,g,m,v){var y=c-r,b=l-i,_=y*y+b*b;if(_>4*t&&m--){var x=u+h,w=s+p,k=f+g,M=Jn(x*x+w*w+k*k),S=o(k/=M),E=In(In(k)-1)<Nn||In(a-d)<Nn?(a+d)/2:Bn(w,x),O=e(E,S),A=O[0],C=O[1],R=A-r,T=C-i,z=b*R-y*T;(z*z/_>t||In((y*R+b*T)/_-.5)>.3||u*h+s*p+f*g<ei)&&(n(r,i,a,u,s,f,A,C,E,x/=M,w/=M,k,m,v),v.point(A,C),n(A,C,E,x,w,k,c,l,d,h,p,g,m,v))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){v=NaN,k.point=a,t.lineStart()}function a(r,i){var a=b([r,i]),o=e(r,i);n(v,y,m,_,x,w,v=o[0],y=o[1],m=r,_=a[0],x=a[1],w=a[2],Kr,t),t.point(v,y)}function o(){k.point=r,t.lineEnd()}function u(){i(),k.point=s,k.lineEnd=f}function s(e,t){a(c=e,t),l=v,d=y,h=_,p=x,g=w,k.point=a}function f(){n(v,y,m,_,x,w,l,d,c,h,p,g,Kr,t),k.lineEnd=o,o()}var c,l,d,h,p,g,m,v,y,_,x,w,k={point:r,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),k.lineStart=u},polygonEnd:function(){t.polygonEnd(),k.lineStart=i}};return k}}function mt(e){return ot({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function vt(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r}function yt(e,t,n,r){function i(e,r){return[u*e-s*r+t,n-s*e-u*r]}var a=Wn(r),o=Xn(r),u=a*e,s=o*e,f=a/e,c=o/e,l=(o*n-a*t)/e,d=(o*t+a*n)/e;return i.invert=function(e,t){return[f*e-c*t+l,d-c*e-f*t]},i}function bt(e){return _t(function(){return e})()}function _t(e){function t(e){return d(e[0]*Fn,e[1]*Fn)}function n(e){return e=d.invert(e[0],e[1]),e&&[e[0]*jn,e[1]*jn]}function r(){var e=yt(g,0,0,k).apply(null,a(y,b)),t=(k?yt:vt)(g,m-e[0],v-e[1],k);return o=Z(_,x,w),l=V(a,t),d=V(o,l),c=ht(l,A),i()}function i(){return h=p=null,t}var a,o,u,s,f,c,l,d,h,p,g=150,m=480,v=250,y=0,b=0,_=0,x=0,w=0,k=0,M=null,S=br,E=null,O=$e,A=.5;return t.stream=function(e){return h&&p===e?h:h=ti(mt(o)(S(c(O(p=e)))))},t.preclip=function(e){return arguments.length?(S=e,M=void 0,i()):S},t.postclip=function(e){return arguments.length?(O=e,E=u=s=f=null,i()):O},t.clipAngle=function(e){return arguments.length?(S=+e?me(M=e*Fn):(M=null,br),i()):M*jn},t.clipExtent=function(e){return arguments.length?(O=null==e?(E=u=s=f=null,$e):ye(E=+e[0][0],u=+e[0][1],s=+e[1][0],f=+e[1][1]),i()):null==E?null:[[E,u],[s,f]]},t.scale=function(e){return arguments.length?(g=+e,r()):g},t.translate=function(e){return arguments.length?(m=+e[0],v=+e[1],r()):[m,v]},t.center=function(e){return arguments.length?(y=e[0]%360*Fn,b=e[1]%360*Fn,r()):[y*jn,b*jn]},t.rotate=function(e){return arguments.length?(_=e[0]%360*Fn,x=e[1]%360*Fn,w=e.length>2?e[2]%360*Fn:0,r()):[_*jn,x*jn,w*jn]},t.angle=function(e){return arguments.length?(k=e%360*Fn,r()):k*jn},t.precision=function(e){return arguments.length?(c=ht(l,A=e*e),i()):Jn(A)},t.fitExtent=function(e,n){return ft(t,e,n)},t.fitSize=function(e,n){return ct(t,e,n)},t.fitWidth=function(e,n){return lt(t,e,n)},t.fitHeight=function(e,n){return dt(t,e,n)},function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function xt(e){var t=0,n=Pn/3,r=_t(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Fn,n=e[1]*Fn):[t*jn,n*jn]},i}function wt(e){function t(e,t){return[e*n,Xn(t)/n]}var n=Wn(e);return t.invert=function(e,t){return[e/n,o(t*n)]},t}function kt(e,t){function n(e,t){var n=Jn(a-2*i*Xn(t))/i;return[n*Xn(e*=i),u-n*Wn(e)]}var r=Xn(e),i=(r+Xn(t))/2;if(In(i)<Nn)return wt(e);var a=1+r*(2*i-r),u=Jn(a)/i;return n.invert=function(e,t){var n=u-t;return[Bn(e,In(n))/i*Zn(n),o((a-(e*e+n*n)*i*i)/(2*i))]},n}function Mt(){return xt(kt).scale(155.424).center([0,33.6442])}function St(){return Mt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Et(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Ot(){function e(e){var t=e[0],n=e[1];return u=null,i.point(t,n),u||(a.point(t,n),u)||(o.point(t,n),u)}function t(){return n=r=null,e}var n,r,i,a,o,u,s=St(),f=Mt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Mt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){u=[e,t]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?f:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:s).invert(e)},e.stream=function(e){return n&&r===e?n:n=Et([s.stream(r=e),f.stream(e),c.stream(e)])},e.precision=function(e){return arguments.length?(s.precision(e),f.precision(e),c.precision(e),t()):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),f.scale(.35*t),c.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(e){if(!arguments.length)return s.translate();var n=s.scale(),r=+e[0],u=+e[1];return i=s.translate(e).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(l),a=f.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+Nn,u+.12*n+Nn],[r-.214*n-Nn,u+.234*n-Nn]]).stream(l),o=c.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+Nn,u+.166*n+Nn],[r-.115*n-Nn,u+.234*n-Nn]]).stream(l),t()},e.fitExtent=function(t,n){return ft(e,t,n)},e.fitSize=function(t,n){return ct(e,t,n)},e.fitWidth=function(t,n){return lt(e,t,n)},e.fitHeight=function(t,n){return dt(e,t,n)},e.scale(1070)}function At(e){return function(t,n){var r=Wn(t),i=Wn(n),a=e(r*i);return[a*i*Xn(t),a*Xn(n)]}}function Ct(e){return function(t,n){var r=Jn(t*t+n*n),i=e(r),a=Xn(i),u=Wn(i);return[Bn(t*a,r*u),o(r&&n*a/r)]}}function Rt(){return bt(ni).scale(124.75).clipAngle(179.999)}function Tt(){return bt(ri).scale(79.4188).clipAngle(179.999)}function zt(e,t){return[e,Hn(Qn((Ln+t)/2))]}function Nt(){return Dt(zt).scale(961/$n)}function Dt(e){function t(){var t=Pn*u(),o=a(ee(a.rotate()).invert([0,0]));return f(null==c?[[o[0]-t,o[1]-t],[o[0]+t,o[1]+t]]:e===zt?[[Math.max(o[0]-t,c),n],[Math.min(o[0]+t,r),i]]:[[c,Math.max(o[1]-t,n)],[r,Math.min(o[1]+t,i)]])}var n,r,i,a=bt(e),o=a.center,u=a.scale,s=a.translate,f=a.clipExtent,c=null;return a.scale=function(e){return arguments.length?(u(e),t()):u()},a.translate=function(e){return arguments.length?(s(e),t()):s()},a.center=function(e){return arguments.length?(o(e),t()):o()},a.clipExtent=function(e){return arguments.length?(null==e?c=n=r=i=null:(c=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),t()):null==c?null:[[c,n],[r,i]]},t()}function Pt(e){return Qn((Ln+e)/2)}function Lt(e,t){function n(e,t){a>0?t<-Ln+Nn&&(t=-Ln+Nn):t>Ln-Nn&&(t=Ln-Nn);var n=a/Vn(Pt(t),i);return[n*Xn(i*e),a-n*Wn(i*e)]}var r=Wn(e),i=e===t?Xn(e):Hn(r/Wn(t))/Hn(Pt(t)/Pt(e)),a=r*Vn(Pt(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,r=Zn(i)*Jn(e*e+n*n);return[Bn(e,In(n))/i*Zn(n),2*Un(Vn(a/r,1/i))-Ln]},n):zt}function qt(){return xt(Lt).scale(109.5).parallels([30,30])}function $t(e,t){return[e,t]}function jt(){return bt($t).scale(152.63)}function Ft(e,t){function n(e,t){var n=a-t,r=i*e;return[n*Xn(r),a-n*Wn(r)]}var r=Wn(e),i=e===t?Xn(e):(r-Wn(t))/(t-e),a=r/i+e;return In(i)<Nn?$t:(n.invert=function(e,t){var n=a-t;return[Bn(e,In(n))/i*Zn(n),a-Zn(i)*Jn(e*e+n*n)]},n)}function It(){return xt(Ft).scale(131.154).center([0,13.9389])}function Ut(e,t){var n=Wn(t),r=Wn(e)*n;return[n*Xn(e)/r,Xn(t)/r]}function Bt(){return bt(Ut).scale(144.049).clipAngle(60)}function Wt(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?$e:ot({point:function(i,a){this.stream.point(i*e+n,a*t+r)}})}function Gt(){function e(){return i=a=null,o}var t,n,r,i,a,o,u=1,s=0,f=0,c=1,l=1,d=$e,h=null,p=$e;return o={stream:function(e){return i&&a===e?i:i=d(p(a=e))},postclip:function(i){return arguments.length?(p=i,h=t=n=r=null,e()):p},clipExtent:function(i){return arguments.length?(p=null==i?(h=t=n=r=null,$e):ye(h=+i[0][0],t=+i[0][1],n=+i[1][0],r=+i[1][1]),e()):null==h?null:[[h,t],[n,r]]},scale:function(t){return arguments.length?(d=Wt((u=+t)*c,u*l,s,f),e()):u},translate:function(t){return arguments.length?(d=Wt(u*c,u*l,s=+t[0],f=+t[1]),e()):[s,f]},reflectX:function(t){return arguments.length?(d=Wt(u*(c=t?-1:1),u*l,s,f),e()):c<0},reflectY:function(t){return arguments.length?(d=Wt(u*c,u*(l=t?-1:1),s,f),e()):l<0},fitExtent:function(e,t){return ft(o,e,t)},fitSize:function(e,t){return ct(o,e,t)},fitWidth:function(e,t){return lt(o,e,t)},fitHeight:function(e,t){return dt(o,e,t)}}}function Yt(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}function Ht(){return bt(Yt).scale(175.295)}function Vt(e,t){return[Wn(t)*Xn(e),Xn(t)]}function Xt(){return bt(Vt).scale(249.5).clipAngle(90+Nn)}function Zt(e,t){var n=Wn(t),r=1+Wn(e)*n;return[n*Xn(e)/r,Xn(t)/r]}function Jt(){return bt(Zt).scale(250).clipAngle(142)}function Qt(e,t){return[Hn(Qn((Ln+t)/2)),-e]}function Kt(){var e=Dt(Qt),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(e){i(zn,e,this.t),i(this,zn.s,this.s),this.s?this.t+=zn.t:this.s=zn.t},valueOf:function(){return this.s}};var en,tn,nn,rn,an,on,un,sn,fn,cn,ln,dn,hn,pn,gn,mn,vn,yn,bn,_n,xn,wn,kn,Mn,Sn,En,On,An,Cn,Rn,Tn,zn=new r,Nn=1e-6,Dn=1e-12,Pn=Math.PI,Ln=Pn/2,qn=Pn/4,$n=2*Pn,jn=180/Pn,Fn=Pn/180,In=Math.abs,Un=Math.atan,Bn=Math.atan2,Wn=Math.cos,Gn=Math.ceil,Yn=Math.exp,Hn=Math.log,Vn=Math.pow,Xn=Math.sin,Zn=Math.sign||function(e){return e>0?1:e<0?-1:0},Jn=Math.sqrt,Qn=Math.tan,Kn={Feature:function(e,t){f(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)f(n[r].geometry,t)}},er={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){c(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)c(n[r],t,0)},Polygon:function(e,t){l(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)l(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)f(n[r],t)}},tr=n(),nr=n(),rr={point:s,lineStart:s,lineEnd:s,polygonStart:function(){tr.reset(),rr.lineStart=h,rr.lineEnd=p},polygonEnd:function(){var e=+tr;nr.add(e<0?$n+e:e),this.lineStart=this.lineEnd=this.point=s},sphere:function(){nr.add($n)}},ir=n(),ar={point:S,lineStart:O,lineEnd:A,polygonStart:function(){ar.point=C,ar.lineStart=R,ar.lineEnd=T,ir.reset(),rr.polygonStart()},polygonEnd:function(){rr.polygonEnd(),ar.point=S,ar.lineStart=O,ar.lineEnd=A,tr<0?(on=-(sn=180),un=-(fn=90)):ir>Nn?fn=90:ir<-Nn&&(un=-90),gn[0]=on,gn[1]=sn}},or={sphere:s,point:L,lineStart:$,lineEnd:I,polygonStart:function(){or.lineStart=U,or.lineEnd=B},polygonEnd:function(){or.lineStart=$,or.lineEnd=I}};X.invert=X;var ur,sr,fr,cr,lr,dr,hr,pr,gr,mr,vr,yr=n(),br=ce(function(){return!0},he,ge,[-Pn,-Ln]),_r=1e9,xr=-_r,wr=n(),kr={sphere:s,point:s,lineStart:_e,lineEnd:s,polygonStart:s,polygonEnd:s},Mr=[null,null],Sr={type:"LineString",coordinates:Mr},Er={Feature:function(e,t){return Ee(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(Ee(n[r].geometry,t))return!0;return!1}},Or={Sphere:function(){return!0},Point:function(e,t){return Oe(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Oe(n[r],t))return!0;return!1},LineString:function(e,t){return Ae(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Ae(n[r],t))return!0;return!1},Polygon:function(e,t){return Ce(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Ce(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(Ee(n[r],t))return!0;return!1}},Ar=n(),Cr=n(),Rr={point:s,lineStart:s,lineEnd:s,polygonStart:function(){Rr.lineStart=je,Rr.lineEnd=Ue},polygonEnd:function(){Rr.lineStart=Rr.lineEnd=Rr.point=s,Ar.add(In(Cr)),Cr.reset()},result:function(){var e=Ar/2;return Ar.reset(),e}},Tr=1/0,zr=Tr,Nr=-Tr,Dr=Nr,Pr={point:Be,lineStart:s,lineEnd:s,polygonStart:s,polygonEnd:s,result:function(){var e=[[Tr,zr],[Nr,Dr]];return Nr=Dr=-(zr=Tr=1/0),e}},Lr=0,qr=0,$r=0,jr=0,Fr=0,Ir=0,Ur=0,Br=0,Wr=0,Gr={point:We,lineStart:Ge,lineEnd:Ve,polygonStart:function(){Gr.lineStart=Xe,Gr.lineEnd=Ze},polygonEnd:function(){Gr.point=We,Gr.lineStart=Ge,Gr.lineEnd=Ve},result:function(){var e=Wr?[Ur/Wr,Br/Wr]:Ir?[jr/Ir,Fr/Ir]:$r?[Lr/$r,qr/$r]:[NaN,NaN];return Lr=qr=$r=jr=Fr=Ir=Ur=Br=Wr=0,e}};Ke.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),
this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,$n)}},result:s};var Yr,Hr,Vr,Xr,Zr,Jr=n(),Qr={point:s,lineStart:function(){Qr.point=et},lineEnd:function(){Yr&&tt(Hr,Vr),Qr.point=s},polygonStart:function(){Yr=!0},polygonEnd:function(){Yr=null},result:function(){var e=+Jr;return Jr.reset(),e}};nt.prototype={_radius:4.5,_circle:rt(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=rt(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},ut.prototype={constructor:ut,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Kr=16,ei=Wn(30*Fn),ti=ot({point:function(e,t){this.stream.point(e*Fn,t*Fn)}}),ni=At(function(e){return Jn(2/(1+e))});ni.invert=Ct(function(e){return 2*o(e/2)});var ri=At(function(e){return(e=a(e))&&e/Xn(e)});ri.invert=Ct(function(e){return e}),zt.invert=function(e,t){return[e,2*Un(Yn(t))-Ln]},$t.invert=$t,Ut.invert=Ct(Un),Yt.invert=function(e,t){var n,r=t,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-t)/(1.007226+a*(.045255+o*(-.311325+.259866*a-.005916*11*o)))}while(In(n)>Nn&&--i>0);return[e/(.8707+(a=r*r)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),r]},Vt.invert=Ct(o),Zt.invert=Ct(function(e){return 2*Un(e)}),Qt.invert=function(e,t){return[-t,2*Un(Yn(e))-Ln]},e.geoArea=v,e.geoBounds=P,e.geoCentroid=Y,e.geoCircle=re,e.geoClipAntimeridian=br,e.geoClipCircle=me,e.geoClipExtent=be,e.geoClipRectangle=ye,e.geoContains=ze,e.geoDistance=Se,e.geoGraticule=Pe,e.geoGraticule10=Le,e.geoInterpolate=qe,e.geoLength=Me,e.geoPath=it,e.geoAlbers=St,e.geoAlbersUsa=Ot,e.geoAzimuthalEqualArea=Rt,e.geoAzimuthalEqualAreaRaw=ni,e.geoAzimuthalEquidistant=Tt,e.geoAzimuthalEquidistantRaw=ri,e.geoConicConformal=qt,e.geoConicConformalRaw=Lt,e.geoConicEqualArea=Mt,e.geoConicEqualAreaRaw=kt,e.geoConicEquidistant=It,e.geoConicEquidistantRaw=Ft,e.geoEquirectangular=jt,e.geoEquirectangularRaw=$t,e.geoGnomonic=Bt,e.geoGnomonicRaw=Ut,e.geoIdentity=Gt,e.geoProjection=bt,e.geoProjectionMutator=_t,e.geoMercator=Nt,e.geoMercatorRaw=zt,e.geoNaturalEarth1=Ht,e.geoNaturalEarth1Raw=Yt,e.geoOrthographic=Xt,e.geoOrthographicRaw=Vt,e.geoStereographic=Jt,e.geoStereographicRaw=Zt,e.geoTransverseMercator=Kt,e.geoTransverseMercatorRaw=Qt,e.geoRotation=ee,e.geoStream=d,e.geoTransform=at,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t){return e.parent===t.parent?1:2}function n(e){return e.reduce(r,0)/e.length}function r(e,t){return e+t.x}function i(e){return 1+e.reduce(a,0)}function a(e,t){return Math.max(e,t.y)}function o(e){for(var t;t=e.children;)e=t[0];return e}function u(e){for(var t;t=e.children;)e=t[t.length-1];return e}function s(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function f(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function c(e,t){var n,r,i,a,o,u=new g(e),s=+e.value&&(u.value=e.value),f=[u];for(null==t&&(t=d);n=f.pop();)if(s&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)f.push(r=n.children[a]=new g(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(p)}function l(){return c(this).eachBefore(h)}function d(e){return e.children}function h(e){e.data=e.data.data}function p(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function g(e){this.data=e,this.depth=this.height=0,this.parent=null}function m(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}function v(e,t){var n,r;if(_(t,e))return[t];for(n=0;n<e.length;++n)if(y(t,e[n])&&_(k(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(y(k(e[n],e[r]),t)&&y(k(e[n],t),e[r])&&y(k(e[r],t),e[n])&&_(M(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function y(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function b(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function _(e,t){for(var n=0;n<t.length;++n)if(!b(e,t[n]))return!1;return!0}function x(e){switch(e.length){case 1:return w(e[0]);case 2:return k(e[0],e[1]);case 3:return M(e[0],e[1],e[2])}}function w(e){return{x:e.x,y:e.y,r:e.r}}function k(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,u=t.r,s=a-n,f=o-r,c=u-i,l=Math.sqrt(s*s+f*f);return{x:(n+a+s/l*c)/2,y:(r+o+f/l*c)/2,r:(l+i+u)/2}}function M(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,u=t.y,s=t.r,f=n.x,c=n.y,l=n.r,d=r-o,h=r-f,p=i-u,g=i-c,m=s-a,v=l-a,y=r*r+i*i-a*a,b=y-o*o-u*u+s*s,_=y-f*f-c*c+l*l,x=h*p-d*g,w=(p*_-g*b)/(2*x)-r,k=(g*m-p*v)/x,M=(h*b-d*_)/(2*x)-i,S=(d*v-h*m)/x,E=k*k+S*S-1,O=2*(a+w*k+M*S),A=w*w+M*M-a*a,C=-(E?(O+Math.sqrt(O*O-4*E*A))/(2*E):A/O);return{x:r+w+k*C,y:i+M+S*C,r:C}}function S(e,t,n){var r,i,a,o,u=e.x-t.x,s=e.y-t.y,f=u*u+s*s;f?(i=t.r+n.r,i*=i,o=e.r+n.r,o*=o,i>o?(r=(f+o-i)/(2*f),a=Math.sqrt(Math.max(0,o/f-r*r)),n.x=e.x-r*u-a*s,n.y=e.y-r*s+a*u):(r=(f+i-o)/(2*f),a=Math.sqrt(Math.max(0,i/f-r*r)),n.x=t.x+r*u-a*s,n.y=t.y+r*s+a*u)):(n.x=t.x+n.r,n.y=t.y)}function E(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function O(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function A(e){this._=e,this.next=null,this.previous=null}function C(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,u,s,f,c,l;if(t=e[0],t.x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;S(n,t,r=e[2]),t=new A(t),n=new A(n),r=new A(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(u=3;u<i;++u){S(t._,n._,r=e[u]),r=new A(r),s=n.next,f=t.previous,c=n._.r,l=t._.r;do if(c<=l){if(E(s._,r._)){n=s,t.next=n,n.previous=t,--u;continue e}c+=s._.r,s=s.next}else{if(E(f._,r._)){t=f,t.next=n,n.previous=t,--u;continue e}l+=f._.r,f=f.previous}while(s!==f.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=O(t);(r=r.next)!==n;)(o=O(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=ue(t),u=0;u<i;++u)t=e[u],t.x-=r.x,t.y-=r.y;return r.r}function R(e){return null==e?null:T(e)}function T(e){if("function"!=typeof e)throw new Error;return e}function z(){return 0}function N(e){return Math.sqrt(e.value)}function D(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function P(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,u=e(n)*t||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=C(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function L(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function q(e){return e.id}function $(e){return e.parentId}function j(e,t){return e.parent===t.parent?1:2}function F(e){var t=e.children;return t?t[0]:e.t}function I(e){var t=e.children;return t?t[t.length-1]:e.t}function U(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function B(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function W(e,t,n){return e.a.parent===t.parent?e.a:n}function G(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Y(e){for(var t,n,r,i,a,o=new G(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(n=t.children[i]=new G(r[i],i)),n.parent=t;return(o.parent=new G(null,0)).children=[o],o}function H(e,t,n,r,i,a){for(var o,u,s,f,c,l,d,h,p,g,m,v=[],y=t.children,b=0,_=0,x=y.length,w=t.value;b<x;){s=i-n,f=a-r;do c=y[_++].value;while(!c&&_<x);for(l=d=c,g=Math.max(f/s,s/f)/(w*e),m=c*c*g,p=Math.max(d/m,m/l);_<x;++_){if(c+=u=y[_].value,u<l&&(l=u),u>d&&(d=u),m=c*c*g,h=Math.max(d/m,m/l),h>p){c-=u;break}p=h}v.push(o={value:c,dice:s<f,children:y.slice(b,_)}),o.dice?de(o,n,r,i,w?r+=f*c/w:a):be(o,n,r,w?n+=s*c/w:i,a),w-=c,b=_}return v}var V=function(){function e(e){var t,c=0;e.eachAfter(function(e){var a=e.children;a?(e.x=n(a),e.y=i(a)):(e.x=t?c+=r(e,t):0,e.y=0,t=e)});var l=o(e),d=u(e),h=l.x-r(l,d)/2,p=d.x+r(d,l)/2;return e.eachAfter(f?function(t){t.x=(t.x-e.x)*a,t.y=(e.y-t.y)*s}:function(t){t.x=(t.x-h)/(p-h)*a,t.y=(1-(e.y?t.y/e.y:1))*s})}var r=t,a=1,s=1,f=!1;return e.separation=function(t){return arguments.length?(r=t,e):r},e.size=function(t){return arguments.length?(f=!1,a=+t[0],s=+t[1],e):f?null:[a,s]},e.nodeSize=function(t){return arguments.length?(f=!0,a=+t[0],s=+t[1],e):f?[a,s]:null},e},X=function(){return this.eachAfter(s)},Z=function(e){var t,n,r,i,a=this,o=[a];do for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);while(o.length);return this},J=function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this},Q=function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},K=function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})},ee=function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},te=function(e){for(var t=this,n=f(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ne=function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},re=function(){var e=[];return this.each(function(t){e.push(t)}),e},ie=function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},ae=function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t};g.prototype=c.prototype={constructor:g,count:X,each:Z,eachAfter:Q,eachBefore:J,sum:K,sort:ee,path:te,ancestors:ne,descendants:re,leaves:ie,links:ae,copy:l};var oe=Array.prototype.slice,ue=function(e){for(var t,n,r=0,i=(e=m(oe.call(e))).length,a=[];r<i;)t=e[r],n&&b(n,t)?++r:(n=x(a=v(a,t)),r=0);return n},se=function(e){return C(e),e},fe=function(e){return function(){return e}},ce=function(){function e(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(D(t)).eachAfter(P(i,.5)).eachBefore(L(1)):e.eachBefore(D(N)).eachAfter(P(z,1)).eachAfter(P(i,e.r/Math.min(n,r))).eachBefore(L(Math.min(n,r)/(2*e.r))),e}var t=null,n=1,r=1,i=z;return e.radius=function(n){return arguments.length?(t=R(n),e):t},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i="function"==typeof t?t:fe(+t),e):i},e},le=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},de=function(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(r-t)/e.value;++u<s;)a=o[u],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*f},he=function(){function e(e){var o=e.height+1;return e.x0=e.y0=i,e.x1=n,e.y1=r/o,e.eachBefore(t(r,o)),a&&e.eachBefore(le),e}function t(e,t){return function(n){n.children&&de(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var r=n.x0,a=n.y0,o=n.x1-i,u=n.y1-i;o<r&&(r=o=(r+o)/2),u<a&&(a=u=(a+u)/2),n.x0=r,n.y0=a,n.x1=o,n.y1=u}}var n=1,r=1,i=0,a=!1;return e.round=function(t){return arguments.length?(a=!!t,e):a},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i=+t,e):i},e},pe="$",ge={depth:-1},me={},ve=function(){function e(e){var r,i,a,o,u,s,f,c=e.length,l=new Array(c),d={};for(i=0;i<c;++i)r=e[i],u=l[i]=new g(r),null!=(s=t(r,i,e))&&(s+="")&&(f=pe+(u.id=s),d[f]=f in d?me:u);for(i=0;i<c;++i)if(u=l[i],s=n(e[i],i,e),null!=s&&(s+="")){if(o=d[pe+s],!o)throw new Error("missing: "+s);if(o===me)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=ge,a.eachBefore(function(e){e.depth=e.parent.depth+1,--c}).eachBefore(p),a.parent=null,c>0)throw new Error("cycle");return a}var t=q,n=$;return e.id=function(n){return arguments.length?(t=T(n),e):t},e.parentId=function(t){return arguments.length?(n=T(t),e):n},e};G.prototype=Object.create(g.prototype);var ye=function(){function e(e){var r=Y(e);if(r.eachAfter(t),r.parent.m=-r.z,r.eachBefore(n),s)e.eachBefore(i);else{var f=e,c=e,l=e;e.eachBefore(function(e){e.x<f.x&&(f=e),e.x>c.x&&(c=e),e.depth>l.depth&&(l=e)});var d=f===c?1:a(f,c)/2,h=d-f.x,p=o/(c.x+d+h),g=u/(l.depth||1);e.eachBefore(function(e){e.x=(e.x+h)*p,e.y=e.depth*g})}return e}function t(e){var t=e.children,n=e.parent.children,i=e.i?n[e.i-1]:null;if(t){B(e);var o=(t[0].z+t[t.length-1].z)/2;i?(e.z=i.z+a(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+a(e._,i._));e.parent.A=r(e,i,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e,t,n){if(t){for(var r,i=e,o=e,u=t,s=i.parent.children[0],f=i.m,c=o.m,l=u.m,d=s.m;u=I(u),i=F(i),u&&i;)s=F(s),o=I(o),o.a=e,r=u.z+l-i.z-f+a(u._,i._),r>0&&(U(W(u,e,n),e,r),f+=r,c+=r),l+=u.m,f+=i.m,d+=s.m,c+=o.m;u&&!I(o)&&(o.t=u,o.m+=l-c),i&&!F(s)&&(s.t=i,s.m+=f-d,n=e)}return n}function i(e){e.x*=o,e.y=e.depth*u}var a=j,o=1,u=1,s=null;return e.separation=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(s=!1,o=+t[0],u=+t[1],e):s?null:[o,u]},e.nodeSize=function(t){return arguments.length?(s=!0,o=+t[0],u=+t[1],e):s?[o,u]:null},e},be=function(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(i-n)/e.value;++u<s;)a=o[u],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*f},_e=(1+Math.sqrt(5))/2,xe=function e(t){function n(e,n,r,i,a){H(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(_e),we=function(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=a,e.eachBefore(t),o=[0],r&&e.eachBefore(le),e}function t(e){var t=o[e.depth],r=e.x0+t,i=e.y0+t,a=e.x1-t,d=e.y1-t;a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),e.x0=r,e.y0=i,e.x1=a,e.y1=d,e.children&&(t=o[e.depth+1]=u(e)/2,r+=l(e)-t,i+=s(e)-t,a-=f(e)-t,d-=c(e)-t,a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),n(e,r,i,a,d))}var n=xe,r=!1,i=1,a=1,o=[0],u=z,s=z,f=z,c=z,l=z;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(i=+t[0],a=+t[1],e):[i,a]},e.tile=function(t){return arguments.length?(n=T(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(u="function"==typeof t?t:fe(+t),e):u},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:fe(+t),e):s},e.paddingRight=function(t){return arguments.length?(f="function"==typeof t?t:fe(+t),e):f},e.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:fe(+t),e):c},e.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:fe(+t),e):l},e},ke=function(e,t,n,r,i){function a(e,t,n,r,i,o,u){if(e>=t-1){var f=s[e];return f.x0=r,f.y0=i,f.x1=o,f.y1=u,void 0}for(var l=c[e],d=n/2+l,h=e+1,p=t-1;h<p;){var g=h+p>>>1;c[g]<d?h=g+1:p=g}d-c[h-1]<c[h]-d&&e+1<h&&--h;var m=c[h]-l,v=n-m;if(o-r>u-i){var y=(r*v+o*m)/n;a(e,h,m,r,i,y,u),a(h,t,v,y,i,o,u)}else{var b=(i*v+u*m)/n;a(e,h,m,r,i,o,b),a(h,t,v,r,b,o,u)}}var o,u,s=e.children,f=s.length,c=new Array(f+1);for(c[0]=u=o=0;o<f;++o)c[o+1]=u+=s[o].value;a(0,f,e.value,t,n,r,i)},Me=function(e,t,n,r,i){(1&e.depth?be:de)(e,t,n,r,i)},Se=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,f,c,l=-1,d=o.length,h=e.value;++l<d;){for(u=o[l],s=u.children,f=u.value=0,c=s.length;f<c;++f)u.value+=s[f].value;u.dice?de(u,n,r,i,r+=(a-r)*u.value/h):be(u,n,r,n+=(i-n)*u.value/h,a),h-=u.value}else e._squarify=o=H(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(_e);e.cluster=V,e.hierarchy=c,e.pack=ce,e.packSiblings=se,e.packEnclose=ue,e.partition=he,e.stratify=ve,e.tree=ye,e.treemap=we,e.treemapBinary=ke,e.treemapDice=de,e.treemapSlice=be,e.treemapSliceDice=Me,e.treemapSquarify=xe,e.treemapResquarify=Se,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(19),n(18))}(this,function(e,t,n){"use strict";function r(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function i(e){return t.interpolateRgbBasis(e[e.length-1])}function a(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return _e.h=360*e-100,_e.s=1.5-1.5*t,_e.l=.8-.9*t,_e+""}function o(e){var t;return e=(.5-e)*Math.PI,xe.r=255*(t=Math.sin(e))*t,xe.g=255*(t=Math.sin(e+we))*t,xe.b=255*(t=Math.sin(e+ke))*t,xe+""}function u(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var s=r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),f=r("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),c=r("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),l=r("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),d=r("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),h=r("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),p=r("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),g=r("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),m=r("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),v=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r),y=i(v),b=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r),_=i(b),x=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r),w=i(x),k=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r),M=i(k),S=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r),E=i(S),O=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r),A=i(O),C=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r),R=i(C),T=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r),z=i(T),N=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r),D=i(N),P=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r),L=i(P),q=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r),$=i(q),j=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r),F=i(j),I=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r),U=i(I),B=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r),W=i(B),G=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r),Y=i(G),H=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r),V=i(H),X=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r),Z=i(X),J=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r),Q=i(J),K=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r),ee=i(K),te=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r),ne=i(te),re=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r),ie=i(re),ae=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r),oe=i(ae),ue=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r),se=i(ue),fe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r),ce=i(fe),le=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r),de=i(le),he=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r),pe=i(he),ge=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r),me=i(ge),ve=t.interpolateCubehelixLong(n.cubehelix(300,.5,0),n.cubehelix(-240,.5,1)),ye=t.interpolateCubehelixLong(n.cubehelix(-100,.75,.35),n.cubehelix(80,1.5,.8)),be=t.interpolateCubehelixLong(n.cubehelix(260,.75,.35),n.cubehelix(80,1.5,.8)),_e=n.cubehelix(),xe=n.rgb(),we=Math.PI/3,ke=2*Math.PI/3,Me=u(r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Se=u(r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ee=u(r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Oe=u(r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));
e.schemeCategory10=s,e.schemeAccent=f,e.schemeDark2=c,e.schemePaired=l,e.schemePastel1=d,e.schemePastel2=h,e.schemeSet1=p,e.schemeSet2=g,e.schemeSet3=m,e.interpolateBrBG=y,e.schemeBrBG=v,e.interpolatePRGn=_,e.schemePRGn=b,e.interpolatePiYG=w,e.schemePiYG=x,e.interpolatePuOr=M,e.schemePuOr=k,e.interpolateRdBu=E,e.schemeRdBu=S,e.interpolateRdGy=A,e.schemeRdGy=O,e.interpolateRdYlBu=R,e.schemeRdYlBu=C,e.interpolateRdYlGn=z,e.schemeRdYlGn=T,e.interpolateSpectral=D,e.schemeSpectral=N,e.interpolateBuGn=L,e.schemeBuGn=P,e.interpolateBuPu=$,e.schemeBuPu=q,e.interpolateGnBu=F,e.schemeGnBu=j,e.interpolateOrRd=U,e.schemeOrRd=I,e.interpolatePuBuGn=W,e.schemePuBuGn=B,e.interpolatePuBu=Y,e.schemePuBu=G,e.interpolatePuRd=V,e.schemePuRd=H,e.interpolateRdPu=Z,e.schemeRdPu=X,e.interpolateYlGnBu=Q,e.schemeYlGnBu=J,e.interpolateYlGn=ee,e.schemeYlGn=K,e.interpolateYlOrBr=ne,e.schemeYlOrBr=te,e.interpolateYlOrRd=ie,e.schemeYlOrRd=re,e.interpolateBlues=oe,e.schemeBlues=ae,e.interpolateGreens=se,e.schemeGreens=ue,e.interpolateGreys=ce,e.schemeGreys=fe,e.interpolatePurples=de,e.schemePurples=le,e.interpolateReds=pe,e.schemeReds=he,e.interpolateOranges=me,e.schemeOranges=ge,e.interpolateCubehelixDefault=ve,e.interpolateRainbow=a,e.interpolateWarm=ye,e.interpolateCool=be,e.interpolateSinebow=o,e.interpolateViridis=Me,e.interpolateMagma=Se,e.interpolateInferno=Ee,e.interpolatePlasma=Oe,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(16),n(17),n(19),n(35),n(20),n(37))}(this,function(e,t,n,r,i,a,o){"use strict";function u(e){function t(t){var n=t+"",o=r.get(n);if(!o){if(a!==H)return a;r.set(n,o=i.push(t))}return e[(o-1)%e.length]}var r=n.map(),i=[],a=H;return e=null==e?[]:Y.call(e),t.domain=function(e){if(!arguments.length)return i.slice();i=[],r=n.map();for(var a,o,u=-1,s=e.length;++u<s;)r.has(o=(a=e[u])+"")||r.set(o,i.push(a));return t},t.range=function(n){return arguments.length?(e=Y.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(a=e,t):a},t.copy=function(){return u().domain(i).range(e).unknown(a)},t}function s(){function e(){var e=a().length,i=f[1]<f[0],u=f[i-0],s=f[1-i];n=(s-u)/Math.max(1,e-l+2*d),c&&(n=Math.floor(n)),u+=(s-u-n*(e-l))*h,r=n*(1-l),c&&(u=Math.round(u),r=Math.round(r));var p=t.range(e).map(function(e){return u+n*e});return o(i?p.reverse():p)}var n,r,i=u().unknown(void 0),a=i.domain,o=i.range,f=[0,1],c=!1,l=0,d=0,h=.5;return delete i.unknown,i.domain=function(t){return arguments.length?(a(t),e()):a()},i.range=function(t){return arguments.length?(f=[+t[0],+t[1]],e()):f.slice()},i.rangeRound=function(t){return f=[+t[0],+t[1]],c=!0,e()},i.bandwidth=function(){return r},i.step=function(){return n},i.round=function(t){return arguments.length?(c=!!t,e()):c},i.padding=function(t){return arguments.length?(l=d=Math.max(0,Math.min(1,t)),e()):l},i.paddingInner=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},i.paddingOuter=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},i.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),e()):h},i.copy=function(){return s().domain(a()).range(f).round(c).paddingInner(l).paddingOuter(d).align(h)},e()}function f(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return f(t())},e}function c(){return f(s().paddingInner(1))}function l(e){return function(){return e}}function d(e){return+e}function h(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:l(t)}function p(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}function g(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}function m(e,t,n,r){var i=e[0],a=e[1],o=t[0],u=t[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(e){return o(i(e))}}function v(e,n,r,i){var a=Math.min(e.length,n.length)-1,o=new Array(a),u=new Array(a),s=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<a;)o[s]=r(e[s],e[s+1]),u[s]=i(n[s],n[s+1]);return function(n){var r=t.bisect(e,n,1,a)-1;return u[r](o[r](n))}}function y(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function b(e,t){function n(){return a=Math.min(s.length,f.length)>2?v:m,o=u=null,i}function i(t){return(o||(o=a(s,f,l?p(e):e,c)))(+t)}var a,o,u,s=V,f=V,c=r.interpolate,l=!1;return i.invert=function(e){return(u||(u=a(f,s,h,l?g(t):t)))(+e)},i.domain=function(e){return arguments.length?(s=G.call(e,d),n()):s.slice()},i.range=function(e){return arguments.length?(f=Y.call(e),n()):f.slice()},i.rangeRound=function(e){return f=Y.call(e),c=r.interpolateRound,n()},i.clamp=function(e){return arguments.length?(l=!!e,n()):l},i.interpolate=function(e){return arguments.length?(c=e,n()):c},n()}function _(e,n,r){var a,o=e[0],u=e[e.length-1],s=t.tickStep(o,u,null==n?10:n);switch(r=i.formatSpecifier(null==r?",f":r),r.type){case"s":var f=Math.max(Math.abs(o),Math.abs(u));return null!=r.precision||isNaN(a=i.precisionPrefix(s,f))||(r.precision=a),i.formatPrefix(r,f);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=i.precisionRound(s,Math.max(Math.abs(o),Math.abs(u))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=i.precisionFixed(s))||(r.precision=a-2*("%"===r.type))}return i.format(r)}function x(e){var n=e.domain;return e.ticks=function(e){var r=n();return t.ticks(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,t){return _(n(),e,t)},e.nice=function(r){null==r&&(r=10);var i,a=n(),o=0,u=a.length-1,s=a[o],f=a[u];return f<s&&(i=s,s=f,f=i,i=o,o=u,u=i),i=t.tickIncrement(s,f,r),i>0?(s=Math.floor(s/i)*i,f=Math.ceil(f/i)*i,i=t.tickIncrement(s,f,r)):i<0&&(s=Math.ceil(s*i)/i,f=Math.floor(f*i)/i,i=t.tickIncrement(s,f,r)),i>0?(a[o]=Math.floor(s/i)*i,a[u]=Math.ceil(f/i)*i,n(a)):i<0&&(a[o]=Math.ceil(s*i)/i,a[u]=Math.floor(f*i)/i,n(a)),e},e}function w(){var e=b(h,r.interpolateNumber);return e.copy=function(){return y(e,w())},x(e)}function k(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=G.call(n,d),e):t.slice()},e.copy=function(){return k().domain(t)},x(e)}function M(e,t){e=e.slice();var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function S(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:l(t)}function E(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function O(e){return isFinite(e)?+("1e"+e):e<0?0:e}function A(e){return 10===e?O:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function C(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function R(e){return function(t){return-e(-t)}}function T(){function e(){return o=C(a),u=A(a),r()[0]<0&&(o=R(o),u=R(u)),n}var n=b(S,E).domain([1,10]),r=n.domain,a=10,o=C(10),u=A(10);return n.base=function(t){return arguments.length?(a=+t,e()):a},n.domain=function(t){return arguments.length?(r(t),e()):r()},n.ticks=function(e){var n,i=r(),s=i[0],f=i[i.length-1];(n=f<s)&&(h=s,s=f,f=h);var c,l,d,h=o(s),p=o(f),g=null==e?10:+e,m=[];if(!(a%1)&&p-h<g){if(h=Math.round(h)-1,p=Math.round(p)+1,s>0){for(;h<p;++h)for(l=1,c=u(h);l<a;++l)if(d=c*l,!(d<s)){if(d>f)break;m.push(d)}}else for(;h<p;++h)for(l=a-1,c=u(h);l>=1;--l)if(d=c*l,!(d<s)){if(d>f)break;m.push(d)}}else m=t.ticks(h,p,Math.min(p-h,g)).map(u);return n?m.reverse():m},n.tickFormat=function(e,t){if(null==t&&(t=10===a?".0e":","),"function"!=typeof t&&(t=i.format(t)),e===1/0)return t;null==e&&(e=10);var r=Math.max(1,a*e/n.ticks().length);return function(e){var n=e/u(Math.round(o(e)));return n*a<a-.5&&(n*=a),n<=r?t(e):""}},n.nice=function(){return r(M(r(),{floor:function(e){return u(Math.floor(o(e)))},ceil:function(e){return u(Math.ceil(o(e)))}}))},n.copy=function(){return y(n,T().base(a))},n}function z(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function N(){function e(e,t){return(t=z(t,n)-(e=z(e,n)))?function(r){return(z(r,n)-e)/t}:l(t)}function t(e,t){return t=z(t,n)-(e=z(e,n)),function(r){return z(e+t*r,1/n)}}var n=1,r=b(e,t),i=r.domain;return r.exponent=function(e){return arguments.length?(n=+e,i(i())):n},r.copy=function(){return y(r,N().exponent(n))},x(r)}function D(){return N().exponent(.5)}function P(){function e(){var e=0,o=Math.max(1,i.length);for(a=new Array(o-1);++e<o;)a[e-1]=t.quantile(r,e/o);return n}function n(e){if(!isNaN(e=+e))return i[t.bisect(a,e)]}var r=[],i=[],a=[];return n.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},n.domain=function(n){if(!arguments.length)return r.slice();r=[];for(var i,a=0,o=n.length;a<o;++a)i=n[a],null==i||isNaN(i=+i)||r.push(i);return r.sort(t.ascending),e()},n.range=function(t){return arguments.length?(i=Y.call(t),e()):i.slice()},n.quantiles=function(){return a.slice()},n.copy=function(){return P().domain(r).range(i)},n}function L(){function e(e){if(e<=e)return u[t.bisect(o,e,0,a)]}function n(){var t=-1;for(o=new Array(a);++t<a;)o[t]=((t+1)*i-(t-a)*r)/(a+1);return e}var r=0,i=1,a=1,o=[.5],u=[0,1];return e.domain=function(e){return arguments.length?(r=+e[0],i=+e[1],n()):[r,i]},e.range=function(e){return arguments.length?(a=(u=Y.call(e)).length-1,n()):u.slice()},e.invertExtent=function(e){var t=u.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,o[0]]:t>=a?[o[a-1],i]:[o[t-1],o[t]]},e.copy=function(){return L().domain([r,i]).range(u)},x(e)}function q(){function e(e){if(e<=e)return r[t.bisect(n,e,0,i)]}var n=[.5],r=[0,1],i=1;return e.domain=function(t){return arguments.length?(n=Y.call(t),i=Math.min(n.length,r.length-1),e):n.slice()},e.range=function(t){return arguments.length?(r=Y.call(t),i=Math.min(n.length,r.length-1),e):r.slice()},e.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},e.copy=function(){return q().domain(n).range(r)},e}function $(e){return new Date(e)}function j(e){return e instanceof Date?+e:+new Date(+e)}function F(e,n,i,a,o,u,s,f,c){function l(t){return(s(t)<t?v:u(t)<t?_:o(t)<t?x:a(t)<t?w:n(t)<t?i(t)<t?k:S:e(t)<t?E:O)(t)}function d(n,r,i,a){if(null==n&&(n=10),"number"==typeof n){var o=Math.abs(i-r)/n,u=t.bisector(function(e){return e[2]}).right(A,o);u===A.length?(a=t.tickStep(r/te,i/te,n),n=e):u?(u=A[o/A[u-1][2]<A[u][2]/o?u-1:u],a=u[1],n=u[0]):(a=Math.max(t.tickStep(r,i,n),1),n=f)}return null==a?n:n.every(a)}var p=b(h,r.interpolateNumber),g=p.invert,m=p.domain,v=c(".%L"),_=c(":%S"),x=c("%I:%M"),w=c("%I %p"),k=c("%a %d"),S=c("%b %d"),E=c("%B"),O=c("%Y"),A=[[s,1,X],[s,5,5*X],[s,15,15*X],[s,30,30*X],[u,1,Z],[u,5,5*Z],[u,15,15*Z],[u,30,30*Z],[o,1,J],[o,3,3*J],[o,6,6*J],[o,12,12*J],[a,1,Q],[a,2,2*Q],[i,1,K],[n,1,ee],[n,3,3*ee],[e,1,te]];return p.invert=function(e){return new Date(g(e))},p.domain=function(e){return arguments.length?m(G.call(e,j)):m().map($)},p.ticks=function(e,t){var n,r=m(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=d(e,i,a,t),n=n?n.range(i,a+1):[],o?n.reverse():n},p.tickFormat=function(e,t){return null==t?l:c(t)},p.nice=function(e,t){var n=m();return(e=d(e,n[0],n[n.length-1],t))?m(M(n,e)):p},p.copy=function(){return y(p,F(e,n,i,a,o,u,s,f,c))},p}function I(){return F(a.timeYear,a.timeMonth,a.timeWeek,a.timeDay,a.timeHour,a.timeMinute,a.timeSecond,a.timeMillisecond,o.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function U(){return F(a.utcYear,a.utcMonth,a.utcWeek,a.utcDay,a.utcHour,a.utcMinute,a.utcSecond,a.utcMillisecond,o.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function B(e){function t(t){var a=(t-n)/(r-n);return e(i?Math.max(0,Math.min(1,a)):a)}var n=0,r=1,i=!1;return t.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.clamp=function(e){return arguments.length?(i=!!e,t):i},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return B(e).domain([n,r]).clamp(i)},x(t)}var W=Array.prototype,G=W.map,Y=W.slice,H={name:"implicit"},V=[0,1],X=1e3,Z=60*X,J=60*Z,Q=24*J,K=7*Q,ee=30*Q,te=365*Q;e.scaleBand=s,e.scalePoint=c,e.scaleIdentity=k,e.scaleLinear=w,e.scaleLog=T,e.scaleOrdinal=u,e.scaleImplicit=H,e.scalePow=N,e.scaleSqrt=D,e.scaleQuantile=P,e.scaleQuantize=L,e.scaleThreshold=q,e.scaleTime=I,e.scaleUtc=U,e.scaleSequential=B,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,r){r(t,n(36))}(this,function(e,t){"use strict";function n(e){return e>1?0:e<-1?le:Math.acos(e)}function r(e){return e>=1?de:e<=-1?-de:Math.asin(e)}function i(e){return e.innerRadius}function a(e){return e.outerRadius}function o(e){return e.startAngle}function u(e){return e.endAngle}function s(e){return e&&e.padAngle}function f(e,t,n,r,i,a,o,u){var s=n-e,f=r-t,c=o-i,l=u-a,d=(c*(t-a)-l*(e-i))/(l*s-c*f);return[e+d*s,t+d*f]}function c(e,t,n,r,i,a,o){var u=e-n,s=t-r,f=(o?a:-a)/fe(u*u+s*s),c=f*s,l=-f*u,d=e+c,h=t+l,p=n+c,g=r+l,m=(d+p)/2,v=(h+g)/2,y=p-d,b=g-h,_=y*y+b*b,x=i-a,w=d*g-p*h,k=(b<0?-1:1)*fe(oe(0,x*x*_-w*w)),M=(w*b-y*k)/_,S=(-w*y-b*k)/_,E=(w*b+y*k)/_,O=(-w*y+b*k)/_,A=M-m,C=S-v,R=E-m,T=O-v;return A*A+C*C>R*R+T*T&&(M=E,S=O),{cx:M,cy:S,x01:-c,y01:-l,x11:M*(i/x-1),y11:S*(i/x-1)}}function l(e){this._context=e}function d(e){return e[0]}function h(e){return e[1]}function p(e){this._curve=e}function g(e){function t(t){return new p(e(t))}return t._curve=e,t}function m(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(g(e)):t()._curve},e}function v(e){return e.source}function y(e){return e.target}function b(e){function n(){var n,s=Se.call(arguments),f=r.apply(this,s),c=i.apply(this,s);if(u||(u=n=t.path()),e(u,+a.apply(this,(s[0]=f,s)),+o.apply(this,s),+a.apply(this,(s[0]=c,s)),+o.apply(this,s)),n)return u=null,n+""||null}var r=v,i=y,a=d,o=h,u=null;return n.source=function(e){return arguments.length?(r=e,n):r},n.target=function(e){return arguments.length?(i=e,n):i},n.x=function(e){return arguments.length?(a="function"==typeof e?e:ne(+e),n):a},n.y=function(e){return arguments.length?(o="function"==typeof e?e:ne(+e),n):o},n.context=function(e){return arguments.length?(u=null==e?null:e,n):u},n}function _(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function x(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+i)/2,r,n,r,i)}function w(e,t,n,r,i){var a=Me(t,n),o=Me(t,n=(n+i)/2),u=Me(r,n),s=Me(r,i);e.moveTo(a[0],a[1]),e.bezierCurveTo(o[0],o[1],u[0],u[1],s[0],s[1])}function k(){return b(_)}function M(){return b(x)}function S(){var e=b(w);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}function E(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function O(e){this._context=e}function A(e){this._context=e}function C(e){this._context=e}function R(e,t){this._basis=new O(e),this._beta=t}function T(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function z(e,t){this._context=e,this._k=(1-t)/6}function N(e,t){this._context=e,this._k=(1-t)/6}function D(e,t){this._context=e,this._k=(1-t)/6}function P(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>ce){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>ce){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function L(e,t){this._context=e,this._alpha=t}function q(e,t){this._context=e,this._alpha=t}function $(e,t){this._context=e,this._alpha=t}function j(e){this._context=e}function F(e){return e<0?-1:1}function I(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(F(a)+F(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function U(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function B(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function W(e){this._context=e}function G(e){this._context=new Y(e)}function Y(e){this._context=e}function H(e){return new W(e)}function V(e){return new G(e)}function X(e){this._context=e}function Z(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function J(e,t){this._context=e,this._t=t}function Q(e){return new J(e,0)}function K(e){return new J(e,1)}function ee(e,t){return e[t]}function te(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}var ne=function(e){return function(){return e}},re=Math.abs,ie=Math.atan2,ae=Math.cos,oe=Math.max,ue=Math.min,se=Math.sin,fe=Math.sqrt,ce=1e-12,le=Math.PI,de=le/2,he=2*le,pe=function(){function e(){var e,i,a=+l.apply(this,arguments),o=+d.apply(this,arguments),u=g.apply(this,arguments)-de,s=m.apply(this,arguments)-de,b=re(s-u),_=s>u;if(y||(y=e=t.path()),o<a&&(i=o,o=a,a=i),o>ce)if(b>he-ce)y.moveTo(o*ae(u),o*se(u)),y.arc(0,0,o,u,s,!_),a>ce&&(y.moveTo(a*ae(s),a*se(s)),y.arc(0,0,a,s,u,_));else{var x,w,k=u,M=s,S=u,E=s,O=b,A=b,C=v.apply(this,arguments)/2,R=C>ce&&(p?+p.apply(this,arguments):fe(a*a+o*o)),T=ue(re(o-a)/2,+h.apply(this,arguments)),z=T,N=T;if(R>ce){var D=r(R/a*se(C)),P=r(R/o*se(C));(O-=2*D)>ce?(D*=_?1:-1,S+=D,E-=D):(O=0,S=E=(u+s)/2),(A-=2*P)>ce?(P*=_?1:-1,k+=P,M-=P):(A=0,k=M=(u+s)/2)}var L=o*ae(k),q=o*se(k),$=a*ae(E),j=a*se(E);if(T>ce){var F=o*ae(M),I=o*se(M),U=a*ae(S),B=a*se(S);if(b<le){var W=O>ce?f(L,q,U,B,F,I,$,j):[$,j],G=L-W[0],Y=q-W[1],H=F-W[0],V=I-W[1],X=1/se(n((G*H+Y*V)/(fe(G*G+Y*Y)*fe(H*H+V*V)))/2),Z=fe(W[0]*W[0]+W[1]*W[1]);z=ue(T,(a-Z)/(X-1)),N=ue(T,(o-Z)/(X+1))}}A>ce?N>ce?(x=c(U,B,L,q,o,N,_),w=c(F,I,$,j,o,N,_),y.moveTo(x.cx+x.x01,x.cy+x.y01),N<T?y.arc(x.cx,x.cy,N,ie(x.y01,x.x01),ie(w.y01,w.x01),!_):(y.arc(x.cx,x.cy,N,ie(x.y01,x.x01),ie(x.y11,x.x11),!_),y.arc(0,0,o,ie(x.cy+x.y11,x.cx+x.x11),ie(w.cy+w.y11,w.cx+w.x11),!_),y.arc(w.cx,w.cy,N,ie(w.y11,w.x11),ie(w.y01,w.x01),!_))):(y.moveTo(L,q),y.arc(0,0,o,k,M,!_)):y.moveTo(L,q),a>ce&&O>ce?z>ce?(x=c($,j,F,I,a,-z,_),w=c(L,q,U,B,a,-z,_),y.lineTo(x.cx+x.x01,x.cy+x.y01),z<T?y.arc(x.cx,x.cy,z,ie(x.y01,x.x01),ie(w.y01,w.x01),!_):(y.arc(x.cx,x.cy,z,ie(x.y01,x.x01),ie(x.y11,x.x11),!_),y.arc(0,0,a,ie(x.cy+x.y11,x.cx+x.x11),ie(w.cy+w.y11,w.cx+w.x11),_),y.arc(w.cx,w.cy,z,ie(w.y11,w.x11),ie(w.y01,w.x01),!_))):y.arc(0,0,a,E,S,_):y.lineTo($,j)}else y.moveTo(0,0);if(y.closePath(),e)return y=null,e+""||null}var l=i,d=a,h=ne(0),p=null,g=o,m=u,v=s,y=null;return e.centroid=function(){var e=(+l.apply(this,arguments)+ +d.apply(this,arguments))/2,t=(+g.apply(this,arguments)+ +m.apply(this,arguments))/2-le/2;return[ae(t)*e,se(t)*e]},e.innerRadius=function(t){return arguments.length?(l="function"==typeof t?t:ne(+t),e):l},e.outerRadius=function(t){return arguments.length?(d="function"==typeof t?t:ne(+t),e):d},e.cornerRadius=function(t){return arguments.length?(h="function"==typeof t?t:ne(+t),e):h},e.padRadius=function(t){return arguments.length?(p=null==t?null:"function"==typeof t?t:ne(+t),e):p},e.startAngle=function(t){return arguments.length?(g="function"==typeof t?t:ne(+t),e):g},e.endAngle=function(t){return arguments.length?(m="function"==typeof t?t:ne(+t),e):m},e.padAngle=function(t){return arguments.length?(v="function"==typeof t?t:ne(+t),e):v},e.context=function(t){return arguments.length?(y=null==t?null:t,e):y},e};l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var ge=function(e){return new l(e)},me=function(){function e(e){var s,f,c,l=e.length,d=!1;for(null==a&&(u=o(c=t.path())),s=0;s<=l;++s)!(s<l&&i(f=e[s],s,e))===d&&((d=!d)?u.lineStart():u.lineEnd()),d&&u.point(+n(f,s,e),+r(f,s,e));if(c)return u=null,c+""||null}var n=d,r=h,i=ne(!0),a=null,o=ge,u=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:ne(+t),e):n},e.y=function(t){return arguments.length?(r="function"==typeof t?t:ne(+t),e):r},e.defined=function(t){return arguments.length?(i="function"==typeof t?t:ne(!!t),e):i},e.curve=function(t){return arguments.length?(o=t,null!=a&&(u=o(a)),e):o},e.context=function(t){return arguments.length?(null==t?a=u=null:u=o(a=t),e):a},e},ve=function(){function e(e){var n,l,d,h,p,g=e.length,m=!1,v=new Array(g),y=new Array(g);for(null==s&&(c=f(p=t.path())),n=0;n<=g;++n){if(!(n<g&&u(h=e[n],n,e))===m)if(m=!m)l=n,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),d=n-1;d>=l;--d)c.point(v[d],y[d]);c.lineEnd(),c.areaEnd()}m&&(v[n]=+r(h,n,e),y[n]=+a(h,n,e),c.point(i?+i(h,n,e):v[n],o?+o(h,n,e):y[n]))}if(p)return c=null,p+""||null}function n(){return me().defined(u).curve(f).context(s)}var r=d,i=null,a=ne(0),o=h,u=ne(!0),s=null,f=ge,c=null;return e.x=function(t){return arguments.length?(r="function"==typeof t?t:ne(+t),i=null,e):r},e.x0=function(t){return arguments.length?(r="function"==typeof t?t:ne(+t),e):r},e.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:ne(+t),e):i},e.y=function(t){return arguments.length?(a="function"==typeof t?t:ne(+t),o=null,e):a},e.y0=function(t){return arguments.length?(a="function"==typeof t?t:ne(+t),e):a},e.y1=function(t){return arguments.length?(o=null==t?null:"function"==typeof t?t:ne(+t),e):o},e.lineX0=e.lineY0=function(){return n().x(r).y(a)},e.lineY1=function(){return n().x(r).y(o)},e.lineX1=function(){return n().x(i).y(a)},e.defined=function(t){return arguments.length?(u="function"==typeof t?t:ne(!!t),e):u},e.curve=function(t){return arguments.length?(f=t,null!=s&&(c=f(s)),e):f},e.context=function(t){return arguments.length?(null==t?s=c=null:c=f(s=t),e):s},e},ye=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},be=function(e){return e},_e=function(){function e(e){var u,s,f,c,l,d=e.length,h=0,p=new Array(d),g=new Array(d),m=+i.apply(this,arguments),v=Math.min(he,Math.max(-he,a.apply(this,arguments)-m)),y=Math.min(Math.abs(v)/d,o.apply(this,arguments)),b=y*(v<0?-1:1);for(u=0;u<d;++u)(l=g[p[u]=u]=+t(e[u],u,e))>0&&(h+=l);for(null!=n?p.sort(function(e,t){return n(g[e],g[t])}):null!=r&&p.sort(function(t,n){return r(e[t],e[n])}),u=0,f=h?(v-d*b)/h:0;u<d;++u,m=c)s=p[u],l=g[s],c=m+(l>0?l*f:0)+b,g[s]={data:e[s],index:u,value:l,startAngle:m,endAngle:c,padAngle:y};return g}var t=be,n=ye,r=null,i=ne(0),a=ne(he),o=ne(0);return e.value=function(n){return arguments.length?(t="function"==typeof n?n:ne(+n),e):t},e.sortValues=function(t){return arguments.length?(n=t,r=null,e):n},e.sort=function(t){return arguments.length?(r=t,n=null,e):r},e.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:ne(+t),e):i},e.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:ne(+t),e):a},e.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:ne(+t),e):o},e},xe=g(ge);p.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var we=function(){return m(me().curve(xe))},ke=function(){var e=ve().curve(xe),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,a=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return m(n())},delete e.lineX0,e.lineEndAngle=function(){return m(r())},delete e.lineX1,e.lineInnerRadius=function(){return m(i())},delete e.lineY0,e.lineOuterRadius=function(){return m(a())},delete e.lineY1,e.curve=function(e){return arguments.length?t(g(e)):t()._curve},e},Me=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]},Se=Array.prototype.slice,Ee={draw:function(e,t){var n=Math.sqrt(t/le);e.moveTo(n,0),e.arc(0,0,n,0,he)}},Oe={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Ae=Math.sqrt(1/3),Ce=2*Ae,Re={draw:function(e,t){var n=Math.sqrt(t/Ce),r=n*Ae;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Te=.8908130915292852,ze=Math.sin(le/10)/Math.sin(7*le/10),Ne=Math.sin(he/10)*ze,De=-Math.cos(he/10)*ze,Pe={draw:function(e,t){var n=Math.sqrt(t*Te),r=Ne*n,i=De*n;e.moveTo(0,-n),e.lineTo(r,i);for(var a=1;a<5;++a){var o=he*a/5,u=Math.cos(o),s=Math.sin(o);e.lineTo(s*n,-u*n),e.lineTo(u*r-s*i,s*r+u*i)}e.closePath()}},Le={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},qe=Math.sqrt(3),$e={draw:function(e,t){var n=-Math.sqrt(t/(3*qe));e.moveTo(0,2*n),e.lineTo(-qe*n,-n),e.lineTo(qe*n,-n),e.closePath()}},je=-.5,Fe=Math.sqrt(3)/2,Ie=1/Math.sqrt(12),Ue=3*(Ie/2+1),Be={draw:function(e,t){var n=Math.sqrt(t/Ue),r=n/2,i=n*Ie,a=r,o=n*Ie+n,u=-a,s=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,s),e.lineTo(je*r-Fe*i,Fe*r+je*i),e.lineTo(je*a-Fe*o,Fe*a+je*o),e.lineTo(je*u-Fe*s,Fe*u+je*s),e.lineTo(je*r+Fe*i,je*i-Fe*r),e.lineTo(je*a+Fe*o,je*o-Fe*a),e.lineTo(je*u+Fe*s,je*s-Fe*u),e.closePath()}},We=[Ee,Oe,Re,Le,Pe,$e,Be],Ge=function(){function e(){var e;if(i||(i=e=t.path()),n.apply(this,arguments).draw(i,+r.apply(this,arguments)),e)return i=null,e+""||null}var n=ne(Ee),r=ne(64),i=null;return e.type=function(t){return arguments.length?(n="function"==typeof t?t:ne(t),e):n},e.size=function(t){return arguments.length?(r="function"==typeof t?t:ne(+t),e):r},e.context=function(t){return arguments.length?(i=null==t?null:t,e):i},e},Ye=function(){};O.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:E(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:E(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var He=function(e){return new O(e)};A.prototype={areaStart:Ye,areaEnd:Ye,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:E(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Ve=function(e){return new A(e)};C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:E(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Xe=function(e){return new C(e)};R.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,u=t[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+r*o),this._beta*t[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Ze=function e(t){function n(e){return 1===t?new O(e):new R(e,t)}return n.beta=function(t){return e(+t)},n}(.85);z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:T(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:T(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Je=function e(t){function n(e){return new z(e,t)}return n.tension=function(t){return e(+t)},n}(0);N.prototype={areaStart:Ye,areaEnd:Ye,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:T(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Qe=function e(t){function n(e){return new N(e,t)}return n.tension=function(t){return e(+t)},n}(0);D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:T(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ke=function e(t){function n(e){return new D(e,t)}return n.tension=function(t){return e(+t)},n}(0);L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);
break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:P(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var et=function e(t){function n(e){return t?new L(e,t):new z(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);q.prototype={areaStart:Ye,areaEnd:Ye,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:P(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var tt=function e(t){function n(e){return t?new q(e,t):new N(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:P(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var nt=function e(t){function n(e){return t?new $(e,t):new D(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);j.prototype={areaStart:Ye,areaEnd:Ye,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};var rt=function(e){return new j(e)};W.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:B(this,this._t0,U(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,e!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,B(this,U(this,n=I(this,e,t)),n);break;default:B(this,this._t0,n=I(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(G.prototype=Object.create(W.prototype)).point=function(e,t){W.prototype.point.call(this,t,e)},Y.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},X.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Z(e),i=Z(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var it=function(e){return new X(e)};J.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var at=function(e){return new J(e,.5)},ot=function(e,t){if((i=e.length)>1)for(var n,r,i,a=1,o=e[t[0]],u=o.length;a<i;++a)for(r=o,o=e[t[a]],n=0;n<u;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},ut=function(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n},st=function(){function e(e){var a,o,u=t.apply(this,arguments),s=e.length,f=u.length,c=new Array(f);for(a=0;a<f;++a){for(var l,d=u[a],h=c[a]=new Array(s),p=0;p<s;++p)h[p]=l=[0,+i(e[p],d,p,e)],l.data=e[p];h.key=d}for(a=0,o=n(c);a<f;++a)c[o[a]].index=a;return r(c,o),c}var t=ne([]),n=ut,r=ot,i=ee;return e.keys=function(n){return arguments.length?(t="function"==typeof n?n:ne(Se.call(n)),e):t},e.value=function(t){return arguments.length?(i="function"==typeof t?t:ne(+t),e):i},e.order=function(t){return arguments.length?(n=null==t?ut:"function"==typeof t?t:ne(Se.call(t)),e):n},e.offset=function(t){return arguments.length?(r=null==t?ot:t,e):r},e},ft=function(e,t){if((r=e.length)>0){for(var n,r,i,a=0,o=e[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}ot(e,t)}},ct=function(e,t){if((u=e.length)>1)for(var n,r,i,a,o,u,s=0,f=e[t[0]].length;s<f;++s)for(a=o=0,n=0;n<u;++n)(i=(r=e[t[n]][s])[1]-r[0])>=0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):r[0]=a},lt=function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],a=i.length;r<a;++r){for(var o=0,u=0;o<n;++o)u+=e[o][r][1]||0;i[r][1]+=i[r][0]=-u/2}ot(e,t)}},dt=function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var u=0,s=0,f=0;u<i;++u){for(var c=e[t[u]],l=c[o][1]||0,d=c[o-1][1]||0,h=(l-d)/2,p=0;p<u;++p){var g=e[t[p]],m=g[o][1]||0,v=g[o-1][1]||0;h+=m-v}s+=l,f+=h*l}n[o-1][1]+=n[o-1][0]=a,s&&(a-=f/s)}n[o-1][1]+=n[o-1][0]=a,ot(e,t)}},ht=function(e){var t=e.map(te);return ut(e).sort(function(e,n){return t[e]-t[n]})},pt=function(e){return ht(e).reverse()},gt=function(e){var t,n,r=e.length,i=e.map(te),a=ut(e).sort(function(e,t){return i[t]-i[e]}),o=0,u=0,s=[],f=[];for(t=0;t<r;++t)n=a[t],o<u?(o+=i[n],s.push(n)):(u+=i[n],f.push(n));return f.reverse().concat(s)},mt=function(e){return ut(e).reverse()};e.arc=pe,e.area=ve,e.line=me,e.pie=_e,e.areaRadial=ke,e.radialArea=ke,e.lineRadial=we,e.radialLine=we,e.pointRadial=Me,e.linkHorizontal=k,e.linkVertical=M,e.linkRadial=S,e.symbol=Ge,e.symbols=We,e.symbolCircle=Ee,e.symbolCross=Oe,e.symbolDiamond=Re,e.symbolSquare=Le,e.symbolStar=Pe,e.symbolTriangle=$e,e.symbolWye=Be,e.curveBasisClosed=Ve,e.curveBasisOpen=Xe,e.curveBasis=He,e.curveBundle=Ze,e.curveCardinalClosed=Qe,e.curveCardinalOpen=Ke,e.curveCardinal=Je,e.curveCatmullRomClosed=tt,e.curveCatmullRomOpen=nt,e.curveCatmullRom=et,e.curveLinearClosed=rt,e.curveLinear=ge,e.curveMonotoneX=H,e.curveMonotoneY=V,e.curveNatural=it,e.curveStep=at,e.curveStepAfter=K,e.curveStepBefore=Q,e.stack=st,e.stackOffsetExpand=ft,e.stackOffsetDiverging=ct,e.stackOffsetNone=ot,e.stackOffsetSilhouette=lt,e.stackOffsetWiggle=dt,e.stackOrderAscending=ht,e.stackOrderDescending=pt,e.stackOrderInsideOut=gt,e.stackOrderNone=ut,e.stackOrderReverse=mt,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return e[0]}function n(e){return e[1]}function r(){this._=null}function i(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function a(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function o(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function u(e){for(;e.L;)e=e.L;return e}function s(e,t,n,r){var i=[null,null],a=$.push(i)-1;return i.left=e,i.right=t,n&&c(i,e,t,n),r&&c(i,t,e,r),L[e.index].halfedges.push(a),L[t.index].halfedges.push(a),i}function f(e,t,n){var r=[t,n];return r.left=e,r}function c(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function l(e,t,n,r,i){var a,o=e[0],u=e[1],s=o[0],f=o[1],c=u[0],l=u[1],d=0,h=1,p=c-s,g=l-f;if(a=t-s,p||!(a>0)){if(a/=p,p<0){if(a<d)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=r-s,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<h&&(h=a)}if(a=n-f,g||!(a>0)){if(a/=g,g<0){if(a<d)return;a<h&&(h=a)}else if(g>0){if(a>h)return;a>d&&(d=a)}if(a=i-f,g||!(a<0)){if(a/=g,g<0){if(a>h)return;a>d&&(d=a)}else if(g>0){if(a<d)return;a<h&&(h=a)}return!(d>0||h<1)||(d>0&&(e[0]=[s+d*p,f+d*g]),h<1&&(e[1]=[s+h*p,f+h*g]),!0)}}}}}function d(e,t,n,r,i){var a=e[1];if(a)return!0;var o,u,s=e[0],f=e.left,c=e.right,l=f[0],d=f[1],h=c[0],p=c[1],g=(l+h)/2,m=(d+p)/2;if(p===d){if(g<t||g>=r)return;if(l>h){if(s){if(s[1]>=i)return}else s=[g,n];a=[g,i]}else{if(s){if(s[1]<n)return}else s=[g,i];a=[g,n]}}else if(o=(l-h)/(p-d),u=m-o*g,o<-1||o>1)if(l>h){if(s){if(s[1]>=i)return}else s=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/o,i];a=[(n-u)/o,n]}else if(d<p){if(s){if(s[0]>=r)return}else s=[t,o*t+u];a=[r,o*r+u]}else{if(s){if(s[0]<t)return}else s=[r,o*r+u];a=[t,o*t+u]}return e[0]=s,e[1]=a,!0}function h(e,t,n,r){for(var i,a=$.length;a--;)d(i=$[a],e,t,n,r)&&l(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>I||Math.abs(i[0][1]-i[1][1])>I)||delete $[a]}function p(e){return L[e.index]={site:e,halfedges:[]}}function g(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function m(e,t){return t[+(t.left!==e.site)]}function v(e,t){return t[+(t.left===e.site)]}function y(){for(var e,t,n,r,i=0,a=L.length;i<a;++i)if((e=L[i])&&(r=(t=e.halfedges).length)){var o=new Array(r),u=new Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=g(e,$[t[n]]);for(o.sort(function(e,t){return u[t]-u[e]}),n=0;n<r;++n)u[n]=t[o[n]];for(n=0;n<r;++n)t[n]=u[n]}}function b(e,t,n,r){var i,a,o,u,s,c,l,d,h,p,g,y,b=L.length,_=!0;for(i=0;i<b;++i)if(a=L[i]){for(o=a.site,s=a.halfedges,u=s.length;u--;)$[s[u]]||s.splice(u,1);for(u=0,c=s.length;u<c;)p=v(a,$[s[u]]),g=p[0],y=p[1],l=m(a,$[s[++u%c]]),d=l[0],h=l[1],(Math.abs(g-d)>I||Math.abs(y-h)>I)&&(s.splice(u,0,$.push(f(o,p,Math.abs(g-e)<I&&r-y>I?[e,Math.abs(d-e)<I?h:r]:Math.abs(y-r)<I&&n-g>I?[Math.abs(h-r)<I?d:n,r]:Math.abs(g-n)<I&&y-t>I?[n,Math.abs(d-n)<I?h:t]:Math.abs(y-t)<I&&g-e>I?[Math.abs(h-t)<I?d:e,t]:null))-1),++c);c&&(_=!1)}if(_){var x,w,k,M=1/0;for(i=0,_=null;i<b;++i)(a=L[i])&&(o=a.site,x=o[0]-e,w=o[1]-t,k=x*x+w*w,k<M&&(M=k,_=a));if(_){var S=[e,t],E=[e,r],O=[n,r],A=[n,t];_.halfedges.push($.push(f(o=_.site,S,E))-1,$.push(f(o,E,O))-1,$.push(f(o,O,A))-1,$.push(f(o,A,S))-1)}}for(i=0;i<b;++i)(a=L[i])&&(a.halfedges.length||delete L[i])}function _(){i(this),this.x=this.y=this.arc=this.site=this.cy=null}function x(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],u=i[1],s=r[0]-o,f=r[1]-u,c=a[0]-o,l=a[1]-u,d=2*(s*l-f*c);if(!(d>=-U)){var h=s*s+f*f,p=c*c+l*l,g=(l*h-f*p)/d,m=(s*p-c*h)/d,v=j.pop()||new _;v.arc=e,v.site=i,v.x=g+o,v.y=(v.cy=m+u)+Math.sqrt(g*g+m*m),e.circle=v;for(var y=null,b=q._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}q.insert(y,v),y||(D=v)}}}}function w(e){var t=e.circle;t&&(t.P||(D=t.N),q.remove(t),j.push(t),i(t),e.circle=null)}function k(){i(this),this.edge=this.site=this.circle=null}function M(e){var t=F.pop()||new k;return t.site=e,t}function S(e){w(e),P.remove(e),F.push(e),i(e)}function E(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,u=[e];S(e);for(var f=a;f.circle&&Math.abs(n-f.circle.x)<I&&Math.abs(r-f.circle.cy)<I;)a=f.P,u.unshift(f),S(f),f=a;u.unshift(f),w(f);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<I&&Math.abs(r-l.circle.cy)<I;)o=l.N,u.push(l),S(l),l=o;u.push(l),w(l);var d,h=u.length;for(d=1;d<h;++d)l=u[d],f=u[d-1],c(l.edge,f.site,l.site,i);f=u[0],l=u[h-1],l.edge=s(f.site,l.site,null,i),x(f),x(l)}function O(e){for(var t,n,r,i,a=e[0],o=e[1],u=P._;u;)if(r=A(u,o)-a,r>I)u=u.L;else{if(i=a-C(u,o),!(i>I)){r>-I?(t=u.P,n=u):i>-I?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}p(e);var f=M(e);if(P.insert(t,f),t||n){if(t===n)return w(t),n=M(t.site),P.insert(f,n),f.edge=n.edge=s(t.site,f.site),x(t),void x(n);if(!n)return void(f.edge=s(t.site,f.site));w(t),w(n);var l=t.site,d=l[0],h=l[1],g=e[0]-d,m=e[1]-h,v=n.site,y=v[0]-d,b=v[1]-h,_=2*(g*b-m*y),k=g*g+m*m,S=y*y+b*b,E=[(b*k-m*S)/_+d,(g*S-y*k)/_+h];c(n.edge,l,v,E),f.edge=s(l,e,null,E),n.edge=s(e,v,null,E),x(t),x(n)}}function A(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-(1/0);n=o.site;var u=n[0],s=n[1],f=s-t;if(!f)return u;var c=u-r,l=1/a-1/f,d=c/f;return l?(-d+Math.sqrt(d*d-2*l*(c*c/(-2*f)-s+f/2+i-a/2)))/l+r:(r+u)/2}function C(e,t){var n=e.N;if(n)return A(n,t);var r=e.site;return r[1]===t?r[0]:1/0}function R(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function T(e,t){return t[1]-e[1]||t[0]-e[0]}function z(e,t){var n,i,a,o=e.sort(T).pop();for($=[],L=new Array(e.length),P=new r,q=new r;;)if(a=D,o&&(!a||o[1]<a.y||o[1]===a.y&&o[0]<a.x))o[0]===n&&o[1]===i||(O(o),n=o[0],i=o[1]),o=e.pop();else{if(!a)break;E(a.arc)}if(y(),t){var u=+t[0][0],s=+t[0][1],f=+t[1][0],c=+t[1][1];h(u,s,f,c),b(u,s,f,c)}this.edges=$,this.cells=L,P=q=$=L=null}var N=function(e){return function(){return e}};r.prototype={constructor:r,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=u(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(a(this,n),e=n,n=e.U),n.C=!1,r.C=!0,o(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(o(this,n),e=n,n=e.U),n.C=!1,r.C=!0,a(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,f=e.R;if(n=s?f?u(f):s:f,i?i.L===e?i.L=n:i.R=n:this._=n,s&&f?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==f?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=f,f.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,a(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,o(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,a(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,o(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,a(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,o(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var D,P,L,q,$,j=[],F=[],I=1e-6,U=1e-12;z.prototype={constructor:z,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return m(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u=n.site,s=-1,f=t[i[a-1]],c=f.left===u?f.right:f.left;++s<a;)o=c,f=t[i[s]],c=f.left===u?f.right:f.left,o&&c&&r<o.index&&r<c.index&&R(u,o,c)<0&&e.push([u.data,o.data,c.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;var s=e-i.site[0],f=t-i.site[1],c=s*s+f*f;do i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=e-u[0],f=t-u[1],l=s*s+f*f;l<c&&(c=l,o=u.index)}});while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}};var B=function(){function e(e){return new z(e.map(function(t,n){var a=[Math.round(r(t,n,e)/I)*I,Math.round(i(t,n,e)/I)*I];return a.index=n,a.data=t,a}),a)}var r=t,i=n,a=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(t){return arguments.length?(r="function"==typeof t?t:N(+t),e):r},e.y=function(t){return arguments.length?(i="function"==typeof t?t:N(+t),e):i},e.extent=function(t){return arguments.length?(a=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):a&&[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},e.size=function(t){return arguments.length?(a=null==t?null:[[0,0],[+t[0],+t[1]]],e):a&&[a[1][0]-a[0][0],a[1][1]-a[0][1]]},e};e.voronoi=B,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){"use strict";var r=n(233),i=n(153),a="function"==typeof Symbol&&"symbol"==typeof Symbol(),o=Object.prototype.toString,u=function(e){return"function"==typeof e&&"[object Function]"===o.call(e)},s=function(){var e={};try{Object.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(e){return!1}},f=Object.defineProperty&&s(),c=function(e,t,n,r){(!(t in e)||u(r)&&r())&&(f?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},l=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);a&&(o=o.concat(Object.getOwnPropertySymbols(t))),i(o,function(r){c(e,r,t[r],n[r])})};l.supportsDescriptors=!!f,e.exports=l},function(e,t){"use strict";e.exports=function(e){return e!==e}},function(e,t,n){"use strict";var r=n(81);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},,function(e,t){e.exports=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]];
},function(e,t){e.exports=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]},function(e,t,n){function r(e){return null==e?void 0===e?s:u:f&&f in Object(e)?a(e):o(e)}var i=n(43),a=n(200),o=n(221),u="[object Null]",s="[object Undefined]",f=i?i.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e,t){var n=a(e,t);return i(n)?n:void 0}var i=n(195),a=n(201);e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function r(e,t,n){this.name=this.constructor.name,this.message=e,this.type=t,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}e.exports=r,n(54).inherits(r,Error)},function(e,t){"use strict";function n(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0}e.exports=n},function(e,t){"use strict";function n(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function r(e,t,n,r){var a=i,o=r+n;e^=-1;for(var u=r;u<o;u++)e=e>>>8^a[255&(e^t[u])];return e^-1}var i=n();e.exports=r},function(e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){(function(t,r){"use strict";function i(e){return q.from(e)}function a(e){return q.isBuffer(e)||e instanceof $}function o(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?D(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function u(e,t){N=N||n(6),e=e||{};var r=t instanceof N;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,o=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:r&&(a||0===a)?this.highWaterMark=a:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(U||(U=n(52).StringDecoder),this.decoder=new U(e.encoding),this.encoding=e.encoding)}function s(e){return N=N||n(6),this instanceof s?(this._readableState=new u(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),void L.call(this)):new s(e)}function f(e,t,n,r,a){var o=e._readableState;if(null===t)o.reading=!1,g(e,o);else{var u;a||(u=l(o,t)),u?e.emit("error",u):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===q.prototype||(t=i(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):c(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?c(e,o,t,!1):y(e,o)):c(e,o,t,!1))):r||(o.reading=!1)}return d(o)}function c(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),y(e,t)}function l(e,t){var n;return a(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=Y?e=Y:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,m(e)}}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(I("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?z.nextTick(v,e):v(e))}function v(e){I("emit readable"),e.emit("readable"),M(e)}function y(e,t){t.readingMore||(t.readingMore=!0,z.nextTick(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(I("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function _(e){return function(){var t=e._readableState;I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&P(e,"data")&&(t.flowing=!0,M(e))}}function x(e){I("readable nexttick read 0"),e.read(0)}function w(e,t){t.resumeScheduled||(t.resumeScheduled=!0,z.nextTick(k,e,t))}function k(e,t){t.reading||(I("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(I("flow",t.flowing);t.flowing&&null!==e.read(););}function S(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=E(e,t.buffer,t.decoder),n}function E(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?O(e,t):A(e,t),r}function O(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(i+=o===a.length?a:a.slice(0,e),e-=o,0===e){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}function A(e,t){var n=q.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),e-=o,0===e){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}function C(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,z.nextTick(R,t,e))}function R(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function T(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var z=n(27);e.exports=s;var N,D=n(83);s.ReadableState=u;var P=(n(41).EventEmitter,function(e,t){return e.listeners(t).length}),L=n(96),q=n(50).Buffer,$=t.Uint8Array||function(){},j=n(11);j.inherits=n(5);var F=n(273),I=void 0;I=F&&F.debuglog?F.debuglog("stream"):function(){};var U,B=n(251),W=n(95);j.inherits(s,L);var G=["error","close","destroy","pause","resume"];Object.defineProperty(s.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),s.prototype.destroy=W.destroy,s.prototype._undestroy=W.undestroy,s.prototype._destroy=function(e,t){this.push(null),t(e)},s.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=q.from(e,t),t=""),n=!0),f(this,e,t,!1,n)},s.prototype.unshift=function(e){return f(this,e,null,!0,!1)},s.prototype.isPaused=function(){return this._readableState.flowing===!1},s.prototype.setEncoding=function(e){return U||(U=n(52).StringDecoder),this._readableState.decoder=new U(e),this._readableState.encoding=e,this};var Y=8388608;s.prototype.read=function(e){I("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return I("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):m(this),null;if(e=p(e,t),0===e&&t.ended)return 0===t.length&&C(this),null;var r=t.needReadable;I("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,I("length less than watermark",r)),t.ended||t.reading?(r=!1,I("reading or ended",r)):r&&(I("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(n,t)));var i;return i=e>0?S(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&C(this)),null!==i&&this.emit("data",i),i},s.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},s.prototype.pipe=function(e,t){function n(e,t){I("onunpipe"),e===d&&t&&t.hasUnpiped===!1&&(t.hasUnpiped=!0,a())}function i(){I("onend"),e.end()}function a(){I("cleanup"),e.removeListener("close",f),e.removeListener("finish",c),e.removeListener("drain",m),e.removeListener("error",s),e.removeListener("unpipe",n),d.removeListener("end",i),d.removeListener("end",l),d.removeListener("data",u),v=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function u(t){I("ondata"),y=!1;var n=e.write(t);!1!==n||y||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&T(h.pipes,e)!==-1)&&!v&&(I("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,y=!0),d.pause())}function s(t){I("onerror",t),l(),e.removeListener("error",s),0===P(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",c),l()}function c(){I("onfinish"),e.removeListener("close",f),l()}function l(){I("unpipe"),d.unpipe(e)}var d=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,I("pipe count=%d opts=%j",h.pipesCount,t);var p=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,g=p?i:l;h.endEmitted?z.nextTick(g):d.once("end",g),e.on("unpipe",n);var m=_(d);e.on("drain",m);var v=!1,y=!1;return d.on("data",u),o(e,"error",s),e.once("close",f),e.once("finish",c),e.emit("pipe",d),h.flowing||(I("pipe resume"),d.resume()),e},s.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=T(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},s.prototype.on=function(e,t){var n=L.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&m(this):z.nextTick(x,this))}return n},s.prototype.addListener=s.prototype.on,s.prototype.resume=function(){var e=this._readableState;return e.flowing||(I("resume"),e.flowing=!0,w(this,e)),this},s.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this},s.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;e.on("end",function(){if(I("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){if(I("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var a=t.push(i);a||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<G.length;a++)e.on(G[a],this.emit.bind(this,G[a]));return this._read=function(t){I("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(s.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),s._fromList=S}).call(t,function(){return this}(),n(2))},function(e,t,n){"use strict";function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(e){return this instanceof i?(u.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",a)):new i(e)}function a(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){o(e,t,n)}):o(this,null,null)}function o(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=i;var u=n(6),s=n(11);s.inherits=n(5),s.inherits(i,u),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;u.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(o.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(e,t){e.emit("error",t)}var o=n(27);e.exports={destroy:r,undestroy:i}},function(e,t,n){e.exports=n(41).EventEmitter},function(e,t,n){e.exports=n(12).Transform},function(e,t){(function(e){function n(){if(void 0!==a)return a;if(e.XMLHttpRequest){a=new e.XMLHttpRequest;try{a.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){a=null}}else a=null;return a}function r(e){var t=n();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function i(e){return"function"==typeof e}t.fetch=i(e.fetch)&&i(e.ReadableStream),t.writableStream=i(e.WritableStream),t.abortController=i(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var a,o="undefined"!=typeof e.ArrayBuffer,u=o&&i(e.ArrayBuffer.prototype.slice);t.arraybuffer=t.fetch||o&&r("arraybuffer"),t.msstream=!t.fetch&&u&&r("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&o&&r("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!n()&&i(n().overrideMimeType),t.vbArray=i(e.VBArray),a=null}).call(t,function(){return this}())},function(e,t,n){(function(e,r,i){var a=n(98),o=n(5),u=n(12),s=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},f=t.IncomingMessage=function(t,n,o,s){function f(){d.read().then(function(e){if(!c._destroyed){if(e.done)return i.clearTimeout(s),void c.push(null);c.push(new r(e.value)),f()}}).catch(function(e){i.clearTimeout(s),c._destroyed||c.emit("error",e)})}var c=this;if(u.Readable.call(c),c._mode=o,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){e.nextTick(function(){c.emit("close")})}),"fetch"===o){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach(function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)}),a.writableStream){var l=new WritableStream({write:function(e){return new Promise(function(t,n){c._destroyed?n():c.push(new r(e))?t():c._resumeFetch=t})},close:function(){i.clearTimeout(s),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void n.body.pipeTo(l).catch(function(e){i.clearTimeout(s),c._destroyed||c.emit("error",e)})}catch(e){}}var d=n.body.getReader();f()}else{c._xhr=t,c._pos=0,c.url=t.responseURL,c.statusCode=t.status,c.statusMessage=t.statusText;var h=t.getAllResponseHeaders().split(/\r?\n/);if(h.forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===c.headers[n]&&(c.headers[n]=[]),c.headers[n].push(t[2])):void 0!==c.headers[n]?c.headers[n]+=", "+t[2]:c.headers[n]=t[2],c.rawHeaders.push(t[1],t[2])}}),c._charset="x-user-defined",!a.overrideMimeType){var p=c.rawHeaders["mime-type"];if(p){var g=p.match(/;\s*charset=([^;])(;|$)/);g&&(c._charset=g[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};o(f,u.Readable),f.prototype._read=function(){var e=this,t=e._resumeFetch;t&&(e._resumeFetch=null,t())},f.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==s.DONE)break;try{n=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==n){e.push(new r(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var a=n.substr(e._pos);if("x-user-defined"===e._charset){for(var o=new r(a.length),u=0;u<a.length;u++)o[u]=255&a.charCodeAt(u);e.push(o)}else e.push(a,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==s.DONE||!t.response)break;n=t.response,e.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==s.LOADING||!n)break;e.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==s.LOADING)break;var f=new i.MSStreamReader;f.onprogress=function(){f.result.byteLength>e._pos&&(e.push(new r(new Uint8Array(f.result.slice(e._pos)))),e._pos=f.result.byteLength)},f.onload=function(){e.push(null)},f.readAsArrayBuffer(n)}e._xhr.readyState===s.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(t,n(2),n(1).Buffer,function(){return this}())},function(e,t,n){(function(e){!function(e,r){r(t,n(72),n(37),n(16),n(78),n(36),n(77),n(76),n(19),n(20),n(35),n(74),n(73),n(17),n(75),n(79),n(18),n(38))}(this,function(t,r,i,a,o,u,s,f,c,l,d,h,p,g,m,v,y,b){"use strict";function _(e,t,n){return e.fields=t||[],e.fname=n,e}function x(e){return null==e?null:e.fname}function w(e){return null==e?null:e.fields}function k(e){throw Error(e)}function M(e){function t(){a.push(f+e.substring(n,r)),f="",n=r+1}var n,r,i,a=[],o=null,u=0,s=e.length,f="";for(e+="",n=r=0;r<s;++r)if(i=e[r],"\\"===i)f+=e.substring(n,r),n=++r;else if(i===o)t(),o=null,u=-1;else{if(o)continue;n===u&&'"'===i?(n=r+1,o=i):n===u&&"'"===i?(n=r+1,o=i):"."!==i||u?"["===i?(r>n&&t(),u=n=r+1):"]"===i&&(u||k("Access path missing open bracket: "+e),u>0&&t(),u=0,n=r+1):r>n?t():n=r+1}return u&&k("Access path missing closing bracket: "+e),o&&k("Access path missing closing quote: "+e),r>n&&(r++,t()),a}function S(e){return e===Object(e)}function E(e){return"string"==typeof e}function O(e){return Yv(e)?"["+e.map(O)+"]":S(e)||E(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function A(e,t){var n=M(e),r="return _["+n.map(O).join("][")+"];";return _(Function("_",r),[e=1===n.length?n[0]:e],t||e)}function C(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function R(e){var t=e||ey;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=ty&&C("error","ERROR",arguments),this},warn:function(){return t>=ny&&C("warn","WARN",arguments),this},info:function(){return t>=ry&&C("log","INFO",arguments),this},debug:function(){return t>=iy&&C("log","DEBUG",arguments),this}}}function T(e){return e[e.length-1]}function z(e){return null==e||""===e?null:+e}function N(e){return function(t){return e*Math.exp(t)}}function D(e){return function(t){return Math.log(e*t)}}function P(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function L(e,t,n,r){var i=n(e[0]),a=n(T(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function q(e,t){return L(e,t,z,Xv)}function $(e,t){var n=Math.sign(e[0]);return L(e,t,D(n),N(n))}function j(e,t,n){return L(e,t,P(n),P(1/n))}function F(e,t,n,r,i){var a=r(e[0]),o=r(T(e)),u=null!=t?r(t):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function I(e,t,n){return F(e,t,n,z,Xv)}function U(e,t,n){var r=Math.sign(e[0]);return F(e,t,n,D(r),N(r))}function B(e,t,n,r){return F(e,t,n,P(r),P(1/r))}function W(e){return null!=e?Yv(e)?e:[e]:[]}function G(e){return"function"==typeof e}function Y(e,t){var n,r,i,a,o,u,s,f,c,l=[],d=(e=W(e)).map(function(e,t){return null==e?null:(l.push(t),G(e)?e:M(e).map(O).join("]["))}),h=l.length-1,p=W(t),g="var u,v;return ";if(h<0)return null;for(r=0;r<=h;++r)n=l[r],i=d[n],G(i)?(u="f"+n,a="(u=this."+u+"(a))",o="(v=this."+u+"(b))",(s=s||{})[u]=i):(a="(u=a["+i+"])",o="(v=b["+i+"])"),u="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==p[n]?(c=1,f=-1):(c=-1,f=1),g+="("+a+"<"+o+"||u==null)&&v!=null?"+f+":(u>v||v==null)&&u!=null?"+c+":"+u+"!==u&&v===v?"+f+":v!==v&&u===u?"+c+(n<h?":":":0");return i=Function("a","b",g+";"),s&&(i=i.bind(s)),e=e.reduce(function(e,t){return G(t)?(w(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),_(i,Object.keys(e))}function H(e){return G(e)?e:function(){return e}}function V(e,t){function n(){t(i),r=i=null}var r,i;return function(t){i=t,r&&clearTimeout(r),r=setTimeout(n,e)}}function X(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Z(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(r=e[u],null!=r&&r>=r){n=i=r;break}for(a=o=u;++u<s;)r=e[u],null!=r&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(r=t(e[u],u,e),null!=r&&r>=r){n=i=r;break}for(a=o=u;++u<s;)r=t(e[u],u,e),null!=r&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function J(e){function t(e){return i.hasOwnProperty(e)&&i[e]!==ay}var n,r,i={};return n={size:0,empty:0,object:i,has:t,get:function(e){return t(e)?i[e]:void 0},set:function(e,r){return t(e)||(++n.size,i[e]===ay&&--n.empty),i[e]=r,this},delete:function(e){return t(e)&&(--n.size,++n.empty,i[e]=ay),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(e){return arguments.length?(r=e,n):r},clean:function(){var e,t,a={},o=0;for(e in i)t=i[e],t===ay||r&&r(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=i=a}},e&&Object.keys(e).forEach(function(t){n.set(t,e[t])}),n}function Q(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function K(e){return"boolean"==typeof e}function ee(e){return"[object Date]"===Object.prototype.toString.call(e)}function te(e){return"number"==typeof e}function ne(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function re(e,t){e&&(e=t?W(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):W(e));var n=e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?O(e):M(e).map(O).join("]["))+"]"}).join("+'|'+")+";"):function(){return""};return _(n,e,"key")}function ie(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<i;++u,++f)o[f]=t[u];for(;s<a;++s,++f)o[f]=n[s];return o}function ae(e,t){for(var n="";--t>=0;)n+=e;return n}function oe(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?ae(i,o)+a:"center"===r?ae(i,~~(o/2))+a+ae(i,Math.ceil(o/2)):a+ae(i,o)}function ue(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}function se(e){return te(e)?e:ee(e)?e:Date.parse(e)}function fe(e,t){return t=t||se,null==e||""===e?null:t(e)}function ce(e){return null==e||""===e?null:e+""}function le(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function de(e,t,n,r){var i=null!=r?r:"",a=e+"",o=a.length,u=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function he(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}function pe(e){var t=e||Xv,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0,(i=n.indexOf(e))>=0&&n.splice(i,1)),n},n}function ge(e){return!(!e||!me(e))}function me(e){return e[oy]}function ve(e,t){return e[oy]=t,e}function ye(e){var t=e===Object(e)?e:{data:e};return me(t)?t:ve(t,uy++)}function be(e){return _e(e,ye({}))}function _e(e,t){for(var n in e)t[n]=e[n];return t}function xe(e,t){return ve(t,me(e))}function we(e){return e&&e.constructor===ke}function ke(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:ke,insert:function(t){for(var n=W(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=G(e)?r:t,i=W(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:H(r)};return G(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return G(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(e,t,n){n?e[t]=n(e):o.encode=t,a||(f[me(e)]=e)}var f,c,l,d,h,p,g;for(c=0,l=e.length;c<l;++c)o.add.push(ye(e[c]));for(f={},c=0,l=t.length;c<l;++c)p=t[c],f[me(p)]=p;for(c=0,l=r.length;c<l;++c)h=r[c],u.forEach(function(e){h(e)&&(f[me(e)]=e)});for(g in f)o.rem.push(f[g]);for(f={},c=0,l=n.length;c<l;++c)d=n[c],s(d.tuple,d.field,d.value),o.modifies(d.field);for(c=0,l=i.length;c<l;++c)d=i[c],h=d.filter,u.forEach(function(e){h(e)&&s(e,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?u.filter(function(e){return f.hasOwnProperty(me(e))}):u.slice();else for(g in f)o.mod.push(f[g]);return o}}}function Me(){Object.defineProperty(this,sy,{writable:!0,value:{}})}function Se(e,t,n,r){this.id=++cy,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Ee(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function Oe(e,t,n,r){var i,a=1;return e instanceof Se?i=e:e&&e.prototype instanceof Se?i=new e:G(e)?i=new Se(null,e):(a=0,i=new Se(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i}function Ae(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)}function Ce(e,t,n){this.id=++my,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Re(e,t,n){return new Ce(e,t,n)}function Te(e,t,n,r){var i,a=this,o=Re(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(e){a.error(e)}finally{a.run()}};i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):W(e);for(var s=0,f=i.length;s<f;++s)i[s].addEventListener(t,u);return o}function ze(e){return{options:e||{},sanitize:De,load:Ne,file:Le,http:Pe}}function Ne(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function De(e,t){return t=X({},this.options,t),new Promise(function(n,r){var i,a,o,u,s={href:null};return null==e||"string"!=typeof e?void r("Sanitize failure, invalid URI: "+O(e)):(a=yy.test(e),(u=t.baseURL)&&!a&&(je(e,"/")||"/"===u[u.length-1]||(e="/"+e),e=u+e),o=(i=je(e,by))||"file"===t.mode||"http"!==t.mode&&!a&&$e(),i?e=e.slice(by.length):je(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(s,"localFile",{value:!!o}),s.href=e,t.target&&(s.target=t.target+""),void n(s))})}function Pe(e,t){return qe(e,X({},this.options.http,t)).then(function(e){if(!e.ok)throw e.status+""+e.statusText;return e.text()})}function Le(e){return new Promise(function(t,n){var r=$e();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function qe(e,t){var r="function"==typeof fetch?fetch:n(25);return r?r(e,t):Promise.reject("No fetch method available.")}function $e(){var e=n(30);return e&&G(e.readFile)?e:null}function je(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function Fe(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o=xy.slice();for(r=0,i=e.length;r<i;++r){for(n=t?e[r][t]:e[r],a=0;a<o.length;++a)Ue(n)&&!o[a](n)&&(o.splice(a,1),--a);if(0===o.length)return"string"}return wy[xy.indexOf(o[0])]}function Ie(e,t){return t.reduce(function(t,n){return t[n]=Fe(e,n),t},{})}function Ue(e){return null!=e&&e===e}function Be(e){return"true"===e||"false"===e||e===!0||e===!1}function We(e){return!isNaN(Date.parse(e))}function Ge(e){return!(isNaN(+e)||e instanceof Date)}function Ye(e){return Ge(e)&&(e=+e)===~~e}function He(e){return function(t,n){var r={delimiter:e};return Ve(t,n?X(n,r):r)}}function Ve(e,t){return t.header&&(e=t.header.map(O).join(t.delimiter)+"\n"+e),r.dsvFormat(t.delimiter).parse(e+"")}function Xe(t){return!("function"!=typeof e||!G(e.isBuffer))&&e.isBuffer(t)}function Ze(e,t){var n=t&&t.property?A(t.property):Xv;return S(e)&&!Xe(e)?Je(n(e)):n(JSON.parse(e))}function Je(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}function Qe(e){return e}function Ke(e){if(null==e)return Qe;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,f=e.length,c=new Array(f);for(c[0]=(t+=e[0])*r+a,c[1]=(n+=e[1])*i+o;s<f;)c[s]=e[s],++s;return c}}function et(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function tt(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return nt(e,t)})}:nt(e,t)}function nt(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=rt(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function rt(e,t){function n(e,t){t.length&&t.pop();for(var n=f[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(s(n[r],r));e<0&&et(t,i)}function r(e){return s(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}function u(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(u)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":
t=i(e.arcs);break;case"MultiLineString":t=e.arcs.map(i);break;case"Polygon":t=o(e.arcs);break;case"MultiPolygon":t=e.arcs.map(o);break;default:return null}return{type:n,coordinates:t}}var s=Ke(e.transform),f=e.arcs;return u(t)}function it(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),u.push(r)}}var i={},a={},o={},u=[],s=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++s],t[s]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),u=i[0],s=i[1];if(t=o[u])if(delete o[t.end],t.push(e),t.end=s,r=a[s]){delete a[r.start];var f=r===t?t:t.concat(r);a[f.start=t.start]=o[f.end=r.end]=f}else a[t.start]=o[t.end]=t;else if(t=a[s])if(delete a[t.start],t.unshift(e),t.start=u,r=o[u]){delete o[r.end];var c=r===t?t:r.concat(t);a[c.start=r.start]=o[c.end=t.end]=c}else a[t.start]=o[t.end]=t;else t=[e],a[t.start=u]=o[t.end=s]=t}),r(o,a),r(a,o),t.forEach(function(e){i[e<0?~e:e]||u.push([e])}),u}function at(e){return rt(e,ot.apply(this,arguments))}function ot(e,t,n){var r,i,a;if(arguments.length>1)r=ut(e,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:it(e,r)}}function ut(e,t,n){function r(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:s})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function u(e){switch(s=e,e.type){case"GeometryCollection":e.geometries.forEach(u);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":a(e.arcs);break;case"MultiPolygon":o(e.arcs)}}var s,f=[],c=[];return u(t),c.forEach(null==n?function(e){f.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&f.push(e[0].i)}),f}function st(e,t){var n,r,i;return e=Ze(e,t),n=t&&(i=t.feature)?tt:t&&(i=t.mesh)?at:k("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r):k("Invalid TopoJSON object: "+i),r&&r.features||[r]}function ft(e,t){return arguments.length>1?(ky[e]=t,this):ky.hasOwnProperty(e)?ky[e]:null}function ct(e,t,n){t=t||{};var r=ft(t.type||"json");return r||k("Unknown data format type: "+t.type),e=r(e,t),t.parse&&lt(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}function lt(e,t,n){if(e.length){n=n||i.timeParse;var r,a,o,u,s,f,c,l=e.columns||Object.keys(e[0]);for("auto"===t&&(t=Ie(e,l)),l=Object.keys(t),r=l.map(function(e){var r,a,o=t[e];if(o&&(0===o.indexOf("date:")||0===o.indexOf("utc:")))return r=o.split(/:(.+)?/,2),a=r[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),"utc"===r[0]?i.utcParse(a):n(a);if(!_y[o])throw Error("Illegal format pattern: "+e+":"+o);return _y[o]}),u=0,f=e.length,c=l.length;u<f;++u)for(a=e[u],s=0;s<c;++s)o=l[s],a[o]=r[s](a[o])}}function dt(e,t,n){return this.pulse(e,this.changeset().insert(ct(t,n)))}function ht(e){var t,n,r=new Promise(function(e,r){t=e,n=r});return r.requests=0,r.done=function(){0===--r.requests&&e.runAfter(function(){e._pending=null;try{e.run(),t(e)}catch(e){n(e)}})},e._pending=r}function pt(e,t,n){var r=this,i=r._pending||ht(r);i.requests+=1,r.loader().load(t,{context:"dataflow"}).then(function(t){r.ingest(e,t,n)},function(e){r.error("Loading failed",t,e)}).catch(function(e){r.error("Data ingestion failed",t,e)}).then(i.done,i.done)}function gt(e,t,n,r,i){var a=e instanceof Se?vt:mt;return a(this,e,t,n,r,i),this}function mt(e,t,n,r,i,a){var o,u,s=X({},a,My);G(n)||(n=H(n)),void 0===r?o=function(t){e.touch(n(t))}:G(r)?(u=new Se(null,r,i,!1),o=function(t){var r,i=n(t);u.evaluate(t),we(r=u.value)?e.pulse(i,r,a):e.update(i,r,s)}):o=function(t){e.update(n(t),r,s)},t.apply(o)}function vt(e,t,n,r,i,a){var o,u;void 0===r?u=n:(o=G(r)?r:H(r),r=n?function(e,t){var r=o(e,t);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,u=new Se(null,r,i,!1),u.modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),t.targets().add(u)}function yt(e){e.rank=++this._rank}function bt(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;--r>=0;)i.push(t=n[r]),t===e&&k("Cycle detected in dataflow graph.")}function _t(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function xt(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function wt(e,t){var n=[];return he(e,t,function(e){n.push(e)}),n}function kt(e,t){var n={};return e.visit(t,function(e){n[me(e)]=1}),function(e){return n[me(e)]?null:e}}function Mt(e,t,n,r){var i,a,o,u,s,f=this,c=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n,o=0,u=n.length;o<u;++o)if(i=n[o],i.stamp===t){if(i.fields){a=f.fields||(f.fields={});for(s in i.fields)a[s]=1}i.changed(f.ADD)&&(c|=f.ADD),i.changed(f.REM)&&(c|=f.REM),i.changed(f.MOD)&&(c|=f.MOD)}this.changes=c}function St(e){var t,n,r,i,a=this,o=0,u=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new _t(a,++a._clock,e),u>=ry&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach(function(e){a._enqueue(e,!0)}),a._touched=pe(Vv);try{for(;a._heap.size()>0;)t=a._heap.pop(),t.rank===t.qrank?(n=t.run(a._getPulse(t,e)),u>=iy&&a.debug(t.id,n===Sy?"STOP":n,t),n!==Sy&&(a._pulse=n,t._targets&&t._targets.forEach(function(e){a._enqueue(e)})),++o):a._enqueue(t,!0)}catch(e){i=e}if(a._pulses={},a._pulse=null,u>=ry&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(e){a.error(e)}if(a._postrun.length){var s=a._postrun;a._postrun=[],s.sort(function(e,t){return t.priority-e.priority}).forEach(function(e){Et(a,e.callback)})}return o}function Et(e,t){try{t(e)}catch(t){e.error(t)}}function Ot(){return this._pending||Promise.resolve(this.run())}function At(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):Et(this,e)}function Ct(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Rt(e,t){var n,r=e.source,i=this._clock;return r&&Yv(r)?(n=r.map(function(e){return e.pulse}),new Mt(this,i,n,t)):(n=this._pulses[e.id],r&&(r=r.pulse,r&&r!==Sy?r.stamp===i&&n.target!==e?n=r:n.source=r.source:n.source=[]),n)}function Tt(e,t){var n=t||$y;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function zt(e,t,n){var r=n||$y;return(e.set(t)||r.force)&&this.touch(e,r),this}function Nt(e,t,n){this.touch(e,n||$y);var r=new _t(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._pulses[e.id]=t.pulse(r,i),this}function Dt(e){this.cmp=e,this.nodes=[]}function Pt(e,t,n,r){var i,a,o;for(i=e[n];n>t&&(o=n-1>>1,a=e[o],r(i,a)<0);)e[n]=a,n=o;return e[n]=i}function Lt(e,t,n){for(var r,i=t,a=e.length,o=e[t],u=2*t+1;u<a;)r=u+1,r<a&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],t=u,u=2*t+1;return e[t]=o,Pt(e,i,t,n)}function qt(){this._log=R(),this.logLevel(ty),this._clock=0,this._rank=0;try{this._loader=ze()}catch(e){}this._touched=pe(Vv),this._pulses={},this._pulse=null,this._heap=new Dt(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function $t(e){return function(){return this._log[e].apply(this,arguments)}}function jt(e,t){Se.call(this,e,null,t)}function Ft(e){var t=It(e);return t&&t.Definition||null}function It(e){return e=e&&e.toLowerCase(),Uy.hasOwnProperty(e)?Uy[e]:null}function Ut(e){return function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}}function Bt(e){return e&&e.length?1===e.length?e[0]:Ut(e):function(){return""}}function Wt(e,t,n){return n||e+(t?"_"+t:"")}function Gt(e,t){return By[e](t)}function Yt(e){return function(t){var n=X({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function Ht(e,t){return e.idx-t.idx}function Vt(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=By[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r,i=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{})),a=[];for(r in i)a.push(i[r]);return a.sort(Ht)}function Xt(e,t){var n=t||Xv,r=Vt(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach(function(e){i+=e.init,o+=e.add,u+=e.rem}),e.slice().sort(Ht).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",a=Function("cell",a),a.prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",u),a.prototype.set=Function("t",s),a.prototype.get=n,a.fields=e.map(function(e){return e.out}),a}function Zt(e){var t,n,r,i,a,o,u,s,f=e.maxbins||20,c=e.base||10,l=Math.log(c),d=e.divide||[5,2],h=e.extent[0],p=e.extent[1],g=p-h;if(e.step)t=e.step;else if(e.steps){for(a=g/f,o=0,u=e.steps.length;o<u&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/l),r=e.minstep||0,t=Math.max(r,Math.pow(c,Math.round(Math.log(g)/l)-n));Math.ceil(g/t)>f;)t*=c;for(o=0,u=d.length;o<u;++o)a=t/d[o],a>=r&&g/a<=f&&(t=a)}return a=Math.log(t),i=a>=0?0:~~(-a/l)+1,s=Math.pow(c,-i-1),(e.nice||void 0===e.nice)&&(a=Math.floor(h/t+s)*t,h=h<a?a-t:a,p=Math.ceil(p/t)*t),{start:h,stop:p,step:t}}function Jt(e,t){var n,r=[],i=e.length,a=-1;if(null==t)for(;++a<i;)isNaN(n=Qt(e[a]))||r.push(n);else for(;++a<i;)isNaN(n=Qt(t(e[a],a,e)))||r.push(n);return r}function Qt(e){return null===e?NaN:+e}function Kt(e){t.random=e}function en(e,n,r,i){var o,u,s,f,c=Jt(e,i),l=c.length,d=n;for(s=0,f=Array(d);s<d;++s){for(o=0,u=0;u<l;++u)o+=c[~~(t.random()*l)];f[s]=o/l}return[a.quantile(f.sort(a.ascending),r/2),a.quantile(f,1-r/2)]}function tn(e,t){var n=Jt(e,t);return[a.quantile(n.sort(a.ascending),.25),a.quantile(n,.5),a.quantile(n,.75)]}function nn(e,n){null==n&&(n=e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(r=e||0,a=i-r,o):r},o.max=function(e){return arguments.length?(i=e||0,a=i-r,o):i},o.sample=function(){return r+Math.floor(a*t.random())},o.pdf=function(e){return e===Math.floor(e)&&e>=r&&e<i?1/a:0},o.cdf=function(e){var t=Math.floor(e);return t<r?0:t>=i?1:(t-r+1)/a},o.icdf=function(e){return e>=0&&e<=1?r-1+Math.floor(e*a):NaN},o.min(e).max(n)}function rn(e,n){var r,i,a=NaN,o={};return o.mean=function(e){return arguments.length?(r=e||0,a=NaN,o):r},o.stdev=function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},o.sample=function(){var e,n,o=0,u=0;if(a===a)return o=a,a=NaN,o;do o=2*t.random()-1,u=2*t.random()-1,e=o*o+u*u;while(0===e||e>1);return n=Math.sqrt(-2*Math.log(e)/e),a=r+u*n*i,r+o*n*i},o.pdf=function(e){var t=Math.exp(Math.pow(e-r,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*t},o.cdf=function(e){var t,n=(e-r)/i,a=Math.abs(n);if(a>37)t=0;else{var o,u=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,t=u*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,t/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,t=u/o/2.506628274631)}return n>0?1-t:t},o.icdf=function(e){if(e<=0||e>=1)return NaN;var t=2*e-1,n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*n)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/n,u=(t>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return r+i*Math.SQRT2*u},o.mean(e).stdev(n)}function an(e,n){var r=rn(),i={},a=0;return i.data=function(t){return arguments.length?(e=t,a=t?t.length:0,i.bandwidth(n)):e},i.bandwidth=function(t){return arguments.length?(n=t,!n&&e&&(n=on(e)),i):n},i.sample=function(){return e[~~(t.random()*a)]+n*r.sample()},i.pdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.pdf((t-e[o])/n);return i/n/a},i.cdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.cdf((t-e[o])/n);return i/a},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)}function on(e){var t=e.length,n=tn(e),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(a.variance(e)),r)*Math.pow(t,-.2)}function un(e,n){function r(e){var t,n=[],r=0;for(t=0;t<o;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<o;++t)n[t]/=r;return n}var i,a={},o=0;return a.weights=function(e){return arguments.length?(i=r(n=e||[]),a):n},a.distributions=function(t){return arguments.length?(t?(o=t.length,e=t):(o=0,e=[]),a.weights(n)):e},a.sample=function(){for(var n=t.random(),r=e[o-1],a=i[0],u=0;u<o-1;a+=i[++u])if(n<a){r=e[u];break}return r.sample()},a.pdf=function(t){for(var n=0,r=0;r<o;++r)n+=i[r]*e[r].pdf(t);return n},a.cdf=function(t){for(var n=0,r=0;r<o;++r)n+=i[r]*e[r].cdf(t);return n},a.icdf=function(){throw Error("Mixture icdf not supported.")},a.distributions(e).weights(n)}function sn(e,n){null==n&&(n=null==e?1:e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(r=e||0,a=i-r,o):r},o.max=function(e){return arguments.length?(i=e||0,a=i-r,o):i},o.sample=function(){return r+a*t.random()},o.pdf=function(e){return e>=r&&e<=i?1/a:0},o.cdf=function(e){return e<r?0:e>i?1:(e-r)/a},o.icdf=function(e){return e>=0&&e<=1?r+e*a:NaN},o.min(e).max(n)}function fn(e){this._key=e?A(e):me,this.reset()}function cn(e){jt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function ln(e){jt.call(this,null,e)}function dn(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter(function(e){return!o[r(e)]}),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?ie(e,i,a.sort(e)):i.concat(a),a=[]),i}}}function hn(e){jt.call(this,[],e)}function pn(e){Se.call(this,null,gn,e)}function gn(e){return this.value&&!e.modified()?this.value:Y(e.fields,e.orders)}function mn(e){jt.call(this,null,e)}function vn(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}function yn(e){jt.call(this,null,e)}function bn(e,t,n,r){for(var i,a,o=[],u={},s=e.length,f=0;f<s;++f)for(u[t]=a=e[f],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(ye(u)),u={},u[t]=a);return o}function _n(e,t){var n=e[Ky];Jy.hasOwnProperty(n)||k("Unknown distribution function: "+n);var r=Jy[n]();for(var i in e)i===eb?r.data((e.from||t()).map(e[i])):i===Qy?r[i](e[i].map(function(e){return _n(e,t)})):typeof r[i]===Ky&&r[i](e[i]);return r}function xn(e){jt.call(this,null,e)}function wn(e){return function(){return e.materialize(e.SOURCE).source}}function kn(e){jt.call(this,[+(1/0),-(1/0)],e)}function Mn(e,t){Se.call(this,e),this.parent=t}function Sn(e){jt.call(this,{},e),this._keys=J();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function En(e){Se.call(this,null,On,e)}function On(e){return this.value&&!e.modified()?this.value:Yv(e.name)?W(e.name).map(function(e){return A(e)}):A(e.name,e.as)}function An(e){jt.call(this,J(),e)}function Cn(e,t){return e?e.map(function(e,n){return t[n]||x(e)}):null}function Rn(e){jt.call(this,[],e)}function Tn(e){jt.call(this,[],e)}function zn(e){jt.call(this,null,e)}function Nn(e){jt.call(this,[],e)}function Dn(e){jt.call(this,[],e)}function Pn(e){var t,n=e.method||db.value;return null!=db[n]?n===db.value?(t=void 0!==e.value?e.value:0,function(){return t}):db[n]:void k("Unrecognized imputation method: "+n)}function Ln(e){var t=e.field;return function(e){return e?t(e):NaN}}function qn(e,t,n,r){var i,a,o,u,s,f,c,l,d=function(e){return e(l)},h=[],p=r?r.slice():[],g={},m={};for(p.forEach(function(e,t){g[e]=t+1}),u=0,c=e.length;u<c;++u)l=e[u],f=n(l),s=g[f]||(g[f]=p.push(f)),a=(i=t?t.map(d):hb)+"",(o=m[a])||(o=m[a]=[],h.push(o),o.values=i),o[s-1]=l;return h.domain=p,h}function $n(e){cn.call(this,e)}function jn(e){Se.call(this,null,Fn,e)}function Fn(e){return this.value&&!e.modified()?this.value:re(e.fields,e.flat)}function In(e){jt.call(this,{},e)}function Un(e){Se.call(this,null,Bn,e)}function Bn(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=+(1/0),a=-(1/0),o=e.extents;for(t=0,n=o.length;t<n;++t)r=o[t],r[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function Wn(e){Se.call(this,null,Gn,e)}function Gn(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function Yn(e){jt.call(this,null,e)}function Hn(e){cn.call(this,e)}function Vn(e,t){var n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",a=w(n).concat(w(r)),o=Zn(n,e.limit||0,t);return{key:e.key,groupby:e.groupby,ops:o.map(function(){return i}),fields:o.map(function(e){return Xn(e,n,r,a)}),as:o.map(function(e){return e+""}),modified:e.modified.bind(e)}}function Xn(e,t,n,r){return _(function(r){return t(r)===e?n(r):NaN},r,e+"")}function Zn(e,t,n){var r={},i=[];return n.visit(n.SOURCE,function(t){var n=e(t);r[n]||(r[n]=1,i.push(n))}),i.sort(function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)}),t?i.slice(0,t):i}function Jn(e){Sn.call(this,e)}function Qn(e){jt.call(this,null,e)}function Kn(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}function er(e){jt.call(this,null,e)}function tr(e){jt.call(this,null,e)}function nr(e){jt.call(this,[],e),this.count=0}function rr(e){jt.call(this,null,e)}function ir(e){jt.call(this,null,e),this.modified(!0)}function ar(e){jt.call(this,J(),e)}function or(e){jt.call(this,null,e)}function ur(e,t,n,r){var i=Ob[e](t,n);return{init:i.init||Zv,update:function(e,t){t[r]=i.next(e)}}}function sr(e){function t(e){W(w(e)).forEach(function(e){f[e]=1})}var n=this,r=W(e.ops),i=W(e.fields),a=W(e.params),o=W(e.as),u=n.outputs=[],s=n.windows=[],f={},c={},l=!0,d=[],h=[];t(e.sort),r.forEach(function(e,n){var r=i[n],f=x(r),p=Wt(e,f,o[n]);if(t(r),u.push(p),Ob.hasOwnProperty(e))s.push(ur(e,i[n],a[n],p));else{if(null==r&&"count"!==e&&k("Null aggregate field specified."),"count"===e)return void d.push(p);l=!1;var g=c[f];g||(g=c[f]=[],g.field=r,h.push(g)),g.push(Gt(e,p))}}),(d.length||h.length)&&(n.cell=fr(h,d,l)),n.inputs=Object.keys(f)}function fr(e,t,n){e=e.map(function(e){return Xt(e,e.field)});var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new fn;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}function cr(e){jt.call(this,{},e),this._mlen=0,this._mods=[]}function lr(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,o=n.frame||[null,0],u=e.data(r),s=u.length,f=0,c=i?a.bisector(r):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:r||H(-1)};for(t.init();f<s;++f)dr(l,o,f,s),i&&hr(l,c),t.update(l,u[f])}function dr(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function hr(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function pr(e){this.clear(),e&&this.union(e)}function gr(e,t){var n,r=[];return n={id:"gradient_"+h_++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}function mr(e){this.mark=e,this.bounds=this.bounds||new pr}function vr(e){mr.call(this,e),this.items=this.items||[]}function yr(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}function br(){return"undefined"!=typeof Image?Image:null}function _r(e,t){if(p_)try{return new p_(e,t)}catch(e){}return null}function xr(){return p_&&p_.Image||null}function wr(e,t){return yr(e,t)||_r(e,t)||null}function kr(){return br()||xr()||null}function Mr(e){this._pending=0,this._loader=e||ze()}function Sr(e){e._pending+=1}function Er(e){e._pending-=1}function Or(e,t,n){var r=v_.hasOwnProperty(e)&&v_[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function Ar(e){var t,n,r,i,a,o,u,s,f,c,l,d=[];for(t=e.slice().replace(b_[0],"###$1").split(b_[1]).slice(1),s=0,c=t.length;s<c;++s){for(n=t[s],r=n.slice(1).trim().replace(b_[2],"$1###$2").split(b_[3]),o=n.charAt(0),i=[o],f=0,l=r.length;f<l;++f)(a=+r[f])===a&&i.push(a);if(u=y_[o.toLowerCase()],i.length-1>u)for(f=1,l=i.length;f<l;f+=u)d.push([o].concat(i.slice(f,f+u)));else d.push(i)}return d}function Cr(e,t,n,r,i,a,o,u,s){var f=w_.call(arguments);if(__[f])return __[f];var c=o*(Math.PI/180),l=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);var h=d*(u-e)*.5+l*(s-t)*.5,p=d*(s-t)*.5-l*(u-e)*.5,g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);var m=d/n,v=l/n,y=-l/r,b=d/r,_=m*u+v*s,x=y*u+b*s,w=m*e+v*t,k=y*e+b*t,M=(w-_)*(w-_)+(k-x)*(k-x),S=1/M-.25;S<0&&(S=0);var E=Math.sqrt(S);a==i&&(E=-E);var O=.5*(_+w)-E*(k-x),A=.5*(x+k)+E*(w-_),C=Math.atan2(x-A,_-O),R=Math.atan2(k-A,w-O),T=R-C;T<0&&1===a?T+=2*Math.PI:T>0&&0===a&&(T-=2*Math.PI);for(var z=Math.ceil(Math.abs(T/(.5*Math.PI+.001))),N=[],D=0;D<z;++D){var P=C+D*T/z,L=C+(D+1)*T/z;N[D]=[O,A,P,L,n,r,l,d]}return __[f]=N}function Rr(e){var t=w_.call(e);if(x_[t])return x_[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],f=e[7],c=f*o,l=-s*u,d=s*o,h=f*u,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,k=n+m,M=r+v,S=k+_*v,E=M-_*m;return x_[t]=[c*x+l*w,d*x+h*w,c*S+l*E,d*S+h*E,c*k+l*M,d*k+h*M]}function Tr(e,t){var n=k_[0]=e[0];if("a"===n||"A"===n)k_[1]=t*e[1],k_[2]=t*e[2],k_[6]=t*e[6],k_[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)k_[r]=t*e[r];return k_}function zr(e,t,n,r,i){var a,o,u,s,f,c=null,l=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=Tr(a,i)),a[0]){case"l":l+=a[1],d+=a[2],e.lineTo(l+n,d+r);break;case"L":l=a[1],d=a[2],e.lineTo(l+n,d+r);break;case"h":l+=a[1],e.lineTo(l+n,d+r);break;case"H":l=a[1],e.lineTo(l+n,d+r);break;case"v":d+=a[1],e.lineTo(l+n,d+r);break;case"V":d=a[1],e.lineTo(l+n,d+r);break;case"m":l+=a[1],d+=a[2],e.moveTo(l+n,d+r);break;case"M":l=a[1],d=a[2],e.moveTo(l+n,d+r);break;case"c":o=l+a[5],u=d+a[6],h=l+a[3],p=d+a[4],e.bezierCurveTo(l+a[1]+n,d+a[2]+r,h+n,p+r,o+n,u+r),l=o,d=u;break;case"C":l=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,l+n,d+r);break;case"s":o=l+a[3],u=d+a[4],h=2*l-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,l+a[1]+n,d+a[2]+r,o+n,u+r),h=l+a[1],p=d+a[2],l=o,d=u;break;case"S":o=a[3],u=a[4],h=2*l-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,u+r),l=o,d=u,h=a[1],p=a[2];break;case"q":o=l+a[3],u=d+a[4],h=l+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),l=o,d=u,h=a[1],p=a[2];break;case"t":o=l+a[1],u=d+a[2],null===c[0].match(/[QqTt]/)?(h=l,p=d):"t"===c[0]?(h=2*l-s,p=2*d-f):"q"===c[0]&&(h=2*l-h,p=2*d-p),s=h,f=p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u,h=l+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*l-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u;break;case"a":Nr(e,l+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+d+r]),l+=a[6],d+=a[7];break;case"A":Nr(e,l+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}}function Nr(e,t,n,r){for(var i=Cr(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=Rr(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function Dr(e){return E_.hasOwnProperty(e)?E_[e]:Pr(e)}function Pr(e){if(!O_.hasOwnProperty(e)){var t=Ar(e);O_[e]={draw:function(e,n){zr(e,t,0,0,Math.sqrt(n)/2)}}}return O_[e]}function Lr(e){return e.x}function qr(e){return e.y}function $r(e){return e.width}function jr(e){return e.height}function Fr(e){return function(){return e}}function Ir(){function e(e,s,f){var c,l=null!=s?s:+t.call(this,e),d=null!=f?f:+n.call(this,e),h=+r.call(this,e),p=+i.call(this,e),g=+a.call(this,e);if(o||(o=c=u.path()),g<=0)o.rect(l,d,h,p);else{var m=l+h,v=d+p;o.moveTo(l+g,d),o.lineTo(m-g,d),o.quadraticCurveTo(m,d,m,d+g),o.lineTo(m,v-g),o.quadraticCurveTo(m,v,m-g,v),o.lineTo(l+g,v),o.quadraticCurveTo(l,v,l,v-g),o.lineTo(l,d+g),o.quadraticCurveTo(l,d,l+g,d),o.closePath()}if(c)return o=null,c+""||null}var t=Lr,n=qr,r=$r,i=jr,a=Fr(0),o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Fr(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Fr(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:Fr(+t),e):r},e.height=function(t){return arguments.length?(i="function"==typeof t?t:Fr(+t),e):i},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:Fr(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function Ur(){function e(e,t,n){var r=n/2;if(o){var i=f-t,a=e-s;if(i||a){var u=Math.sqrt(i*i+a*a),d=(i/=u)*c,h=(a/=u)*c,p=Math.atan2(a,i);l.moveTo(s-d,f-h),l.lineTo(e-i*r,t-a*r),l.arc(e,t,r,p-A_,p),l.lineTo(s+d,f+h),l.arc(s,f,c,p,p+A_)}else l.arc(e,t,r,0,2*A_);l.closePath()}else o=1;s=e,f=t,c=r}function t(t){var s,f,c,d=t.length,h=!1;for(null==l&&(l=c=u.path()),s=0;s<=d;++s)!(s<d&&a(f=t[s],s,t))===h&&(h=!h)&&(o=0),h&&e(+n(f,s,t),+r(f,s,t),+i(f,s,t));if(c)return l=null,c+""||null}var n,r,i,a,o,s,f,c,l=null;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.context=function(e){return arguments.length?(l=null==e?null:e,t):l},t}function Br(e){return e.x||0}function Wr(e){return e.y||0}function Gr(e){return e.width||0}function Yr(e){return e.size||1}function Hr(e){return e.height||0}function Vr(e){return(e.x||0)+(e.width||0)}function Xr(e){return(e.y||0)+(e.height||0)}function Zr(e){return e.startAngle||0}function Jr(e){return e.endAngle||0}function Qr(e){return e.padAngle||0}function Kr(e){return e.innerRadius||0}function ei(e){return e.outerRadius||0}function ti(e){return e.cornerRadius||0}function ni(e){return!(e.defined===!1)}function ri(e){return null==e.size?64:e.size}function ii(e){return Dr(e.shape||"circle")}function ai(e,t){return C_.context(e)(t)}function oi(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?T_:R_).curve(Or(r,n.orient,n.tension)).context(e)(t)}function ui(e,t){var n=t[0],r=n.interpolate||"linear";return z_.curve(Or(r,n.orient,n.tension)).context(e)(t)}function si(e,t,n,r){return N_.context(e)(t,n,r)}function fi(e,t){return(t.mark.shape||t.shape).context(e)(t)}function ci(e,t){return D_.context(e)(t)}function li(e,t){return P_.context(e)(t)}function di(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e}function hi(e){return m_=e,hi}function pi(){}function gi(e,t){m_.add(e,t)}function mi(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,u=n.x1+t.x2*r,s=n.y1+t.y2*i,f=t.stops,c=0,l=f.length,d=e.createLinearGradient(a,o,u,s);c<l;++c)d.addColorStop(f[c].offset,f[c].color);return d}function vi(e,t,n){return n.id?mi(e,n,t.bounds):n}function yi(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,n>0&&(e.globalAlpha=n,e.fillStyle=vi(e,t,t.fill),!0)}function bi(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity,n>0&&(e.globalAlpha=n,e.strokeStyle=vi(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||I_),e.lineDashOffset=t.strokeDashOffset||0),!0))}function _i(e,t){return e.zindex-t.zindex||e.index-t.index}function xi(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)t=i[n],t.index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(_i)}function wi(e,t){var n,r,i=e.items;if(i&&i.length){var a=xi(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function ki(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=xi(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(i=e.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function Mi(e){return function(t,n,r){wi(n,function(n){r&&!r.intersects(n.bounds)||Ei(e,t,n,n)})}}function Si(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||Ei(e,t,n.items[0],n.items)}}function Ei(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&yi(t,n,i)&&t.fill(),n.stroke&&bi(t,n,i)&&t.stroke()))}function Oi(e){return e||(e=U_),function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,ki(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return e(t,n,r,i,a,o)?n:void 0})}}function Ai(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==t?s.fill:t,c=s.stroke&&n.isPointInStroke;return c&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(f&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function Ci(e){return Oi(Ai(e))}function Ri(e,t){return"translate("+e+","+t+")"}function Ti(e){return Ri(e.x||0,e.y||0)}function zi(e,t){function n(e,n){e("transform",Ti(n)),e("d",t(null,n))}function r(e,n){return t(hi(e),n),di(e,n).translate(n.x||0,n.y||0)}function i(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:n,bound:r,draw:Mi(i),pick:Ci(i)}}function Ni(e,t){var n="horizontal"===e[0].orient?t[1]:t[0],r="horizontal"===e[0].orient?"y":"x",i=0,a=e.length;if(1===a)return e[0];for(;i<a;){var o=i+a>>>1;e[o][r]<n?i=o+1:a=o}return i=Math.max(0,i-1),a=Math.min(e.length-1,a),n-e[i][r]<e[a][r]-n?e[i]:e[a]}function Di(e,t){for(var n,r,i,a=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(e[o].defined!==!1&&(n=e[o].x-t[0],r=e[o].y-t[1],i=n*n+r*r,i<a))return e[o];return null}function Pi(e,t){for(var n,r,i,a=e.length;--a>=0;)if(e[a].defined!==!1&&(n=e[a].x-t[0],r=e[a].y-t[1],i=n*n+r*r,n=e[a].size||1,i<n*n))return e[a];return null}function Li(e,t,n){function r(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))}function i(e,n){var r=n.items;return 0===r.length?e:(t(hi(e),r),di(e,r[0]))}function a(e,n){e.beginPath(),t(e,n)}function o(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,u(e,o,n,r)?o[0]:null)}var u=Ai(a);return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Si(a),pick:o,tip:n}}function qi(){G_=1}function $i(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+G_++),o=i.clipping[a]||(i.clipping[a]={id:a});return G(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function ji(e,t){e("transform",Ti(t))}function Fi(e,t){var n=t.stroke?Y_:0;e("class","background"),e("d",si(null,t,n,n))}function Ii(e,t,n){var r=t.clip?$i(n,t,t):null;e("clip-path",r)}function Ui(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&di(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)}function Bi(e,t){var n=t.stroke?Y_:0;e.beginPath(),si(e,t,n,n)}function Wi(e,t,n){var r=this;wi(t,function(t){var i,a=t.x||0,o=t.y||0,u=t.width||0,s=t.height||0;
e.save(),e.translate(a,o),(t.stroke||t.fill)&&(i=null==t.opacity?1:t.opacity,i>0&&(Bi(e,t),t.fill&&yi(e,t,i)&&e.fill(),t.stroke&&bi(e,t,i)&&e.stroke())),t.clip&&(e.beginPath(),e.rect(0,0,u,s),e.clip()),n&&n.translate(-a,-o),wi(t,function(t){r.draw(e,t,n)}),n&&n.translate(a,o),e.restore()})}function Gi(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return ki(t,function(f){var c,l,d,h;if(h=f.bounds,!h||h.contains(i,a))return l=f.x||0,d=f.y||0,e.save(),e.translate(l,d),l=i-l,d=a-d,c=ki(f,function(e){return Yi(e,l,d)?o.pick(e,n,r,l,d):null}),!c&&t.interactive!==!1&&(f.fill||f.stroke)&&H_(e,f,u,s)&&(c=f),e.restore(),c||null})}function Yi(e,t,n){return(e.interactive!==!1||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}function Hi(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function Vi(e,t){return"center"===e?t/2:"right"===e?t:0}function Xi(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function Zi(e,t,n){var r=Hi(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,u=(null!=t.height?t.height:r.height)||0,s=t.aspect===!1?"none":"xMidYMid";i-=Vi(t.align,o),a-=Xi(t.baseline,u),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",Ri(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)}function Ji(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=Vi(t.align,a),i-=Xi(t.baseline,o),e.set(r,i,r+a,i+o)}function Qi(e,t,n){var r=this;wi(t,function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=Hi(t,r),f=t.x||0,c=t.y||0,l=(null!=t.width?t.width:s.width)||0,d=(null!=t.height?t.height:s.height)||0;f-=Vi(t.align,l),c-=Xi(t.baseline,d),t.aspect!==!1&&(a=s.width/s.height,o=t.width/t.height,a===a&&o===o&&a!==o&&(o<a?(u=l/a,c+=(d-u)/2,d=u):(u=d*a,f+=(l-u)/2,l=u))),s.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(s,f,c,l,d))}})}function Ki(e,t){e("transform",Ti(t)),e("d",t.path)}function ea(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=Ar(n)).path=n),zr(e,r,t.x,t.y)}function ta(e,t){return ea(hi(e),t)?e.set(0,0,0,0):di(e,t)}function na(e,t){e("d",si(null,t))}function ra(e,t){var n,r;return di(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function ia(e,t){e.beginPath(),si(e,t)}function aa(e,t){e("transform",Ti(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)}function oa(e,t){var n,r;return di(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)}function ua(e,t,n){var r,i,a,o;return!(!t.stroke||!bi(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}function sa(e,t,n){wi(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&ua(e,t,r)&&e.stroke()}})}function fa(e,t,n,r){return!!e.isPointInStroke&&(ua(e,t,1)&&e.isPointInStroke(n,r))}function ca(e){return F_=pa(e),la(ma(e))}function la(e){return~~(.8*e.length*F_)}function da(e){return j_.font=ya(e),ha(ma(e))}function ha(e){return j_.measureText(e).width}function pa(e){return null!=e.fontSize?e.fontSize:11}function ga(e){j_=e&&(j_=wr(1,1))?j_.getContext("2d"):null,nx.width=j_?da:ca}function ma(e){var t=e.text;return null==t?"":e.limit>0?va(e):t+""}function va(e){var t,n=+e.limit,r=e.text+"";if(j_?(j_.font=ya(e),t=ha):(F_=pa(e),t=la),t(r)<n)return r;var i,a=e.ellipsis||"",o="rtl"===e.dir,u=0,s=r.length;if(n-=t(a),o){for(;u<s;)i=u+s>>>1,t(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),t(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}function ya(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+pa(e)+"px "+(n||"sans-serif")}function ba(e){var t=e.baseline,n=pa(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}function _a(e,t){var n,r=t.dx||0,i=(t.dy||0)+ba(t),a=t.x||0,o=t.y||0,u=t.angle||0,s=t.radius||0;s&&(n=(t.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),e("text-anchor",rx[t.align]||"start"),u?(n=Ri(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+Ri(r,i))):n=Ri(a+r,o+i),e("transform",n)}function xa(e,t,n){var r,i,a=nx.height(t),o=t.align,u=t.radius||0,s=t.x||0,f=t.y||0,c=t.dx||0,l=(t.dy||0)+ba(t)-Math.round(.8*a);return u&&(i=(t.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=nx.width(t),"center"===o?c-=r/2:"right"===o&&(c-=r),e.set(c+=s,l+=f,c+r,l+a),t.angle&&!n&&e.rotate(t.angle*Math.PI/180,s,f),e.expand(n||!r?0:1)}function wa(e,t,n){wi(t,function(t){var r,i,a,o,u,s;n&&!n.intersects(t.bounds)||(s=ma(t))&&(r=null==t.opacity?1:t.opacity,0!==r&&(e.font=ya(t),e.textAlign=t.align||"left",i=t.x||0,a=t.y||0,(o=t.radius)&&(u=(t.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Math.PI/180),i=a=0),i+=t.dx||0,a+=(t.dy||0)+ba(t),t.fill&&yi(e,t,r)&&e.fillText(s,i,a),t.stroke&&bi(e,t,r)&&e.strokeText(s,i,a),t.angle&&e.restore()))})}function ka(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=xa(ix,t,!0),u=-t.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),c=t.x,l=t.y,d=s*i-f*a+(c-c*s+l*f),h=f*i+s*a+(l-c*f-l*s);return o.contains(d,h)}function Ma(e,t,n){var r=ux[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new pr),e,n)}function Sa(e,t,n){var r,i,a,o,u=ux[e.marktype],s=u.bound,f=e.items,c=f&&f.length;if(u.nested)return c?a=f[0]:(sx.mark=e,a=sx),o=Ma(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new pr,c)for(r=0,i=f.length;r<i;++r)t.union(Ma(f[r],s,n));return e.bounds=t}function Ea(e,t){return JSON.stringify(e,fx,t)}function Oa(e){var t="string"==typeof e?JSON.parse(e):e;return Aa(t)}function Aa(e){var t,n,r,i=e.marktype,a=e.items;if(a)for(n=0,r=a.length;n<r;++n)t=i?"mark":"group",a[n][t]=e,a[n].zindex&&(a[n][t].zdirty=!0),"group"===(i||t)&&Aa(a[n]);return i&&Sa(e),e}function Ca(e){arguments.length?this.root=Oa(e):(this.root=Ra({marktype:"group",name:"root",role:"frame"}),this.root.items=[new vr(this.root)])}function Ra(e,t){return{bounds:new pr,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function Ta(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function za(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Na(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=Ta(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function Da(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Pa(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function La(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function qa(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=ux[o.marktype]).tip){for(a=La(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}function $a(e,t){this._active=null,this._handlers={},this._loader=e||ze(),this._tooltip=t||ja}function ja(e,t,n,r){e.element().setAttribute("title",r||"")}function Fa(e){this._el=null,this._bgcolor=null,this._loader=new Mr(e)}function Ia(e,t){$a.call(this,e,t),this._down=null,this._touch=null,this._first=!0}function Ua(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function Ba(e){return function(t){this.fire(e,t),this._active=null}}function Wa(e,t){var n=t.clip;if(e.save(),e.beginPath(),G(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}function Ga(){return"undefined"!=typeof window?window.devicePixelRatio||1:1}function Ya(e,t,n,r,i){var a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,o=e.getContext("2d"),u=a?yx:i;return e.width=t*u,e.height=n*u,a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=u,o.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function Ha(e){Fa.call(this,e),this._redraw=!1,this._dirty=new pr}function Va(e,t,n){return t.expand(1).round(),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}function Xa(e,t){if(null==t)return e;for(var n=xx.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}function Za(e,t){$a.call(this,e,t);var n=this;n._hrefHandler=Ja(n,function(e,t){t&&t.href&&n.handleHref(e,t,t.href)}),n._tooltipHandler=Ja(n,function(e,t){n.handleTooltip(e,t,e.type!==gx)})}function Ja(e,t){return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,t.call(e._obj,n,i)}}function Qa(e,t,n){var r,i,a="<"+e;if(t)for(r in t)i=t[r],null!=i&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function Ka(e){return"</"+e+">"}function eo(e){Fa.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function to(e,t,n){var r,i,a;for(e=Na(e,n,"linearGradient",Ex),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)a=Na(e,r,"stop",Ex),a.setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);Da(e,r)}function no(e,t,n){var r;e=Na(e,n,"clipPath",Ex),e.setAttribute("id",t.id),t.path?(r=Na(e,0,"path",Ex),r.setAttribute("d",t.path)):(r=Na(e,0,"rect",Ex),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function ro(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function io(e,t,n){t=t.lastChild;var r,i=0;wi(n,function(n){r=e.draw(t,n,r),++i}),Da(t,1+i)}function ao(e,t,n,r,i){var a,o=e._svg;if(!o&&(a=t.ownerDocument,o=Ta(a,r,Ex),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=Ta(a,"path",Ex);u.setAttribute("class","background"),o.appendChild(u),u.__data__=e;var s=Ta(a,"g",Ex);o.appendChild(s),s.__data__=e}return(o.ownerSVGElement!==i||oo(e)&&o.previousSibling!==n)&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function oo(e){var t=e.mark||e.group;return t&&t.items.length>1}function uo(e,t,n){t!==Rx[e]&&(null!=t?n?Cx.setAttributeNS(n,e,t):Cx.setAttribute(e,t):n?Cx.removeAttributeNS(n,e):Cx.removeAttribute(e),Rx[e]=t)}function so(){var e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function fo(e){Fa.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function co(e,t,n,r){Dx[r||e]=t}function lo(e,t,n,r){if(null==e)return"";var i,a,o,u,s,f="";for("bgrect"===n&&t.interactive===!1&&(f+="pointer-events: none; "),"text"===n&&(f+="font: "+ya(e)+"; "),i=0,a=Sx.length;i<a;++i)o=Sx[i],u=Mx[o],s=e[o],null==s?"fill"===u&&(f+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(r.gradient[s.id]=s,s="url(#"+s.id+")"),f+=u+": "+s+"; "):f+=u+": none; ";return f?'style="'+f.trim()+'"':null}function ho(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function po(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Fx[e]=t,this):Fx[e]}function go(e){var t=e.clip;if(G(t))t(hi(Ix.clear()));else{if(!t)return;Ix.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(Ix)}function mo(e,t,n){return e===t||("path"===n?vo(e,t):e instanceof Date&&t instanceof Date?+e===+t:te(e)&&te(t)?Math.abs(e-t)<=Ux:e&&t&&(S(e)||S(t))?null!=e&&null!=t&&yo(e,t):e==t)}function vo(e,t){return mo(Ar(e),Ar(t))}function yo(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!mo(e[n],t[n],n))return!1;return typeof e==typeof t}function bo(e){jt.call(this,null,e)}function _o(e,t,n){return t(e.bounds.clear(),e,n)}function xo(e){jt.call(this,0,e)}function wo(e){var t=e._signals[Wx];return t||(e._signals[Wx]=t=e.add(0)),t}function ko(e){jt.call(this,null,e)}function Mo(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function So(e){jt.call(this,null,e)}function Eo(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function Oo(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(Eo(i,t=e[n].bounds))return!0}function Ao(e){var t=e.bounds;return t.width()>1&&t.height()>1}function Co(e,t,n){var r=e.range(),i=new pr;return t===zb||t===Pb?i.set(r[0],-(1/0),r[1],+(1/0)):i.set(-(1/0),r[0],+(1/0),r[1]),i.expand(n||1),function(e){return i.encloses(e.bounds)}}function Ro(e){jt.call(this,null,e)}function To(e){for(var t,n,r=e.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(t=r[a],n=t.items,t.marktype===Ub)switch(t.role){case Bb:case Hb:break;case Vb:zo(n,o.rowheaders);break;case Xb:zo(n,o.rowfooters);break;case Jb:zo(n,o.colheaders);break;case Qb:zo(n,o.colfooters);break;case Zb:o.rowtitle=n[0];break;case Kb:o.coltitle=n[0];break;default:zo(n,o.marks)}return o}function zo(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function No(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function Do(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Po(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function Lo(e,t){return e.bounds[t]}function qo(e,t,n){var r=S(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function $o(e){return e<0?Math.ceil(-e):0}function jo(e,t,n){function r(e,t){return Math.floor(Math.min(e,t))}function i(e,t){return Math.ceil(Math.max(e,t))}var a,o,u,s,f,c,l,d,h,p,g,m,v=To(t,n),y=v.marks,b=n.bounds===f_,_=b?No:Do,x=new pr(0,0,0,0),w=qo(n.align,c_),k=qo(n.align,l_),M=qo(n.padding,c_),S=qo(n.padding,l_),E=n.offset,O=t.columns||n.columns||y.length,A=O<0?1:Math.ceil(y.length/O),C=A*O,R=[],T=[],z=0,N=0,D=[],P=[],L=0,q=0,$=y.length;for(o=0;o<O;++o)T[o]=0;for(o=0;o<A;++o)P[o]=0;for(o=0;o<$;++o)f=_(y[o]),u=o%O,s=~~(o/O),l=Math.ceil(_(y[o]).x2),d=Math.ceil(_(y[o]).y2),z=Math.max(z,l),L=Math.max(L,d),T[u]=Math.max(T[u],l),P[s]=Math.max(P[s],d),R.push(M+$o(f.x1)),D.push(S+$o(f.y1)),e.dirty(y[o]);for(o=0;o<$;++o)o%O===0&&(R[o]=N),o<O&&(D[o]=q);if(w===s_)for(u=1;u<O;++u){for(m=0,o=u;o<$;o+=O)m<R[o]&&(m=R[o]);for(o=u;o<$;o+=O)R[o]=m+T[u-1]}else if(w===u_){for(m=0,o=0;o<$;++o)o%O&&m<R[o]&&(m=R[o]);for(o=0;o<$;++o)o%O&&(R[o]=m+z)}else for(w=!1,u=1;u<O;++u)for(o=u;o<$;o+=O)R[o]+=T[u-1];if(k===s_)for(s=1;s<A;++s){for(m=0,o=s*O,a=o+O;o<a;++o)m<D[o]&&(m=D[o]);for(o=s*O;o<a;++o)D[o]=m+P[s-1]}else if(k===u_){for(m=0,o=O;o<$;++o)m<D[o]&&(m=D[o]);for(o=O;o<$;++o)D[o]=m+L}else for(k=!1,s=1;s<A;++s)for(o=s*O,a=o+O;o<a;++o)D[o]+=P[s-1];for(h=0,o=0;o<$;++o)c=y[o],l=c.x||0,c.x=h=R[o]+(o%O?h:0),c.bounds.translate(h-l,0);for(u=0;u<O;++u)for(p=0,o=u;o<$;o+=O)c=y[o],d=c.y||0,c.y=p+=D[o],c.bounds.translate(0,p-d);if(qo(n.center,c_)&&A>1&&w)for(o=0;o<$;++o)c=y[o],f=w===u_?z:T[o%O],h=f-_(c).x2,h>0&&(c.x+=l=h/2,c.bounds.translate(l,0));if(qo(n.center,l_)&&1!==O&&k)for(o=0;o<$;++o)c=y[o],f=k===u_?L:P[~~(o/O)],p=f-_(c).y2,p>0&&(c.y+=d=p/2,c.bounds.translate(0,d));for(o=0;o<$;++o)y[o].mark.bounds.clear();for(o=0;o<$;++o)c=y[o],e.dirty(c),x.union(c.mark.bounds.union(c.bounds));_=b?Po:Lo,g=qo(n.headerBand,l_,null),h=Fo(e,v.rowheaders,y,O,A,-qo(E,"rowHeader"),r,0,_,"x1",0,O,1,g),g=qo(n.headerBand,c_,null),p=Fo(e,v.colheaders,y,O,O,-qo(E,"columnHeader"),r,1,_,"y1",0,1,O,g),g=qo(n.footerBand,l_,null),Fo(e,v.rowfooters,y,O,A,qo(E,"rowFooter"),i,0,_,"x2",O-1,O,1,g),g=qo(n.footerBand,c_,null),Fo(e,v.colfooters,y,O,O,qo(E,"columnFooter"),i,1,_,"y2",C-O,1,O,g),v.rowtitle&&(m=h-qo(E,"rowTitle"),g=qo(n.titleBand,l_,.5),Io(e,v.rowtitle,m,0,x,g)),v.coltitle&&(m=p-qo(E,"columnTitle"),g=qo(n.titleBand,c_,.5),Io(e,v.coltitle,m,1,x,g))}function Fo(e,t,n,r,i,a,o,u,s,f,c,l,d,h){var p,g,m,v,y,b,_,x,w,k=n.length,M=0,S=0;if(!k)return M;for(p=c;p<k;p+=l)n[p]&&(M=o(M,s(n[p],f)));if(!t.length)return M;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),M+=a,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=c,g=0,v=t.length;g<v;++g,p+=l){for(b=t[g],y=b.mark.bounds,m=p;m>=0&&null==(_=n[m]);m-=d);u?(x=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),w=M):(x=M,w=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,e.dirty(b),S=o(S,y[f])}return S}function Io(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function Uo(e){jt.call(this,null,e)}function Bo(e,t,n){var r,i,a,o,u,s,f=t.items,c=Math.max(0,t.width||0),l=Math.max(0,t.height||0),d=(new pr).set(0,0,c,l),h=d.clone(),p=d.clone(),g=[];for(u=0,s=f.length;u<s;++u)switch(i=f[u],i.role){case Bb:o=Go(i)?h:p,o.union(Ho(e,i,c,l));break;case Wb:r=i;break;case Hb:g.push(i);break;case Gb:case Yb:case Vb:case Xb:case Zb:case Jb:case Qb:case Kb:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}if(g.length)for(a={leftWidth:Zo(e,g),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},u=0,s=g.length;u<s;++u)if(o=Qo(e,g[u],a,h,p,c,l),n.autosize&&n.autosize.type===n_){var m=g[u].items[0].datum.orient;m===Nb||m===Db?d.add(o.x1,0).add(o.x2,0):m!==zb&&m!==Pb||d.add(0,o.y1).add(0,o.y2)}else d.union(o);d.union(h).union(p),r&&d.union(Xo(e,r,c,l,d)),eu(e,t,d,n)}function Wo(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Go(e){var t=e.items[0].datum.orient;return t===Nb||t===Db}function Yo(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Ho(e,t,n,r){var i,a,o=t.items[0],u=o.datum,s=u.orient,f=Yo(u),c=o.range,l=o.offset,d=o.position,h=o.minExtent,p=o.maxExtent,g=u.title&&o.items[f[2]].items[0],m=o.titlePadding,v=o.bounds,y=0,b=0;switch(Jx.clear().union(v),v.clear(),(i=f[0])>-1&&v.union(o.items[i].bounds),(i=f[1])>-1&&v.union(o.items[i].bounds),s){case zb:y=d||0,b=-l,a=Math.max(h,Math.min(p,-v.y1)),g&&(a=Vo(g,a,m,0,-1,v)),v.add(0,-a).add(c,0);break;case Nb:y=-l,b=d||0,a=Math.max(h,Math.min(p,-v.x1)),g&&(a=Vo(g,a,m,1,-1,v)),v.add(-a,0).add(0,c);break;case Db:y=n+l,b=d||0,a=Math.max(h,Math.min(p,v.x2)),g&&(a=Vo(g,a,m,1,1,v)),v.add(0,0).add(a,c);break;case Pb:y=d||0,b=r+l,a=Math.max(h,Math.min(p,v.y2)),g&&(a=Vo(g,a,m,0,1,v)),v.add(0,0).add(c,a);break;default:y=o.x,b=o.y}return di(v.translate(y,b),o),Wo(o,"x",y+Zx)|Wo(o,"y",b+Zx)&&(o.bounds=Jx,e.dirty(o),o.bounds=v,e.dirty(o)),o.mark.bounds.clear().union(v)}function Vo(e,t,n,r,i,a){var o=e.bounds,u=0,s=0;return e.auto?(t+=n,r?u=(e.x||0)-(e.x=i*t):s=(e.y||0)-(e.y=i*t),o.translate(-u,-s),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}function Xo(e,t,n,r,i){var a,o=t.items[0],u=o.orient,s=o.frame,f=o.anchor,c=o.offset,l=o.bounds,d=u===Nb||u===Db,h=0,p=d?r:n,g=0,m=0;switch(s!==Ub?u===Nb?(h=i.y2,p=i.y1):u===Db?(h=i.y1,p=i.y2):(h=i.x1,p=i.x2):u===Nb&&(h=r,p=0),a=f===Fb?h:f===Ib?p:(h+p)/2,Jx.clear().union(l),u){case zb:g=a,m=i.y1-c;break;case Nb:g=i.x1-c,m=a;break;case Db:g=i.x2+c,m=a;break;case Pb:g=a,m=i.y2+c;break;default:g=o.x,m=o.y}return l.translate(g-o.x,m-o.y),Wo(o,"x",g)|Wo(o,"y",m)&&(o.bounds=Jx,e.dirty(o),o.bounds=l,e.dirty(o)),t.bounds.clear().union(l)}function Zo(e,t){return t.reduce(function(t,n){var r=n.items[0];if(Jo(e,r,r.items[0].items[0]),r.datum.orient===Nb){var i=Jx.clear();r.items.forEach(function(e){i.union(e.bounds)}),t=Math.max(t,Math.round(i.width())+2*r.padding-1)}return t},0)}function Jo(e,t,n){var r=t.padding-n.x,i=t.padding-n.y;if(t.datum.title){var a=t.items[1].items[0];i+=t.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),e.dirty(n))}function Qo(e,t,n,r,i,a,o){var u,s,f,c=t.items[0],l=c.datum,d=l.orient,h=c.offset,p=c.bounds,g=0,m=0;switch(d===zb||d===Pb?(f=i,g=n[d]):d!==Nb&&d!==Db||(f=r,m=n[d]),Jx.clear().union(p),p.clear(),c.items.forEach(function(e){p.union(e.bounds)}),u=Math.round(p.width())+2*c.padding-1,s=Math.round(p.height())+2*c.padding-1,l.type===t_&&Ko(c.items[0].items[0].items[0].items),d){case Nb:g-=n.leftWidth+h-Math.floor(f.x1),n.left+=s+n.margin;break;case Db:g+=h+Math.ceil(f.x2),n.right+=s+n.margin;break;case zb:m-=s+h-Math.floor(f.y1),n.top+=u+n.margin;break;case Pb:m+=h+Math.ceil(f.y2),n.bottom+=u+n.margin;break;case Lb:g+=h,m+=h;break;case qb:g+=a-u-h,m+=h;break;case $b:g+=h,m+=o-s-h;break;case jb:g+=a-u-h,m+=o-s-h;break;default:g=c.x,m=c.y}return di(p.set(g,m,g+u,m+s),c),Wo(c,"x",g)|Wo(c,"width",u)|Wo(c,"y",m)|Wo(c,"height",s)&&(c.bounds=Jx,e.dirty(c),c.bounds=p,e.dirty(c)),c.mark.bounds.clear().union(p)}function Ko(e){var t=e.reduce(function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e},{});e.forEach(function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y})}function eu(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,u=e._height,s=e.padding();if(!(e._autosize<1)&&a){var f=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,Math.ceil(n.x2-f)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===e_&&(o-=s.left+s.right,u-=s.top+s.bottom),a===o_?(c=0,h=0,f=o,d=u):a===n_?(f=Math.max(0,o-c-l),d=Math.max(0,u-h-p)):a===r_?(f=Math.max(0,o-c-l),u=d+h+p):a===i_?(o=f+c+l,d=Math.max(0,u-h-p)):a===a_&&(o=f+c+l,u=d+h+p),e._resizeView(o,u,f,d,[c,h],i.resize)}}function tu(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function nu(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function ru(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function iu(){function e(){var e=i().length,r=u[1]<u[0],s=u[r-0],h=u[1-r],p=ru(e,c,l);t=(h-s)/(p||1),f&&(t=Math.floor(t)),s+=(h-s-t*(e-c))*d,n=t*(1-c),f&&(s=Math.round(s),n=Math.round(n));var g=a.range(e).map(function(e){return s+t*e});return o(r?g.reverse():g)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,c=0,l=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c=l,e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],c=+e[1],l=u[1]<u[0],d=l?o().reverse():o(),h=d.length-1;if(f===f&&c===c&&(c<f&&(s=f,f=c,c=s),!(c<d[0]||f>u[1-l])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===c?t:a.bisectRight(d,c)-1,f-d[t]>n+1e-10&&++t,l&&(s=t,t=h-r,r=h-s),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return iu().domain(i()).range(u).round(f).paddingInner(c).paddingOuter(l).align(d)},e()}function au(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return au(t())},e}function ou(){return au(iu().paddingInner(1))}function uu(e){return gw.call(e,function(e){return+e})}function su(){function e(e){return n(e)}function t(e){r=uu(e),n.domain([r[0],T(r)])}var n=s.scaleLinear(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return su().domain(e.domain()).range(e.range())},e}function fu(){function e(e){return null==e||e!==e?void 0:n[(a.bisect(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=uu(n),e):t.slice()},e.range=function(t){return arguments.length?(n=mw.call(t),e):n.slice()},e.copy=function(){return fu().domain(e.domain()).range(e.range())},e}function cu(e){function t(){var e=r.domain();i=e[0],a=T(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=s.scaleLinear(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return cu().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function lu(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?tu(n):n.invertExtent?nu(n):void 0),n.type=e,n}}function du(e,t){return arguments.length>1?(vw[e]=lu(e,t),this):vw.hasOwnProperty(e)?vw[e]:void 0}function hu(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function pu(e,t){Ew[e]=f["interpolate"+t],Sw[e]=f["scheme"+t]}function gu(e,t){if(arguments.length>1)return Ew[e]=t,this;var n=e.split("-");return e=n[0],n=+n[1]+1,n&&Sw.hasOwnProperty(e)?Sw[e][n-1]:!n&&Ew.hasOwnProperty(e)?Ew[e]:void 0}function mu(e,t){var n=t[0],r=T(t)-n;return function(t){return e(n+t*r)}}function vu(e,t,n){var r=n-t;return r?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(yu):H(0)}function yu(e,t){var n=t-e;return function(t){return e+t*n}}function bu(e,t){var n=c[_u(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function _u(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function xu(e){return Ow.hasOwnProperty(e)&&Ow[e]}function wu(e){return Aw.hasOwnProperty(e)&&Aw[e]}function ku(e,t){var n;return S(t)&&(n=t.step,t=t.interval),E(t)&&(t="time"===e.type?xu(t):"utc"===e.type?wu(t):k("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function Mu(e,t,n){var r=e.range(),i=r[0],a=T(r);if(i>a&&(r=a,a=i,i=r),t=t.filter(function(t){return t=e(t),!(t<i||t>a)}),n>0&&t.length>1){for(var o=[t[0],T(t)];t.length>n&&t.length>=3;)t=t.filter(function(e,t){return!(t%2)});t.length<3&&(t=o)}return t}function Su(e,t){return e.ticks?e.ticks(t):e.domain()}function Eu(e,t,n){var r=e.tickFormat?e.tickFormat(t,n):n?d.format(n):String;return e.type===ew?Ou(r,Au(n)):r}function Ou(e,t){return function(n){return e(n)?t(n):""}}function Au(e){var t=d.formatSpecifier(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return Cu(d.format(t),d.format(".1f")(1)[1])}return d.format(t)}function Cu(e,t){return function(n){var r,i,a=e(n),o=a.indexOf(t);if(o<0)return a;for(r=Ru(a,o),i=r<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}function Ru(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}function Tu(e){jt.call(this,null,e)}function zu(e){jt.call(this,null,e)}function Nu(){return ye({})}function Du(e){return e.exit}function Pu(e){jt.call(this,null,e)}function Lu(e,t){var n=Pw[e.type];return n?n(e):Su(e,t)}function qu(e){var t=e.domain(),n=t[0],r=T(t),i=e.range().length,a=new Array(i),o=0;for(a[0]=-(1/0);++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=+(1/0),a}function $u(e){var t=[-(1/0)].concat(e.quantiles());return t.max=+(1/0),t}function ju(e){var t=[-(1/0)].concat(e.domain());return t.max=+(1/0),t}function Fu(e){var t=e.domain();return t.max=t.pop(),t}function Iu(e,t,n){return n===zw&&Pw[e.type]?Uu(t):n===Nw?Bu(t):Wu(t)}function Uu(e){return function(t,n,r){var i=r[n+1]||r.max||+(1/0),a=Gu(t,e),o=Gu(i,e);return a&&o?a+""+o:o?"< "+o:" "+a}}function Bu(e){return function(t,n){return n?e(t):null}}function Wu(e){return function(t){return e(t)}}function Gu(e,t){return isFinite(e)?t(e):null}function Yu(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+T(t),a=i-r;if(e.type===lw){var o=n?a/n:.1;r-=o,i+=o,a=i-r}return function(e){return(e-r)/a}}function Hu(e){jt.call(this,[],e)}function Vu(e){return e.source.x}function Xu(e){return e.source.y}function Zu(e){return e.target.x}function Ju(e){return e.target.y}function Qu(e){jt.call(this,{},e)}function Ku(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function es(e,t,n,r){return Ku(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function ts(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2,u=180*Math.atan2(a,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+u+" 0 1 "+n+","+r}function ns(e,t,n,r){return ts(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function rs(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function is(e,t,n,r){return rs(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))}function as(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n}function os(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r}function us(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u}function ss(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r}function fs(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r}function cs(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*i+","+t*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}function ls(e){jt.call(this,null,e)}function ds(e){jt.call(this,null,e),this.modified(!0)}function hs(e,t,n){var r=ps(e,t.domainRaw);if(r>-1)return r;var i,a,o=t.domain,u=e.type,s=t.zero||void 0===t.zero&&Iw[u];return o?(Uw[u]&&t.padding&&o[0]!==T(o)&&(o=gs(u,o,t.range,t.padding,t.exponent)),(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[i]=t.domainMax),null!=t.domainMid&&(a=t.domainMid,(a<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a))),e.domain(o),u===sw&&e.unknown(void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&ku(e,t.nice)||null),o.length):0}function ps(e,t){return t?(e.domain(t),t.length):-1}function gs(e,t,n,r,i){var a=Math.abs(T(n)-n[0]),o=a/(a-2*r),u=e===ew?U(t,null,o):e===rw?B(t,null,o,.5):e===tw?B(t,null,o,i):I(t,null,o);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function ms(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=vs(e.type,t,n);else if(t.scheme){if(i=ys(e.type,t,n),G(i))return e.interpolator(i)}else if(i&&e.type===pw)return e.interpolator(c.interpolateRgbBasis(_s(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate(bu(t.interpolate,t.interpolateGamma)):G(e.round)?e.round(r):G(e.rangeRound)&&e.interpolate(r?c.interpolateRound:c.interpolate),i&&e.range(_s(i,t.reverse))}function vs(e,t,n){e!==iw&&e!==ow&&k("Only band and point scales support rangeStep.");
var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===ow?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ru(n,i,r)]}function ys(e,t,n){var r,i=t.scheme.toLowerCase(),a=gu(i),o=t.schemeExtent;return a||k("Unrecognized scheme name: "+t.scheme),n=e===lw?n+1:e===hw?n-1:e===fw||e===cw?+t.schemeCount||Fw:n,e===pw?bs(a,o,t.reverse):!o&&(r=gu(i+"-"+n))?r:G(a)?xs(bs(a,o),n):e===sw?a:a.slice(0,n)}function bs(e,t,n){return G(e)&&(t||n)?mu(e,_s(t||[0,1],n)):e}function _s(e,t){return t?e.slice().reverse():e}function xs(e,t){for(var n=new Array(t),r=t+2,i=0;i<t;)n[i]=e(++i/r);return n}function ws(e){jt.call(this,null,e)}function ks(e){jt.call(this,null,e)}function Ms(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)a=e[s],a[r]=o,a[i]=o+=Math.abs(n(a))}function Ss(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,f=0,c=0;f<s;++f)a=e[f],a[r]=u,a[i]=u=o*(c+=Math.abs(n(a)))}function Es(e,t,n,r,i){for(var a,o,u=0,s=0,f=e.length,c=0;c<f;++c)o=e[c],a=n(o),a<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function Os(e,t,n,r){var i,a,o,u,s,f,c,l,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],f=t.map(p),c=i[f],c||(i[f]=c=[],h.push(c)),c.push(s);for(f=0,d=0,u=h.length;f<u;++f){for(c=h[f],a=0,l=0,o=c.length;a<o;++a)l+=Math.abs(r(c[a]));c.sum=l,l>d&&(d=l),n&&c.sort(n)}return h.max=d,h}function As(e,t){return e-t}function Cs(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Rs(e){return function(){return e}}function Ts(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=zs(e,t[r]))return n;return 0}function zs(e,t){for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,u=o-1;a<o;u=a++){var s=e[a],f=s[0],c=s[1],l=e[u],d=l[0],h=l[1];if(Ns(s,l,t))return 0;c>r!=h>r&&n<(d-f)*(r-c)/(h-c)+f&&(i=-i)}return i}function Ns(e,t,n){var r;return Ds(e,t,n)&&Ps(e[r=+(e[0]===t[0])],n[r],t[r])}function Ds(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Ps(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Ls(){}function qs(){function e(e){var n=s(e);if(Array.isArray(n))n=n.slice().sort(As);else{var r=a.extent(e),i=r[0],o=r[1];n=a.tickStep(i,o,n),n=a.range(Math.floor(i/n)*n,Math.floor(o/n)*n,n)}return n.map(function(n){return t(e,n)})}function t(e,t){var r=[],i=[];return n(e,t,function(n){f(n,e,t),Cs(n)>0?r.push([n]):i.push(n)}),i.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(Ts((t=r[n])[0],e)!==-1)return void t.push(e)}),{type:"MultiPolygon",value:t,coordinates:r}}function n(e,t,n){function i(e){var t,i,o=[e[0][0]+a,e[0][1]+s],u=[e[1][0]+a,e[1][1]+s],f=r(o),c=r(u);(t=p[f])?(i=h[c])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(u),n(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(u),p[t.end=c]=t):(t=h[c])?(i=p[f])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(u),n(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(o),h[t.start=f]=t):h[f]=p[c]={start:f,end:c,ring:[o,u]}}var a,s,f,c,l,d,h=new Array,p=new Array;for(a=s=-1,c=e[0]>=t,Jw[c<<1].forEach(i);++a<o-1;)f=c,c=e[a+1]>=t,Jw[f|c<<1].forEach(i);for(Jw[c<<0].forEach(i);++s<u-1;){for(a=-1,c=e[s*o+o]>=t,l=e[s*o]>=t,Jw[c<<1|l<<2].forEach(i);++a<o-1;)f=c,c=e[s*o+o+a+1]>=t,d=l,l=e[s*o+a+1]>=t,Jw[f|c<<1|l<<2|d<<3].forEach(i);Jw[c|l<<3].forEach(i)}for(a=-1,l=e[s*o]>=t,Jw[l<<2].forEach(i);++a<o-1;)d=l,l=e[s*o+a+1]>=t,Jw[l<<2|d<<3].forEach(i);Jw[l<<3].forEach(i)}function r(e){return 2*e[0]+e[1]*(o+1)*4}function i(e,t,n){e.forEach(function(e){var r,i=e[0],a=e[1],s=0|i,f=0|a,c=t[f*o+s];i>0&&i<o&&s===i&&(r=t[f*o+s-1],e[0]=i+(n-r)/(c-r)-.5),a>0&&a<u&&f===a&&(r=t[(f-1)*o+s],e[1]=a+(n-r)/(c-r)-.5)})}var o=1,u=1,s=a.thresholdSturges,f=i;return e.contour=t,e.size=function(t){if(!arguments.length)return[o,u];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(n>0&&r>0))throw new Error("invalid size");return o=n,u=r,e},e.thresholds=function(t){return arguments.length?(s="function"==typeof t?t:Rs(Array.isArray(t)?Zw.call(t):t),e):s},e.smooth=function(t){return arguments.length?(f=t?i:Ls,e):f===i},e}function $s(e,t,n){for(var r=e.width,i=e.height,a=(n<<1)+1,o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=e.data[u+o*r]),u>=n&&(u>=a&&(s-=e.data[u-a+o*r]),t.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function js(e,t,n){for(var r=e.width,i=e.height,a=(n<<1)+1,o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=e.data[o+u*r]),u>=n&&(u>=a&&(s-=e.data[o+(u-a)*r]),t.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function Fs(e){return e[0]}function Is(e){return e[1]}function Us(){function e(e){var n=new Float32Array(p*g),r=new Float32Array(p*g);e.forEach(function(e,t,r){var i=u(e,t,r)+h>>d,a=s(e,t,r)+h>>d;i>=0&&i<p&&a>=0&&a<g&&++n[i+a*p]}),$s({width:p,height:g,data:n},{width:p,height:g,data:r},l>>d),js({width:p,height:g,data:r},{width:p,height:g,data:n},l>>d),$s({width:p,height:g,data:n},{width:p,height:g,data:r},l>>d),js({width:p,height:g,data:r},{width:p,height:g,data:n},l>>d),$s({width:p,height:g,data:n},{width:p,height:g,data:r},l>>d),js({width:p,height:g,data:r},{width:p,height:g,data:n},l>>d);var i=m(n);if(!Array.isArray(i)){var o=a.max(n);i=a.tickStep(0,o,i),i=a.range(0,Math.floor(o/i)*i,i),i.shift()}return qs().thresholds(i).size([p,g])(n).map(t)}function t(e){return e.value*=Math.pow(2,-2*d),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(i)}function i(e){e[0]=e[0]*Math.pow(2,d)-h,e[1]=e[1]*Math.pow(2,d)-h}function o(){return h=3*l,p=f+2*h>>d,g=c+2*h>>d,e}var u=Fs,s=Is,f=960,c=500,l=20,d=2,h=3*l,p=f+2*h>>d,g=c+2*h>>d,m=Rs(20);return e.x=function(t){return arguments.length?(u="function"==typeof t?t:Rs(+t),e):u},e.y=function(t){return arguments.length?(s="function"==typeof t?t:Rs(+t),e):s},e.size=function(e){if(!arguments.length)return[f,c];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return f=t,c=n,o()},e.cellSize=function(e){if(!arguments.length)return 1<<d;if(!((e=+e)>=1))throw new Error("invalid cell size");return d=Math.floor(Math.log(e)/Math.LN2),o()},e.thresholds=function(t){return arguments.length?(m="function"==typeof t?t:Rs(Array.isArray(t)?Zw.call(t):t),e):m},e.bandwidth=function(e){if(!arguments.length)return Math.sqrt(l*(l+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return l=Math.round((Math.sqrt(4*e*e+1)-1)/2),o()},e}function Bs(e){jt.call(this,null,e)}function Ws(e){return function(t){for(var n=a.extent(t),r=n[0],i=n[1]-r,o=[],u=1;u<=e;++u)o.push(r+i*u/(e+1));return o}}function Gs(e){jt.call(this,null,e)}function Ys(e,t){return function n(){var r=t();return r.type=e,r.path=h.geoPath().projection(r),r.copy=r.copy||function(){var e=n();return ok.forEach(function(t){r.hasOwnProperty(t)&&e[t](r[t]())}),e.path.pointRadius(r.path.pointRadius()),e},r}}function Hs(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(uk[e]=Ys(e,t),this):uk.hasOwnProperty(e)?uk[e]:null}function Vs(e){return e&&e.path||ak}function Xs(e){jt.call(this,null,e)}function Zs(e,t){var n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}function Js(e){jt.call(this,null,e)}function Qs(e){jt.call(this,null,e)}function Ks(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var i=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(i),a};return r.context=function(t){return e.context(t),r},r}function ef(e){jt.call(this,[],e),this.generator=h.geoGraticule()}function tf(e){jt.call(this,null,e),this.modified(!0)}function nf(e,t){var n=of(t.fit);t.extent?e.fitExtent(t.extent,n):t.size?e.fitSize(t.size,n):0}function rf(e){var t=Hs((e||"mercator").toLowerCase());return t||k("Unrecognized projection type: "+e),t()}function af(e,t,n){G(e[t])&&e[t](n)}function of(e){return e=W(e),1===e.length?e[0]:{type:nk,features:e.reduce(function(e,t){return t&&t.type===nk?e.push.apply(e,t.features):Yv(t)?e.push.apply(e,t):e.push(t),e},[])}}function uf(e){jt.call(this,null,e)}function sf(e,t){return function(){e.touch(t).run()}}function ff(e,t){var n=p.forceSimulation(e),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},cf(n,t,!0).on("end",function(){r=!0})}function cf(e,t,n,r){var i,a,o,u,s=W(t.forces);for(i=0,a=vk.length;i<a;++i)o=vk[i],o!==mk&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u=mk+i,o=n||t.modified(mk,i)?df(s[i]):r&&lf(s[i],r)?e.force(u):null,o&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force(mk+i,null);return e.numForces=s.length,e}function lf(e,t){var n,r;for(n in e)if(G(r=e[n])&&t.modified(w(r)))return 1;return 0}function df(e){var t,n;gk.hasOwnProperty(e.force)||k("Unrecognized force: "+e.force),t=gk[e.force]();for(n in e)G(t[n])&&hf(t[n],e[n],e);return t}function hf(e,t,n){e(G(t)?function(e){return t(e,n)}:t)}function pf(e,t,n){var r={};return e.each(function(e){var i=e.data;n(i)&&(r[t(i)]=e)}),e.lookup=r,e}function gf(e){jt.call(this,null,e)}function mf(e){return e.values}function vf(e){jt.call(this,null,e)}function yf(e,t,n){for(var r,i=0,a=t.length;i<a;++i)r=t[i],r in n&&e[r](n[r])}function bf(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}function _f(e){vf.call(this,e)}function xf(e){vf.call(this,e)}function wf(e){jt.call(this,null,e)}function kf(e){vf.call(this,e)}function Mf(e){jt.call(this,[],e)}function Sf(e){vf.call(this,e)}function Ef(e){jt.call(this,null,e)}function Of(){function e(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(Ik<<5)/t,e.height=Uk/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function t(e,t,n){for(var r,i,a,o=t.x,u=t.y,s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),l=c(f),h=d()<.5?1:-1,p=-h;(r=l(p+=h))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=s));)if(t.x=o+i,t.y=u+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>f[0]||t.y+t.y1>f[1])&&(!n||!Cf(t,e,f[0]))&&(!n||Tf(t,n))){for(var g,m=t.sprite,v=t.width>>5,y=f[0]>>5,b=t.x-(v<<4),_=127&b,x=32-_,w=t.y1-t.y0,k=(t.y+t.y0)*y+(b>>5),M=0;M<w;M++){g=0;for(var S=0;S<=v;S++)e[k+S]|=g<<x|(S<v?(g=m[M*v+S])>>>_:0);k+=y}return t.sprite=null,!0}return!1}var n,r,i,a,o,u,s,f=[256,256],c=zf,l=[],d=Math.random,h={};return h.layout=function(){for(var c=e(wr()),h=Df((f[0]>>5)*f[1]),p=null,g=l.length,m=-1,v=[],y=l.map(function(e){return{text:n(e),font:r(e),style:a(e),weight:o(e),rotate:u(e),size:~~i(e),padding:s(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size});++m<g;){var b=y[m];b.x=f[0]*(d()+.5)>>1,b.y=f[1]*(d()+.5)>>1,Af(c,b,y,m),b.hasText&&t(h,b,p)&&(v.push(b),p?Rf(p,b):p=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=f[0]>>1,b.y-=f[1]>>1)}return v},h.words=function(e){return arguments.length?(l=e,h):l},h.size=function(e){return arguments.length?(f=[+e[0],+e[1]],h):f},h.font=function(e){return arguments.length?(r=Pf(e),h):r},h.fontStyle=function(e){return arguments.length?(a=Pf(e),h):a},h.fontWeight=function(e){return arguments.length?(o=Pf(e),h):o},h.rotate=function(e){return arguments.length?(u=Pf(e),h):u},h.text=function(e){return arguments.length?(n=Pf(e),h):n},h.spiral=function(e){return arguments.length?(c=Bk[e]||e,h):c},h.fontSize=function(e){return arguments.length?(i=Pf(e),h):i},h.padding=function(e){return arguments.length?(s=Pf(e),h):s},h.random=function(e){return arguments.length?(d=e,h):d},h}function Af(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(Ik<<5)/a,Uk/a);var o,u,s,f,c,l=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,s=t.size<<1,t.rotate){var g=Math.sin(t.rotate*Fk),m=Math.cos(t.rotate*Fk),v=o*m,y=o*g,b=s*m,_=s*g;o=Math.max(Math.abs(v+_),Math.abs(v-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(s>h&&(h=s),l+o>=Ik<<5&&(l=0,d+=h,h=0),d+s>=Uk)break;i.translate((l+(o>>1))/a,(d+(s>>1))/a),t.rotate&&i.rotate(t.rotate*Fk),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=s,t.xoff=l,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=o}for(var x=i.getImageData(0,0,(Ik<<5)/a,Uk/a).data,w=[];--r>=0;)if(t=n[r],t.hasText){for(o=t.width,u=o>>5,s=t.y1-t.y0,f=0;f<s*u;f++)w[f]=0;if(l=t.xoff,null==l)return;d=t.yoff;var k=0,M=-1;for(c=0;c<s;c++){for(f=0;f<o;f++){var S=u*c+(f>>5),E=x[(d+c)*(Ik<<5)+(l+f)<<2]?1<<31-f%32:0;w[S]|=E,k|=E}k?M=c:(t.y0++,s--,c--,d++)}t.y1=t.y0+M,t.sprite=w.slice(0,(t.y1-t.y0)*u)}}}function Cf(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=32-u,f=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),l=0;l<f;l++){r=0;for(var d=0;d<=a;d++)if((r<<s|(d<a?(r=i[l*a+d])>>>u:0))&t[c+d])return!0;c+=n}return!1}function Rf(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Tf(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function zf(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Nf(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t}return[r,i]}}function Df(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Pf(e){return"function"==typeof e?e:function(){return e}}function Lf(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function qf(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function $f(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function jf(){function e(){var e=i().length,r=u[1]<u[0],s=u[r-0],h=u[1-r],p=$f(e,c,l);t=(h-s)/(p||1),f&&(t=Math.floor(t)),s+=(h-s-t*(e-c))*d,n=t*(1-c),f&&(s=Math.round(s),n=Math.round(n));var g=a.range(e).map(function(e){return s+t*e});return o(r?g.reverse():g)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,c=0,l=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c=l,e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],c=+e[1],l=u[1]<u[0],d=l?o().reverse():o(),h=d.length-1;if(f===f&&c===c&&(c<f&&(s=f,f=c,c=s),!(c<d[0]||f>u[1-l])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===c?t:a.bisectRight(d,c)-1,f-d[t]>n+1e-10&&++t,l&&(s=t,t=h-r,r=h-s),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return jf().domain(i()).range(u).round(f).paddingInner(c).paddingOuter(l).align(d)},e()}function Ff(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Ff(t())},e}function If(){return Ff(jf().paddingInner(1))}function Uf(e){return Wk.call(e,function(e){return+e})}function Bf(){function e(e){return n(e)}function t(e){r=Uf(e),n.domain([r[0],T(r)])}var n=s.scaleLinear(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return Bf().domain(e.domain()).range(e.range())},e}function Wf(){function e(e){return null==e||e!==e?void 0:n[(a.bisect(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=Uf(n),e):t.slice()},e.range=function(t){return arguments.length?(n=Gk.call(t),e):n.slice()},e.copy=function(){return Wf().domain(e.domain()).range(e.range())},e}function Gf(e){function t(){var e=r.domain();i=e[0],a=T(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=s.scaleLinear(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Gf().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function Yf(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?Lf(n):n.invertExtent?qf(n):void 0),n.type=e,n}}function Hf(e,t){return arguments.length>1?(Yk[e]=Yf(e,t),this):Yk.hasOwnProperty(e)?Yk[e]:void 0}function Vf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Xf(e,t){tM[e]=f["interpolate"+t],eM[e]=f["scheme"+t]}function Zf(e){jt.call(this,Of(),e)}function Jf(e,t){for(var n,r=+(1/0),i=-(1/0),a=0,o=t.length;a<o;++a)n=e(t[a]),n<r&&(r=n),n>i&&(i=n);return[r,i]}function Qf(e){return new Uint8Array(e)}function Kf(e){return new Uint16Array(e)}function ec(e){return new Uint32Array(e)}function tc(){var e=8,t=[],n=ec(0),r=rc(0,e),i=rc(0,e);return{data:function(){return t},seen:function(){return n=nc(n,t.length)},add:function(e){for(var n,r=0,i=t.length,a=e.length;r<a;++r)n=e[r],n._index=i++,t.push(n)},remove:function(e,n){var a,o,u,s=t.length,f=Array(s-e),c=t;for(o=0;!n[o]&&o<s;++o)f[o]=t[o],c[o]=o;for(u=o;o<s;++o)a=t[o],n[o]?c[o]=-1:(c[o]=u,r[u]=r[o],i[u]=i[o],f[u]=a,a._index=u++),r[o]=0;return t=f,c},size:function(){return t.length},curr:function(){return r},prev:function(){return i},reset:function(e){i[e]=r[e]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){var a=r.length;(t>a||n>e)&&(e=Math.max(n,e),r=rc(t,e,r),i=rc(t,e))}}}function nc(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function rc(e,t,n){var r=(t<257?Qf:t<65537?Kf:ec)(e);return n&&r.set(n),r}function ic(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this,a=i.bisect(i.range,e.value),o=e.index,u=a[0],s=a[1],f=o.length;for(n=0;n<u;++n)t[o[n]]|=r;for(n=s;n<f;++n)t[o[n]]|=r;return i}}}function ac(){function e(e,t,n){if(!t.length)return[];var r,a,s,f=u,c=t.length,l=Array(c),d=ec(c);for(s=0;s<c;++s)l[s]=e(t[s]),d[s]=s;if(l=oc(l,d),f)r=o,a=i,o=Array(f+c),i=ec(f+c),uc(n,r,a,f,l,d,c,o,i);else{if(n>0)for(s=0;s<c;++s)d[s]+=n;o=l,i=d}return u=f+c,{index:d,value:l}}function t(e,t){var n,r,a,s=u;for(r=0;!t[i[r]]&&r<s;++r);for(a=r;r<s;++r)t[n=i[r]]||(i[a]=n,o[a]=o[r],++a);u=s-e}function n(e){for(var t=0,n=u;t<n;++t)i[t]=e[i[t]]}function r(e,t){var n;return t?n=t.length:(t=o,n=u),[a.bisectLeft(t,e[0],0,n),a.bisectRight(t,e[1],0,n)]}var i=ec(0),o=[],u=0;return{insert:e,remove:t,bisect:r,reindex:n,index:function(){return i},size:function(){return u}}}function oc(e,t){return e.sort.call(t,function(t,n){var r=e[t],i=e[n];return r<i?-1:r>i?1:0}),a.permute(e,t)}function uc(e,t,n,r,i,a,o,u,s){var f,c=0,l=0;for(f=0;c<r&&l<o;++f)t[c]<i[l]?(u[f]=t[c],s[f]=n[c++]):(u[f]=i[l],s[f]=a[l++]+e);for(;c<r;++c,++f)u[f]=t[c],s[f]=n[c];for(;l<o;++l,++f)u[f]=i[l],s[f]=a[l]+e}function sc(e){jt.call(this,tc(),e),this._indices=null,this._dims=null}function fc(e){jt.call(this,null,e)}function cc(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function lc(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function dc(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function hc(){function e(){var e=i().length,r=u[1]<u[0],s=u[r-0],h=u[1-r],p=dc(e,c,l);t=(h-s)/(p||1),f&&(t=Math.floor(t)),s+=(h-s-t*(e-c))*d,n=t*(1-c),f&&(s=Math.round(s),n=Math.round(n));var g=a.range(e).map(function(e){return s+t*e});return o(r?g.reverse():g)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,c=0,l=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c=l,e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],c=+e[1],l=u[1]<u[0],d=l?o().reverse():o(),h=d.length-1;if(f===f&&c===c&&(c<f&&(s=f,f=c,c=s),!(c<d[0]||f>u[1-l])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===c?t:a.bisectRight(d,c)-1,f-d[t]>n+1e-10&&++t,l&&(s=t,t=h-r,r=h-s),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return hc().domain(i()).range(u).round(f).paddingInner(c).paddingOuter(l).align(d)},e()}function pc(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return pc(t())},e}function gc(){return pc(hc().paddingInner(1))}function mc(e){return cM.call(e,function(e){return+e})}function vc(){function e(e){return n(e)}function t(e){r=mc(e),n.domain([r[0],T(r)])}var n=s.scaleLinear(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return vc().domain(e.domain()).range(e.range())},e}function yc(){function e(e){return null==e||e!==e?void 0:n[(a.bisect(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=mc(n),e):t.slice()},e.range=function(t){return arguments.length?(n=lM.call(t),e):n.slice()},e.copy=function(){return yc().domain(e.domain()).range(e.range())},e}function bc(e){function t(){var e=r.domain();i=e[0],a=T(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=s.scaleLinear(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return bc().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function _c(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?cc(n):n.invertExtent?lc(n):void 0),n.type=e,n}}function xc(e,t){return arguments.length>1?(dM[e]=_c(e,t),this):dM.hasOwnProperty(e)?dM[e]:void 0}function wc(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function kc(e,t){xM[e]=f["interpolate"+t],_M[e]=f["scheme"+t]}function Mc(e,t){if(arguments.length>1)return xM[e]=t,this;var n=e.split("-");return e=n[0],n=+n[1]+1,n&&_M.hasOwnProperty(e)?_M[e][n-1]:!n&&xM.hasOwnProperty(e)?xM[e]:void 0}function Sc(e,t){var n=t[0],r=T(t)-n;return function(t){return e(n+t*r)}}function Ec(e,t){var n=c[Oc(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function Oc(e){return"interpolate"+e.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("")}function Ac(e){return wM.hasOwnProperty(e)&&wM[e]}function Cc(e){return kM.hasOwnProperty(e)&&kM[e]}function Rc(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:MM,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var r=t.value,i=r?E(r)?r:r.user:MM,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),e.add(null,function(e){var t=e.cursor,n=this.value;return E(t)||(n=t.item,t=t.user),Tc(t&&t!==MM?t:n||t),n},{cursor:t})}function Tc(e){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=e)}function zc(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||k("Unrecognized data set: "+t),n[t]}function Nc(e){return zc(this,e).values.value}function Dc(e,t){we(t)||k("Second argument to changes must be a changeset.");var n=zc(this,e);return n.modified=!0,this.pulse(n.input,t)}function Pc(e,t){return Dc.call(this,e,ke().insert(t))}function Lc(e,t){return Dc.call(this,e,ke().remove(t))}function qc(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function $c(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function jc(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Fc(e){var t=jc(e),n=qc(e),r=$c(e);e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(function(t){try{t(n,r)}catch(t){e.error(t)}})}function Ic(e,t,n){var r,i,a,o=e._renderer.canvas();return o&&(a=jc(e),i=t.changedTouches?t.changedTouches[0]:t,r=La(i,o),r[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.vega=Uc(e,n,r),t.item=n,t}function Uc(e,t,n){function r(e){var n,r=a;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(e){if(!e)return n;E(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var a=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:H(e),item:H(t||{}),group:r,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}function Bc(e){e=X({},e);var t=e.defaults;return t&&(Yv(t.prevent)&&(t.prevent=le(t.prevent)),Yv(t.allow)&&(t.allow=le(t.allow))),e}function Wc(e,t){var n=e._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return r!==!1&&i!==!0&&(r===!0||i===!1||(r?r[t]:i?!i[t]:e.preventDefault()))}function Gc(e,t,n){var r,i=this,a=new Ce(n),o=function(n,r){e===SM&&Wc(i,t)&&n.preventDefault();try{a.receive(Ic(i,n,r))}catch(e){i.error(e)}finally{i.run()}};if(e===EM)i.timer(o,t);else if(e===SM)i.addEventListener(t,o,AM);else if(e===OM?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a}function Yc(e){return e.item}function Hc(e){var t=e.item.mark.source;return t.source||t}function Vc(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Xc(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",Yc),Hc,Vc(e)),this.on(this.events("view","mouseout",Yc),Hc,Vc(t)),this}function Zc(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=a.length;--e>=0;)for(n=a[e],t=n.sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this}function Jc(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function Qc(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&(i.source=!0,e.signal(r.signal,t).run())}},r.debounce&&(i.update=V(r.debounce,i.update))),Kc(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,function(){i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}}function Kc(e,t,n,r){var i=Jc("div",{class:CM});i.appendChild(Jc("span",{class:RM},n.name||n.signal)),t.appendChild(i);var a=el;switch(n.input){case"checkbox":a=tl;break;case"select":a=nl;break;case"radio":a=rl;break;case"range":a=il}a(e,i,n,r)}function el(e,t,n,r){var i=Jc("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function tl(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=Jc("input",i);t.appendChild(a),a.addEventListener("change",function(){e.update(a.checked)}),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function nl(e,t,n,r){var i=Jc("select",{name:n.signal});n.options.forEach(function(e){var t={value:e};al(e,r)&&(t.selected=!0),i.appendChild(Jc("option",t,e+""))}),t.appendChild(i),i.addEventListener("change",function(){e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(al(n.options[t],e))return void(i.selectedIndex=t)}}function rl(e,t,n,r){var i=Jc("span",{class:TM});t.appendChild(i),e.elements=n.options.map(function(t){var a=zM+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};al(t,r)&&(o.checked=!0);var u=Jc("input",o);return u.addEventListener("change",function(){e.update(t)}),i.appendChild(u),i.appendChild(Jc("label",{for:a},t+"")),u}),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)al(n[r].value,t)&&(n[r].checked=!0)}}function il(e,t,n,r){function i(){c.textContent=f.value,e.update(+f.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var o=n.min||Math.min(0,+r)||0,u=n.max||Math.max(100,+r)||100,s=n.step||a.tickStep(o,u,100),f=Jc("input",{type:"range",name:n.signal,min:o,max:u,step:s});f.value=r;var c=Jc("label",{},+r);t.appendChild(f),t.appendChild(c),f.addEventListener("input",i),f.addEventListener("change",i),e.elements=[f],e.set=function(e){f.value=e,c.textContent=e}}function al(e,t){return e===t||e+""==t+""}function ol(e,t,n,r,i){return t=t||new r(e.loader()),t.initialize(n,qc(e),$c(e),jc(e),i).background(e._background)}function ul(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function sl(e,t,n,r){var i=new r(e.loader(),ul(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,jc(e),e);return t&&t.handlers().forEach(function(e){i.on(e.type,e.handler)}),i}function fl(e,t){var n,r,i=this,a=i._renderType,o=po(a);return e=i._el=e?cl(i,e):null,o||i.error("Unrecognized renderer type: "+a),n=o.handler||Ia,r=e?o.renderer:o.headless,i._renderer=r?ol(i,i._renderer,e,r):null,i._handler=sl(i,i._handler,e,n),i._redraw=!0,e&&(t=t?cl(i,t):e.appendChild(Jc("div",{class:"vega-bindings"})),i._bind.forEach(function(e){e.param.element&&(e.element=cl(i,e.param.element))}),i._bind.forEach(function(e){Qc(i,e.element||t,e)})),i}function cl(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),
null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}function ll(e,t,n){var r=po(t),i=r&&r.headless;return i?e.runAsync().then(function(){return ol(e,null,null,i,n).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)}function dl(e,t){return e!==jx.Canvas&&e!==jx.SVG&&e!==jx.PNG?Promise.reject("Unrecognized image type: "+e):ll(this,e,t).then(function(t){return e===jx.SVG?hl(t.svg(),"image/svg+xml"):t.canvas().toDataURL("image/png")})}function hl(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function pl(e){return ll(this,jx.Canvas,e).then(function(e){return e.canvas()})}function gl(e){return ll(this,jx.SVG,e).then(function(e){return e.svg()})}function ml(e,t){return e=e||t.autosize,S(e)?e:(e=e||"pad",{type:e})}function vl(e,t){return e=e||t.padding,S(e)?{top:yl(e.top),bottom:yl(e.bottom),left:yl(e.left),right:yl(e.right)}:bl(yl(e))}function yl(e){return+e||0}function bl(e){return{top:e,bottom:e,left:e,right:e}}function _l(e,t){k(e+' for "outer" push: '+O(t))}function xl(e,t){var n=e.name;if(e.push===NM)t.signals[n]||_l("No prior signal definition",n),DM.forEach(function(t){void 0!==e[t]&&_l("Invalid property ",t)});else{var r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function wl(e){this.type=e}function kl(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}function Ml(e,t){if(!e)throw new Error("ASSERT: "+t)}function Sl(e){return e>=48&&e<=57}function El(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Ol(e){return"01234567".indexOf(e)>=0}function Al(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Cl(e){return 10===e||13===e||8232===e||8233===e}function Rl(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&yS.test(String.fromCharCode(e))}function Tl(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&bS.test(String.fromCharCode(e))}function zl(){for(var e;qM<$M&&(e=LM.charCodeAt(qM),Al(e)||Cl(e));)++qM}function Nl(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)qM<$M&&El(LM[qM])?(r=LM[qM++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):ud({},oS,mS);return String.fromCharCode(i)}function Dl(){var e,t,n,r;for(e=LM[qM],t=0,"}"===e&&ud({},oS,mS);qM<$M&&(e=LM[qM++],El(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&ud({},oS,mS),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Pl(){var e,t;for(e=LM.charCodeAt(qM++),t=String.fromCharCode(e),92===e&&(117!==LM.charCodeAt(qM)&&ud({},oS,mS),++qM,e=Nl("u"),e&&"\\"!==e&&Rl(e.charCodeAt(0))||ud({},oS,mS),t=e);qM<$M&&(e=LM.charCodeAt(qM),Tl(e));)++qM,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==LM.charCodeAt(qM)&&ud({},oS,mS),++qM,e=Nl("u"),e&&"\\"!==e&&Tl(e.charCodeAt(0))||ud({},oS,mS),t+=e);return t}function Ll(){var e,t;for(e=qM++;qM<$M;){if(t=LM.charCodeAt(qM),92===t)return qM=e,Pl();if(!Tl(t))break;++qM}return LM.slice(e,qM)}function ql(){var e,t,n;return e=qM,t=92===LM.charCodeAt(qM)?Pl():Ll(),n=1===t.length?UM:_S.hasOwnProperty(t)?BM:"null"===t?WM:"true"===t||"false"===t?FM:UM,{type:n,value:t,start:e,end:qM}}function $l(){var e,t,n,r,i=qM,a=LM.charCodeAt(qM),o=LM[qM];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++qM,{type:YM,value:String.fromCharCode(a),start:i,end:qM};default:if(e=LM.charCodeAt(qM+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return qM+=2,{type:YM,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:qM};case 33:case 61:return qM+=2,61===LM.charCodeAt(qM)&&++qM,{type:YM,value:LM.slice(i,qM),start:i,end:qM}}}return r=LM.substr(qM,4),">>>="===r?(qM+=4,{type:YM,value:r,start:i,end:qM}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(qM+=3,{type:YM,value:n,start:i,end:qM}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(qM+=2,{type:YM,value:t,start:i,end:qM}):"<>=!+-*%&|^/".indexOf(o)>=0?(++qM,{type:YM,value:o,start:i,end:qM}):void ud({},oS,mS)))}function jl(e){for(var t="";qM<$M&&El(LM[qM]);)t+=LM[qM++];return 0===t.length&&ud({},oS,mS),Rl(LM.charCodeAt(qM))&&ud({},oS,mS),{type:GM,value:parseInt("0x"+t,16),start:e,end:qM}}function Fl(e){for(var t="0"+LM[qM++];qM<$M&&Ol(LM[qM]);)t+=LM[qM++];return(Rl(LM.charCodeAt(qM))||Sl(LM.charCodeAt(qM)))&&ud({},oS,mS),{type:GM,value:parseInt(t,8),octal:!0,start:e,end:qM}}function Il(){var e,t,n;if(n=LM[qM],Ml(Sl(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=qM,e="","."!==n){if(e=LM[qM++],n=LM[qM],"0"===e){if("x"===n||"X"===n)return++qM,jl(t);if(Ol(n))return Fl(t);n&&Sl(n.charCodeAt(0))&&ud({},oS,mS)}for(;Sl(LM.charCodeAt(qM));)e+=LM[qM++];n=LM[qM]}if("."===n){for(e+=LM[qM++];Sl(LM.charCodeAt(qM));)e+=LM[qM++];n=LM[qM]}if("e"===n||"E"===n)if(e+=LM[qM++],n=LM[qM],"+"!==n&&"-"!==n||(e+=LM[qM++]),Sl(LM.charCodeAt(qM)))for(;Sl(LM.charCodeAt(qM));)e+=LM[qM++];else ud({},oS,mS);return Rl(LM.charCodeAt(qM))&&ud({},oS,mS),{type:GM,value:parseFloat(e),start:t,end:qM}}function Ul(){var e,t,n,r,i="",a=!1;for(e=LM[qM],Ml("'"===e||'"'===e,"String literal must starts with a quote"),t=qM,++qM;qM<$M;){if(n=LM[qM++],n===e){e="";break}if("\\"===n)if(n=LM[qM++],n&&Cl(n.charCodeAt(0)))"\r"===n&&"\n"===LM[qM]&&++qM;else switch(n){case"u":case"x":"{"===LM[qM]?(++qM,i+=Dl()):i+=Nl(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:Ol(n)?(r="01234567".indexOf(n),0!==r&&(a=!0),qM<$M&&Ol(LM[qM])&&(a=!0,r=8*r+"01234567".indexOf(LM[qM++]),"0123".indexOf(n)>=0&&qM<$M&&Ol(LM[qM])&&(r=8*r+"01234567".indexOf(LM[qM++]))),i+=String.fromCharCode(r)):i+=n}else{if(Cl(n.charCodeAt(0)))break;i+=n}}return""!==e&&ud({},oS,mS),{type:HM,value:i,octal:a,start:t,end:qM}}function Bl(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void ud({},dS)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{}catch(e){ud({},dS)}try{return new RegExp(e,t)}catch(e){return null}}function Wl(){var e,t,n,r,i;for(e=LM[qM],Ml("/"===e,"Regular expression literal must start with a slash"),t=LM[qM++],n=!1,r=!1;qM<$M;)if(e=LM[qM++],t+=e,"\\"===e)e=LM[qM++],Cl(e.charCodeAt(0))&&ud({},hS),t+=e;else if(Cl(e.charCodeAt(0)))ud({},hS);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||ud({},hS),i=t.substr(1,t.length-2),{value:i,literal:t}}function Gl(){var e,t,n;for(t="",n="";qM<$M&&(e=LM[qM],Tl(e.charCodeAt(0)));)++qM,"\\"===e&&qM<$M?ud({},oS,mS):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ud({},dS,n),{value:n,literal:t}}function Yl(){var e,t,n,r;return jM=null,zl(),e=qM,t=Wl(),n=Gl(),r=Bl(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:qM}}function Hl(e){return e.type===UM||e.type===BM||e.type===FM||e.type===WM}function Vl(){var e;return zl(),qM>=$M?{type:IM,start:qM,end:qM}:(e=LM.charCodeAt(qM),Rl(e)?ql():40===e||41===e||59===e?$l():39===e||34===e?Ul():46===e?Sl(LM.charCodeAt(qM+1))?Il():$l():Sl(e)?Il():$l())}function Xl(){var e;return e=jM,qM=e.end,jM=Vl(),qM=e.end,e}function Zl(){var e;e=qM,jM=Vl(),qM=e}function Jl(e){var t=new wl(XM);return t.elements=e,t}function Ql(e,t,n){var r=new wl("||"===e||"&&"===e?tS:ZM);return r.operator=e,r.left=t,r.right=n,r}function Kl(e,t){var n=new wl(JM);return n.callee=e,n.arguments=t,n}function ed(e,t,n){var r=new wl(QM);return r.test=e,r.consequent=t,r.alternate=n,r}function td(e){var t=new wl(KM);return t.name=e,t}function nd(e){var t=new wl(eS);return t.value=e.value,t.raw=LM.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function rd(e,t,n){var r=new wl(nS);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function id(e){var t=new wl(rS);return t.properties=e,t}function ad(e,t,n){var r=new wl(iS);return r.key=t,r.value=n,r.kind=e,r}function od(e,t){var n=new wl(aS);return n.operator=e,n.argument=t,n.prefix=!0,n}function ud(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return Ml(t<r.length,"Message reference must be in range"),r[t]});throw n=new Error(i),n.index=qM,n.description=i,n}function sd(e){e.type===IM&&ud(e,lS),e.type===GM&&ud(e,uS),e.type===HM&&ud(e,sS),e.type===UM&&ud(e,fS),e.type===BM&&ud(e,cS),ud(e,oS,e.value)}function fd(e){var t=Xl();t.type===YM&&t.value===e||sd(t)}function cd(e){return jM.type===YM&&jM.value===e}function ld(e){return jM.type===BM&&jM.value===e}function dd(){var e=[];for(qM=jM.start,fd("[");!cd("]");)cd(",")?(Xl(),e.push(null)):(e.push(Od()),cd("]")||fd(","));return Xl(),Jl(e)}function hd(){var e;return qM=jM.start,e=Xl(),e.type===HM||e.type===GM?(e.octal&&ud(e,pS),nd(e)):td(e.value)}function pd(){var e,t,n,r;return qM=jM.start,e=jM,e.type===UM?(n=hd(),fd(":"),r=Od(),ad("init",n,r)):e.type!==IM&&e.type!==YM?(t=hd(),fd(":"),r=Od(),ad("init",t,r)):void sd(e)}function gd(){var e,t,n,r=[],i={},a=String;for(qM=jM.start,fd("{");!cd("}");)e=pd(),t=e.key.type===KM?e.key.name:a(e.key.value),n="$"+t,Object.prototype.hasOwnProperty.call(i,n)?ud({},gS):i[n]=!0,r.push(e),cd("}")||fd(",");return fd("}"),id(r)}function md(){var e;return fd("("),e=Ad(),fd(")"),e}function vd(){var e,t,n;if(cd("("))return md();if(cd("["))return dd();if(cd("{"))return gd();if(e=jM.type,qM=jM.start,e===UM||xS[jM.value])n=td(Xl().value);else if(e===HM||e===GM)jM.octal&&ud(jM,pS),n=nd(Xl());else{if(e===BM)throw new Error(vS);e===FM?(t=Xl(),t.value="true"===t.value,n=nd(t)):e===WM?(t=Xl(),t.value=null,n=nd(t)):cd("/")||cd("/=")?(n=nd(Yl()),Zl()):sd(Xl())}return n}function yd(){var e=[];if(fd("("),!cd(")"))for(;qM<$M&&(e.push(Od()),!cd(")"));)fd(",");return fd(")"),e}function bd(){var e;return qM=jM.start,e=Xl(),Hl(e)||sd(e),td(e.value)}function _d(){return fd("."),bd()}function xd(){var e;return fd("["),e=Ad(),fd("]"),e}function wd(){var e,t,n;for(e=vd();;)if(cd("."))n=_d(),e=rd(".",e,n);else if(cd("("))t=yd(),e=Kl(e,t);else{if(!cd("["))break;n=xd(),e=rd("[",e,n)}return e}function kd(){var e=wd();if(jM.type===YM&&(cd("++")||cd("--")))throw new Error(vS);return e}function Md(){var e,t;if(jM.type!==YM&&jM.type!==BM)t=kd();else{if(cd("++")||cd("--"))throw new Error(vS);if(cd("+")||cd("-")||cd("~")||cd("!"))e=Xl(),t=Md(),t=od(e.value,t);else{if(ld("delete")||ld("void")||ld("typeof"))throw new Error(vS);t=kd()}}return t}function Sd(e){var t=0;if(e.type!==YM&&e.type!==BM)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Ed(){var e,t,n,r,i,a,o,u,s,f;if(e=jM,s=Md(),r=jM,i=Sd(r),0===i)return s;for(r.prec=i,Xl(),t=[e,jM],o=Md(),a=[s,r,o];(i=Sd(jM))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=Ql(u,s,o),a.push(n);r=Xl(),r.prec=i,a.push(r),t.push(jM),n=Md(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=Ql(a[f-1].value,a[f-2],n),f-=2;return n}function Od(){var e,t,n;return e=Ed(),cd("?")&&(Xl(),t=Od(),fd(":"),n=Od(),e=ed(e,t,n)),e}function Ad(){var e=Od();if(cd(","))throw new Error(vS);return e}function Cd(e){LM=e,qM=0,$M=LM.length,jM=null,Zl();var t=Ad();if(jM.type!==IM)throw new Error("Unexpect token after expression.");return t}function Rd(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&k("Missing arguments to clamp function."),t.length>3&&k("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),replace:n("replace",i),regexp:a,test:n("test",a),if:function(t){t.length<3&&k("Missing arguments to if function."),t.length>3&&k("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function Td(e){function t(e){if(E(e))return e;var t=h[e.type];return null==t&&k("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(f),fields:Object.keys(c)};return f={},c={},n}e=e||{};var r=e.whitelist?le(e.whitelist):{},i=e.blacklist?le(e.blacklist):{},a=e.constants||wS,o=(e.functions||Rd)(t),u=e.globalvar,s=e.fieldvar,f={},c={},l=0,d=G(u)?u:function(e){return u+'["'+e+'"]'},h={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return l>0?t:i.hasOwnProperty(t)?k("Illegal identifier: "+t):a.hasOwnProperty(t)?a[t]:r.hasOwnProperty(t)?t:(f[t]=1,d(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(l+=1);var i=t(e.property);return r===s&&(c[i]=1),n&&(l-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&k("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,i=o.hasOwnProperty(n)&&o[n];return i||k("Unrecognized function: "+n),G(i)?i(r):i+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){l+=1;var n=t(e.key);return l-=1,n+":"+t(e.value)}};return n.functions=o,n.constants=a,n}function zd(e,t,n){var r=e+":"+n,i=kS[r];return i&&i[0]===t||(kS[r]=i=[t,t(n)]),i[1]}function Nd(e,t){return zd("format",d.format,t)(e)}function Dd(e,t){return zd("timeFormat",i.timeFormat,t)(e)}function Pd(e,t){return zd("utcFormat",i.utcFormat,t)(e)}function Ld(e,t){return zd("timeParse",i.timeParse,t)(e)}function qd(e,t){return zd("utcParse",i.utcParse,t)(e)}function $d(e,t,n){return MS.setMonth(e),MS.setDate(t),Dd(MS,n)}function jd(e){return $d(e,1,"%B")}function Fd(e){return $d(e,1,"%b")}function Id(e){return $d(0,2+e,"%A")}function Ud(e){return $d(0,2+e,"%a")}function Bd(e){return 1+~~(new Date(e).getMonth()/3)}function Wd(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Gd(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function Yd(){return Gd(this.context.dataflow,"warn",arguments)}function Hd(){return Gd(this.context.dataflow,"info",arguments)}function Vd(){return Gd(this.context.dataflow,"debug",arguments)}function Xd(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Zd(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-t?[t,n]:[Math.min(Math.max(i,t),n-r),Math.min(Math.max(a,r),n)]}function Jd(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function Qd(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}function Kd(){return SS?SS.screen:{}}function eh(){return SS?[SS.innerWidth,SS.innerHeight]:[void 0,void 0]}function th(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function nh(e,t,n,r,i,a){var o,u,s=e[0],f=T(e);return f<s&&(o=s,s=f,f=o),o=Math.abs(t-s),u=Math.abs(f-t),o<u&&o<=n?r:u<=n?i:a}function rh(){var e=[].slice.call(arguments);return e.unshift({}),X.apply(null,e)}function ih(e){return e[e.length-1]-e[0]||0}function ah(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function oh(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function uh(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}function sh(){function e(){var e=i().length,r=u[1]<u[0],s=u[r-0],h=u[1-r],p=uh(e,c,l);t=(h-s)/(p||1),f&&(t=Math.floor(t)),s+=(h-s-t*(e-c))*d,n=t*(1-c),f&&(s=Math.round(s),n=Math.round(n));var g=a.range(e).map(function(e){return s+t*e});return o(r?g.reverse():g)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,c=0,l=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c=l,e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],c=+e[1],l=u[1]<u[0],d=l?o().reverse():o(),h=d.length-1;if(f===f&&c===c&&(c<f&&(s=f,f=c,c=s),!(c<d[0]||f>u[1-l])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===c?t:a.bisectRight(d,c)-1,f-d[t]>n+1e-10&&++t,l&&(s=t,t=h-r,r=h-s),t>r?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return sh().domain(i()).range(u).round(f).paddingInner(c).paddingOuter(l).align(d)},e()}function fh(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return fh(t())},e}function ch(){return fh(sh().paddingInner(1))}function lh(e){return TS.call(e,function(e){return+e})}function dh(){function e(e){return n(e)}function t(e){r=lh(e),n.domain([r[0],T(r)])}var n=s.scaleLinear(),r=[];return e.domain=function(n){return arguments.length?(t(n),e):r.slice()},e.range=function(t){return arguments.length?(n.range(t),e):n.range()},e.rangeRound=function(t){return arguments.length?(n.rangeRound(t),e):n.rangeRound()},e.interpolate=function(t){return arguments.length?(n.interpolate(t),e):n.interpolate()},e.invert=function(e){return n.invert(e)},e.ticks=function(t){var n=r.length,i=~~(n/(t||n));return i<2?e.domain():r.filter(function(e,t){return!(t%i)})},e.tickFormat=function(){return n.tickFormat.apply(n,arguments)},e.copy=function(){return dh().domain(e.domain()).range(e.range())},e}function hh(){function e(e){return null==e||e!==e?void 0:n[(a.bisect(t,e)-1)%n.length]}var t=[],n=[];return e.domain=function(n){return arguments.length?(t=lh(n),e):t.slice()},e.range=function(t){return arguments.length?(n=zS.call(t),e):n.slice()},e.copy=function(){return hh().domain(e.domain()).range(e.range())},e}function ph(e){function t(){var e=r.domain();i=e[0],a=T(e)-i}function n(t){var n=(t-i)/a;return e(o?Math.max(0,Math.min(1,n)):n)}var r=s.scaleLinear(),i=0,a=1,o=!1;return n.clamp=function(e){return arguments.length?(o=!!e,n):o},n.domain=function(e){return arguments.length?(r.domain(e),t(),n):r.domain()},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return ph().domain(r.domain()).clamp(o).interpolator(e)},n.ticks=function(e){return r.ticks(e)},n.tickFormat=function(e,t){return r.tickFormat(e,t)},n.nice=function(e){return r.nice(e),t(),n},n}function gh(e,t){return function(){var n=t();return n.invertRange||(n.invertRange=n.invert?ah(n):n.invertExtent?oh(n):void 0),n.type=e,n}}function mh(e,t){return arguments.length>1?(NS[e]=gh(e,t),this):NS.hasOwnProperty(e)?NS[e]:void 0}function vh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function yh(e,t){US[e]=f["interpolate"+t],IS[e]=f["scheme"+t]}function bh(e,t,n){var r=n-t;return r?"linear"===e.type||"sequential"===e.type?function(e){return(e-t)/r}:e.copy().domain([t,n]).range([0,1]).interpolate(_h):H(0)}function _h(e,t){var n=t-e;return function(t){return e+t*n}}function xh(e,t){var n;return G(e)?e:E(e)?(n=t.scales[e])&&n.value:void 0}function wh(e,t,n){var r=CS+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(e){}}function kh(e,t,n,r){if(t[0].type===ES)wh(n,r,t[0].value);else if(t[0].type===OS)for(e in n.scales)wh(n,r,e)}function Mh(e,t){var n=xh(e,(t||this).context);return n&&n.range?n.range():[]}function Sh(e,t){var n=xh(e,(t||this).context);return n?n.domain():[]}function Eh(e,t){var n=xh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Oh(e,t,n){return uh(e||0,t||0,n||0)}function Ah(e,t){var n=xh(e,(t||this).context);return n?n.copy():void 0}function Ch(e,t,n){var r=xh(e,(n||this).context);return r?r(t):void 0}function Rh(e,t,n){var r=xh(e,(n||this).context);return r?Yv(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Th(e,t,n,r,i){e=xh(e,(i||this).context);var a=gr(t,n),o=e.domain(),u=o[0],s=o[o.length-1],f=bh(e,u,s);e.ticks&&(o=e.ticks(+r||15),u!==o[0]&&o.unshift(u),s!==o[o.length-1]&&o.push(s));for(var c=0,l=o.length;c<l;++c)a.stop(f(o[c]),e(o[c]));return a}function zh(e,t){return function(n,r,i){if(n){var a=xh(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}function Nh(e,t,n){var r=xh(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}function Dh(e){var t=null;return function(n){return n?zr(n,t=t||Ar(e)):e}}function Ph(e){var t=this.context.data[e];return t?t.values.value:[]}function Lh(e,t,n,r){t[0].type!==ES&&k("First argument to data functions must be a string literal.");var i=t[0].value,a=RS+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function qh(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}function $h(e,t,n,r){t[0].type!==ES&&k("First argument to indata must be a string literal."),t[1].type!==ES&&k("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,o=AS+a;r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,a))}function jh(e,t){var n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Qv).insert(t)),1}function Fh(e){return e.data}function Ih(e,t){var n=Ph.call(t,e);return n.root&&n.root.lookup||YS}function Uh(e,t,n){var r=Ih(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(Fh):void 0}function Bh(e,t){var n=Ih(e,this)[t];return n?n.ancestors().map(Fh):void 0}function Wh(e,t,n,r){var i,a=t[0],o=t[t.length-1];return a>o&&(i=a,a=o,o=i),n=void 0===n||n,r=void 0===r||r,(n?a<=e:a<e)&&(r?e<=o:e<o)}function Gh(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e}function Yh(e,t){return e===t||e!==e&&t!==t||!(!Yv(e)||!Yv(t)||e.length!==t.length)&&Hh(e,t)}function Hh(e,t){for(var n=0,r=e.length;n<r;++n)if(!Yh(e[n],t[n]))return!1;return!0}function Vh(e){return function(t){for(var n in e)if(!Yh(t[n],e[n]))return!1;return!0}}function Xh(e,t,n,r,i,a){var o,u,s=this.context.dataflow,f=this.context.data[e],c=f.input,l=f.changes,d=s.stamp();if(s._trigger===!1||!(c.value.length||t||r))return 0;if((!l||l.stamp<d)&&(f.changes=l=s.changeset(),l.stamp=d,s.runAfter(function(){f.modified=!0,s.pulse(c,l).run()},!0,1)),n&&(o=n===!0?Qv:Yv(n)||ge(n)?n:Vh(n),l.remove(o)),t&&l.insert(t),r&&(o=Vh(r),c.value.some(o)?l.remove(o):l.insert(r)),i)for(u in a)l.modify(i,u,a[u]);return 1}function Zh(e,t){for(var n,r=t.fields,i=t.values,a=t.getter||(t.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||A(r[u]),n=a[u](e),ee(n)&&(n=z(n)),ee(i[u])&&(i[u]=z(i[u])),t[HS+r[u]]){if(ee(i[u][0])&&(i[u]=i[u].map(z)),!Wh(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function Jh(e,t){for(var n,r,i,a=t.intervals,o=a.length,u=0;u<o;++u){if(r=a[u].extent,n=a[u].getter||(a[u].getter=A(a[u].field)),i=n(e),!r||r[0]===r[1])return!1;if(ee(i)&&(i=z(i)),ee(r[0])&&(r=a[u].extent=r.map(z)),te(r[0])&&!Wh(i,r))return!1;if(E(r[0])&&r.indexOf(i)<0)return!1}return!0}function Qh(e,t,n,r){for(var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=f?f[ZS]&&f[ZS].value:void 0,d=n===VS,h=c.length,p=0;p<h;++p)if(i=c[p],l&&d){if(a=a||{},o=a[u=i.unit]||0,o===-1)continue;if(s=r(t,i),a[u]=s?-1:++o,s&&1===l.size)return!0;if(!s&&o===l.get(u).count)return!1}else if(s=r(t,i),d^s)return s;return h&&d}function Kh(e,t,n){return Qh.call(this,e,t,n,Zh)}function ep(e,t,n){return Qh.call(this,e,t,n,Jh)}function tp(e,t,n,r){t[0].type!==ES&&k("First argument to indata must be a string literal.");var i=t[0].value,a=t.length>=2&&t[t.length-1].value,o="unit",u=AS+o;a!==VS||r.hasOwnProperty(u)||(r[u]=n.getData(i).indataRef(n,o)),Lh(e,t,n,r)}function np(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=f?f[ZS]&&f[ZS].value:void 0,d=c[0],h=0;if(d){for(i=t?d.encodings.length:d.fields.length;h<i;++h)if(t&&d.encodings[h]===t||n&&d.fields[h]===n){a=h,u=d[HS+d.fields[h]];break}return l&&1===l.size&&(r=XS),l&&r===VS?(s=c.reduce(function(e,t){var n=e[t.unit]||(e[t.unit]=[]);return n.push({unit:t.unit,value:t.values[a]}),e},{}),o=Object.keys(s).map(function(e){return{unit:e,value:u?ap(s[e],XS):ip(s[e],XS)}})):o=c.map(function(e){return{unit:e.unit,value:e.values[a]}}),u?ap(o,r):ip(o,r)}}function rp(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=c[0],d=0;if(l){for(i=l.intervals.length;d<i;++d)if(a=l.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,s=a.extent.length>2;break}return u=c.reduce(function(e,t){var n=t.intervals[o].extent,r=s?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return s?e.push.apply(e,r):e.push(r),e},[]),s?ip(u,r):ap(u,r)}}function ip(e,t){for(var n,r,i,a,o={},u=0,s={},f=[],c=0,l=e.length;c<l;++c)n=e[c],r=n.unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],t===VS&&i.count!==u||f.push(i.value);return f.length?f:void 0}function ap(e,t){for(var n,r,i,a,o=t===VS?up:op,u=0,s=e.length;u<s;++u)n=e[u].value,ee(n[0])&&(n=n.map(z)),i=n[0],a=n[1],i>a&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!==+r[1]?r:void 0}function op(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function up(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function sp(e,t,n){return 1===arguments.length?JS[e]:(JS[e]=t,n&&(tE[e]=n),aE&&(aE.functions[e]=eE+e),this)}function fp(e){var t=Rd(e);QS.forEach(function(e){t[e]=KS+e});for(var n in JS)t[n]=eE+n;return t}function cp(e,t,n){var r,i,a={};try{e=E(e)?e:O(e)+"",r=Cd(e)}catch(t){k("Expression parse error: "+e)}return r.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,r=iE.visitors[n];r&&r(n,e.arguments,t,a)}}),i=aE(r),i.globals.forEach(function(e){var n=oE+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function lp(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function dp(e,t,n,r){return new lp(e,t,n,r)}function hp(e,t){return dp("operator",e,t)}function pp(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function gp(e,t){return t?{$field:e,$name:t}:{$field:e}}function mp(e,t){return{$compare:e,$order:t}}function vp(e,t){var n={$key:e};return t&&(n.$flat=!0),n}function yp(e){return S(e)?(e.order===cE?"-":"+")+bp(e.op,e.field):""}function bp(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function _p(e){return e&&e.signal}function xp(e,t){return null!=e?e:t}function wp(e){return e&&e.signal||e}function kp(e,t){var n=e.merge?Sp:e.stream?Ep:e.type?Op:k("Invalid stream specification: "+O(e));return n(e,t)}function Mp(e){return e===lE?dE:e||dE}function Sp(e,t){var n=e.merge.map(function(e){return kp(e,t)}),r=Ap({merge:n},e,t);return t.addStream(r).id}function Ep(e,t){var n=kp(e.stream,t),r=Ap({stream:n},e,t);return t.addStream(r).id}function Op(e,t){var n,r;return e.type===hE?(n=t.event(hE,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Mp(e.source),e.type),r=Ap({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function Ap(e,t,n){var r=t.between;return r&&(2!==r.length&&k('Stream "between" parameter must have 2 entries: '+O(t)),e.between=[kp(r[0],n),kp(r[1],n)]),r=t.filter?W(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Cp(t.marktype,t.markname,t.markrole)),t.source===lE&&r.push("inScope(event.item)"),r.length&&(e.filter=cp("("+r.join(")&&(")+")").$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Cp(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}function Rp(e,t,n){return nE=t||pE,rE=n||ME,Np(e.trim()).map(Dp)}function Tp(e){return rE.hasOwnProperty(e)}function zp(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Np(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=zp(e,i,_E,gE+vE,mE+yE),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function Dp(e){return"["===e[0]?Pp(e):Lp(e)}function Pp(e){var t,n,r=e.length,i=1;if(i=zp(e,i,mE,gE,mE),i===r)throw"Empty between selector: "+e;if(t=Np(e.substring(1,i)),2!==t.length)throw"Between selector must have two elements: "+e;if(e=e.slice(i+1).trim(),e[0]!==wE)throw"Expected '>' after between selector: "+e;return t=t.map(Dp),n=Dp(e.slice(1).trim()),n.between?{between:t,stream:n}:(n.between=t,n)}function Lp(e){var t,n,r={source:nE},i=[],a=[0,0],o=0,u=0,s=e.length,f=0;if(e[s-1]===yE){if(f=e.lastIndexOf(vE),!(f>=0))throw"Unmatched right brace: "+e;try{a=qp(e.substring(f+1,s-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,f).trim(),s=e.length,f=0}if(!s)throw e;if(e[0]===xE&&(o=++f),t=zp(e,f,bE),t<s&&(i.push(e.substring(u,t).trim()),u=f=++t),f=zp(e,f,gE),f===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,f).trim()),n=[],u=++f,u===s)throw"Unmatched left bracket: "+e;for(;f<s;){if(f=zp(e,f,mE),f===s)throw"Unmatched left bracket: "+e;
if(n.push(e.substring(u,f).trim()),f<s-1&&e[++f]!==gE)throw"Expected left bracket: "+e;u=++f}if(!(s=i.length)||kE.test(i[s-1]))throw"Invalid event selector: "+e;return s>1?(r.type=i[1],o?r.markname=i[0].slice(1):Tp(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}function qp(e){var t=e.split(_E);if(!e.length||t.length>2)throw e;return t.map(function(t){var n=+t;if(n!==n)throw e;return n})}function $p(e,t,n){var r,i=e.events,a=e.update,o=e.encode,u=[],s="";i||k("Signal update missing events specification."),E(i)&&(i=Rp(i,t.isSubscope()?lE:dE)),i=W(i).filter(function(e){return e.signal||e.scale?(u.push(e),0):1}),i.length&&u.push(i.length>1?{merge:i}:i[0]),null!=o&&(a&&k("Signal encode and update are mutually exclusive."),a="encode(item(),"+O(o)+")"),s=E(a)?cp(a,t,SE):null!=a.expr?cp(a.expr,t,SE):null!=a.value?a.value:null!=a.signal?{$expr:"_.value",$params:{value:t.signalRef(a.signal)}}:k("Invalid signal update specification."),r={target:n,update:s},e.force&&(r.options={force:!0}),u.forEach(function(e){t.addUpdate(X(jp(e,t),r))})}function jp(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):kp(e,t)}}function Fp(e,t){var n=t.getSignal(e.name);if(e.update){var r=cp(e.update,t);n.update=r.$expr,n.params=r.$params}e.on&&e.on.forEach(function(e){$p(e,t,n.id)})}function Ip(e){return function(t,n,r){return dp(e,n,t||void 0,r)}}function Up(e){return rO.hasOwnProperty(e)}function Bp(e){return tO.hasOwnProperty(e)}function Wp(e){return nO.hasOwnProperty(e)}function Gp(e){return"quantile"===e}function Yp(e,t){var n=e.type||"linear";eO.hasOwnProperty(n)||k("Unrecognized scale type: "+O(n)),t.addScale(e.name,{type:n,domain:void 0})}function Hp(e,t){var n,r=t.getScale(e.name).params;r.domain=Jp(e.domain,e,t),null!=e.range&&(r.range=sg(e,t,r)),null!=e.interpolate&&ug(e.interpolate,r),null!=e.nice&&og(e.nice,r);for(n in e)r.hasOwnProperty(n)||"name"===n||(r[n]=Vp(e[n],t))}function Vp(e,t){return S(e)?e.signal?t.signalRef(e.signal):k("Unsupported object: "+O(e)):e}function Xp(e,t){return e.signal?t.signalRef(e.signal):e.map(function(e){return Vp(e,t)})}function Zp(e){k("Can not find data set: "+O(e))}function Jp(e,t,n){return e?e.signal?n.signalRef(e.signal):(Yv(e)?Qp:e.fields?eg:Kp)(e,t,n):void(null==t.domainMin&&null==t.domainMax||k("No scale domain defined for domainMin/domainMax to override."))}function Qp(e,t,n){return e.map(function(e){return Vp(e,n)})}function Kp(e,t,n){var r=n.getData(e.data);return r||Zp(e.data),Up(t.type)?r.valuesRef(n,e.field,rg(e.sort,!1)):Gp(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function eg(e,t,n){var r=e.data,i=e.fields.reduce(function(e,t){return t=E(t)?{data:r,field:t}:Yv(t)||t.signal?tg(t,n):t,e.push(t),e},[]);return(Up(t.type)?ng:Gp(t.type)?ig:ag)(e,n,i)}function tg(e,t){var n="_:vega:_"+QE++,r=CE({});if(Yv(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+O(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,VE({})]),{data:n,field:"data"}}function ng(e,t,n){var r,i,a,o;return r=n.map(function(e){var n=t.getData(e.data);return n||Zp(e.data),n.countsRef(t,e.field)}),i=t.add(EE({groupby:sE,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(CE({pulse:pp(i)})),o=t.add(JE({field:sE,sort:t.sortRef(rg(e.sort,!0)),pulse:pp(a)})),pp(o)}function rg(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?k("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&k("Multiple domain scales support op count only."):k("No field provided for sort aggregate op: "+e.op):S(e)?e.field="key":e={field:"key"}),e}function ig(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||Zp(e.data),n.domainRef(t,e.field)});return pp(t.add(jE({values:r})))}function ag(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||Zp(e.data),n.extentRef(t,e.field)});return pp(t.add($E({extents:r})))}function og(e,t){t.nice=S(e)?{interval:Vp(e.interval),step:Vp(e.step)}:Vp(e)}function ug(e,t){t.interpolate=Vp(e.type||e),null!=e.gamma&&(t.interpolateGamma=Vp(e.gamma))}function sg(e,t,n){var r=e.range,i=t.config.range;if(r.signal)return t.signalRef(r.signal);if(E(r)){if(i&&i.hasOwnProperty(r))return e=X({},e,{range:i[r]}),sg(e,t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=Up(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:k("Unrecognized scale range value: "+O(r))}else{if(r.scheme)return n.scheme=Vp(r.scheme,t),r.extent&&(n.schemeExtent=Xp(r.extent,t)),void(r.count&&(n.schemeCount=Vp(r.count,t)));if(r.step)return void(n.rangeStep=Vp(r.step,t));if(Up(e.type)&&!Yv(r))return Jp(r,e,t);Yv(r)||k("Unsupported range type: "+O(r))}return r.map(function(e){return Vp(e,t)})}function fg(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=cg(e[r],r,t));t.addProjection(e.name,n)}function cg(e,t,n){return Yv(e)?e.map(function(e){return cg(e,t,n)}):S(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:k("Unsupported parameter object: "+O(e)):e}function lg(e,t){var n="";return OO[t]?n:(e.x2&&(e.x?(AO[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(AO[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)}function dg(e,t,n,r){function i(e,i,a,o){var u=xg(null,i,t,n,r),s=xg(null,a,t,n,r),f=xg(null,o,t,n,r);return"this."+e+"("+[u,s,f].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}function hg(e,t,n,r){var i=cp(e,t);return i.$fields.forEach(function(e){r[e]=1}),X(n,i.$params),i.$expr}function pg(e,t,n,r){return gg(S(e)?e:{datum:e},t,n,r)}function gg(e,t,n,r){var i,a,o;if(e.signal)i="datum",o=hg(e.signal,t,n,r);else if(e.group||e.parent){for(a=Math.max(1,e.level||1),i="item";a-- >0;)i+=".mark.group";e.parent?(o=e.parent,i+=".datum"):o=e.group}else e.datum?(i="datum",o=e.datum):k("Invalid field reference: "+O(e));return e.signal||(E(o)?(r[o]=1,o=M(o).map(O).join("][")):o=gg(o,t,n,r)),i+"["+o+"]"}function mg(e,t,n,r,i){var a,o,u,s=yg(e.scale,n,r,i);return null!=e.range?(a=+e.range,o=s+".range()",t=0===a?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=vg(e.scale,n))&&(o=s+".bandwidth",a=+e.band,a=o+"()"+(1===a?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t}function vg(e,t){if(!E(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}function yg(e,t,n,r){var i;if(E(e))i=CS+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=O(i);else{for(i in t.scales)n[CS+i]=t.scaleRef(i);i=O(CS)+"+"+(e.signal?"("+hg(e.signal,t,n,r)+")":pg(e,t,n,r))}return"_["+i+"]"}function bg(e,t,n,r){return"this.gradient("+yg(e.gradient,t,n,r)+","+O(e.start)+","+O(e.stop)+","+O(e.count)+")"}function _g(e,t,n,r){return S(e)?"("+xg(null,e,t,n,r)+")":e}function xg(e,t,n,r,i){if(null!=t.gradient)return bg(t,n,r,i);var a=t.signal?hg(t.signal,n,r,i):t.color?dg(t.color,n,r,i):null!=t.field?pg(t.field,n,r,i):void 0!==t.value?O(t.value):void 0;return null!=t.scale&&(a=mg(t,a,n,r,i)),void 0===a&&(a=null),null!=t.exponent&&(a="Math.pow("+a+","+_g(t.exponent,n,r,i)+")"),null!=t.mult&&(a+="*"+_g(t.mult,n,r,i)),null!=t.offset&&(a+="+"+_g(t.offset,n,r,i)),t.round&&(a="Math.round("+a+")"),a}function wg(e,t,n){return e+"["+O(t)+"]="+n+";"}function kg(e,t,n,r,i){var a="";return t.forEach(function(t){var o=xg(e,t,n,r,i);a+=t.test?hg(t.test,n,r,i)+"?"+o+":":o}),wg("o",e,a)}function Mg(e,t,n,r){var i,a,o,u={},s="var o=item,datum=o.datum,$;";for(i in e)a=e[i],Yv(a)?s+=kg(i,a,r,n,u):(o=xg(i,a,r,n,u),s+=wg("o",i,o));return s+=lg(e,t),s+="return 1;",{$expr:s,$fields:Object.keys(u),$output:Object.keys(e)}}function Sg(e){return S(e)?X({},e):{value:e}}function Eg(e,t,n){return null!=n?(e[t]=S(n)&&!Yv(n)?n:{value:n},1):0}function Og(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=X(e[r]||{},t[r]));return e}function Ag(e,t,n,r,i,a){var o,u;a=a||{},a.encoders={$encode:o={}},e=Cg(e,t,n,r,i.config);for(u in e)o[u]=Mg(e[u],t,a,i);return a}function Cg(e,t,n,r,i){var a,o,u,s={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null),u=n===RO?i.group:n===CO?X({},i.mark,i[t]):null;for(a in u)o=Tg(a,e)||("fill"===a||"stroke"===a)&&(Tg("fill",e)||Tg("stroke",e)),o||(s[a]=Rg(u[a]));return W(r).forEach(function(t){var n=i.style&&i.style[t];for(var r in n)Tg(r,e)||(s[r]=Rg(n[r]))}),e=X({},e),e.enter=X(s,e.enter),e}function Rg(e){return e&&e.signal?{signal:e.signal}:{value:e}}function Tg(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function zg(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:Og(a,o,EO)}}function Ng(e,t,n){return xp(t[e],n[e])}function Dg(e,t){return xp(e.direction,t)===fO}function Pg(e,t){return xp(e.gradientLength,t.gradientLength||t.gradientWidth)}function Lg(e,t){return xp(e.gradientThickness,t.gradientThickness||t.gradientHeight)}function qg(e,t){return xp(e.columns,xp(t.columns,+Dg(e,t.symbolDirection)))}function $g(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function jg(e,t,n){var r=t.config.style[n];return r&&r[e]}function Fg(e,t,n,r){var i,a,o,u,s,f,c={value:0},l=Dg(e,n.gradientDirection),d=Lg(e,n),h=Pg(e,n),p={};return l?(o=[0,1],u=[0,0],s=d,f=h):(o=[0,0],u=[1,0],s=h,f=d),p.enter=i={opacity:c,x:c,y:c},Eg(i,"stroke",Ng("gradientStrokeColor",e,n)),Eg(i,"strokeWidth",Ng("gradientStrokeWidth",e,n)),p.exit={opacity:c},p.update=a={x:c,y:c,fill:{gradient:t,start:o,stop:u},opacity:{value:1}},i.width=a.width=Sg(s),i.height=a.height=Sg(f),zg(HO,IO,null,void 0,void 0,p,r)}function Ig(e,t,n,r,i){var a,o,u,s,f,c,l={value:0},d=Dg(e,n.gradientDirection),h=Lg(e,n),p=Pg(e,n),g={},m="";return d?(u="y",f="y2",s="x",c="width",m="1-"):(u="x",f="x2",s="y",c="height"),g.enter=a={opacity:l},Eg(a,"stroke",Ng("gradientStrokeColor",e,n)),Eg(a,"strokeWidth",Ng("gradientStrokeWidth",e,n)),g.exit={opacity:l},g.update=o={opacity:{value:1}},a.fill=o.fill={scale:t,field:yO},a[u]=o[u]={signal:m+"datum."+gO,mult:p},a[s]=o[s]={value:0},a[f]=o[f]={signal:m+"datum."+mO,mult:p},a[c]=o[c]=Sg(h),zg(HO,jO,null,yO,i,g,r)}function Ug(e,t,n,r){var i,a,o,u,s={value:0},f=Dg(e,t.gradientDirection),c=Sg(Lg(e,t)),l=Pg(e,t),d=Ng("labelOverlap",e,t),h={},p="";return h.enter=i={opacity:s},Eg(i,"fill",Ng("labelColor",e,t)),Eg(i,"font",Ng("labelFont",e,t)),Eg(i,"fontSize",Ng("labelFontSize",e,t)),Eg(i,"fontWeight",Ng("labelFontWeight",e,t)),Eg(i,"limit",xp(e.labelLimit,t.gradientLabelLimit)),h.exit={opacity:s},h.update=a={opacity:{value:1},text:{field:hO}},f?(i.align={value:"left"},i.baseline=a.baseline={signal:QO},o="y",u="x",p="1-"):(i.align=a.align={signal:JO},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:p+"datum."+gO,mult:l},i[u]=a[u]=c,c.offset=xp(e.labelOffset,t.gradientLabelOffset)||0,e=zg(ZO,UO,bO,yO,r,h,n),d&&(e.overlap={method:d,order:"datum."+dO}),e}function Bg(e,t,n,r,i,a,o,u){return{type:YO,name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}}function Wg(e,t,n,r,i){var a,o,u,s,f,c,l,d=n.entries,h=!(!d||!d.interactive),p=d?d.name:void 0,g=Ng("clipHeight",e,t),m=Ng("symbolOffset",e,t),v={data:"value"},y={},b=i+"?datum."+pO+":datum."+vO,_=g?Sg(g):{field:vO},x="datum."+dO,w="max(1,"+i+")";return y={enter:a={opacity:KO},exit:{opacity:KO},update:o={opacity:{value:1}}},e.fill||(Eg(a,"fill",t.symbolBaseFillColor),Eg(a,"stroke",t.symbolBaseStrokeColor)),Eg(a,"shape",Ng("symbolType",e,t)),Eg(a,"size",Ng("symbolSize",e,t)),Eg(a,"strokeWidth",Ng("symbolStrokeWidth",e,t)),Eg(a,"fill",Ng("symbolFillColor",e,t)),Eg(a,"stroke",Ng("symbolStrokeColor",e,t)),a.x=o.x={signal:b,mult:.5,offset:m},_.mult=.5,a.y=o.y=_,SO.forEach(function(t){e[t]&&(o[t]=a[t]={scale:e[t],field:yO})}),s=zg(XO,BO,null,yO,v,y,n.symbols),g&&(s.clip=!0),y={enter:a={opacity:KO},exit:{opacity:KO},update:o={opacity:{value:1},text:{field:hO}}},Eg(a,"align",Ng("labelAlign",e,t)),Eg(a,"baseline",Ng("labelBaseline",e,t)),Eg(a,"fill",Ng("labelColor",e,t)),Eg(a,"font",Ng("labelFont",e,t)),Eg(a,"fontSize",Ng("labelFontSize",e,t)),Eg(a,"fontWeight",Ng("labelFontWeight",e,t)),Eg(a,"limit",Ng("labelLimit",e,t)),u=Sg(m),u.offset=Ng("labelOffset",e,t),a.x=o.x={signal:b,offset:u},a.y=o.y=_,f=zg(ZO,UO,bO,yO,v,y,n.labels),y={enter:{width:KO,height:g?Sg(g):KO,opacity:KO},exit:{opacity:KO},update:o={opacity:{value:1},row:{signal:null},column:{signal:null}}},Dg(e,t.symbolDirection)?(c="ceil(item.mark.items.length/"+w+")",o.row.signal=x+"%"+c,o.column.signal="floor("+x+"/"+c+")",l={field:["row",x]}):(o.row.signal="floor("+x+"/"+w+")",o.column.signal=x+"%"+w,l={field:x}),o.column.signal=i+"?"+o.column.signal+":"+x,r={facet:{data:r,name:"value",groupby:dO}},e=Bg(TO,null,p,r,h,Og(y,d,EO),[s,f]),e.sort=l,e}function Gg(e,t){return{align:Ng("gridAlign",e,t),center:{row:!0,column:!1},columns:qg(e,t),padding:{row:Ng("rowPadding",e,t),column:Ng("columnPadding",e,t)}}}function Yg(e,t,n,r){var i,a={value:0},o={};return o.enter=i={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:a},Eg(i,"align",Ng("titleAlign",e,t)),Eg(i,"baseline",Ng("titleBaseline",e,t)),Eg(i,"fill",Ng("titleColor",e,t)),Eg(i,"font",Ng("titleFont",e,t)),Eg(i,"fontSize",Ng("titleFontSize",e,t)),Eg(i,"fontWeight",Ng("titleFontWeight",e,t)),Eg(i,"limit",Ng("titleLimit",e,t)),o.exit={opacity:a},o.update={opacity:{value:1},text:Sg(e.title)},zg(ZO,WO,_O,null,r,o,n)}function Hg(e,t){var n;return S(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Vg(e.path)+")":e.sphere&&(n="geoShape("+Vg(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Vg(e){return S(e)&&e.signal?e.signal:O(e)}function Xg(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===YO?TO:t||CO:t}function Zg(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Xg(e),zindex:+e.zindex||void 0}}function Jg(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Qg(e,t){var n=Ft(e.type);n||k("Unrecognized transform type: "+O(e.type));var r=dp(n.type.toLowerCase(),null,Kg(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Kg(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)r=e.params[i],o[r.name]=em(r,t,n);return o}function em(e,t,n){var r=e.type,i=t[e.name];return"index"===r?nm(e,t,n):void 0===i?void(e.required&&k("Missing required "+O(t.type)+" parameter: "+O(e.name))):"param"===r?rm(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!_p(i)?i.map(function(t){return tm(e,t,n)}):tm(e,i,n)}function tm(e,t,n){var r=e.type;if(_p(t))return sm(r)?k("Expression references can not be signals."):fm(r)?n.fieldRef(t):cm(r)?n.compareRef(t):n.signalRef(t.signal);var i=e.expr||fm(r);return i&&am(t)?cp(t.expr,n):i&&om(t)?gp(t.field):sm(r)?cp(t,n):um(r)?pp(n.getData(t).values):fm(r)?gp(t):cm(r)?n.compareRef(t):t}function nm(e,t,n){return E(t.from)||k('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function rm(e,t,n){var r=t[e.name];return e.array?(Yv(r)||k("Expected an array of sub-parameters. Instead: "+O(r)),r.map(function(t){return im(e,t,n)})):im(e,r,n)}function im(e,t,n){var r,i,a,o,u;for(o=0,u=e.params.length;o<u;++o){i=e.params[o];for(a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||k("Unsupported parameter: "+O(t)),r=X(Kg(i,t,n),i.key),pp(n.add(IE(r)))}function am(e){return e&&e.expr}function om(e){return e&&e.field}function um(e){return"data"===e}function sm(e){return"expr"===e}function fm(e){return"field"===e}function cm(e){return"compare"===e}function lm(e,t,n){var r,i,a,o,u;return e?(r=e.facet)&&(t||k("Only group marks can be faceted."),null!=r.field?o=u=dm(r,n):(e.data?u=pp(n.getData(e.data).aggregate):(a=Qg(X({type:"aggregate",groupby:W(r.groupby)},r.aggregate),n),a.params.key=n.keyRef(r.groupby),a.params.pulse=dm(r,n),o=u=pp(n.add(a))),i=n.keyRef(r.groupby,!0))):o=pp(n.add(CE(null,[{}]))),o||(o=dm(e,n)),{key:i,pulse:o,parent:u}}function dm(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:pp(t.getData(e.data).output)}function hm(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function pm(e){return E(e)?e:null}function gm(e,t,n){var r,i=bp(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function mm(e,t,n,r,i,a,o){var u,s,f=t[n]||(t[n]={}),c=yp(a),l=pm(i);if(null!=l&&(e=t.scope,l+=c?"|"+c:"",u=f[l]),!u){var d=a?{field:sE,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:pp(t.output)};c&&(d.sort=e.sortRef(a)),s=e.add(dp(r,void 0,d)),o&&(t.index[i]=s),u=pp(s),null!=l&&(f[l]=u)}return u}function vm(e,t,n){var r,i,a,o,u=e.from.facet,s=u.name,f=dm(u,t);u.name||k("Facet must have a name: "+O(u)),u.data||k("Facet must reference a data set: "+O(u)),u.field?o=t.add(UE({field:t.fieldRef(u.field),pulse:f})):u.groupby?o=t.add(NE({key:t.keyRef(u.groupby),group:pp(t.proxy(n.parent)),pulse:f})):k("Facet must specify groupby or field: "+O(u)),r=t.fork(),i=r.add(CE()),a=r.add(VE({pulse:pp(i)})),r.addData(s,new hm(r,i,i,a)),r.addSignal("parent",null),o.params.subflow={$subflow:Um(e,r).toRuntime()}}function ym(e,t,n){var r=t.add(UE({pulse:n.pulse})),i=t.fork();i.add(VE()),i.addSignal("parent",null),r.params.subflow={$subflow:Um(e,i).toRuntime()}}function bm(e,t,n){var r,i,a=e.remove,o=e.insert,u=e.toggle,s=e.modify,f=e.values,c=t.add(hp());r="if("+e.trigger+',modify("'+n+'",'+[o,a,u,s,f].map(function(e){return null==e?"null":e}).join(",")+"),0)",i=cp(r,t),c.update=i.$expr,c.params=i.$params}function _m(e,t){var n,r,i,a,o,u,s,f,c,l,d,h,p,g=Xg(e),m=e.type===YO,v=e.from&&e.from.facet,y=e.layout||g===TO||g===RO,b=g===CO||y||v,_=e.overlap;i=lm(e.from,m,t),r=t.add(TE({key:i.key||(e.key?gp(e.key):void 0),pulse:i.pulse,clean:!m})),c=pp(r),r=a=t.add(CE({pulse:c})),r=t.add(qE({markdef:Zg(e),interactive:Jg(e.interactive,t),clip:Hg(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:pp(r)})),l=pp(r),r=t.add(zE(Ag(e.encode,e.type,g,e.style,t,{pulse:l}))),r.params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=Qg(e,t);(n.metadata.generates||n.metadata.changes)&&k("Mark transforms should not generate new data."),n.params.pulse=pp(r),t.add(r=n)}),e.sort&&(r=t.add(XE({sort:t.compareRef(e.sort,!0),pulse:pp(r)}))),d=pp(r),(v||y)&&(y=t.add(ZE({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:l,pulse:d})),h=pp(y)),o=t.add(AE({mark:l,pulse:h||d})),p=pp(o),m&&(b&&(n=t.operators,n.pop(),y&&n.pop()),t.pushState(d,h||p,c),v?vm(e,t,i):b?ym(e,t,i):Um(e,t),t.popState(),b&&(y&&n.push(y),n.push(o))),_&&(r={method:_.method===!0?"parity":_.method,pulse:p},_.order&&(r.sort=t.compareRef({field:_.order})),_.bound&&(r.boundScale=t.scaleRef(_.bound.scale),r.boundOrient=_.bound.orient,r.boundTolerance=_.bound.tolerance),p=pp(t.add(FE(r)))),u=t.add(YE({pulse:p})),s=t.add(VE({pulse:pp(u)},void 0,t.parent())),null!=e.name&&(f=e.name,t.addData(f,new hm(t,a,u,s)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&k("Marks only support modify triggers."),bm(e,t,f)}))}function xm(e,t){var n,r,i,a,o,u,s,f,c,l=t.config.legend,d=e.encode||{},h=d.legend||{},p=h.name||void 0,g=h.interactive,m=h.style,v=SO.reduce(function(t,n){return t||e[n]},0);return v||k("Missing valid scale for legend."),o=wm(e,t.scaleType(v)),u={orient:Ng("orient",e,l),title:null!=e.title,type:o},s=pp(t.add(CE(null,[u]))),h=Og({enter:Mm(e,l),update:{offset:Sg(Ng("offset",e,l)),padding:Sg(Ng("padding",e,l)),titlePadding:Sg(Ng("titlePadding",e,l))}},h,EO),n={enter:{x:{value:0},y:{value:0}}},f=pp(t.add(LE(i={type:o,scale:t.scaleRef(v),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),o===kO?(a=[Fg(e,v,l,d.gradient),Ug(e,l,d.labels,f)],i.count=i.count||t.signalRef("max(2,2*floor(("+wp(Pg(e,l))+")/100))")):o===MO?a=[Ig(e,v,l,d.gradient,f),Ug(e,l,d.labels,f)]:(r=Gg(e,l),a=[Wg(e,l,d,f,wp(r.columns))],i.size=Sm(e,t,a[0].marks)),a=[Bg(FO,null,null,s,g,n,a,r)],u.title&&a.push(Yg(e,l,d.title,s)),c=Bg($O,m,p,s,g,h,a),e.zindex&&(c.zindex=e.zindex),_m(c,t)}function wm(e,t){var n=e.type||wO;return e.type||1!==km(e)||!e.fill&&!e.stroke||(n=Wp(t)?kO:Bp(t)?MO:wO),n!==kO?n:Bp(t)?MO:kO}function km(e){return SO.reduce(function(t,n){return t+(e[n]?1:0)},0)}function Mm(e,t){var n={},r=Eg(n,"fill",Ng("fillColor",e,t))+Eg(n,"stroke",Ng("strokeColor",e,t))+Eg(n,"strokeWidth",Ng("strokeWidth",e,t))+Eg(n,"cornerRadius",Ng("cornerRadius",e,t))+Eg(n,"strokeDash",t.strokeDash);return r?n:void 0}function Sm(e,t,n){var r,i,a,o;return a=$g("strokeWidth",n[0].encode),i=e.size?'scale("'+e.size+'",datum)':$g("size",n[0].encode,t),r=Em(n[1].encode,t,bO),o="max(ceil(sqrt("+wp(i)+")+"+wp(a)+"),"+wp(r)+")",cp(o,t)}function Em(e,t,n){return $g("fontSize",e)||jg("fontSize",t,n)}function Om(e,t,n){return'item.anchor==="'+cO+'"?'+e+':item.anchor==="'+lO+'"?'+t+":"+n}function Am(e,t){e=E(e)?{text:e}:e;var n,r,i,a=t.config.title,o=X({},e.encode);return n={orient:Ng("orient",e,a)},r=pp(t.add(CE(null,[n]))),o.name=e.name,o.interactive=e.interactive,i=Cm(e,a,o,r),e.zindex&&(i.zindex=e.zindex),_m(i,t)}function Cm(e,t,n,r){var i,a,o,u,s={value:0},f=e.text,c=Ng("orient",e,t),l=Ng("anchor",e,t),d=c===aO||c===iO?-1:1,h=c===iO||c===uO,p={group:h?"width":"height"},g={};return o={field:p,mult:{signal:nA}},u=d<0?s:h?{field:{group:"height"}}:{field:{group:"width"}},g.enter=i={opacity:s},Eg(i,"fill",Ng("color",e,t)),Eg(i,"font",Ng("font",e,t)),Eg(i,"fontSize",Ng("fontSize",e,t)),Eg(i,"fontWeight",Ng("fontWeight",e,t)),g.exit={opacity:s},g.update=a={opacity:{value:1},text:Sg(f),anchor:Sg(l),orient:Sg(c),extent:{field:p},align:{signal:tA}},h?(a.x=o,a.y=u,a.angle=s,a.baseline={value:c===iO?uO:iO}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:uO}),Eg(a,"offset",Ng("offset",e,t)||0),Eg(a,"frame",Ng("frame",e,t)),Eg(a,"angle",Ng("angle",e,t)),Eg(a,"baseline",Ng("baseline",e,t)),Eg(a,"limit",Ng("limit",e,t)),zg(ZO,GO,e.style||xO,null,r,g,n)}function Rm(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(Qg(e,t))}),e.on&&e.on.forEach(function(n){bm(n,t,e.name)}),t.addDataPipeline(e.name,Tm(e,t,n))}function Tm(e,t,n){var r,i,a,o,u,s=[],f=null,c=!1,l=!1;for(e.values?s.push(f=zm({$ingest:e.values,$format:e.format})):e.url?s.push(f=zm({$request:e.url,$format:e.format})):e.source&&(f=r=W(e.source).map(function(e){return pp(t.getData(e).output)}),s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,f||u.source||s.push(f=zm()),s.push(o),u.generates&&(l=!0),u.modifies&&!l&&(c=!0),u.source?f=o:u.changes&&(f=null);return r&&(a=r.length-1,s[0]=GE({derive:c,pulse:a?r:r[0]}),(c||a)&&s.splice(1,0,zm())),f||s.push(zm()),s.push(VE({})),s}function zm(e){var t=CE({},e);return t.metadata={source:!0},t}function Nm(e,t){var n=t.config,r=e.orient,i=r===iO||r===uO?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===t.scaleType(e.scale)&&n.axisBand;return i||a||o?X({},n.axis,i,a,o):n.axis}function Dm(e,t,n,r){var i,a,o,u,s,f=e.orient,c={value:0},l={};return l.enter=i={opacity:c},Eg(i,"stroke",Ng("domainColor",e,t)),Eg(i,"strokeWidth",Ng("domainWidth",e,t)),l.exit={opacity:c},l.update=a={opacity:{value:1}},f===iO||f===uO?(o="x",s="y"):(o="y",s="x"),u=o+"2",i[s]=c,a[o]=i[o]=Pm(e,0),a[u]=i[u]=Pm(e,1),zg(VO,NO,null,null,r,l,n)}function Pm(e,t){return{scale:e.scale,range:t}}function Lm(e,t,n,r){var i,a,o,u,s,f,c,l,d=e.orient,h=e.gridScale,p=d===aO||d===iO?1:-1,g=p*e.offset||0,m={value:0},v={};return v.enter=i={opacity:m},Eg(i,"stroke",Ng("gridColor",e,t)),Eg(i,"strokeWidth",Ng("gridWidth",e,t)),Eg(i,"strokeDash",Ng("gridDash",e,t)),v.exit=a={opacity:m},v.update=o={},Eg(o,"opacity",Ng("gridOpacity",e,t)),u={scale:e.scale,field:yO,band:Ng("bandPosition",e,t),round:Ng("tickRound",e,t),extra:Ng("tickExtra",e,t),offset:Ng("tickOffset",e,t)},d===iO||d===uO?(s="x",f="y",l="height"):(s="y",f="x",l="width"),c=f+"2",o[s]=i[s]=a[s]=u,h?(i[f]={scale:h,range:0,mult:p,offset:g},o[c]=i[c]={scale:h,range:1,mult:p,offset:g}):(i[f]={value:g},o[c]=i[c]={signal:l,mult:p,offset:g}),zg(VO,DO,null,yO,r,v,n)}function qm(e,t,n,r,i){var a,o,u,s,f,c=e.orient,l=c===aO||c===iO?-1:1,d={value:0},h={};return h.enter=a={opacity:d},Eg(a,"stroke",Ng("tickColor",e,t)),Eg(a,"strokeWidth",Ng("tickWidth",e,t)),h.exit=o={opacity:d},h.update=u={opacity:{value:1}},s=Sg(i),s.mult=l,f={scale:e.scale,field:yO,band:Ng("bandPosition",e,t),round:Ng("tickRound",e,t),extra:Ng("tickExtra",e,t),offset:Ng("tickOffset",e,t)},c===iO||c===uO?(u.y=a.y=d,u.y2=a.y2=s,u.x=a.x=o.x=f):(u.x=a.x=d,u.x2=a.x2=s,u.y=a.y=o.y=f),zg(VO,LO,null,yO,r,h,n)}function $m(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function jm(e,t,n,r,i){var a,o,u,s,f,c=e.orient,l=c===aO||c===iO?-1:1,d=e.scale,h=Ng("labelBound",e,t),p=Ng("labelFlush",e,t),g=null!=p&&p!==!1&&(p=+p)===p,m=+Ng("labelFlushOffset",e,t),v=Ng("labelOverlap",e,t),y={value:0},b={};return b.enter=a={opacity:y},Eg(a,"angle",Ng("labelAngle",e,t)),Eg(a,"fill",Ng("labelColor",e,t)),Eg(a,"font",Ng("labelFont",e,t)),Eg(a,"fontSize",Ng("labelFontSize",e,t)),Eg(a,"fontWeight",Ng("labelFontWeight",e,t)),Eg(a,"limit",Ng("labelLimit",e,t)),b.exit=o={opacity:y},b.update=u={opacity:{value:1},text:{field:hO}},s=Sg(i),s.mult=l,s.offset=Sg(Ng("labelPadding",e,t)||0),s.offset.mult=l,f={scale:d,field:yO,band:.5,offset:Ng("tickOffset",e,t)},c===iO||c===uO?(u.y=a.y=s,u.x=a.x=o.x=f,Eg(u,"align",g?$m(d,p,'"left"','"right"','"center"'):"center"),g&&m&&Eg(u,"dx",$m(d,p,-m,m,0)),Eg(u,"baseline",c===iO?"bottom":"top")):(u.x=a.x=s,u.y=a.y=o.y=f,Eg(u,"align",c===oO?"left":"right"),Eg(u,"baseline",g?$m(d,p,'"bottom"','"top"','"middle"'):"middle"),g&&m&&Eg(u,"dy",$m(d,p,m,-m,0))),e=zg(ZO,PO,bO,yO,r,b,n),(v||h)&&(e.overlap={method:v,order:"datum.index",bound:h?{scale:d,orient:c,tolerance:+h}:null}),e}function Fm(e,t,n,r){var i,a,o,u=e.orient,s=u===aO||u===iO?-1:1,f=u===iO||u===uO,c={};return c.enter=i={opacity:{value:0}},Eg(i,"align",Ng("titleAlign",e,t)),Eg(i,"fill",Ng("titleColor",e,t)),Eg(i,"font",Ng("titleFont",e,t)),Eg(i,"fontSize",Ng("titleFontSize",e,t)),Eg(i,"fontWeight",Ng("titleFontWeight",e,t)),Eg(i,"limit",Ng("titleLimit",e,t)),c.exit={opacity:{value:0}},c.update=a={opacity:{value:1},text:Sg(e.title)},o={scale:e.scale,range:.5},f?(a.x=o,a.angle={value:0},a.baseline={value:u===iO?"bottom":"top"}):(a.y=o,a.angle={value:90*s},a.baseline={value:"bottom"}),Eg(a,"angle",Ng("titleAngle",e,t)),Eg(a,"baseline",Ng("titleBaseline",e,t)),!Eg(a,"x",Ng("titleX",e,t))&&f&&!Tg("x",n)&&(c.enter.auto={value:!0}),!Eg(a,"y",Ng("titleY",e,t))&&!f&&!Tg("y",n)&&(c.enter.auto={value:!0}),zg(ZO,qO,_O,null,r,c,n)}function Im(e,t){var n,r,i,a,o,u,s=Nm(e,t),f=e.encode||{},c=f.axis||{},l=c.name||void 0,d=c.interactive,h=c.style;return n={orient:e.orient,ticks:!!Ng("ticks",e,s),labels:!!Ng("labels",e,s),grid:!!Ng("grid",e,s),domain:!!Ng("domain",e,s),title:!!xp(e.title,!1)},r=pp(t.add(CE({},[n]))),c=Og({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:Sg(xp(e.offset,0)),position:Sg(xp(e.position,0)),titlePadding:Sg(Ng("titlePadding",e,s)),minExtent:Sg(Ng("minExtent",e,s)),maxExtent:Sg(Ng("maxExtent",e,s))}},f.axis,EO),i=pp(t.add(OE({scale:t.scaleRef(e.scale),extra:t.property(Ng("tickExtra",e,s)),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push(Lm(e,s,f.grid,i)),n.ticks&&(a=Ng("tickSize",e,s),u.push(qm(e,s,f.ticks,i,a))),n.labels&&(a=n.ticks?a:0,u.push(jm(e,s,f.labels,i,a))),n.domain&&u.push(Dm(e,s,f.domain,r)),n.title&&u.push(Fm(e,s,f.title,r)),o=Bg(zO,h,l,r,d,c,u),e.zindex&&(o.zindex=e.zindex),_m(o,t)}function Um(e,t,n){var r=W(e.signals),i=W(e.scales);return n||r.forEach(function(e){xl(e,t)}),W(e.projections).forEach(function(e){fg(e,t)}),i.forEach(function(e){Yp(e,t)}),W(e.data).forEach(function(e){Rm(e,t)}),i.forEach(function(e){Hp(e,t)}),r.forEach(function(e){Fp(e,t)}),W(e.axes).forEach(function(e){Im(e,t)}),W(e.marks).forEach(function(e){_m(e,t)}),W(e.legends).forEach(function(e){xm(e,t)}),e.title&&Am(e.title,t),t.parseLambdas(),t}function Bm(e,t){var n,r,i,a,o,u=t.config;return t.background=e.background||u.background,t.eventConfig=u.events,o=pp(t.root=t.add(hp())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",vl(e.padding,u)),t.addSignal("autosize",ml(e.autosize,u)),W(e.signals).forEach(function(e){rA[e.name]||xl(e,t)}),r=t.add(CE()),i=Og({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(zE(Ag(i,YO,RO,e.style,t,{pulse:pp(r)}))),a=t.add(ZE({layout:t.objectProperty(e.layout),legendMargin:u.legendMargin,autosize:t.signalRef("autosize"),mark:o,pulse:pp(i)})),t.operators.pop(),t.pushState(pp(i),pp(a),null),Um(e,t,!0),t.operators.push(a),n=t.add(AE({mark:o,pulse:pp(a)})),n=t.add(YE({pulse:pp(n)})),n=t.add(VE({pulse:pp(n)})),t.addData("root",new hm(t,r,r,n)),t}function Wm(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Gm(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function Ym(e){return(Yv(e)?Hm:Vm)(e)}function Hm(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(r>0?",":"")+(S(t)?t.signal||Ym(t):O(t));return n+"]"}function Vm(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+O(t)+":"+(S(n)?n.signal||Ym(n):O(n));return r+"}"}function Xm(e){var t=Zm();return(e||[]).forEach(function(e){var n,r,i;if(e)for(n in e)if("style"===n){i=t.style||(t.style={});for(n in e.style)i[n]=X(i[n]||{},e.style[n])}else r=e[n],t[n]=S(r)&&!Yv(r)?X(S(t[n])?t[n]:{},r):r}),t}function Zm(){return{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:sA},area:{fill:sA},image:null,line:{stroke:sA,strokeWidth:uA},path:{stroke:sA},rect:{fill:sA},rule:{stroke:fA},shape:{stroke:sA},symbol:{fill:sA,size:64},text:{fill:fA,font:aA,fontSize:11},style:{"guide-label":{fill:fA,font:aA,fontSize:10},"guide-title":{fill:fA,font:aA,fontSize:11,fontWeight:"bold"},"group-title":{fill:fA,font:aA,fontSize:13,fontWeight:"bold"},point:{size:oA,strokeWidth:uA,shape:"circle"},circle:{size:oA,strokeWidth:uA},square:{size:oA,strokeWidth:uA,shape:"square"},cell:{fill:"transparent",stroke:lA}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:cA,grid:!1,gridWidth:1,gridColor:lA,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:cA,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:lA,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,
symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:cA,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Jm(e,t){return S(e)||k("Input Vega specification must be an object."),Bm(e,new Wm(Xm([t,e.config]))).toRuntime()}function Qm(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function Km(e,t){return Qm(["_"],e,t)}function ev(e,t){return Qm(["datum","_"],e,t)}function tv(e,t){return Qm(["event"],e,t)}function nv(e,t){return Qm(["_","event"],e,t)}function rv(e,t){return Qm(["item","_"],e,t)}function iv(e,t,n){n=n||{};var r,i;for(r in e)i=e[r],i&&i.$expr&&i.$params&&iv(i.$params,t,n),n[r]=Yv(i)?i.map(function(e){return av(e,t)}):av(i,t);return n}function av(e,t){if(!e||!S(e))return e;for(var n,r=0,i=dA.length;r<i;++r)if(n=dA[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function ov(e,t){return t.get(e.$ref)||k("Operator not defined: "+e.$ref)}function uv(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=_(ev(e.$expr,t),e.$fields,e.$name))}function sv(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=re(e.$key,e.$flat))}function fv(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=A(e.$field,e.$name))}function cv(e,t){var n="c:"+e.$compare+"_"+e.$order,r=W(e.$compare).map(function(e){return e&&e.$tupleid?me:e});return t.fn[n]||(t.fn[n]=Y(r,e.$order))}function lv(e,t){var n,r,i=e.$encode,a={};for(n in i)r=i[n],a[n]=_(rv(r.$expr,t),r.$fields),a[n].output=r.$output;return a}function dv(e,t){return t}function hv(e,t){var n=e.$subflow;return function(e,r,i){var a=wv(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}function pv(){return me}function gv(e){return(e+"").toLowerCase()}function mv(e){return"operator"===gv(e)}function vv(e){return"collect"===gv(e)}function yv(e,t){mv(e.type)||!e.type?t.operator(e,e.update?Km(e.update,t):null):t.transform(e,e.type)}function bv(e,t){var n,r;e.params&&((n=t.get(e.id))||k("Invalid operator id: "+e.id),r=iv(e.params,t),t.dataflow.connect(n,n.parameters(r)))}function _v(e,t){var n,r=null!=e.filter?tv(e.filter,t):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,r):e.merge&&(n=e.merge.map(t.get.bind(t)),i=n[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&k("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function xv(e,t){var n=S(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,o=void 0;r||k("Source not defined: "+e.source),i=e.target&&e.target.$expr?tv(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(o=iv(a.$params,t)),a=nv(a.$expr,t)),t.update(e,r,i,a,o)}function wv(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){yv(e,t)}),n.forEach(function(e){bv(e,t)}),(e.streams||[]).forEach(function(e){_v(e,t)}),(e.updates||[]).forEach(function(e){xv(e,t)}),t.resolve()}function kv(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n}function Mv(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],hA)}),Object.keys(r||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(Qv).insert(r[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})}function Sv(e,t,n){return new Ev(e,t,n)}function Ev(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Ov(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function Av(e,t,n){var r=n||JS;return wv(t,Sv(e,Uy,r))}function Cv(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===mA?r.left+r.right:0)}function Rv(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===mA?r.top+r.bottom:0)}function Tv(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n[pA],i=n[gA],a=n[mA];e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=Cv(e,n.size),t()},{size:r}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=Rv(e,n.size),t()},{size:i});var o=e.add(null,t,{pad:a});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}function zv(e,t,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(pA,n,vA),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(gA,r,vA),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)}function Nv(e){return this._runtime.getState(e||{data:Dv,signals:Pv,recurse:!0})}function Dv(e,t){return t.modified&&Yv(t.input.value)&&e.indexOf("_:vega:_")}function Pv(e,t){return!("parent"===e||t instanceof Uy.proxy)}function Lv(e){var t=this;return t.runAfter(function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0})}),this}function qv(e,t){function n(t){e({timestamp:Date.now(),elapsed:t})}this._timers.push(b.interval(n,t))}function $v(e,t,n,r){var i=e.element();i&&i.setAttribute("title",jv(r))}function jv(e){return null==e?"":Yv(e)?Iv(e):S(e)&&!ee(e)?Fv(e):e+""}function Fv(e){return Object.keys(e).map(function(t){var n=e[t];return t+": "+(Yv(n)?Iv(n):Uv(n))}).join("\n")}function Iv(e){return"["+e.map(Uv).join(", ")+"]"}function Uv(e){return Yv(e)?"[]":S(e)&&!ee(e)?"{}":e}function Bv(e,t){var n=this;t=t||{},qt.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||jx.Canvas,n._scenegraph=new Ca;var r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||$v,n._redraw=!0,n._handler=(new Ia).scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i=Av(n,e,t.functions);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:X({},e)}}),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._background=i.background||null,n._eventConfig=Bc(i.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=Cv(n,n._width),n._viewHeight=Rv(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Tv(n),Rc(n)}function Wv(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:k("Unrecognized signal name: "+O(t))}function Gv(e,t){var n=e._targets||[],r=n.filter(function(e){var n=e._update;return n&&n.handler===t});return r.length?r[0]:null}var Yv=Array.isArray,Hv=[],Vv=A("id"),Xv=_(function(e){return e},Hv,"identity"),Zv=_(function(){return 0},Hv,"zero"),Jv=_(function(){return 1},Hv,"one"),Qv=_(function(){return!0},Hv,"true"),Kv=_(function(){return!1},Hv,"false"),ey=0,ty=1,ny=2,ry=3,iy=4,ay={},oy=Symbol("vega_id"),uy=1,sy="_:mod:_",fy=Me.prototype;fy.set=function(e,t,n,r){var i=this,a=i[e],o=i[sy];return null!=t&&t>=0?(a[t]!==n||r)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||r)&&(i[e]=n,o[e]=Yv(n)?1+n.length:-1),i},fy.modified=function(e,t){var n,r=this[sy];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Yv(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&t>=0?t+1<r[e]||!!r[t+":"+e]:!!r[e]},fy.clear=function(){return this[sy]={},this};var cy=0,ly="pulse",dy=new Me,hy=1,py=2,gy=Se.prototype;gy.targets=function(){return this._targets||(this._targets=pe(Vv))},gy.set=function(e){return this.value!==e?(this.value=e,1):0},gy.skip=Ee(hy),gy.modified=Ee(py),gy.parameters=function(e,t){function n(e,n,r){r instanceof Se?(r!==u&&(t&&r.targets().add(u),c.push(r)),f.push({op:r,name:e,index:n})):s.set(e,n,r)}t=t!==!1;var r,i,a,o,u=this,s=u._argval=u._argval||new Me,f=u._argops=u._argops||[],c=[];for(r in e)if(i=e[r],r===ly)W(i).forEach(function(e){e instanceof Se?e!==u&&(e.targets().add(u),c.push(e)):k("Pulse parameters must be operator instances.")}),u.source=i;else if(Yv(i))for(s.set(r,-1,Array(a=i.length)),o=0;o<a;++o)n(r,o,i[o]);else n(r,-1,i);return this.marshall().clear(),c},gy.marshall=function(e){var t,n,r,i,a,o=this._argval||dy,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)t=u[n],i=t.op,a=i.modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);return o},gy.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},gy.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,this.pulse=t,t||e};var my=0,vy=Ce.prototype;vy._filter=Qv,vy._apply=Xv,vy.targets=function(){return this._targets||(this._targets=pe(Vv))},vy.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},vy.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},vy.filter=function(e){var t=Re(e);return this.targets().add(t),t},vy.apply=function(e){var t=Re(null,e);return this.targets().add(t),t},vy.merge=function(){var e=Re();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},vy.throttle=function(e){var t=-1;return this.filter(function(){var n=Date.now();return n-t>e?(t=n,1):0})},vy.debounce=function(e){var t=Re();return this.targets().add(Re(null,null,V(e,function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},vy.between=function(e,t){var n=!1;return e.targets().add(Re(null,null,function(){n=!0})),t.targets().add(Re(null,null,function(){n=!1})),this.filter(function(){return n})};var yy=/^([A-Za-z]+:)?\/\//,by="file://",_y={boolean:ue,integer:z,number:z,date:fe,string:ce,unknown:Xv},xy=[Be,Ye,Ge,We],wy=["boolean","integer","number","date"],ky={dsv:Ve,csv:He(","),tsv:He("\t"),json:Ze,topojson:st},My={skip:!0},Sy={},Ey=1,Oy=2,Ay=4,Cy=Ey|Oy,Ry=Ey|Ay,Ty=Ey|Oy|Ay,zy=8,Ny=16,Dy=32,Py=64,Ly=_t.prototype;Ly.StopPropagation=Sy,Ly.ADD=Ey,Ly.REM=Oy,Ly.MOD=Ay,Ly.ADD_REM=Cy,Ly.ADD_MOD=Ry,Ly.ALL=Ty,Ly.REFLOW=zy,Ly.SOURCE=Ny,Ly.NO_SOURCE=Dy,Ly.NO_FIELDS=Py,Ly.fork=function(e){return new _t(this.dataflow).init(this,e)},Ly.clone=function(){var e=this.fork(Ty);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Ty|Ny)},Ly.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?(e=new _t(this.dataflow).init(this),e.add=e.source,e):e},Ly.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||t&Py||(n.fields=e.fields),t&Ey?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Oy?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ay?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Dy?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},Ly.runAfter=function(e){this.dataflow.runAfter(e)},Ly.changed=function(e){var t=e||Ty;return t&Ey&&this.add.length||t&Oy&&this.rem.length||t&Ay&&this.mod.length},Ly.reflow=function(e){if(e)return this.fork(Ty).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ay,kt(this,Ey))),this},Ly.modifies=function(e){var t=W(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},Ly.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?Yv(e)?e.some(function(e){return t[e]}):t[e]:!!t)},Ly.filter=function(e,t){var n=this;return e&Ey&&(n.addF=xt(n.addF,t)),e&Oy&&(n.remF=xt(n.remF,t)),e&Ay&&(n.modF=xt(n.modF,t)),e&Ny&&(n.srcF=xt(n.srcF,t)),n},Ly.materialize=function(e){e=e||Ty;var t=this;return e&Ey&&t.addF&&(t.add=wt(t.add,t.addF),t.addF=null),e&Oy&&t.remF&&(t.rem=wt(t.rem,t.remF),t.remF=null),e&Ay&&t.modF&&(t.mod=wt(t.mod,t.modF),t.modF=null),e&Ny&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},Ly.visit=function(e,t){var n,r,i=this,a=t;return e&Ny?(he(i.source,i.srcF,a),i):(e&Ey&&he(i.add,i.addF,a),e&Oy&&he(i.rem,i.remF,a),e&Ay&&he(i.mod,i.modF,a),e&zy&&(n=i.source)&&(r=i.add.length+i.mod.length,r===n.length||(r?he(n,kt(i,Ry),a):he(n,i.srcF,a))),i)};var qy=Q(Mt,_t);qy.fork=function(e){var t=new _t(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,function(e){return t.add.push(e)}),e&t.REM&&this.visit(t.REM,function(e){return t.rem.push(e)}),e&t.MOD&&this.visit(t.MOD,function(e){return t.mod.push(e)})),t},qy.changed=function(e){return this.changes&e},qy.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?Yv(e)?e.some(function(e){return n[e]}):n[e]:0},qy.filter=function(){k("MultiPulse does not support filtering.")},qy.materialize=function(){k("MultiPulse does not support materialization.")},qy.visit=function(e,t){var n=this,r=n.pulses,i=r.length,a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n};var $y={skip:!1,force:!1},jy=Dt.prototype;jy.size=function(){return this.nodes.length},jy.clear=function(){return this.nodes=[],this},jy.peek=function(){return this.nodes[0]},jy.push=function(e){var t=this.nodes;return t.push(e),Pt(t,0,t.length-1,this.cmp)},jy.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,Lt(t,0,this.cmp)):e=n,e},jy.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,Lt(t,0,this.cmp),n},jy.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,Lt(t,0,this.cmp)),e};var Fy=qt.prototype;Fy.stamp=function(){return this._clock},Fy.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},Fy.cleanThreshold=1e4,Fy.add=Oe,Fy.connect=Ae,Fy.rank=yt,Fy.rerank=bt,Fy.pulse=Nt,Fy.touch=Tt,Fy.update=zt,Fy.changeset=ke,Fy.ingest=dt,Fy.request=pt,Fy.events=Te,Fy.on=gt,Fy.run=St,Fy.runAsync=Ot,Fy.runAfter=At,Fy._enqueue=Ct,Fy._getPulse=Rt,Fy.error=$t("error"),Fy.warn=$t("warn"),Fy.info=$t("info"),Fy.debug=$t("debug"),Fy.logLevel=$t("level");var Iy=Q(jt,Se);Iy.run=function(e){if(e.stamp<=this.stamp)return e.StopPropagation;var t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t},Iy.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},Iy.transform=function(){};var Uy={},By={values:Yt({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Yt({name:"count",set:"cell.num"}),__count__:Yt({name:"count",set:"this.missing + this.valid"}),missing:Yt({name:"missing",set:"this.missing"}),valid:Yt({name:"valid",set:"this.valid"}),sum:Yt({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Yt({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:Yt({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:Yt({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:Yt({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:Yt({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:Yt({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:Yt({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:Yt({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Yt({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Yt({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Yt({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Yt({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Yt({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Yt({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Yt({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Yt({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Yt({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Wy=Object.keys(By);t.random=Math.random;var Gy=fn.prototype;Gy.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Gy.add=function(e){this._add.push(e)},Gy.rem=function(e){this._rem.push(e)},Gy.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(e=0;e<u;++e)f[a(i[e])]=1;for(e=0,t=0;e<o;++e)f[a(n=r[e])]?f[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},Gy.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;--r>=0;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},Gy.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Z(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Gy.argmin=function(e){return this.extent(e)[0]||{}},Gy.argmax=function(e){return this.extent(e)[1]||{}},Gy.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):+(1/0)},Gy.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-(1/0)},Gy.quartile=function(e){return this._get===e&&this._q||(this._q=tn(this.values(),e),this._get=e),this._q},Gy.q1=function(e){return this.quartile(e)[0]},Gy.q2=function(e){return this.quartile(e)[1]},Gy.q3=function(e){return this.quartile(e)[2]},Gy.ci=function(e){return this._get===e&&this._ci||(this._ci=en(this.values(),1e3,.05,e),this._get=e),this._ci},Gy.ci0=function(e){return this.ci(e)[0]},Gy.ci1=function(e){return this.ci(e)[1]},cn.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Wy},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Yy=Q(cn,jt);Yy.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),i.modifies(this._outputs),r._drop=e.drop!==!1,e.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},Yy.cross=function(){function e(e){var t,n,r,u;for(t in e)for(r=e[t].tuple,n=0;n<o;++n)a[n][u=r[i[n]]]=u}function t(e,u,s){var f,c,l=i[s],d=a[s++];for(f in d)u[l]=d[f],c=e?e+"|"+f:f,s<o?t(c,u,s):r[c]||n.cell(c,u)}var n=this,r=n.value,i=n._dnames,a=i.map(function(){return{}}),o=i.length;e(n._prev),e(r),t("",{},0)},Yy.init=function(e){function t(e){for(var t,r=W(w(e)),a=0,o=r.length;a<o;++a)i[t=r[a]]||(i[t]=1,n.push(t))}var n=this._inputs=[],r=this._outputs=[],i={};this._dims=W(e.groupby),this._dnames=this._dims.map(function(e){var n=x(e);return t(e),r.push(n),n}),this.cellkey=e.key?e.key:Bt(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,u,s,f,c,l=e.fields||[null],d=e.ops||["count"],h=e.as||[],p=l.length,g={};for(p!==d.length&&k("Unmatched number of fields and aggregate ops."),c=0;c<p;++c)a=l[c],o=d[c],null==a&&"count"!==o&&k("Null aggregate field specified."),s=x(a),f=Wt(o,s,h[c]),r.push(f),"count"!==o?(u=g[s],u||(t(a),u=g[s]=[],u.field=a,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(Gt(o,f))):this._counts.push(f);return this._measures=this._measures.map(function(e){return Xt(e,e.field)}),{}},Yy.cellkey=Bt(),Yy.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},Yy.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new fn),n},Yy.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?xe(t.tuple,o):ye(o)},Yy.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),t=a.agg,n=0,r=t.length;n<r;++n)t[n].add(t[n].get(e),e)},Yy.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),t=a.agg,n=0,r=t.length;n<r;++n)t[n].rem(t[n].get(e),e)},Yy.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(t=e.agg,n=0,r=t.length;n<r;++n)t[n].set(i);return i},Yy.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=e.add,c=e.rem,l=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||c.push(t.tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)t=o[r],(0===t.num&&s?c:l).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e},ln.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Hy=Q(ln,jt);Hy.transform=function(e,t){var n,r=this._bins(e),i=r.start,a=r.step,o=e.as||["bin0","bin1"],u=o[0],s=o[1];return e.modified()?(t=t.reflow(!0),n=t.SOURCE):n=t.modified(w(e.field))?t.ADD_MOD:t.ADD,t.visit(n,function(e){var t=r(e);e[u]=t,e[s]=null==t?null:i+a*(1+(t-i)/a)}),t.modifies(o)},Hy._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,i=Zt(e),a=i.start,o=i.stop,u=i.step;null!=(t=e.anchor)&&(n=t-(a+u*Math.floor((t-a)/u)),a+=n,o+=n);var s=function(e){var t=r(e);return null==t?null:(t=Math.max(a,Math.min(+t,o-u)),a+u*Math.floor((t-a)/u))};return s.start=a,s.stop=o,s.step=u,this.value=_(s,w(r),e.name||"bin_"+x(r))},hn.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};var Vy=Q(hn,jt);Vy.transform=function(e,t){var n=t.fork(t.ALL),r=dn(me,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),t.source&&t.source.root&&(this.value.root=t.source.root),n},Q(pn,Se),mn.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Xy=Q(mn,jt);Xy.transform=function(e,t){function n(t){return function(n){for(var r,i=vn(u(n),e.case,a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],f=n(function(e){i[e]=1+(i[e]||0)}),c=n(function(e){i[e]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,c)),this._finish(t,s)},Xy._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},Xy._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],f=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=ye({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(t)},yn.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};var Zy=Q(yn,jt);Zy.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1],u=!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");return u?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=bn(r,a,o,e.filter||Qv)):n.mod=r,n.source=this.value,n.modifies(i)};var Jy={kde:an,mixture:un,normal:rn,uniform:sn},Qy="distributions",Ky="function",eb="field",tb=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],nb={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:tb},{name:"weights",type:"number",array:!0}]};xn.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:tb.concat(nb)},{name:"as",type:"string",array:!0,default:["value","density"]}]};var rb=Q(xn,jt);rb.transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=_n(e.distribution,wn(t)),i=e.method||"pdf";"pdf"!==i&&"cdf"!==i&&k("Invalid density method: "+i),e.extent||r.data||k("Missing density extent parameter."),i=r[i];var o=e.as||["value","density"],u=e.extent||a.extent(r.data()),s=(u[1]-u[0])/(e.steps||100),f=a.range(u[0],u[1]+s/2,s).map(function(e){var t={};return t[o[0]]=e,t[o[1]]=i(e),ye(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n},kn.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};var ib=Q(kn,jt);ib.transform=function(e,t){var n,r=this.value,i=e.field,a=r[0],o=r[1],u=t.ADD;n=t.changed()||t.modified(i.fields)||e.modified("field"),n&&(u=t.SOURCE,a=+(1/0),o=-(1/0)),t.visit(u,function(e){var t=i(e);null!=t&&(t=+t,t<a&&(a=t),t>o&&(o=t))}),this.value=[a,o]};var ab=Q(Mn,Se);ab.connect=function(e){return this.targets().add(e),e.source=this},ab.add=function(e){this.value.add.push(e)},ab.rem=function(e){this.value.rem.push(e)},ab.mod=function(e){this.value.mod.push(e)},ab.init=function(e){this.value.init(e,e.NO_SOURCE)},ab.evaluate=function(){return this.value};var ob=Q(Sn,jt);ob.activate=function(e){this._targets[this._targets.active++]=e},ob.subflow=function(e,t,n,r){var i,a,o=this.value,u=o.hasOwnProperty(e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,i=n.dataflow,u=i.add(new Mn(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},ob.transform=function(e,t){function n(e){return i.subflow(e,o,t)}var r=t.dataflow,i=this,a=e.key,o=e.subflow,u=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=me(e),r=u.get(t);void 0!==r&&(u.delete(t),n(r).rem(e))}),t.visit(t.ADD,function(e){var t=a(e);u.set(me(e),t),n(t).add(e)}),s||t.modified(a.fields)?t.visit(t.MOD,function(e){var t=me(e),r=u.get(t),i=a(e);r===i?n(i).mod(e):(u.set(t,i),n(r).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(u.get(me(e))).mod(e)}),s&&t.visit(t.REFLOW,function(e){var t=me(e),r=u.get(t),i=a(e);r!==i&&(u.set(t,i),n(r).rem(e),n(i).add(e))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),t},Q(En,Se),An.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};var ub=Q(An,jt);ub.transform=function(e,t){function n(t){var n=me(t),r=f(t,e),a=i.get(n);r&&a?(i.delete(n),o.push(t)):r||a?c&&r&&!a&&s.push(t):(i.set(n,1),u.push(t))}var r=t.dataflow,i=this.value,a=t.fork(),o=a.add,u=a.rem,s=a.mod,f=e.expr,c=!0;return t.visit(t.REM,function(e){var t=me(e);i.has(t)?i.delete(t):u.push(e)}),t.visit(t.ADD,function(t){f(t,e)?o.push(t):i.set(me(t),1)}),t.visit(t.MOD,n),e.modified()&&(c=!1,t.visit(t.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},Rn.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]};var sb=Q(Rn,jt);sb.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=Cn(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,o,u,s=r.map(function(t){return t(e)}),f=s.reduce(function(e,t){return Math.max(e,t.length)},0),c=0;c<f;++c){for(o=be(e),t=0;t<a;++t)o[i[t]]=null==(u=s[t][c])?null:u;n.add.push(o)}}),this.value=n.source=n.add,n.modifies(i)},Tn.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};var fb=Q(Tn,jt);fb.transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(x),a=e.as||["key","value"],o=a[0],u=a[1],s=r.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,a=0;a<s;++a)t=be(e),t[o]=i[a],t[u]=r[a](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(a)},zn.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};var cb=Q(zn,jt);cb.transform=function(e,t){function n(t){t[i]=r(t,e)}var r=e.expr,i=e.as,a=e.modified(),o=e.initonly?t.ADD:a?t.SOURCE:t.modified(r.fields)?t.ADD_MOD:t.ADD;
return a&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,n)};var lb=Q(Nn,jt);lb.transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(u>0){for(n=[];--u>=0;)n.push(i=ye(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var db={value:"value",median:a.median,mean:a.mean,min:a.min,max:a.max},hb=[];Dn.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};var pb=Q(Dn,jt);pb.transform=function(e,t){var n,r,i,a,o,u,s,f,c,l,d=t.fork(t.ALL),h=Pn(e),p=Ln(e),g=x(e.field),m=x(e.key),v=(e.groupby||[]).map(x),y=qn(t.source,e.groupby,e.key,e.keyvals),b=[],_=this.value,w=y.domain.length;for(o=0,f=y.length;o<f;++o)for(n=y[o],i=n.values,r=NaN,s=0;s<w;++s)if(null==n[s]){for(a=y.domain[s],l={_impute:!0},u=0,c=i.length;u<c;++u)l[v[u]]=i[u];l[m]=a,l[g]=isNaN(r)?r=h(n,p):r,b.push(ye(l))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),_.length&&(d.rem=d.materialize(d.REM).rem.concat(_)),this.value=b,d},$n.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Wy},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var gb=Q($n,cn);gb.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(n=r.value=r.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),r.changes(),t.visit(t.SOURCE,function(e){X(e,n[r.cellkey(e)].tuple)}),t.reflow(i).modifies(this._outputs)},gb.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},Q(jn,Se),In.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};var mb=Q(In,jt);mb.transform=function(e,t){var n,r,i,a=t,o=e.as,u=e.fields,s=e.index,f=e.values,c=null==e.default?null:e.default,l=e.modified(),d=l?t.SOURCE:t.ADD,h=u.length;return f?(r=f.length,h>1&&!o&&k('Multi-field lookup requires explicit "as" parameter.'),o&&o.length!==h*r&&k('The "as" parameter has too few output field names.'),o=o||f.map(x),n=function(e){for(var t,n,i=0,a=0;i<h;++i)if(n=s.get(u[i](e)),null==n)for(t=0;t<r;++t,++a)e[o[a]]=c;else for(t=0;t<r;++t,++a)e[o[a]]=f[t](n)}):(o||k("Missing output field names."),n=function(e){for(var t,n=0;n<h;++n)t=s.get(u[n](e)),e[o[n]]=null==t?c:t}),l?a=t.reflow(!0):(i=u.some(function(e){return t.modified(e.fields)}),d|=i?t.MOD:0),t.visit(d,n),a.modifies(o)},Q(Un,Se),Q(Wn,Se),Q(Yn,jt),Yn.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},Hn.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Wy,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var vb=Q(Hn,cn);vb._transform=vb.transform,vb.transform=function(e,t){return this._transform(Vn(e,t),t)};var yb=Q(Jn,Sn);yb.transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(w(i)))&&k("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.mod(e)}):a.mod(e)}),t.visit(t.ADD,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.add(ye(e))}):a.add(e)}),t.visit(t.REM,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.rem(e)}):a.rem(e)}),t},Qn.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};var bb=Q(Qn,jt);bb.transform=function(e,t){var n,r,i=e.fields,a=Cn(e.fields,e.as||[]),o=i?function(e,t){return Kn(e,t,i,a)}:_e;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=me(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=o(e,ye({}));r[me(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(o(e,r[me(e)]))}),n};var _b=Q(er,jt);_b.transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var xb=Q(tr,jt);xb.transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=me(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=be(e);r[me(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(_e(e,r[me(e)]))})),n},nr.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};var wb=Q(nr,jt);wb.transform=function(e,n){function r(e){var n,r;u.length<o?u.push(e):(r=~~((s+1)*t.random()),r<u.length&&r>=f&&(n=u[r],c[me(n)]&&i.rem.push(n),u[r]=e)),++s}var i=n.fork(n.NO_SOURCE),a=e.modified("size"),o=e.size,u=this.value,s=this.count,f=0,c=u.reduce(function(e,t){return e[me(t)]=1,e},{});if(n.rem.length&&(n.visit(n.REM,function(e){var t=me(e);c[t]&&(c[t]=-1,i.rem.push(e)),--s}),u=u.filter(function(e){return c[me(e)]!==-1})),(n.rem.length||a)&&u.length<o&&n.source&&(f=s=u.length,n.visit(n.SOURCE,function(e){c[me(e)]||r(e)}),f=-1),a&&u.length>o){for(var l=0,d=u.length-o;l<d;++l)c[me(u[l])]=-1,i.rem.push(u[l]);u=u.slice(d)}return n.mod.length&&n.visit(n.MOD,function(e){c[me(e)]&&i.mod.push(e)}),n.add.length&&n.visit(n.ADD,r),(n.add.length||f<0)&&(i.add=u.filter(function(e){return!c[me(e)]})),this.count=s,this.value=i.source=u,i},rr.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]};var kb=Q(rr,jt);kb.transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=a.range(e.start,e.stop,e.step||1).map(ye),n.add=t.add.concat(this.value),n}};var Mb=Q(ir,jt);Mb.transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var Sb=Q(ar,jt);Sb.transform=function(e,t){function n(e){a.set(i(e),e)}var r=t.dataflow,i=e.field,a=this.value,o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){a.delete(i(e))}),t.visit(t.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),t.fork()};var Eb=Q(or,jt);Eb.transform=function(e,t){var n=!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields);n&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var Ob={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=Ob.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){t=+t,t>0||k("ntile num must be greater than zero.");var n=Ob.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return t=+t,t>0||k("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},Ab=Object.keys(Ob),Cb=sr.prototype;Cb.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},Cb.update=function(e,t){var n,r=this,i=r.cell,a=r.windows,o=e.data,u=a&&a.length;if(i){for(n=e.p0;n<e.i0;++n)i.rem(o[n]);for(n=e.p1;n<e.i1;++n)i.add(o[n]);i.set(t)}for(n=0;n<u;++n)a[n].update(e,t)},cr.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ab.concat(Wy)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Rb=Q(cr,jt);Rb.transform=function(e,t){function n(e){return a.group(s(e))}var r,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,o&&!u||(o=a.state=new sr(e));var s=Bt(e.groupby);for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){n(e).add(e)})):(t.visit(t.REM,function(e){n(e).remove(e)}),t.visit(t.ADD,function(e){n(e).add(e)})),r=0,i=a._mlen;r<i;++r)lr(a._mods[r],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},Rb.group=function(e){var t=this,n=t.value[e];return n||(n=t.value[e]=dn(me),n.stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var Tb=Object.freeze({aggregate:cn,bin:ln,collect:hn,compare:pn,countpattern:mn,cross:yn,density:xn,extent:kn,facet:Sn,field:En,filter:An,flatten:Rn,fold:Tn,formula:zn,generate:Nn,impute:Dn,joinaggregate:$n,key:jn,lookup:In,multiextent:Un,multivalues:Wn,params:Yn,pivot:Hn,prefacet:Jn,project:Qn,proxy:er,relay:tr,sample:nr,sequence:rr,sieve:ir,subflow:Mn,tupleindex:ar,values:or,window:cr}),zb="top",Nb="left",Db="right",Pb="bottom",Lb="top-left",qb="top-right",$b="bottom-left",jb="bottom-right",Fb="start",Ib="end",Ub="group",Bb="axis",Wb="title",Gb="frame",Yb="scope",Hb="legend",Vb="row-header",Xb="row-footer",Zb="row-title",Jb="column-header",Qb="column-footer",Kb="column-title",e_="padding",t_="symbol",n_="fit",r_="fit-x",i_="fit-y",a_="pad",o_="none",u_="all",s_="each",f_="flush",c_="column",l_="row",d_=pr.prototype;d_.clone=function(){return new pr(this)},d_.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},d_.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},d_.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},d_.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},d_.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},d_.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},d_.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},d_.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,u=this.x1,s=this.x2,f=this.y1,c=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*c+a,i*u+r*c+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*c+a,i*s+r*c+o)},d_.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},d_.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},d_.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},d_.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},d_.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},d_.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},d_.width=function(){return this.x2-this.x1},d_.height=function(){return this.y2-this.y1};var h_=0;Q(vr,mr);var p_;["canvas","canvas-prebuilt"].some(function(e){try{p_=n(29)(e),"function"!=typeof p_&&(p_=null)}catch(e){p_=null}return p_});var g_=Mr.prototype;g_.pending=function(){return this._pending},g_.sanitizeURL=function(e){var t=this;return Sr(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return Er(t),e}).catch(function(){return Er(t),null})},g_.loadImage=function(e){var t=this,n=kr();return Sr(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){Er(t),i.loaded=!0},i.onerror=function(){Er(t),i.loaded=!1},i.src=r,i}).catch(function(e){return Er(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}})},g_.ready=function(){var e=this;return new Promise(function(t){function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}n(!1)})};var m_,v_={basis:{curve:o.curveBasis},"basis-closed":{curve:o.curveBasisClosed},"basis-open":{curve:o.curveBasisOpen},bundle:{curve:o.curveBundle,tension:"beta",value:.85},cardinal:{curve:o.curveCardinal,tension:"tension",value:0},"cardinal-open":{curve:o.curveCardinalOpen,tension:"tension",value:0},"cardinal-closed":{curve:o.curveCardinalClosed,tension:"tension",value:0},"catmull-rom":{curve:o.curveCatmullRom,tension:"alpha",value:.5},"catmull-rom-closed":{curve:o.curveCatmullRomClosed,tension:"alpha",value:.5},"catmull-rom-open":{curve:o.curveCatmullRomOpen,tension:"alpha",value:.5},linear:{curve:o.curveLinear},"linear-closed":{curve:o.curveLinearClosed},monotone:{horizontal:o.curveMonotoneY,vertical:o.curveMonotoneX},natural:{curve:o.curveNatural},step:{curve:o.curveStep},"step-after":{curve:o.curveStepAfter},"step-before":{curve:o.curveStepBefore}},y_={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},b_=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],__={},x_={},w_=[].join,k_=["l",0,0,0,0,0,0,0],M_=2*Math.PI,S_=Math.sqrt(3)/2,E_={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,M_)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=S_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=S_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=S_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=S_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}},O_={},A_=Math.PI,C_=o.arc().startAngle(Zr).endAngle(Jr).padAngle(Qr).innerRadius(Kr).outerRadius(ei).cornerRadius(ti),R_=o.area().x(Br).y1(Wr).y0(Xr).defined(ni),T_=o.area().y(Wr).x1(Br).x0(Vr).defined(ni),z_=o.line().x(Br).y(Wr).defined(ni),N_=Ir().x(Br).y(Wr).width(Gr).height(Hr).cornerRadius(ti),D_=o.symbol().type(ii).size(ri),P_=Ur().x(Br).y(Wr).defined(ni).size(Yr),L_=2*Math.PI,q_=L_/4,$_=L_-1e-8;hi.beginPath=pi,hi.closePath=pi,hi.moveTo=gi,hi.lineTo=gi,hi.rect=function(e,t,n,r){gi(e,t),gi(e+n,t+r)},hi.quadraticCurveTo=function(e,t,n,r){gi(e,t),gi(n,r)},hi.bezierCurveTo=function(e,t,n,r,i,a){gi(e,t),gi(n,r),gi(i,a)},hi.arc=function(e,t,n,r,i,a){function o(e){f=n*Math.cos(e),c=n*Math.sin(e),f<l&&(l=f),f>d&&(d=f),c<h&&(h=c),c>p&&(p=c)}if(Math.abs(i-r)>$_)return gi(e-n,t-n),void gi(e+n,t+n);var u,s,f,c,l=1/0,d=-(1/0),h=1/0,p=-(1/0);if(o(r),o(i),i!==r)if(r%=L_,r<0&&(r+=L_),i%=L_,i<0&&(i+=L_),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=L_,u=r-r%q_,s=0;s<4&&u>i;++s,u-=q_)o(u);else for(u=r-r%q_+q_,s=0;s<4&&u<i;++s,u+=q_)o(u);gi(e+l,t+h),gi(e+d,t+p)};var j_,F_,I_=[],U_=function(){return!0},B_=zi("arc",ai),W_=Li("area",oi,Ni),G_=1,Y_=.5,H_=Ai(Bi),V_={type:"group",tag:"g",nested:!1,attr:ji,bound:Ui,draw:Wi,pick:Gi,background:Fi,foreground:Ii},X_={type:"image",tag:"image",nested:!1,attr:Zi,bound:Ji,draw:Qi,pick:Oi(),get:Hi,xOffset:Vi,yOffset:Xi},Z_=Li("line",ui,Di),J_={type:"path",tag:"path",nested:!1,attr:Ki,bound:ta,draw:Mi(ea),pick:Ci(ea)},Q_={type:"rect",tag:"path",nested:!1,attr:na,bound:ra,draw:Mi(ia),pick:Ci(ia)},K_={type:"rule",tag:"line",nested:!1,attr:aa,bound:oa,draw:sa,pick:Oi(fa)},ex=zi("shape",fi),tx=zi("symbol",ci),nx={height:pa,measureWidth:da,estimateWidth:ca,width:ca,canvas:ga};ga(!0);var rx={left:"start",center:"middle",right:"end"},ix=new pr,ax={type:"text",tag:"text",nested:!1,attr:_a,bound:xa,draw:wa,pick:Oi(ka)},ox=Li("trail",li,Pi),ux={arc:B_,area:W_,group:V_,image:X_,line:Z_,path:J_,rect:Q_,rule:K_,shape:ex,symbol:tx,text:ax,trail:ox},sx={mark:null},fx=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],cx=Ca.prototype;cx.toJSON=function(e){return Ea(this.root,e||0)},cx.mark=function(e,t,n){t=t||this.root.items[0];var r=Ra(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var lx=$a.prototype;lx.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},lx.element=function(){return this._el},lx.canvas=function(){return this._el&&this._el.firstChild},lx.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},lx.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},lx.on=function(){},lx.off=function(){},lx._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},lx.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},lx.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},lx.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then(function(t){var n=new MouseEvent(e.type,e),r=Ta(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)}).catch(function(){})},lx.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=qa(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},lx.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var dx=Fa.prototype;dx.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},dx.element=function(){return this._el},dx.canvas=function(){return this._el&&this._el.firstChild},dx.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},dx.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dx.dirty=function(){},dx.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},dx._render=function(){},dx.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},dx._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return r},dx.sanitizeURL=function(e){return this._load("sanitizeURL",e)},dx.loadImage=function(e){return this._load("loadImage",e)};var hx=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],px="mousemove",gx="mouseout",mx="click",vx=Q(Ia,$a);vx.initialize=function(e,t,n){var r=this._canvas=e&&za(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){vx[e]?vx[e].call(i,t):i.fire(e,t)})})}return $a.prototype.initialize.call(this,e,t,n)},vx.canvas=function(){return this._canvas},vx.context=function(){return this._canvas.getContext("2d")},vx.events=hx,vx.DOMMouseScroll=function(e){this.fire("mousewheel",e)},vx.mousemove=Ua("mousemove","mouseover","mouseout"),vx.dragover=Ua("dragover","dragenter","dragleave"),vx.mouseout=Ba("mouseout"),vx.dragleave=Ba("dragleave"),vx.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},vx.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},vx.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},vx.touchmove=function(e){this.fire("touchmove",e,!0)},vx.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},vx.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,e===mx&&a&&a.href?this.handleHref(t,a,a.href):e!==px&&e!==gx||this.handleTooltip(t,a,e!==gx),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},vx.on=function(e,t){var n=this.eventName(e),r=this._handlers,i=this._handlerIndex(r[n],e,t);return i<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},vx.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},vx.pickEvent=function(e){var t=La(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},vx.pick=function(e,t,n,r,i){var a=this.context(),o=ux[e.marktype];return o.pick.call(this,a,e,t,n,r,i)};var yx=Ga(),bx=Q(Ha,Fa),_x=Fa.prototype,xx=new pr;bx.initialize=function(e,t,n,r,i){return this._canvas=wr(1,1),e&&(Da(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),_x.initialize.call(this,e,t,n,r,i)},bx.resize=function(e,t,n,r){return _x.resize.call(this,e,t,n,r),Ya(this._canvas,this._width,this._height,this._origin,this._scale),this._redraw=!0,this},bx.canvas=function(){return this._canvas},bx.context=function(){return this._canvas?this._canvas.getContext("2d"):null},bx.dirty=function(e){var t=Xa(e.bounds,e.mark.group);this._dirty.union(t)},bx._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=Va(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},bx.draw=function(e,t,n){var r=ux[t.marktype];t.clip&&Wa(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},bx.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var wx=Q(Za,$a);wx.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(mx,this._hrefHandler),r.removeEventListener(px,this._tooltipHandler),r.removeEventListener(gx,this._tooltipHandler)),this._svg=r=e&&za(e,"svg"),r&&(r.addEventListener(mx,this._hrefHandler),r.addEventListener(px,this._tooltipHandler),r.addEventListener(gx,this._tooltipHandler)),$a.prototype.initialize.call(this,e,t,n)},wx.canvas=function(){return this._svg},wx.on=function(e,t){var n=this.eventName(e),r=this._handlers,i=this._handlerIndex(r[n],e,t);if(i<0){var a={type:e,handler:t,listener:Ja(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},wx.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var kx={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Mx={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Sx=Object.keys(Mx),Ex=kx.xmlns,Ox=Q(eo,Fa),Ax=Fa.prototype;Ox.initialize=function(e,t,n,r){return e&&(this._svg=Na(e,0,"svg",Ex),this._svg.setAttribute("class","marks"),Da(e,1),this._root=Na(this._svg,0,"g",Ex),Da(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Ax.initialize.call(this,e,t,n,r)},Ox.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Ax.background.apply(this,arguments)},Ox.resize=function(e,t,n,r){return Ax.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Ox.canvas=function(){return this._svg},Ox.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in kx)e[t]=kx[t];var n=this._bgcolor?Qa("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+Ka("rect"):"";return Qa("svg",e)+n+this._svg.innerHTML+Ka("svg")},Ox._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),Da(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Ox.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=Na(t,0,"defs",Ex)),to(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=Na(t,0,"defs",Ex)),no(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):Da(r,i))},Ox._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},Ox.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},Ox.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},Ox._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)t=e[a],n=t.mark,n.marktype!==r&&(r=n.marktype,i=ux[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,ro(t,s),n.items.forEach(function(e){e.dirty=s})),n.zdirty||(t.exit?(i.nested&&n.items.length?(u=n.items[0],u._svg&&this._update(i,u._svg,u)):t._svg&&(u=t._svg.parentNode,u&&u.removeChild(t._svg)),t._svg=null):(t=i.nested?n.items[0]:t,t._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,ro(t,s)),t._update=s)));return!this._dirtyAll},Ox.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=ao(e,i,c,u.tag,o);t&&(a._update(u,n,e),f&&io(a,n,e)),c=n,++l}if(!this.isDirty(t))return t._svg;var i,a=this,o=this._svg,u=ux[t.marktype],s=t.interactive===!1?"none":null,f="g"===u.tag,c=null,l=0;return i=ao(t,e,n,"g",o),i.setAttribute("class",Pa(t)),f||i.style.setProperty("pointer-events",s),t.clip?i.setAttribute("clip-path",$i(a,t,t.group)):i.removeAttribute("clip-path"),u.nested?t.items.length&&r(t.items[0]):wi(t,r),Da(i,l),i};var Cx=null,Rx=null,Tx={group:function(e,t,n){Rx=t.__values__,Cx=t.childNodes[1],e.foreground(uo,n,this),Cx=t.childNodes[0],e.background(uo,n,this);var r=n.mark.interactive===!1?"none":null;r!==Rx.events&&(Cx.style.setProperty("pointer-events",r),Rx.events=r)},text:function(e,t,n){var r=ma(n);r!==Rx.text&&(t.textContent=r,Rx.text=r),r=ya(n),r!==Rx.font&&(t.style.setProperty("font",r),Rx.font=r)}};Ox._update=function(e,t,n){Cx=t,Rx=t.__values__,e.attr(uo,n,this);var r=Tx[e.type];r&&r.call(this,e,t,n),this.style(Cx,n)},Ox.style=function(e,t){if(null!=t){var n,r,i,a,o;for(n=0,r=Sx.length;n<r;++n)i=Sx[n],o=t[i],o!==Rx[i]&&(a=Mx[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+so()+"#"+o.id+")"),e.style.setProperty(a,o+"")),Rx[i]=o)}};var zx=Q(fo,Fa),Nx=Fa.prototype;zx.resize=function(e,t,n,r){Nx.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in kx)o[u]=kx[u];a.head=Qa("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),s?a.bg=Qa("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+Ka("rect"):a.bg="",a.root=Qa("g",{transform:"translate("+i+")"}),a.foot=Ka("g")+Ka("svg"),this},zx.background=function(){var e=Nx.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},zx.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},zx._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},zx.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(n=i.gradient[t],r=n.stops,a+=Qa("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=Qa("stop",{offset:r[e].offset,"stop-color":r[e].color})+Ka("stop");a+=Ka("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=Qa("clipPath",{id:t}),a+=n.path?Qa("path",{d:n.path})+Ka("path"):Qa("rect",{x:0,y:0,width:n.width,height:n.height})+Ka("rect"),a+=Ka("clipPath");return a.length>0?Qa("defs")+a+Ka("defs"):""};var Dx;zx.attributes=function(e,t){return Dx={},e(co,t,this),Dx},zx.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then(function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e})}return null},zx.mark=function(e){function t(t){var s=r.href(t);s&&(u+=Qa("a",s)),n="g"!==a?lo(t,e,a,o):null,u+=Qa(a,r.attributes(i.attr,t),n),"text"===a?u+=ho(ma(t)):"g"===a&&(u+=Qa("path",r.attributes(i.background,t),lo(t,e,"bgrect",o))+Ka("path"),u+=Qa("g",r.attributes(i.foreground,t))+r.markGroup(t)+Ka("g")),u+=Ka(a),s&&(u+=Ka("a"))}var n,r=this,i=ux[e.marktype],a=i.tag,o=this._defs,u="";return"g"!==a&&e.interactive===!1&&(n='style="pointer-events: none;"'),u+=Qa("g",{class:Pa(e),"clip-path":e.clip?$i(r,e,e.group):null},n),i.nested?e.items&&e.items.length&&t(e.items[0]):wi(e,t),u+Ka("g")},zx.markGroup=function(e){var t=this,n="";return wi(e,function(e){n+=t.mark(e)}),n};var Px="canvas",Lx="png",qx="svg",$x="none",jx={Canvas:Px,PNG:Lx,SVG:qx,None:$x},Fx={};Fx[Px]=Fx[Lx]={renderer:Ha,headless:Ha,handler:Ia},Fx[qx]={renderer:eo,headless:fo,handler:Za},Fx[$x]={};var Ix=new pr,Ux=1e-9,Bx=Q(bo,jt);Bx.transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=ux[a],u=o.bound,s=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),s=_o(i,u),i.items.forEach(function(e){e.bounds.clear().union(s)})):a===Ub||e.modified()?(t.visit(t.MOD,function(e){r.dirty(e)}),s.clear(),i.items.forEach(function(e){
s.union(_o(e,u))}),i.role===Hb&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,function(e){s.union(_o(e,u))}),t.visit(t.MOD,function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(_o(e,u))}),n&&(s.clear(),i.items.forEach(function(e){s.union(e.bounds)}))),go(i),t.modifies("bounds")};var Wx=":vega_identifier:";xo.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};var Gx=Q(xo,jt);Gx.transform=function(e,t){var n=wo(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++r)}),n.set(this.value=r),t};var Yx=Q(ko,jt);Yx.transform=function(e,t){var n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Mo(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r=n.marktype===Ub?vr:mr;return t.visit(t.ADD,function(e){r.call(e,n)}),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t};var Hx=Q(So,jt),Vx={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&Eo(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};Hx.transform=function(e,t){var n=Vx[e.method]||Vx.parity,r=t.materialize(t.SOURCE).source;if(r){e.sort&&(r=r.slice().sort(e.sort)),"greedy"===e.method&&(r=r.filter(Ao)),r.forEach(function(e){e.opacity=1});var i=r;if(i.length>=3&&Oo(i)){t=t.reflow(e.modified()).modifies("opacity");do i=n(i);while(i.length>=3&&Oo(i));i.length<3&&!T(r).opacity&&(i.length>1&&(T(i).opacity=0),T(r).opacity=1)}if(e.boundScale){var a=Co(e.boundScale,e.boundOrient,e.boundTolerance);r.forEach(function(e){a(e)||(e.opacity=0)})}return t}};var Xx=Q(Ro,jt);Xx.transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var Zx=.5,Jx=new pr,Qx=Q(Uo,jt);Qx.transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&jo(n,t,e.layout),Bo(n,t,e)}),e.modified()&&t.reflow(),t};var Kx=Object.freeze({bound:bo,identifier:xo,mark:ko,overlap:So,render:Ro,viewlayout:Uo}),ew="log",tw="pow",nw="utc",rw="sqrt",iw="band",aw="time",ow="point",uw="linear",sw="ordinal",fw="quantile",cw="quantize",lw="threshold",dw="bin-linear",hw="bin-ordinal",pw="sequential",gw=Array.prototype.map,mw=Array.prototype.slice,vw={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:iu,point:ou,sequential:cu,"bin-linear":su,"bin-ordinal":fu};for(var yw in vw)du(yw,vw[yw]);var bw=hu("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),_w=hu("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),xw=hu("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ww=hu("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),kw=hu("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Mw=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(hu),Sw={blueorange:Mw},Ew={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:bw,category20b:_w,category20c:xw,tableau10:ww,tableau20:kw,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,blueorange:c.interpolateRgbBasis(T(Mw))};pu("blues","Blues"),pu("greens","Greens"),pu("greys","Greys"),pu("purples","Purples"),pu("reds","Reds"),pu("oranges","Oranges"),pu("brownbluegreen","BrBG"),pu("purplegreen","PRGn"),pu("pinkyellowgreen","PiYG"),pu("purpleorange","PuOr"),pu("redblue","RdBu"),pu("redgrey","RdGy"),pu("redyellowblue","RdYlBu"),pu("redyellowgreen","RdYlGn"),pu("spectral","Spectral"),pu("bluegreen","BuGn"),pu("bluepurple","BuPu"),pu("greenblue","GnBu"),pu("orangered","OrRd"),pu("purplebluegreen","PuBuGn"),pu("purpleblue","PuBu"),pu("purplered","PuRd"),pu("redpurple","RdPu"),pu("yellowgreenblue","YlGnBu"),pu("yellowgreen","YlGn"),pu("yelloworangebrown","YlOrBr"),pu("yelloworangered","YlOrRd");var Ow={millisecond:l.timeMillisecond,second:l.timeSecond,minute:l.timeMinute,hour:l.timeHour,day:l.timeDay,week:l.timeWeek,month:l.timeMonth,year:l.timeYear},Aw={millisecond:l.utcMillisecond,second:l.utcSecond,minute:l.utcMinute,hour:l.utcHour,day:l.utcDay,week:l.utcWeek,month:l.utcMonth,year:l.utcYear},Cw=Q(Tu,jt);Cw.transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=null==e.count?e.values?e.values.length:10:ku(i,e.count),o=e.format||Eu(i,a,e.formatSpecifier),u=e.values?Mu(i,e.values,a):Su(i,a);return r&&(n.rem=r),r=u.map(function(e,t){return ye({index:t/(u.length-1),value:e,label:o(e)})}),e.extra&&r.push(ye({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n};var Rw=Q(zu,jt);Rw.transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Nu,a=e.key||me,o=this.value;return Yv(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(a))&&k("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=J().test(Du),o.lookup=function(e){return o.get(a(e))}),t.visit(t.ADD,function(e){var t=a(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=a(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,function(e){var t=a(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r};var Tw=Q(Pu,jt);Tw.transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,i=t.encode;if(Yv(i)){if(!n.changed()&&!i.every(function(e){return r[e]}))return t.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||Kv,u=r.enter||Kv,s=r.exit||Kv,f=(i&&!a?r[i]:o)||Kv;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(t){u(t,e),o(t,e),f!==Kv&&f!==o&&f(t,e)}),n.modifies(u.output),n.modifies(o.output),f!==Kv&&f!==o&&n.modifies(f.output)),t.changed(t.REM)&&s!==Kv&&(t.visit(t.REM,function(t){s(t,e)}),n.modifies(s.output)),a||f!==Kv){var c=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(c,function(t){var r=u(t,e);(f(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(u.output)):t.visit(c,function(t){f(t,e)&&n.mod.push(t)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation};var zw="symbol",Nw="discrete",Dw="gradient",Pw={};Pw[fw]=$u,Pw[cw]=qu,Pw[lw]=ju,Pw[dw]=Pw[hw]=Fu;var Lw=Q(Hu,jt);Lw.transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=this.value,s=e.type||zw,f=e.scale,c=null==e.count?5:ku(f,e.count),l=e.format||Eu(f,c,e.formatSpecifier),d=e.values||Lu(f,c,s);return l=Iu(f,l,s),u&&(o.rem=u),s===zw?(G(i=e.size)?(e.values||0!==f(d[0])||(d=d.slice(1)),a=d.reduce(function(t,n){return Math.max(t,i(n,e))},0)):i=H(a=i||8),u=d.map(function(t,n){return ye({index:n,label:l(t,n,d),value:t,offset:a,size:i(t,e)})})):s===Dw?(n=e.values?f.domain():d,r=vu(f,n[0],T(n)),u=d.map(function(e,t){return ye({index:t,label:l(e,t,d),value:e,perc:r(e)})})):(i=d.length-1,r=Yu(f),u=d.map(function(e,t){return ye({index:t,label:l(e,t,d),value:e,perc:t?r(e):0,perc2:t===i?1:r(d[t+1])})})),o.source=u,o.add=u,this.value=u,o};var qw=J({line:Ku,"line-radial":es,arc:ts,"arc-radial":ns,curve:rs,"curve-radial":is,"orthogonal-horizontal":as,"orthogonal-vertical":os,"orthogonal-radial":us,"diagonal-horizontal":ss,"diagonal-vertical":fs,"diagonal-radial":cs});Qu.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]};var $w=Q(Qu,jt);$w.transform=function(e,t){var n=e.sourceX||Vu,r=e.sourceY||Xu,i=e.targetX||Zu,a=e.targetY||Ju,o=e.as||"path",u=e.orient||"vertical",s=e.shape||"line",f=qw.get(s+"-"+u)||qw.get(s);return f||k("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[o]=f(n(e),r(e),i(e),a(e))}),t.reflow(e.modified()).modifies(o)},ls.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};var jw=Q(ls,jt);jw.transform=function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],u=o[0],s=o[1],f=e.field||Jv,c=e.startAngle||0,l=null!=e.endAngle?e.endAngle:2*Math.PI,d=t.source,h=d.map(f),p=h.length,g=c,m=(l-c)/a.sum(h),v=a.range(p);for(e.sort&&v.sort(function(e,t){return h[e]-h[t]}),n=0;n<p;++n)i=h[v[n]],r=d[v[n]],r[u]=g,r[s]=g+=i*m;return this.value=h,t.reflow(e.modified()).modifies(o)};var Fw=5,Iw=le([uw,tw,rw]),Uw=le([uw,ew,tw,rw,aw,nw]),Bw=le(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]),Ww=Q(ds,jt);Ww.transform=function(e,t){var n,r=t.dataflow,i=this.value;i&&!e.modified("type")||(this.value=i=du((e.type||uw).toLowerCase())());for(n in e)if(!Bw[n]){if("padding"===n&&Uw[i.type])continue;G(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return ms(i,e,hs(i,e,r)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var Gw=Q(ws,jt);Gw.transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};var Yw="center",Hw="normalize";ks.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]};var fy=Q(ks,jt);fy.transform=function(e,t){var n,r,i,a,o=e.as||["y0","y1"],u=o[0],s=o[1],f=e.field||Jv,c=e.offset===Yw?Ms:e.offset===Hw?Ss:Es;for(n=Os(t.source,e.groupby,e.sort,f),r=0,i=n.length,a=n.max;r<i;++r)c(n[r],a,f,u,s);return t.reflow(e.modified()).modifies(o)};var Vw=Object.freeze({axisticks:Tu,datajoin:zu,encode:Pu,legendentries:Hu,linkpath:Qu,pie:ls,scale:ds,sortitems:ws,stack:ks,validTicks:Mu}),Xw=Array.prototype,Zw=Xw.slice,Jw=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Qw=["size","smooth"],Kw=["x","y","size","cellSize","bandwidth"];Bs.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]};var ek=Q(Bs,jt);ek.transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=e.count||10;return e.values?(n=qs(),r=Qw,i=e.values):(n=Us(),r=Kw,i=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?o:Ws(o))),r.forEach(function(t){null!=e[t]&&n[t](e[t])}),this.value&&(a.rem=this.value),i=i&&i.length?n(i).map(ye):[],this.value=a.source=a.add=i,a};var tk="Feature",nk="FeatureCollection",rk="MultiPoint";Gs.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};var ik=Q(Gs,jt);ik.transform=function(e,t){var n,r=this._features,i=this._points,a=e.fields,o=a&&a[0],u=a&&a[1],s=e.geojson,f=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(w(s))||o&&t.modified(w(o))||u&&t.modified(w(u)),this.value&&!n||(f=t.SOURCE,this._features=r=[],this._points=i=[]),s&&t.visit(f,function(e){r.push(s(e))}),o&&u&&(t.visit(f,function(e){var t=o(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])}),r=r.concat({type:tk,geometry:{type:rk,coordinates:i}})),this.value={type:nk,features:r}};var ak=h.geoPath(),ok=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],uk={albers:h.geoAlbers,albersusa:h.geoAlbersUsa,azimuthalequalarea:h.geoAzimuthalEqualArea,azimuthalequidistant:h.geoAzimuthalEquidistant,conicconformal:h.geoConicConformal,conicequalarea:h.geoConicEqualArea,conicequidistant:h.geoConicEquidistant,equirectangular:h.geoEquirectangular,gnomonic:h.geoGnomonic,identity:h.geoIdentity,mercator:h.geoMercator,orthographic:h.geoOrthographic,stereographic:h.geoStereographic,transversemercator:h.geoTransverseMercator};for(var sk in uk)Hs(sk,uk[sk]);Xs.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};var fk=Q(Xs,jt);fk.transform=function(e,t){function n(e){e[o]=i(a(e))}var r=t.fork(t.ALL),i=this.value,a=e.field||Xv,o=e.as||"path",u=r.SOURCE;!i||e.modified()?(this.value=i=Vs(e.projection),r.materialize().reflow()):u=a===Xv||t.modified(a.fields)?r.ADD_MOD:r.ADD;var s=Zs(i,e.pointRadius);return r.visit(u,n),i.pointRadius(s),r.modifies(o)},Js.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};var ck=Q(Js,jt);ck.transform=function(e,t){function n(e){var t=i([a(e),o(e)]);t?(e[s]=t[0],e[f]=t[1]):(e[s]=void 0,e[f]=void 0)}var r,i=e.projection,a=e.fields[0],o=e.fields[1],u=e.as||["x","y"],s=u[0],f=u[1];return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(r=t.modified(a.fields)||t.modified(o.fields),t.visit(r?t.ADD_MOD:t.ADD,n)),t.modifies(u)},Qs.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};var lk=Q(Qs,jt);lk.transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||A("datum"),a=e.as||"shape",o=n.ADD_MOD;return r&&!e.modified()||(this.value=r=Ks(Vs(e.projection),i,e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,function(e){e[a]=r}),n.modifies(a)},ef.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};var dk=Q(ef,jt);dk.transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)G(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(xe(r[0],n)):t.add.push(ye(n)),r[0]=n,t};var hk=Q(tf,jt);hk.transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=rf(e.type),ok.forEach(function(t){null!=e[t]&&af(n,t,e[t])})):ok.forEach(function(t){e.modified(t)&&af(n,t,e[t])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&nf(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var pk=Object.freeze({contour:Bs,geojson:Gs,geopath:Xs,geopoint:Js,geoshape:Qs,graticule:ef,projection:tf}),gk={center:p.forceCenter,collide:p.forceCollide,nbody:p.forceManyBody,link:p.forceLink,x:p.forceX,y:p.forceY},mk="forces",vk=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],yk=["static","iterations"],bk=["x","y","vx","vy"];uf.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:bk}]};var _k=Q(uf,jt);_k.transform=function(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(vk),a=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&cf(n,e,0,t)):(this.value=n=ff(t.source,e),n.on("tick",sf(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(yk)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation;return this.finish(e,t)},_k.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if(n=i[a],n.name===mk&&"link"===n.op._argval.force)for(var u,s=n.op._argops,f=0,c=s.length;f<c;++f)if("links"===s[f].name&&(u=s[f].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(bk)};var xk=Object.freeze({force:uf});gf.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var wk=Q(gf,jt);wk.transform=function(e,t){t.source||k("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each(function(e){e.children&&ge(e.data)&&i.rem.push(e.data)}),this.value=a=m.hierarchy({values:W(e.keys).reduce(function(e,t){return e.key(t),e},g.nest()).entries(i.source)},mf),n&&a.each(function(e){e.children&&(e=ye(e.data),i.add.push(e),i.source.push(e))}),pf(a,me,me)),i.source.root=a,i};var kk=Q(vf,jt);kk.transform=function(e,t){t.source&&t.source.root||k(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),yf(n,this.params,e);try{this.value=n(i)}catch(e){k(e)}return i.each(function(e){bf(e,r,a)}),t.reflow(e.modified()).modifies(a).modifies("leaf")};var Mk=["x","y","r","depth","children"];_f.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:Mk}]};var Sk=Q(_f,vf);Sk.layout=m.pack,Sk.params=["size","padding"],Sk.fields=Mk;var Ek=["x0","y0","x1","y1","depth","children"];xf.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:Ek}]};var Ok=Q(xf,vf);Ok.layout=m.partition,Ok.params=["size","round","padding"],Ok.fields=Ek,wf.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};var Ak=Q(wf,jt);Ak.transform=function(e,t){t.source||k("Stratify transform requires an upstream data source.");var n=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),i=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),i&&(this.value=pf(m.stratify().id(e.key).parentId(e.parentKey)(r.source),e.key,Qv)),r.source.root=this.value,r};var Ck={tidy:m.tree,cluster:m.cluster},Rk=["x","y","depth","children"];kf.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:Rk}]};var Tk=Q(kf,vf);Tk.layout=function(e){var t=e||"tidy";return Ck.hasOwnProperty(t)?Ck[t]():void k("Unrecognized Tree layout method: "+t)},Tk.params=["size","nodeSize","separation"],Tk.fields=Rk,Mf.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};var zk=Q(Mf,jt);zk.transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||k("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,function(e){a[me(e)]=1}),r.each(function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[me(t)]&&a[me(n)]&&i.add.push(ye({source:n,target:t}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,function(e){a[me(e)]=1}),n.forEach(function(e){(a[me(e.source)]||a[me(e.target)])&&i.mod.push(e)})),i};var Nk={binary:m.treemapBinary,dice:m.treemapDice,slice:m.treemapSlice,slicedice:m.treemapSliceDice,squarify:m.treemapSquarify,resquarify:m.treemapResquarify},Dk=["x0","y0","x1","y1","depth","children"];Sf.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:Dk}]};var Pk=Q(Sf,vf);Pk.layout=function(){var e=m.treemap();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){Nk.hasOwnProperty(t)?e.tile(Nk[t]):k("Unrecognized Treemap layout method: "+t)},e},Pk.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],Pk.fields=Dk;var Lk=Object.freeze({nest:gf,pack:_f,partition:xf,stratify:wf,tree:kf,treelinks:Mf,treemap:Sf});Ef.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var qk=Q(Ef,jt),$k=[[-1e5,-1e5],[1e5,1e5]];qk.transform=function(e,t){var n,r,i,a,o=e.as||"path",u=t.source;for(n=v.voronoi().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||$k),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(o)};var jk=Object.freeze({voronoi:Ef}),Fk=Math.PI/180,Ik=64,Uk=2048,Bk={archimedean:zf,rectangular:Nf},Wk=Array.prototype.map,Gk=Array.prototype.slice,Yk={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:jf,point:If,sequential:Gf,"bin-linear":Bf,"bin-ordinal":Wf};for(var Hk in Yk)Hf(Hk,Yk[Hk]);var Vk=Vf("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Xk=Vf("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Zk=Vf("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Jk=Vf("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),Qk=Vf("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Kk=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Vf),eM={blueorange:Kk},tM={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:Vk,category20b:Xk,category20c:Zk,tableau10:Jk,tableau20:Qk,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,blueorange:c.interpolateRgbBasis(T(Kk))};Xf("blues","Blues"),Xf("greens","Greens"),Xf("greys","Greys"),Xf("purples","Purples"),Xf("reds","Reds"),Xf("oranges","Oranges"),Xf("brownbluegreen","BrBG"),Xf("purplegreen","PRGn"),Xf("pinkyellowgreen","PiYG"),Xf("purpleorange","PuOr"),Xf("redblue","RdBu"),Xf("redgrey","RdGy"),Xf("redyellowblue","RdYlBu"),Xf("redyellowgreen","RdYlGn"),Xf("spectral","Spectral"),Xf("bluegreen","BuGn"),Xf("bluepurple","BuPu"),Xf("greenblue","GnBu"),Xf("orangered","OrRd"),Xf("purplebluegreen","PuBuGn"),Xf("purpleblue","PuBu"),Xf("purplered","PuRd"),Xf("redpurple","RdPu"),Xf("yellowgreenblue","YlGnBu"),Xf("yellowgreen","YlGn"),Xf("yelloworangebrown","YlOrBr"),Xf("yelloworangered","YlOrRd");var nM=["x","y","font","fontSize","fontStyle","fontWeight","angle"],rM=["text","font","rotate","fontSize","fontStyle","fontWeight"];Zf.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:nM}]};var iM=Q(Zf,jt);iM.transform=function(e,n){function r(t){var r=e[t];return G(r)&&n.modified(r.fields)}var i=e.modified();if(i||n.changed(n.ADD_REM)||rM.some(r)){var a,o=n.materialize(n.SOURCE).source,u=this.value,s=e.as||nM,f=e.fontSize||14;if(G(f)?a=e.fontSizeRange:f=H(f),a){var c=f,l=Hf("sqrt")().domain(Jf(c,o)).range(a);f=function(e){return l(c(e))}}o.forEach(function(e){e[s[0]]=NaN,e[s[1]]=NaN,e[s[3]]=0});for(var d,h,p=u.words(o).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(f).random(t.random).layout(),g=u.size(),m=g[0]>>1,v=g[1]>>1,y=0,b=p.length;y<b;++y)d=p[y],h=d.datum,h[s[0]]=d.x+m,h[s[1]]=d.y+v,h[s[2]]=d.font,h[s[3]]=d.size,h[s[4]]=d.style,h[s[5]]=d.weight,h[s[6]]=d.rotate;return n.reflow(i).modifies(s)}};var aM=Object.freeze({wordcloud:Zf});sc.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var oM=Q(sc,jt);oM.transform=function(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)});return n?this.reinit(e,t):this.eval(e,t)}return this.init(e,t)},oM.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)n=i[f].fname,r=o[n]||(o[n]=ac()),u.push(ic(r,f,a[f]));return this.eval(e,t)},oM.reinit=function(e,t){var n,r,i,a,o,u,s,f,c,l=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),b=m.all(),_=l.rem=l.add,x=l.mod,w=h.length,k={};if(y.set(v),t.rem.length&&(o=this.remove(e,t,l)),t.add.length&&m.add(t.add),t.mod.length)for(u={},a=t.mod,s=0,f=a.length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)c=d[s],(!g[s]||e.modified("fields",s)||t.modified(c.fields))&&(i=c.fname,(n=k[i])||(p[i]=r=ac(),k[i]=n=r.insert(c,t.source,0)),g[s]=ic(r,s,h[s]).onAdd(n,v));for(s=0,f=m.data().length;s<f;++s)o[s]||(y[s]!==v[s]?_.push(s):u[s]&&v[s]!==b&&x.push(s));return m.mask=(1<<w)-1,l},oM.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},oM.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,f=this._indices,c=e.fields,l={},d=n.add,h=u.size(),p=h+o.length,g=s.length;u.resize(p,g),u.add(o);var m=u.curr(),v=u.prev(),y=u.all();for(r=0;r<g;++r)i=c[r].fname,a=l[i]||(l[i]=f[i].insert(c[r],o,h)),s[r].onAdd(a,m);for(;h<p;++h)v[h]=y,m[h]!==y&&d.push(h)},oM.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),f=e.mod;for(n=0,r=f.length;n<r;++n)i=f[n]._index,u[i]!==s&&a.push(i)},oM.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),c=s.prev(),l=s.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)a=p[r]._index,d[a]=1,c[a]=o=f[a],f[a]=l,o!==l&&h.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},oM.reindex=function(e,t,n){
var r=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)})},oM.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,f=0;for(n.filters=0,i=0;i<s;++i)e.modified("query",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,f=0;i<s;++i)e.modified("query",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},oM.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),c=u.prev(),l=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],g=h[1],m=d[0],v=d[1],y=e.one;if(p<m)for(i=p,a=Math.min(m,g);i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(p>m)for(i=m,a=Math.min(p,v);i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(g>v)for(i=Math.max(p,v),a=g;i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<v)for(i=Math.max(m,g),a=v;i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;e.range=t.slice()},oM.incrementOne=function(e,t,n,r){var i,a,o,u=this.value,s=u.curr(),f=e.index(),c=e.bisect(e.range),l=e.bisect(t),d=l[0],h=l[1],p=c[0],g=c[1],m=e.one;if(d<p)for(i=d,a=Math.min(p,h);i<a;++i)o=f[i],s[o]^=m,n.push(o);else if(d>p)for(i=p,a=Math.min(d,g);i<a;++i)o=f[i],s[o]^=m,r.push(o);if(h>g)for(i=Math.max(d,g),a=h;i<a;++i)o=f[i],s[o]^=m,n.push(o);else if(h<g)for(i=Math.max(p,h),a=g;i<a;++i)o=f[i],s[o]^=m,r.push(o);e.range=t.slice()},fc.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};var uM=Q(fc,jt);uM.transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0===(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(e){var t=u[e]&n,r=!t&&t^s[e]&n;return r?o[e]:null}),a.filter(a.REM,function(e){var t=u[e]&n,r=t&&!(t^(t^s[e]&n));return r?o[e]:null})):(a.filter(a.ADD,f),a.filter(a.REM,function(e){return(u[e]&n)===i?o[e]:null})),a.filter(a.SOURCE,function(e){return f(e._index)})};var sM=Object.freeze({crossfilter:sc,resolvefilter:fc}),fM="4.0.0-rc.2",cM=Array.prototype.map,lM=Array.prototype.slice,dM={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:hc,point:gc,sequential:bc,"bin-linear":vc,"bin-ordinal":yc};for(var hM in dM)xc(hM,dM[hM]);var pM=wc("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),gM=wc("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),mM=wc("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),vM=wc("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),yM=wc("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),bM=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(wc),_M={blueorange:bM},xM={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:pM,category20b:gM,category20c:mM,tableau10:vM,tableau20:yM,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,rainbow:f.interpolateRainbow,sinebow:f.interpolateSinebow,blueorange:c.interpolateRgbBasis(T(bM))};kc("blues","Blues"),kc("greens","Greens"),kc("greys","Greys"),kc("purples","Purples"),kc("reds","Reds"),kc("oranges","Oranges"),kc("brownbluegreen","BrBG"),kc("purplegreen","PRGn"),kc("pinkyellowgreen","PiYG"),kc("purpleorange","PuOr"),kc("redblue","RdBu"),kc("redgrey","RdGy"),kc("redyellowblue","RdYlBu"),kc("redyellowgreen","RdYlGn"),kc("spectral","Spectral"),kc("bluegreen","BuGn"),kc("bluepurple","BuPu"),kc("greenblue","GnBu"),kc("orangered","OrRd"),kc("purplebluegreen","PuBuGn"),kc("purpleblue","PuBu"),kc("purplered","PuRd"),kc("redpurple","RdPu"),kc("yellowgreenblue","YlGnBu"),kc("yellowgreen","YlGn"),kc("yelloworangebrown","YlOrBr"),kc("yelloworangered","YlOrRd");var wM={millisecond:l.timeMillisecond,second:l.timeSecond,minute:l.timeMinute,hour:l.timeHour,day:l.timeDay,week:l.timeWeek,month:l.timeMonth,year:l.timeYear},kM={millisecond:l.utcMillisecond,second:l.utcSecond,minute:l.utcMinute,hour:l.utcHour,day:l.utcDay,week:l.utcWeek,month:l.utcMonth,year:l.utcYear},MM="default",SM="view",EM="timer",OM="window",AM={trap:!1},CM="vega-bind",RM="vega-bind-name",TM="vega-bind-radio",zM="vega-option-",NM="outer",DM=["value","update","react","bind"];wl.prototype.visit=function(e){var t,n,r,i=this;if(e(i))return 1;for(t=kl(i),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};var PM,LM,qM,$M,jM,FM=1,IM=2,UM=3,BM=4,WM=5,GM=6,YM=7,HM=8,VM=9;PM={},PM[FM]="Boolean",PM[IM]="<end>",PM[UM]="Identifier",PM[BM]="Keyword",PM[WM]="Null",PM[GM]="Numeric",PM[YM]="Punctuator",PM[HM]="String",PM[VM]="RegularExpression";var XM="ArrayExpression",ZM="BinaryExpression",JM="CallExpression",QM="ConditionalExpression",KM="Identifier",eS="Literal",tS="LogicalExpression",nS="MemberExpression",rS="ObjectExpression",iS="Property",aS="UnaryExpression",oS="Unexpected token %0",uS="Unexpected number",sS="Unexpected string",fS="Unexpected identifier",cS="Unexpected reserved word",lS="Unexpected end of input",dS="Invalid regular expression",hS="Invalid regular expression: missing /",pS="Octal literals are not allowed in strict mode.",gS="Duplicate data property in object literal not allowed in strict mode",mS="ILLEGAL",vS="Disabled.",yS=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),bS=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),_S={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},xS={if:1,this:1},wS={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},kS={},MS=new Date(2e3,0,1),SS="undefined"!=typeof window&&window||null,ES="Literal",OS="Identifier",AS="@",CS="%",RS=":",TS=Array.prototype.map,zS=Array.prototype.slice,NS={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:sh,point:ch,sequential:ph,"bin-linear":dh,"bin-ordinal":hh};for(var DS in NS)mh(DS,NS[DS]);var PS=vh("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),LS=vh("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),qS=vh("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),$S=vh("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),jS=vh("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),FS=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(vh),IS={blueorange:FS},US={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:PS,category20b:LS,category20c:qS,tableau10:$S,tableau20:jS,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,blueorange:c.interpolateRgbBasis(T(FS))};yh("blues","Blues"),yh("greens","Greens"),yh("greys","Greys"),yh("purples","Purples"),yh("reds","Reds"),yh("oranges","Oranges"),yh("brownbluegreen","BrBG"),yh("purplegreen","PRGn"),yh("pinkyellowgreen","PiYG"),yh("purpleorange","PuOr"),yh("redblue","RdBu"),yh("redgrey","RdGy"),yh("redyellowblue","RdYlBu"),yh("redyellowgreen","RdYlGn"),yh("spectral","Spectral"),yh("bluegreen","BuGn"),yh("bluepurple","BuPu"),yh("greenblue","GnBu"),yh("orangered","OrRd"),yh("purplebluegreen","PuBuGn"),yh("purpleblue","PuBu"),yh("purplered","PuRd"),yh("redpurple","RdPu"),yh("yellowgreenblue","YlGnBu"),yh("yellowgreen","YlGn"),yh("yelloworangebrown","YlOrBr"),yh("yelloworangered","YlOrRd");var BS=zh("area",h.geoArea),WS=zh("bounds",h.geoBounds),GS=zh("centroid",h.geoCentroid),YS={},HS="bin_",VS="intersect",XS="union",ZS="index:unit",JS={random:function(){return t.random()},isArray:Yv,isBoolean:K,isDate:ee,isNumber:te,isObject:S,isRegExp:ne,isString:E,isTuple:ge,toBoolean:ue,toDate:fe,toNumber:z,toString:ce,pad:oe,peek:T,truncate:de,rgb:y.rgb,lab:y.lab,hcl:y.hcl,hsl:y.hsl,sequence:a.range,format:Nd,utcFormat:Pd,utcParse:qd,timeFormat:Dd,timeParse:Ld,monthFormat:jd,monthAbbrevFormat:Fd,dayFormat:Id,dayAbbrevFormat:Ud,quarter:Bd,utcquarter:Wd,warn:Yd,info:Hd,debug:Vd,inScope:Xd,clampRange:Zd,pinchDistance:Jd,pinchAngle:Qd,screen:Kd,containerSize:th,windowSize:eh,span:ih,merge:rh,flush:nh,bandspace:Oh,inrange:Wh,setdata:jh,pathShape:Dh,panLinear:q,panLog:$,panPow:j,zoomLinear:I,zoomLog:U,zoomPow:B,encode:Gh,modify:Xh},QS=["view","item","group","xy","x","y"],KS="event.vega.",eE="this.",tE={};sp("bandwidth",Eh,kh),sp("copy",Ah,kh),sp("domain",Sh,kh),sp("range",Mh,kh),sp("invert",Rh,kh),sp("scale",Ch,kh),sp("gradient",Th,kh),sp("geoArea",BS,kh),sp("geoBounds",WS,kh),sp("geoCentroid",GS,kh),sp("geoShape",Nh,kh),sp("indata",qh,$h),sp("data",Ph,Lh),sp("vlSingle",Kh,Lh),sp("vlSingleDomain",np,Lh),sp("vlMulti",Kh,tp),sp("vlMultiDomain",np,tp),sp("vlInterval",ep,Lh),sp("vlIntervalDomain",rp,Lh),sp("treePath",Uh,Lh),sp("treeAncestors",Bh,Lh);var nE,rE,iE={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+O("$"+e)+"]"},functions:fp,constants:wS,visitors:tE},aE=Td(iE),oE="$",uE={$tupleid:1,toString:function(){return":_tupleid_:"}},sE=gp("key"),fE="ascending",cE="descending",lE="scope",dE="view",hE="timer",pE="view",gE="[",mE="]",vE="{",yE="}",bE=":",_E=",",xE="@",wE=">",kE=/[[\]{}]/,ME={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},SE="var datum=event.item&&event.item.datum;",EE=Ip("aggregate"),OE=Ip("axisticks"),AE=Ip("bound"),CE=Ip("collect"),RE=Ip("compare"),TE=Ip("datajoin"),zE=Ip("encode"),NE=Ip("facet"),DE=Ip("field"),PE=Ip("key"),LE=Ip("legendentries"),qE=Ip("mark"),$E=Ip("multiextent"),jE=Ip("multivalues"),FE=Ip("overlap"),IE=Ip("params"),UE=Ip("prefacet"),BE=Ip("projection"),WE=Ip("proxy"),GE=Ip("relay"),YE=Ip("render"),HE=Ip("scale"),VE=Ip("sieve"),XE=Ip("sortitems"),ZE=Ip("viewlayout"),JE=Ip("values"),QE=0,KE=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],eO=le(KE),tO=le(KE.slice(4,9)),nO=le(KE.slice(9)),rO=le(KE.slice(1,6)),iO="top",aO="left",oO="right",uO="bottom",sO="center",fO="vertical",cO="start",lO="end",dO="index",hO="label",pO="offset",gO="perc",mO="perc2",vO="size",yO="value",bO="guide-label",_O="guide-title",xO="group-title",wO="symbol",kO="gradient",MO="discrete",SO=["size","shape","fill","stroke","strokeDash","opacity"],EO={name:1,interactive:1},OO=le(["rule"]),AO=le(["group","image","rect"]),CO="mark",RO="frame",TO="scope",zO="axis",NO="axis-domain",DO="axis-grid",PO="axis-label",LO="axis-tick",qO="axis-title",$O="legend",jO="legend-band",FO="legend-entry",IO="legend-gradient",UO="legend-label",BO="legend-symbol",WO="legend-title",GO="title",YO="group",HO="rect",VO="rule",XO="symbol",ZO="text",JO="datum."+gO+'<=0?"left":datum.'+gO+'>=1?"right":"center"',QO="datum."+gO+'<=0?"bottom":datum.'+gO+'>=1?"top":"middle"',KO={value:0};hm.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(e.add(t[0]);r<n;++r)t[r].params.pulse=pp(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new hm(e,i,o,a,u)};var eA=hm.prototype;eA.countsRef=function(e,t,n){var r,i,a,o=this,u=o.counts||(o.counts={}),s=pm(t);return null!=s&&(e=o.scope,r=u[s]),r?n&&n.field&&gm(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:pp(o.output)},n&&n.field&&gm(e,a,n),i=e.add(EE(a)),r=e.add(CE({pulse:pp(i)})),r={agg:i,ref:pp(r)},null!=s&&(u[s]=r)),r.ref},eA.tuplesRef=function(){return pp(this.values)},eA.extentRef=function(e,t){return mm(e,this,"extent","extent",t,!1)},eA.domainRef=function(e,t){return mm(e,this,"domain","values",t,!1)},eA.valuesRef=function(e,t,n){return mm(e,this,"vals","values",t,n||!0)},eA.lookupRef=function(e,t){return mm(e,this,"lookup","tupleindex",t,!1)},eA.indataRef=function(e,t){return mm(e,this,"indata","tupleindex",t,!0,!0)};var tA=Om(O(aO),O(oO),O(sO)),nA=Om('+(item.orient==="'+oO+'")','+(item.orient!=="'+aO+'")',"0.5"),rA=le(["width","height","padding","autosize"]),iA=Wm.prototype=Gm.prototype;iA.fork=function(){return new Gm(this)},iA.isSubscope=function(){return this._subid>0},iA.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},iA.id=function(){return(this._subid?this._subid+":":0)+this._id++},iA.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},iA.proxy=function(e){var t=e instanceof lp?pp(e):e;return this.add(WE({value:t}))},iA.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},iA.addUpdate=function(e){return this.updates.push(e),e},iA.finish=function(){function e(e,t,n){var r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}var t,n;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data){n=this.data[t],e(n.input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values");for(var r in n.index)e(n.index[r],t,"index:"+r)}return this},iA.pushState=function(e,t,n){this._encode.push(pp(this.add(VE({pulse:e})))),this._parent.push(t),this._lookup.push(n?pp(this.proxy(n)):null),this._markpath.push(-1)},iA.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},iA.parent=function(){return T(this._parent)},iA.encode=function(){return T(this._encode)},iA.lookup=function(){return T(this._lookup)},iA.markpath=function(){var e=this._markpath;return++e[e.length-1]},iA.fieldRef=function(e,t){if(E(e))return gp(e,t);e.signal||k("Unsupported field reference: "+O(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=pp(this.add(DE(n)))),i},iA.compareRef=function(e,t){function n(e){return _p(e)?(i=!0,pp(r[e.signal])):e}var r=this.signals,i=!1,a=W(e.field).map(n),o=W(e.order).map(n);return t&&a.push(uE),i?pp(this.add(RE({fields:a,orders:o}))):mp(a,o)},iA.keyRef=function(e,t){function n(e){return _p(e)?(i=!0,pp(r[e.signal])):e}var r=this.signals,i=!1;return e=W(e).map(n),i?pp(this.add(PE({fields:e,flat:t}))):vp(e,t)},iA.sortRef=function(e){if(!e)return e;var t=[bp(e.op,e.field),uE],n=e.order||fE;return n.signal?pp(this.add(RE({fields:t,orders:[n=this.signalRef(n.signal),n]}))):mp(t,[n,n])},iA.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},iA.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&k("Duplicate signal name: "+O(e));var n=t instanceof lp?t:this.add(hp(t));return this.signals[e]=n},iA.getSignal=function(e){return this.signals[e]||k("Unrecognized signal name: "+O(e)),this.signals[e]},iA.signalRef=function(e){return this.signals[e]?pp(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(hp(null))),pp(this.lambdas[e]))},iA.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=cp(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},iA.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},iA.objectProperty=function(e){return e&&S(e)?this.signalRef(e.signal||Ym(e)):e},iA.addBinding=function(e,t){this.bindings||k("Nested signals do not support binding: "+O(e)),this.bindings.push(X({signal:e},t))},iA.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&k("Duplicate scale or projection name: "+O(e)),this.scales[e]=this.add(t)},iA.addScale=function(e,t){this.addScaleProj(e,HE(t))},iA.addProjection=function(e,t){this.addScaleProj(e,BE(t))},iA.getScale=function(e){return this.scales[e]||k("Unrecognized scale name: "+O(e)),this.scales[e]},iA.projectionRef=iA.scaleRef=function(e){return pp(this.getScale(e))},iA.projectionType=iA.scaleType=function(e){return this.getScale(e).params.type},iA.addData=function(e,t){return this.data.hasOwnProperty(e)&&k("Duplicate data set name: "+O(e)),this.data[e]=t},iA.getData=function(e){return this.data[e]||k("Undefined data set name: "+O(e)),this.data[e]},iA.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&k("Duplicate data set name: "+O(e)),this.addData(e,hm.fromEntries(this,t))};var aA="sans-serif",oA=30,uA=2,sA="#4c78a8",fA="#000",cA="#888",lA="#ddd",dA=[{key:"$ref",parse:ov},{key:"$key",parse:sv},{key:"$expr",parse:uv},{key:"$field",parse:fv},{key:"$encode",parse:lv},{key:"$compare",parse:cv},{key:"$context",parse:dv},{key:"$subflow",parse:hv},{key:"$tupleid",parse:pv}],hA={skip:!0};Ev.prototype=Ov.prototype={fork:function(){var e=new Ov(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),vv(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.request(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach(function(e){n[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[gv(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:kv,setState:Mv};var pA="width",gA="height",mA="padding",vA={skip:!0},yA=Q(Bv,qt);yA.run=function(e){if(qt.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this},yA.render=function(){return this._renderer&&(this._resize&&(this._resize=0,Fc(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},yA.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},yA.container=function(){return this._el},yA.scenegraph=function(){return this._scenegraph},yA.origin=function(){return this._origin.slice()},yA.signal=function(e,t,n){var r=Wv(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},yA.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},yA.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},yA.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},yA.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},yA.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},yA.renderer=function(e){return arguments.length?(po(e)||k("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},yA.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},yA.loader=function(e){return arguments.length?(e!==this._loader&&(qt.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},yA.resize=function(){return this._autosize=1,this},yA._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},yA._resizeView=zv,yA.addEventListener=function(e,t,n){var r=t;return n&&n.trap===!1||(r=ul(this,t),r.raw=t),this._handler.on(e,r),this},yA.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},yA.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},yA.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},yA.addSignalListener=function(e,t){var n=Wv(this,e),r=Gv(n,t);return r||(r=ul(this,function(){t(e,n.value)}),r.handler=t,this.on(n,null,r)),this},yA.removeSignalListener=function(e,t){var n=Wv(this,e),r=Gv(n,t);return r&&n._targets.remove(r),this},yA.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},yA.timer=qv,yA.events=Gc,yA.finalize=Zc,yA.hover=Xc,yA.data=Nc,yA.change=Dc,yA.insert=Pc,yA.remove=Lc,yA.initialize=fl,yA.toImageURL=dl,yA.toCanvas=pl,yA.toSVG=gl,yA.getState=Nv,yA.setState=Lv,X(Uy,Tb,Kx,Vw,pk,xk,Lk,jk,aM,sM),t.timeFormatLocale=i.timeFormatDefaultLocale,t.formatLocale=d.formatDefaultLocale,t.version=fM,t.Dataflow=qt,t.EventStream=Ce,t.Parameters=Me,t.Pulse=_t,t.MultiPulse=Mt,t.Operator=Se,t.Transform=jt,t.changeset=ke,t.ingest=ye,t.isTuple=ge,t.definition=Ft,t.transform=It,t.transforms=Uy,t.tupleid=me,t.scale=xc,t.scheme=Mc,t.interpolate=Ec,t.interpolateRange=Sc,t.timeInterval=Ac,t.utcInterval=Cc,t.projection=Hs,t.View=Bv,t.parse=Jm,t.expressionFunction=sp,t.runtime=wv,t.runtimeContext=Sv,t.bin=Zt,t.bootstrapCI=en,t.quartiles=tn,t.setRandom=Kt,t.randomInteger=nn,t.randomKDE=an,t.randomMixture=un,t.randomNormal=rn,t.randomUniform=sn,t.accessor=_,t.accessorName=x,t.accessorFields=w,t.id=Vv,t.identity=Xv,t.zero=Zv,t.one=Jv,t.truthy=Qv,t.falsy=Kv,t.logger=R,t.None=ey,t.Error=ty,t.Warn=ny,t.Info=ry,t.Debug=iy,t.panLinear=q,t.panLog=$,t.panPow=j,t.zoomLinear=I,t.zoomLog=U,t.zoomPow=B,t.array=W,t.compare=Y,t.constant=H,t.debounce=V,t.error=k,t.extend=X,t.extentIndex=Z,t.fastmap=J,t.field=A,t.inherits=Q,t.isArray=Yv,t.isBoolean=K,t.isDate=ee,t.isFunction=G,t.isNumber=te,t.isObject=S,t.isRegExp=ne,t.isString=E,t.key=re,t.merge=ie,t.pad=oe,t.peek=T,t.repeat=ae,t.splitAccessPath=M,t.stringValue=O,t.toBoolean=ue,t.toDate=fe,t.toNumber=z,t.toString=ce,t.toSet=le,t.truncate=de,t.visitArray=he,t.loader=ze,t.read=ct,t.inferType=Fe,t.inferTypes=Ie,t.typeParsers=_y,t.formats=ft,t.Bounds=pr,t.Gradient=gr,t.GroupItem=vr,t.ResourceLoader=Mr,t.Item=mr,t.Scenegraph=Ca,t.Handler=$a,t.Renderer=Fa,t.CanvasHandler=Ia,t.CanvasRenderer=Ha,t.SVGHandler=Za,t.SVGRenderer=eo,t.SVGStringRenderer=fo,t.RenderType=jx,t.renderModule=po,t.Marks=ux,t.boundClip=go,t.boundContext=hi,t.boundStroke=di,t.boundItem=Ma,t.boundMark=Sa,t.pathCurves=Or,t.pathSymbols=Dr,t.pathRectangle=Ir,t.pathTrail=Ur,t.pathParse=Ar,t.pathRender=zr,t.point=La,t.domCreate=Ta,t.domFind=za,t.domChild=Na,t.domClear=Da,t.openTag=Qa,t.closeTag=Ka,t.font=ya,t.textMetrics=nx,t.resetSVGClipId=qi,t.sceneEqual=mo,t.pathEqual=vo,t.sceneToJSON=Ea,t.sceneFromJSON=Oa,t.sceneZOrder=xi,t.sceneVisit=wi,t.scenePickVisit=ki,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(1).Buffer)},function(e,t,n){(function(e){!function(e,r){r(t,n(72),n(37),n(16),n(78),n(36),n(77),n(76),n(19),n(20),n(35),n(74),n(73),n(17),n(75),n(79),n(18),n(38))}(this,function(t,r,i,a,o,u,s,f,c,l,d,h,p,g,m,v,y,b){"use strict";function _(e,t,n){return e.fields=t||[],e.fname=n,e}function x(e){return null==e?null:e.fname}function w(e){return null==e?null:e.fields}function k(e){throw Error(e)}function M(e){function t(){a.push(f+e.substring(n,r)),f="",n=r+1}var n,r,i,a=[],o=null,u=0,s=e.length,f="";for(e+="",n=r=0;r<s;++r)if("\\"===(i=e[r]))f+=e.substring(n,r),n=++r;else if(i===o)t(),o=null,u=-1;else{if(o)continue;n===u&&'"'===i?(n=r+1,o=i):n===u&&"'"===i?(n=r+1,o=i):"."!==i||u?"["===i?(n<r&&t(),u=n=r+1):"]"===i&&(u||k("Access path missing open bracket: "+e),0<u&&t(),u=0,n=r+1):n<r?t():n=r+1}return u&&k("Access path missing closing bracket: "+e),o&&k("Access path missing closing quote: "+e),n<r&&(r++,t()),a}function S(e){return e===Object(e)}function E(e){return"string"==typeof e}function O(e){return vc(e)?"["+e.map(O)+"]":S(e)||E(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function A(e,t){var n=M(e),r="return _["+n.map(O).join("][")+"];";return _(Function("_",r),[e=1===n.length?n[0]:e],t||e)}function C(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function R(e){var t=e||Sc;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return Ec<=t&&C("error","ERROR",arguments),this},warn:function(){return Oc<=t&&C("warn","WARN",arguments),this},info:function(){return Ac<=t&&C("log","INFO",arguments),this},debug:function(){return Cc<=t&&C("log","DEBUG",arguments),this}}}function T(e){return e[e.length-1]}function z(e){return null==e||""===e?null:+e}function N(e){return function(t){return e*Math.exp(t)}}function D(e){return function(t){return Math.log(e*t)}}function P(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function L(e,t,n,r){var i=n(e[0]),a=n(T(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function q(e,t){return L(e,t,z,_c)}function $(e,t){var n=Math.sign(e[0]);return L(e,t,D(n),N(n))}function j(e,t,n){return L(e,t,P(n),P(1/n))}function F(e,t,n,r,i){var a=r(e[0]),o=r(T(e)),u=null!=t?r(t):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function I(e,t,n){return F(e,t,n,z,_c)}function U(e,t,n){var r=Math.sign(e[0]);return F(e,t,n,D(r),N(r))}function B(e,t,n,r){return F(e,t,n,P(r),P(1/r))}function W(e){return null!=e?vc(e)?e:[e]:[]}function G(e){return"function"==typeof e}function Y(e,t){var n,r,i,a,o,u,s,f,c,l=[],d=(e=W(e)).map(function(e,t){return null==e?null:(l.push(t),G(e)?e:M(e).map(O).join("]["))}),h=l.length-1,p=W(t),g="var u,v;return ";if(h<0)return null;for(r=0;r<=h;++r)G(i=d[n=l[r]])?(a="(u=this."+(u="f"+n)+"(a))",o="(v=this."+u+"(b))",(s=s||{})[u]=i):(a="(u=a["+i+"])",o="(v=b["+i+"])"),u="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==p[n]?f=-(c=1):(c=-1,f=1),g+="("+a+"<"+o+"||u==null)&&v!=null?"+f+":(u>v||v==null)&&u!=null?"+c+":"+u+"!==u&&v===v?"+f+":v!==v&&u===u?"+c+(n<h?":":":0");return i=Function("a","b",g+";"),s&&(i=i.bind(s)),e=e.reduce(function(e,t){return G(t)?(w(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),_(i,Object.keys(e))}function H(e){return G(e)?e:function(){return e}}function V(e,t){function n(){t(i),r=i=null}var r,i;return function(t){i=t,r&&clearTimeout(r),r=setTimeout(n,e)}}function X(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e}function Z(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(null!=(r=e[u])&&r<=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=e[u])&&(r<n&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(null!=(r=t(e[u],u,e))&&r<=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=t(e[u],u,e))&&(r<n&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function J(e){function t(e){return i.hasOwnProperty(e)&&i[e]!==Rc}var n,r,i={};return n={size:0,empty:0,object:i,has:t,get:function(e){return t(e)?i[e]:void 0},set:function(e,r){return t(e)||(++n.size,i[e]===Rc&&--n.empty),i[e]=r,this},delete:function(e){return t(e)&&(--n.size,++n.empty,i[e]=Rc),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(e){return arguments.length?(r=e,n):r},clean:function(){var e,t,a={},o=0;for(e in i)(t=i[e])===Rc||r&&r(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=i=a}},e&&Object.keys(e).forEach(function(t){n.set(t,e[t])}),n}function Q(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function K(e){return"boolean"==typeof e}function ee(e){return"[object Date]"===Object.prototype.toString.call(e)}function te(e){return"number"==typeof e}function ne(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function re(e,t){return e&&(e=t?W(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):W(e)),_(e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?O(e):M(e).map(O).join("]["))+"]"}).join("+'|'+")+";"):function(){return""},e,"key")}function ie(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=0<e(t[u],n[s])?n[s++]:t[u++];
for(;u<i;++u,++f)o[f]=t[u];for(;s<a;++s,++f)o[f]=n[s];return o}function ae(e,t){for(var n="";0<=--t;)n+=e;return n}function oe(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?ae(i,o)+a:"center"===r?ae(i,~~(o/2))+a+ae(i,Math.ceil(o/2)):a+ae(i,o)}function ue(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}function se(e){return te(e)?e:ee(e)?e:Date.parse(e)}function fe(e,t){return t=t||se,null==e||""===e?null:t(e)}function ce(e){return null==e||""===e?null:e+""}function le(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function de(e,t,n,r){var i=null!=r?r:"",a=e+"",o=a.length,u=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function he(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}function pe(e){var t=e||_c,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0)<=(i=n.indexOf(e))&&n.splice(i,1),n},n}function ge(e){return!(!e||!me(e))}function me(e){return e[Tc]}function ve(e,t){return e[Tc]=t,e}function ye(e){var t=e===Object(e)?e:{data:e};return me(t)?t:ve(t,zc++)}function be(e){return _e(e,ye({}))}function _e(e,t){for(var n in e)t[n]=e[n];return t}function xe(e,t){return ve(t,me(e))}function we(e){return e&&e.constructor===ke}function ke(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:ke,insert:function(t){for(var n=W(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=G(e)?r:t,i=W(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:H(r)};return G(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return G(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(e,t,n){n?e[t]=n(e):o.encode=t,a||(f[me(e)]=e)}var f,c,l,d,h,p,g;for(c=0,l=e.length;c<l;++c)o.add.push(ye(e[c]));for(f={},c=0,l=t.length;c<l;++c)f[me(p=t[c])]=p;for(c=0,l=r.length;c<l;++c)h=r[c],u.forEach(function(e){h(e)&&(f[me(e)]=e)});for(g in f)o.rem.push(f[g]);for(f={},c=0,l=n.length;c<l;++c)s((d=n[c]).tuple,d.field,d.value),o.modifies(d.field);for(c=0,l=i.length;c<l;++c)d=i[c],h=d.filter,u.forEach(function(e){h(e)&&s(e,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?u.filter(function(e){return f.hasOwnProperty(me(e))}):u.slice();else for(g in f)o.mod.push(f[g]);return o}}}function Me(){Object.defineProperty(this,Nc,{writable:!0,value:{}})}function Se(e,t,n,r){this.id=++Dc,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Ee(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function Oe(e,t,n){this.id=++qc,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ae(e,t,n){return new Oe(e,t,n)}function Ce(e){return{options:e||{},sanitize:Te,load:Re,file:Ne,http:ze}}function Re(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function Te(e,t){return t=X({},this.options,t),new Promise(function(n,r){var i,a,o,u,s={href:null};null!=e&&"string"==typeof e?(a=jc.test(e),(u=t.baseURL)&&!a&&(Pe(e,"/")||"/"===u[u.length-1]||(e="/"+e),e=u+e),o=(i=Pe(e,Fc))||"file"===t.mode||"http"!==t.mode&&!a&&De(),i?e=e.slice(Fc.length):Pe(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(s,"localFile",{value:!!o}),s.href=e,t.target&&(s.target=t.target+""),n(s)):r("Sanitize failure, invalid URI: "+O(e))})}function ze(e,t){return(r=e,i=X({},this.options.http,t),a="function"==typeof fetch?fetch:n(25),a?a(r,i):Promise.reject("No fetch method available.")).then(function(e){if(!e.ok)throw e.status+""+e.statusText;return e.text()});var r,i,a}function Ne(e){return new Promise(function(t,n){var r=De();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function De(){var e=n(30);return e&&G(e.readFile)?e:null}function Pe(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function Le(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o,u=Uc.slice();for(r=0,i=e.length;r<i;++r){for(n=t?e[r][t]:e[r],a=0;a<u.length;++a)null==(o=n)||o!=o||u[a](n)||(u.splice(a,1),--a);if(0===u.length)return"string"}return Bc[Uc.indexOf(u[0])]}function qe(e,t){return t.reduce(function(t,n){return t[n]=Le(e,n),t},{})}function $e(e){return!(isNaN(+e)||e instanceof Date)}function je(e){return function(t,n){var r={delimiter:e};return Fe(t,n?X(n,r):r)}}function Fe(e,t){return t.header&&(e=t.header.map(O).join(t.delimiter)+"\n"+e),r.dsvFormat(t.delimiter).parse(e+"")}function Ie(t,n){var r,i,a,o=n&&n.property?A(n.property):_c;return!S(t)||(a=t,"function"==typeof e&&G(e.isBuffer)&&e.isBuffer(a))?o(JSON.parse(t)):(r=o(t),i&&i.copy?JSON.parse(JSON.stringify(r)):r)}function Ue(e){return e}function Be(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return We(e,t)})}:We(e,t)}function We(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=Ge(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function Ge(e,t){function n(e,t){t.length&&t.pop();for(var n=s[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(u(n[r],r));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,i)}function r(e){return u(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}var u=function(e){if(null==e)return Ue;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,f=e.length,c=new Array(f);for(c[0]=(t+=e[0])*r+a,c[1]=(n+=e[1])*i+o;s<f;)c[s]=e[s],++s;return c}}(e.transform),s=e.arcs;return function e(t){var n,a=t.type;switch(a){case"GeometryCollection":return{type:a,geometries:t.geometries.map(e)};case"Point":n=r(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(r);break;case"LineString":n=i(t.arcs);break;case"MultiLineString":n=t.arcs.map(i);break;case"Polygon":n=o(t.arcs);break;case"MultiPolygon":n=t.arcs.map(o);break;default:return null}return{type:a,coordinates:n}}(t)}function Ye(e,t){function n(e,t){for(var n in e){var i=e[n];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){r[e<0?~e:e]=1}),o.push(i)}}var r={},i={},a={},o=[],u=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++u],t[u]=n,t[r]=i)}),t.forEach(function(t){var n,r,o=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}(t),u=o[0],s=o[1];if(n=a[u])if(delete a[n.end],n.push(t),n.end=s,r=i[s]){delete i[r.start];var f=r===n?n:n.concat(r);i[f.start=n.start]=a[f.end=r.end]=f}else i[n.start]=a[n.end]=n;else if(n=i[s])if(delete i[n.start],n.unshift(t),n.start=u,r=a[u]){delete a[r.end];var c=r===n?n:r.concat(n);i[c.start=r.start]=a[c.end=n.end]=c}else i[n.start]=a[n.end]=n;else i[(n=[t]).start=u]=a[n.end=s]=n}),n(a,i),n(i,a),t.forEach(function(e){r[e<0?~e:e]||o.push([e])}),o}function He(e){return Ge(e,function(e,t,n){var r,i,a;if(1<arguments.length)r=function(e,t,n){function r(e){var t=e<0?~e:e;(s[t]||(s[t]=[])).push({i:e,g:o})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}var o,u=[],s=[];return function e(t){switch((o=t).type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":i(t.arcs);break;case"MultiLineString":case"Polygon":a(t.arcs);break;case"MultiPolygon":t.arcs.forEach(a)}}(t),s.forEach(null==n?function(e){u.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&u.push(e[0].i)}),u}(0,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Ye(e,r)}}.apply(this,arguments))}function Ve(e,t){return 1<arguments.length?(Wc[e]=t,this):Wc.hasOwnProperty(e)?Wc[e]:null}function Xe(e,t,n){var r=Ve((t=t||{}).type||"json");return r||k("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function(e,t,n){if(e.length){n=n||i.timeParse;var r,a,o,u,s,f,c,l=e.columns||Object.keys(e[0]);for("auto"===t&&(t=qe(e,l)),l=Object.keys(t),r=l.map(function(e){var r,a,o=t[e];if(o&&(0===o.indexOf("date:")||0===o.indexOf("utc:")))return("'"===(a=(r=o.split(/:(.+)?/,2))[1])[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),"utc"===r[0]?i.utcParse(a):n(a);if(!Ic[o])throw Error("Illegal format pattern: "+e+":"+o);return Ic[o]}),u=0,f=e.length,c=l.length;u<f;++u)for(a=e[u],s=0;s<c;++s)o=l[s],a[o]=r[s](a[o])}}(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}function Ze(e,t,n,r,i,a){var o,u,s=X({},a,Gc);G(n)||(n=H(n)),void 0===r?o=function(t){e.touch(n(t))}:G(r)?(u=new Se(null,r,i,!1),o=function(t){var r,i=n(t);u.evaluate(t),we(r=u.value)?e.pulse(i,r,a):e.update(i,r,s)}):o=function(t){e.update(n(t),r,s)},t.apply(o)}function Je(e,t,n,r,i,a){var o,u;void 0===r?u=n:(o=G(r)?r:H(r),(u=new Se(null,r=n?function(e,t){var r=o(e,t);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,i,!1)).modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),t.targets().add(u)}function Qe(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Ke(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function et(e,t){var n=[];return he(e,t,function(e){n.push(e)}),n}function tt(e,t){var n={};return e.visit(t,function(e){n[me(e)]=1}),function(e){return n[me(e)]?null:e}}function nt(e,t,n,r){var i,a,o,u,s,f=this,c=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,o=0,u=(this.pulses=n).length;o<u;++o)if((i=n[o]).stamp===t){if(i.fields)for(s in a=f.fields||(f.fields={}),i.fields)a[s]=1;i.changed(f.ADD)&&(c|=f.ADD),i.changed(f.REM)&&(c|=f.REM),i.changed(f.MOD)&&(c|=f.MOD)}this.changes=c}function rt(e,t){try{t(e)}catch(t){e.error(t)}}function it(e){this.cmp=e,this.nodes=[]}function at(e,t,n,r){var i,a,o;for(i=e[n];t<n&&r(i,a=e[o=n-1>>1])<0;)e[n]=a,n=o;return e[n]=i}function ot(e,t,n){for(var r,i=t,a=e.length,o=e[t],u=2*t+1;u<a;)(r=u+1)<a&&0<=n(e[u],e[r])&&(u=r),e[t]=e[u],u=2*(t=u)+1;return e[t]=o,at(e,i,t,n)}function ut(){this._log=R(),this.logLevel(Ec),this._clock=0,this._rank=0;try{this._loader=Ce()}catch(e){}this._touched=pe(bc),this._pulses={},this._pulse=null,this._heap=new it(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function st(e){return function(){return this._log[e].apply(this,arguments)}}function ft(e,t){Se.call(this,e,null,t)}function ct(e){var t=lt(e);return t&&t.Definition||null}function lt(e){return e=e&&e.toLowerCase(),Kc.hasOwnProperty(e)?Kc[e]:null}function dt(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function ht(e,t,n){return n||e+(t?"_"+t:"")}function pt(e,t){return el[e](t)}function gt(e){return function(t){var n=X({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function mt(e,t){return e.idx-t.idx}function vt(e,t){var n=t||_c,r=function(e,t){var n,r=e.reduce(function e(n,r){function i(t){n[t]||e(n,n[t]=el[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n},e.reduce(function(e,t){return e[t.name]=t,e},{})),i=[];for(n in r)i.push(r[n]);return i.sort(mt)}(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach(function(e){i+=e.init,o+=e.add,u+=e.rem}),e.slice().sort(mt).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",(a=Function("cell",a)).prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",u),a.prototype.set=Function("t",s),a.prototype.get=n,a.fields=e.map(function(e){return e.out}),a}function yt(e){var t,n,r,i,a,o,u,s,f=e.maxbins||20,c=e.base||10,l=Math.log(c),d=e.divide||[5,2],h=e.extent[0],p=e.extent[1],g=p-h;if(e.step)t=e.step;else if(e.steps){for(a=g/f,o=0,u=e.steps.length;o<u&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/l),r=e.minstep||0,t=Math.max(r,Math.pow(c,Math.round(Math.log(g)/l)-n));Math.ceil(g/t)>f;)t*=c;for(o=0,u=d.length;o<u;++o)r<=(a=t/d[o])&&g/a<=f&&(t=a)}return i=0<=(a=Math.log(t))?0:1+~~(-a/l),s=Math.pow(c,-i-1),(e.nice||void 0===e.nice)&&(h=h<(a=Math.floor(h/t+s)*t)?a-t:a,p=Math.ceil(p/t)*t),{start:h,stop:p,step:t}}function bt(e,t){var n,r=[],i=e.length,a=-1;if(null==t)for(;++a<i;)isNaN(n=_t(e[a]))||r.push(n);else for(;++a<i;)isNaN(n=_t(t(e[a],a,e)))||r.push(n);return r}function _t(e){return null===e?NaN:+e}function xt(e,n,r,i){var o,u,s,f,c=bt(e,i),l=c.length,d=n;for(s=0,f=Array(d);s<d;++s){for(u=o=0;u<l;++u)o+=c[~~(t.random()*l)];f[s]=o/l}return[a.quantile(f.sort(a.ascending),r/2),a.quantile(f,1-r/2)]}function wt(e,t){var n=bt(e,t);return[a.quantile(n.sort(a.ascending),.25),a.quantile(n,.5),a.quantile(n,.75)]}function kt(e,n){var r,i,a=NaN,o={mean:function(e){return arguments.length?(r=e||0,a=NaN,o):r},stdev:function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},sample:function(){var e,n,o=0,u=0;if(a==a)return o=a,a=NaN,o;for(;0===(e=(o=2*t.random()-1)*o+(u=2*t.random()-1)*u)||1<e;);return n=Math.sqrt(-2*Math.log(e)/e),a=r+u*n*i,r+o*n*i},pdf:function(e){var t=Math.exp(Math.pow(e-r,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*t},cdf:function(e){var t,n=(e-r)/i,a=Math.abs(n);if(37<a)t=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(t=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),t/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):t=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return 0<n?1-t:t},icdf:function(e){if(e<=0||1<=e)return NaN;var t=2*e-1,n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*n)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/n,u=(0<t?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return r+i*Math.SQRT2*u}};return o.mean(e).stdev(n)}function Mt(e,n){var r=kt(),i={},o=0;return i.data=function(t){return arguments.length?(o=(e=t)?t.length:0,i.bandwidth(n)):e},i.bandwidth=function(t){return arguments.length?(!(n=t)&&e&&(o=(r=e).length,u=wt(r),s=(u[2]-u[0])/1.34,n=1.06*Math.min(Math.sqrt(a.variance(r)),s)*Math.pow(o,-.2)),i):n;var r,o,u,s},i.sample=function(){return e[~~(t.random()*o)]+n*r.sample()},i.pdf=function(t){for(var i=0,a=0;a<o;++a)i+=r.pdf((t-e[a])/n);return i/n/o},i.cdf=function(t){for(var i=0,a=0;a<o;++a)i+=r.cdf((t-e[a])/n);return i/o},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)}function St(e,n){var r,i={},a=0;return i.weights=function(e){return arguments.length?(r=function(e){var t,n=[],r=0;for(t=0;t<a;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<a;++t)n[t]/=r;return n}(n=e||[]),i):n},i.distributions=function(t){return arguments.length?(t?(a=t.length,e=t):(a=0,e=[]),i.weights(n)):e},i.sample=function(){for(var n=t.random(),i=e[a-1],o=r[0],u=0;u<a-1;o+=r[++u])if(n<o){i=e[u];break}return i.sample()},i.pdf=function(t){for(var n=0,i=0;i<a;++i)n+=r[i]*e[i].pdf(t);return n},i.cdf=function(t){for(var n=0,i=0;i<a;++i)n+=r[i]*e[i].cdf(t);return n},i.icdf=function(){throw Error("Mixture icdf not supported.")},i.distributions(e).weights(n)}function Et(e,n){null==n&&(n=null==e?1:e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(r=e||0),o):r},o.max=function(e){return arguments.length?(a=(i=e||0)-r,o):i},o.sample=function(){return r+a*t.random()},o.pdf=function(e){return r<=e&&e<=i?1/a:0},o.cdf=function(e){return e<r?0:i<e?1:(e-r)/a},o.icdf=function(e){return 0<=e&&e<=1?r+e*a:NaN},o.min(e).max(n)}function Ot(e){this._key=e?A(e):me,this.reset()}function At(e){ft.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Ct(e){ft.call(this,null,e)}function Rt(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter(function(e){return!o[r(e)]}),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?ie(e,i,a.sort(e)):i.concat(a),a=[]),i}}}function Tt(e){ft.call(this,[],e)}function zt(e){Se.call(this,null,Nt,e)}function Nt(e){return this.value&&!e.modified()?this.value:Y(e.fields,e.orders)}function Dt(e){ft.call(this,null,e)}function Pt(e){ft.call(this,null,e)}function Lt(e){ft.call(this,null,e)}function qt(e){ft.call(this,[1/0,-1/0],e)}function $t(e,t){Se.call(this,e),this.parent=t}function jt(e){ft.call(this,{},e),this._keys=J();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function Ft(e){Se.call(this,null,It,e)}function It(e){return this.value&&!e.modified()?this.value:vc(e.name)?W(e.name).map(function(e){return A(e)}):A(e.name,e.as)}function Ut(e){ft.call(this,J(),e)}function Bt(e,t){return e?e.map(function(e,n){return t[n]||x(e)}):null}function Wt(e){ft.call(this,[],e)}function Gt(e){ft.call(this,[],e)}function Yt(e){ft.call(this,null,e)}function Ht(e){ft.call(this,[],e)}function Vt(e){ft.call(this,[],e)}function Xt(e){At.call(this,e)}function Zt(e){Se.call(this,null,Jt,e)}function Jt(e){return this.value&&!e.modified()?this.value:re(e.fields,e.flat)}function Qt(e){ft.call(this,{},e)}function Kt(e){Se.call(this,null,en,e)}function en(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=1/0,a=-1/0,o=e.extents;for(t=0,n=o.length;t<n;++t)(r=o[t])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function tn(e){Se.call(this,null,nn,e)}function nn(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function rn(e){ft.call(this,null,e)}function an(e){At.call(this,e)}function on(e){jt.call(this,e)}function un(e){ft.call(this,null,e)}function sn(e){ft.call(this,null,e)}function fn(e){ft.call(this,null,e)}function cn(e){ft.call(this,[],e),this.count=0}function ln(e){ft.call(this,null,e)}function dn(e){ft.call(this,null,e),this.modified(!0)}function hn(e){ft.call(this,J(),e)}function pn(e){ft.call(this,null,e)}function gn(e){function t(e){W(w(e)).forEach(function(e){s[e]=1})}var n=W(e.ops),r=W(e.fields),i=W(e.params),a=W(e.as),o=this.outputs=[],u=this.windows=[],s={},f={},c=!0,l=[],d=[];t(e.sort),n.forEach(function(e,n){var s,h,p,g,m,v=r[n],y=x(v),b=ht(e,y,a[n]);if(t(v),o.push(b),yl.hasOwnProperty(e))u.push((s=e,h=r[n],p=i[n],g=b,{init:(m=yl[s](h,p)).init||xc,update:function(e,t){t[g]=m.next(e)}}));else{if(null==v&&"count"!==e&&k("Null aggregate field specified."),"count"===e)return void l.push(b);c=!1;var _=f[y];_||((_=f[y]=[]).field=v,d.push(_)),_.push(pt(e,b))}}),(l.length||d.length)&&(this.cell=function(e,t,n){e=e.map(function(e){return vt(e,e.field)});var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new Ot;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}(d,l,c)),this.inputs=Object.keys(s)}function mn(e){ft.call(this,{},e),this._mlen=0,this._mods=[]}function vn(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,o=n.frame||[null,0],u=e.data(r),s=u.length,f=0,c=i?a.bisector(r):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:r||H(-1)};for(t.init();f<s;++f)yn(l,o,f,s),i&&bn(l,c),t.update(l,u[f])}function yn(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function bn(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;0<n&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function _n(e){this.clear(),e&&this.union(e)}function xn(e,t){var n,r=[];return n={id:"gradient_"+ed++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}function wn(e){this.mark=e,this.bounds=this.bounds||new _n}function kn(e){wn.call(this,e),this.items=this.items||[]}function Mn(e,t){return function(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}(e,t)||function(e,t){if(Kl)try{return new Kl(e,t)}catch(e){}return null}(e,t)||null}function Sn(){return("undefined"!=typeof Image?Image:null)||Kl&&Kl.Image||null||null}function En(e){this._pending=0,this._loader=e||Ce()}function On(e){e._pending+=1}function An(e){e._pending-=1}function Cn(e,t,n){var r=rd.hasOwnProperty(e)&&rd[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function Rn(e){var t,n,r,i,a,o,u,s,f,c,l,d=[];for(s=0,c=(t=e.slice().replace(ad[0],"###$1").split(ad[1]).slice(1)).length;s<c;++s){for(r=(n=t[s]).slice(1).trim().replace(ad[2],"$1###$2").split(ad[3]),i=[o=n.charAt(0)],f=0,l=r.length;f<l;++f)(a=+r[f])===a&&i.push(a);if(u=id[o.toLowerCase()],i.length-1>u)for(f=1,l=i.length;f<l;f+=u)d.push([o].concat(i.slice(f,f+u)));else d.push(i)}return d}function Tn(e){var t=sd.call(e);if(ud[t])return ud[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],f=e[7],c=f*o,l=-s*u,d=s*o,h=f*u,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,k=n+m,M=r+v,S=k+_*v,E=M-_*m;return ud[t]=[c*x+l*w,d*x+h*w,c*S+l*E,d*S+h*E,c*k+l*M,d*k+h*M]}function zn(e,t){var n=fd[0]=e[0];if("a"===n||"A"===n)fd[1]=t*e[1],fd[2]=t*e[2],fd[6]=t*e[6],fd[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)fd[r]=t*e[r];return fd}function Nn(e,t,n,r,i){var a,o,u,s,f,c=null,l=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=zn(a,i)),a[0]){case"l":l+=a[1],d+=a[2],e.lineTo(l+n,d+r);break;case"L":l=a[1],d=a[2],e.lineTo(l+n,d+r);break;case"h":l+=a[1],e.lineTo(l+n,d+r);break;case"H":l=a[1],e.lineTo(l+n,d+r);break;case"v":d+=a[1],e.lineTo(l+n,d+r);break;case"V":d=a[1],e.lineTo(l+n,d+r);break;case"m":l+=a[1],d+=a[2],e.moveTo(l+n,d+r);break;case"M":l=a[1],d=a[2],e.moveTo(l+n,d+r);break;case"c":o=l+a[5],u=d+a[6],h=l+a[3],p=d+a[4],e.bezierCurveTo(l+a[1]+n,d+a[2]+r,h+n,p+r,o+n,u+r),l=o,d=u;break;case"C":l=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,l+n,d+r);break;case"s":o=l+a[3],u=d+a[4],h=2*l-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,l+a[1]+n,d+a[2]+r,o+n,u+r),h=l+a[1],p=d+a[2],l=o,d=u;break;case"S":o=a[3],u=a[4],h=2*l-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,u+r),l=o,d=u,h=a[1],p=a[2];break;case"q":o=l+a[3],u=d+a[4],h=l+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),l=o,d=u,h=a[1],p=a[2];break;case"t":o=l+a[1],u=d+a[2],null===c[0].match(/[QqTt]/)?(h=l,p=d):"t"===c[0]?(h=2*l-s,p=2*d-f):"q"===c[0]&&(h=2*l-h,p=2*d-p),s=h,f=p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),d=u,h=(l=o)+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*l-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u;break;case"a":Dn(e,l+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+d+r]),l+=a[6],d+=a[7];break;case"A":Dn(e,l+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}}function Dn(e,t,n,r){for(var i=function(e,t,n,r,i,a,o,u,s){var f=sd.call(arguments);if(od[f])return od[f];var c=o*(Math.PI/180),l=Math.sin(c),d=Math.cos(c),h=d*(u-e)*.5+l*(s-t)*.5,p=d*(s-t)*.5-l*(u-e)*.5,g=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);1<g&&(n*=g=Math.sqrt(g),r*=g);var m=d/n,v=l/n,y=-l/r,b=d/r,_=m*u+v*s,x=y*u+b*s,w=m*e+v*t,k=y*e+b*t,M=1/((w-_)*(w-_)+(k-x)*(k-x))-.25;M<0&&(M=0);var S=Math.sqrt(M);a==i&&(S=-S);var E=.5*(_+w)-S*(k-x),O=.5*(x+k)+S*(w-_),A=Math.atan2(x-O,_-E),C=Math.atan2(k-O,w-E)-A;C<0&&1===a?C+=2*Math.PI:0<C&&0===a&&(C-=2*Math.PI);for(var R=Math.ceil(Math.abs(C/(.5*Math.PI+.001))),T=[],z=0;z<R;++z){var N=A+z*C/R,D=A+(z+1)*C/R;T[z]=[E,O,N,D,n,r,l,d]}return od[f]=T}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=Tn(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function Pn(e){return dd.hasOwnProperty(e)?dd[e]:function(e){if(!hd.hasOwnProperty(e)){var t=Rn(e);hd[e]={draw:function(e,n){Nn(e,t,0,0,Math.sqrt(n)/2)}}}return hd[e]}(e)}function Ln(e){return e.x}function qn(e){return e.y}function $n(e){return e.width}function jn(e){return e.height}function Fn(e){return function(){return e}}function In(){function e(e,s,f){var c,l=null!=s?s:+t.call(this,e),d=null!=f?f:+n.call(this,e),h=+r.call(this,e),p=+i.call(this,e),g=+a.call(this,e);if(o||(o=c=u.path()),g<=0)o.rect(l,d,h,p);else{var m=l+h,v=d+p;o.moveTo(l+g,d),o.lineTo(m-g,d),o.quadraticCurveTo(m,d,m,d+g),o.lineTo(m,v-g),o.quadraticCurveTo(m,v,m-g,v),o.lineTo(l+g,v),o.quadraticCurveTo(l,v,l,v-g),o.lineTo(l,d+g),o.quadraticCurveTo(l,d,l+g,d),o.closePath()}if(c)return o=null,c+""||null}var t=Ln,n=qn,r=$n,i=jn,a=Fn(0),o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Fn(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Fn(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:Fn(+t),e):r},e.height=function(t){return arguments.length?(i="function"==typeof t?t:Fn(+t),e):i},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:Fn(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function Un(){function e(e,t,n){var r=n/2;if(o){var i=f-t,a=e-s;if(i||a){var u=Math.sqrt(i*i+a*a),d=(i/=u)*c,h=(a/=u)*c,p=Math.atan2(a,i);l.moveTo(s-d,f-h),l.lineTo(e-i*r,t-a*r),l.arc(e,t,r,p-pd,p),l.lineTo(s+d,f+h),l.arc(s,f,c,p,p+pd)}else l.arc(e,t,r,0,2*pd);l.closePath()}else o=1;s=e,f=t,c=r}function t(t){var s,f,c,d=t.length,h=!1;for(null==l&&(l=c=u.path()),s=0;s<=d;++s)!(s<d&&a(f=t[s],s,t))===h&&(h=!h)&&(o=0),h&&e(+n(f,s,t),+r(f,s,t),+i(f,s,t));if(c)return l=null,c+""||null}var n,r,i,a,o,s,f,c,l=null;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.context=function(e){return arguments.length?(l=null==e?null:e,t):l},t}function Bn(e){return e.x||0}function Wn(e){return e.y||0}function Gn(e){return e.cornerRadius||0}function Yn(e){return!(!1===e.defined)}function Hn(e,t,n,r){return bd.context(e)(t,n,r)}function Vn(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e}function Xn(e){return nd=e,Xn}function Zn(){}function Jn(e,t){nd.add(e,t)}function Qn(e,t,n){return n.id?function(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,u=n.x1+t.x2*r,s=n.y1+t.y2*i,f=t.stops,c=0,l=f.length,d=e.createLinearGradient(a,o,u,s);c<l;++c)d.addColorStop(f[c].offset,f[c].color);return d}(e,n,t.bounds):n}function Kn(e,t,n){return 0<(n*=null==t.fillOpacity?1:t.fillOpacity)&&(e.globalAlpha=n,e.fillStyle=Qn(e,t,t.fill),!0)}function er(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&0<(n*=null==t.strokeOpacity?1:t.strokeOpacity)&&(e.globalAlpha=n,e.strokeStyle=Qn(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Od),e.lineDashOffset=t.strokeDashOffset||0),!0)}function tr(e,t){return e.zindex-t.zindex||e.index-t.index}function nr(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(tr)}function rr(e,t){var n,r,i=e.items;if(i&&i.length){var a=nr(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function ir(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=nr(e);for(a&&a.length&&(i=a),r=i.length;0<=--r;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;0<=--r;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function ar(e){return function(t,n,r){rr(n,function(n){r&&!r.intersects(n.bounds)||or(e,t,n,n)})}}function or(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&Kn(t,n,i)&&t.fill(),n.stroke&&er(t,n,i)&&t.stroke()))}function ur(e){return e||(e=Ad),function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,ir(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return e(t,n,r,i,a,o)?n:void 0})}}function sr(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==t?s.fill:t,c=s.stroke&&n.isPointInStroke;return c&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(f&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function fr(e){return ur(sr(e))}function cr(e,t){return"translate("+e+","+t+")"}function lr(e){return cr(e.x||0,e.y||0)}function dr(e,t){function n(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",lr(n)),e("d",t(null,n))},bound:function(e,n){return t(Xn(e),n),Vn(e,n).translate(n.x||0,n.y||0)},draw:ar(n),pick:fr(n)}}function hr(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var i,a=sr(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(Xn(e),r),Vn(e,r[0]))},draw:(i=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||or(i,e,t.items[0],t.items)}),pick:function(e,t,n,r,i,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(i,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,a(e,u,n,r)?u[0]:null)},tip:n}}function pr(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+Td++),o=i.clipping[a]||(i.clipping[a]={id:a});return G(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function gr(e,t){var n=t.stroke?zd:0;e.beginPath(),Hn(e,t,n,n)}function mr(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function vr(e,t){return"center"===e?t/2:"right"===e?t:0}function yr(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function br(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=Rn(n)).path=n),Nn(e,r,t.x,t.y)}function _r(e,t){e.beginPath(),Hn(e,t)}function xr(e,t,n){var r,i,a,o;return!(!t.stroke||!er(e,t,n)||(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),0))}function wr(e){return Ed=Er(e),kr(Ar(e))}function kr(e){return~~(.8*e.length*Ed)}function Mr(e){return Sd.font=Cr(e),Sr(Ar(e))}function Sr(e){return Sd.measureText(e).width}function Er(e){return null!=e.fontSize?e.fontSize:11}function Or(e){Sd=e&&(Sd=Mn(1,1))?Sd.getContext("2d"):null,Ud.width=Sd?Mr:wr}function Ar(e){var t=e.text;return null==t?"":0<e.limit?function(e){var t,n=+e.limit,r=e.text+"";if(Sd?(Sd.font=Cr(e),t=Sr):(Ed=Er(e),t=kr),t(r)<n)return r;var i,a=e.ellipsis||"",o="rtl"===e.dir,u=0,s=r.length;if(n-=t(a),o){for(;u<s;)i=u+s>>>1,t(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),t(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}(e):t+"";
}function Cr(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/"/g,"'")),(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Er(e)+"px "+(n||"sans-serif")}function Rr(e){var t=e.baseline,n=Er(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}function Tr(e,t,n){var r,i,a=Ud.height(t),o=t.align,u=t.radius||0,s=t.x||0,f=t.y||0,c=t.dx||0,l=(t.dy||0)+Rr(t)-Math.round(.8*a);return u&&(i=(t.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=Ud.width(t),"center"===o?c-=r/2:"right"===o&&(c-=r),e.set(c+=s,l+=f,c+r,l+a),t.angle&&!n&&e.rotate(t.angle*Math.PI/180,s,f),e.expand(n||!r?0:1)}function zr(e,t,n){var r=Gd[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new _n),e,n)}function Nr(e,t,n){var r,i,a,o,u=Gd[e.marktype],s=u.bound,f=e.items,c=f&&f.length;if(u.nested)return c?a=f[0]:(Yd.mark=e,a=Yd),o=zr(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new _n,c)for(r=0,i=f.length;r<i;++r)t.union(zr(f[r],s,n));return e.bounds=t}function Dr(e,t){return JSON.stringify(e,Hd,t)}function Pr(e){return function e(t){var n,r,i,a=t.marktype,o=t.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=t,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&e(o[r]);return a&&Nr(t),t}("string"==typeof e?JSON.parse(e):e)}function Lr(e){arguments.length?this.root=Pr(e):(this.root=qr({marktype:"group",name:"root",role:"frame"}),this.root.items=[new kn(this.root)])}function qr(e,t){return{bounds:new _n,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function $r(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function jr(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Fr(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=$r(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function Ir(e,t){for(var n=e.childNodes,r=n.length;t<r;)e.removeChild(n[--r]);return e}function Ur(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Br(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Wr(e,t){this._active=null,this._handlers={},this._loader=e||Ce(),this._tooltip=t||Gr}function Gr(e,t,n,r){e.element().setAttribute("title",r||"")}function Yr(e){this._el=null,this._bgcolor=null,this._loader=new En(e)}function Hr(e,t){Wr.call(this,e,t),this._down=null,this._touch=null,this._first=!0}function Vr(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r)),this.fire(e,r)}}function Xr(e){return function(t){this.fire(e,t),this._active=null}}function Zr(e){Yr.call(this,e),this._redraw=!1,this._dirty=new _n}function Jr(e,t){Wr.call(this,e,t);var n=this;n._hrefHandler=Qr(n,function(e,t){t&&t.href&&n.handleHref(e,t,t.href)}),n._tooltipHandler=Qr(n,function(e,t){n.handleTooltip(e,t,e.type!==Qd)})}function Qr(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function Kr(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function ei(e){return"</"+e+">"}function ti(e){Yr.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function ni(e,t,n){var r,i,a;for((e=Fr(e,n,"linearGradient",fh)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)(a=Fr(e,r,"stop",fh)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);Ir(e,r)}function ri(e,t,n){var r;(e=Fr(e,n,"clipPath",fh)).setAttribute("id",t.id),t.path?(r=Fr(e,0,"path",fh)).setAttribute("d",t.path):((r=Fr(e,0,"rect",fh)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function ii(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function ai(e,t,n,r,i){var a,o,u,s=e._svg;if(!s&&(s=$r(a=t.ownerDocument,r,fh),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},"g"===r))){var f=$r(a,"path",fh);f.setAttribute("class","background"),s.appendChild(f),f.__data__=e;var c=$r(a,"g",fh);s.appendChild(c),c.__data__=e}return(s.ownerSVGElement!==i||(u=(o=e).mark||o.group)&&1<u.items.length&&s.previousSibling!==n)&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function oi(e,t,n){t!==hh[e]&&(null!=t?n?dh.setAttributeNS(n,e,t):dh.setAttribute(e,t):n?dh.removeAttributeNS(n,e):dh.removeAttribute(e),hh[e]=t)}function ui(e){Yr.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function si(e,t,n,r){gh[r||e]=t}function fi(e,t,n,r){if(null==e)return"";var i,a,o,u,s,f="";for("bgrect"===n&&!1===t.interactive&&(f+="pointer-events: none; "),"text"===n&&(f+="font: "+Cr(e)+"; "),i=0,a=sh.length;i<a;++i)o=sh[i],u=uh[o],null==(s=e[o])?"fill"===u&&(f+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(s="url(#"+(r.gradient[s.id]=s).id+")"),f+=u+": "+s+"; "):f+=u+": none; ";return f?'style="'+f.trim()+'"':null}function ci(e,t){return e=String(e||"").toLowerCase(),1<arguments.length?(bh[e]=t,this):bh[e]}function li(e){var t=e.clip;if(G(t))t(Xn(_h.clear()));else{if(!t)return;_h.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(_h)}function di(e,t,n){return e===t||("path"===n?hi(e,t):e instanceof Date&&t instanceof Date?+e==+t:te(e)&&te(t)?Math.abs(e-t)<=xh:e&&t&&(S(e)||S(t))?null!=e&&null!=t&&function(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;0<=r;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;0<=r;r--)if(n=i[r],!di(e[n],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function hi(e,t){return di(Rn(e),Rn(t))}function pi(e){ft.call(this,null,e)}function gi(e,t,n){return t(e.bounds.clear(),e,n)}function mi(e){ft.call(this,0,e)}function vi(e){ft.call(this,null,e)}function yi(e){ft.call(this,null,e)}function bi(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function _i(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(bi(i,t=e[n].bounds))return!0}function xi(e){var t=e.bounds;return 1<t.width()&&1<t.height()}function wi(e){ft.call(this,null,e)}function ki(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function Mi(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function Si(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ei(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function Oi(e,t){return e.bounds[t]}function Ai(e,t,n){var r=S(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function Ci(e){return e<0?Math.ceil(-e):0}function Ri(e,t,n){function r(e,t){return Math.floor(Math.min(e,t))}function i(e,t){return Math.ceil(Math.max(e,t))}var a,o,u,s,f,c,l,d,h,p,g,m,v=function(e){for(var t,n,r=e.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(n=(t=r[a]).items,t.marktype===Nl)switch(t.role){case Dl:case Pl:break;case Ll:ki(n,o.rowheaders);break;case ql:ki(n,o.rowfooters);break;case jl:ki(n,o.colheaders);break;case Fl:ki(n,o.colfooters);break;case $l:o.rowtitle=n[0];break;case Il:o.coltitle=n[0];break;default:ki(n,o.marks)}return o}(t),y=v.marks,b="flush"===n.bounds,_=b?Mi:Si,x=new _n(0,0,0,0),w=Ai(n.align,Zl),k=Ai(n.align,Jl),M=Ai(n.padding,Zl),S=Ai(n.padding,Jl),E=n.offset,O=t.columns||n.columns||y.length,A=O<0?1:Math.ceil(y.length/O),C=A*O,R=[],T=[],z=0,N=[],D=[],P=0,L=y.length;for(o=0;o<O;++o)T[o]=0;for(o=0;o<A;++o)D[o]=0;for(o=0;o<L;++o)f=_(y[o]),u=o%O,s=~~(o/O),l=Math.ceil(_(y[o]).x2),d=Math.ceil(_(y[o]).y2),z=Math.max(z,l),P=Math.max(P,d),T[u]=Math.max(T[u],l),D[s]=Math.max(D[s],d),R.push(M+Ci(f.x1)),N.push(S+Ci(f.y1)),e.dirty(y[o]);for(o=0;o<L;++o)o%O==0&&(R[o]=0),o<O&&(N[o]=0);if("each"===w)for(u=1;u<O;++u){for(m=0,o=u;o<L;o+=O)m<R[o]&&(m=R[o]);for(o=u;o<L;o+=O)R[o]=m+T[u-1]}else if(w===Xl){for(o=m=0;o<L;++o)o%O&&m<R[o]&&(m=R[o]);for(o=0;o<L;++o)o%O&&(R[o]=m+z)}else for(w=!1,u=1;u<O;++u)for(o=u;o<L;o+=O)R[o]+=T[u-1];if("each"===k)for(s=1;s<A;++s){for(m=0,a=(o=s*O)+O;o<a;++o)m<N[o]&&(m=N[o]);for(o=s*O;o<a;++o)N[o]=m+D[s-1]}else if(k===Xl){for(m=0,o=O;o<L;++o)m<N[o]&&(m=N[o]);for(o=O;o<L;++o)N[o]=m+P}else for(k=!1,s=1;s<A;++s)for(a=(o=s*O)+O;o<a;++o)N[o]+=D[s-1];for(o=h=0;o<L;++o)l=(c=y[o]).x||0,c.x=h=R[o]+(o%O?h:0),c.bounds.translate(h-l,0);for(u=0;u<O;++u)for(p=0,o=u;o<L;o+=O)d=(c=y[o]).y||0,c.y=p+=N[o],c.bounds.translate(0,p-d);if(Ai(n.center,Zl)&&1<A&&w)for(o=0;o<L;++o)c=y[o],0<(h=(f=w===Xl?z:T[o%O])-_(c).x2)&&(c.x+=l=h/2,c.bounds.translate(l,0));if(Ai(n.center,Jl)&&1!==O&&k)for(o=0;o<L;++o)c=y[o],0<(p=(f=k===Xl?P:D[~~(o/O)])-_(c).y2)&&(c.y+=d=p/2,c.bounds.translate(0,d));for(o=0;o<L;++o)y[o].mark.bounds.clear();for(o=0;o<L;++o)c=y[o],e.dirty(c),x.union(c.mark.bounds.union(c.bounds));_=b?Ei:Oi,g=Ai(n.headerBand,Jl,null),h=Ti(e,v.rowheaders,y,O,A,-Ai(E,"rowHeader"),r,0,_,"x1",0,O,1,g),g=Ai(n.headerBand,Zl,null),p=Ti(e,v.colheaders,y,O,O,-Ai(E,"columnHeader"),r,1,_,"y1",0,1,O,g),g=Ai(n.footerBand,Jl,null),Ti(e,v.rowfooters,y,O,A,Ai(E,"rowFooter"),i,0,_,"x2",O-1,O,1,g),g=Ai(n.footerBand,Zl,null),Ti(e,v.colfooters,y,O,O,Ai(E,"columnFooter"),i,1,_,"y2",C-O,1,O,g),v.rowtitle&&(m=h-Ai(E,"rowTitle"),g=Ai(n.titleBand,Jl,.5),zi(e,v.rowtitle,m,0,x,g)),v.coltitle&&(m=p-Ai(E,"columnTitle"),g=Ai(n.titleBand,Zl,.5),zi(e,v.coltitle,m,1,x,g))}function Ti(e,t,n,r,i,a,o,u,s,f,c,l,d,h){var p,g,m,v,y,b,_,x,w,k=n.length,M=0,S=0;if(!k)return M;for(p=c;p<k;p+=l)n[p]&&(M=o(M,s(n[p],f)));if(!t.length)return M;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),M+=a,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=c,g=0,v=t.length;g<v;++g,p+=l){for(y=(b=t[g]).mark.bounds,m=p;0<=m&&null==(_=n[m]);m-=d);u?(x=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),w=M):(x=M,w=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,e.dirty(b),S=o(S,y[f])}return S}function zi(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function Ni(e){ft.call(this,null,e)}function Di(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Pi(e,t,n,r){var i,a,o,u,s=t.items[0],f=s.datum,c=f.orient,l=(u=+(o=f).grid,[o.ticks?u++:-1,o.labels?u++:-1,u+ +o.domain]),d=s.range,h=s.offset,p=s.position,g=s.minExtent,m=s.maxExtent,v=f.title&&s.items[l[2]].items[0],y=s.titlePadding,b=s.bounds,_=0,x=0;switch(Eh.clear().union(b),b.clear(),-1<(i=l[0])&&b.union(s.items[i].bounds),-1<(i=l[1])&&b.union(s.items[i].bounds),c){case kl:_=p||0,x=-h,a=Math.max(g,Math.min(m,-b.y1)),v&&(a=Li(v,a,y,0,-1,b)),b.add(0,-a).add(d,0);break;case Ml:_=-h,x=p||0,a=Math.max(g,Math.min(m,-b.x1)),v&&(a=Li(v,a,y,1,-1,b)),b.add(-a,0).add(0,d);break;case Sl:_=n+h,x=p||0,a=Math.max(g,Math.min(m,b.x2)),v&&(a=Li(v,a,y,1,1,b)),b.add(0,0).add(a,d);break;case El:_=p||0,x=r+h,a=Math.max(g,Math.min(m,b.y2)),v&&(a=Li(v,a,y,0,1,b)),b.add(0,0).add(d,a);break;default:_=s.x,x=s.y}return Vn(b.translate(_,x),s),Di(s,"x",_+Sh)|Di(s,"y",x+Sh)&&(s.bounds=Eh,e.dirty(s),s.bounds=b,e.dirty(s)),s.mark.bounds.clear().union(b)}function Li(e,t,n,r,i,a){var o=e.bounds,u=0,s=0;return e.auto?(t+=n,r?u=(e.x||0)-(e.x=i*t):s=(e.y||0)-(e.y=i*t),o.translate(-u,-s),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}function qi(e,t,n,r,i,a,o){var u,s,f,c,l,d=t.items[0],h=d.datum,p=h.orient,g=d.offset,m=d.bounds,v=0,y=0;switch(p===kl||p===El?(f=i,v=n[p]):p!==Ml&&p!==Sl||(f=r,y=n[p]),Eh.clear().union(m),m.clear(),d.items.forEach(function(e){m.union(e.bounds)}),u=Math.round(m.width())+2*d.padding-1,s=Math.round(m.height())+2*d.padding-1,h.type===Bl&&(c=d.items[0].items[0].items[0].items,l=c.reduce(function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e},{}),c.forEach(function(e){e.width=l[e.column],e.height=e.bounds.y2-e.y})),p){case Ml:v-=n.leftWidth+g-Math.floor(f.x1),n.left+=s+n.margin;break;case Sl:v+=g+Math.ceil(f.x2),n.right+=s+n.margin;break;case kl:y-=s+g-Math.floor(f.y1),n.top+=u+n.margin;break;case El:y+=g+Math.ceil(f.y2),n.bottom+=u+n.margin;break;case Ol:v+=g,y+=g;break;case Al:v+=a-u-g,y+=g;break;case Cl:v+=g,y+=o-s-g;break;case Rl:v+=a-u-g,y+=o-s-g;break;default:v=d.x,y=d.y}return Vn(m.set(v,y,v+u,y+s),d),Di(d,"x",v)|Di(d,"width",u)|Di(d,"y",y)|Di(d,"height",s)&&(d.bounds=Eh,e.dirty(d),d.bounds=m,e.dirty(d)),d.mark.bounds.clear().union(m)}function $i(e,t,n){var r=e-t+2*n;return e?0<r?r:1:0}function ji(){function e(){var e=i().length,r=u[1]<u[0],s=u[r-0],h=u[1-r],p=$i(e,c,l);t=(h-s)/(p||1),f&&(t=Math.floor(t)),s+=(h-s-t*(e-c))*d,n=t*(1-c),f&&(s=Math.round(s),n=Math.round(n));var g=a.range(e).map(function(e){return s+t*e});return o(r?g.reverse():g)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,c=0,l=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c=l,e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],c=+e[1],l=u[1]<u[0],d=l?o().reverse():o(),h=d.length-1;if(f==f&&c==c&&(c<f&&(s=f,f=c,c=s),!(c<d[0]||f>u[1-l])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===c?t:a.bisectRight(d,c)-1,f-d[t]>n+1e-10&&++t,l&&(s=t,t=h-r,r=h-s),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return ji().domain(i()).range(u).round(f).paddingInner(c).paddingOuter(l).align(d)},e()}function Fi(e){return Fh.call(e,function(e){return+e})}function Ii(e,t){return 1<arguments.length?(Uh[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):Uh.hasOwnProperty(e)?Uh[e]:void 0;var n,r}function Ui(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Bi(e,t){Jh[e]=f["interpolate"+t],Zh[e]=f["scheme"+t]}function Wi(e,t){if(1<arguments.length)return Jh[e]=t,this;var n=e.split("-");return e=n[0],(n=+n[1]+1)&&Zh.hasOwnProperty(e)?Zh[e][n-1]:!n&&Jh.hasOwnProperty(e)?Jh[e]:void 0}function Gi(e,t){var n=t-e;return function(t){return e+t*n}}function Yi(e,t){var n,r,i;return S(t)&&(n=t.step,t=t.interval),E(t)&&(t="time"===e.type?(i=t,Qh.hasOwnProperty(i)&&Qh[i]):"utc"===e.type?(r=t,Kh.hasOwnProperty(r)&&Kh[r]):k("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function Hi(e,t,n){var r=e.range(),i=r[0],a=T(r);if(a<i&&(r=a,a=i,i=r),t=t.filter(function(t){return!((t=e(t))<i||a<t)}),0<n&&1<t.length){for(var o=[t[0],T(t)];t.length>n&&3<=t.length;)t=t.filter(function(e,t){return!(t%2)});t.length<3&&(t=o)}return t}function Vi(e,t){return e.ticks?e.ticks(t):e.domain()}function Xi(e,t,n){var r,i,a=e.tickFormat?e.tickFormat(t,n):n?d.format(n):String;return e.type===Ah?(r=a,i=function(e){var t=d.formatSpecifier(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return n=d.format(t),r=d.format(".1f")(1)[1],function(e){var t,i,a=n(e),o=a.indexOf(r);if(o<0)return a;for(t=function(e,t){var n,r=e.lastIndexOf("e");if(0<r)return r;for(r=e.length;--r>t;)if(48<=(n=e.charCodeAt(r))&&n<=57)return r+1}(a,o),i=t<a.length?a.slice(t):"";--t>o;)if("0"!==a[t]){++t;break}return a.slice(0,t)+i}}return d.format(t);var n,r}(n),function(e){return r(e)?i(e):""}):a}function Zi(e){ft.call(this,null,e)}function Ji(e){ft.call(this,null,e)}function Qi(){return ye({})}function Ki(e){return e.exit}function ea(e){ft.call(this,null,e)}function ta(e,t,n){return n===ep&&tp[e.type]?(a=t,function(e,t,n){var r=n[t+1]||n.max||1/0,i=na(e,a),o=na(r,a);return i&&o?i+""+o:o?"< "+o:" "+i}):"discrete"===n?(i=t,function(e,t){return t?i(e):null}):(r=t,function(e){return r(e)});var r,i,a}function na(e,t){return isFinite(e)?t(e):null}function ra(e){ft.call(this,[],e)}function ia(e){return e.source.x}function aa(e){return e.source.y}function oa(e){return e.target.x}function ua(e){return e.target.y}function sa(e){ft.call(this,{},e)}function fa(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function ca(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function la(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function da(e){ft.call(this,null,e)}function ha(e){ft.call(this,null,e),this.modified(!0)}function pa(e,t,n){return G(e)&&(t||n)?(r=e,i=ga(t||[0,1],n),a=i[0],o=T(i)-a,function(e){return r(a+e*o)}):e;var r,i,a,o}function ga(e,t){return t?e.slice().reverse():e}function ma(e){ft.call(this,null,e)}function va(e){ft.call(this,null,e)}function ya(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)(a=e[s])[r]=o,a[i]=o+=Math.abs(n(a))}function ba(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,f=0,c=0;f<s;++f)(a=e[f])[r]=u,a[i]=u=o*(c+=Math.abs(n(a)))}function _a(e,t,n,r,i){for(var a,o,u=0,s=0,f=e.length,c=0;c<f;++c)(a=n(o=e[c]))<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function xa(e,t){return e-t}function wa(e){return function(){return e}}function ka(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=Ma(e,t[r]))return n;return 0}function Ma(e,t){for(var n,r,i,a,o,u,s,f,c,l,d=t[0],h=t[1],p=-1,g=0,m=e.length,v=m-1;g<m;v=g++){var y=e[g],b=y[0],_=y[1],x=e[v],w=x[0],k=x[1];if(l=void 0,a=s=y,u=c=t,((o=f=x)[0]-a[0])*(u[1]-a[1])==(u[0]-a[0])*(o[1]-a[1])&&(n=s[l=+(s[0]===f[0])],r=c[l],i=f[l],n<=r&&r<=i||i<=r&&r<=n))return 0;h<_!=h<k&&d<(w-b)*(h-_)/(k-_)+b&&(p=-p)}return p}function Sa(){}function Ea(){function e(e){var n=u(e);if(Array.isArray(n))n=n.slice().sort(xa);else{var r=a.extent(e),i=r[0],o=r[1];n=a.tickStep(i,o,n),n=a.range(Math.floor(i/n)*n,Math.floor(o/n)*n,n)}return n.map(function(n){return t(e,n)})}function t(e,t){var r=[],a=[];return function(e,t,r){function a(e){var t,i,a=[e[0][0]+u,e[0][1]+s],o=[e[1][0]+u,e[1][1]+s],f=n(a),c=n(o);(t=p[f])?(i=h[c])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(o),r(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(o),p[t.end=c]=t):(t=h[c])?(i=p[f])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(o),r(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(a),h[t.start=f]=t):h[f]=p[c]={start:f,end:c,ring:[a,o]}}var u,s,f,c,l,d,h=new Array,p=new Array;for(u=s=-1,c=e[0]>=t,cp[c<<1].forEach(a);++u<i-1;)f=c,c=e[u+1]>=t,cp[f|c<<1].forEach(a);for(cp[c<<0].forEach(a);++s<o-1;){for(u=-1,c=e[s*i+i]>=t,l=e[s*i]>=t,cp[c<<1|l<<2].forEach(a);++u<i-1;)f=c,c=e[s*i+i+u+1]>=t,d=l,l=e[s*i+u+1]>=t,cp[f|c<<1|l<<2|d<<3].forEach(a);cp[c|l<<3].forEach(a)}for(u=-1,l=e[s*i]>=t,cp[l<<2].forEach(a);++u<i-1;)d=l,l=e[s*i+u+1]>=t,cp[l<<2|d<<3].forEach(a);cp[l<<3].forEach(a)}(e,t,function(n){s(n,e,t),0<function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(n)?r.push([n]):a.push(n)}),a.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(-1!==ka((t=r[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:t,coordinates:r}}function n(e){return 2*e[0]+e[1]*(i+1)*4}function r(e,t,n){e.forEach(function(e){var r,a=e[0],u=e[1],s=0|a,f=0|u,c=t[f*i+s];0<a&&a<i&&s===a&&(r=t[f*i+s-1],e[0]=a+(n-r)/(c-r)-.5),0<u&&u<o&&f===u&&(r=t[(f-1)*i+s],e[1]=u+(n-r)/(c-r)-.5)})}var i=1,o=1,u=a.thresholdSturges,s=r;return e.contour=t,e.size=function(t){if(!arguments.length)return[i,o];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(0<n&&0<r))throw new Error("invalid size");return i=n,o=r,e},e.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:wa(Array.isArray(t)?fp.call(t):t),e):u},e.smooth=function(t){return arguments.length?(s=t?r:Sa,e):s===r},e}function Oa(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=e.data[u+o*r]),n<=u&&(a<=u&&(s-=e.data[u-a+o*r]),t.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function Aa(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=e.data[o+u*r]),n<=u&&(a<=u&&(s-=e.data[o+(u-a)*r]),t.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function Ca(e){return e[0]}function Ra(e){return e[1]}function Ta(e){ft.call(this,null,e)}function za(e){ft.call(this,null,e)}function Na(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),1<arguments.length?(mp[e]=(n=e,r=t,function e(){var t=r();return t.type=n,t.path=h.geoPath().projection(t),t.copy=t.copy||function(){var n=e();return gp.forEach(function(e){t.hasOwnProperty(e)&&n[e](t[e]())}),n.path.pointRadius(t.path.pointRadius()),n},t}),this):mp.hasOwnProperty(e)?mp[e]:null;var n,r}function Da(e){return e&&e.path||pp}function Pa(e){ft.call(this,null,e)}function La(e){ft.call(this,null,e)}function qa(e){ft.call(this,null,e)}function $a(e){ft.call(this,[],e),this.generator=h.geoGraticule()}function ja(e){ft.call(this,null,e),this.modified(!0)}function Fa(e,t,n){G(e[t])&&e[t](n)}function Ia(e){ft.call(this,null,e)}function Ua(e,t,n,r){var i,a,o,u,s=W(t.forces);for(i=0,a=xp.length;i<a;++i)(o=xp[i])!==_p&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u=_p+i,(o=n||t.modified(_p,i)?Wa(s[i]):r&&Ba(s[i],r)?e.force(u):null)&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force(_p+i,null);return e.numForces=s.length,e}function Ba(e,t){var n,r;for(n in e)if(G(r=e[n])&&t.modified(w(r)))return 1;return 0}function Wa(e){var t,n;for(n in bp.hasOwnProperty(e.force)||k("Unrecognized force: "+e.force),t=bp[e.force](),e)G(t[n])&&Ga(t[n],e[n],e);return t}function Ga(e,t,n){e(G(t)?function(e){return t(e,n)}:t)}function Ya(e,t,n){var r={};return e.each(function(e){var i=e.data;n(i)&&(r[t(i)]=e)}),e.lookup=r,e}function Ha(e){ft.call(this,null,e)}function Va(e){return e.values}function Xa(e){ft.call(this,null,e)}function Za(e){Xa.call(this,e)}function Ja(e){Xa.call(this,e)}function Qa(e){ft.call(this,null,e)}function Ka(e){Xa.call(this,e)}function eo(e){ft.call(this,[],e)}function to(e){Xa.call(this,e)}function no(e){ft.call(this,null,e)}function ro(){function e(e,t,n){for(var r,i,a,o,u,c=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=f(s),g=l()<.5?1:-1,m=-g;(r=p(m+=g))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=h));)if(t.x=c+i,t.y=d+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&ao(t,e,s[0])||n&&(u=n,!((o=t).x+o.x1>u[0].x&&o.x+o.x0<u[1].x&&o.y+o.y1>u[0].y&&o.y+o.y0<u[1].y)))){for(var v,y=t.sprite,b=t.width>>5,_=s[0]>>5,x=t.x-(b<<4),w=127&x,k=32-w,M=t.y1-t.y0,S=(t.y+t.y0)*_+(x>>5),E=0;E<M;E++){for(var O=v=0;O<=b;O++)e[S+O]|=v<<k|(O<b?(v=y[E*b+O])>>>w:0);S+=_}return!(t.sprite=null)}return!1}var t,n,r,i,a,o,u,s=[256,256],f=uo,c=[],l=Math.random,d={};return d.layout=function(){for(var f=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(Ip<<5)/t,e.height=Up/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(Mn()),d=function(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=c.length,g=-1,m=[],v=c.map(function(e){return{text:t(e),font:n(e),style:i(e),weight:a(e),rotate:o(e),size:~~r(e),padding:u(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size});++g<p;){var y=v[g];y.x=s[0]*(l()+.5)>>1,y.y=s[1]*(l()+.5)>>1,io(f,y,v,g),y.hasText&&e(d,y,h)&&(m.push(y),h?oo(h,y):h=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return m},d.words=function(e){return arguments.length?(c=e,d):c},d.size=function(e){return arguments.length?(s=[+e[0],+e[1]],d):s},d.font=function(e){return arguments.length?(n=so(e),d):n},d.fontStyle=function(e){return arguments.length?(i=so(e),d):i},d.fontWeight=function(e){return arguments.length?(a=so(e),d):a},d.rotate=function(e){return arguments.length?(o=so(e),d):o},d.text=function(e){return arguments.length?(t=so(e),d):t},d.spiral=function(e){return arguments.length?(f=Bp[e]||e,d):f},d.fontSize=function(e){return arguments.length?(r=so(e),d):r},d.padding=function(e){return arguments.length?(u=so(e),d):u},d.random=function(e){return arguments.length?(l=e,d):l},d}function io(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(Ip<<5)/a,Up/a);var o,u,s,f,c,l=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,s=t.size<<1,t.rotate){var g=Math.sin(t.rotate*Fp),m=Math.cos(t.rotate*Fp),v=o*m,y=o*g,b=s*m,_=s*g;o=Math.max(Math.abs(v+_),Math.abs(v-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(h<s&&(h=s),Ip<<5<=l+o&&(d+=h,h=l=0),Up<=d+s)break;i.translate((l+(o>>1))/a,(d+(s>>1))/a),t.rotate&&i.rotate(t.rotate*Fp),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=s,t.xoff=l,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=o}for(var x=i.getImageData(0,0,(Ip<<5)/a,Up/a).data,w=[];0<=--r;)if((t=n[r]).hasText){for(u=(o=t.width)>>5,s=t.y1-t.y0,f=0;f<s*u;f++)w[f]=0;if(null==(l=t.xoff))return;d=t.yoff;var k=0,M=-1;for(c=0;c<s;c++){for(f=0;f<o;f++){var S=u*c+(f>>5),E=x[(d+c)*(Ip<<5)+(l+f)<<2]?1<<31-f%32:0;w[S]|=E,k|=E}k?M=c:(t.y0++,s--,c--,d++)}t.y1=t.y0+M,t.sprite=w.slice(0,(t.y1-t.y0)*u)}}}function ao(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=32-u,f=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),l=0;l<f;l++){for(var d=r=0;d<=a;d++)if((r<<s|(d<a?(r=i[l*a+d])>>>u:0))&t[c+d])return!0;c+=n}return!1}function oo(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function uo(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function so(e){return"function"==typeof e?e:function(){return e}}function fo(){function e(){var e,r,s=i().length,h=u[1]<u[0],p=u[h-0],g=u[1-h],m=(r=(e=s)-c+2*l,e?0<r?r:1:0);t=(g-p)/(m||1),f&&(t=Math.floor(t)),p+=(g-p-t*(s-c))*d,n=t*(1-c),f&&(p=Math.round(p),n=Math.round(n));var v=a.range(s).map(function(e){return p+t*e});return o(h?v.reverse():v)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,c=0,l=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c=l,e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],c=+e[1],l=u[1]<u[0],d=l?o().reverse():o(),h=d.length-1;if(f==f&&c==c&&(c<f&&(s=f,f=c,c=s),!(c<d[0]||f>u[1-l])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===c?t:a.bisectRight(d,c)-1,f-d[t]>n+1e-10&&++t,l&&(s=t,t=h-r,r=h-s),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return fo().domain(i()).range(u).round(f).paddingInner(c).paddingOuter(l).align(d)},e()}function co(e){return Wp.call(e,function(e){return+e})}function lo(e,t){return 1<arguments.length?(Yp[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):Yp.hasOwnProperty(e)?Yp[e]:void 0;var n,r}function ho(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function po(e,t){tg[e]=f["interpolate"+t],eg[e]=f["scheme"+t]}function go(e){ft.call(this,ro(),e)}function mo(e){return new Uint32Array(e)}function vo(e,t,n){var r=(t<257?function(e){return new Uint8Array(e)}:t<65537?function(e){return new Uint16Array(e)}:mo)(e);return n&&r.set(n),r}function yo(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this.bisect(this.range,e.value),a=e.index,o=i[0],u=i[1],s=a.length;for(n=0;n<o;++n)t[a[n]]|=r;for(n=u;n<s;++n)t[a[n]]|=r;return this}}}function bo(){var e=mo(0),t=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];var u,s,f,c,l,d=n,h=i.length,p=Array(h),g=mo(h);for(f=0;f<h;++f)p[f]=r(i[f]),g[f]=f;if(l=g,(c=p).sort.call(l,function(e,t){var n=c[e],r=c[t];return n<r?-1:r<n?1:0}),p=a.permute(c,l),d)u=t,s=e,t=Array(d+h),e=mo(d+h),function(e,t,n,r,i,a,o,u,s){var f,c=0,l=0;for(f=0;c<r&&l<o;++f)t[c]<i[l]?(u[f]=t[c],s[f]=n[c++]):(u[f]=i[l],s[f]=a[l++]+e);for(;c<r;++c,++f)u[f]=t[c],s[f]=n[c];for(;l<o;++l,++f)u[f]=i[l],s[f]=a[l]+e}(o,u,s,d,p,g,h,t,e);else{if(0<o)for(f=0;f<h;++f)g[f]+=o;t=p,e=g}return n=d+h,{index:g,value:p}},remove:function(r,i){var a,o,u,s=n;for(o=0;!i[e[o]]&&o<s;++o);for(u=o;o<s;++o)i[a=e[o]]||(e[u]=a,t[u]=t[o],++u);n=s-r},bisect:function(e,r){var i;return r?i=r.length:(r=t,i=n),[a.bisectLeft(r,e[0],0,i),a.bisectRight(r,e[1],0,i)]},reindex:function(t){for(var r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function _o(e){var t,n,r,i,a;ft.call(this,(t=8,n=[],r=mo(0),i=vo(0,t),a=vo(0,t),{data:function(){return n},seen:function(){return e=r,t=n.length,r=e.length>=t?e:((i=i||new e.constructor(t)).set(e),i);var e,t,i},add:function(e){for(var t,r=0,i=n.length,a=e.length;r<a;++r)(t=e[r])._index=i++,n.push(t)},remove:function(e,t){var r,o,u,s=n.length,f=Array(s-e),c=n;for(o=0;!t[o]&&o<s;++o)f[o]=n[o],c[o]=o;for(u=o;o<s;++o)r=n[o],t[o]?c[o]=-1:(c[o]=u,i[u]=i[o],a[u]=a[o],(f[u]=r)._index=u++),i[o]=0;return n=f,c},size:function(){return n.length},curr:function(){return i},prev:function(){return a},reset:function(e){a[e]=i[e]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(e,t){i[e]|=t},clear:function(e,t){i[e]&=~t},resize:function(e,n){(i.length<e||t<n)&&(t=Math.max(n,t),i=vo(e,t,i),a=vo(e,t))}}),e),this._indices=null,this._dims=null}
function xo(e){ft.call(this,null,e)}function wo(){function e(){var e,r,s=i().length,h=u[1]<u[0],p=u[h-0],g=u[1-h],m=(r=(e=s)-c+2*l,e?0<r?r:1:0);t=(g-p)/(m||1),f&&(t=Math.floor(t)),p+=(g-p-t*(s-c))*d,n=t*(1-c),f&&(p=Math.round(p),n=Math.round(n));var v=a.range(s).map(function(e){return p+t*e});return o(h?v.reverse():v)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,c=0,l=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c=l,e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],c=+e[1],l=u[1]<u[0],d=l?o().reverse():o(),h=d.length-1;if(f==f&&c==c&&(c<f&&(s=f,f=c,c=s),!(c<d[0]||f>u[1-l])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===c?t:a.bisectRight(d,c)-1,f-d[t]>n+1e-10&&++t,l&&(s=t,t=h-r,r=h-s),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return wo().domain(i()).range(u).round(f).paddingInner(c).paddingOuter(l).align(d)},e()}function ko(e){return ug.call(e,function(e){return+e})}function Mo(e,t){return 1<arguments.length?(fg[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):fg.hasOwnProperty(e)?fg[e]:void 0;var n,r}function So(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Eo(e,t){yg[e]=f["interpolate"+t],vg[e]=f["scheme"+t]}function Oo(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:Eg,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var r=t.value,i=r?E(r)?r:r.user:Eg,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),e.add(null,function(e){var t,n=e.cursor,r=this.value;return E(n)||(r=n.item,n=n.user),t=n&&n!==Eg?n:r||n,"undefined"!=typeof document&&document.body&&(document.body.style.cursor=t),r},{cursor:t})}function Ao(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||k("Unrecognized data set: "+t),n[t]}function Co(e,t){we(t)||k("Second argument to changes must be a changeset.");var n=Ao(this,e);return n.modified=!0,this.pulse(n.input,t)}function Ro(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function To(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function zo(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function No(e,t,n){var r,i,a=e._renderer.canvas();return a&&(i=zo(e),(r=Br(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.vega=function(e,t,n){function r(e){var n,r=a;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(e){if(!e)return n;E(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var a=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:H(e),item:H(t||{}),group:r,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}(e,n,r),t.item=n,t}function Do(e){return e.item}function Po(e){var t=e.item.mark.source;return t.source||t}function Lo(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function qo(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function $o(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&(i.source=!0,e.signal(r.signal,t).run())}},r.debounce&&(i.update=V(r.debounce,i.update))),function(e,t,n,r){var i=qo("div",{class:Ag});i.appendChild(qo("span",{class:Cg},n.name||n.signal)),t.appendChild(i);var a=jo;switch(n.input){case"checkbox":a=Fo;break;case"select":a=Io;break;case"radio":a=Uo;break;case"range":a=Bo}a(e,i,n,r)}(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,function(){i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}}function jo(e,t,n,r){var i=qo("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function Fo(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=qo("input",i);t.appendChild(a),a.addEventListener("change",function(){e.update(a.checked)}),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function Io(e,t,n,r){var i=qo("select",{name:n.signal});n.options.forEach(function(e){var t={value:e};Wo(e,r)&&(t.selected=!0),i.appendChild(qo("option",t,e+""))}),t.appendChild(i),i.addEventListener("change",function(){e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(Wo(n.options[t],e))return void(i.selectedIndex=t)}}function Uo(e,t,n,r){var i=qo("span",{class:Rg});t.appendChild(i),e.elements=n.options.map(function(t){var a=Tg+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};Wo(t,r)&&(o.checked=!0);var u=qo("input",o);return u.addEventListener("change",function(){e.update(t)}),i.appendChild(u),i.appendChild(qo("label",{for:a},t+"")),u}),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)Wo(n[r].value,t)&&(n[r].checked=!0)}}function Bo(e,t,n,r){function i(){c.textContent=f.value,e.update(+f.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var o=n.min||Math.min(0,+r)||0,u=n.max||Math.max(100,+r)||100,s=n.step||a.tickStep(o,u,100),f=qo("input",{type:"range",name:n.signal,min:o,max:u,step:s}),c=qo("label",{},+(f.value=r));t.appendChild(f),t.appendChild(c),f.addEventListener("input",i),f.addEventListener("change",i),e.elements=[f],e.set=function(e){f.value=e,c.textContent=e}}function Wo(e,t){return e===t||e+""==t+""}function Go(e,t,n,r,i){return(t=t||new r(e.loader())).initialize(n,Ro(e),To(e),zo(e),i).background(e._background)}function Yo(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function Ho(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}function Vo(e,t,n){var r=ci(t),i=r&&r.headless;return i?e.runAsync().then(function(){return Go(e,null,null,i,n).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)}function Xo(e){return+e||0}function Zo(e,t){k(e+' for "outer" push: '+O(t))}function Jo(e,t){var n=e.name;if(e.push===zg)t.signals[n]||Zo("No prior signal definition",n),Ng.forEach(function(t){void 0!==e[t]&&Zo("Invalid property ",t)});else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Qo(e){this.type=e}function Ko(e,t){if(!e)throw new Error("ASSERT: "+t)}function eu(e){return 48<=e&&e<=57}function tu(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function nu(e){return 0<="01234567".indexOf(e)}function ru(e){return 10===e||13===e||8232===e||8233===e}function iu(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||92===e||128<=e&&lm.test(String.fromCharCode(e))}function au(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||92===e||128<=e&&dm.test(String.fromCharCode(e))}function ou(){for(var e,t;xg<wg&&(e=_g.charCodeAt(xg),32===(t=e)||9===t||11===t||12===t||160===t||5760<=t&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)||ru(e));)++xg}function uu(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)xg<wg&&tu(_g[xg])?(r=_g[xg++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):wu({},Kg,fm);return String.fromCharCode(i)}function su(){var e,t,n,r;for(t=0,"}"===(e=_g[xg])&&wu({},Kg,fm);xg<wg&&tu(e=_g[xg++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(1114111<t||"}"!==e)&&wu({},Kg,fm),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function fu(){var e,t;for(e=_g.charCodeAt(xg++),t=String.fromCharCode(e),92===e&&(117!==_g.charCodeAt(xg)&&wu({},Kg,fm),++xg,(e=uu("u"))&&"\\"!==e&&iu(e.charCodeAt(0))||wu({},Kg,fm),t=e);xg<wg&&au(e=_g.charCodeAt(xg));)++xg,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==_g.charCodeAt(xg)&&wu({},Kg,fm),++xg,(e=uu("u"))&&"\\"!==e&&au(e.charCodeAt(0))||wu({},Kg,fm),t+=e);return t}function cu(){var e,t;return e=xg,{type:1===(t=92===_g.charCodeAt(xg)?fu():function(){var e,t;for(e=xg++;xg<wg;){if(92===(t=_g.charCodeAt(xg)))return xg=e,fu();if(!au(t))break;++xg}return _g.slice(e,xg)}()).length?Lg:hm.hasOwnProperty(t)?qg:"null"===t?$g:"true"===t||"false"===t?Dg:Lg,value:t,start:e,end:xg}}function lu(){var e,t,n,r,i=xg,a=_g.charCodeAt(xg),o=_g[xg];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++xg,{type:Fg,value:String.fromCharCode(a),start:i,end:xg};default:if(61===(e=_g.charCodeAt(xg+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return xg+=2,{type:Fg,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:xg};case 33:case 61:return xg+=2,61===_g.charCodeAt(xg)&&++xg,{type:Fg,value:_g.slice(i,xg),start:i,end:xg}}}return">>>="===(r=_g.substr(xg,4))?{type:Fg,value:r,start:i,end:xg+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:Fg,value:n,start:i,end:xg+=3}:o===(t=n.substr(0,2))[1]&&0<="+-<>&|".indexOf(o)||"=>"===t?{type:Fg,value:t,start:i,end:xg+=2}:0<="<>=!+-*%&|^/".indexOf(o)?{type:Fg,value:o,start:i,end:++xg}:void wu({},Kg,fm)}function du(){var e,t,n;if(Ko(eu((n=_g[xg]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=xg,e="","."!==n){if(e=_g[xg++],n=_g[xg],"0"===e){if("x"===n||"X"===n)return++xg,function(e){for(var t="";xg<wg&&tu(_g[xg]);)t+=_g[xg++];return 0===t.length&&wu({},Kg,fm),iu(_g.charCodeAt(xg))&&wu({},Kg,fm),{type:jg,value:parseInt("0x"+t,16),start:e,end:xg}}(t);if(nu(n))return function(e){for(var t="0"+_g[xg++];xg<wg&&nu(_g[xg]);)t+=_g[xg++];return(iu(_g.charCodeAt(xg))||eu(_g.charCodeAt(xg)))&&wu({},Kg,fm),{type:jg,value:parseInt(t,8),octal:!0,start:e,end:xg}}(t);n&&eu(n.charCodeAt(0))&&wu({},Kg,fm)}for(;eu(_g.charCodeAt(xg));)e+=_g[xg++];n=_g[xg]}if("."===n){for(e+=_g[xg++];eu(_g.charCodeAt(xg));)e+=_g[xg++];n=_g[xg]}if("e"===n||"E"===n)if(e+=_g[xg++],"+"!==(n=_g[xg])&&"-"!==n||(e+=_g[xg++]),eu(_g.charCodeAt(xg)))for(;eu(_g.charCodeAt(xg));)e+=_g[xg++];else wu({},Kg,fm);return iu(_g.charCodeAt(xg))&&wu({},Kg,fm),{type:jg,value:parseFloat(e),start:t,end:xg}}function hu(){var e,t,n,r;return kg=null,ou(),e=xg,t=function(){var e,t,n,r;for(Ko("/"===(e=_g[xg]),"Regular expression literal must start with a slash"),t=_g[xg++],r=n=!1;xg<wg;)if(t+=e=_g[xg++],"\\"===e)ru((e=_g[xg++]).charCodeAt(0))&&wu({},om),t+=e;else if(ru(e.charCodeAt(0)))wu({},om);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||wu({},om),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(n=t="";xg<wg&&au((e=_g[xg]).charCodeAt(0));)++xg,"\\"===e&&xg<wg?wu({},Kg,fm):(n+=e,t+=e);return 0<=n.search(/[^gimuy]/g)&&wu({},am,n),{value:n,literal:t}}(),r=function(e,t){var n=e;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void wu({},am)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:xg}}function pu(){var e;return ou(),wg<=xg?{type:Pg,start:xg,end:xg}:iu(e=_g.charCodeAt(xg))?cu():40===e||41===e||59===e?lu():39===e||34===e?function(){var e,t,n,r,i="",a=!1;for(Ko("'"===(e=_g[xg])||'"'===e,"String literal must starts with a quote"),t=xg,++xg;xg<wg;){if((n=_g[xg++])===e){e="";break}if("\\"===n)if((n=_g[xg++])&&ru(n.charCodeAt(0)))"\r"===n&&"\n"===_g[xg]&&++xg;else switch(n){case"u":case"x":"{"===_g[xg]?(++xg,i+=su()):i+=uu(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:nu(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),xg<wg&&nu(_g[xg])&&(a=!0,r=8*r+"01234567".indexOf(_g[xg++]),0<="0123".indexOf(n)&&xg<wg&&nu(_g[xg])&&(r=8*r+"01234567".indexOf(_g[xg++]))),i+=String.fromCharCode(r)):i+=n}else{if(ru(n.charCodeAt(0)))break;i+=n}}return""!==e&&wu({},Kg,fm),{type:Ig,value:i,octal:a,start:t,end:xg}}():46===e?eu(_g.charCodeAt(xg+1))?du():lu():eu(e)?du():lu()}function gu(){var e;return xg=(e=kg).end,kg=pu(),xg=e.end,e}function mu(){var e;e=xg,kg=pu(),xg=e}function vu(e,t,n){var r=new Qo("||"===e||"&&"===e?Vg:Bg);return r.operator=e,r.left=t,r.right=n,r}function yu(e){var t=new Qo(Yg);return t.name=e,t}function bu(e){var t=new Qo(Hg);return t.value=e.value,t.raw=_g.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function _u(e,t,n){var r=new Qo(Xg);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function xu(e,t,n){var r=new Qo(Jg);return r.key=t,r.value=n,r.kind=e,r}function wu(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return Ko(t<r.length,"Message reference must be in range"),r[t]});throw(n=new Error(i)).index=xg,n.description=i,n}function ku(e){e.type===Pg&&wu(e,im),e.type===jg&&wu(e,em),e.type===Ig&&wu(e,tm),e.type===Lg&&wu(e,nm),e.type===qg&&wu(e,rm),wu(e,Kg,e.value)}function Mu(e){var t=gu();t.type===Fg&&t.value===e||ku(t)}function Su(e){return kg.type===Fg&&kg.value===e}function Eu(e){return kg.type===qg&&kg.value===e}function Ou(){var e,t,n=[];for(xg=kg.start,Mu("[");!Su("]");)Su(",")?(gu(),n.push(null)):(n.push(Lu()),Su("]")||Mu(","));return gu(),e=n,(t=new Qo(Ug)).elements=e,t}function Au(){var e;return xg=kg.start,(e=gu()).type===Ig||e.type===jg?(e.octal&&wu(e,um),bu(e)):yu(e.value)}function Cu(){var e,t,n,r,i,a,o,u=[],s={},f=String;for(xg=kg.start,Mu("{");!Su("}");)i=r=n=void 0,xg=kg.start,t="$"+((e=(n=kg).type===Lg?(i=Au(),Mu(":"),xu("init",i,Lu())):n.type!==Pg&&n.type!==Fg?(r=Au(),Mu(":"),xu("init",r,Lu())):void ku(n)).key.type===Yg?e.key.name:f(e.key.value)),Object.prototype.hasOwnProperty.call(s,t)?wu({},sm):s[t]=!0,u.push(e),Su("}")||Mu(",");return Mu("}"),a=u,(o=new Qo(Zg)).properties=a,o}function Ru(){var e,t,n,r;if(Su("("))return Mu("("),r=qu(),Mu(")"),r;if(Su("["))return Ou();if(Su("{"))return Cu();if(e=kg.type,xg=kg.start,e===Lg||pm[kg.value])n=yu(gu().value);else if(e===Ig||e===jg)kg.octal&&wu(kg,um),n=bu(gu());else{if(e===qg)throw new Error(cm);e===Dg?((t=gu()).value="true"===t.value,n=bu(t)):e===$g?((t=gu()).value=null,n=bu(t)):Su("/")||Su("/=")?(n=bu(hu()),mu()):ku(gu())}return n}function Tu(){var e=[];if(Mu("("),!Su(")"))for(;xg<wg&&(e.push(Lu()),!Su(")"));)Mu(",");return Mu(")"),e}function zu(){var e,t;return xg=kg.start,e=gu(),(t=e).type!==Lg&&t.type!==qg&&t.type!==Dg&&t.type!==$g&&ku(e),yu(e.value)}function Nu(){var e=function(){var e,t,n,r,i,a;for(e=Ru();;)if(Su("."))Mu("."),e=_u(".",e,zu());else if(Su("("))t=Tu(),r=e,i=t,a=void 0,(a=new Qo(Wg)).callee=r,a.arguments=i,e=a;else{if(!Su("["))break;n=void 0,Mu("["),n=qu(),Mu("]"),e=_u("[",e,n)}return e}();if(kg.type===Fg&&(Su("++")||Su("--")))throw new Error(cm);return e}function Du(){var e,t,n,r,i;if(kg.type!==Fg&&kg.type!==qg)t=Nu();else{if(Su("++")||Su("--"))throw new Error(cm);if(Su("+")||Su("-")||Su("~")||Su("!"))e=gu(),t=Du(),n=e.value,r=t,(i=new Qo(Qg)).operator=n,i.argument=r,i.prefix=!0,t=i;else{if(Eu("delete")||Eu("void")||Eu("typeof"))throw new Error(cm);t=Nu()}}return t}function Pu(e){var t=0;if(e.type!==Fg&&e.type!==qg)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Lu(){var e,t,n,r,i,a,o;return e=function(){var e,t,n,r,i,a,o,u,s,f;if(e=kg,s=Du(),0===(i=Pu(r=kg)))return s;for(r.prec=i,gu(),t=[e,kg],a=[s,r,o=Du()];0<(i=Pu(kg));){for(;2<a.length&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=vu(u,s,o),a.push(n);(r=gu()).prec=i,a.push(r),t.push(kg),n=Du(),a.push(n)}for(n=a[f=a.length-1],t.pop();1<f;)t.pop(),n=vu(a[f-1].value,a[f-2],n),f-=2;return n}(),Su("?")&&(gu(),t=Lu(),Mu(":"),n=Lu(),r=e,i=t,a=n,(o=new Qo(Gg)).test=r,o.consequent=i,o.alternate=a,e=o),e}function qu(){var e=Lu();if(Su(","))throw new Error(cm);return e}function $u(e){function t(t,n,r){return function(i){return a=t,u=n,s=r,f=e((o=i)[0]),u&&(f=u+"("+f+")",0===u.lastIndexOf("new ",0)&&(f="("+f+")")),f+"."+a+(s<0?"":0===s?"()":"("+o.slice(1).map(e).join(",")+")");var a,o,u,s,f}}var n="new Date",r="String";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&k("Missing arguments to clamp function."),3<t.length&&k("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),slice:t("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),replace:t("replace",r),regexp:"RegExp",test:t("test","RegExp"),if:function(t){t.length<3&&k("Missing arguments to if function."),3<t.length&&k("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function ju(e,t,n){var r=e+":"+n,i=mm[r];return i&&i[0]===t||(mm[r]=i=[t,t(n)]),i[1]}function Fu(e,t){return ju("timeFormat",i.timeFormat,t)(e)}function Iu(e,t,n){return vm.setMonth(e),vm.setDate(t),Fu(vm,n)}function Uu(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function Bu(e,t,n){var r=e-t+2*n;return e?0<r?r:1:0}function Wu(){function e(){var e=i().length,r=u[1]<u[0],s=u[r-0],h=u[1-r],p=Bu(e,c,l);t=(h-s)/(p||1),f&&(t=Math.floor(t)),s+=(h-s-t*(e-c))*d,n=t*(1-c),f&&(s=Math.round(s),n=Math.round(n));var g=a.range(e).map(function(e){return s+t*e});return o(r?g.reverse():g)}var t,n,r=s.scaleOrdinal().unknown(void 0),i=r.domain,o=r.range,u=[0,1],f=!1,c=0,l=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(u=[+t[0],+t[1]],e()):u.slice()},r.rangeRound=function(t){return u=[+t[0],+t[1]],f=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(f=!!t,e()):f},r.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c=l,e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),e()):l},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,s,f=+e[0],c=+e[1],l=u[1]<u[0],d=l?o().reverse():o(),h=d.length-1;if(f==f&&c==c&&(c<f&&(s=f,f=c,c=s),!(c<d[0]||f>u[1-l])))return t=Math.max(0,a.bisectRight(d,f)-1),r=f===c?t:a.bisectRight(d,c)-1,f-d[t]>n+1e-10&&++t,l&&(s=t,t=h-r,r=h-s),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return Wu().domain(i()).range(u).round(f).paddingInner(c).paddingOuter(l).align(d)},e()}function Gu(e){return wm.call(e,function(e){return+e})}function Yu(e,t){return 1<arguments.length?(Mm[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):Mm.hasOwnProperty(e)?Mm[e]:void 0;var n,r}function Hu(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Vu(e,t){Nm[e]=f["interpolate"+t],zm[e]=f["scheme"+t]}function Xu(e,t){var n=t-e;return function(t){return e+t*n}}function Zu(e,t){var n;return G(e)?e:E(e)?(n=t.scales[e])&&n.value:void 0}function Ju(e,t,n){var r=_m+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(e){}}function Qu(e,t,n,r){if(t[0].type===bm)Ju(n,r,t[0].value);else if("Identifier"===t[0].type)for(e in n.scales)Ju(n,r,e)}function Ku(e,t){return function(n,r,i){if(n){var a=Zu(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}function es(e){var t=this.context.data[e];return t?t.values.value:[]}function ts(e,t,n,r){t[0].type!==bm&&k("First argument to data functions must be a string literal.");var i=t[0].value,a=xm+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function ns(e){return e.data}function rs(e,t){var n=es.call(t,e);return n.root&&n.root.lookup||qm}function is(e,t,n,r){var i,a=t[0],o=t[t.length-1];return o<a&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=e:a<e)&&(r?e<=o:e<o)}function as(e,t){return e===t||e!=e&&t!=t||!(!vc(e)||!vc(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!as(e[n],t[n]))return!1;return!0}(e,t)}function os(e){return function(t){for(var n in e)if(!as(t[n],e[n]))return!1;return!0}}function us(e,t){for(var n,r=t.fields,i=t.values,a=t.getter||(t.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||A(r[u]),ee(n=a[u](e))&&(n=z(n)),ee(i[u])&&(i[u]=z(i[u])),t[$m+r[u]]){if(ee(i[u][0])&&(i[u]=i[u].map(z)),!is(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function ss(e,t){for(var n,r,i=t.intervals,a=i.length,o=0;o<a;++o){if(n=i[o].extent,r=(i[o].getter||(i[o].getter=A(i[o].field)))(e),!n||n[0]===n[1])return!1;if(ee(r)&&(r=z(r)),ee(n[0])&&(n=i[o].extent=n.map(z)),te(n[0])&&!is(r,n))return!1;if(E(n[0])&&n.indexOf(r)<0)return!1}return!0}function fs(e,t,n,r){for(var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=f?f[Im]&&f[Im].value:void 0,d=n===jm,h=c.length,p=0;p<h;++p)if(i=c[p],l&&d){if(-1===(o=(a=a||{})[u=i.unit]||0))continue;if(s=r(t,i),a[u]=s?-1:++o,s&&1===l.size)return!0;if(!s&&o===l.get(u).count)return!1}else if(d^(s=r(t,i)))return s;return h&&d}function cs(e,t,n){return fs.call(this,e,t,n,us)}function ls(e,t,n,r){t[0].type!==bm&&k("First argument to indata must be a string literal.");var i=t[0].value;(2<=t.length&&t[t.length-1].value)!==jm||r.hasOwnProperty("@unit")||(r["@unit"]=n.getData(i).indataRef(n,"unit")),ts(0,t,n,r)}function ds(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=f?f[Im]&&f[Im].value:void 0,d=c[0],h=0;if(d){for(i=t?d.encodings.length:d.fields.length;h<i;++h)if(t&&d.encodings[h]===t||n&&d.fields[h]===n){a=h,u=d[$m+d.fields[h]];break}return l&&1===l.size&&(r=Fm),l&&r===jm?(s=c.reduce(function(e,t){return(e[t.unit]||(e[t.unit]=[])).push({unit:t.unit,value:t.values[a]}),e},{}),o=Object.keys(s).map(function(e){return{unit:e,value:u?ps(s[e],Fm):hs(s[e],Fm)}})):o=c.map(function(e){return{unit:e.unit,value:e.values[a]}}),u?ps(o,r):hs(o,r)}}function hs(e,t){for(var n,r,i,a,o={},u=0,s={},f=[],c=0,l=e.length;c<l;++c)r=(n=e[c]).unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],t===jm&&i.count!==u||f.push(i.value);return f.length?f:void 0}function ps(e,t){for(var n,r,i,a,o=t===jm?ms:gs,u=0,s=e.length;u<s;++u)ee((n=e[u].value)[0])&&(n=n.map(z)),i=n[0],(a=n[1])<i&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function gs(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function ms(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function vs(e,t,n){return 1===arguments.length?Um[e]:(Um[e]=t,n&&(Wm[e]=n),Vm&&(Vm.functions[e]="this."+e),this)}function ys(e,t,n){var r,i,a={};try{r=function(e){xg=0,wg=(_g=e).length,kg=null,mu();var t=qu();if(kg.type!==Pg)throw new Error("Unexpect token after expression.");return t}(e=E(e)?e:O(e)+"")}catch(t){k("Expression parse error: "+e)}return r.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,r=Hm.visitors[n];r&&r(n,e.arguments,t,a)}}),(i=Vm(r)).globals.forEach(function(e){var n=Xm+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function bs(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function _s(e,t,n,r){return new bs(e,t,n,r)}function xs(e,t){return _s("operator",e,t)}function ws(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function ks(e,t){return t?{$field:e,$name:t}:{$field:e}}function Ms(e,t){return{$compare:e,$order:t}}function Ss(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function Es(e){return e&&e.signal}function Os(e,t){return null!=e?e:t}function As(e){return e&&e.signal||e}function Cs(e,t){return(e.merge?Rs:e.stream?Ts:e.type?zs:k("Invalid stream specification: "+O(e)))(e,t)}function Rs(e,t){var n=Ns({merge:e.merge.map(function(e){return Cs(e,t)})},e,t);return t.addStream(n).id}function Ts(e,t){var n=Ns({stream:Cs(e.stream,t)},e,t);return t.addStream(n).id}function zs(e,t){var n,r,i;return e.type===tv?(n=t.event(tv,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((i=e.source)===Km?ev:i||ev,e.type),r=Ns({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function Ns(e,t,n){var r,i,a,o,u=t.between;return u&&(2!==u.length&&k('Stream "between" parameter must have 2 entries: '+O(t)),e.between=[Cs(u[0],n),Cs(u[1],n)]),u=t.filter?W(t.filter):[],(t.marktype||t.markname||t.markrole)&&u.push((r=t.marktype,i=t.markname,a=t.markrole,(o="event.item")+(r&&"*"!==r?"&&"+o+".mark.marktype==='"+r+"'":"")+(a?"&&"+o+".mark.role==='"+a+"'":"")+(i?"&&"+o+".mark.name==='"+i+"'":""))),t.source===Km&&u.push("inScope(event.item)"),u.length&&(e.filter=ys("("+u.join(")&&(")+")").$expr),null!=(u=t.throttle)&&(e.throttle=+u),null!=(u=t.debounce)&&(e.debounce=+u),t.consume&&(e.consume=!0),e}function Ds(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&0<=i.indexOf(a)?--o:r&&0<=r.indexOf(a)&&++o}return t}function Ps(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=Ds(e,i,sv,rv+av,iv+ov),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function Ls(e){return"["===e[0]?function(e){var t,n,r=e.length,i=1;if((i=Ds(e,i,iv,rv,iv))===r)throw"Empty between selector: "+e;if(2!==(t=Ps(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if((e=e.slice(i+1).trim())[0]!==cv)throw"Expected '>' after between selector: "+e;return t=t.map(Ls),(n=Ls(e.slice(1).trim())).between?{between:t,stream:n}:(n.between=t,n)}(e):function(e){var t,n,r={source:Gm},i=[],a=[0,0],o=0,u=0,s=e.length,f=0;if(e[s-1]===ov){if(!(0<=(f=e.lastIndexOf(av))))throw"Unmatched right brace: "+e;try{a=function(e){var t=e.split(sv);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}(e.substring(f+1,s-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,f).trim(),s=e.length,f=0}if(!s)throw e;if(e[0]===fv&&(o=++f),(t=Ds(e,f,uv))<s&&(i.push(e.substring(u,t).trim()),u=f=++t),(f=Ds(e,f,rv))===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,f).trim()),n=[],(u=++f)===s)throw"Unmatched left bracket: "+e;for(;f<s;){if((f=Ds(e,f,iv))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,f).trim()),f<s-1&&e[++f]!==rv)throw"Expected left bracket: "+e;u=++f}if(!(s=i.length)||lv.test(i[s-1]))throw"Invalid event selector: "+e;1<s?(r.type=i[1],o?r.markname=i[0].slice(1):(c=i[0],Ym.hasOwnProperty(c)?r.marktype=i[0]:r.source=i[0])):r.type=i[0];var c;return"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}(e)}function qs(e,t,n){var r,i,a,o,u,s=e.events,f=e.update,c=e.encode,l=[];s||k("Signal update missing events specification."),E(s)&&(a=s,o=t.isSubscope()?Km:ev,Gm=o||nv,Ym=u||dv,s=Ps(a.trim()).map(Ls)),(s=W(s).filter(function(e){return e.signal||e.scale?(l.push(e),0):1})).length&&l.push(1<s.length?{merge:s}:s[0]),null!=c&&(f&&k("Signal encode and update are mutually exclusive."),f="encode(item(),"+O(c)+")"),r=E(f)?ys(f,t,hv):null!=f.expr?ys(f.expr,t,hv):null!=f.value?f.value:null!=f.signal?{$expr:"_.value",$params:{value:t.signalRef(f.signal)}}:k("Invalid signal update specification."),i={target:n,update:r},e.force&&(i.options={force:!0}),l.forEach(function(e){var n,r;t.addUpdate(X((r=t,{source:(n=e).signal?r.signalRef(n.signal):n.scale?r.scaleRef(n.scale):Cs(n,r)}),i))})}function $s(e){return function(t,n,r){return _s(e,n,t||void 0,r)}}function js(e){return Gv.hasOwnProperty(e)}function Fs(e){return Bv.hasOwnProperty(e)}function Is(e){return"quantile"===e}function Us(e,t){var n,r,i,a,o=t.getScale(e.name).params;for(n in o.domain=Gs(e.domain,e,t),null!=e.range&&(o.range=function e(t,n,r){var i=t.range,a=n.config.range;if(i.signal)return n.signalRef(i.signal);if(E(i)){if(a&&a.hasOwnProperty(i))return t=X({},t,{range:a[i]}),e(t,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=js(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:k("Unrecognized scale range value: "+O(i))}else{if(i.scheme)return r.scheme=Bs(i.scheme,n),i.extent&&(r.schemeExtent=(o=i.extent,u=n,o.signal?u.signalRef(o.signal):o.map(function(e){return Bs(e,u)}))),void(i.count&&(r.schemeCount=Bs(i.count,n)));if(i.step)return void(r.rangeStep=Bs(i.step,n));if(js(t.type)&&!vc(i))return Gs(i,t,n);vc(i)||k("Unsupported range type: "+O(i))}var o,u;return i.map(function(e){return Bs(e,n)})}(e,t,o)),null!=e.interpolate&&(r=e.interpolate,(i=o).interpolate=Bs(r.type||r),null!=r.gamma&&(i.interpolateGamma=Bs(r.gamma))),null!=e.nice&&(a=e.nice,o.nice=S(a)?{interval:Bs(a.interval),step:Bs(a.step)}:Bs(a)),e)o.hasOwnProperty(n)||"name"===n||(o[n]=Bs(e[n],t))}function Bs(e,t){return S(e)?e.signal?t.signalRef(e.signal):k("Unsupported object: "+O(e)):e}function Ws(e){k("Can not find data set: "+O(e))}function Gs(e,t,n){return e?e.signal?n.signalRef(e.signal):(vc(e)?function(e,t,n){return e.map(function(e){
return Bs(e,n)})}:e.fields?function(e,t,n){var r=e.data,i=e.fields.reduce(function(e,t){return t=E(t)?{data:r,field:t}:vc(t)||t.signal?function(e,t){var n="_:vega:_"+Fv++,r=vv({});if(vc(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+O(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Lv({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e},[]);return(js(t.type)?function(e,t,n){var r,i,a;return r=n.map(function(e){var n=t.getData(e.data);return n||Ws(e.data),n.countsRef(t,e.field)}),i=t.add(pv({groupby:Jm,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(vv({pulse:ws(i)})),ws(t.add(jv({field:Jm,sort:t.sortRef(Ys(e.sort,!0)),pulse:ws(a)})))}:Is(t.type)?function(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||Ws(e.data),n.domainRef(t,e.field)});return ws(t.add(Ov({values:r})))}:function(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||Ws(e.data),n.extentRef(t,e.field)});return ws(t.add(Ev({extents:r})))})(e,n,i)}:function(e,t,n){var r=n.getData(e.data);return r||Ws(e.data),js(t.type)?r.valuesRef(n,e.field,Ys(e.sort,!1)):Is(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)})(e,t,n):void(null==t.domainMin&&null==t.domainMax||k("No scale domain defined for domainMin/domainMax to override."))}function Ys(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?k("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&k("Multiple domain scales support op count only."):k("No field provided for sort aggregate op: "+e.op):S(e)?e.field="key":e={field:"key"}),e}function Hs(e,t,n){return vc(e)?e.map(function(e){return Hs(e,t,n)}):S(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:k("Unsupported parameter object: "+O(e)):e}function Vs(e,t,n,r){var i=ys(e,t);return i.$fields.forEach(function(e){r[e]=1}),X(n,i.$params),i.$expr}function Xs(e,t,n,r){return function e(t,n,r,i){var a,o,u;if(t.signal)a="datum",u=Vs(t.signal,n,r,i);else if(t.group||t.parent){for(o=Math.max(1,t.level||1),a="item";0<o--;)a+=".mark.group";t.parent?(u=t.parent,a+=".datum"):u=t.group}else t.datum?(a="datum",u=t.datum):k("Invalid field reference: "+O(t));return t.signal||(E(u)?(i[u]=1,u=M(u).map(O).join("][")):u=e(u,n,r,i)),a+"["+u+"]"}(S(e)?e:{datum:e},t,n,r)}function Zs(e,t,n,r,i){var a,o,u,s=Js(e.scale,n,r,i);return null!=e.range?(o=s+".range()",t=0===(a=+e.range)?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=function(e,t){if(!E(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}(e.scale,n))&&(a=(o=s+".bandwidth")+"()"+(1===(a=+e.band)?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t}function Js(e,t,n,r){var i;if(E(e))i=_m+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=O(i);else{for(i in t.scales)n[_m+i]=t.scaleRef(i);i=O(_m)+"+"+(e.signal?"("+Vs(e.signal,t,n,r)+")":Xs(e,t,n,r))}return"_["+i+"]"}function Qs(e,t,n,r){return S(e)?"("+Ks(null,e,t,n,r)+")":e}function Ks(e,t,n,r,i){if(null!=t.gradient)return o=n,u=r,s=i,"this.gradient("+Js((a=t).gradient,o,u,s)+","+O(a.start)+","+O(a.stop)+","+O(a.count)+")";var a,o,u,s,f=t.signal?Vs(t.signal,n,r,i):t.color?function(e,t,n,r){function i(e,i,a,o){return"this."+e+"("+[Ks(null,i,t,n,r),Ks(null,a,t,n,r),Ks(null,o,t,n,r)].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}(t.color,n,r,i):null!=t.field?Xs(t.field,n,r,i):void 0!==t.value?O(t.value):void 0;return null!=t.scale&&(f=Zs(t,f,n,r,i)),void 0===f&&(f=null),null!=t.exponent&&(f="Math.pow("+f+","+Qs(t.exponent,n,r,i)+")"),null!=t.mult&&(f+="*"+Qs(t.mult,n,r,i)),null!=t.offset&&(f+="+"+Qs(t.offset,n,r,i)),t.round&&(f="Math.round("+f+")"),f}function ef(e,t,n){return e+"["+O(t)+"]="+n+";"}function tf(e,t,n,r,i){var a="";return t.forEach(function(e){var t=Ks(0,e,n,r,i);a+=e.test?Vs(e.test,n,r,i)+"?"+t+":":t}),ef("o",e,a)}function nf(e,t,n,r){var i,a,o,u,s,f={},c="var o=item,datum=o.datum,$;";for(i in e)a=e[i],c+=vc(a)?tf(i,a,r,n,f):ef("o",i,Ks(0,a,r,n,f));return o=e,s="",dy[u=t]||(o.x2&&(o.x?(hy[u]&&(s+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),s+="o.width=o.x2-o.x;"):s+="o.x=o.x2-(o.width||0);"),o.xc&&(s+="o.x=o.xc-(o.width||0)/2;"),o.y2&&(o.y?(hy[u]&&(s+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),s+="o.height=o.y2-o.y;"):s+="o.y=o.y2-(o.height||0);"),o.yc&&(s+="o.y=o.yc-(o.height||0)/2;")),c+=s,{$expr:c+="return 1;",$fields:Object.keys(f),$output:Object.keys(e)}}function rf(e){return S(e)?X({},e):{value:e}}function af(e,t,n){return null!=n?(e[t]=S(n)&&!vc(n)?n:{value:n},1):0}function of(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=X(e[r]||{},t[r]));return e}function uf(e,t,n,r,i,a){var o,u;for(u in(a=a||{}).encoders={$encode:o={}},e=function(e,t,n,r,i){var a,o,u={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null);for(a in o=n===gy?i.group:n===py?X({},i.mark,i[t]):null)ff(a,e)||("fill"===a||"stroke"===a)&&(ff("fill",e)||ff("stroke",e))||(u[a]=sf(o[a]));return W(r).forEach(function(t){var n=i.style&&i.style[t];for(var r in n)ff(r,e)||(u[r]=sf(n[r]))}),(e=X({},e)).enter=X(u,e.enter),e}(e,t,n,r,i.config))o[u]=nf(e[u],t,a,i);return a}function sf(e){return e&&e.signal?{signal:e.signal}:{value:e}}function ff(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function cf(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:of(a,o,ly)}}function lf(e,t,n){return Os(t[e],n[e])}function df(e,t){return Os(e.direction,t)===Zv}function hf(e,t){return Os(e.gradientLength,t.gradientLength||t.gradientWidth)}function pf(e,t){return Os(e.gradientThickness,t.gradientThickness||t.gradientHeight)}function gf(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function mf(e,t,n,r){var i,a,o,u,s={value:0},f=df(e,t.gradientDirection),c=rf(pf(e,t)),l=hf(e,t),d=lf("labelOverlap",e,t),h={},p="";return h.enter=i={opacity:s},af(i,"fill",lf("labelColor",e,t)),af(i,"font",lf("labelFont",e,t)),af(i,"fontSize",lf("labelFontSize",e,t)),af(i,"fontWeight",lf("labelFontWeight",e,t)),af(i,"limit",Os(e.labelLimit,t.gradientLabelLimit)),h.exit={opacity:s},h.update=a={opacity:{value:1},text:{field:Qv}},f?(i.align={value:"left"},i.baseline=a.baseline={signal:qy},o="y",u="x",p="1-"):(i.align=a.align={signal:Ly},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:p+"datum."+ey,mult:l},i[u]=a[u]=c,c.offset=Os(e.labelOffset,t.gradientLabelOffset)||0,e=cf(Py,Oy,iy,ry,r,h,n),d&&(e.overlap={method:d,order:"datum."+Jv}),e}function vf(e,t,n,r,i,a,o,u){return{type:Ty,name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}}function yf(e,t){return{align:lf("gridAlign",e,t),center:{row:!0,column:!1},columns:(n=e,r=t,Os(n.columns,Os(r.columns,+df(n,r.symbolDirection)))),padding:{row:lf("rowPadding",e,t),column:lf("columnPadding",e,t)}};var n,r}function bf(e){return S(e)&&e.signal?e.signal:O(e)}function _f(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===Ty?my:t||py:t}function xf(e,t){var n=ct(e.type);n||k("Unrecognized transform type: "+O(e.type));var r=_s(n.type.toLowerCase(),null,wf(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function wf(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)o[(r=e.params[i]).name]=kf(r,t,n);return o}function kf(e,t,n){var r,i,a,o=e.type,u=t[e.name];return"index"===o?function(e,t,n){return E(t.from)||k('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==u?"param"===o?(i=n,a=t[(r=e).name],r.array?(vc(a)||k("Expected an array of sub-parameters. Instead: "+O(a)),a.map(function(e){return Sf(r,e,i)})):Sf(r,a,i)):"projection"===o?n.projectionRef(t[e.name]):e.array&&!Es(u)?u.map(function(t){return Mf(e,t,n)}):Mf(e,u,n):void(e.required&&k("Missing required "+O(t.type)+" parameter: "+O(e.name)))}function Mf(e,t,n){var r=e.type;if(Es(t))return Ef(r)?k("Expression references can not be signals."):Of(r)?n.fieldRef(t):Af(r)?n.compareRef(t):n.signalRef(t.signal);var i,a,o=e.expr||Of(r);return o&&(a=t)&&a.expr?ys(t.expr,n):o&&(i=t)&&i.field?ks(t.field):Ef(r)?ys(t,n):"data"===r?ws(n.getData(t).values):Of(r)?ks(t):Af(r)?n.compareRef(t):t}function Sf(e,t,n){var r,i,a,o,u;for(o=0,u=e.params.length;o<u;++o){for(a in(i=e.params[o]).key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||k("Unsupported parameter: "+O(t)),r=X(wf(i,t,n),i.key),ws(n.add(Cv(r)))}function Ef(e){return"expr"===e}function Of(e){return"field"===e}function Af(e){return"compare"===e}function Cf(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ws(t.getData(e.data).output)}function Rf(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Tf(e){return E(e)?e:null}function zf(e,t,n){var r,i=Ss(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function Nf(e,t,n,r,i,a,o){var u,s,f,c=t[n]||(t[n]={}),l=S(f=a)?(f.order===Qm?"-":"+")+Ss(f.op,f.field):"",d=Tf(i);if(null!=d&&(e=t.scope,u=c[d+=l?"|"+l:""]),!u){var h=a?{field:Jm,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:ws(t.output)};l&&(h.sort=e.sortRef(a)),s=e.add(_s(r,void 0,h)),o&&(t.index[i]=s),u=ws(s),null!=d&&(c[d]=u)}return u}function Df(e,t,n){var r,i=e.remove,a=e.insert,o=e.toggle,u=e.modify,s=e.values,f=t.add(xs());r=ys("if("+e.trigger+',modify("'+n+'",'+[a,i,o,u,s].map(function(e){return null==e?"null":e}).join(",")+"),0)",t),f.update=r.$expr,f.params=r.$params}function Pf(e,t){var n,r,i,a,o,u,s,f,c,l,d,h,p,g,m,v,y,b,_,x,w,M,E,A,C,R,T,z,N,D,P,L,q,$,j,F,I,U,B,G,Y,H,V=_f(e),Z=e.type===Ty,J=e.from&&e.from.facet,Q=e.layout||V===my||V===gy,K=V===py||Q||J,ee=e.overlap;g=e.from,m=Z,v=t,g?(y=g.facet)&&(m||k("Only group marks can be faceted."),null!=y.field?x=w=Cf(y,v):(g.data?w=ws(v.getData(g.data).aggregate):((_=xf(X({type:"aggregate",groupby:W(y.groupby)},y.aggregate),v)).params.key=v.keyRef(y.groupby),_.params.pulse=Cf(y,v),x=w=ws(v.add(_))),b=v.keyRef(y.groupby,!0))):x=ws(v.add(vv(null,[{}]))),x||(x=Cf(g,v)),i={key:b,pulse:x,parent:w},c=ws(r=t.add(bv({key:i.key||(e.key?ks(e.key):void 0),pulse:i.pulse,clean:!Z}))),r=a=t.add(vv({pulse:c})),l=ws(r=t.add(Sv({markdef:(T=e,{marktype:T.type,name:T.name||void 0,role:T.role||_f(T),zindex:+T.zindex||void 0}),interactive:(C=e.interactive,R=t,C&&C.signal?R.signalRef(C.signal):!1!==C),clip:(M=e.clip,E=t,S(M)&&(M.signal?A=M.signal:M.path?A="pathShape("+bf(M.path)+")":M.sphere&&(A="geoShape("+bf(M.sphere)+', {type: "Sphere"})')),A?E.signalRef(A):!!M),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ws(r)}))),(r=t.add(_v(uf(e.encode,e.type,V,e.style,t,{pulse:l})))).params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=xf(e,t);(n.metadata.generates||n.metadata.changes)&&k("Mark transforms should not generate new data."),n.params.pulse=ws(r),t.add(r=n)}),e.sort&&(r=t.add(qv({sort:t.compareRef(e.sort,!0),pulse:ws(r)}))),d=ws(r),(J||Q)&&(h=ws(Q=t.add($v({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:l,pulse:d})))),p=ws(o=t.add(mv({mark:l,pulse:h||d}))),Z&&(K&&((n=t.operators).pop(),Q&&n.pop()),t.pushState(d,h||p,c),J?($=t,j=i,G=(q=e).from.facet,Y=G.name,H=Cf(G,$),G.name||k("Facet must have a name: "+O(G)),G.data||k("Facet must reference a data set: "+O(G)),G.field?B=$.add(Rv({field:$.fieldRef(G.field),pulse:H})):G.groupby?B=$.add(xv({key:$.keyRef(G.groupby),group:ws($.proxy(j.parent)),pulse:H})):k("Facet must specify groupby or field: "+O(G)),I=(F=$.fork()).add(vv()),U=F.add(Lv({pulse:ws(I)})),F.addData(Y,new Rf(F,I,I,U)),F.addSignal("parent",null),B.params.subflow={$subflow:Wf(q,F).toRuntime()}):K?(z=e,D=i,P=(N=t).add(Rv({pulse:D.pulse})),(L=N.fork()).add(Lv()),L.addSignal("parent",null),P.params.subflow={$subflow:Wf(z,L).toRuntime()}):Wf(e,t),t.popState(),K&&(Q&&n.push(Q),n.push(o))),ee&&(r={method:!0===ee.method?"parity":ee.method,pulse:p},ee.order&&(r.sort=t.compareRef({field:ee.order})),ee.bound&&(r.boundScale=t.scaleRef(ee.bound.scale),r.boundOrient=ee.bound.orient,r.boundTolerance=ee.bound.tolerance),p=ws(t.add(Av(r)))),u=t.add(Dv({pulse:p})),s=t.add(Lv({pulse:ws(u)},void 0,t.parent())),null!=e.name&&(f=e.name,t.addData(f,new Rf(t,a,u,s)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&k("Marks only support modify triggers."),Df(e,t,f)}))}function Lf(e,t){var n,r,i,a,o,u,s,f,c,l,d,h,p,g,m,v,y,b,_,x,w,M,S,E,O,A,C,R,T,z,N,D,P,L,q,$,j,F,I,U,B,W,G,Y,H,V,X,Z,J,Q,K,ee,te,ne,re,ie,ae,oe,ue,se,fe,ce,le,de,he,pe,ge,me,ve,ye,be,_e,xe,we,ke,Me,Se,Ee,Oe,Ae,Ce,Re,Te,ze,Ne,De,Pe=t.config.legend,Le=e.encode||{},qe=Le.legend||{},$e=qe.name||void 0,je=qe.interactive,Fe=qe.style,Ie=cy.reduce(function(t,n){return t||e[n]},0);return Ie||k("Missing valid scale for legend."),o=function(e,t){var n=e.type||uy;e.type||1!==(i=e,cy.reduce(function(e,t){return e+(i[t]?1:0)},0))||!e.fill&&!e.stroke||(r=t,n=Wv.hasOwnProperty(r)?sy:Fs(t)?fy:uy);var r,i;return n!==sy?n:Fs(t)?fy:sy}(e,t.scaleType(Ie)),u={orient:lf("orient",e,Pe),title:null!=e.title,type:o},s=ws(t.add(vv(null,[u]))),qe=of({enter:(l=e,d=Pe,h={},af(h,"fill",lf("fillColor",l,d))+af(h,"stroke",lf("strokeColor",l,d))+af(h,"strokeWidth",lf("strokeWidth",l,d))+af(h,"cornerRadius",lf("cornerRadius",l,d))+af(h,"strokeDash",d.strokeDash)?h:void 0),update:{offset:rf(lf("offset",e,Pe)),padding:rf(lf("padding",e,Pe)),titlePadding:rf(lf("titlePadding",e,Pe))}},qe,ly),n={enter:{x:{value:0},y:{value:0}}},f=ws(t.add(Mv(i={type:o,scale:t.scaleRef(Ie),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),o===sy?(a=[(he=e,pe=Ie,ge=Pe,me=Le.gradient,ke={value:0},Me=df(he,ge.gradientDirection),Se=pf(he,ge),Ee=hf(he,ge),Oe={},Me?(be=[0,1],_e=[0,0],xe=Se,we=Ee):(be=[0,0],_e=[1,0],xe=Ee,we=Se),Oe.enter=ve={opacity:ke,x:ke,y:ke},af(ve,"stroke",lf("gradientStrokeColor",he,ge)),af(ve,"strokeWidth",lf("gradientStrokeWidth",he,ge)),Oe.exit={opacity:ke},Oe.update=ye={x:ke,y:ke,fill:{gradient:pe,start:be,stop:_e},opacity:{value:1}},ve.width=ye.width=rf(xe),ve.height=ye.height=rf(we),cf(zy,Ey,null,void 0,void 0,Oe,me)),mf(e,Pe,Le.labels,f)],i.count=i.count||t.signalRef("max(2,2*floor(("+As(hf(e,Pe))+")/100))")):o===fy?a=[(Z=e,J=Ie,Q=Pe,K=Le.gradient,ee=f,ue={value:0},se=df(Z,Q.gradientDirection),fe=pf(Z,Q),ce=hf(Z,Q),le={},de="",se?(re="y",ae="y2",ie="x",oe="width",de="1-"):(re="x",ae="x2",ie="y",oe="height"),le.enter=te={opacity:ue},af(te,"stroke",lf("gradientStrokeColor",Z,Q)),af(te,"strokeWidth",lf("gradientStrokeWidth",Z,Q)),le.exit={opacity:ue},le.update=ne={opacity:{value:1}},te.fill=ne.fill={scale:J,field:ry},te[re]=ne[re]={signal:de+"datum."+ey,mult:ce},te[ie]=ne[ie]={value:0},te[ae]=ne[ae]={signal:de+"datum."+ty,mult:ce},te[oe]=ne[oe]=rf(fe),cf(zy,My,null,ry,ee,le,K)),mf(e,Pe,Le.labels,f)]:(r=yf(e,Pe),a=[(O=e,A=Pe,C=Le,R=f,T=As(r.columns),j=C.entries,F=!(!j||!j.interactive),I=j?j.name:void 0,U=lf("clipHeight",O,A),B=lf("symbolOffset",O,A),W={data:"value"},G={},Y=T+"?datum."+Kv+":datum."+ny,H=U?rf(U):{field:ny},V="datum."+Jv,X="max(1,"+T+")",G={enter:z={opacity:$y},exit:{opacity:$y},update:N={opacity:{value:1}}},O.fill||(af(z,"fill",A.symbolBaseFillColor),af(z,"stroke",A.symbolBaseStrokeColor)),af(z,"shape",lf("symbolType",O,A)),af(z,"size",lf("symbolSize",O,A)),af(z,"strokeWidth",lf("symbolStrokeWidth",O,A)),af(z,"fill",lf("symbolFillColor",O,A)),af(z,"stroke",lf("symbolStrokeColor",O,A)),z.x=N.x={signal:Y,mult:.5,offset:B},H.mult=.5,z.y=N.y=H,cy.forEach(function(e){O[e]&&(N[e]=z[e]={scale:O[e],field:ry})}),P=cf(Dy,Ay,null,ry,W,G,C.symbols),U&&(P.clip=!0),G={enter:z={opacity:$y},exit:{opacity:$y},update:N={opacity:{value:1},text:{field:Qv}}},af(z,"align",lf("labelAlign",O,A)),af(z,"baseline",lf("labelBaseline",O,A)),af(z,"fill",lf("labelColor",O,A)),af(z,"font",lf("labelFont",O,A)),af(z,"fontSize",lf("labelFontSize",O,A)),af(z,"fontWeight",lf("labelFontWeight",O,A)),af(z,"limit",lf("labelLimit",O,A)),(D=rf(B)).offset=lf("labelOffset",O,A),z.x=N.x={signal:Y,offset:D},z.y=N.y=H,L=cf(Py,Oy,iy,ry,W,G,C.labels),G={enter:{width:$y,height:U?rf(U):$y,opacity:$y},exit:{opacity:$y},update:N={opacity:{value:1},row:{signal:null},column:{signal:null}}},df(O,A.symbolDirection)?(q="ceil(item.mark.items.length/"+X+")",N.row.signal=V+"%"+q,N.column.signal="floor("+V+"/"+q+")",$={field:["row",V]}):(N.row.signal="floor("+V+"/"+X+")",N.column.signal=V+"%"+X,$={field:V}),N.column.signal=T+"?"+N.column.signal+":"+V,(O=vf(my,null,I,R={facet:{data:R,name:"value",groupby:Jv}},F,of(G,j,ly),[P,L])).sort=$,O)],i.size=(p=e,g=t,m=a[0].marks,b=gf("strokeWidth",m[0].encode),y=p.size?'scale("'+p.size+'",datum)':gf("size",m[0].encode),_=m[1].encode,x=g,w=iy,v=gf("fontSize",_)||(M="fontSize",S=w,(E=x.config.style[S])&&E[M]),ys("max(ceil(sqrt("+As(y)+")+"+As(b)+"),"+As(v)+")",g))),a=[vf(Sy,null,null,s,je,n,a,r)],u.title&&a.push((Ae=e,Ce=Pe,Re=Le.title,Te=s,(De={}).enter=ze={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:Ne={value:0}},af(ze,"align",lf("titleAlign",Ae,Ce)),af(ze,"baseline",lf("titleBaseline",Ae,Ce)),af(ze,"fill",lf("titleColor",Ae,Ce)),af(ze,"font",lf("titleFont",Ae,Ce)),af(ze,"fontSize",lf("titleFontSize",Ae,Ce)),af(ze,"fontWeight",lf("titleFontWeight",Ae,Ce)),af(ze,"limit",lf("titleLimit",Ae,Ce)),De.exit={opacity:Ne},De.update={opacity:{value:1},text:rf(Ae.title)},cf(Py,Cy,ay,null,Te,De,Re))),c=vf(ky,Fe,$e,s,je,qe,a),e.zindex&&(c.zindex=e.zindex),Pf(c,t)}function qf(e,t,n){return'item.anchor==="start"?'+e+':item.anchor==="end"?'+t+":"+n}function $f(e,t){e=E(e)?{text:e}:e;var n,r,i,a=t.config.title,o=X({},e.encode);return n={orient:lf("orient",e,a)},r=ws(t.add(vv(null,[n]))),o.name=e.name,o.interactive=e.interactive,i=function(e,t,n,r){var i,a,o,u,s={value:0},f=e.text,c=lf("orient",e,t),l=lf("anchor",e,t),d=c===Hv||c===Yv?-1:1,h=c===Yv||c===Xv,p={group:h?"width":"height"},g={};return o={field:p,mult:{signal:Iy}},u=d<0?s:h?{field:{group:"height"}}:{field:{group:"width"}},g.enter=i={opacity:s},af(i,"fill",lf("color",e,t)),af(i,"font",lf("font",e,t)),af(i,"fontSize",lf("fontSize",e,t)),af(i,"fontWeight",lf("fontWeight",e,t)),g.exit={opacity:s},g.update=a={opacity:{value:1},text:rf(f),anchor:rf(l),orient:rf(c),extent:{field:p},align:{signal:Fy}},h?(a.x=o,a.y=u,a.angle=s,a.baseline={value:c===Yv?Xv:Yv}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:Xv}),af(a,"offset",lf("offset",e,t)||0),af(a,"frame",lf("frame",e,t)),af(a,"angle",lf("angle",e,t)),af(a,"baseline",lf("baseline",e,t)),af(a,"limit",lf("limit",e,t)),cf(Py,Ry,e.style||oy,null,r,g,n)}(e,a,o,r),e.zindex&&(i.zindex=e.zindex),Pf(i,t)}function jf(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(xf(e,t))}),e.on&&e.on.forEach(function(n){Df(n,t,e.name)}),t.addDataPipeline(e.name,function(e,t,n){var r,i,a,o,u,s=[],f=null,c=!1,l=!1;for(e.values?s.push(f=Ff({$ingest:e.values,$format:e.format})):e.url?s.push(f=Ff({$request:e.url,$format:e.format})):e.source&&(f=r=W(e.source).map(function(e){return ws(t.getData(e).output)}),s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,f||u.source||s.push(f=Ff()),s.push(o),u.generates&&(l=!0),u.modifies&&!l&&(c=!0),u.source?f=o:u.changes&&(f=null);return r&&(a=r.length-1,s[0]=Nv({derive:c,pulse:a?r:r[0]}),(c||a)&&s.splice(1,0,Ff())),f||s.push(Ff()),s.push(Lv({})),s}(e,t,n))}function Ff(e){var t=vv({},e);return t.metadata={source:!0},t}function If(e,t){return{scale:e.scale,range:t}}function Uf(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Bf(e,t){var n,r,i,a,o,u,s,f,c,l,d,h,p,g,m,v,y,b,_,x,w,k,M,S,E,O,A,C,R,T,z,N,D,P,L,q,$,j,F,I,U,B,W,G,Y,H,V,Z,J,Q,K,ee,te,ne,re,ie,ae,oe,ue,se,fe,ce,le,de,he,pe,ge,me,ve,ye,be,_e,xe,we,ke,Me,Se,Ee,Oe,Ae,Ce,Re,Te,ze,Ne,De,Pe,Le,qe=(s=e,c=(f=t).config,l=s.orient,d=l===Yv||l===Xv?c.axisX:c.axisY,h=c["axis"+l[0].toUpperCase()+l.slice(1)],p="band"===f.scaleType(s.scale)&&c.axisBand,d||h||p?X({},c.axis,d,h,p):c.axis),$e=e.encode||{},je=$e.axis||{},Fe=je.name||void 0,Ie=je.interactive,Ue=je.style;return n={orient:e.orient,ticks:!!lf("ticks",e,qe),labels:!!lf("labels",e,qe),grid:!!lf("grid",e,qe),domain:!!lf("domain",e,qe),title:!!Os(e.title,!1)},r=ws(t.add(vv({},[n]))),je=of({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:rf(Os(e.offset,0)),position:rf(Os(e.position,0)),titlePadding:rf(lf("titlePadding",e,qe)),minExtent:rf(lf("minExtent",e,qe)),maxExtent:rf(lf("maxExtent",e,qe))}},$e.axis,ly),i=ws(t.add(gv({scale:t.scaleRef(e.scale),extra:t.property(lf("tickExtra",e,qe)),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push((g=e,m=qe,v=$e.grid,y=i,O=g.orient,A=g.gridScale,R=(C=O===Hv||O===Yv?1:-1)*g.offset||0,(z={}).enter=b={opacity:T={value:0}},af(b,"stroke",lf("gridColor",g,m)),af(b,"strokeWidth",lf("gridWidth",g,m)),af(b,"strokeDash",lf("gridDash",g,m)),z.exit=_={opacity:T},z.update=x={},af(x,"opacity",lf("gridOpacity",g,m)),w={scale:g.scale,field:ry,band:lf("bandPosition",g,m),round:lf("tickRound",g,m),extra:lf("tickExtra",g,m),offset:lf("tickOffset",g,m)},O===Yv||O===Xv?(k="x",M="y",E="height"):(k="y",M="x",E="width"),S=M+"2",x[k]=b[k]=_[k]=w,A?(b[M]={scale:A,range:0,mult:C,offset:R},x[S]=b[S]={scale:A,range:1,mult:C,offset:R}):(b[M]={value:R},x[S]=b[S]={signal:E,mult:C,offset:R}),cf(Ny,by,null,ry,y,z,v))),n.ticks&&(a=lf("tickSize",e,qe),u.push((N=e,D=qe,P=$e.ticks,L=i,q=a,B=N.orient,W=B===Hv||B===Yv?-1:1,(Y={}).enter=$={opacity:G={value:0}},af($,"stroke",lf("tickColor",N,D)),af($,"strokeWidth",lf("tickWidth",N,D)),Y.exit=j={opacity:G},Y.update=F={opacity:{value:1}},(I=rf(q)).mult=W,U={scale:N.scale,field:ry,band:lf("bandPosition",N,D),round:lf("tickRound",N,D),extra:lf("tickExtra",N,D),offset:lf("tickOffset",N,D)},B===Yv||B===Xv?(F.y=$.y=G,F.y2=$.y2=I,F.x=$.x=j.x=U):(F.x=$.x=G,F.x2=$.x2=I,F.y=$.y=j.y=U),cf(Ny,xy,null,ry,L,Y,P)))),n.labels&&(a=n.ticks?a:0,u.push((H=e,V=qe,Z=$e.labels,J=i,Q=a,ie=H.orient,ae=ie===Hv||ie===Yv?-1:1,oe=H.scale,ue=lf("labelBound",H,V),se=lf("labelFlush",H,V),fe=null!=se&&!1!==se&&(se=+se)===se,ce=+lf("labelFlushOffset",H,V),le=lf("labelOverlap",H,V),(he={}).enter=K={opacity:de={value:0}},af(K,"angle",lf("labelAngle",H,V)),af(K,"fill",lf("labelColor",H,V)),af(K,"font",lf("labelFont",H,V)),af(K,"fontSize",lf("labelFontSize",H,V)),af(K,"fontWeight",lf("labelFontWeight",H,V)),af(K,"limit",lf("labelLimit",H,V)),he.exit=ee={opacity:de},he.update=te={opacity:{value:1},text:{field:Qv}},(ne=rf(Q)).mult=ae,ne.offset=rf(lf("labelPadding",H,V)||0),ne.offset.mult=ae,re={scale:oe,field:ry,band:.5,offset:lf("tickOffset",H,V)},ie===Yv||ie===Xv?(te.y=K.y=ne,te.x=K.x=ee.x=re,af(te,"align",fe?Uf(oe,se,'"left"','"right"','"center"'):"center"),fe&&ce&&af(te,"dx",Uf(oe,se,-ce,ce,0)),af(te,"baseline",ie===Yv?"bottom":"top")):(te.x=K.x=ne,te.y=K.y=ee.y=re,af(te,"align",ie===Vv?"left":"right"),af(te,"baseline",fe?Uf(oe,se,'"bottom"','"top"','"middle"'):"middle"),fe&&ce&&af(te,"dy",Uf(oe,se,ce,-ce,0))),H=cf(Py,_y,iy,ry,J,he,Z),(le||ue)&&(H.overlap={method:le,order:"datum.index",bound:ue?{scale:oe,orient:ie,tolerance:+ue}:null}),H))),n.domain&&u.push((pe=e,ge=qe,me=$e.domain,ve=r,ke=pe.orient,(Se={}).enter=ye={opacity:Me={value:0}},af(ye,"stroke",lf("domainColor",pe,ge)),af(ye,"strokeWidth",lf("domainWidth",pe,ge)),Se.exit={opacity:Me},Se.update=be={opacity:{value:1}},ke===Yv||ke===Xv?(_e="x",we="y"):(_e="y",we="x"),xe=_e+"2",ye[we]=Me,be[_e]=ye[_e]=If(pe,0),be[xe]=ye[xe]=If(pe,1),cf(Ny,yy,null,null,ve,Se,me))),n.title&&u.push((Ee=e,Oe=qe,Ae=$e.title,Ce=r,Ne=Ee.orient,De=Ne===Hv||Ne===Yv?-1:1,Pe=Ne===Yv||Ne===Xv,(Le={}).enter=Re={opacity:{value:0}},af(Re,"align",lf("titleAlign",Ee,Oe)),af(Re,"fill",lf("titleColor",Ee,Oe)),af(Re,"font",lf("titleFont",Ee,Oe)),af(Re,"fontSize",lf("titleFontSize",Ee,Oe)),af(Re,"fontWeight",lf("titleFontWeight",Ee,Oe)),af(Re,"limit",lf("titleLimit",Ee,Oe)),Le.exit={opacity:{value:0}},Le.update=Te={opacity:{value:1},text:rf(Ee.title)},ze={scale:Ee.scale,range:.5},Pe?(Te.x=ze,Te.angle={value:0},Te.baseline={value:Ne===Yv?"bottom":"top"}):(Te.y=ze,Te.angle={value:90*De},Te.baseline={value:"bottom"}),af(Te,"angle",lf("titleAngle",Ee,Oe)),af(Te,"baseline",lf("titleBaseline",Ee,Oe)),!af(Te,"x",lf("titleX",Ee,Oe))&&Pe&&!ff("x",Ae)&&(Le.enter.auto={value:!0}),!af(Te,"y",lf("titleY",Ee,Oe))&&!Pe&&!ff("y",Ae)&&(Le.enter.auto={value:!0}),cf(Py,wy,ay,null,Ce,Le,Ae))),o=vf(vy,Ue,Fe,r,Ie,je,u),e.zindex&&(o.zindex=e.zindex),Pf(o,t)}function Wf(e,t,n){var r=W(e.signals),i=W(e.scales);return n||r.forEach(function(e){Jo(e,t)}),W(e.projections).forEach(function(e){!function(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=Hs(e[r],r,t));t.addProjection(e.name,n)}(e,t)}),i.forEach(function(e){var n,r,i;r=t,i=(n=e).type||"linear",Uv.hasOwnProperty(i)||k("Unrecognized scale type: "+O(i)),r.addScale(n.name,{type:i,domain:void 0})}),W(e.data).forEach(function(e){jf(e,t)}),i.forEach(function(e){Us(e,t)}),r.forEach(function(e){!function(e,t){var n=t.getSignal(e.name);if(e.update){var r=ys(e.update,t);n.update=r.$expr,n.params=r.$params}e.on&&e.on.forEach(function(e){qs(e,t,n.id)})}(e,t)}),W(e.axes).forEach(function(e){Bf(e,t)}),W(e.marks).forEach(function(e){Pf(e,t)}),W(e.legends).forEach(function(e){Lf(e,t)}),e.title&&$f(e.title,t),t.parseLambdas(),t}function Gf(e,t){var n,r,i,a,o,u,s,f,c,l,d=t.config;return t.background=e.background||d.background,t.eventConfig=d.events,o=ws(t.root=t.add(xs())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",(u=e.padding,s=d,S(u=u||s.padding)?{top:Xo(u.top),bottom:Xo(u.bottom),left:Xo(u.left),right:Xo(u.right)}:{top:f=Xo(u),bottom:f,left:f,right:f})),t.addSignal("autosize",(c=e.autosize,l=d,S(c=c||l.autosize)?c:{type:c=c||"pad"})),W(e.signals).forEach(function(e){Uy[e.name]||Jo(e,t)}),r=t.add(vv()),i=of({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(_v(uf(i,Ty,gy,e.style,t,{pulse:ws(r)}))),a=t.add($v({layout:t.objectProperty(e.layout),legendMargin:d.legendMargin,autosize:t.signalRef("autosize"),mark:o,pulse:ws(i)})),t.operators.pop(),t.pushState(ws(i),ws(a),null),Wf(e,t,!0),t.operators.push(a),n=t.add(mv({mark:o,pulse:ws(a)})),n=t.add(Dv({pulse:ws(n)})),n=t.add(Lv({pulse:ws(n)})),t.addData("root",new Rf(t,r,r,n)),t}function Yf(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Hf(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function Vf(e){return(vc(e)?function(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(0<r?",":"")+(S(t)?t.signal||Vf(t):O(t));return n+"]"}:function(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(1<++i?",":"")+O(t)+":"+(S(n)?n.signal||Vf(n):O(n));return r+"}"})(e)}function Xf(e){var t={padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:Hy},area:{fill:Hy},image:null,line:{stroke:Hy,strokeWidth:Yy},path:{stroke:Hy},rect:{fill:Hy},rule:{stroke:Vy},shape:{stroke:Hy},symbol:{fill:Hy,size:64},text:{fill:Vy,font:Wy,fontSize:11},style:{"guide-label":{fill:Vy,font:Wy,fontSize:10},"guide-title":{fill:Vy,font:Wy,fontSize:11,fontWeight:"bold"},"group-title":{fill:Vy,font:Wy,fontSize:13,fontWeight:"bold"},point:{size:Gy,strokeWidth:Yy,shape:"circle"},circle:{size:Gy,strokeWidth:Yy},square:{size:Gy,strokeWidth:Yy,shape:"square"},cell:{fill:"transparent",stroke:Zy}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:Xy,grid:!1,gridWidth:1,gridColor:Zy,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:Xy,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:Zy,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:Xy,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};return(e||[]).forEach(function(e){var n,r,i;if(e)for(n in e)if("style"===n)for(n in i=t.style||(t.style={}),e.style)i[n]=X(i[n]||{},e.style[n]);else r=e[n],t[n]=S(r)&&!vc(r)?X(S(t[n])?t[n]:{},r):r}),t}function Zf(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function Jf(e,t){return Zf(["event"],e,t)}function Qf(e,t,n){var r,i;for(r in n=n||{},e)(i=e[r])&&i.$expr&&i.$params&&Qf(i.$params,t,n),n[r]=vc(i)?i.map(function(e){return Kf(e,t)}):Kf(i,t);return n}function Kf(e,t){if(!e||!S(e))return e;for(var n,r=0,i=Jy.length;r<i;++r)if(n=Jy[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function ec(e){return(e+"").toLowerCase()}function tc(e,t){"operator"!==ec(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?Zf(["_"],e.update,t):null)}function nc(e,t){var n=S(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,o=void 0;r||k("Source not defined: "+e.source),i=e.target&&e.target.$expr?Jf(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(o=Qf(a.$params,t)),a=Zf(["_","event"],a.$expr,t)),t.update(e,r,i,a,o)}function rc(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){tc(e,t)}),n.forEach(function(e){var n,r,i,a;r=t,(n=e).params&&((i=r.get(n.id))||k("Invalid operator id: "+n.id),a=Qf(n.params,r),r.dataflow.connect(i,i.parameters(a)))}),(e.streams||[]).forEach(function(e){var n,r,i,a,o;r=t,a=null!=(n=e).filter?Jf(n.filter,r):void 0,o=null!=n.stream?r.get(n.stream):void 0,n.source?o=r.events(n.source,n.type,a):n.merge&&(o=(i=n.merge.map(r.get.bind(r)))[0].merge.apply(i[0],i.slice(1))),n.between&&(i=n.between.map(r.get.bind(r)),o=o.between(i[0],i[1])),n.filter&&(o=o.filter(a)),null!=n.throttle&&(o=o.throttle(+n.throttle)),null!=n.debounce&&(o=o.debounce(+n.debounce)),null==o&&k("Invalid stream definition: "+JSON.stringify(n)),n.consume&&o.consume(!0),r.stream(n,o)}),(e.updates||[]).forEach(function(e){nc(e,t)}),t.resolve()}function ic(e,t,n){return new ac(e,t,n)}function ac(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function oc(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),
this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function uc(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===tb?r.left+r.right:0)}function sc(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===tb?r.top+r.bottom:0)}function fc(e,t){return t.modified&&vc(t.input.value)&&e.indexOf("_:vega:_")}function cc(e,t){return!("parent"===e||t instanceof Kc.proxy)}function lc(e,t,n,r){var i,a,o=e.element();o&&o.setAttribute("title",null==(i=r)?"":vc(i)?dc(i):S(i)&&!ee(i)?(a=i,Object.keys(a).map(function(e){var t=a[e];return e+": "+(vc(t)?dc(t):hc(t))}).join("\n")):i+"")}function dc(e){return"["+e.map(hc).join(", ")+"]"}function hc(e){return vc(e)?"[]":S(e)&&!ee(e)?"{}":e}function pc(e,t){var n=this;t=t||{},ut.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||yh.Canvas,n._scenegraph=new Lr;var r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||lc,n._redraw=!0,n._handler=(new Hr).scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i,a,o,u,s,f=(i=n,a=e,o=t.functions,rc(a,ic(i,Kc,o||Um)));n._runtime=f,n._signals=f.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:X({},e)}}),f.root&&f.root.set(r),r.source=f.data.root.input,n.pulse(f.data.root.input,n.changeset().insert(r.items)),n._background=f.background||null,n._eventConfig=(u=f.eventConfig,(s=(u=X({},u)).defaults)&&(vc(s.prevent)&&(s.prevent=le(s.prevent)),vc(s.allow)&&(s.allow=le(s.allow))),u),n._width=n.width(),n._height=n.height(),n._viewWidth=uc(n,n._width),n._viewHeight=sc(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n[Ky],i=n[eb],a=n[tb];e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=uc(e,n.size),t()},{size:r}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=sc(e,n.size),t()},{size:i});var o=e.add(null,t,{pad:a});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}(n),Oo(n)}function gc(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:k("Unrecognized signal name: "+O(t))}function mc(e,t){var n=(e._targets||[]).filter(function(e){var n=e._update;return n&&n.handler===t});return n.length?n[0]:null}var vc=Array.isArray,yc=[],bc=A("id"),_c=_(function(e){return e},yc,"identity"),xc=_(function(){return 0},yc,"zero"),wc=_(function(){return 1},yc,"one"),kc=_(function(){return!0},yc,"true"),Mc=_(function(){return!1},yc,"false"),Sc=0,Ec=1,Oc=2,Ac=3,Cc=4,Rc={},Tc=Symbol("vega_id"),zc=1,Nc="_:mod:_";(up=Me.prototype).set=function(e,t,n,r){var i=this[e],a=this[Nc];return null!=t&&0<=t?(i[t]!==n||r)&&(i[t]=n,a[t+":"+e]=-1,a[e]=-1):(i!==n||r)&&(this[e]=n,a[e]=vc(n)?1+n.length:-1),this},up.modified=function(e,t){var n,r=this[Nc];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(vc(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&0<=t?t+1<r[e]||!!r[t+":"+e]:!!r[e]},up.clear=function(){return this[Nc]={},this};var Dc=0,Pc=new Me,Lc=Se.prototype;Lc.targets=function(){return this._targets||(this._targets=pe(bc))},Lc.set=function(e){return this.value!==e?(this.value=e,1):0},Lc.skip=Ee(1),Lc.modified=Ee(2),Lc.parameters=function(e,t){function n(e,n,r){r instanceof Se?(r!==u&&(t&&r.targets().add(u),c.push(r)),f.push({op:r,name:e,index:n})):s.set(e,n,r)}t=!1!==t;var r,i,a,o,u=this,s=u._argval=u._argval||new Me,f=u._argops=u._argops||[],c=[];for(r in e)if(i=e[r],"pulse"===r)W(i).forEach(function(e){e instanceof Se?e!==u&&(e.targets().add(u),c.push(e)):k("Pulse parameters must be operator instances.")}),u.source=i;else if(vc(i))for(s.set(r,-1,Array(a=i.length)),o=0;o<a;++o)n(r,o,i[o]);else n(r,-1,i);return this.marshall().clear(),c},Lc.marshall=function(e){var t,n,r,i,a,o=this._argval||Pc,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)a=(i=(t=u[n]).op).modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);return o},Lc.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},Lc.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,(this.pulse=t)||e);var t};var qc=0,$c=Oe.prototype;$c._filter=kc,$c._apply=_c,$c.targets=function(){return this._targets||(this._targets=pe(bc))},$c.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},$c.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},$c.filter=function(e){var t=Ae(e);return this.targets().add(t),t},$c.apply=function(e){var t=Ae(null,e);return this.targets().add(t),t},$c.merge=function(){var e=Ae();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},$c.throttle=function(e){var t=-1;return this.filter(function(){var n=Date.now();return e<n-t?(t=n,1):0})},$c.debounce=function(e){var t=Ae();return this.targets().add(Ae(null,null,V(e,function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},$c.between=function(e,t){var n=!1;return e.targets().add(Ae(null,null,function(){n=!0})),t.targets().add(Ae(null,null,function(){n=!1})),this.filter(function(){return n})};var jc=/^([A-Za-z]+:)?\/\//,Fc="file://",Ic={boolean:ue,integer:z,number:z,date:fe,string:ce,unknown:_c},Uc=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return $e(e)&&(e=+e)==~~e},$e,function(e){return!isNaN(Date.parse(e))}],Bc=["boolean","integer","number","date"],Wc={dsv:Fe,csv:je(","),tsv:je("\t"),json:Ie,topojson:function(e,t){var n,r,i;return e=Ie(e,t),n=t&&(i=t.feature)?Be:t&&(i=t.mesh)?He:k("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r):k("Invalid TopoJSON object: "+i))&&r.features||[r]}},Gc={skip:!0},Yc={},Hc=Qe.prototype;Hc.StopPropagation=Yc,Hc.ADD=1,Hc.REM=2,Hc.MOD=4,Hc.ADD_REM=3,Hc.ADD_MOD=5,Hc.ALL=7,Hc.REFLOW=8,Hc.SOURCE=16,Hc.NO_SOURCE=32,Hc.NO_FIELDS=64,Hc.fork=function(e){return new Qe(this.dataflow).init(this,e)},Hc.clone=function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},Hc.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length&&((e=new Qe(this.dataflow).init(this)).add=e.source),e},Hc.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},Hc.runAfter=function(e){this.dataflow.runAfter(e)},Hc.changed=function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},Hc.reflow=function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,tt(this,1))),this},Hc.modifies=function(e){var t=W(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},Hc.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?vc(e)?e.some(function(e){return t[e]}):t[e]:!!t)},Hc.filter=function(e,t){var n=this;return 1&e&&(n.addF=Ke(n.addF,t)),2&e&&(n.remF=Ke(n.remF,t)),4&e&&(n.modF=Ke(n.modF,t)),16&e&&(n.srcF=Ke(n.srcF,t)),n},Hc.materialize=function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=et(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=et(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=et(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},Hc.visit=function(e,t){var n,r,i=this,a=t;return 16&e?he(i.source,i.srcF,a):(1&e&&he(i.add,i.addF,a),2&e&&he(i.rem,i.remF,a),4&e&&he(i.mod,i.modF,a),8&e&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||he(n,r?tt(i,5):i.srcF,a))),i};var Vc=Q(nt,Qe);Vc.fork=function(e){var t=new Qe(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,function(e){return t.add.push(e)}),e&t.REM&&this.visit(t.REM,function(e){return t.rem.push(e)}),e&t.MOD&&this.visit(t.MOD,function(e){return t.mod.push(e)})),t},Vc.changed=function(e){return this.changes&e},Vc.modified=function(e){var t=this.fields;return t&&this.changes&this.MOD?vc(e)?e.some(function(e){return t[e]}):t[e]:0},Vc.filter=function(){k("MultiPulse does not support filtering.")},Vc.materialize=function(){k("MultiPulse does not support materialization.")};var Xc={skip:!(Vc.visit=function(e,t){var n=this.pulses,r=n.length,i=0;if(e&this.SOURCE)for(;i<r;++i)n[i].visit(e,t);else for(;i<r;++i)n[i].stamp===this.stamp&&n[i].visit(e,t);return this}),force:!1},Zc=it.prototype;Zc.size=function(){return this.nodes.length},Zc.clear=function(){return this.nodes=[],this},Zc.peek=function(){return this.nodes[0]},Zc.push=function(e){var t=this.nodes;return t.push(e),at(t,0,t.length-1,this.cmp)},Zc.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,ot(t,0,this.cmp)):e=n,e},Zc.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,ot(t,0,this.cmp),n},Zc.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,ot(t,0,this.cmp)),e};var Jc=ut.prototype;Jc.stamp=function(){return this._clock},Jc.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},Jc.cleanThreshold=1e4,Jc.add=function(e,t,n,r){var i,a=1;return e instanceof Se?i=e:e&&e.prototype instanceof Se?i=new e:G(e)?i=new Se(null,e):(a=0,i=new Se(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},Jc.connect=function(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)},Jc.rank=function(e){e.rank=++this._rank},Jc.rerank=function(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;0<=--r;)i.push(t=n[r]),t===e&&k("Cycle detected in dataflow graph.")},Jc.pulse=function(e,t,n){this.touch(e,n||Xc);var r=new Qe(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._pulses[e.id]=t.pulse(r,i),this},Jc.touch=function(e,t){var n=t||Xc;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},Jc.update=function(e,t,n){var r=n||Xc;return(e.set(t)||r.force)&&this.touch(e,r),this},Jc.changeset=ke,Jc.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(Xe(t,n)))},Jc.request=function(e,t,n){var r,i,a,o,u=this,s=u._pending||(r=u,(o=new Promise(function(e,t){i=e,a=t})).requests=0,o.done=function(){0==--o.requests&&r.runAfter(function(){r._pending=null;try{r.run(),i(r)}catch(e){a(e)}})},r._pending=o);s.requests+=1,u.loader().load(t,{context:"dataflow"}).then(function(t){u.ingest(e,t,n)},function(e){u.error("Loading failed",t,e)}).catch(function(e){u.error("Data ingestion failed",t,e)}).then(s.done,s.done)},Jc.events=function(e,t,n,r){for(var i,a=this,o=Ae(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(e){a.error(e)}finally{a.run()}},s=0,f=(i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):W(e)).length;s<f;++s)i[s].addEventListener(t,u);return o},Jc.on=function(e,t,n,r,i){return(e instanceof Se?Je:Ze)(this,e,t,n,r,i),this},Jc.run=function(e){var t,n,r,i,a=this,o=0,u=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new Qe(a,++a._clock,e),Ac<=u&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach(function(e){a._enqueue(e,!0)}),a._touched=pe(bc);try{for(;0<a._heap.size();)(t=a._heap.pop()).rank===t.qrank?(n=t.run(a._getPulse(t,e)),Cc<=u&&a.debug(t.id,n===Yc?"STOP":n,t),n!==Yc&&(a._pulse=n,t._targets&&t._targets.forEach(function(e){a._enqueue(e)})),++o):a._enqueue(t,!0)}catch(e){i=e}if(a._pulses={},a._pulse=null,Ac<=u&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(e){a.error(e)}if(a._postrun.length){var s=a._postrun;a._postrun=[],s.sort(function(e,t){return t.priority-e.priority}).forEach(function(e){rt(a,e.callback)})}return o},Jc.runAsync=function(){return this._pending||Promise.resolve(this.run())},Jc.runAfter=function(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):rt(this,e)},Jc._enqueue=function(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},Jc._getPulse=function(e,t){var n,r=e.source,i=this._clock;return r&&vc(r)?new nt(this,i,n=r.map(function(e){return e.pulse}),t):(n=this._pulses[e.id],r&&((r=r.pulse)&&r!==Yc?r.stamp===i&&n.target!==e?n=r:n.source=r.source:n.source=[]),n)},Jc.error=st("error"),Jc.warn=st("warn"),Jc.info=st("info"),Jc.debug=st("debug"),Jc.logLevel=st("level");var Qc=Q(ft,Se);Qc.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e)!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t);var t},Qc.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},Qc.transform=function(){};var Kc={},el={values:gt({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:gt({name:"count",set:"cell.num"}),__count__:gt({name:"count",set:"this.missing + this.valid"}),missing:gt({name:"missing",set:"this.missing"}),valid:gt({name:"valid",set:"this.valid"}),sum:gt({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:gt({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:gt({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:gt({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:gt({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:gt({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:gt({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:gt({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:gt({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:gt({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:gt({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:gt({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:gt({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:gt({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:gt({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:gt({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:gt({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:gt({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},tl=Object.keys(el);t.random=Math.random;var nl=Ot.prototype;nl.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},nl.add=function(e){this._add.push(e)},nl.rem=function(e){this._rem.push(e)},nl.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(e=0;e<u;++e)f[a(i[e])]=1;for(t=e=0;e<o;++e)f[a(n=r[e])]?f[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},nl.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;0<=--r;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},nl.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Z(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},nl.argmin=function(e){return this.extent(e)[0]||{}},nl.argmax=function(e){return this.extent(e)[1]||{}},nl.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):1/0},nl.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-1/0},nl.quartile=function(e){return this._get===e&&this._q||(this._q=wt(this.values(),e),this._get=e),this._q},nl.q1=function(e){return this.quartile(e)[0]},nl.q2=function(e){return this.quartile(e)[1]},nl.q3=function(e){return this.quartile(e)[2]},nl.ci=function(e){return this._get===e&&this._ci||(this._ci=xt(this.values(),1e3,.05,e),this._get=e),this._ci},nl.ci0=function(e){return this.ci(e)[0]},nl.ci1=function(e){return this.ci(e)[1]},At.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:tl},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var rl=Q(At,ft);rl.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),i.modifies(this._outputs),r._drop=!1!==e.drop,e.cross&&1<r._dims.length&&(r._drop=!1,this.cross()),r.changes(i)},rl.cross=function(){function e(e){var t,n,o,u;for(t in e)for(o=e[t].tuple,n=0;n<a;++n)i[n][u=o[r[n]]]=u}var t=this,n=t.value,r=t._dnames,i=r.map(function(){return{}}),a=r.length;e(t._prev),e(n),function e(o,u,s){var f,c,l=r[s],d=i[s++];for(f in d)u[l]=d[f],c=o?o+"|"+f:f,s<a?e(c,u,s):n[c]||t.cell(c,u)}("",{},0)},rl.init=function(e){function t(e){for(var t,r=W(w(e)),a=0,o=r.length;a<o;++a)i[t=r[a]]||(i[t]=1,n.push(t))}var n=this._inputs=[],r=this._outputs=[],i={};this._dims=W(e.groupby),this._dnames=this._dims.map(function(e){var n=x(e);return t(e),r.push(n),n}),this.cellkey=e.key?e.key:dt(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,u,s,f,c,l=e.fields||[null],d=e.ops||["count"],h=e.as||[],p=l.length,g={};for(p!==d.length&&k("Unmatched number of fields and aggregate ops."),c=0;c<p;++c)a=l[c],o=d[c],null==a&&"count"!==o&&k("Null aggregate field specified."),f=ht(o,s=x(a),h[c]),r.push(f),"count"!==o?((u=g[s])||(t(a),(u=g[s]=[]).field=a,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(pt(o,f))):this._counts.push(f);return this._measures=this._measures.map(function(e){return vt(e,e.field)}),{}},rl.cellkey=dt(),rl.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},rl.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new Ot),n},rl.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?xe(t.tuple,o):ye(o)},rl.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].add(t[n].get(e),e)},rl.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].rem(t[n].get(e),e)},rl.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(n=0,r=(t=e.agg).length;n<r;++n)t[n].set(i);return i},rl.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=e.add,c=e.rem,l=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||c.push(t.tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(t=o[r]).num&&s?c:l).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e},Ct.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var il=Q(Ct,ft);il.transform=function(e,t){var n,r=this._bins(e),i=r.start,a=r.step,o=e.as||["bin0","bin1"],u=o[0],s=o[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(w(e.field))?t.ADD_MOD:t.ADD,t.visit(n,function(e){var t=r(e);e[u]=t,e[s]=null==t?null:i+a*(1+(t-i)/a)}),t.modifies(o)},il._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,i=yt(e),a=i.start,o=i.stop,u=i.step;null!=(t=e.anchor)&&(n=t-(a+u*Math.floor((t-a)/u)),a+=n,o+=n);var s=function(e){var t=r(e);return null==t?null:(t=Math.max(a,Math.min(+t,o-u)),a+u*Math.floor((t-a)/u))};return s.start=a,s.stop=o,s.step=u,this.value=_(s,w(r),e.name||"bin_"+x(r))},Tt.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Q(Tt,ft).transform=function(e,t){var n=t.fork(t.ALL),r=Rt(me,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),t.source&&t.source.root&&(this.value.root=t.source.root),n},Q(zt,Se),Dt.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var al=Q(Dt,ft);al.transform=function(e,t){function n(t){return function(n){for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(u(n),e.case,a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],f=n(function(e){i[e]=1+(i[e]||0)}),c=n(function(e){i[e]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,c)),this._finish(t,s)},al._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},al._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],f=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=ye({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(t)},Pt.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Q(Pt,ft).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1];return!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter")?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,a,o=[],u={},s=e.length,f=0;f<s;++f)for(u[t]=a=e[f],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(ye(u)),(u={})[t]=a);return o}(r,a,o,e.filter||kc)):n.mod=r,n.source=this.value,n.modifies(i)};var ol={kde:Mt,mixture:St,normal:kt,uniform:Et},ul="distributions",sl="function",fl="field",cl=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ll={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:cl},{name:"weights",type:"number",array:!0}]};Lt.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:cl.concat(ll)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Q(Lt,ft).transform=function(e,t){var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var i=function e(t,n){var r=t[sl];ol.hasOwnProperty(r)||k("Unknown distribution function: "+r);var i=ol[r]();for(var a in t)a===fl?i.data((t.from||n()).map(t[a])):a===ul?i[a](t[a].map(function(t){return e(t,n)})):typeof i[a]===sl&&i[a](t[a]);return i}(e.distribution,(n=t,function(){return n.materialize(n.SOURCE).source})),o=e.method||"pdf";"pdf"!==o&&"cdf"!==o&&k("Invalid density method: "+o),e.extent||i.data||k("Missing density extent parameter."),o=i[o];var u=e.as||["value","density"],s=e.extent||a.extent(i.data()),f=(s[1]-s[0])/(e.steps||100),c=a.range(s[0],s[1]+f/2,f).map(function(e){var t={};return t[u[0]]=e,t[u[1]]=o(e),ye(t)});this.value&&(r.rem=this.value),this.value=r.add=r.source=c}return r},qt.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Q(qt,ft).transform=function(e,t){var n=this.value,r=e.field,i=n[0],a=n[1],o=t.ADD;(t.changed()||t.modified(r.fields)||e.modified("field"))&&(o=t.SOURCE,i=1/0,a=-1/0),t.visit(o,function(e){var t=r(e);null!=t&&((t=+t)<i&&(i=t),a<t&&(a=t))}),this.value=[i,a]};var dl=Q($t,Se);dl.connect=function(e){return this.targets().add(e),e.source=this},dl.add=function(e){this.value.add.push(e)},dl.rem=function(e){this.value.rem.push(e)},dl.mod=function(e){this.value.mod.push(e)},dl.init=function(e){this.value.init(e,e.NO_SOURCE)},dl.evaluate=function(){return this.value};var hl=Q(jt,ft);hl.activate=function(e){this._targets[this._targets.active++]=e},hl.subflow=function(e,t,n,r){var i,a,o=this.value,u=o.hasOwnProperty(e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,u=(i=n.dataflow).add(new $t(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},hl.transform=function(e,t){function n(e){return i.subflow(e,o,t)}var r=t.dataflow,i=this,a=e.key,o=e.subflow,u=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=me(e),r=u.get(t);void 0!==r&&(u.delete(t),n(r).rem(e))}),t.visit(t.ADD,function(e){var t=a(e);u.set(me(e),t),n(t).add(e)}),s||t.modified(a.fields)?t.visit(t.MOD,function(e){var t=me(e),r=u.get(t),i=a(e);r===i?n(i).mod(e):(u.set(t,i),n(r).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(u.get(me(e))).mod(e)}),s&&t.visit(t.REFLOW,function(e){var t=me(e),r=u.get(t),i=a(e);r!==i&&(u.set(t,i),n(r).rem(e),n(i).add(e))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),t},Q(Ft,Se),Ut.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Q(Ut,ft).transform=function(e,t){function n(t){var n=me(t),r=f(t,e),a=i.get(n);r&&a?(i.delete(n),o.push(t)):r||a?c&&r&&!a&&s.push(t):(i.set(n,1),u.push(t))}var r=t.dataflow,i=this.value,a=t.fork(),o=a.add,u=a.rem,s=a.mod,f=e.expr,c=!0;return t.visit(t.REM,function(e){var t=me(e);i.has(t)?i.delete(t):u.push(e)}),t.visit(t.ADD,function(t){f(t,e)?o.push(t):i.set(me(t),1)}),t.visit(t.MOD,n),e.modified()&&(c=!1,t.visit(t.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},Wt.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},Q(Wt,ft).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=Bt(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,o,u,s=r.map(function(t){return t(e)}),f=s.reduce(function(e,t){return Math.max(e,t.length)},0),c=0;c<f;++c){for(o=be(e),t=0;t<a;++t)o[i[t]]=null==(u=s[t][c])?null:u;n.add.push(o)}}),this.value=n.source=n.add,n.modifies(i)},Gt.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Q(Gt,ft).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(x),a=e.as||["key","value"],o=a[0],u=a[1],s=r.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,a=0;a<s;++a)(t=be(e))[o]=i[a],t[u]=r[a](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(a)},Yt.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Q(Yt,ft).transform=function(e,t){var n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,function(t){t[r]=n(t,e)})},Q(Ht,ft).transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(0<u){for(n=[];0<=--u;)n.push(i=ye(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var pl={value:"value",median:a.median,mean:a.mean,min:a.min,max:a.max},gl=[];Vt.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Q(Vt,ft).transform=function(e,t){var n,r,i,a,o,u,s,f,c,l,d,h=t.fork(t.ALL),p=function(e){var t,n=e.method||pl.value;return null!=pl[n]?n===pl.value?(t=void 0!==e.value?e.value:0,function(){return t}):pl[n]:void k("Unrecognized imputation method: "+n)}(e),g=(d=e.field,function(e){return e?d(e):NaN}),m=x(e.field),v=x(e.key),y=(e.groupby||[]).map(x),b=function(e,t,n,r){var i,a,o,u,s,f,c,l,d=function(e){return e(l)},h=[],p=r?r.slice():[],g={},m={};for(p.forEach(function(e,t){g[e]=t+1}),u=0,c=e.length;u<c;++u)l=e[u],f=n(l),s=g[f]||(g[f]=p.push(f)),a=(i=t?t.map(d):gl)+"",(o=m[a])||(o=m[a]=[],h.push(o),o.values=i),o[s-1]=l;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),_=[],w=this.value,M=b.domain.length;
for(o=0,f=b.length;o<f;++o)for(i=(n=b[o]).values,r=NaN,s=0;s<M;++s)if(null==n[s]){for(a=b.domain[s],l={_impute:!0},u=0,c=i.length;u<c;++u)l[y[u]]=i[u];l[v]=a,l[m]=isNaN(r)?r=p(n,g):r,_.push(ye(l))}return _.length&&(h.add=h.materialize(h.ADD).add.concat(_)),w.length&&(h.rem=h.materialize(h.REM).rem.concat(w)),this.value=_,h},Xt.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:tl},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var ml=Q(Xt,At);ml.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(n=r.value=r.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),r.changes(),t.visit(t.SOURCE,function(e){X(e,n[r.cellkey(e)].tuple)}),t.reflow(i).modifies(this._outputs)},ml.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},Q(Zt,Se),Qt.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Q(Qt,ft).transform=function(e,t){var n,r,i=t,a=e.as,o=e.fields,u=e.index,s=e.values,f=null==e.default?null:e.default,c=e.modified(),l=c?t.SOURCE:t.ADD,d=o.length;return s?(r=s.length,1<d&&!a&&k('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*r&&k('The "as" parameter has too few output field names.'),a=a||s.map(x),n=function(e){for(var t,n,i=0,c=0;i<d;++i)if(null==(n=u.get(o[i](e))))for(t=0;t<r;++t,++c)e[a[c]]=f;else for(t=0;t<r;++t,++c)e[a[c]]=s[t](n)}):(a||k("Missing output field names."),n=function(e){for(var t,n=0;n<d;++n)t=u.get(o[n](e)),e[a[n]]=null==t?f:t}),c?i=t.reflow(!0):l|=o.some(function(e){return t.modified(e.fields)})?t.MOD:0,t.visit(l,n),i.modifies(a)},Q(Kt,Se),Q(tn,Se),Q(rn,ft),rn.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},an.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:tl,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var vl=Q(an,At);vl._transform=vl.transform,vl.transform=function(e,t){return this._transform((r=t,i=(n=e).field,a=n.value,o=("count"===n.op?"__count__":n.op)||"sum",u=w(i).concat(w(a)),f=i,c=n.limit||0,d={},h=[],(l=r).visit(l.SOURCE,function(e){var t=f(e);d[t]||(d[t]=1,h.push(t))}),h.sort(function(e,t){return(e<t||null==e)&&null!=t?-1:(t<e||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0)}),s=c?h.slice(0,c):h,{key:n.key,groupby:n.groupby,ops:s.map(function(){return o}),fields:s.map(function(e){return n=i,r=a,_(function(e){return n(e)===t?r(e):NaN},u,(t=e)+"");var t,n,r}),as:s.map(function(e){return e+""}),modified:n.modified.bind(n)}),t);var n,r,i,a,o,u,s,f,c,l,d,h},Q(on,jt).transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(w(i)))&&k("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.mod(e)}):a.mod(e)}),t.visit(t.ADD,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.add(ye(e))}):a.add(e)}),t.visit(t.REM,function(e){var a=n.subflow(me(e),r,t,e);i?i(e).forEach(function(e){a.rem(e)}):a.rem(e)}),t},un.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Q(un,ft).transform=function(e,t){var n,r,i=e.fields,a=Bt(e.fields,e.as||[]),o=i?function(e,t){return function(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(e,t,i,a)}:_e;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=me(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=o(e,ye({}));r[me(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(o(e,r[me(e)]))}),n},Q(sn,ft).transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},Q(fn,ft).transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=me(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=be(e);r[me(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(_e(e,r[me(e)]))})),n},cn.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Q(cn,ft).transform=function(e,n){function r(e){var n,r;u.length<o?u.push(e):(r=~~((s+1)*t.random()))<u.length&&f<=r&&(n=u[r],c[me(n)]&&i.rem.push(n),u[r]=e),++s}var i=n.fork(n.NO_SOURCE),a=e.modified("size"),o=e.size,u=this.value,s=this.count,f=0,c=u.reduce(function(e,t){return e[me(t)]=1,e},{});if(n.rem.length&&(n.visit(n.REM,function(e){var t=me(e);c[t]&&(c[t]=-1,i.rem.push(e)),--s}),u=u.filter(function(e){return-1!==c[me(e)]})),(n.rem.length||a)&&u.length<o&&n.source&&(f=s=u.length,n.visit(n.SOURCE,function(e){c[me(e)]||r(e)}),f=-1),a&&u.length>o){for(var l=0,d=u.length-o;l<d;++l)c[me(u[l])]=-1,i.rem.push(u[l]);u=u.slice(d)}return n.mod.length&&n.visit(n.MOD,function(e){c[me(e)]&&i.mod.push(e)}),n.add.length&&n.visit(n.ADD,r),(n.add.length||f<0)&&(i.add=u.filter(function(e){return!c[me(e)]})),this.count=s,this.value=i.source=u,i},ln.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]},Q(ln,ft).transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=a.range(e.start,e.stop,e.step||1).map(ye),n.add=t.add.concat(this.value),n}},Q(dn,ft).transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},Q(hn,ft).transform=function(e,t){function n(e){a.set(i(e),e)}var r=t.dataflow,i=e.field,a=this.value,o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){a.delete(i(e))}),t.visit(t.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),t.fork()},Q(pn,ft).transform=function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var yl={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=yl.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){0<(t=+t)||k("ntile num must be greater than zero.");var n=yl.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return 0<=r?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return 0<(t=+t)||k("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},bl=Object.keys(yl),_l=gn.prototype;_l.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},_l.update=function(e,t){var n,r=this.cell,i=this.windows,a=e.data,o=i&&i.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(a[n]);for(n=e.p1;n<e.i1;++n)r.add(a[n]);r.set(t)}for(n=0;n<o;++n)i[n].update(e,t)},mn.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bl.concat(tl)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var xl=Q(mn,ft);xl.transform=function(e,t){function n(e){return a.group(s(e))}var r,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,o&&!u||(o=a.state=new gn(e));var s=dt(e.groupby);for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){n(e).add(e)})):(t.visit(t.REM,function(e){n(e).remove(e)}),t.visit(t.ADD,function(e){n(e).add(e)})),r=0,i=a._mlen;r<i;++r)vn(a._mods[r],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},xl.group=function(e){var t=this,n=t.value[e];return n||((n=t.value[e]=Rt(me)).stamp=-1),n.stamp<t.stamp&&(n.stamp=t.stamp,t._mods[t._mlen++]=n),n};var wl=Object.freeze({aggregate:At,bin:Ct,collect:Tt,compare:zt,countpattern:Dt,cross:Pt,density:Lt,extent:qt,facet:jt,field:Ft,filter:Ut,flatten:Wt,fold:Gt,formula:Yt,generate:Ht,impute:Vt,joinaggregate:Xt,key:Zt,lookup:Qt,multiextent:Kt,multivalues:tn,params:rn,pivot:an,prefacet:on,project:un,proxy:sn,relay:fn,sample:cn,sequence:ln,sieve:dn,subflow:$t,tupleindex:hn,values:pn,window:mn}),kl="top",Ml="left",Sl="right",El="bottom",Ol="top-left",Al="top-right",Cl="bottom-left",Rl="bottom-right",Tl="start",zl="end",Nl="group",Dl="axis",Pl="legend",Ll="row-header",ql="row-footer",$l="row-title",jl="column-header",Fl="column-footer",Il="column-title",Ul="padding",Bl="symbol",Wl="fit",Gl="fit-x",Yl="fit-y",Hl="pad",Vl="none",Xl="all",Zl="column",Jl="row",Ql=_n.prototype;Ql.clone=function(){return new _n(this)},Ql.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Ql.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Ql.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},Ql.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},Ql.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},Ql.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Ql.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},Ql.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,u=this.x1,s=this.x2,f=this.y1,c=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*c+a,i*u+r*c+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*c+a,i*s+r*c+o)},Ql.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},Ql.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},Ql.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},Ql.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},Ql.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},Ql.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},Ql.width=function(){return this.x2-this.x1},Ql.height=function(){return this.y2-this.y1};var Kl,ed=0;Q(kn,wn),["canvas","canvas-prebuilt"].some(function(e){try{"function"!=typeof(Kl=n(29)(e))&&(Kl=null)}catch(e){Kl=null}return Kl});var td=En.prototype;td.pending=function(){return this._pending},td.sanitizeURL=function(e){var t=this;return On(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return An(t),e}).catch(function(){return An(t),null})},td.loadImage=function(e){var t=this,n=Sn();return On(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){An(t),i.loaded=!0},i.onerror=function(){An(t),i.loaded=!1},i.src=r,i}).catch(function(e){return An(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}})},td.ready=function(){var e=this;return new Promise(function(t){!function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}(!1)})};var nd,rd={basis:{curve:o.curveBasis},"basis-closed":{curve:o.curveBasisClosed},"basis-open":{curve:o.curveBasisOpen},bundle:{curve:o.curveBundle,tension:"beta",value:.85},cardinal:{curve:o.curveCardinal,tension:"tension",value:0},"cardinal-open":{curve:o.curveCardinalOpen,tension:"tension",value:0},"cardinal-closed":{curve:o.curveCardinalClosed,tension:"tension",value:0},"catmull-rom":{curve:o.curveCatmullRom,tension:"alpha",value:.5},"catmull-rom-closed":{curve:o.curveCatmullRomClosed,tension:"alpha",value:.5},"catmull-rom-open":{curve:o.curveCatmullRomOpen,tension:"alpha",value:.5},linear:{curve:o.curveLinear},"linear-closed":{curve:o.curveLinearClosed},monotone:{horizontal:o.curveMonotoneY,vertical:o.curveMonotoneX},natural:{curve:o.curveNatural},step:{curve:o.curveStep},"step-after":{curve:o.curveStepAfter},"step-before":{curve:o.curveStepBefore}},id={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},ad=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],od={},ud={},sd=[].join,fd=["l",0,0,0,0,0,0,0],cd=2*Math.PI,ld=Math.sqrt(3)/2,dd={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,cd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ld*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ld*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ld*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ld*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}},hd={},pd=Math.PI,gd=o.arc().startAngle(function(e){return e.startAngle||0}).endAngle(function(e){return e.endAngle||0}).padAngle(function(e){return e.padAngle||0}).innerRadius(function(e){return e.innerRadius||0}).outerRadius(function(e){return e.outerRadius||0}).cornerRadius(Gn),md=o.area().x(Bn).y1(Wn).y0(function(e){return(e.y||0)+(e.height||0)}).defined(Yn),vd=o.area().y(Wn).x1(Bn).x0(function(e){return(e.x||0)+(e.width||0)}).defined(Yn),yd=o.line().x(Bn).y(Wn).defined(Yn),bd=In().x(Bn).y(Wn).width(function(e){return e.width||0}).height(function(e){return e.height||0}).cornerRadius(Gn),_d=o.symbol().type(function(e){return Pn(e.shape||"circle")}).size(function(e){return null==e.size?64:e.size}),xd=Un().x(Bn).y(Wn).defined(Yn).size(function(e){return e.size||1}),wd=2*Math.PI,kd=wd/4,Md=wd-1e-8;Xn.beginPath=Zn,Xn.closePath=Zn,Xn.moveTo=Jn,Xn.lineTo=Jn,Xn.rect=function(e,t,n,r){Jn(e,t),Jn(e+n,t+r)},Xn.quadraticCurveTo=function(e,t,n,r){Jn(e,t),Jn(n,r)},Xn.bezierCurveTo=function(e,t,n,r,i,a){Jn(e,t),Jn(n,r),Jn(i,a)},Xn.arc=function(e,t,n,r,i,a){function o(e){f=n*Math.cos(e),c=n*Math.sin(e),f<l&&(l=f),d<f&&(d=f),c<h&&(h=c),p<c&&(p=c)}if(Math.abs(i-r)>Md)return Jn(e-n,t-n),void Jn(e+n,t+n);var u,s,f,c,l=1/0,d=-1/0,h=1/0,p=-1/0;if(o(r),o(i),i!==r)if((r%=wd)<0&&(r+=wd),(i%=wd)<0&&(i+=wd),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=wd,u=r-r%kd,s=0;s<4&&i<u;++s,u-=kd)o(u);else for(u=r-r%kd+kd,s=0;s<4&&u<i;++s,u+=kd)o(u);Jn(e+l,t+h),Jn(e+d,t+p)};var Sd,Ed,Od=[],Ad=function(){return!0},Cd=dr("arc",function(e,t){return gd.context(e)(t)}),Rd=hr("area",function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?vd:md).curve(Cn(r,n.orient,n.tension)).context(e)(t)},function(e,t){var n="horizontal"===e[0].orient?t[1]:t[0],r="horizontal"===e[0].orient?"y":"x",i=0,a=e.length;if(1===a)return e[0];for(;i<a;){var o=i+a>>>1;e[o][r]<n?i=o+1:a=o}return i=Math.max(0,i-1),a=Math.min(e.length-1,a),n-e[i][r]<e[a][r]-n?e[i]:e[a]}),Td=1,zd=.5,Nd=sr(gr),Dd={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",lr(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&Vn(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;rr(t,function(t){var i,a=t.x||0,o=t.y||0,u=t.width||0,s=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&0<(i=null==t.opacity?1:t.opacity)&&(gr(e,t),t.fill&&Kn(e,t,i)&&e.fill(),t.stroke&&er(e,t,i)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,u,s),e.clip()),n&&n.translate(-a,-o),rr(t,function(t){r.draw(e,t,n)}),n&&n.translate(a,o),e.restore()})},pick:function(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return ir(t,function(f){var c,l,d,h;if(!(h=f.bounds)||h.contains(i,a))return l=f.x||0,d=f.y||0,e.save(),e.translate(l,d),l=i-l,d=a-d,!(c=ir(f,function(e){return i=l,a=d,(!1!==(t=e).interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(i,a)?o.pick(e,n,r,l,d):null;var t,i,a}))&&!1!==t.interactive&&(f.fill||f.stroke)&&Nd(e,f,u,s)&&(c=f),e.restore(),c||null})},background:function(e,t){var n=t.stroke?zd:0;e("class","background"),e("d",Hn(null,t,n,n))},foreground:function(e,t,n){e("clip-path",t.clip?pr(n,t,t):null)}},Pd={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=mr(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,u=(null!=t.height?t.height:r.height)||0,s=!1===t.aspect?"none":"xMidYMid";i-=vr(t.align,o),a-=yr(t.baseline,u),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",cr(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)},bound:function(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=vr(t.align,a),i-=yr(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function(e,t,n){var r=this;rr(t,function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=mr(t,r),f=t.x||0,c=t.y||0,l=(null!=t.width?t.width:s.width)||0,d=(null!=t.height?t.height:s.height)||0;f-=vr(t.align,l),c-=yr(t.baseline,d),!1!==t.aspect&&(a=s.width/s.height,o=t.width/t.height,a==a&&o==o&&a!==o&&(o<a?(c+=(d-(u=l/a))/2,d=u):(f+=(l-(u=d*a))/2,l=u))),s.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(s,f,c,l,d))}})},pick:ur(),get:mr,xOffset:vr,yOffset:yr},Ld=hr("line",function(e,t){var n=t[0],r=n.interpolate||"linear";return yd.curve(Cn(r,n.orient,n.tension)).context(e)(t)},function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;0<=--a;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}),qd={type:"path",tag:"path",nested:!1,attr:function(e,t){e("transform",lr(t)),e("d",t.path)},bound:function(e,t){return br(Xn(e),t)?e.set(0,0,0,0):Vn(e,t)},draw:ar(br),pick:fr(br)},$d={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Hn(null,t))},bound:function(e,t){var n,r;return Vn(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:ar(_r),pick:fr(_r)},jd={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",lr(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return Vn(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){rr(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&xr(e,t,r)&&e.stroke()}})},pick:ur(function(e,t,n,r){return!!e.isPointInStroke&&xr(e,t,1)&&e.isPointInStroke(n,r)})},Fd=dr("shape",function(e,t){return(t.mark.shape||t.shape).context(e)(t)}),Id=dr("symbol",function(e,t){return _d.context(e)(t)}),Ud={height:Er,measureWidth:Mr,estimateWidth:wr,width:wr,canvas:Or};Or(!0);var Bd={left:"start",center:"middle",right:"end"},Wd=new _n,Gd={arc:Cd,area:Rd,group:Dd,image:Pd,line:Ld,path:qd,rect:$d,rule:jd,shape:Fd,symbol:Id,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+Rr(t),a=t.x||0,o=t.y||0,u=t.angle||0,s=t.radius||0;s&&(n=(t.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),e("text-anchor",Bd[t.align]||"start"),u?(n=cr(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+cr(r,i))):n=cr(a+r,o+i),e("transform",n)},bound:Tr,draw:function(e,t,n){rr(t,function(t){var r,i,a,o,u,s;n&&!n.intersects(t.bounds)||(s=Ar(t))&&0!==(r=null==t.opacity?1:t.opacity)&&(e.font=Cr(t),e.textAlign=t.align||"left",i=t.x||0,a=t.y||0,(o=t.radius)&&(u=(t.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Math.PI/180),i=a=0),i+=t.dx||0,a+=(t.dy||0)+Rr(t),t.fill&&Kn(e,t,r)&&e.fillText(s,i,a),t.stroke&&er(e,t,r)&&e.strokeText(s,i,a),t.angle&&e.restore())})},pick:ur(function(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Tr(Wd,t,!0),u=-t.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),c=t.x,l=t.y,d=s*i-f*a+(c-c*s+l*f),h=f*i+s*a+(l-c*f-l*s);return o.contains(d,h)})},trail:hr("trail",function(e,t){return xd.context(e)(t)},function(e,t){for(var n,r,i=e.length;0<=--i;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null})},Yd={mark:null},Hd=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],Vd=Lr.prototype;Vd.toJSON=function(e){return Dr(this.root,e||0)},Vd.mark=function(e,t,n){var r=qr(e,t=t||this.root.items[0]);return(t.items[n]=r).zindex&&(r.group.zdirty=!0),r};var Xd=Wr.prototype;Xd.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},Xd.element=function(){return this._el},Xd.canvas=function(){return this._el&&this._el.firstChild},Xd.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},Xd.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},Xd.on=function(){},Xd.off=function(){},Xd._handlerIndex=function(e,t,n){for(var r=e?e.length:0;0<=--r;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},Xd.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},Xd.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},Xd.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then(function(t){var n=new MouseEvent(e.type,e),r=$r(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)}).catch(function(){})},Xd.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=Gd[o.marktype]).tip){for((a=Br(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},Xd.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var Zd=Yr.prototype;Zd.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},Zd.element=function(){return this._el},Zd.canvas=function(){return this._el&&this._el.firstChild},Zd.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},Zd.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},Zd.dirty=function(){},Zd.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},Zd._render=function(){},Zd.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},Zd._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return r},Zd.sanitizeURL=function(e){return this._load("sanitizeURL",e)},Zd.loadImage=function(e){return this._load("loadImage",e)};var Jd="mousemove",Qd="mouseout",Kd="click",eh=Q(Hr,Wr);eh.initialize=function(e,t,n){var r=this._canvas=e&&jr(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){eh[e]?eh[e].call(i,t):i.fire(e,t)})})}return Wr.prototype.initialize.call(this,e,t,n)},eh.canvas=function(){return this._canvas},eh.context=function(){return this._canvas.getContext("2d")},eh.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],eh.DOMMouseScroll=function(e){this.fire("mousewheel",e)},eh.mousemove=Vr("mousemove","mouseover","mouseout"),eh.dragover=Vr("dragover","dragenter","dragleave"),eh.mouseout=Xr("mouseout"),eh.dragleave=Xr("dragleave"),eh.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},eh.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},eh.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},eh.touchmove=function(e){this.fire("touchmove",e,!0)},eh.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},eh.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if((t.vegaType=e)===Kd&&a&&a.href?this.handleHref(t,a,a.href):e!==Jd&&e!==Qd||this.handleTooltip(t,a,e!==Qd),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},eh.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},eh.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&r.splice(i,1),this},eh.pickEvent=function(e){var t=Br(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},eh.pick=function(e,t,n,r,i){var a=this.context();return Gd[e.marktype].pick.call(this,a,e,t,n,r,i)};var th="undefined"!=typeof window&&window.devicePixelRatio||1,nh=Q(Zr,Yr),rh=Yr.prototype,ih=new _n;nh.initialize=function(e,t,n,r,i){return this._canvas=Mn(1,1),e&&(Ir(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),rh.initialize.call(this,e,t,n,r,i)},nh.resize=function(e,t,n,r){var i,a,o,u,s,f,c,l;return rh.resize.call(this,e,t,n,r),i=this._canvas,a=this._width,o=this._height,u=this._origin,s=this._scale,f="undefined"!=typeof HTMLElement&&i instanceof HTMLElement&&null!=i.parentNode,c=i.getContext("2d"),l=f?th:s,i.width=a*l,i.height=o*l,f&&1!==l&&(i.style.width=a+"px",i.style.height=o+"px"),c.pixelRatio=l,c.setTransform(l,0,0,l,l*u[0],l*u[1]),this._redraw=!0,this},nh.canvas=function(){return this._canvas},nh.context=function(){return this._canvas?this._canvas.getContext("2d"):null},nh.dirty=function(e){var t=function(e,t){if(null==t)return e;for(var n=ih.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},nh._render=function(e){var t,n,r,i=this.context(),a=this._origin,o=this._width,u=this._height,s=this._dirty;return i.save(),this._redraw||s.empty()?(this._redraw=!1,s=null):(t=i,r=a,(n=s).expand(1).round(),n.translate(-r[0]%1,-r[1]%1),t.beginPath(),t.rect(n.x1,n.y1,n.width(),n.height()),t.clip(),s=n),this.clear(-a[0],-a[1],o,u),this.draw(i,e,s),i.restore(),this._dirty.clear(),this},nh.draw=function(e,t,n){var r=Gd[t.marktype];t.clip&&function(e,t){var n=t.clip;if(e.save(),e.beginPath(),G(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},nh.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var ah=Q(Jr,Wr);ah.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(Kd,this._hrefHandler),r.removeEventListener(Jd,this._tooltipHandler),r.removeEventListener(Qd,this._tooltipHandler)),this._svg=r=e&&jr(e,"svg"),r&&(r.addEventListener(Kd,this._hrefHandler),r.addEventListener(Jd,this._tooltipHandler),r.addEventListener(Qd,this._tooltipHandler)),Wr.prototype.initialize.call(this,e,t,n)},ah.canvas=function(){return this._svg},ah.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:Qr(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},ah.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var oh={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},uh={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},sh=Object.keys(uh),fh=oh.xmlns,ch=Q(ti,Yr),lh=Yr.prototype;ch.initialize=function(e,t,n,r){return e&&(this._svg=Fr(e,0,"svg",fh),this._svg.setAttribute("class","marks"),Ir(e,1),this._root=Fr(this._svg,0,"g",fh),Ir(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),lh.initialize.call(this,e,t,n,r)},ch.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),lh.background.apply(this,arguments)},ch.resize=function(e,t,n,r){return lh.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},ch.canvas=function(){return this._svg},ch.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in oh)e[t]=oh[t];var n=this._bgcolor?Kr("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+ei("rect"):"";return Kr("svg",e)+n+this._svg.innerHTML+ei("svg")},ch._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),
this.draw(this._root,e),Ir(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},ch.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=Fr(t,0,"defs",fh)),ni(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=Fr(t,0,"defs",fh)),ri(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):Ir(r,i))},ch._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},ch.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},ch.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},ch._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=Gd[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,ii(t,s),n.items.forEach(function(e){e.dirty=s})),n.zdirty||(t.exit?(i.nested&&n.items.length?(u=n.items[0])._svg&&this._update(i,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,ii(t,s)),t._update=s));return!this._dirtyAll},ch.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=ai(e,i,c,u.tag,o);t&&(a._update(u,n,e),f&&function(e,t,n){t=t.lastChild;var r,i=0;rr(n,function(n){r=e.draw(t,n,r),++i}),Ir(t,1+i)}(a,n,e)),c=n,++l}if(!this.isDirty(t))return t._svg;var i,a=this,o=this._svg,u=Gd[t.marktype],s=!1===t.interactive?"none":null,f="g"===u.tag,c=null,l=0;return(i=ai(t,e,n,"g",o)).setAttribute("class",Ur(t)),f||i.style.setProperty("pointer-events",s),t.clip?i.setAttribute("clip-path",pr(a,t,t.group)):i.removeAttribute("clip-path"),u.nested?t.items.length&&r(t.items[0]):rr(t,r),Ir(i,l),i};var dh=null,hh=null,ph={group:function(e,t,n){hh=t.__values__,dh=t.childNodes[1],e.foreground(oi,n,this),dh=t.childNodes[0],e.background(oi,n,this);var r=!1===n.mark.interactive?"none":null;r!==hh.events&&(dh.style.setProperty("pointer-events",r),hh.events=r)},text:function(e,t,n){var r=Ar(n);r!==hh.text&&(t.textContent=r,hh.text=r),(r=Cr(n))!==hh.font&&(t.style.setProperty("font",r),hh.font=r)}};ch._update=function(e,t,n){hh=(dh=t).__values__,e.attr(oi,n,this);var r=ph[e.type];r&&r.call(this,e,t,n),this.style(dh,n)},ch.style=function(e,t){var n,r,i,a,o,u;if(null!=t)for(n=0,r=sh.length;n<r;++n)(o=t[i=sh[n]])!==hh[i]&&(a=uh[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+(u=void 0,"undefined"==typeof window?"":(u=window.location).hash?u.href.slice(0,-u.hash.length):u.href)+"#"+o.id+")"),e.style.setProperty(a,o+"")),hh[i]=o)};var gh,mh=Q(ui,Yr),vh=Yr.prototype;mh.resize=function(e,t,n,r){vh.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in oh)o[u]=oh[u];a.head=Kr("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),a.bg=s?Kr("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+ei("rect"):"",a.root=Kr("g",{transform:"translate("+i+")"}),a.foot=ei("g")+ei("svg"),this},mh.background=function(){var e=vh.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},mh.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},mh._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},mh.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(r=(n=i.gradient[t]).stops,a+=Kr("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=Kr("stop",{offset:r[e].offset,"stop-color":r[e].color})+ei("stop");a+=ei("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=Kr("clipPath",{id:t}),a+=n.path?Kr("path",{d:n.path})+ei("path"):Kr("rect",{x:0,y:0,width:n.width,height:n.height})+ei("rect"),a+=ei("clipPath");return 0<a.length?Kr("defs")+a+ei("defs"):""},mh.attributes=function(e,t){return gh={},e(si,t,this),gh},mh.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then(function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e})}return null},mh.mark=function(e){function t(t){var s=r.href(t);s&&(u+=Kr("a",s)),n="g"!==a?fi(t,e,a,o):null,u+=Kr(a,r.attributes(i.attr,t),n),"text"===a?u+=Ar(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===a&&(u+=Kr("path",r.attributes(i.background,t),fi(t,e,"bgrect",o))+ei("path"),u+=Kr("g",r.attributes(i.foreground,t))+r.markGroup(t)+ei("g")),u+=ei(a),s&&(u+=ei("a"))}var n,r=this,i=Gd[e.marktype],a=i.tag,o=this._defs,u="";return"g"!==a&&!1===e.interactive&&(n='style="pointer-events: none;"'),u+=Kr("g",{class:Ur(e),"clip-path":e.clip?pr(r,e,e.group):null},n),i.nested?e.items&&e.items.length&&t(e.items[0]):rr(e,t),u+ei("g")},mh.markGroup=function(e){var t=this,n="";return rr(e,function(e){n+=t.mark(e)}),n};var yh={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},bh={};bh.canvas=bh.png={renderer:Zr,headless:Zr,handler:Hr},bh.svg={renderer:ti,headless:ui,handler:Jr},bh.none={};var _h=new _n,xh=1e-9;Q(pi,ft).transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=Gd[a],u=o.bound,s=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),s=gi(i,u),i.items.forEach(function(e){e.bounds.clear().union(s)})):a===Nl||e.modified()?(t.visit(t.MOD,function(e){r.dirty(e)}),s.clear(),i.items.forEach(function(e){s.union(gi(e,u))}),i.role===Pl&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,function(e){s.union(gi(e,u))}),t.visit(t.MOD,function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(gi(e,u))}),n&&(s.clear(),i.items.forEach(function(e){s.union(e.bounds)}))),li(i),t.modifies("bounds")};var wh=":vega_identifier:";mi.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Q(mi,ft).transform=function(e,t){var n=function(e){var t=e._signals[wh];return t||(e._signals[wh]=t=e.add(0)),t}(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++r)}),n.set(this.value=r),t},Q(vi,ft).transform=function(e,t){var n,r,i,a=this.value;a||((a=t.dataflow.scenegraph().mark(e.markdef,(r=(n=e).groups,i=n.parent,r&&1===r.size?r.get(Object.keys(r.object)[0]):r&&i?r.lookup(i):null),e.index)).group.context=e.context,e.context.group||(e.context.group=a.group),a.source=this,a.clip=e.clip,a.interactive=e.interactive,this.value=a);var o=a.marktype===Nl?kn:wn;return t.visit(t.ADD,function(e){o.call(e,a)}),(e.modified("clip")||e.modified("interactive"))&&(a.clip=e.clip,a.interactive=!!e.interactive,a.zdirty=!0,t.reflow()),a.items=t.source,t};var kh=Q(yi,ft),Mh={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&bi(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};kh.transform=function(e,t){var n=Mh[e.method]||Mh.parity,r=t.materialize(t.SOURCE).source;if(r){e.sort&&(r=r.slice().sort(e.sort)),"greedy"===e.method&&(r=r.filter(xi)),r.forEach(function(e){e.opacity=1});var i,a,o,u,s,f=r;if(3<=f.length&&_i(f)){for(t=t.reflow(e.modified()).modifies("opacity");3<=(f=n(f)).length&&_i(f););f.length<3&&!T(r).opacity&&(1<f.length&&(T(f).opacity=0),T(r).opacity=1)}if(e.boundScale){var c=(i=e.boundScale,a=e.boundOrient,o=e.boundTolerance,u=i.range(),s=new _n,a===kl||a===El?s.set(u[0],-1/0,u[1],1/0):s.set(-1/0,u[0],1/0,u[1]),s.expand(o||1),function(e){return s.encloses(e.bounds)});r.forEach(function(e){c(e)||(e.opacity=0)})}return t}},Q(wi,ft).transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var Sh=.5,Eh=new _n;Q(Ni,ft).transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&Ri(n,t,e.layout),function(e,t,n){var r,i,a,o,u,s,f=t.items,c=Math.max(0,t.width||0),l=Math.max(0,t.height||0),d=(new _n).set(0,0,c,l),h=d.clone(),p=d.clone(),g=[];for(u=0,s=f.length;u<s;++u)switch((i=f[u]).role){case Dl:m=i.items[0].datum.orient,(o=m===Ml||m===Sl?h:p).union(Pi(e,i,c,l));break;case"title":r=i;break;case Pl:g.push(i);break;case"frame":case"scope":case Ll:case ql:case $l:case jl:case Fl:case Il:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}var m;if(g.length)for(a={leftWidth:(y=e,b=g,b.reduce(function(e,t){var n=t.items[0];if(function(e,t,n){var r=t.padding-n.x,i=t.padding-n.y;if(t.datum.title){var a=t.items[1].items[0];i+=t.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),e.dirty(n))}(y,n,n.items[0].items[0]),n.datum.orient===Ml){var r=Eh.clear();n.items.forEach(function(e){r.union(e.bounds)}),e=Math.max(e,Math.round(r.width())+2*n.padding-1)}return e},0)),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},u=0,s=g.length;u<s;++u)if(o=qi(e,g[u],a,h,p,c,l),n.autosize&&n.autosize.type===Wl){var v=g[u].items[0].datum.orient;v===Ml||v===Sl?d.add(o.x1,0).add(o.x2,0):v!==kl&&v!==El||d.add(0,o.y1).add(0,o.y2)}else d.union(o);var y,b;d.union(h).union(p),r&&d.union(function(e,t,n,r,i){var a,o=t.items[0],u=o.orient,s=o.frame,f=o.anchor,c=o.offset,l=o.bounds,d=0,h=u===Ml||u===Sl?r:n,p=0,g=0;switch(s!==Nl?u===Ml?(d=i.y2,h=i.y1):u===Sl?(d=i.y1,h=i.y2):(d=i.x1,h=i.x2):u===Ml&&(d=r,h=0),a=f===Tl?d:f===zl?h:(d+h)/2,Eh.clear().union(l),u){case kl:p=a,g=i.y1-c;break;case Ml:p=i.x1-c,g=a;break;case Sl:p=i.x2+c,g=a;break;case El:p=a,g=i.y2+c;break;default:p=o.x,g=o.y}return l.translate(p-o.x,g-o.y),Di(o,"x",p)|Di(o,"y",g)&&(o.bounds=Eh,e.dirty(o),o.bounds=l,e.dirty(o)),t.bounds.clear().union(l)}(e,r,c,l,d)),!function(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,u=e._height,s=e.padding();if(!(e._autosize<1)&&a){var f=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,Math.ceil(n.x2-f)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===Ul&&(o-=s.left+s.right,u-=s.top+s.bottom),a===Vl?(h=c=0,f=o,d=u):a===Wl?(f=Math.max(0,o-c-l),d=Math.max(0,u-h-p)):a===Gl?(f=Math.max(0,o-c-l),u=d+h+p):a===Yl?(o=f+c+l,d=Math.max(0,u-h-p)):a===Hl&&(o=f+c+l,u=d+h+p),e._resizeView(o,u,f,d,[c,h],i.resize)}}(e,t,d,n)}(n,t,e)}),e.modified()&&t.reflow(),t};var Oh=Object.freeze({bound:pi,identifier:mi,mark:vi,overlap:yi,render:wi,viewlayout:Ni}),Ah="log",Ch="pow",Rh="sqrt",Th="band",zh="point",Nh="linear",Dh="ordinal",Ph="quantile",Lh="quantize",qh="threshold",$h="bin-ordinal",jh="sequential",Fh=Array.prototype.map,Ih=Array.prototype.slice,Uh={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:ji,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(ji().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=T(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=s.scaleLinear(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=s.scaleLinear(),r=[];return t.domain=function(e){return arguments.length?(r=Fi(e),n.domain([r[0],T(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(a.bisect(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=Fi(e),t):n.slice()},t.range=function(e){return arguments.length?(r=Ih.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var Bh in Uh)Ii(Bh,Uh[Bh]);var Wh=Ui("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Gh=Ui("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Yh=Ui("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Hh=Ui("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),Vh=Ui("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Xh=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Ui),Zh={blueorange:Xh},Jh={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:Wh,category20b:Gh,category20c:Yh,tableau10:Hh,tableau20:Vh,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,blueorange:c.interpolateRgbBasis(T(Xh))};Bi("blues","Blues"),Bi("greens","Greens"),Bi("greys","Greys"),Bi("purples","Purples"),Bi("reds","Reds"),Bi("oranges","Oranges"),Bi("brownbluegreen","BrBG"),Bi("purplegreen","PRGn"),Bi("pinkyellowgreen","PiYG"),Bi("purpleorange","PuOr"),Bi("redblue","RdBu"),Bi("redgrey","RdGy"),Bi("redyellowblue","RdYlBu"),Bi("redyellowgreen","RdYlGn"),Bi("spectral","Spectral"),Bi("bluegreen","BuGn"),Bi("bluepurple","BuPu"),Bi("greenblue","GnBu"),Bi("orangered","OrRd"),Bi("purplebluegreen","PuBuGn"),Bi("purpleblue","PuBu"),Bi("purplered","PuRd"),Bi("redpurple","RdPu"),Bi("yellowgreenblue","YlGnBu"),Bi("yellowgreen","YlGn"),Bi("yelloworangebrown","YlOrBr"),Bi("yelloworangered","YlOrRd");var Qh={millisecond:l.timeMillisecond,second:l.timeSecond,minute:l.timeMinute,hour:l.timeHour,day:l.timeDay,week:l.timeWeek,month:l.timeMonth,year:l.timeYear},Kh={millisecond:l.utcMillisecond,second:l.utcSecond,minute:l.utcMinute,hour:l.utcHour,day:l.utcDay,week:l.utcWeek,month:l.utcMonth,year:l.utcYear};Q(Zi,ft).transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=null==e.count?e.values?e.values.length:10:Yi(i,e.count),o=e.format||Xi(i,a,e.formatSpecifier),u=e.values?Hi(i,e.values,a):Vi(i,a);return r&&(n.rem=r),r=u.map(function(e,t){return ye({index:t/(u.length-1),value:e,label:o(e)})}),e.extra&&r.push(ye({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},Q(Ji,ft).transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Qi,a=e.key||me,o=this.value;return vc(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(a))&&k("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=J().test(Ki),o.lookup=function(e){return o.get(a(e))}),t.visit(t.ADD,function(e){var t=a(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=a(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,function(e){var t=a(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},Q(ea,ft).transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,i=t.encode;if(vc(i)){if(!n.changed()&&!i.every(function(e){return r[e]}))return t.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||Mc,u=r.enter||Mc,s=r.exit||Mc,f=(i&&!a?r[i]:o)||Mc;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(t){u(t,e),o(t,e),f!==Mc&&f!==o&&f(t,e)}),n.modifies(u.output),n.modifies(o.output),f!==Mc&&f!==o&&n.modifies(f.output)),t.changed(t.REM)&&s!==Mc&&(t.visit(t.REM,function(t){s(t,e)}),n.modifies(s.output)),a||f!==Mc){var c=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(c,function(t){var r=u(t,e);(f(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(u.output)):t.visit(c,function(t){f(t,e)&&n.mod.push(t)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation};var ep="symbol",tp={};tp[Ph]=function(e){var t=[-1/0].concat(e.quantiles());return t.max=1/0,t},tp[Lh]=function(e){var t=e.domain(),n=t[0],r=T(t),i=e.range().length,a=new Array(i),o=0;for(a[0]=-1/0;++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=1/0,a},tp[qh]=function(e){var t=[-1/0].concat(e.domain());return t.max=1/0,t},tp["bin-linear"]=tp[$h]=function(e){var t=e.domain();return t.max=t.pop(),t},Q(ra,ft).transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o,u,s,f,c,l,d,h=t.fork(t.NO_SOURCE|t.NO_FIELDS),p=this.value,g=e.type||ep,m=e.scale,v=null==e.count?5:Yi(m,e.count),y=e.format||Xi(m,v,e.formatSpecifier),b=e.values||(u=v,(s=tp[(o=m).type])?s(o):Vi(o,u));return y=ta(m,y,g),p&&(h.rem=p),g===ep?(G(i=e.size)?(e.values||0!==m(b[0])||(b=b.slice(1)),a=b.reduce(function(t,n){return Math.max(t,i(n,e))},0)):i=H(a=i||8),p=b.map(function(t,n){return ye({index:n,label:y(t,n,b),value:t,offset:a,size:i(t,e)})})):"gradient"===g?(n=e.values?m.domain():b,f=m,c=n[0],l=T(n),r=(d=l-c)?"linear"===f.type||"sequential"===f.type?function(e){return(e-c)/d}:f.copy().domain([c,l]).range([0,1]).interpolate(Gi):H(0),p=b.map(function(e,t){return ye({index:t,label:y(e,t,b),value:e,perc:r(e)})})):(i=b.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+T(t),a=i-r;if(e.type===qh){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(e){return(e-r)/a}}(m),p=b.map(function(e,t){return ye({index:t,label:y(e,t,b),value:e,perc:t?r(e):0,perc2:t===i?1:r(b[t+1])})})),h.source=p,h.add=p,this.value=p,h};var np=J({line:fa,"line-radial":function(e,t,n,r){return fa(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:ca,"arc-radial":function(e,t,n,r){return ca(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:la,"curve-radial":function(e,t,n,r){return la(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:e<n;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*i+","+t*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}});sa.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]},Q(sa,ft).transform=function(e,t){var n=e.sourceX||ia,r=e.sourceY||aa,i=e.targetX||oa,a=e.targetY||ua,o=e.as||"path",u=e.orient||"vertical",s=e.shape||"line",f=np.get(s+"-"+u)||np.get(s);return f||k("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[o]=f(n(e),r(e),i(e),a(e))}),t.reflow(e.modified()).modifies(o)},da.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Q(da,ft).transform=function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],u=o[0],s=o[1],f=e.field||wc,c=e.startAngle||0,l=null!=e.endAngle?e.endAngle:2*Math.PI,d=t.source,h=d.map(f),p=h.length,g=c,m=(l-c)/a.sum(h),v=a.range(p);for(e.sort&&v.sort(function(e,t){return h[e]-h[t]}),n=0;n<p;++n)i=h[v[n]],(r=d[v[n]])[u]=g,r[s]=g+=i*m;return this.value=h,t.reflow(e.modified()).modifies(o)};var rp=5,ip=le([Nh,Ch,Rh]),ap=le([Nh,Ah,Ch,Rh,"time","utc"]),op=le(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);Q(ha,ft).transform=function(e,t){var n,r=t.dataflow,i=this.value;for(n in i&&!e.modified("type")||(this.value=i=Ii((e.type||Nh).toLowerCase())()),e)if(!op[n]){if("padding"===n&&ap[i.type])continue;G(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return function(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=function(e,t,n){e!==Th&&e!==zh&&k("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===zh?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*$i(n,i,r)]}(e.type,t,n);else if(t.scheme){if(G(i=function(e,t,n){var r,i=t.scheme.toLowerCase(),a=Wi(i),o=t.schemeExtent;return a||k("Unrecognized scheme name: "+t.scheme),n=e===qh?n+1:e===$h?n-1:e===Ph||e===Lh?+t.schemeCount||rp:n,e===jh?pa(a,o,t.reverse):!o&&(r=Wi(i+"-"+n))?r:G(a)?function(e,t){for(var n=new Array(t),r=t+2,i=0;i<t;)n[i]=e(++i/r);return n}(pa(a,o),n):e===Dh?a:a.slice(0,n)}(e.type,t,n)))return e.interpolator(i)}else if(i&&e.type===jh)return e.interpolator(c.interpolateRgbBasis(ga(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate((a=t.interpolate,o=t.interpolateGamma,s=c[(u=a,"interpolate"+u.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join(""))],null!=o&&s&&s.gamma?s.gamma(o):s)):G(e.round)?e.round(r):G(e.rangeRound)&&e.interpolate(r?c.interpolateRound:c.interpolate);var a,o,u,s;i&&e.range(ga(i,t.reverse))}(i,e,function(e,t,n){var r,i,a=(r=e,i=t.domainRaw,i?(r.domain(i),i.length):-1);if(-1<a)return a;var o,u,s=t.domain,f=e.type,c=t.zero||void 0===t.zero&&ip[f];if(!s)return 0;ap[f]&&t.padding&&s[0]!==T(s)&&(l=f,d=s,h=t.range,p=t.padding,g=t.exponent,m=Math.abs(T(h)-h[0]),v=m/(m-2*p),y=l===Ah?U(d,null,v):l===Rh?B(d,null,v,.5):l===Ch?B(d,null,v,g):I(d,null,v),(d=d.slice())[0]=y[0],d[d.length-1]=y[1],s=d);var l,d,h,p,g,m,v,y;return(c||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(o=(s=s.slice()).length-1||1,c&&(0<s[0]&&(s[0]=0),s[o]<0&&(s[o]=0)),null!=t.domainMin&&(s[0]=t.domainMin),null!=t.domainMax&&(s[o]=t.domainMax),null!=t.domainMid&&(((u=t.domainMid)<s[0]||u>s[o])&&n.warn("Scale domainMid exceeds domain min or max.",u),s.splice(o,0,u))),e.domain(s),f===Dh&&e.unknown(void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&Yi(e,t.nice)||null),s.length}(i,e,r)),t.fork(t.NO_SOURCE|t.NO_FIELDS)},Q(ma,ft).transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};var up;va.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]},(up=Q(va,ft)).transform=function(e,t){var n,r,i,a,o=e.as||["y0","y1"],u=o[0],s=o[1],f=e.field||wc,c="center"===e.offset?ya:"normalize"===e.offset?ba:_a;for(r=0,i=(n=function(e,t,n,r){var i,a,o,u,s,f,c,l,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],f=t.map(p),(c=i[f])||(i[f]=c=[],h.push(c)),c.push(s);for(d=f=0,u=h.length;f<u;++f){for(c=h[f],l=a=0,o=c.length;a<o;++a)l+=Math.abs(r(c[a]));c.sum=l,d<l&&(d=l),n&&c.sort(n)}return h.max=d,h}(t.source,e.groupby,e.sort,f)).length,a=n.max;r<i;++r)c(n[r],a,f,u,s);return t.reflow(e.modified()).modifies(o)};var sp=Object.freeze({axisticks:Zi,datajoin:Ji,encode:ea,legendentries:ra,linkpath:sa,pie:da,scale:ha,sortitems:ma,stack:va,validTicks:Hi}),fp=Array.prototype.slice,cp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],lp=["size","smooth"],dp=["x","y","size","cellSize","bandwidth"];Ta.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]},Q(Ta,ft).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i,o,u=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=e.count||10;return e.values?(n=Ea(),r=lp,i=e.values):(n=function(){function e(e){var n=new Float32Array(p*g),r=new Float32Array(p*g);e.forEach(function(e,t,r){var i=u(e,t,r)+h>>d,a=s(e,t,r)+h>>d;0<=i&&i<p&&0<=a&&a<g&&++n[i+a*p]}),Oa({width:p,height:g,data:n},{width:p,height:g,data:r},l>>d),Aa({width:p,height:g,data:r},{width:p,height:g,data:n},l>>d),Oa({width:p,height:g,data:n},{width:p,height:g,data:r},l>>d),Aa({width:p,height:g,data:r},{width:p,height:g,data:n},l>>d),Oa({width:p,height:g,data:n},{width:p,height:g,data:r},l>>d),Aa({width:p,height:g,data:r},{width:p,height:g,data:n},l>>d);var i=m(n);if(!Array.isArray(i)){var o=a.max(n);i=a.tickStep(0,o,i),(i=a.range(0,Math.floor(o/i)*i,i)).shift()}return Ea().thresholds(i).size([p,g])(n).map(t)}function t(e){return e.value*=Math.pow(2,-2*d),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(i)}function i(e){e[0]=e[0]*Math.pow(2,d)-h,e[1]=e[1]*Math.pow(2,d)-h}function o(){return p=f+2*(h=3*l)>>d,g=c+2*h>>d,e}var u=Ca,s=Ra,f=960,c=500,l=20,d=2,h=3*l,p=f+2*h>>d,g=c+2*h>>d,m=wa(20);return e.x=function(t){return arguments.length?(u="function"==typeof t?t:wa(+t),e):u},e.y=function(t){return arguments.length?(s="function"==typeof t?t:wa(+t),e):s},e.size=function(e){if(!arguments.length)return[f,c];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(0<=t||0<=t))throw new Error("invalid size");return f=t,c=n,o()},e.cellSize=function(e){if(!arguments.length)return 1<<d;if(!(1<=(e=+e)))throw new Error("invalid cell size");return d=Math.floor(Math.log(e)/Math.LN2),o()},e.thresholds=function(t){return arguments.length?(m="function"==typeof t?t:wa(Array.isArray(t)?fp.call(t):t),e):m},e.bandwidth=function(e){if(!arguments.length)return Math.sqrt(l*(l+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return l=Math.round((Math.sqrt(4*e*e+1)-1)/2),o()},e}(),r=dp,i=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?s:(o=s,function(e){for(var t=a.extent(e),n=t[0],r=t[1]-n,i=[],u=1;u<=o;++u)i.push(n+r*u/(o+1));return i}))),r.forEach(function(t){null!=e[t]&&n[t](e[t])}),this.value&&(u.rem=this.value),i=i&&i.length?n(i).map(ye):[],this.value=u.source=u.add=i,u};var hp="FeatureCollection";za.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Q(za,ft).transform=function(e,t){var n,r=this._features,i=this._points,a=e.fields,o=a&&a[0],u=a&&a[1],s=e.geojson,f=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(w(s))||o&&t.modified(w(o))||u&&t.modified(w(u)),this.value&&!n||(f=t.SOURCE,this._features=r=[],this._points=i=[]),s&&t.visit(f,function(e){r.push(s(e))}),o&&u&&(t.visit(f,function(e){var t=o(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])}),r=r.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:hp,features:r}};var pp=h.geoPath(),gp=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],mp={albers:h.geoAlbers,albersusa:h.geoAlbersUsa,azimuthalequalarea:h.geoAzimuthalEqualArea,azimuthalequidistant:h.geoAzimuthalEquidistant,conicconformal:h.geoConicConformal,conicequalarea:h.geoConicEqualArea,conicequidistant:h.geoConicEquidistant,equirectangular:h.geoEquirectangular,gnomonic:h.geoGnomonic,identity:h.geoIdentity,mercator:h.geoMercator,orthographic:h.geoOrthographic,stereographic:h.geoStereographic,transversemercator:h.geoTransverseMercator};for(var vp in mp)Na(vp,mp[vp]);Pa.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Q(Pa,ft).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||_c,a=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=Da(e.projection),n.materialize().reflow()):o=i===_c||t.modified(i.fields)?n.ADD_MOD:n.ADD;var u=function(e,t){var n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(r,e.pointRadius);return n.visit(o,function(e){e[a]=r(i(e))}),r.pointRadius(u),n.modifies(a)},La.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Q(La,ft).transform=function(e,t){function n(e){var t=i([a(e),o(e)]);t?(e[s]=t[0],e[f]=t[1]):(e[s]=void 0,e[f]=void 0)}var r,i=e.projection,a=e.fields[0],o=e.fields[1],u=e.as||["x","y"],s=u[0],f=u[1];return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(r=t.modified(a.fields)||t.modified(o.fields),t.visit(r?t.ADD_MOD:t.ADD,n)),t.modifies(u)},qa.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Q(qa,ft).transform=function(e,t){var n,r,i,a,o=t.fork(t.ALL),u=this.value,s=e.field||A("datum"),f=e.as||"shape",c=o.ADD_MOD;return u&&!e.modified()||(this.value=(n=Da(e.projection),r=s,i=e.pointRadius,(a=null==i?function(e){return n(r(e))}:function(e){var t=n.pointRadius(),a=n.pointRadius(i)(r(e));return n.pointRadius(t),a}).context=function(e){return n.context(e),a},u=a),o.materialize().reflow(),c=o.SOURCE),o.visit(c,function(e){e[f]=u}),o.modifies(f)},$a.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",
array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Q($a,ft).transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)G(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(xe(r[0],n)):t.add.push(ye(n)),r[0]=n,t},Q(ja,ft).transform=function(e,t){var n,r,i,a,o=this.value;return!o||e.modified("type")?(this.value=o=function(e){var t=Na((e||"mercator").toLowerCase());return t||k("Unrecognized projection type: "+e),t()}(e.type),gp.forEach(function(t){null!=e[t]&&Fa(o,t,e[t])})):gp.forEach(function(t){e.modified(t)&&Fa(o,t,e[t])}),null!=e.pointRadius&&o.path.pointRadius(e.pointRadius),e.fit&&(n=o,a=(r=e).fit,i=1===(a=W(a)).length?a[0]:{type:hp,features:a.reduce(function(e,t){return t&&t.type===hp?e.push.apply(e,t.features):vc(t)?e.push.apply(e,t):e.push(t),e},[])},r.extent?n.fitExtent(r.extent,i):r.size&&n.fitSize(r.size,i)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var yp=Object.freeze({contour:Ta,geojson:za,geopath:Pa,geopoint:La,geoshape:qa,graticule:$a,projection:ja}),bp={center:p.forceCenter,collide:p.forceCollide,nbody:p.forceManyBody,link:p.forceLink,x:p.forceX,y:p.forceY},_p="forces",xp=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],wp=["static","iterations"],kp=["x","y","vx","vy"];Ia.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:kp}]};var Mp=Q(Ia,ft);Mp.transform=function(e,t){var n,r,i,a,o,u,s,f,c=this.value,l=t.changed(t.ADD_REM),d=e.modified(xp),h=e.iterations||300;if(c?(l&&(t.modifies("index"),c.nodes(t.source)),(d||t.changed(t.MOD))&&Ua(c,e,0,t)):(this.value=(i=t.source,a=e,o=p.forceSimulation(i),u=!1,s=o.stop,f=o.restart,o.stopped=function(){return u},o.restart=function(){return u=!1,f()},o.stop=function(){return u=!0,s()},c=Ua(o,a,!0).on("end",function(){u=!0})),c.on("tick",(n=t.dataflow,r=this,function(){n.touch(r).run()})),e.static||(l=!0,c.tick()),t.modifies("index")),d||l||e.modified(wp)||t.changed()&&e.restart)if(c.alpha(Math.max(c.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(c.alphaMin(),1/h)),e.static)for(c.stop();0<=--h;)c.tick();else if(c.stopped()&&c.restart(),!l)return t.StopPropagation;return this.finish(e,t)},Mp.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===_p&&"link"===n.op._argval.force)for(var u,s=n.op._argops,f=0,c=s.length;f<c;++f)if("links"===s[f].name&&(u=s[f].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(kp)};var Sp=Object.freeze({force:Ia});Ha.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Q(Ha,ft).transform=function(e,t){t.source||k("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each(function(e){e.children&&ge(e.data)&&i.rem.push(e.data)}),this.value=a=m.hierarchy({values:W(e.keys).reduce(function(e,t){return e.key(t),e},g.nest()).entries(i.source)},Va),n&&a.each(function(e){e.children&&(e=ye(e.data),i.add.push(e),i.source.push(e))}),Ya(a,me,me)),i.source.root=a,i},Q(Xa,ft).transform=function(e,t){t.source&&t.source.root||k(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),function(e,t,n){for(var r,i=0,a=t.length;i<a;++i)(r=t[i])in n&&e[r](n[r])}(n,this.params,e);try{this.value=n(i)}catch(e){k(e)}return i.each(function(e){!function(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,a)}),t.reflow(e.modified()).modifies(a).modifies("leaf")};var Ep=["x","y","r","depth","children"];Za.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:Ep}]};var Op=Q(Za,Xa);Op.layout=m.pack,Op.params=["size","padding"],Op.fields=Ep;var Ap=["x0","y0","x1","y1","depth","children"];Ja.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:Ap}]};var Cp=Q(Ja,Xa);Cp.layout=m.partition,Cp.params=["size","round","padding"],Cp.fields=Ap,Qa.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Q(Qa,ft).transform=function(e,t){t.source||k("Stratify transform requires an upstream data source.");var n=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),i=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),i&&(this.value=Ya(m.stratify().id(e.key).parentId(e.parentKey)(r.source),e.key,kc)),r.source.root=this.value,r};var Rp={tidy:m.tree,cluster:m.cluster},Tp=["x","y","depth","children"];Ka.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:Tp}]};var zp=Q(Ka,Xa);zp.layout=function(e){var t=e||"tidy";return Rp.hasOwnProperty(t)?Rp[t]():void k("Unrecognized Tree layout method: "+t)},zp.params=["size","nodeSize","separation"],zp.fields=Tp,eo.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Q(eo,ft).transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||k("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,function(e){a[me(e)]=1}),r.each(function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[me(t)]&&a[me(n)]&&i.add.push(ye({source:n,target:t}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,function(e){a[me(e)]=1}),n.forEach(function(e){(a[me(e.source)]||a[me(e.target)])&&i.mod.push(e)})),i};var Np={binary:m.treemapBinary,dice:m.treemapDice,slice:m.treemapSlice,slicedice:m.treemapSliceDice,squarify:m.treemapSquarify,resquarify:m.treemapResquarify},Dp=["x0","y0","x1","y1","depth","children"];to.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:Dp}]};var Pp=Q(to,Xa);Pp.layout=function(){var e=m.treemap();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){Np.hasOwnProperty(t)?e.tile(Np[t]):k("Unrecognized Treemap layout method: "+t)},e},Pp.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],Pp.fields=Dp;var Lp=Object.freeze({nest:Ha,pack:Za,partition:Ja,stratify:Qa,tree:Ka,treelinks:eo,treemap:to});no.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var qp=Q(no,ft),$p=[[-1e5,-1e5],[1e5,1e5]];qp.transform=function(e,t){var n,r,i,a,o=e.as||"path",u=t.source;for(n=v.voronoi().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||$p),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(o)};var jp=Object.freeze({voronoi:no}),Fp=Math.PI/180,Ip=64,Up=2048,Bp={archimedean:uo,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},Wp=Array.prototype.map,Gp=Array.prototype.slice,Yp={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:fo,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(fo().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=T(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=s.scaleLinear(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=s.scaleLinear(),r=[];return t.domain=function(e){return arguments.length?(r=co(e),n.domain([r[0],T(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(a.bisect(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=co(e),t):n.slice()},t.range=function(e){return arguments.length?(r=Gp.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var Hp in Yp)lo(Hp,Yp[Hp]);var Vp=ho("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Xp=ho("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Zp=ho("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Jp=ho("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),Qp=ho("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Kp=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(ho),eg={blueorange:Kp},tg={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:Vp,category20b:Xp,category20c:Zp,tableau10:Jp,tableau20:Qp,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,blueorange:c.interpolateRgbBasis(T(Kp))};po("blues","Blues"),po("greens","Greens"),po("greys","Greys"),po("purples","Purples"),po("reds","Reds"),po("oranges","Oranges"),po("brownbluegreen","BrBG"),po("purplegreen","PRGn"),po("pinkyellowgreen","PiYG"),po("purpleorange","PuOr"),po("redblue","RdBu"),po("redgrey","RdGy"),po("redyellowblue","RdYlBu"),po("redyellowgreen","RdYlGn"),po("spectral","Spectral"),po("bluegreen","BuGn"),po("bluepurple","BuPu"),po("greenblue","GnBu"),po("orangered","OrRd"),po("purplebluegreen","PuBuGn"),po("purpleblue","PuBu"),po("purplered","PuRd"),po("redpurple","RdPu"),po("yellowgreenblue","YlGnBu"),po("yellowgreen","YlGn"),po("yelloworangebrown","YlOrBr"),po("yelloworangered","YlOrRd");var ng=["x","y","font","fontSize","fontStyle","fontWeight","angle"],rg=["text","font","rotate","fontSize","fontStyle","fontWeight"];go.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:ng}]},Q(go,ft).transform=function(e,n){var r=e.modified();if(r||n.changed(n.ADD_REM)||rg.some(function(t){var r=e[t];return G(r)&&n.modified(r.fields)})){var i,a=n.materialize(n.SOURCE).source,o=this.value,u=e.as||ng,s=e.fontSize||14;if(G(s)?i=e.fontSizeRange:s=H(s),i){var f=s,c=lo("sqrt")().domain(function(e,t){for(var n,r=1/0,i=-1/0,a=0,o=t.length;a<o;++a)(n=e(t[a]))<r&&(r=n),i<n&&(i=n);return[r,i]}(f,a)).range(i);s=function(e){return c(f(e))}}a.forEach(function(e){e[u[0]]=NaN,e[u[1]]=NaN,e[u[3]]=0});for(var l,d,h=o.words(a).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(t.random).layout(),p=o.size(),g=p[0]>>1,m=p[1]>>1,v=0,y=h.length;v<y;++v)(d=(l=h[v]).datum)[u[0]]=l.x+g,d[u[1]]=l.y+m,d[u[2]]=l.font,d[u[3]]=l.size,d[u[4]]=l.style,d[u[5]]=l.weight,d[u[6]]=l.rotate;return n.reflow(r).modifies(u)}};var ig=Object.freeze({wordcloud:go});_o.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var ag=Q(_o,ft);ag.transform=function(e,t){return this._dims?e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)})?this.reinit(e,t):this.eval(e,t):this.init(e,t)},ag.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)r=o[n=i[f].fname]||(o[n]=bo()),u.push(yo(r,f,a[f]));return this.eval(e,t)},ag.reinit=function(e,t){var n,r,i,a,o,u,s,f,c,l=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),b=m.all(),_=l.rem=l.add,x=l.mod,w=h.length,k={};if(y.set(v),t.rem.length&&(o=this.remove(e,t,l)),t.add.length&&m.add(t.add),t.mod.length)for(u={},s=0,f=(a=t.mod).length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)c=d[s],(!g[s]||e.modified("fields",s)||t.modified(c.fields))&&((n=k[i=c.fname])||(p[i]=r=bo(),k[i]=n=r.insert(c,t.source,0)),g[s]=yo(r,s,h[s]).onAdd(n,v));for(s=0,f=m.data().length;s<f;++s)o[s]||(y[s]!==v[s]?_.push(s):u[s]&&v[s]!==b&&x.push(s));return m.mask=(1<<w)-1,l},ag.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},ag.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,f=this._indices,c=e.fields,l={},d=n.add,h=u.size(),p=h+o.length,g=s.length;u.resize(p,g),u.add(o);var m=u.curr(),v=u.prev(),y=u.all();for(r=0;r<g;++r)a=l[i=c[r].fname]||(l[i]=f[i].insert(c[r],o,h)),s[r].onAdd(a,m);for(;h<p;++h)v[h]=y,m[h]!==y&&d.push(h)},ag.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),f=e.mod;for(n=0,r=f.length;n<r;++n)u[i=f[n]._index]!==s&&a.push(i)},ag.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),c=s.prev(),l=s.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)d[a=p[r]._index]=1,c[a]=o=f[a],o!==(f[a]=l)&&h.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},ag.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)})},ag.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,f=0;for(i=n.filters=0;i<s;++i)e.modified("query",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(f=i=0;i<s;++i)e.modified("query",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},ag.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),c=u.prev(),l=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],g=h[1],m=d[0],v=d[1],y=e.one;if(p<m)for(i=p,a=Math.min(m,g);i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(m<p)for(i=m,a=Math.min(p,v);i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(v<g)for(i=Math.max(p,v),a=g;i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<v)for(i=Math.max(m,g),a=v;i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;e.range=t.slice()},ag.incrementOne=function(e,t,n,r){var i,a,o,u=this.value.curr(),s=e.index(),f=e.bisect(e.range),c=e.bisect(t),l=c[0],d=c[1],h=f[0],p=f[1],g=e.one;if(l<h)for(i=l,a=Math.min(h,d);i<a;++i)u[o=s[i]]^=g,n.push(o);else if(h<l)for(i=h,a=Math.min(l,p);i<a;++i)u[o=s[i]]^=g,r.push(o);if(p<d)for(i=Math.max(l,p),a=d;i<a;++i)u[o=s[i]]^=g,n.push(o);else if(d<p)for(i=Math.max(h,d),a=p;i<a;++i)u[o=s[i]]^=g,r.push(o);e.range=t.slice()},xo.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Q(xo,ft).transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(e){var t=u[e]&n;return!t&&t^s[e]&n?o[e]:null}),a.filter(a.REM,function(e){var t=u[e]&n;return!t||t^t^s[e]&n?null:o[e]})):(a.filter(a.ADD,f),a.filter(a.REM,function(e){return(u[e]&n)===i?o[e]:null})),a.filter(a.SOURCE,function(e){return f(e._index)})};var og=Object.freeze({crossfilter:_o,resolvefilter:xo}),ug=Array.prototype.map,sg=Array.prototype.slice,fg={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:wo,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(wo().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=T(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=s.scaleLinear(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=s.scaleLinear(),r=[];return t.domain=function(e){return arguments.length?(r=ko(e),n.domain([r[0],T(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(a.bisect(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=ko(e),t):n.slice()},t.range=function(e){return arguments.length?(r=sg.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var cg in fg)Mo(cg,fg[cg]);var lg=So("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),dg=So("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),hg=So("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),pg=So("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),gg=So("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),mg=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(So),vg={blueorange:mg},yg={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:lg,category20b:dg,category20c:hg,tableau10:pg,tableau20:gg,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,rainbow:f.interpolateRainbow,sinebow:f.interpolateSinebow,blueorange:c.interpolateRgbBasis(T(mg))};Eo("blues","Blues"),Eo("greens","Greens"),Eo("greys","Greys"),Eo("purples","Purples"),Eo("reds","Reds"),Eo("oranges","Oranges"),Eo("brownbluegreen","BrBG"),Eo("purplegreen","PRGn"),Eo("pinkyellowgreen","PiYG"),Eo("purpleorange","PuOr"),Eo("redblue","RdBu"),Eo("redgrey","RdGy"),Eo("redyellowblue","RdYlBu"),Eo("redyellowgreen","RdYlGn"),Eo("spectral","Spectral"),Eo("bluegreen","BuGn"),Eo("bluepurple","BuPu"),Eo("greenblue","GnBu"),Eo("orangered","OrRd"),Eo("purplebluegreen","PuBuGn"),Eo("purpleblue","PuBu"),Eo("purplered","PuRd"),Eo("redpurple","RdPu"),Eo("yellowgreenblue","YlGnBu"),Eo("yellowgreen","YlGn"),Eo("yelloworangebrown","YlOrBr"),Eo("yelloworangered","YlOrRd");var bg,_g,xg,wg,kg,Mg={millisecond:l.timeMillisecond,second:l.timeSecond,minute:l.timeMinute,hour:l.timeHour,day:l.timeDay,week:l.timeWeek,month:l.timeMonth,year:l.timeYear},Sg={millisecond:l.utcMillisecond,second:l.utcSecond,minute:l.utcMinute,hour:l.utcHour,day:l.utcDay,week:l.utcWeek,month:l.utcMonth,year:l.utcYear},Eg="default",Og={trap:!1},Ag="vega-bind",Cg="vega-bind-name",Rg="vega-bind-radio",Tg="vega-option-",zg="outer",Ng=["value","update","react","bind"];Qo.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};var Dg=1,Pg=2,Lg=3,qg=4,$g=5,jg=6,Fg=7,Ig=8;(bg={})[Dg]="Boolean",bg[Pg]="<end>",bg[Lg]="Identifier",bg[qg]="Keyword",bg[$g]="Null",bg[jg]="Numeric",bg[Fg]="Punctuator",bg[Ig]="String",bg[9]="RegularExpression";var Ug="ArrayExpression",Bg="BinaryExpression",Wg="CallExpression",Gg="ConditionalExpression",Yg="Identifier",Hg="Literal",Vg="LogicalExpression",Xg="MemberExpression",Zg="ObjectExpression",Jg="Property",Qg="UnaryExpression",Kg="Unexpected token %0",em="Unexpected number",tm="Unexpected string",nm="Unexpected identifier",rm="Unexpected reserved word",im="Unexpected end of input",am="Invalid regular expression",om="Invalid regular expression: missing /",um="Octal literals are not allowed in strict mode.",sm="Duplicate data property in object literal not allowed in strict mode",fm="ILLEGAL",cm="Disabled.",lm=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),dm=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),hm={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},pm={if:1,this:1},gm={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},mm={},vm=new Date(2e3,0,1),ym="undefined"!=typeof window&&window||null,bm="Literal",_m="%",xm=":",wm=Array.prototype.map,km=Array.prototype.slice,Mm={identity:s.scaleIdentity,linear:s.scaleLinear,log:s.scaleLog,ordinal:s.scaleOrdinal,pow:s.scalePow,sqrt:s.scaleSqrt,quantile:s.scaleQuantile,quantize:s.scaleQuantize,threshold:s.scaleThreshold,time:s.scaleTime,utc:s.scaleUtc,band:Wu,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(Wu().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=T(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=s.scaleLinear(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=s.scaleLinear(),r=[];return t.domain=function(e){return arguments.length?(r=Gu(e),n.domain([r[0],T(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(a.bisect(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=Gu(e),t):n.slice()},t.range=function(e){return arguments.length?(r=km.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var Sm in Mm)Yu(Sm,Mm[Sm]);var Em=Hu("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Om=Hu("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Am=Hu("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Cm=Hu("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),Rm=Hu("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Tm=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Hu),zm={
blueorange:Tm},Nm={category10:f.schemeCategory10,accent:f.schemeAccent,dark2:f.schemeDark2,paired:f.schemePaired,pastel1:f.schemePastel1,pastel2:f.schemePastel2,set1:f.schemeSet1,set2:f.schemeSet2,set3:f.schemeSet3,category20:Em,category20b:Om,category20c:Am,tableau10:Cm,tableau20:Rm,viridis:f.interpolateViridis,magma:f.interpolateMagma,inferno:f.interpolateInferno,plasma:f.interpolatePlasma,blueorange:c.interpolateRgbBasis(T(Tm))};Vu("blues","Blues"),Vu("greens","Greens"),Vu("greys","Greys"),Vu("purples","Purples"),Vu("reds","Reds"),Vu("oranges","Oranges"),Vu("brownbluegreen","BrBG"),Vu("purplegreen","PRGn"),Vu("pinkyellowgreen","PiYG"),Vu("purpleorange","PuOr"),Vu("redblue","RdBu"),Vu("redgrey","RdGy"),Vu("redyellowblue","RdYlBu"),Vu("redyellowgreen","RdYlGn"),Vu("spectral","Spectral"),Vu("bluegreen","BuGn"),Vu("bluepurple","BuPu"),Vu("greenblue","GnBu"),Vu("orangered","OrRd"),Vu("purplebluegreen","PuBuGn"),Vu("purpleblue","PuBu"),Vu("purplered","PuRd"),Vu("redpurple","RdPu"),Vu("yellowgreenblue","YlGnBu"),Vu("yellowgreen","YlGn"),Vu("yelloworangebrown","YlOrBr"),Vu("yelloworangered","YlOrRd");var Dm=Ku("area",h.geoArea),Pm=Ku("bounds",h.geoBounds),Lm=Ku("centroid",h.geoCentroid),qm={},$m="bin_",jm="intersect",Fm="union",Im="index:unit",Um={random:function(){return t.random()},isArray:vc,isBoolean:K,isDate:ee,isNumber:te,isObject:S,isRegExp:ne,isString:E,isTuple:ge,toBoolean:ue,toDate:fe,toNumber:z,toString:ce,pad:oe,peek:T,truncate:de,rgb:y.rgb,lab:y.lab,hcl:y.hcl,hsl:y.hsl,sequence:a.range,format:function(e,t){return ju("format",d.format,t)(e)},utcFormat:function(e,t){return ju("utcFormat",i.utcFormat,t)(e)},utcParse:function(e,t){return ju("utcParse",i.utcParse,t)(e)},timeFormat:Fu,timeParse:function(e,t){return ju("timeParse",i.timeParse,t)(e)},monthFormat:function(e){return Iu(e,1,"%B")},monthAbbrevFormat:function(e){return Iu(e,1,"%b")},dayFormat:function(e){return Iu(0,2+e,"%A")},dayAbbrevFormat:function(e){return Iu(0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},warn:function(){return Uu(this.context.dataflow,"warn",arguments)},info:function(){return Uu(this.context.dataflow,"info",arguments)},debug:function(){return Uu(this.context.dataflow,"debug",arguments)},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},clampRange:function(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),n-t<=(r=a-i)?[t,n]:[Math.min(Math.max(i,t),n-r),Math.min(Math.max(a,r),n)]},pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){return ym?ym.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return ym?[ym.innerWidth,ym.innerHeight]:[void 0,void 0]},span:function(e){return e[e.length-1]-e[0]||0},merge:function(){var e=[].slice.call(arguments);return e.unshift({}),X.apply(null,e)},flush:function(e,t,n,r,i,a){var o,u,s=e[0],f=T(e);return f<s&&(o=s,s=f,f=o),(o=Math.abs(t-s))<(u=Math.abs(f-t))&&o<=n?r:u<=n?i:a},bandspace:function(e,t,n){return Bu(e||0,t||0,n||0)},inrange:is,setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(kc).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?Nn(n,t=t||Rn(e)):e}},panLinear:q,panLog:$,panPow:j,zoomLinear:I,zoomLog:U,zoomPow:B,encode:function(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,a){var o,u,s=this.context.dataflow,f=this.context.data[e],c=f.input,l=f.changes,d=s.stamp();if(!1===s._trigger||!(c.value.length||t||r))return 0;if((!l||l.stamp<d)&&(f.changes=l=s.changeset(),l.stamp=d,s.runAfter(function(){f.modified=!0,s.pulse(c,l).run()},!0,1)),n&&(o=!0===n?kc:vc(n)||ge(n)?n:os(n),l.remove(o)),t&&l.insert(t),r&&(o=os(r),c.value.some(o)?l.remove(o):l.insert(r)),i)for(u in a)l.modify(i,u,a[u]);return 1}},Bm=["view","item","group","xy","x","y"],Wm={};vs("bandwidth",function(e,t){var n=Zu(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},Qu),vs("copy",function(e,t){var n=Zu(e,(t||this).context);return n?n.copy():void 0},Qu),vs("domain",function(e,t){var n=Zu(e,(t||this).context);return n?n.domain():[]},Qu),vs("range",function(e,t){var n=Zu(e,(t||this).context);return n&&n.range?n.range():[]},Qu),vs("invert",function(e,t,n){var r=Zu(e,(n||this).context);return r?vc(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0},Qu),vs("scale",function(e,t,n){var r=Zu(e,(n||this).context);return r?r(t):void 0},Qu),vs("gradient",function(e,t,n,r,i){e=Zu(e,(i||this).context);var a,o,u,s,f=xn(t,n),c=e.domain(),l=c[0],d=c[c.length-1],h=(a=e,(s=(u=d)-(o=l))?"linear"===a.type||"sequential"===a.type?function(e){return(e-o)/s}:a.copy().domain([o,u]).range([0,1]).interpolate(Xu):H(0));e.ticks&&(l!==(c=e.ticks(+r||15))[0]&&c.unshift(l),d!==c[c.length-1]&&c.push(d));for(var p=0,g=c.length;p<g;++p)f.stop(h(c[p]),e(c[p]));return f},Qu),vs("geoArea",Dm,Qu),vs("geoBounds",Pm,Qu),vs("geoCentroid",Lm,Qu),vs("geoShape",function(e,t,n){var r=Zu(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}},Qu),vs("indata",function(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i},function(e,t,n,r){t[0].type!==bm&&k("First argument to indata must be a string literal."),t[1].type!==bm&&k("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,o="@"+a;r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,a))}),vs("data",es,ts),vs("vlSingle",cs,ts),vs("vlSingleDomain",ds,ts),vs("vlMulti",cs,ls),vs("vlMultiDomain",ds,ls),vs("vlInterval",function(e,t,n){return fs.call(this,e,t,n,ss)},ts),vs("vlIntervalDomain",function(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=c[0],d=0;if(l){for(i=l.intervals.length;d<i;++d)if(a=l.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,s=2<a.extent.length;break}return u=c.reduce(function(e,t){var n=t.intervals[o].extent,r=s?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return s?e.push.apply(e,r):e.push(r),e},[]),s?hs(u,r):ps(u,r)}},ts),vs("treePath",function(e,t,n){var r=rs(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(ns):void 0},ts),vs("treeAncestors",function(e,t){var n=rs(e,this)[t];return n?n.ancestors().map(ns):void 0},ts);var Gm,Ym,Hm={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+O("$"+e)+"]"},functions:function(e){var t=$u(e);for(var n in Bm.forEach(function(e){t[e]="event.vega."+e}),Um)t[n]="this."+n;return t},constants:gm,visitors:Wm},Vm=function(e){function t(e){if(E(e))return e;var t=h[e.type];return null==t&&k("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(f),fields:Object.keys(c)};return f={},c={},n}var r=(e=e||{}).whitelist?le(e.whitelist):{},i=e.blacklist?le(e.blacklist):{},a=e.constants||gm,o=(e.functions||$u)(t),u=e.globalvar,s=e.fieldvar,f={},c={},l=0,d=G(u)?u:function(e){return u+'["'+e+'"]'},h={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return 0<l?t:i.hasOwnProperty(t)?k("Illegal identifier: "+t):a.hasOwnProperty(t)?a[t]:r.hasOwnProperty(t)?t:(f[t]=1,d(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(l+=1);var i=t(e.property);return r===s&&(c[i]=1),n&&(l-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&k("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,i=o.hasOwnProperty(n)&&o[n];return i||k("Unrecognized function: "+n),G(i)?i(r):i+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){l+=1;var n=t(e.key);return l-=1,n+":"+t(e.value)}};return n.functions=o,n.constants=a,n}(Hm),Xm="$",Zm={$tupleid:1,toString:function(){return":_tupleid_:"}},Jm=ks("key"),Qm="descending",Km="scope",ev="view",tv="timer",nv="view",rv="[",iv="]",av="{",ov="}",uv=":",sv=",",fv="@",cv=">",lv=/[[\]{}]/,dv={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},hv="var datum=event.item&&event.item.datum;",pv=$s("aggregate"),gv=$s("axisticks"),mv=$s("bound"),vv=$s("collect"),yv=$s("compare"),bv=$s("datajoin"),_v=$s("encode"),xv=$s("facet"),wv=$s("field"),kv=$s("key"),Mv=$s("legendentries"),Sv=$s("mark"),Ev=$s("multiextent"),Ov=$s("multivalues"),Av=$s("overlap"),Cv=$s("params"),Rv=$s("prefacet"),Tv=$s("projection"),zv=$s("proxy"),Nv=$s("relay"),Dv=$s("render"),Pv=$s("scale"),Lv=$s("sieve"),qv=$s("sortitems"),$v=$s("viewlayout"),jv=$s("values"),Fv=0,Iv=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],Uv=le(Iv),Bv=le(Iv.slice(4,9)),Wv=le(Iv.slice(9)),Gv=le(Iv.slice(1,6)),Yv="top",Hv="left",Vv="right",Xv="bottom",Zv="vertical",Jv="index",Qv="label",Kv="offset",ey="perc",ty="perc2",ny="size",ry="value",iy="guide-label",ay="guide-title",oy="group-title",uy="symbol",sy="gradient",fy="discrete",cy=["size","shape","fill","stroke","strokeDash","opacity"],ly={name:1,interactive:1},dy=le(["rule"]),hy=le(["group","image","rect"]),py="mark",gy="frame",my="scope",vy="axis",yy="axis-domain",by="axis-grid",_y="axis-label",xy="axis-tick",wy="axis-title",ky="legend",My="legend-band",Sy="legend-entry",Ey="legend-gradient",Oy="legend-label",Ay="legend-symbol",Cy="legend-title",Ry="title",Ty="group",zy="rect",Ny="rule",Dy="symbol",Py="text",Ly="datum."+ey+'<=0?"left":datum.'+ey+'>=1?"right":"center"',qy="datum."+ey+'<=0?"bottom":datum.'+ey+'>=1?"top":"middle"',$y={value:0};Rf.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(e.add(t[0]);r<n;++r)t[r].params.pulse=ws(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new Rf(e,i,o,a,u)};var jy=Rf.prototype;jy.countsRef=function(e,t,n){var r,i,a,o=this.counts||(this.counts={}),u=Tf(t);return null!=u&&(e=this.scope,r=o[u]),r?n&&n.field&&zf(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:ws(this.output)},n&&n.field&&zf(e,a,n),r={agg:i=e.add(pv(a)),ref:ws(r=e.add(vv({pulse:ws(i)})))},null!=u&&(o[u]=r)),r.ref},jy.tuplesRef=function(){return ws(this.values)},jy.extentRef=function(e,t){return Nf(e,this,"extent","extent",t,!1)},jy.domainRef=function(e,t){return Nf(e,this,"domain","values",t,!1)},jy.valuesRef=function(e,t,n){return Nf(e,this,"vals","values",t,n||!0)},jy.lookupRef=function(e,t){return Nf(e,this,"lookup","tupleindex",t,!1)},jy.indataRef=function(e,t){return Nf(e,this,"indata","tupleindex",t,!0,!0)};var Fy=qf(O(Hv),O(Vv),O("center")),Iy=qf('+(item.orient==="'+Vv+'")','+(item.orient!=="'+Hv+'")',"0.5"),Uy=le(["width","height","padding","autosize"]),By=Yf.prototype=Hf.prototype;By.fork=function(){return new Hf(this)},By.isSubscope=function(){return 0<this._subid},By.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},By.id=function(){return(this._subid?this._subid+":":0)+this._id++},By.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},By.proxy=function(e){var t=e instanceof bs?ws(e):e;return this.add(zv({value:t}))},By.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},By.addUpdate=function(e){return this.updates.push(e),e},By.finish=function(){function e(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}var t,n;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data)for(var r in e((n=this.data[t]).input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values"),n.index)e(n.index[r],t,"index:"+r);return this},By.pushState=function(e,t,n){this._encode.push(ws(this.add(Lv({pulse:e})))),this._parent.push(t),this._lookup.push(n?ws(this.proxy(n)):null),this._markpath.push(-1)},By.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},By.parent=function(){return T(this._parent)},By.encode=function(){return T(this._encode)},By.lookup=function(){return T(this._lookup)},By.markpath=function(){var e=this._markpath;return++e[e.length-1]},By.fieldRef=function(e,t){if(E(e))return ks(e,t);e.signal||k("Unsupported field reference: "+O(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=ws(this.add(wv(n)))),i},By.compareRef=function(e,t){function n(e){return Es(e)?(i=!0,ws(r[e.signal])):e}var r=this.signals,i=!1,a=W(e.field).map(n),o=W(e.order).map(n);return t&&a.push(Zm),i?ws(this.add(yv({fields:a,orders:o}))):Ms(a,o)},By.keyRef=function(e,t){var n,r=this.signals,i=!1;return e=W(e).map(function(e){return Es(e)?(i=!0,ws(r[e.signal])):e}),i?ws(this.add(kv({fields:e,flat:t}))):(n={$key:e},t&&(n.$flat=!0),n)},By.sortRef=function(e){if(!e)return e;var t=[Ss(e.op,e.field),Zm],n=e.order||"ascending";return n.signal?ws(this.add(yv({fields:t,orders:[n=this.signalRef(n.signal),n]}))):Ms(t,[n,n])},By.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},By.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&k("Duplicate signal name: "+O(e));var n=t instanceof bs?t:this.add(xs(t));return this.signals[e]=n},By.getSignal=function(e){return this.signals[e]||k("Unrecognized signal name: "+O(e)),this.signals[e]},By.signalRef=function(e){return this.signals[e]?ws(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(xs(null))),ws(this.lambdas[e]))},By.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=ys(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},By.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},By.objectProperty=function(e){return e&&S(e)?this.signalRef(e.signal||Vf(e)):e},By.addBinding=function(e,t){this.bindings||k("Nested signals do not support binding: "+O(e)),this.bindings.push(X({signal:e},t))},By.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&k("Duplicate scale or projection name: "+O(e)),this.scales[e]=this.add(t)},By.addScale=function(e,t){this.addScaleProj(e,Pv(t))},By.addProjection=function(e,t){this.addScaleProj(e,Tv(t))},By.getScale=function(e){return this.scales[e]||k("Unrecognized scale name: "+O(e)),this.scales[e]},By.projectionRef=By.scaleRef=function(e){return ws(this.getScale(e))},By.projectionType=By.scaleType=function(e){return this.getScale(e).params.type},By.addData=function(e,t){return this.data.hasOwnProperty(e)&&k("Duplicate data set name: "+O(e)),this.data[e]=t},By.getData=function(e){return this.data[e]||k("Undefined data set name: "+O(e)),this.data[e]},By.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&k("Duplicate data set name: "+O(e)),this.addData(e,Rf.fromEntries(this,t))};var Wy="sans-serif",Gy=30,Yy=2,Hy="#4c78a8",Vy="#000",Xy="#888",Zy="#ddd",Jy=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||k("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=re(e.$key,e.$flat))}},{key:"$expr",parse:function(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=_((r=e.$expr,i=t,Zf(["datum","_"],r,i)),e.$fields,e.$name));var r,i}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=A(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n,r,i=e.$encode,a={};for(n in i)r=i[n],a[n]=_(Zf(["item","_"],r.$expr,t),r.$fields),a[n].output=r.$output;return a}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=W(e.$compare).map(function(e){return e&&e.$tupleid?me:e});return t.fn[n]||(t.fn[n]=Y(r,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,i){var a=rc(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}},{key:"$tupleid",parse:function(){return me}}],Qy={skip:!0};ac.prototype=oc.prototype={fork:function(){var e=new oc(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),"collect"===ec(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.request(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach(function(e){n[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[ec(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],Qy)}),Object.keys(r||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(kc).insert(r[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})}};var Ky="width",eb="height",tb="padding",nb={skip:!0},rb=Q(pc,ut);rb.run=function(e){if(ut.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this},rb.render=function(){var e,t,n,r;return this._renderer&&(this._resize&&(this._resize=0,t=zo(e=this),n=Ro(e),r=To(e),e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(function(t){try{t(n,r)}catch(t){e.error(t)}})),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},rb.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},rb.container=function(){return this._el},rb.scenegraph=function(){return this._scenegraph},rb.origin=function(){return this._origin.slice()},rb.signal=function(e,t,n){var r=gc(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},rb.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},rb.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},rb.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},rb.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},rb.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},rb.renderer=function(e){return arguments.length?(ci(e)||k("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},rb.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},rb.loader=function(e){return arguments.length?(e!==this._loader&&(ut.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},rb.resize=function(){return this._autosize=1,this},rb._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},rb._resizeView=function(e,t,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(Ky,n,nb),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(eb,r,nb),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)},rb.addEventListener=function(e,t,n){var r=t;return n&&!1===n.trap||((r=Yo(this,t)).raw=t),this._handler.on(e,r),this},rb.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;0<=--a;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},rb.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},rb.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return 0<=n&&t.splice(n,1),this},rb.addSignalListener=function(e,t){var n=gc(this,e),r=mc(n,t);return r||((r=Yo(this,function(){t(e,n.value)})).handler=t,this.on(n,null,r)),this},rb.removeSignalListener=function(e,t){var n=gc(this,e),r=mc(n,t);return r&&n._targets.remove(r),this},rb.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},rb.timer=function(e,t){this._timers.push(b.interval(function(t){e({timestamp:Date.now(),elapsed:t})},t))},rb.events=function(e,t,n){var r,i=this,a=new Oe(n),o=function(n,r){var o,u,s,f,c;"view"!==e||(u=t,s=(o=i)._eventConfig.defaults,f=s&&s.prevent,c=s&&s.allow,!1===f||!0===c||!0!==f&&!1!==c&&(f?!f[u]:c?c[u]:!o.preventDefault()))||n.preventDefault();try{a.receive(No(i,n,r))}catch(e){i.error(e)}finally{i.run()}};if("timer"===e)i.timer(o,t);else if("view"===e)i.addEventListener(t,o,Og);else if("window"===e?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a},rb.finalize=function(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;0<=--e;)i[e].stop();for(e=a.length;0<=--e;)for(t=(n=a[e]).sources.length;0<=--t;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},rb.hover=function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",Do),Po,Lo(e)),this.on(this.events("view","mouseout",Do),Po,Lo(t)),this},rb.data=function(e){return Ao(this,e).values.value},rb.change=Co,rb.insert=function(e,t){return Co.call(this,e,ke().insert(t))},rb.remove=function(e,t){return Co.call(this,e,ke().remove(t))},rb.initialize=function(e,t){var n,r,i,a,o,u,s=this,f=s._renderType,c=ci(f);return e=s._el=e?Ho(s,e):null,c||s.error("Unrecognized renderer type: "+f),n=c.handler||Hr,r=e?c.renderer:c.headless,s._renderer=r?Go(s,s._renderer,e,r):null,s._handler=(a=(i=s)._handler,o=e,u=new n(i.loader(),Yo(i,i.tooltip())).scene(i.scenegraph().root).initialize(o,zo(i),i),a&&a.handlers().forEach(function(e){u.on(e.type,e.handler)}),u),s._redraw=!0,e&&(t=t?Ho(s,t):e.appendChild(qo("div",{class:"vega-bindings"})),s._bind.forEach(function(e){e.param.element&&(e.element=Ho(s,e.param.element))}),s._bind.forEach(function(e){$o(s,e.element||t,e)})),s},rb.toImageURL=function(e,t){return e!==yh.Canvas&&e!==yh.SVG&&e!==yh.PNG?Promise.reject("Unrecognized image type: "+e):Vo(this,e,t).then(function(t){return e===yh.SVG?(n=t.svg(),r=new Blob([n],{type:"image/svg+xml"}),window.URL.createObjectURL(r)):t.canvas().toDataURL("image/png");var n,r})},rb.toCanvas=function(e){return Vo(this,yh.Canvas,e).then(function(e){return e.canvas()})},rb.toSVG=function(e){return Vo(this,yh.SVG,e).then(function(e){return e.svg()})},rb.getState=function(e){return this._runtime.getState(e||{data:fc,signals:cc,recurse:!0})},rb.setState=function(e){var t=this;return t.runAfter(function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0})}),this},X(Kc,wl,Oh,sp,yp,Sp,Lp,jp,ig,og),t.timeFormatLocale=i.timeFormatDefaultLocale,t.formatLocale=d.formatDefaultLocale,t.version="4.0.0-rc.2",t.Dataflow=ut,t.EventStream=Oe,t.Parameters=Me,t.Pulse=Qe,t.MultiPulse=nt,t.Operator=Se,t.Transform=ft,t.changeset=ke,t.ingest=ye,t.isTuple=ge,t.definition=ct,t.transform=lt,t.transforms=Kc,t.tupleid=me,t.scale=Mo,t.scheme=function(e,t){if(1<arguments.length)return yg[e]=t,this;var n=e.split("-");return e=n[0],(n=+n[1]+1)&&vg.hasOwnProperty(e)?vg[e][n-1]:!n&&yg.hasOwnProperty(e)?yg[e]:void 0},t.interpolate=function(e,t){var n,r=c[(n=e,"interpolate"+n.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join(""))];return null!=t&&r&&r.gamma?r.gamma(t):r},t.interpolateRange=function(e,t){var n=t[0],r=T(t)-n;return function(t){return e(n+t*r)}},t.timeInterval=function(e){return Mg.hasOwnProperty(e)&&Mg[e]},t.utcInterval=function(e){return Sg.hasOwnProperty(e)&&Sg[e]},t.projection=Na,t.View=pc,t.parse=function(e,t){return S(e)||k("Input Vega specification must be an object."),Gf(e,new Yf(Xf([t,e.config]))).toRuntime()},t.expressionFunction=vs,t.runtime=rc,t.runtimeContext=ic,t.bin=yt,t.bootstrapCI=xt,t.quartiles=wt,t.setRandom=function(e){t.random=e},t.randomInteger=function(e,n){null==n&&(n=e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(r=e||0),o):r},o.max=function(e){return arguments.length?(a=(i=e||0)-r,o):i},o.sample=function(){return r+Math.floor(a*t.random())},o.pdf=function(e){return e===Math.floor(e)&&r<=e&&e<i?1/a:0},o.cdf=function(e){var t=Math.floor(e);return t<r?0:i<=t?1:(t-r+1)/a},o.icdf=function(e){return 0<=e&&e<=1?r-1+Math.floor(e*a):NaN},o.min(e).max(n)},t.randomKDE=Mt,t.randomMixture=St,t.randomNormal=kt,t.randomUniform=Et,t.accessor=_,t.accessorName=x,t.accessorFields=w,t.id=bc,t.identity=_c,t.zero=xc,t.one=wc,t.truthy=kc,t.falsy=Mc,t.logger=R,t.None=Sc,t.Error=Ec,t.Warn=Oc,t.Info=Ac,t.Debug=Cc,t.panLinear=q,t.panLog=$,t.panPow=j,t.zoomLinear=I,t.zoomLog=U,t.zoomPow=B,t.array=W,t.compare=Y,t.constant=H,t.debounce=V,t.error=k,t.extend=X,t.extentIndex=Z,t.fastmap=J,t.field=A,t.inherits=Q,t.isArray=vc,t.isBoolean=K,t.isDate=ee,t.isFunction=G,t.isNumber=te,t.isObject=S,t.isRegExp=ne,t.isString=E,t.key=re,t.merge=ie,t.pad=oe,t.peek=T,t.repeat=ae,t.splitAccessPath=M,t.stringValue=O,t.toBoolean=ue,t.toDate=fe,t.toNumber=z,t.toString=ce,t.toSet=le,t.truncate=de,t.visitArray=he,t.loader=Ce,t.read=Xe,t.inferType=Le,t.inferTypes=qe,t.typeParsers=Ic,t.formats=Ve,t.Bounds=_n,t.Gradient=xn,t.GroupItem=kn,t.ResourceLoader=En,t.Item=wn,t.Scenegraph=Lr,t.Handler=Wr,t.Renderer=Yr,t.CanvasHandler=Hr,t.CanvasRenderer=Zr,t.SVGHandler=Jr,t.SVGRenderer=ti,t.SVGStringRenderer=ui,t.RenderType=yh,t.renderModule=ci,t.Marks=Gd,t.boundClip=li,t.boundContext=Xn,t.boundStroke=Vn,t.boundItem=zr,t.boundMark=Nr,t.pathCurves=Cn,t.pathSymbols=Pn,t.pathRectangle=In,t.pathTrail=Un,t.pathParse=Rn,t.pathRender=Nn,t.point=Br,t.domCreate=$r,t.domFind=jr,t.domChild=Fr,t.domClear=Ir,t.openTag=Kr,t.closeTag=ei,t.font=Cr,t.textMetrics=Ud,t.resetSVGClipId=function(){Td=1},t.sceneEqual=di,t.pathEqual=hi,t.sceneToJSON=Dr,t.sceneFromJSON=Pr,t.sceneZOrder=nr,t.sceneVisit=rr,t.scenePickVisit=ir,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(1).Buffer)},function(e,t,n){(function(e){!function(e,n){n(t)}(this,function(t){"use strict";function r(e,t,n){return e.fields=t||[],e.fname=n,e}function i(e){return null==e?null:e.fname}function a(e){return null==e?null:e.fields}function o(e){throw Error(e)}function u(e){function t(){a.push(c+e.substring(n,r)),c="",n=r+1}var n,r,i,a=[],u=null,s=0,f=e.length,c="";for(e+="",n=r=0;r<f;++r)if("\\"===(i=e[r]))c+=e.substring(n,r),n=++r;else if(i===u)t(),u=null,s=-1;else{if(u)continue;n===s&&'"'===i?(n=r+1,u=i):n===s&&"'"===i?(n=r+1,u=i):"."!==i||s?"["===i?(n<r&&t(),s=n=r+1):"]"===i&&(s||o("Access path missing open bracket: "+e),0<s&&t(),s=0,n=r+1):n<r?t():n=r+1}return s&&o("Access path missing closing bracket: "+e),u&&o("Access path missing closing quote: "+e),n<r&&(r++,t()),a}function s(e){return e===Object(e)}function f(e){return"string"==typeof e}function c(e){return Iv(e)?"["+e.map(c)+"]":s(e)||f(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function l(e,t){var n=u(e),i="return _["+n.map(c).join("][")+"];";return r(Function("_",i),[e=1===n.length?n[0]:e],t||e)}function d(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function h(e){var t=e||Xv;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return Zv<=t&&d("error","ERROR",arguments),this},warn:function(){return Jv<=t&&d("warn","WARN",arguments),this},info:function(){return Qv<=t&&d("log","INFO",arguments),this},debug:function(){return Kv<=t&&d("log","DEBUG",arguments),this}}}function p(e){return e[e.length-1]}function g(e){return null==e||""===e?null:+e}function m(e){return function(t){return e*Math.exp(t)}}function v(e){return function(t){return Math.log(e*t)}}function y(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function b(e,t,n,r){var i=n(e[0]),a=n(p(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function _(e,t){return b(e,t,g,Wv)}function x(e,t){var n=Math.sign(e[0]);return b(e,t,v(n),m(n))}function w(e,t,n){return b(e,t,y(n),y(1/n))}function k(e,t,n,r,i){var a=r(e[0]),o=r(p(e)),u=null!=t?r(t):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function M(e,t,n){return k(e,t,n,g,Wv)}function S(e,t,n){var r=Math.sign(e[0]);return k(e,t,n,v(r),m(r))}function E(e,t,n,r){return k(e,t,n,y(r),y(1/r))}function O(e){return null!=e?Iv(e)?e:[e]:[]}function A(e){return"function"==typeof e}function C(e,t){var n,i,o,s,f,l,d,h,p,g=[],m=(e=O(e)).map(function(e,t){return null==e?null:(g.push(t),A(e)?e:u(e).map(c).join("]["))}),v=g.length-1,y=O(t),b="var u,v;return ";if(v<0)return null;for(i=0;i<=v;++i)A(o=m[n=g[i]])?(s="(u=this."+(l="f"+n)+"(a))",f="(v=this."+l+"(b))",(d=d||{})[l]=o):(s="(u=a["+o+"])",f="(v=b["+o+"])"),l="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[n]?h=-(p=1):(p=-1,h=1),b+="("+s+"<"+f+"||u==null)&&v!=null?"+h+":(u>v||v==null)&&u!=null?"+p+":"+l+"!==u&&v===v?"+h+":v!==v&&u===u?"+p+(n<v?":":":0");return o=Function("a","b",b+";"),d&&(o=o.bind(d)),e=e.reduce(function(e,t){return A(t)?(a(t)||[]).forEach(function(t){e[t]=1}):null!=t&&(e[t+""]=1),e},{}),r(o,Object.keys(e))}function R(e){return A(e)?e:function(){return e}}function T(e,t){function n(){t(i),r=i=null}var r,i;return function(t){i=t,r&&clearTimeout(r),r=setTimeout(n,e)}}function z(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e}function N(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(null!=(r=e[u])&&r<=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=e[u])&&(r<n&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(null!=(r=t(e[u],u,e))&&r<=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=t(e[u],u,e))&&(r<n&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function D(e){function t(e){return i.hasOwnProperty(e)&&i[e]!==ey}var n,r,i={};return n={size:0,empty:0,object:i,has:t,get:function(e){return t(e)?i[e]:void 0},set:function(e,r){return t(e)||(++n.size,i[e]===ey&&--n.empty),i[e]=r,this},delete:function(e){
return t(e)&&(--n.size,++n.empty,i[e]=ey),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(e){return arguments.length?(r=e,n):r},clean:function(){var e,t,a={},o=0;for(e in i)(t=i[e])===ey||r&&r(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=i=a}},e&&Object.keys(e).forEach(function(t){n.set(t,e[t])}),n}function P(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function L(e){return"boolean"==typeof e}function q(e){return"[object Date]"===Object.prototype.toString.call(e)}function $(e){return"number"==typeof e}function j(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function F(e,t){return e&&(e=t?O(e).map(function(e){return e.replace(/\\(.)/g,"$1")}):O(e)),r(e&&e.length?Function("_","return ''+"+e.map(function(e){return"_["+(t?c(e):u(e).map(c).join("]["))+"]"}).join("+'|'+")+";"):function(){return""},e,"key")}function I(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=0<e(t[u],n[s])?n[s++]:t[u++];for(;u<i;++u,++f)o[f]=t[u];for(;s<a;++s,++f)o[f]=n[s];return o}function U(e,t){for(var n="";0<=--t;)n+=e;return n}function B(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?U(i,o)+a:"center"===r?U(i,~~(o/2))+a+U(i,Math.ceil(o/2)):a+U(i,o)}function W(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e||!e)}function G(e){return $(e)?e:q(e)?e:Date.parse(e)}function Y(e,t){return t=t||G,null==e||""===e?null:t(e)}function H(e){return null==e||""===e?null:e+""}function V(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function X(e,t,n,r){var i=null!=r?r:"",a=e+"",o=a.length,u=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function Z(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}function J(e){var t=e||Wv,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0)<=(i=n.indexOf(e))&&n.splice(i,1),n},n}function Q(e){return!(!e||!K(e))}function K(e){return e[ty]}function ee(e,t){return e[ty]=t,e}function te(e){var t=e===Object(e)?e:{data:e};return K(t)?t:ee(t,ny++)}function ne(e){return re(e,te({}))}function re(e,t){for(var n in e)t[n]=e[n];return t}function ie(e,t){return ee(t,K(e))}function ae(e){return e&&e.constructor===oe}function oe(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:oe,insert:function(t){for(var n=O(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=A(e)?r:t,i=O(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:R(r)};return A(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return A(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(e,t,n){n?e[t]=n(e):o.encode=t,a||(f[K(e)]=e)}var f,c,l,d,h,p,g;for(c=0,l=e.length;c<l;++c)o.add.push(te(e[c]));for(f={},c=0,l=t.length;c<l;++c)f[K(p=t[c])]=p;for(c=0,l=r.length;c<l;++c)h=r[c],u.forEach(function(e){h(e)&&(f[K(e)]=e)});for(g in f)o.rem.push(f[g]);for(f={},c=0,l=n.length;c<l;++c)s((d=n[c]).tuple,d.field,d.value),o.modifies(d.field);for(c=0,l=i.length;c<l;++c)d=i[c],h=d.filter,u.forEach(function(e){h(e)&&s(e,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?u.filter(function(e){return f.hasOwnProperty(K(e))}):u.slice();else for(g in f)o.mod.push(f[g]);return o}}}function ue(){Object.defineProperty(this,ry,{writable:!0,value:{}})}function se(e,t,n,r){this.id=++iy,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function fe(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function ce(e,t,n){this.id=++uy,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function le(e,t,n){return new ce(e,t,n)}function de(e){return{options:e||{},sanitize:pe,load:he,file:me,http:ge}}function he(e,t){var n=this;return n.sanitize(e,t).then(function(e){var r=e.href;return e.localFile?n.file(r):n.http(r,t)})}function pe(e,t){return t=z({},this.options,t),new Promise(function(n,r){var i,a,o,u,s={href:null};null!=e&&"string"==typeof e?(a=fy.test(e),(u=t.baseURL)&&!a&&(ye(e,"/")||"/"===u[u.length-1]||(e="/"+e),e=u+e),o=(i=ye(e,cy))||"file"===t.mode||"http"!==t.mode&&!a&&ve(),i?e=e.slice(cy.length):ye(e,"//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(s,"localFile",{value:!!o}),s.href=e,t.target&&(s.target=t.target+""),n(s)):r("Sanitize failure, invalid URI: "+c(e))})}function ge(e,t){return(r=e,i=z({},this.options.http,t),a="function"==typeof fetch?fetch:n(25),a?a(r,i):Promise.reject("No fetch method available.")).then(function(e){if(!e.ok)throw e.status+""+e.statusText;return e.text()});var r,i,a}function me(e){return new Promise(function(t,n){var r=ve();r?r.readFile(e,function(e,r){e?n(e):t(r)}):n("No file system access for "+e)})}function ve(){var e=n(30);return e&&A(e.readFile)?e:null}function ye(e,t){return null!=e&&0===e.lastIndexOf(t,0)}function be(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o,u=dy.slice();for(r=0,i=e.length;r<i;++r){for(n=t?e[r][t]:e[r],a=0;a<u.length;++a)null==(o=n)||o!=o||u[a](n)||(u.splice(a,1),--a);if(0===u.length)return"string"}return hy[dy.indexOf(u[0])]}function _e(e,t){return t.reduce(function(t,n){return t[n]=be(e,n),t},{})}function xe(e){return!(isNaN(+e)||e instanceof Date)}function we(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function ke(e){function t(e,t){function n(){if(f)return gy;if(c)return c=!1,py;var t,n,r=u;if(e.charCodeAt(r)===my){for(;u++<o&&e.charCodeAt(u)!==my||e.charCodeAt(++u)===my;);return(t=u)>=o?f=!0:(n=e.charCodeAt(u++))===vy?c=!0:n===yy&&(c=!0,e.charCodeAt(u)===vy&&++u),e.slice(r+1,t-1).replace(/""/g,'"')}for(;u<o;){if((n=e.charCodeAt(t=u++))===vy)c=!0;else if(n===yy)c=!0,e.charCodeAt(u)===vy&&++u;else if(n!==a)continue;return e.slice(r,t)}return f=!0,e.slice(r,o)}var r,i=[],o=e.length,u=0,s=0,f=o<=0,c=!1;for(e.charCodeAt(o-1)===vy&&--o,e.charCodeAt(o-1)===yy&&--o;(r=n())!==gy;){for(var l=[];r!==py&&r!==gy;)l.push(r),r=n();t&&null==(l=t(l,s++))||i.push(l)}return i}function n(t){return t.map(r).join(e)}function r(e){return null==e?"":i.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var i=new RegExp('["'+e+"\n\r]"),a=e.charCodeAt(0);return{parse:function(e,n){var r,i,a=t(e,function(e,t){if(r)return r(e,t-1);var a,o,u;i=e,r=n?(o=n,u=we(a=e),function(e,t){return o(u(e),t,a)}):we(e)});return a.columns=i||[],a},parseRows:t,format:function(t,n){var i,a,o;return null==n&&(i=t,a=Object.create(null),o=[],i.forEach(function(e){for(var t in e)t in a||o.push(a[t]=t)}),n=o),[n.map(r).join(e)].concat(t.map(function(t){return n.map(function(e){return r(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(n).join("\n")}}}function Me(e){return function(t,n){var r={delimiter:e};return Se(t,n?z(n,r):r)}}function Se(e,t){return t.header&&(e=t.header.map(c).join(t.delimiter)+"\n"+e),ke(t.delimiter).parse(e+"")}function Ee(t,n){var r,i,a,o=n&&n.property?l(n.property):Wv;return!s(t)||(a=t,"function"==typeof e&&A(e.isBuffer)&&e.isBuffer(a))?o(JSON.parse(t)):(r=o(t),i&&i.copy?JSON.parse(JSON.stringify(r)):r)}function Oe(e){return e}function Ae(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return Ce(e,t)})}:Ce(e,t)}function Ce(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=Re(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function Re(e,t){function n(e,t){t.length&&t.pop();for(var n=s[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(u(n[r],r));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,i)}function r(e){return u(e)}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}var u=function(e){if(null==e)return Oe;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,f=e.length,c=new Array(f);for(c[0]=(t+=e[0])*r+a,c[1]=(n+=e[1])*i+o;s<f;)c[s]=e[s],++s;return c}}(e.transform),s=e.arcs;return function e(t){var n,a=t.type;switch(a){case"GeometryCollection":return{type:a,geometries:t.geometries.map(e)};case"Point":n=r(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(r);break;case"LineString":n=i(t.arcs);break;case"MultiLineString":n=t.arcs.map(i);break;case"Polygon":n=o(t.arcs);break;case"MultiPolygon":n=t.arcs.map(o);break;default:return null}return{type:a,coordinates:n}}(t)}function Te(e,t){function n(e,t){for(var n in e){var i=e[n];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){r[e<0?~e:e]=1}),o.push(i)}}var r={},i={},a={},o=[],u=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++u],t[u]=n,t[r]=i)}),t.forEach(function(t){var n,r,o=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}(t),u=o[0],s=o[1];if(n=a[u])if(delete a[n.end],n.push(t),n.end=s,r=i[s]){delete i[r.start];var f=r===n?n:n.concat(r);i[f.start=n.start]=a[f.end=r.end]=f}else i[n.start]=a[n.end]=n;else if(n=i[s])if(delete i[n.start],n.unshift(t),n.start=u,r=a[u]){delete a[r.end];var c=r===n?n:r.concat(n);i[c.start=r.start]=a[c.end=n.end]=c}else i[n.start]=a[n.end]=n;else i[(n=[t]).start=u]=a[n.end=s]=n}),n(a,i),n(i,a),t.forEach(function(e){r[e<0?~e:e]||o.push([e])}),o}function ze(e){return Re(e,function(e,t,n){var r,i,a;if(1<arguments.length)r=function(e,t,n){function r(e){var t=e<0?~e:e;(s[t]||(s[t]=[])).push({i:e,g:o})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}var o,u=[],s=[];return function e(t){switch((o=t).type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":i(t.arcs);break;case"MultiLineString":case"Polygon":a(t.arcs);break;case"MultiPolygon":t.arcs.forEach(a)}}(t),s.forEach(null==n?function(e){u.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&u.push(e[0].i)}),u}(0,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Te(e,r)}}.apply(this,arguments))}function Ne(e,t){return 1<arguments.length?(by[e]=t,this):by.hasOwnProperty(e)?by[e]:null}function De(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return(i.floor=i).ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,u=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&0<a))return u;for(;u.push(o=new Date(+n)),t(n,a),e(n),o<n&&n<r;);return u},i.filter=function(n){return De(function(t){if(t<=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e<=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;0<=--r;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,r){return _y.setTime(+t),xy.setTime(+r),e(_y),e(xy),Math.floor(n(_y,xy))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}function Pe(e){return De(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ky)/6048e5})}function Le(e){return De(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}function qe(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $e(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function je(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Fe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Ie(e){return e.replace(Zy,"\\$&")}function Ue(e){return new RegExp("^(?:"+e.map(Ie).join("|")+")","i")}function Be(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function We(e,t,n){var r=Vy.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ge(e,t,n){var r=Vy.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ye(e,t,n){var r=Vy.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function He(e,t,n){var r=Vy.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ve(e,t,n){var r=Vy.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Xe(e,t,n){var r=Vy.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ze(e,t,n){var r=Vy.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function Je(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Qe(e,t,n){var r=Vy.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ke(e,t,n){var r=Vy.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function et(e,t,n){var r=Vy.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function tt(e,t,n){var r=Vy.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function nt(e,t,n){var r=Vy.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function rt(e,t,n){var r=Vy.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function it(e,t,n){var r=Vy.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function at(e,t,n){var r=Vy.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ot(e,t,n){var r=Xy.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ut(e,t,n){var r=Vy.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function st(e,t,n){var r=Vy.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function ft(e,t){return Fe(e.getDate(),t,2)}function ct(e,t){return Fe(e.getHours(),t,2)}function lt(e,t){return Fe(e.getHours()%12||12,t,2)}function dt(e,t){return Fe(1+Ay.count(Ny(e),e),t,3)}function ht(e,t){return Fe(e.getMilliseconds(),t,3)}function pt(e,t){return ht(e,t)+"000"}function gt(e,t){return Fe(e.getMonth()+1,t,2)}function mt(e,t){return Fe(e.getMinutes(),t,2)}function vt(e,t){return Fe(e.getSeconds(),t,2)}function yt(e){var t=e.getDay();return 0===t?7:t}function bt(e,t){return Fe(Cy.count(Ny(e),e),t,2)}function _t(e,t){var n=e.getDay();return e=4<=n||0===n?Ty(e):Ty.ceil(e),Fe(Ty.count(Ny(e),e)+(4===Ny(e).getDay()),t,2)}function xt(e){return e.getDay()}function wt(e,t){return Fe(Ry.count(Ny(e),e),t,2)}function kt(e,t){return Fe(e.getFullYear()%100,t,2)}function Mt(e,t){return Fe(e.getFullYear()%1e4,t,4)}function St(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+Fe(t/60|0,"0",2)+Fe(t%60,"0",2)}function Et(e,t){return Fe(e.getUTCDate(),t,2)}function Ot(e,t){return Fe(e.getUTCHours(),t,2)}function At(e,t){return Fe(e.getUTCHours()%12||12,t,2)}function Ct(e,t){return Fe(1+Ly.count(Iy(e),e),t,3)}function Rt(e,t){return Fe(e.getUTCMilliseconds(),t,3)}function Tt(e,t){return Rt(e,t)+"000"}function zt(e,t){return Fe(e.getUTCMonth()+1,t,2)}function Nt(e,t){return Fe(e.getUTCMinutes(),t,2)}function Dt(e,t){return Fe(e.getUTCSeconds(),t,2)}function Pt(e){var t=e.getUTCDay();return 0===t?7:t}function Lt(e,t){return Fe(qy.count(Iy(e),e),t,2)}function qt(e,t){var n=e.getUTCDay();return e=4<=n||0===n?jy(e):jy.ceil(e),Fe(jy.count(Iy(e),e)+(4===Iy(e).getUTCDay()),t,2)}function $t(e){return e.getUTCDay()}function jt(e,t){return Fe($y.count(Iy(e),e),t,2)}function Ft(e,t){return Fe(e.getUTCFullYear()%100,t,2)}function It(e,t){return Fe(e.getUTCFullYear()%1e4,t,4)}function Ut(){return"+0000"}function Bt(){return"%"}function Wt(e){return+e}function Gt(e){return Math.floor(+e/1e3)}function Yt(e){return Uy=function(e){function t(e,t){return function(n){var r,i,a,o=[],u=-1,s=0,f=e.length;for(n instanceof Date||(n=new Date(+n));++u<f;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(i=Hy[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function n(e,t){return function(n){var i,a,o=je(1900);if(r(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||53<o.V)return null;"w"in o||(o.w=1),"Z"in o?(i=4<(a=(i=$e(je(o.y))).getUTCDay())||0===a?$y.ceil(i):$y(i),i=Ly.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(i=4<(a=(i=t(je(o.y))).getDay())||0===a?Ry.ceil(i):Ry(i),i=Ay.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?$e(je(o.y)).getUTCDay():t(je(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,$e(o)):t(o)}}function r(e,t,n,r){for(var i,a,o=0,u=t.length,s=n.length;o<u;){if(s<=r)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=M[i in Hy?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var i=e.dateTime,a=e.date,o=e.time,u=e.periods,s=e.days,f=e.shortDays,c=e.months,l=e.shortMonths,d=Ue(u),h=Be(u),p=Ue(s),g=Be(s),m=Ue(f),v=Be(f),y=Ue(c),b=Be(c),_=Ue(l),x=Be(l),w={a:function(e){return f[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return c[e.getMonth()]},c:null,d:ft,e:ft,f:pt,H:ct,I:lt,j:dt,L:ht,m:gt,M:mt,p:function(e){return u[+(12<=e.getHours())]},Q:Wt,s:Gt,S:vt,u:yt,U:bt,V:_t,w:xt,W:wt,x:null,X:null,y:kt,Y:Mt,Z:St,"%":Bt},k={a:function(e){return f[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return c[e.getUTCMonth()]},c:null,d:Et,e:Et,f:Tt,H:Ot,I:At,j:Ct,L:Rt,m:zt,M:Nt,p:function(e){return u[+(12<=e.getUTCHours())]},Q:Wt,s:Gt,S:Dt,u:Pt,U:Lt,V:qt,w:$t,W:jt,x:null,X:null,y:Ft,Y:It,Z:Ut,"%":Bt},M={a:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.w=v[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=g[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=_.exec(t.slice(n));return r?(e.m=x[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=b[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,t,n){return r(e,i,t,n)},d:Ke,e:Ke,f:at,H:tt,I:tt,j:et,L:it,m:Qe,M:nt,p:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.p=h[r[0].toLowerCase()],n+r[0].length):-1},Q:ut,s:st,S:rt,u:Ge,U:Ye,V:He,w:We,W:Ve,x:function(e,t,n){return r(e,a,t,n)},X:function(e,t,n){return r(e,o,t,n)},y:Ze,Y:Xe,Z:Je,"%":ot};return w.x=t(a,w),w.X=t(o,w),w.c=t(i,w),k.x=t(a,k),k.X=t(o,k),k.c=t(i,k),{format:function(e){var n=t(e+="",w);return n.toString=function(){return e},n},parse:function(e){var t=n(e+="",qe);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",k);return n.toString=function(){return e},n},utcParse:function(e){var t=n(e,$e);return t.toString=function(){return e},t}}}(e),By=Uy.format,Wy=Uy.parse,Gy=Uy.utcFormat,Yy=Uy.utcParse,Uy}function Ht(e,t,n){var r=Ne((t=t||{}).type||"json");return r||o("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function(e,t,n){if(e.length){n=n||Wy;var r,i,a,o,u,s,f,c=e.columns||Object.keys(e[0]);for("auto"===t&&(t=_e(e,c)),c=Object.keys(t),r=c.map(function(e){var r,i,a=t[e];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?Yy(i):n(i);if(!ly[a])throw Error("Illegal format pattern: "+e+":"+a);return ly[a]}),o=0,s=e.length,f=c.length;o<s;++o)for(i=e[o],u=0;u<f;++u)a=c[u],i[a]=r[u](i[a])}}(e,t.parse,n),e.hasOwnProperty("columns")&&delete e.columns,e}function Vt(e,t,n,r,i,a){var o,u,s=z({},a,Qy);A(n)||(n=R(n)),void 0===r?o=function(t){e.touch(n(t))}:A(r)?(u=new se(null,r,i,!1),o=function(t){var r,i=n(t);u.evaluate(t),ae(r=u.value)?e.pulse(i,r,a):e.update(i,r,s)}):o=function(t){e.update(n(t),r,s)},t.apply(o)}function Xt(e,t,n,r,i,a){var o,u;void 0===r?u=n:(o=A(r)?r:R(r),(u=new se(null,r=n?function(e,t){var r=o(e,t);return n.skip()||(n.skip(r!==this.value).value=r),r}:o,i,!1)).modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),t.targets().add(u)}function Zt(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Jt(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function Qt(e,t){var n=[];return Z(e,t,function(e){n.push(e)}),n}function Kt(e,t){var n={};return e.visit(t,function(e){n[K(e)]=1}),function(e){return n[K(e)]?null:e}}function en(e,t,n,r){var i,a,o,u,s,f=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,o=0,u=(this.pulses=n).length;o<u;++o)if((i=n[o]).stamp===t){if(i.fields)for(s in a=this.fields||(this.fields={}),i.fields)a[s]=1;i.changed(this.ADD)&&(f|=this.ADD),i.changed(this.REM)&&(f|=this.REM),i.changed(this.MOD)&&(f|=this.MOD)}this.changes=f}function tn(e,t){try{t(e)}catch(t){e.error(t)}}function nn(e){this.cmp=e,this.nodes=[]}function rn(e,t,n,r){var i,a,o;for(i=e[n];t<n&&r(i,a=e[o=n-1>>1])<0;)e[n]=a,n=o;return e[n]=i}function an(e,t,n){for(var r,i=t,a=e.length,o=e[t],u=2*t+1;u<a;)(r=u+1)<a&&0<=n(e[u],e[r])&&(u=r),e[t]=e[u],u=2*(t=u)+1;return e[t]=o,rn(e,i,t,n)}function on(){this._log=h(),this.logLevel(Zv),this._clock=0,this._rank=0;try{this._loader=de()}catch(e){}this._touched=J(Bv),this._pulses={},this._pulse=null,this._heap=new nn(function(e,t){return e.qrank-t.qrank}),this._postrun=[]}function un(e){return function(){return this._log[e].apply(this,arguments)}}function sn(e,t){se.call(this,e,null,t)}function fn(e){var t=cn(e);return t&&t.Definition||null}function cn(e){return e=e&&e.toLowerCase(),ob.hasOwnProperty(e)?ob[e]:null}function ln(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function dn(e,t,n){return n||e+(t?"_"+t:"")}function hn(e,t){return ub[e](t)}function pn(e){return function(t){var n=z({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function gn(e,t){return e.idx-t.idx}function mn(e,t){var n=t||Wv,r=function(e,t){var n,r=e.reduce(function e(n,r){function i(t){n[t]||e(n,n[t]=ub[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n},e.reduce(function(e,t){return e[t.name]=t,e},{})),i=[];for(n in r)i.push(r[n]);return i.sort(gn)}(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach(function(e){i+=e.init,o+=e.add,u+=e.rem}),e.slice().sort(gn).forEach(function(e){s+="t['"+e.out+"']="+e.set+";"}),s+="return t;",(a=Function("cell",a)).prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",u),a.prototype.set=Function("t",s),a.prototype.get=n,a.fields=e.map(function(e){return e.out}),a}function vn(e){var t,n,r,i,a,o,u,s,f=e.maxbins||20,c=e.base||10,l=Math.log(c),d=e.divide||[5,2],h=e.extent[0],p=e.extent[1],g=p-h;if(e.step)t=e.step;else if(e.steps){for(a=g/f,o=0,u=e.steps.length;o<u&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/l),r=e.minstep||0,t=Math.max(r,Math.pow(c,Math.round(Math.log(g)/l)-n));Math.ceil(g/t)>f;)t*=c;for(o=0,u=d.length;o<u;++o)r<=(a=t/d[o])&&g/a<=f&&(t=a)}return i=0<=(a=Math.log(t))?0:1+~~(-a/l),s=Math.pow(c,-i-1),(e.nice||void 0===e.nice)&&(h=h<(a=Math.floor(h/t+s)*t)?a-t:a,p=Math.ceil(p/t)*t),{start:h,stop:p,step:t}}function yn(e,t){var n,r=[],i=e.length,a=-1;if(null==t)for(;++a<i;)isNaN(n=bn(e[a]))||r.push(n);else for(;++a<i;)isNaN(n=bn(t(e[a],a,e)))||r.push(n);return r}function bn(e){return null===e?NaN:+e}function _n(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function xn(e){var t;return 1===e.length&&(t=e,e=function(e,n){return _n(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;0<e(t[a],n)?i=a:r=a+1}return r}}}function wn(e){return null===e?NaN:+e}function kn(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n<=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(n<r&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n<=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(n<r&&(r=n),i<n&&(i=n));return[r,i]}function Mn(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Sn(e,t,n){var r,i,a,o,u=-1;if(n=+n,(e=+e)===(t=+t)&&0<n)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=En(e,t,n))||!isFinite(o))return[];if(0<o)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++u<i;)a[u]=(e+u)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++u<i;)a[u]=(e-u)/o;return r&&a.reverse(),a}function En(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return 0<=i?(db<=a?10:hb<=a?5:pb<=a?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(db<=a?10:hb<=a?5:pb<=a?2:1)}function On(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return db<=a?i*=10:hb<=a?i*=5:pb<=a&&(i*=2),t<e?-i:i}function An(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function Cn(e,t,n){if(null==n&&(n=wn),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(1<=t)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function Rn(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n<=n)for(r=n;++a<i;)null!=(n=e[a])&&r<n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n<=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r<n&&(r=n);return r}function Tn(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);0<=--i;)for(t=(r=e[i]).length;0<=--t;)n[--o]=r[t];return n}function zn(e,n,r,i){var a,o,u,s,f=yn(e,i),c=f.length,l=n;for(u=0,s=Array(l);u<l;++u){for(o=a=0;o<c;++o)a+=f[~~(t.random()*c)];s[u]=a/c}return[Cn(s.sort(_n),r/2),Cn(s,1-r/2)]}function Nn(e,t){var n=yn(e,t);return[Cn(n.sort(_n),.25),Cn(n,.5),Cn(n,.75)]}function Dn(e,n){var r,i,a=NaN,o={mean:function(e){return arguments.length?(r=e||0,a=NaN,o):r},stdev:function(e){return arguments.length?(i=null==e?1:e,a=NaN,o):i},sample:function(){var e,n,o=0,u=0;if(a==a)return o=a,a=NaN,o;for(;0===(e=(o=2*t.random()-1)*o+(u=2*t.random()-1)*u)||1<e;);return n=Math.sqrt(-2*Math.log(e)/e),a=r+u*n*i,r+o*n*i},pdf:function(e){var t=Math.exp(Math.pow(e-r,2)/(-2*Math.pow(i,2)));return 1/(i*Math.sqrt(2*Math.PI))*t},cdf:function(e){var t,n=(e-r)/i,a=Math.abs(n);if(37<a)t=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(t=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),t/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):t=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return 0<n?1-t:t},icdf:function(e){if(e<=0||1<=e)return NaN;var t=2*e-1,n=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*n)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/n,u=(0<t?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return r+i*Math.SQRT2*u}};return o.mean(e).stdev(n)}function Pn(e,n){var r=Dn(),i={},a=0;return i.data=function(t){return arguments.length?(a=(e=t)?t.length:0,i.bandwidth(n)):e},i.bandwidth=function(t){return arguments.length?(!(n=t)&&e&&(a=(r=e).length,o=Nn(r),u=(o[2]-o[0])/1.34,n=1.06*Math.min(Math.sqrt(function(e,t){var n,r,i=e.length,a=0,o=-1,u=0,s=0;if(null==t)for(;++o<i;)isNaN(n=wn(e[o]))||(s+=(r=n-u)*(n-(u+=r/++a)));else for(;++o<i;)isNaN(n=wn(t(e[o],o,e)))||(s+=(r=n-u)*(n-(u+=r/++a)));if(1<a)return s/(a-1)}(r)),u)*Math.pow(a,-.2)),i):n;var r,a,o,u},i.sample=function(){return e[~~(t.random()*a)]+n*r.sample()},i.pdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.pdf((t-e[o])/n);return i/n/a},i.cdf=function(t){for(var i=0,o=0;o<a;++o)i+=r.cdf((t-e[o])/n);return i/a},i.icdf=function(){throw Error("KDE icdf not supported.")},i.data(e)}function Ln(e,n){var r,i={},a=0;return i.weights=function(e){return arguments.length?(r=function(e){var t,n=[],r=0;for(t=0;t<a;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<a;++t)n[t]/=r;return n}(n=e||[]),i):n},i.distributions=function(t){return arguments.length?(t?(a=t.length,e=t):(a=0,e=[]),i.weights(n)):e},i.sample=function(){for(var n=t.random(),i=e[a-1],o=r[0],u=0;u<a-1;o+=r[++u])if(n<o){i=e[u];break}return i.sample()},i.pdf=function(t){for(var n=0,i=0;i<a;++i)n+=r[i]*e[i].pdf(t);return n},i.cdf=function(t){for(var n=0,i=0;i<a;++i)n+=r[i]*e[i].cdf(t);return n},i.icdf=function(){throw Error("Mixture icdf not supported.")},i.distributions(e).weights(n)}function qn(e,n){null==n&&(n=null==e?1:e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(r=e||0),o):r},o.max=function(e){return arguments.length?(a=(i=e||0)-r,o):i},o.sample=function(){return r+a*t.random()},o.pdf=function(e){return r<=e&&e<=i?1/a:0},o.cdf=function(e){return e<r?0:i<e?1:(e-r)/a},o.icdf=function(e){return 0<=e&&e<=1?r+e*a:NaN},o.min(e).max(n)}function $n(e){this._key=e?l(e):K,this.reset()}function jn(e){sn.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Fn(e){sn.call(this,null,e)}function In(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter(function(e){return!o[r(e)]}),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?I(e,i,a.sort(e)):i.concat(a),a=[]),i}}}function Un(e){sn.call(this,[],e)}function Bn(e){se.call(this,null,Wn,e)}function Wn(e){return this.value&&!e.modified()?this.value:C(e.fields,e.orders)}function Gn(e){sn.call(this,null,e)}function Yn(e){sn.call(this,null,e)}function Hn(e){sn.call(this,null,e)}function Vn(e){sn.call(this,[1/0,-1/0],e)}function Xn(e,t){se.call(this,e),this.parent=t}function Zn(e){sn.call(this,{},e),this._keys=D();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function Jn(e){se.call(this,null,Qn,e)}function Qn(e){return this.value&&!e.modified()?this.value:Iv(e.name)?O(e.name).map(function(e){return l(e)}):l(e.name,e.as)}function Kn(e){sn.call(this,D(),e)}function er(e,t){return e?e.map(function(e,n){return t[n]||i(e)}):null}function tr(e){sn.call(this,[],e)}function nr(e){sn.call(this,[],e)}function rr(e){sn.call(this,null,e)}function ir(e){sn.call(this,[],e)}function ar(e){sn.call(this,[],e)}function or(e){jn.call(this,e)}function ur(e){se.call(this,null,sr,e)}function sr(e){return this.value&&!e.modified()?this.value:F(e.fields,e.flat)}function fr(e){sn.call(this,{},e)}function cr(e){se.call(this,null,lr,e)}function lr(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=1/0,a=-1/0,o=e.extents;for(t=0,n=o.length;t<n;++t)(r=o[t])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function dr(e){se.call(this,null,hr,e);
}function hr(e){return this.value&&!e.modified()?this.value:e.values.reduce(function(e,t){return e.concat(t)},[])}function pr(e){sn.call(this,null,e)}function gr(e){jn.call(this,e)}function mr(e){Zn.call(this,e)}function vr(e){sn.call(this,null,e)}function yr(e){sn.call(this,null,e)}function br(e){sn.call(this,null,e)}function _r(e){sn.call(this,[],e),this.count=0}function xr(e){sn.call(this,null,e)}function wr(e){sn.call(this,null,e),this.modified(!0)}function kr(e){sn.call(this,D(),e)}function Mr(e){sn.call(this,null,e)}function Sr(e){function t(e){O(a(e)).forEach(function(e){l[e]=1})}var n=O(e.ops),r=O(e.fields),u=O(e.params),s=O(e.as),f=this.outputs=[],c=this.windows=[],l={},d={},h=!0,p=[],g=[];t(e.sort),n.forEach(function(e,n){var a,l,m,v,y,b=r[n],_=i(b),x=dn(e,_,s[n]);if(t(b),f.push(x),Tb.hasOwnProperty(e))c.push((a=e,l=r[n],m=u[n],v=x,{init:(y=Tb[a](l,m)).init||Gv,update:function(e,t){t[v]=y.next(e)}}));else{if(null==b&&"count"!==e&&o("Null aggregate field specified."),"count"===e)return void p.push(x);h=!1;var w=d[_];w||((w=d[_]=[]).field=b,g.push(w)),w.push(hn(e,x))}}),(p.length||g.length)&&(this.cell=function(e,t,n){e=e.map(function(e){return mn(e,e.field)});var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new $n;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}(g,p,h)),this.inputs=Object.keys(l)}function Er(e){sn.call(this,{},e),this._mlen=0,this._mods=[]}function Or(e,t,n){var r=n.sort,i=r&&!n.ignorePeers,a=n.frame||[null,0],o=e.data(r),u=o.length,s=0,f=i?xn(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||R(-1)};for(t.init();s<u;++s)Ar(c,a,s,u),i&&Cr(c,f),t.update(c,o[s])}function Ar(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Cr(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;0<n&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}function Rr(e){this.clear(),e&&this.union(e)}function Tr(e,t){var n,r=[];return n={id:"gradient_"+h_++,x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}function zr(e){this.mark=e,this.bounds=this.bounds||new Rr}function Nr(e){zr.call(this,e),this.items=this.items||[]}function Dr(e,t){return function(e,t){if("undefined"!=typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}(e,t)||function(e,t){if(d_)try{return new d_(e,t)}catch(e){}return null}(e,t)||null}function Pr(){return("undefined"!=typeof Image?Image:null)||d_&&d_.Image||null||null}function Lr(e){this._pending=0,this._loader=e||de()}function qr(e){e._pending+=1}function $r(e){e._pending-=1}function jr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Fr(){return new jr}function Ir(e){return function(){return e}}function Ur(e){return 1<=e?A_:e<=-1?-A_:Math.asin(e)}function Br(e){return e.innerRadius}function Wr(e){return e.outerRadius}function Gr(e){return e.startAngle}function Yr(e){return e.endAngle}function Hr(e){return e&&e.padAngle}function Vr(e,t,n,r,i,a,o){var u=e-n,s=t-r,f=(o?a:-a)/S_(u*u+s*s),c=f*s,l=-f*u,d=e+c,h=t+l,p=n+c,g=r+l,m=(d+p)/2,v=(h+g)/2,y=p-d,b=g-h,_=y*y+b*b,x=i-a,w=d*g-p*h,k=(b<0?-1:1)*S_(w_(0,x*x*_-w*w)),M=(w*b-y*k)/_,S=(-w*y-b*k)/_,E=(w*b+y*k)/_,O=(-w*y+b*k)/_,A=M-m,C=S-v,R=E-m,T=O-v;return R*R+T*T<A*A+C*C&&(M=E,S=O),{cx:M,cy:S,x01:-c,y01:-l,x11:M*(i/x-1),y11:S*(i/x-1)}}function Xr(e){this._context=e}function Zr(e){return new Xr(e)}function Jr(e){return e[0]}function Qr(e){return e[1]}function Kr(){function e(e){var u,s,f,c=e.length,l=!1;for(null==i&&(o=a(f=Fr())),u=0;u<=c;++u)!(u<c&&r(s=e[u],u,e))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(s,u,e),+n(s,u,e));if(f)return o=null,f+""||null}var t=Jr,n=Qr,r=Ir(!0),i=null,a=Zr,o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:Ir(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:Ir(+t),e):n},e.defined=function(t){return arguments.length?(r="function"==typeof t?t:Ir(!!t),e):r},e.curve=function(t){return arguments.length?(a=t,null!=i&&(o=a(i)),e):a},e.context=function(t){return arguments.length?(null==t?i=o=null:o=a(i=t),e):i},e}function ei(){function e(e){var t,c,l,d,h,p=e.length,g=!1,m=new Array(p),v=new Array(p);for(null==u&&(f=s(h=Fr())),t=0;t<=p;++t){if(!(t<p&&o(d=e[t],t,e))===g)if(g=!g)c=t,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),l=t-1;c<=l;--l)f.point(m[l],v[l]);f.lineEnd(),f.areaEnd()}g&&(m[t]=+n(d,t,e),v[t]=+i(d,t,e),f.point(r?+r(d,t,e):m[t],a?+a(d,t,e):v[t]))}if(h)return f=null,h+""||null}function t(){return Kr().defined(o).curve(s).context(u)}var n=Jr,r=null,i=Ir(0),a=Qr,o=Ir(!0),u=null,s=Zr,f=null;return e.x=function(t){return arguments.length?(n="function"==typeof t?t:Ir(+t),r=null,e):n},e.x0=function(t){return arguments.length?(n="function"==typeof t?t:Ir(+t),e):n},e.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Ir(+t),e):r},e.y=function(t){return arguments.length?(i="function"==typeof t?t:Ir(+t),a=null,e):i},e.y0=function(t){return arguments.length?(i="function"==typeof t?t:Ir(+t),e):i},e.y1=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:Ir(+t),e):a},e.lineX0=e.lineY0=function(){return t().x(n).y(i)},e.lineY1=function(){return t().x(n).y(a)},e.lineX1=function(){return t().x(r).y(i)},e.defined=function(t){return arguments.length?(o="function"==typeof t?t:Ir(!!t),e):o},e.curve=function(t){return arguments.length?(s=t,null!=u&&(f=s(u)),e):s},e.context=function(t){return arguments.length?(null==t?u=f=null:f=s(u=t),e):u},e}function ti(){}function ni(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ri(e){this._context=e}function ii(e){this._context=e}function ai(e){this._context=e}function oi(e,t){this._basis=new ri(e),this._beta=t}function ui(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function si(e,t){this._context=e,this._k=(1-t)/6}function fi(e,t){this._context=e,this._k=(1-t)/6}function ci(e,t){this._context=e,this._k=(1-t)/6}function li(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>E_){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>E_){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function di(e,t){this._context=e,this._alpha=t}function hi(e,t){this._context=e,this._alpha=t}function pi(e,t){this._context=e,this._alpha=t}function gi(e){this._context=e}function mi(e){return e<0?-1:1}function vi(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(mi(a)+mi(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function yi(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function bi(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function _i(e){this._context=e}function xi(e){this._context=new wi(e)}function wi(e){this._context=e}function ki(e){this._context=e}function Mi(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(a[i[0]=0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;0<=t;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function Si(e,t){this._context=e,this._t=t}function Ei(e,t,n){var r=j_.hasOwnProperty(e)&&j_[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function Oi(e){var t,n,r,i,a,o,u,s,f,c,l,d=[];for(s=0,c=(t=e.slice().replace(I_[0],"###$1").split(I_[1]).slice(1)).length;s<c;++s){for(r=(n=t[s]).slice(1).trim().replace(I_[2],"$1###$2").split(I_[3]),i=[o=n.charAt(0)],f=0,l=r.length;f<l;++f)(a=+r[f])===a&&i.push(a);if(u=F_[o.toLowerCase()],i.length-1>u)for(f=1,l=i.length;f<l;f+=u)d.push([o].concat(i.slice(f,f+u)));else d.push(i)}return d}function Ai(e){var t=W_.call(e);if(B_[t])return B_[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],f=e[7],c=f*o,l=-s*u,d=s*o,h=f*u,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,k=n+m,M=r+v,S=k+_*v,E=M-_*m;return B_[t]=[c*x+l*w,d*x+h*w,c*S+l*E,d*S+h*E,c*k+l*M,d*k+h*M]}function Ci(e,t){var n=G_[0]=e[0];if("a"===n||"A"===n)G_[1]=t*e[1],G_[2]=t*e[2],G_[6]=t*e[6],G_[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)G_[r]=t*e[r];return G_}function Ri(e,t,n,r,i){var a,o,u,s,f,c=null,l=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=Ci(a,i)),a[0]){case"l":l+=a[1],d+=a[2],e.lineTo(l+n,d+r);break;case"L":l=a[1],d=a[2],e.lineTo(l+n,d+r);break;case"h":l+=a[1],e.lineTo(l+n,d+r);break;case"H":l=a[1],e.lineTo(l+n,d+r);break;case"v":d+=a[1],e.lineTo(l+n,d+r);break;case"V":d=a[1],e.lineTo(l+n,d+r);break;case"m":l+=a[1],d+=a[2],e.moveTo(l+n,d+r);break;case"M":l=a[1],d=a[2],e.moveTo(l+n,d+r);break;case"c":o=l+a[5],u=d+a[6],h=l+a[3],p=d+a[4],e.bezierCurveTo(l+a[1]+n,d+a[2]+r,h+n,p+r,o+n,u+r),l=o,d=u;break;case"C":l=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,l+n,d+r);break;case"s":o=l+a[3],u=d+a[4],h=2*l-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,l+a[1]+n,d+a[2]+r,o+n,u+r),h=l+a[1],p=d+a[2],l=o,d=u;break;case"S":o=a[3],u=a[4],h=2*l-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,u+r),l=o,d=u,h=a[1],p=a[2];break;case"q":o=l+a[3],u=d+a[4],h=l+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u;break;case"Q":o=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),l=o,d=u,h=a[1],p=a[2];break;case"t":o=l+a[1],u=d+a[2],null===c[0].match(/[QqTt]/)?(h=l,p=d):"t"===c[0]?(h=2*l-s,p=2*d-f):"q"===c[0]&&(h=2*l-h,p=2*d-p),s=h,f=p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),d=u,h=(l=o)+a[1],p=d+a[2];break;case"T":o=a[1],u=a[2],h=2*l-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,u+r),l=o,d=u;break;case"a":Ti(e,l+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+d+r]),l+=a[6],d+=a[7];break;case"A":Ti(e,l+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}}function Ti(e,t,n,r){for(var i=function(e,t,n,r,i,a,o,u,s){var f=W_.call(arguments);if(U_[f])return U_[f];var c=o*(Math.PI/180),l=Math.sin(c),d=Math.cos(c),h=d*(u-e)*.5+l*(s-t)*.5,p=d*(s-t)*.5-l*(u-e)*.5,g=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);1<g&&(n*=g=Math.sqrt(g),r*=g);var m=d/n,v=l/n,y=-l/r,b=d/r,_=m*u+v*s,x=y*u+b*s,w=m*e+v*t,k=y*e+b*t,M=1/((w-_)*(w-_)+(k-x)*(k-x))-.25;M<0&&(M=0);var S=Math.sqrt(M);a==i&&(S=-S);var E=.5*(_+w)-S*(k-x),O=.5*(x+k)+S*(w-_),A=Math.atan2(x-O,_-E),C=Math.atan2(k-O,w-E)-A;C<0&&1===a?C+=2*Math.PI:0<C&&0===a&&(C-=2*Math.PI);for(var R=Math.ceil(Math.abs(C/(.5*Math.PI+.001))),T=[],z=0;z<R;++z){var N=A+z*C/R,D=A+(z+1)*C/R;T[z]=[E,O,N,D,n,r,l,d]}return U_[f]=T}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=Ai(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function zi(e){return V_.hasOwnProperty(e)?V_[e]:function(e){if(!X_.hasOwnProperty(e)){var t=Oi(e);X_[e]={draw:function(e,n){Ri(e,t,0,0,Math.sqrt(n)/2)}}}return X_[e]}(e)}function Ni(e){return e.x}function Di(e){return e.y}function Pi(e){return e.width}function Li(e){return e.height}function qi(e){return function(){return e}}function $i(){function e(e,u,s){var f,c=null!=u?u:+t.call(this,e),l=null!=s?s:+n.call(this,e),d=+r.call(this,e),h=+i.call(this,e),p=+a.call(this,e);if(o||(o=f=Fr()),p<=0)o.rect(c,l,d,h);else{var g=c+d,m=l+h;o.moveTo(c+p,l),o.lineTo(g-p,l),o.quadraticCurveTo(g,l,g,l+p),o.lineTo(g,m-p),o.quadraticCurveTo(g,m,g-p,m),o.lineTo(c+p,m),o.quadraticCurveTo(c,m,c,m-p),o.lineTo(c,l+p),o.quadraticCurveTo(c,l,c+p,l),o.closePath()}if(f)return o=null,f+""||null}var t=Ni,n=Di,r=Pi,i=Li,a=qi(0),o=null;return e.x=function(n){return arguments.length?(t="function"==typeof n?n:qi(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:qi(+t),e):n},e.width=function(t){return arguments.length?(r="function"==typeof t?t:qi(+t),e):r},e.height=function(t){return arguments.length?(i="function"==typeof t?t:qi(+t),e):i},e.cornerRadius=function(t){return arguments.length?(a="function"==typeof t?t:qi(+t),e):a},e.context=function(t){return arguments.length?(o=null==t?null:t,e):o},e}function ji(){function e(e,t,n){var r=n/2;if(o){var i=s-t,a=e-u;if(i||a){var l=Math.sqrt(i*i+a*a),d=(i/=l)*f,h=(a/=l)*f,p=Math.atan2(a,i);c.moveTo(u-d,s-h),c.lineTo(e-i*r,t-a*r),c.arc(e,t,r,p-Z_,p),c.lineTo(u+d,s+h),c.arc(u,s,f,p,p+Z_)}else c.arc(e,t,r,0,2*Z_);c.closePath()}else o=1;u=e,s=t,f=r}function t(t){var u,s,f,l=t.length,d=!1;for(null==c&&(c=f=Fr()),u=0;u<=l;++u)!(u<l&&a(s=t[u],u,t))===d&&(d=!d)&&(o=0),d&&e(+n(s,u,t),+r(s,u,t),+i(s,u,t));if(f)return c=null,f+""||null}var n,r,i,a,o,u,s,f,c=null;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.context=function(e){return arguments.length?(c=null==e?null:e,t):c},t}function Fi(e){return e.x||0}function Ii(e){return e.y||0}function Ui(e){return e.cornerRadius||0}function Bi(e){return!(!1===e.defined)}function Wi(e,t,n,r){return tx.context(e)(t,n,r)}function Gi(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e}function Yi(e){return $_=e,Yi}function Hi(){}function Vi(e,t){$_.add(e,t)}function Xi(e,t,n){return n.id?function(e,t,n){for(var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,u=n.x1+t.x2*r,s=n.y1+t.y2*i,f=t.stops,c=0,l=f.length,d=e.createLinearGradient(a,o,u,s);c<l;++c)d.addColorStop(f[c].offset,f[c].color);return d}(e,n,t.bounds):n}function Zi(e,t,n){return 0<(n*=null==t.fillOpacity?1:t.fillOpacity)&&(e.globalAlpha=n,e.fillStyle=Xi(e,t,t.fill),!0)}function Ji(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&0<(n*=null==t.strokeOpacity?1:t.strokeOpacity)&&(e.globalAlpha=n,e.strokeStyle=Xi(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||fx),e.lineDashOffset=t.strokeDashOffset||0),!0)}function Qi(e,t){return e.zindex-t.zindex||e.index-t.index}function Ki(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(Qi)}function ea(e,t){var n,r,i=e.items;if(i&&i.length){var a=Ki(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function ta(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=Ki(e);for(a&&a.length&&(i=a),r=i.length;0<=--r;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;0<=--r;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function na(e){return function(t,n,r){ea(n,function(n){r&&!r.intersects(n.bounds)||ra(e,t,n,n)})}}function ra(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&Zi(t,n,i)&&t.fill(),n.stroke&&Ji(t,n,i)&&t.stroke()))}function ia(e){return e||(e=cx),function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,ta(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return e(t,n,r,i,a,o)?n:void 0})}}function aa(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==t?s.fill:t,c=s.stroke&&n.isPointInStroke;return c&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(f&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function oa(e){return ia(aa(e))}function ua(e,t){return"translate("+e+","+t+")"}function sa(e){return ua(e.x||0,e.y||0)}function fa(e,t){function n(e,n){var r=n.x||0,i=n.y||0;e.translate(r,i),e.beginPath(),t(e,n),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",sa(n)),e("d",t(null,n))},bound:function(e,n){return t(Yi(e),n),Gi(e,n).translate(n.x||0,n.y||0)},draw:na(n),pick:oa(n)}}function ca(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var i,a=aa(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(Yi(e),r),Gi(e,r[0]))},draw:(i=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||ra(i,e,t.items[0],t.items)}),pick:function(e,t,n,r,i,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(i,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,a(e,u,n,r)?u[0]:null)},tip:n}}function la(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+hx++),o=i.clipping[a]||(i.clipping[a]={id:a});return A(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function da(e,t){var n=t.stroke?px:0;e.beginPath(),Wi(e,t,n,n)}function ha(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then(function(t){e.image=t,e.image.url=e.url})),n}function pa(e,t){return"center"===e?t/2:"right"===e?t:0}function ga(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function ma(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=Oi(n)).path=n),Ri(e,r,t.x,t.y)}function va(e,t){e.beginPath(),Wi(e,t)}function ya(e,t,n){var r,i,a,o;return!(!t.stroke||!Ji(e,t,n)||(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),0))}function ba(e){return sx=ka(e),_a(Sa(e))}function _a(e){return~~(.8*e.length*sx)}function xa(e){return ux.font=Ea(e),wa(Sa(e))}function wa(e){return ux.measureText(e).width}function ka(e){return null!=e.fontSize?e.fontSize:11}function Ma(e){ux=e&&(ux=Dr(1,1))?ux.getContext("2d"):null,Mx.width=ux?xa:ba}function Sa(e){var t=e.text;return null==t?"":0<e.limit?function(e){var t,n=+e.limit,r=e.text+"";if(ux?(ux.font=Ea(e),t=wa):(sx=ka(e),t=_a),t(r)<n)return r;var i,a=e.ellipsis||"",o="rtl"===e.dir,u=0,s=r.length;if(n-=t(a),o){for(;u<s;)i=u+s>>>1,t(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),t(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}(e):t+""}function Ea(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/"/g,"'")),(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ka(e)+"px "+(n||"sans-serif")}function Oa(e){var t=e.baseline,n=ka(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}function Aa(e,t,n){var r,i,a=Mx.height(t),o=t.align,u=t.radius||0,s=t.x||0,f=t.y||0,c=t.dx||0,l=(t.dy||0)+Oa(t)-Math.round(.8*a);return u&&(i=(t.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=Mx.width(t),"center"===o?c-=r/2:"right"===o&&(c-=r),e.set(c+=s,l+=f,c+r,l+a),t.angle&&!n&&e.rotate(t.angle*Math.PI/180,s,f),e.expand(n||!r?0:1)}function Ca(e,t,n){var r=Ox[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Rr),e,n)}function Ra(e,t,n){var r,i,a,o,u=Ox[e.marktype],s=u.bound,f=e.items,c=f&&f.length;if(u.nested)return c?a=f[0]:(Ax.mark=e,a=Ax),o=Ca(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new Rr,c)for(r=0,i=f.length;r<i;++r)t.union(Ca(f[r],s,n));return e.bounds=t}function Ta(e,t){return JSON.stringify(e,Cx,t)}function za(e){return function e(t){var n,r,i,a=t.marktype,o=t.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=t,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&e(o[r]);return a&&Ra(t),t}("string"==typeof e?JSON.parse(e):e)}function Na(e){arguments.length?this.root=za(e):(this.root=Da({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Nr(this.root)])}function Da(e,t){return{bounds:new Rr,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function Pa(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function La(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function qa(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=Pa(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function $a(e,t){for(var n=e.childNodes,r=n.length;t<r;)e.removeChild(n[--r]);return e}function ja(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Fa(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Ia(e,t){this._active=null,this._handlers={},this._loader=e||de(),this._tooltip=t||Ua}function Ua(e,t,n,r){e.element().setAttribute("title",r||"")}function Ba(e){this._el=null,this._bgcolor=null,this._loader=new Lr(e)}function Wa(e,t){Ia.call(this,e,t),this._down=null,this._touch=null,this._first=!0}function Ga(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r)),this.fire(e,r)}}function Ya(e){return function(t){this.fire(e,t),this._active=null}}function Ha(e){Ba.call(this,e),this._redraw=!1,this._dirty=new Rr}function Va(e,t){Ia.call(this,e,t);var n=this;n._hrefHandler=Xa(n,function(e,t){t&&t.href&&n.handleHref(e,t,t.href)}),n._tooltipHandler=Xa(n,function(e,t){n.handleTooltip(e,t,e.type!==Dx)})}function Xa(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function Za(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function Ja(e){return"</"+e+">"}function Qa(e){Ba.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Ka(e,t,n){var r,i,a;for((e=qa(e,n,"linearGradient",Gx)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;r<i;++r)(a=qa(e,r,"stop",Gx)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);$a(e,r)}function eo(e,t,n){var r;(e=qa(e,n,"clipPath",Gx)).setAttribute("id",t.id),t.path?(r=qa(e,0,"path",Gx)).setAttribute("d",t.path):((r=qa(e,0,"rect",Gx)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height))}function to(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function no(e,t,n,r,i){var a,o,u,s=e._svg;if(!s&&(s=Pa(a=t.ownerDocument,r,Gx),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},"g"===r))){var f=Pa(a,"path",Gx);f.setAttribute("class","background"),s.appendChild(f),f.__data__=e;var c=Pa(a,"g",Gx);s.appendChild(c),c.__data__=e}return(s.ownerSVGElement!==i||(u=(o=e).mark||o.group)&&1<u.items.length&&s.previousSibling!==n)&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function ro(e,t,n){t!==Xx[e]&&(null!=t?n?Vx.setAttributeNS(n,e,t):Vx.setAttribute(e,t):n?Vx.removeAttributeNS(n,e):Vx.removeAttribute(e),Xx[e]=t)}function io(e){Ba.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function ao(e,t,n,r){Jx[r||e]=t}function oo(e,t,n,r){if(null==e)return"";var i,a,o,u,s,f="";for("bgrect"===n&&!1===t.interactive&&(f+="pointer-events: none; "),"text"===n&&(f+="font: "+Ea(e)+"; "),i=0,a=Wx.length;i<a;++i)o=Wx[i],u=Bx[o],null==(s=e[o])?"fill"===u&&(f+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(s.id&&(s="url(#"+(r.gradient[s.id]=s).id+")"),f+=u+": "+s+"; "):f+=u+": none; ";return f?'style="'+f.trim()+'"':null}function uo(e,t){return e=String(e||"").toLowerCase(),1<arguments.length?(tw[e]=t,this):tw[e]}function so(e){var t=e.clip;if(A(t))t(Yi(nw.clear()));else{if(!t)return;nw.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(nw)}function fo(e,t,n){return e===t||("path"===n?co(e,t):e instanceof Date&&t instanceof Date?+e==+t:$(e)&&$(t)?Math.abs(e-t)<=rw:e&&t&&(s(e)||s(t))?null!=e&&null!=t&&function(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;0<=r;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;0<=r;r--)if(n=i[r],!fo(e[n],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function co(e,t){return fo(Oi(e),Oi(t))}function lo(e){sn.call(this,null,e)}function ho(e,t,n){return t(e.bounds.clear(),e,n)}function po(e){sn.call(this,0,e)}function go(e){sn.call(this,null,e)}function mo(e){sn.call(this,null,e)}function vo(e,t){return!(e.x2-1<t.x1||e.x1+1>t.x2||e.y2-1<t.y1||e.y1+1>t.y2)}function yo(e){for(var t,n=1,r=e.length,i=e[0].bounds;n<r;i=t,++n)if(vo(i,t=e[n].bounds))return!0}function bo(e){var t=e.bounds;return 1<t.width()&&1<t.height()}function _o(e){sn.call(this,null,e)}function xo(e,t){for(var n=0,r=e.length;n<r;++n)t.push(e[n])}function wo(e){return{x1:0,y1:0,x2:e.width||0,y2:e.height||0}}function ko(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Mo(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function So(e,t){return e.bounds[t]}function Eo(e,t,n){var r=s(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function Oo(e){return e<0?Math.ceil(-e):0}function Ao(e,t,n){function r(e,t){return Math.floor(Math.min(e,t))}function i(e,t){return Math.ceil(Math.max(e,t))}var a,o,u,s,f,c,l,d,h,p,g,m,v=function(e){for(var t,n,r=e.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(n=(t=r[a]).items,t.marktype===Yb)switch(t.role){case Hb:case Vb:break;case Xb:xo(n,o.rowheaders);break;case Zb:xo(n,o.rowfooters);break;case Qb:xo(n,o.colheaders);break;case Kb:xo(n,o.colfooters);break;case Jb:o.rowtitle=n[0];break;case e_:o.coltitle=n[0];break;default:xo(n,o.marks)}return o}(t),y=v.marks,b="flush"===n.bounds,_=b?wo:ko,x=new Rr(0,0,0,0),w=Eo(n.align,f_),k=Eo(n.align,c_),M=Eo(n.padding,f_),S=Eo(n.padding,c_),E=n.offset,O=t.columns||n.columns||y.length,A=O<0?1:Math.ceil(y.length/O),C=A*O,R=[],T=[],z=0,N=[],D=[],P=0,L=y.length;for(o=0;o<O;++o)T[o]=0;for(o=0;o<A;++o)D[o]=0;for(o=0;o<L;++o)f=_(y[o]),u=o%O,s=~~(o/O),l=Math.ceil(_(y[o]).x2),d=Math.ceil(_(y[o]).y2),z=Math.max(z,l),P=Math.max(P,d),T[u]=Math.max(T[u],l),D[s]=Math.max(D[s],d),R.push(M+Oo(f.x1)),N.push(S+Oo(f.y1)),e.dirty(y[o]);for(o=0;o<L;++o)o%O==0&&(R[o]=0),o<O&&(N[o]=0);if("each"===w)for(u=1;u<O;++u){for(m=0,o=u;o<L;o+=O)m<R[o]&&(m=R[o]);for(o=u;o<L;o+=O)R[o]=m+T[u-1]}else if(w===s_){for(o=m=0;o<L;++o)o%O&&m<R[o]&&(m=R[o]);for(o=0;o<L;++o)o%O&&(R[o]=m+z)}else for(w=!1,u=1;u<O;++u)for(o=u;o<L;o+=O)R[o]+=T[u-1];if("each"===k)for(s=1;s<A;++s){for(m=0,a=(o=s*O)+O;o<a;++o)m<N[o]&&(m=N[o]);for(o=s*O;o<a;++o)N[o]=m+D[s-1]}else if(k===s_){for(m=0,o=O;o<L;++o)m<N[o]&&(m=N[o]);for(o=O;o<L;++o)N[o]=m+P}else for(k=!1,s=1;s<A;++s)for(a=(o=s*O)+O;o<a;++o)N[o]+=D[s-1];for(o=h=0;o<L;++o)l=(c=y[o]).x||0,c.x=h=R[o]+(o%O?h:0),c.bounds.translate(h-l,0);for(u=0;u<O;++u)for(p=0,o=u;o<L;o+=O)d=(c=y[o]).y||0,c.y=p+=N[o],c.bounds.translate(0,p-d);if(Eo(n.center,f_)&&1<A&&w)for(o=0;o<L;++o)c=y[o],0<(h=(f=w===s_?z:T[o%O])-_(c).x2)&&(c.x+=l=h/2,c.bounds.translate(l,0));if(Eo(n.center,c_)&&1!==O&&k)for(o=0;o<L;++o)c=y[o],0<(p=(f=k===s_?P:D[~~(o/O)])-_(c).y2)&&(c.y+=d=p/2,c.bounds.translate(0,d));for(o=0;o<L;++o)y[o].mark.bounds.clear();for(o=0;o<L;++o)c=y[o],e.dirty(c),x.union(c.mark.bounds.union(c.bounds));_=b?Mo:So,g=Eo(n.headerBand,c_,null),h=Co(e,v.rowheaders,y,O,A,-Eo(E,"rowHeader"),r,0,_,"x1",0,O,1,g),g=Eo(n.headerBand,f_,null),p=Co(e,v.colheaders,y,O,O,-Eo(E,"columnHeader"),r,1,_,"y1",0,1,O,g),g=Eo(n.footerBand,c_,null),Co(e,v.rowfooters,y,O,A,Eo(E,"rowFooter"),i,0,_,"x2",O-1,O,1,g),g=Eo(n.footerBand,f_,null),Co(e,v.colfooters,y,O,O,Eo(E,"columnFooter"),i,1,_,"y2",C-O,1,O,g),v.rowtitle&&(m=h-Eo(E,"rowTitle"),g=Eo(n.titleBand,c_,.5),Ro(e,v.rowtitle,m,0,x,g)),v.coltitle&&(m=p-Eo(E,"columnTitle"),g=Eo(n.titleBand,f_,.5),Ro(e,v.coltitle,m,1,x,g))}function Co(e,t,n,r,i,a,o,u,s,f,c,l,d,h){var p,g,m,v,y,b,_,x,w,k=n.length,M=0,S=0;if(!k)return M;for(p=c;p<k;p+=l)n[p]&&(M=o(M,s(n[p],f)));if(!t.length)return M;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),M+=a,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=c,g=0,v=t.length;g<v;++g,p+=l){for(y=(b=t[g]).mark.bounds,m=p;0<=m&&null==(_=n[m]);m-=d);u?(x=null==h?_.x:Math.round(_.bounds.x1+h*_.bounds.width()),w=M):(x=M,w=null==h?_.y:Math.round(_.bounds.y1+h*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,e.dirty(b),S=o(S,y[f])}return S}function Ro(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function To(e){sn.call(this,null,e)}function zo(e,t,n){return e[t]===n?0:(e[t]=n,1)}function No(e,t,n,r){var i,a,o,u,s=t.items[0],f=s.datum,c=f.orient,l=(u=+(o=f).grid,[o.ticks?u++:-1,o.labels?u++:-1,u+ +o.domain]),d=s.range,h=s.offset,p=s.position,g=s.minExtent,m=s.maxExtent,v=f.title&&s.items[l[2]].items[0],y=s.titlePadding,b=s.bounds,_=0,x=0;switch(sw.clear().union(b),b.clear(),-1<(i=l[0])&&b.union(s.items[i].bounds),-1<(i=l[1])&&b.union(s.items[i].bounds),c){case Lb:_=p||0,x=-h,a=Math.max(g,Math.min(m,-b.y1)),v&&(a=Do(v,a,y,0,-1,b)),b.add(0,-a).add(d,0);break;case qb:_=-h,x=p||0,a=Math.max(g,Math.min(m,-b.x1)),v&&(a=Do(v,a,y,1,-1,b)),b.add(-a,0).add(0,d);break;case $b:_=n+h,x=p||0,a=Math.max(g,Math.min(m,b.x2)),v&&(a=Do(v,a,y,1,1,b)),b.add(0,0).add(a,d);break;case jb:_=p||0,x=r+h,a=Math.max(g,Math.min(m,b.y2)),v&&(a=Do(v,a,y,0,1,b)),b.add(0,0).add(d,a);break;default:_=s.x,x=s.y}return Gi(b.translate(_,x),s),zo(s,"x",_+uw)|zo(s,"y",x+uw)&&(s.bounds=sw,e.dirty(s),s.bounds=b,e.dirty(s)),s.mark.bounds.clear().union(b)}function Do(e,t,n,r,i,a){var o=e.bounds,u=0,s=0;return e.auto?(t+=n,r?u=(e.x||0)-(e.x=i*t):s=(e.y||0)-(e.y=i*t),o.translate(-u,-s),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}function Po(e,t,n,r,i,a,o){var u,s,f,c,l,d=t.items[0],h=d.datum,p=h.orient,g=d.offset,m=d.bounds,v=0,y=0;switch(p===Lb||p===jb?(f=i,v=n[p]):p!==qb&&p!==$b||(f=r,y=n[p]),sw.clear().union(m),m.clear(),d.items.forEach(function(e){m.union(e.bounds)}),u=Math.round(m.width())+2*d.padding-1,s=Math.round(m.height())+2*d.padding-1,h.type===n_&&(c=d.items[0].items[0].items[0].items,l=c.reduce(function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e},{}),c.forEach(function(e){e.width=l[e.column],e.height=e.bounds.y2-e.y})),p){case qb:v-=n.leftWidth+g-Math.floor(f.x1),n.left+=s+n.margin;break;case $b:v+=g+Math.ceil(f.x2),n.right+=s+n.margin;break;case Lb:y-=s+g-Math.floor(f.y1),n.top+=u+n.margin;break;case jb:y+=g+Math.ceil(f.y2),n.bottom+=u+n.margin;break;case Fb:v+=g,y+=g;break;case Ib:v+=a-u-g,y+=g;break;case Ub:v+=g,y+=o-s-g;break;case Bb:v+=a-u-g,y+=o-s-g;break;default:v=d.x,y=d.y}return Gi(m.set(v,y,v+u,y+s),d),zo(d,"x",v)|zo(d,"width",u)|zo(d,"y",y)|zo(d,"height",s)&&(d.bounds=sw,e.dirty(d),d.bounds=m,e.dirty(d)),d.mark.bounds.clear().union(m)}function Lo(e,t,n){var r=e-t+2*n;
return e?0<r?r:1:0}function qo(){}function $o(e,t){var n=new qo;if(e instanceof qo)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function jo(){function e(r,a,o,u){if(a>=i.length)return null!=t&&r.sort(t),null!=n?n(r):r;for(var s,f,c,l=-1,d=r.length,h=i[a++],p=$o(),g=o();++l<d;)(c=p.get(s=h(f=r[l])+""))?c.push(f):p.set(s,[f]);return p.each(function(t,n){u(g,n,e(t,a,o,u))}),g}var t,n,r,i=[],a=[];return r={object:function(t){return e(t,0,Fo,Io)},map:function(t){return e(t,0,Uo,Bo)},entries:function(t){return function e(t,r){if(++r>i.length)return t;var o,u=a[r-1];return null!=n&&r>=i.length?o=t.entries():(o=[],t.each(function(t,n){o.push({key:n,values:e(t,r)})})),null!=u?o.sort(function(e,t){return u(e.key,t.key)}):o}(e(t,0,Uo,Bo),0)},key:function(e){return i.push(e),r},sortKeys:function(e){return a[i.length-1]=e,r},sortValues:function(e){return t=e,r},rollup:function(e){return n=e,r}}}function Fo(){return{}}function Io(e,t,n){e[t]=n}function Uo(){return $o()}function Bo(e,t,n){e.set(t,n)}function Wo(){}function Go(e){function t(t){var a=t+"",o=n.get(a);if(!o){if(i!==Ow)return i;n.set(a,o=r.push(t))}return e[(o-1)%e.length]}var n=$o(),r=[],i=Ow;return e=null==e?[]:Ew.call(e),t.domain=function(e){if(!arguments.length)return r.slice();r=[],n=$o();for(var i,a,o=-1,u=e.length;++o<u;)n.has(a=(i=e[o])+"")||n.set(a,r.push(i));return t},t.range=function(n){return arguments.length?(e=Ew.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(i=e,t):i},t.copy=function(){return Go().domain(r).range(e).unknown(i)},t}function Yo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ho(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Vo(){}function Xo(e){var t;return e=(e+"").trim().toLowerCase(),(t=zw.exec(e))?new eu((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=Nw.exec(e))?Zo(parseInt(t[1],16)):(t=Dw.exec(e))?new eu(t[1],t[2],t[3],1):(t=Pw.exec(e))?new eu(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Lw.exec(e))?Jo(t[1],t[2],t[3],t[4]):(t=qw.exec(e))?Jo(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=$w.exec(e))?nu(t[1],t[2]/100,t[3]/100,1):(t=jw.exec(e))?nu(t[1],t[2]/100,t[3]/100,t[4]):Fw.hasOwnProperty(e)?Zo(Fw[e]):"transparent"===e?new eu(NaN,NaN,NaN,0):null}function Zo(e){return new eu(e>>16&255,e>>8&255,255&e,1)}function Jo(e,t,n,r){return r<=0&&(e=t=n=NaN),new eu(e,t,n,r)}function Qo(e){return e instanceof Vo||(e=Xo(e)),e?new eu((e=e.rgb()).r,e.g,e.b,e.opacity):new eu}function Ko(e,t,n,r){return 1===arguments.length?Qo(e):new eu(e,t,n,null==r?1:r)}function eu(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function tu(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function nu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new iu(e,t,n,r)}function ru(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof iu)return new iu(e.h,e.s,e.l,e.opacity);if(e instanceof Vo||(e=Xo(e)),!e)return new iu;if(e instanceof iu)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=t===a?(n-r)/u+6*(n<r):n===a?(r-t)/u+2:(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=0<s&&s<1?0:o,new iu(o,u,s,e.opacity)}(e):new iu(e,t,n,null==r?1:r)}function iu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function au(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function ou(e){if(e instanceof su)return new su(e.l,e.a,e.b,e.opacity);if(e instanceof pu){if(isNaN(e.h))return new su(e.l,0,0,e.opacity);var t=e.h*Iw;return new su(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof eu||(e=Qo(e));var n,r,i=du(e.r),a=du(e.g),o=du(e.b),u=fu((.2225045*i+.7168786*a+.0606169*o)/Ww);return i===a&&a===o?n=r=u:(n=fu((.4360747*i+.3850649*a+.1430804*o)/Bw),r=fu((.0139322*i+.0971045*a+.7141733*o)/Gw)),new su(116*u-16,500*(n-u),200*(u-r),e.opacity)}function uu(e,t,n,r){return 1===arguments.length?ou(e):new su(e,t,n,null==r?1:r)}function su(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function fu(e){return Xw<e?Math.pow(e,1/3):e/Vw+Yw}function cu(e){return Hw<e?e*e*e:Vw*(e-Yw)}function lu(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function du(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hu(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof pu)return new pu(e.h,e.c,e.l,e.opacity);if(e instanceof su||(e=ou(e)),0===e.a&&0===e.b)return new pu(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Uw;return new pu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new pu(e,t,n,null==r?1:r)}function pu(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function gu(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof mu)return new mu(e.h,e.s,e.l,e.opacity);e instanceof eu||(e=Qo(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(nk*r+ek*t-tk*n)/(nk+ek-tk),a=r-i,o=(Kw*(n-i)-Jw*a)/Qw,u=Math.sqrt(o*o+a*a)/(Kw*i*(1-i)),s=u?Math.atan2(o,a)*Uw-120:NaN;return new mu(s<0?s+360:s,u,i,e.opacity)}(e):new mu(e,t,n,null==r?1:r)}function mu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function vu(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function yu(e){var t=e.length-1;return function(n){var r=n<=0?n=0:1<=n?t-(n=1):Math.floor(n*t),i=e[r],a=e[r+1],o=0<r?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return vu((n-r/t)*t,o,i,a,u)}}function bu(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return vu((n-r/t)*t,i,a,o,u)}}function _u(e){return function(){return e}}function xu(e,t){return function(n){return e+n*t}}function wu(e,t){var n=t-e;return n?xu(e,180<n||n<-180?n-360*Math.round(n/360):n):_u(isNaN(e)?t:e)}function ku(e){return 1==(e=+e)?Mu:function(t,n){return n-t?(r=t,i=n,a=e,r=Math.pow(r,a),i=Math.pow(i,a)-r,a=1/a,function(e){return Math.pow(r+e*i,a)}):_u(isNaN(t)?n:t);var r,i,a}}function Mu(e,t){var n=t-e;return n?xu(e,n):_u(isNaN(e)?t:e)}function Su(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=Ko(t[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=e(a),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=u(e),r+""}}}function Eu(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Tu(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Ou(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}function Au(e,t){return t-=e=+e,function(n){return e+t*n}}function Cu(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Tu(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function Ru(e,t){var n,r,i,a,o,u=lk.lastIndex=dk.lastIndex=0,s=-1,f=[],c=[];for(e+="",t+="";(n=lk.exec(e))&&(r=dk.exec(t));)(i=r.index)>u&&(i=t.slice(u,i),f[s]?f[s]+=i:f[++s]=i),(n=n[0])===(r=r[0])?f[s]?f[s]+=r:f[++s]=r:(f[++s]=null,c.push({i:s,x:Au(n,r)})),u=dk.lastIndex;return u<t.length&&(i=t.slice(u),f[s]?f[s]+=i:f[++s]=i),f.length<2?c[0]?(o=c[0].x,function(e){return o(e)+""}):(a=t,function(){return a}):(t=c.length,function(e){for(var n,r=0;r<t;++r)f[(n=c[r]).i]=n.x(e);return f.join("")})}function Tu(e,t){var n,r=typeof t;return null==t||"boolean"===r?_u(t):("number"===r?Au:"string"===r?(n=Xo(t))?(t=n,sk):Ru:t instanceof Xo?sk:t instanceof Date?Ou:Array.isArray(t)?Eu:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Cu:Au)(e,t)}function zu(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}}function Nu(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*hk,skewX:Math.atan(s)*hk,scaleX:o,scaleY:u}}function Du(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var u,s,f,c,l,d,h,p,g=[],m=[];return a=e(a),o=e(o),function(e,r,i,a,o,u){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:Au(e,i)},{i:s-2,x:Au(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,g,m),u=a.rotate,s=o.rotate,f=g,c=m,u!==s?(180<u-s?s+=360:180<s-u&&(u+=360),c.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Au(u,s)})):s&&f.push(i(f)+"rotate("+s+r),l=a.skewX,d=o.skewX,h=g,p=m,l!==d?p.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Au(l,d)}):d&&h.push(i(h)+"skewX("+d+r),function(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:Au(e,n)},{i:u-2,x:Au(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,g,m),a=o=null,function(e){for(var t,n=-1,r=m.length;++n<r;)g[(t=m[n]).i]=t.x(e);return g.join("")}}}function Pu(e){return((e=Math.exp(e))+1/e)/2}function Lu(e){return function(t,n){var r=e((t=ru(t)).h,(n=ru(n)).h),i=Mu(t.s,n.s),a=Mu(t.l,n.l),o=Mu(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function qu(e){return function(t,n){var r=e((t=hu(t)).h,(n=hu(n)).h),i=Mu(t.c,n.c),a=Mu(t.l,n.l),o=Mu(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function $u(e){return function t(n){function r(t,r){var i=e((t=gu(t)).h,(r=gu(r)).h),a=Mu(t.s,r.s),o=Mu(t.l,r.l),u=Mu(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}function ju(e){return function(){return e}}function Fu(e){return+e}function Iu(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ju(t)}function Uu(e,t,n,r){var i=e[0],a=e[1],o=t[0],u=t[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(e){return o(i(e))}}function Bu(e,t,n,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),u=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<i;)a[u]=n(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(t){var n=cb(e,t,1,i)-1;return o[n](a[n](t))}}function Wu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function Gu(e,t){function n(){return i=2<Math.min(u.length,s.length)?Bu:Uu,a=o=null,r}function r(t){return(a||(a=i(u,s,c?(n=e,function(e,t){var r=n(e=+e,t=+t);return function(n){return n<=e?0:t<=n?1:r(n)}}):e,f)))(+t);var n}var i,a,o,u=Sk,s=Sk,f=Tu,c=!1;return r.invert=function(e){return(o||(o=i(s,u,Iu,c?(n=t,function(e,t){var r=n(e=+e,t=+t);return function(n){return n<=0?e:1<=n?t:r(n)}}):t)))(+e);var n},r.domain=function(e){return arguments.length?(u=Sw.call(e,Fu),n()):u.slice()},r.range=function(e){return arguments.length?(s=Ew.call(e),n()):s.slice()},r.rangeRound=function(e){return s=Ew.call(e),f=zu,n()},r.clamp=function(e){return arguments.length?(c=!!e,n()):c},r.interpolate=function(e){return arguments.length?(f=e,n()):f},n()}function Yu(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+e.slice(n+1)]}function Hu(e){return(e=Yu(Math.abs(e)))?e[1]:NaN}function Vu(e){return new Xu(e)}function Xu(e){if(!(t=Ek.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function Zu(e,t){var n=Yu(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function Ju(e){return e}function Qu(e){function t(e){function t(e){var t,o,f,c=v,x=y;if("c"===m)x=b(e)+x,e="";else{var w=(e=+e)<0;if(e=b(Math.abs(e),p),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(0<i){if(!+e[r])break e;i=0}}return 0<i?e.slice(0,i)+e.slice(t+1):e}(e)),w&&0==+e&&(w=!1),c=(w?"("===i?i:"-":"-"===i||"("===i?"":i)+c,x=("s"===m?Tk[8+uk/3]:"")+x+(w&&"("===i?")":""),_)for(t=-1,o=e.length;++t<o;)if((f=e.charCodeAt(t))<48||57<f){x=(46===f?u+e.slice(t+1):e.slice(t))+x,e=e.slice(0,t);break}}h&&!l&&(e=a(e,1/0));var k=c.length+e.length+x.length,M=k<d?new Array(d-k+1).join(n):"";switch(h&&l&&(e=a(M+e,M.length?d-x.length:1/0),M=""),r){case"<":e=c+e+x+M;break;case"=":e=c+M+e+x;break;case"^":e=M.slice(0,k=M.length>>1)+c+e+x+M.slice(k);break;default:e=M+c+e+x}return s(e)}var n=(e=Vu(e)).fill,r=e.align,i=e.sign,c=e.symbol,l=e.zero,d=e.width,h=e.comma,p=e.precision,g=e.trim,m=e.type;"n"===m?(h=!0,m="g"):Rk[m]||(null==p&&(p=12),g=!0,m="g"),(l||"0"===n&&"="===r)&&(l=!0,n="0",r="=");var v="$"===c?o[0]:"#"===c&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y="$"===c?o[1]:/[%p]/.test(m)?f:"",b=Rk[m],_=/[defgprs%]/.test(m);return p=null==p?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),t.toString=function(){return e+""},t}var n,r,i,a=e.grouping&&e.thousands?(r=e.grouping,i=e.thousands,function(e,t){for(var n=e.length,a=[],o=0,u=r[0],s=0;0<n&&0<u&&(t<s+u+1&&(u=Math.max(1,t-s)),a.push(e.substring(n-=u,n+u)),!((s+=u+1)>t));)u=r[o=(o+1)%r.length];return a.reverse().join(i)}):Ju,o=e.currency,u=e.decimal,s=e.numerals?(n=e.numerals,function(e){return e.replace(/[0-9]/g,function(e){return n[+e]})}):Ju,f=e.percent||"%";return{format:t,formatPrefix:function(e,n){var r=t(((e=Vu(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Hu(n)/3))),a=Math.pow(10,-i),o=Tk[8+i/3];return function(e){return r(a*e)+o}}}}function Ku(e){return Ok=Qu(e),Ak=Ok.format,Ck=Ok.formatPrefix,Ok}function es(e,t,n){var r,i,a,o,u,s,f=e[0],c=e[e.length-1],l=On(f,c,null==t?10:t);switch((n=Vu(null==n?",f":n)).type){case"s":var d=Math.max(Math.abs(f),Math.abs(c));return null!=n.precision||isNaN((u=l,s=d,r=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Hu(s)/3)))-Hu(Math.abs(u)))))||(n.precision=r),Ck(n,d);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN((a=l,o=Math.max(Math.abs(f),Math.abs(c)),a=Math.abs(a),o=Math.abs(o)-a,r=Math.max(0,Hu(o)-Hu(a))+1))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN((i=l,r=Math.max(0,-Hu(Math.abs(i)))))||(n.precision=r-2*("%"===n.type))}return Ak(n)}function ts(e){var t=e.domain;return e.ticks=function(e){var n=t();return Sn(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return es(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,u=i[a],s=i[o];return s<u&&(r=u,u=s,s=r,r=a,a=o,o=r),0<(r=En(u,s,n))?r=En(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=En(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),0<r?(i[a]=Math.floor(u/r)*r,i[o]=Math.ceil(s/r)*r,t(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[o]=Math.floor(s*r)/r,t(i)),e},e}function ns(){var e=Gu(Iu,Au);return e.copy=function(){return Wu(e,ns())},ts(e)}function rs(){function e(e){return+e}var t=[0,1];return(e.invert=e).domain=e.range=function(n){return arguments.length?(t=Sw.call(n,Fu),e):t.slice()},e.copy=function(){return rs().domain(t)},ts(e)}function is(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function as(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:ju(t)}function os(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function us(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ss(e){return 10===e?us:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function fs(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function cs(e){return function(t){return-e(-t)}}function ls(){function e(){return i=fs(r),a=ss(r),n()[0]<0&&(i=cs(i),a=cs(a)),t}var t=Gu(as,os).domain([1,10]),n=t.domain,r=10,i=fs(10),a=ss(10);return t.base=function(t){return arguments.length?(r=+t,e()):r},t.domain=function(t){return arguments.length?(n(t),e()):n()},t.ticks=function(e){var t,o=n(),u=o[0],s=o[o.length-1];(t=s<u)&&(d=u,u=s,s=d);var f,c,l,d=i(u),h=i(s),p=null==e?10:+e,g=[];if(!(r%1)&&h-d<p){if(d=Math.round(d)-1,h=Math.round(h)+1,0<u){for(;d<h;++d)for(c=1,f=a(d);c<r;++c)if(!((l=f*c)<u)){if(s<l)break;g.push(l)}}else for(;d<h;++d)for(c=r-1,f=a(d);1<=c;--c)if(!((l=f*c)<u)){if(s<l)break;g.push(l)}}else g=Sn(d,h,Math.min(h-d,p)).map(a);return t?g.reverse():g},t.tickFormat=function(e,n){if(null==n&&(n=10===r?".0e":","),"function"!=typeof n&&(n=Ak(n)),e===1/0)return n;null==e&&(e=10);var o=Math.max(1,r*e/t.ticks().length);return function(e){var t=e/a(Math.round(i(e)));return t*r<r-.5&&(t*=r),t<=o?n(e):""}},t.nice=function(){return n(is(n(),{floor:function(e){return a(Math.floor(i(e)))},ceil:function(e){return a(Math.ceil(i(e)))}}))},t.copy=function(){return Wu(t,ls().base(r))},t}function ds(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function hs(){var e=1,t=Gu(function(t,n){return(n=ds(n,e)-(t=ds(t,e)))?function(r){return(ds(r,e)-t)/n}:ju(n)},function(t,n){return n=ds(n,e)-(t=ds(t,e)),function(r){return ds(t+n*r,1/e)}}),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return Wu(t,hs().exponent(e))},ts(t)}function ps(){return hs().exponent(.5)}function gs(){function e(){var e=0,a=Math.max(1,r.length);for(i=new Array(a-1);++e<a;)i[e-1]=Cn(n,e/a);return t}function t(e){if(!isNaN(e=+e))return r[cb(i,e)]}var n=[],r=[],i=[];return t.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[0<t?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},t.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var r,i=0,a=t.length;i<a;++i)null==(r=t[i])||isNaN(r=+r)||n.push(r);return n.sort(_n),e()},t.range=function(t){return arguments.length?(r=Ew.call(t),e()):r.slice()},t.quantiles=function(){return i.slice()},t.copy=function(){return gs().domain(n).range(r)},t}function ms(){function e(e){if(e<=e)return o[cb(a,e,0,i)]}function t(){var t=-1;for(a=new Array(i);++t<i;)a[t]=((t+1)*r-(t-i)*n)/(i+1);return e}var n=0,r=1,i=1,a=[.5],o=[0,1];return e.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],t()):[n,r]},e.range=function(e){return arguments.length?(i=(o=Ew.call(e)).length-1,t()):o.slice()},e.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:i<=t?[a[i-1],r]:[a[t-1],a[t]]},e.copy=function(){return ms().domain([n,r]).range(o)},ts(e)}function vs(){function e(e){if(e<=e)return n[cb(t,e,0,r)]}var t=[.5],n=[0,1],r=1;return e.domain=function(i){return arguments.length?(t=Ew.call(i),r=Math.min(t.length,n.length-1),e):t.slice()},e.range=function(i){return arguments.length?(n=Ew.call(i),r=Math.min(t.length,n.length-1),e):n.slice()},e.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},e.copy=function(){return vs().domain(t).range(n)},e}function ys(e){return new Date(e)}function bs(e){return e instanceof Date?+e:+new Date(+e)}function _s(e,t,n,r,i,a,o,u,s){function f(u){return(o(u)<u?p:a(u)<u?g:i(u)<u?m:r(u)<u?v:t(u)<u?n(u)<u?y:b:e(u)<u?_:x)(u)}function c(t,n,r,i){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-n)/t,o=xn(function(e){return e[2]}).right(w,a);o===w.length?(i=On(n/$k,r/$k,t),t=e):o?(i=(o=w[a/w[o-1][2]<w[o][2]/a?o-1:o])[1],t=o[0]):(i=Math.max(On(n,r,t),1),t=u)}return null==i?t:t.every(i)}var l=Gu(Iu,Au),d=l.invert,h=l.domain,p=s(".%L"),g=s(":%S"),m=s("%I:%M"),v=s("%I %p"),y=s("%a %d"),b=s("%b %d"),_=s("%B"),x=s("%Y"),w=[[o,1,zk],[o,5,5*zk],[o,15,15*zk],[o,30,30*zk],[a,1,Nk],[a,5,5*Nk],[a,15,15*Nk],[a,30,30*Nk],[i,1,Dk],[i,3,3*Dk],[i,6,6*Dk],[i,12,12*Dk],[r,1,Pk],[r,2,2*Pk],[n,1,Lk],[t,1,qk],[t,3,3*qk],[e,1,$k]];return l.invert=function(e){return new Date(d(e))},l.domain=function(e){return arguments.length?h(Sw.call(e,bs)):h().map(ys)},l.ticks=function(e,t){var n,r=h(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=c(e,i,a,t))?n.range(i,a+1):[],o?n.reverse():n},l.tickFormat=function(e,t){return null==t?f:s(t)},l.nice=function(e,t){var n=h();return(e=c(e,n[0],n[n.length-1],t))?h(is(n,e)):l},l.copy=function(){return Wu(l,_s(e,t,n,r,i,a,o,u,s))},l}function xs(){return _s(Ny,zy,Cy,Ay,Oy,Ey,Sy,wy,By).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function ws(){return _s(Iy,Fy,qy,Ly,Py,Dy,Sy,wy,Gy).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function ks(){function e(){var e=i().length,r=o[1]<o[0],l=o[r-0],d=o[1-r],h=Lo(e,s,f);t=(d-l)/(h||1),u&&(t=Math.floor(t)),l+=(d-l-t*(e-s))*c,n=t*(1-s),u&&(l=Math.round(l),n=Math.round(n));var p=Mn(e).map(function(e){return l+t*e});return a(r?p.reverse():p)}var t,n,r=Go().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,c=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],c=o[1]<o[0],l=c?a().reverse():a(),d=l.length-1;if(s==s&&f==f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return t=Math.max(0,cb(l,s)-1),r=s===f?t:cb(l,f)-1,s-l[t]>n+1e-10&&++t,c&&(u=t,t=d-r,r=d-u),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return ks().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(c)},e()}function Ms(e){return jk.call(e,function(e){return+e})}function Ss(e,t){return 1<arguments.length?(Ik[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):Ik.hasOwnProperty(e)?Ik[e]:void 0;var n,r}function Es(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Os(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function As(e){return fk(e[e.length-1])}function Cs(e){(e<0||1<e)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return uS.h=360*e-100,uS.s=1.5-1.5*t,uS.l=.8-.9*t,uS+""}function Rs(e){var t;return e=(.5-e)*Math.PI,sS.r=255*(t=Math.sin(e))*t,sS.g=255*(t=Math.sin(e+fS))*t,sS.b=255*(t=Math.sin(e+cS))*t,sS+""}function Ts(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function zs(e,t){vS[e]=gS["interpolate"+t],mS[e]=gS["scheme"+t]}function Ns(e,t){if(1<arguments.length)return vS[e]=t,this;var n=e.split("-");return e=n[0],(n=+n[1]+1)&&mS.hasOwnProperty(e)?mS[e][n-1]:!n&&vS.hasOwnProperty(e)?vS[e]:void 0}function Ds(e,t){var n=t-e;return function(t){return e+t*n}}function Ps(e,t){var n,r,i;return s(t)&&(n=t.step,t=t.interval),f(t)&&(t="time"===e.type?(i=t,yS.hasOwnProperty(i)&&yS[i]):"utc"===e.type?(r=t,bS.hasOwnProperty(r)&&bS[r]):o("Only time and utc scales accept interval strings."),n&&(t=t.every(n))),t}function Ls(e,t,n){var r=e.range(),i=r[0],a=p(r);if(a<i&&(r=a,a=i,i=r),t=t.filter(function(t){return!((t=e(t))<i||a<t)}),0<n&&1<t.length){for(var o=[t[0],p(t)];t.length>n&&3<=t.length;)t=t.filter(function(e,t){return!(t%2)});t.length<3&&(t=o)}return t}function qs(e,t){return e.ticks?e.ticks(t):e.domain()}function $s(e,t,n){var r,i,a=e.tickFormat?e.tickFormat(t,n):n?Ak(n):String;return e.type===cw?(r=a,i=function(e){var t=Vu(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return n=Ak(t),r=Ak(".1f")(1)[1],function(e){var t,i,a=n(e),o=a.indexOf(r);if(o<0)return a;for(t=function(e,t){var n,r=e.lastIndexOf("e");if(0<r)return r;for(r=e.length;--r>t;)if(48<=(n=e.charCodeAt(r))&&n<=57)return r+1}(a,o),i=t<a.length?a.slice(t):"";--t>o;)if("0"!==a[t]){++t;break}return a.slice(0,t)+i}}return Ak(t);var n,r}(n),function(e){return r(e)?i(e):""}):a}function js(e){sn.call(this,null,e)}function Fs(e){sn.call(this,null,e)}function Is(){return te({})}function Us(e){return e.exit}function Bs(e){sn.call(this,null,e)}function Ws(e,t,n){return n===_S&&xS[e.type]?(a=t,function(e,t,n){var r=n[t+1]||n.max||1/0,i=Gs(e,a),o=Gs(r,a);return i&&o?i+""+o:o?"< "+o:" "+i}):"discrete"===n?(i=t,function(e,t){return t?i(e):null}):(r=t,function(e){return r(e)});var r,i,a}function Gs(e,t){return isFinite(e)?t(e):null}function Ys(e){sn.call(this,[],e)}function Hs(e){return e.source.x}function Vs(e){return e.source.y}function Xs(e){return e.target.x}function Zs(e){return e.target.y}function Js(e){sn.call(this,{},e)}function Qs(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function Ks(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function ef(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function tf(e){sn.call(this,null,e)}function nf(e){sn.call(this,null,e),this.modified(!0)}function rf(e,t,n){return A(e)&&(t||n)?(r=e,i=af(t||[0,1],n),a=i[0],o=p(i)-a,function(e){return r(a+e*o)}):e;var r,i,a,o}function af(e,t){return t?e.slice().reverse():e}function of(e){sn.call(this,null,e)}function uf(e){sn.call(this,null,e)}function sf(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)(a=e[s])[r]=o,a[i]=o+=Math.abs(n(a))}function ff(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,f=0,c=0;f<s;++f)(a=e[f])[r]=u,a[i]=u=o*(c+=Math.abs(n(a)))}function cf(e,t,n,r,i){for(var a,o,u=0,s=0,f=e.length,c=0;c<f;++c)(a=n(o=e[c]))<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function lf(e,t){return e-t}function df(e){return function(){return e}}function hf(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=pf(e,t[r]))return n;return 0}function pf(e,t){for(var n,r,i,a,o,u,s,f,c,l,d=t[0],h=t[1],p=-1,g=0,m=e.length,v=m-1;g<m;v=g++){var y=e[g],b=y[0],_=y[1],x=e[v],w=x[0],k=x[1];if(l=void 0,a=s=y,u=c=t,((o=f=x)[0]-a[0])*(u[1]-a[1])==(u[0]-a[0])*(o[1]-a[1])&&(n=s[l=+(s[0]===f[0])],r=c[l],i=f[l],n<=r&&r<=i||i<=r&&r<=n))return 0;h<_!=h<k&&d<(w-b)*(h-_)/(k-_)+b&&(p=-p)}return p}function gf(){}function mf(){function e(e){var n=o(e);if(Array.isArray(n))n=n.slice().sort(lf);else{var r=kn(e),i=r[0],a=r[1];n=On(i,a,n),n=Mn(Math.floor(i/n)*n,Math.floor(a/n)*n,n)}return n.map(function(n){return t(e,n)})}function t(e,t){var r=[],o=[];return function(e,t,r){function o(e){var t,i,a=[e[0][0]+u,e[0][1]+s],o=[e[1][0]+u,e[1][1]+s],f=n(a),c=n(o);(t=p[f])?(i=h[c])?(delete p[t.end],delete h[i.start],t===i?(t.ring.push(o),r(t.ring)):h[t.start]=p[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete p[t.end],t.ring.push(o),p[t.end=c]=t):(t=h[c])?(i=p[f])?(delete h[t.start],delete p[i.end],t===i?(t.ring.push(o),r(t.ring)):h[i.start]=p[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(a),h[t.start=f]=t):h[f]=p[c]={start:f,end:c,ring:[a,o]}}var u,s,f,c,l,d,h=new Array,p=new Array;for(u=s=-1,c=e[0]>=t,RS[c<<1].forEach(o);++u<i-1;)f=c,c=e[u+1]>=t,RS[f|c<<1].forEach(o);for(RS[c<<0].forEach(o);++s<a-1;){for(u=-1,c=e[s*i+i]>=t,l=e[s*i]>=t,RS[c<<1|l<<2].forEach(o);++u<i-1;)f=c,c=e[s*i+i+u+1]>=t,d=l,l=e[s*i+u+1]>=t,RS[f|c<<1|l<<2|d<<3].forEach(o);RS[c|l<<3].forEach(o)}for(u=-1,l=e[s*i]>=t,RS[l<<2].forEach(o);++u<i-1;)d=l,l=e[s*i+u+1]>=t,RS[l<<2|d<<3].forEach(o);RS[l<<3].forEach(o)}(e,t,function(n){u(n,e,t),0<function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(n)?r.push([n]):o.push(n)}),o.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(-1!==hf((t=r[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:t,coordinates:r}}function n(e){return 2*e[0]+e[1]*(i+1)*4}function r(e,t,n){e.forEach(function(e){var r,o=e[0],u=e[1],s=0|o,f=0|u,c=t[f*i+s];0<o&&o<i&&s===o&&(r=t[f*i+s-1],e[0]=o+(n-r)/(c-r)-.5),0<u&&u<a&&f===u&&(r=t[(f-1)*i+s],e[1]=u+(n-r)/(c-r)-.5)})}var i=1,a=1,o=An,u=r;return e.contour=t,e.size=function(t){if(!arguments.length)return[i,a];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(0<n&&0<r))throw new Error("invalid size");return i=n,a=r,e},e.thresholds=function(t){return arguments.length?(o="function"==typeof t?t:df(Array.isArray(t)?CS.call(t):t),e):o},e.smooth=function(t){return arguments.length?(u=t?r:gf,e):u===r},e}function vf(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=e.data[u+o*r]),n<=u&&(a<=u&&(s-=e.data[u-a+o*r]),t.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function yf(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=e.data[o+u*r]),n<=u&&(a<=u&&(s-=e.data[o+(u-a)*r]),t.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function bf(e){return e[0]}function _f(e){return e[1]}function xf(e){sn.call(this,null,e)}function wf(e){sn.call(this,null,e)}function kf(){return new Mf}function Mf(){this.reset()}function Sf(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}function Ef(e){return 1<e?0:e<-1?hE:Math.acos(e)}function Of(e){return 1<e?pE:e<-1?-pE:Math.asin(e)}function Af(){}function Cf(e,t){e&&zE.hasOwnProperty(e.type)&&zE[e.type](e,t)}function Rf(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Tf(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Rf(e[n],t,1);t.polygonEnd()}function zf(e,t){e&&TE.hasOwnProperty(e.type)?TE[e.type](e,t):Cf(e,t)}function Nf(){PE.point=Pf}function Df(){Lf(DS,PS)}function Pf(e,t){PE.point=Lf,DS=e,PS=t,LS=e*=yE,qS=wE(t=(t*=yE)/2+gE),$S=OE(t)}function Lf(e,t){var n=(e*=yE)-LS,r=0<=n?1:-1,i=r*n,a=wE(t=(t*=yE)/2+gE),o=OE(t),u=$S*o,s=qS*a+u*wE(i),f=u*r*OE(i);NE.add(xE(f,s)),LS=e,qS=a,$S=o}function qf(e){return[xE(e[1],e[0]),Of(e[2])]}function $f(e){var t=e[0],n=e[1],r=wE(n);return[r*wE(t),r*OE(t),OE(n)]}function jf(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ff(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function If(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Uf(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Bf(e){var t=CE(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Wf(e,t){HS.push(VS=[jS=e,IS=e]),t<FS&&(FS=t),US<t&&(US=t)}function Gf(e,t){var n=$f([e*yE,t*yE]);if(YS){var r=Ff(YS,n),i=Ff([r[1],-r[0],0],r);Bf(i),i=qf(i);var a,o=e-BS,u=0<o?1:-1,s=i[0]*vE*u,f=180<bE(o);f^(u*BS<s&&s<u*e)?(a=i[1]*vE,US<a&&(US=a)):f^(u*BS<(s=(s+360)%360-180)&&s<u*e)?(a=-i[1]*vE)<FS&&(FS=a):(t<FS&&(FS=t),US<t&&(US=t)),f?e<BS?Jf(jS,e)>Jf(jS,IS)&&(IS=e):Jf(e,IS)>Jf(jS,IS)&&(jS=e):jS<=IS?(e<jS&&(jS=e),IS<e&&(IS=e)):BS<e?Jf(jS,e)>Jf(jS,IS)&&(IS=e):Jf(e,IS)>Jf(jS,IS)&&(jS=e)}else HS.push(VS=[jS=e,IS=e]);t<FS&&(FS=t),US<t&&(US=t),YS=n,BS=e}function Yf(){qE.point=Gf}function Hf(){VS[0]=jS,VS[1]=IS,qE.point=Wf,YS=null}function Vf(e,t){if(YS){var n=e-BS;LE.add(180<bE(n)?n+(0<n?360:-360):n)}else WS=e,GS=t;PE.point(e,t),Gf(e,t)}function Xf(){PE.lineStart()}function Zf(){Vf(WS,GS),PE.lineEnd(),bE(LE)>dE&&(jS=-(IS=180)),VS[0]=jS,VS[1]=IS,YS=null}function Jf(e,t){return(t-=e)<0?t+360:t}function Qf(e,t){return e[0]-t[0]}function Kf(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ec(e,t){e*=yE;var n=wE(t*=yE);tc(n*wE(e),n*OE(e),OE(t))}function tc(e,t,n){JS+=(e-JS)/++XS,QS+=(t-QS)/XS,KS+=(n-KS)/XS}function nc(){$E.point=rc}function rc(e,t){e*=yE;var n=wE(t*=yE);sE=n*wE(e),fE=n*OE(e),
cE=OE(t),$E.point=ic,tc(sE,fE,cE)}function ic(e,t){e*=yE;var n=wE(t*=yE),r=n*wE(e),i=n*OE(e),a=OE(t),o=xE(CE((o=fE*a-cE*i)*o+(o=cE*r-sE*a)*o+(o=sE*i-fE*r)*o),sE*r+fE*i+cE*a);ZS+=o,eE+=o*(sE+(sE=r)),tE+=o*(fE+(fE=i)),nE+=o*(cE+(cE=a)),tc(sE,fE,cE)}function ac(){$E.point=ec}function oc(){$E.point=sc}function uc(){fc(oE,uE),$E.point=ec}function sc(e,t){oE=e,uE=t,e*=yE,t*=yE,$E.point=fc;var n=wE(t);sE=n*wE(e),fE=n*OE(e),cE=OE(t),tc(sE,fE,cE)}function fc(e,t){e*=yE;var n=wE(t*=yE),r=n*wE(e),i=n*OE(e),a=OE(t),o=fE*a-cE*i,u=cE*r-sE*a,s=sE*i-fE*r,f=CE(o*o+u*u+s*s),c=Of(f),l=f&&-c/f;rE+=l*o,iE+=l*u,aE+=l*s,ZS+=c,eE+=c*(sE+(sE=r)),tE+=c*(fE+(fE=i)),nE+=c*(cE+(cE=a)),tc(sE,fE,cE)}function cc(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function lc(e,t){return[hE<e?e-mE:e<-hE?e+mE:e,t]}function dc(e,t,n){return(e%=mE)?t||n?cc(pc(e),gc(t,n)):pc(e):t||n?gc(t,n):lc}function hc(e){return function(t,n){return[hE<(t+=e)?t-mE:t<-hE?t+mE:t,n]}}function pc(e){var t=hc(e);return t.invert=hc(-e),t}function gc(e,t){function n(e,t){var n=wE(t),u=wE(e)*n,s=OE(e)*n,f=OE(t),c=f*r+u*i;return[xE(s*a-c*o,u*r-f*i),Of(c*a+s*o)]}var r=wE(e),i=OE(e),a=wE(t),o=OE(t);return n.invert=function(e,t){var n=wE(t),u=wE(e)*n,s=OE(e)*n,f=OE(t),c=f*a-s*o;return[xE(s*a+f*o,u*r+c*i),Of(c*r-u*i)]},n}function mc(e,t){(t=$f(t))[0]-=e,Bf(t);var n=Ef(-t[1]);return((-t[2]<0?-n:n)+mE-dE)%mE}function vc(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:Af,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function yc(e,t){return bE(e[0]-t[0])<dE&&bE(e[1]-t[1])<dE}function bc(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function _c(e,t,n,r,i){var a,o,u=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(yc(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);i.lineEnd()}else u.push(n=new bc(r,e,null,!0)),s.push(n.o=new bc(r,null,n,!1)),u.push(n=new bc(o,e,null,!1)),s.push(n.o=new bc(o,null,n,!0))}}),u.length){for(s.sort(t),xc(u),xc(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var f,c,l=u[0];;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;f=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=f.length;a<o;++a)i.point((c=f[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(f=d.p.z,a=f.length-1;0<=a;--a)i.point((c=f[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}f=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function xc(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function wc(e,t,n,r){return function(i){function a(t,n){e(t,n)&&i.point(t,n)}function o(e,t){g.point(e,t)}function u(){b.point=o,g.lineStart()}function s(){b.point=a,g.lineEnd()}function f(e,t){p.push([e,t]),v.point(e,t)}function c(){v.lineStart(),p=[]}function l(){f(p[0][0],p[0][1]),v.lineEnd();var e,t,n,r,a=v.clean(),o=m.result(),u=o.length;if(p.pop(),d.push(p),p=null,u)if(1&a){if(0<(t=(n=o[0]).length-1)){for(y||(i.polygonStart(),y=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else 1<u&&2&a&&o.push(o.pop().concat(o.shift())),h.push(o.filter(kc))}var d,h,p,g=t(i),m=vc(),v=t(m),y=!1,b={point:a,lineStart:u,lineEnd:s,polygonStart:function(){b.point=f,b.lineStart=c,b.lineEnd=l,h=[],d=[]},polygonEnd:function(){b.point=a,b.lineStart=u,b.lineEnd=s,h=Tn(h);var e=function(e,t){var n=t[0],r=t[1],i=OE(r),a=[OE(n),-wE(n),0],o=0,u=0;jE.reset(),1===i?r=pE+dE:-1===i&&(r=-pE-dE);for(var s=0,f=e.length;s<f;++s)if(l=(c=e[s]).length)for(var c,l,d=c[l-1],h=d[0],p=d[1]/2+gE,g=OE(p),m=wE(p),v=0;v<l;++v,h=b,g=x,m=w,d=y){var y=c[v],b=y[0],_=y[1]/2+gE,x=OE(_),w=wE(_),k=b-h,M=0<=k?1:-1,S=M*k,E=hE<S,O=g*x;if(jE.add(xE(O*M*OE(S),m*w+O*wE(S))),o+=E?k+M*mE:k,E^n<=h^n<=b){var A=Ff($f(d),$f(y));Bf(A);var C=Ff(a,A);Bf(C);var R=(E^0<=k?-1:1)*Of(C[2]);(R<r||r===R&&(A[0]||A[1]))&&(u+=E^0<=k?1:-1)}}return(o<-dE||o<dE&&jE<-dE)^1&u}(d,r);h.length?(y||(i.polygonStart(),y=!0),_c(h,Mc,e,n,i)):e&&(y||(i.polygonStart(),y=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),y&&(i.polygonEnd(),y=!1),h=d=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return b}}function kc(e){return 1<e.length}function Mc(e,t){return((e=e.x)[0]<0?e[1]-pE-dE:pE-e[1])-((t=t.x)[0]<0?t[1]-pE-dE:pE-t[1])}function Sc(e){function t(e,t){return wE(e)*wE(t)>i}function n(e,t,n){var r=[1,0,0],a=Ff($f(e),$f(t)),o=jf(a,a),u=a[0],s=o-u*u;if(!s)return!n&&e;var f=i*o/s,c=-i*u/s,l=Ff(r,a),d=Uf(r,f);If(d,Uf(a,c));var h=l,p=jf(d,h),g=jf(h,h),m=p*p-g*(jf(d,d)-1);if(!(m<0)){var v=CE(m),y=Uf(h,(-p-v)/g);if(If(y,d),y=qf(y),!n)return y;var b,_=e[0],x=t[0],w=e[1],k=t[1];x<_&&(b=_,_=x,x=b);var M=x-_,S=bE(M-hE)<dE;if(!S&&k<w&&(b=w,w=k,k=b),S||M<dE?S?0<w+k^y[1]<(bE(y[0]-_)<dE?w:k):w<=y[1]&&y[1]<=k:hE<M^(_<=y[0]&&y[0]<=x)){var E=Uf(h,(-p+v)/g);return If(E,d),[y,qf(E)]}}}function r(t,n){var r=o?e:hE-e,i=0;return t<-r?i|=1:r<t&&(i|=2),n<-r?i|=4:r<n&&(i|=8),i}var i=wE(e),a=6*yE,o=0<i,u=bE(i)>dE;return wc(t,function(e){var i,a,s,f,c;return{lineStart:function(){f=s=!1,c=1},point:function(l,d){var h,p=[l,d],g=t(l,d),m=o?g?0:r(l,d):g?r(l+(l<0?hE:-hE),d):0;if(!i&&(f=s=g)&&e.lineStart(),g!==s&&(!(h=n(i,p))||yc(i,h)||yc(p,h))&&(p[0]+=dE,p[1]+=dE,g=t(p[0],p[1])),g!==s)c=0,g?(e.lineStart(),h=n(p,i),e.point(h[0],h[1])):(h=n(i,p),e.point(h[0],h[1]),e.lineEnd()),i=h;else if(u&&i&&o^g){var v;m&a||!(v=n(p,i,!0))||(c=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||i&&yc(i,p)||e.point(p[0],p[1]),i=p,s=g,a=m},lineEnd:function(){s&&e.lineEnd(),i=null},clean:function(){return c|(f&&s)<<1}}},function(t,n,r,i){!function(e,t,n,r,i,a){if(n){var o=wE(t),u=OE(t),s=r*n;null==i?(i=t+r*mE,a=t-s/2):(i=mc(o,i),a=mc(o,a),(0<r?i<a:a<i)&&(i+=r*mE));for(var f,c=i;0<r?a<c:c<a;c-=s)f=qf([o,-u*wE(c),-u*OE(c)]),e.point(f[0],f[1])}}(i,e,a,r,t,n)},o?[0,-e]:[-hE,e-hE])}function Ec(e,t,n,r){function i(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function a(i,a,u,f){var c=0,l=0;if(null==i||(c=o(i,u))!==(l=o(a,u))||s(i,a)<0^0<u)for(;f.point(0===c||3===c?e:n,1<c?r:t),(c=(c+u+4)%4)!==l;);else f.point(a[0],a[1])}function o(r,i){return bE(r[0]-e)<dE?0<i?0:3:bE(r[0]-n)<dE?0<i?2:1:bE(r[1]-t)<dE?0<i?1:0:0<i?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){function s(e,t){i(e,t)&&x.point(e,t)}function f(a,o){var u=i(a,o);if(l&&d.push([a,o]),b)h=a,p=o,b=!1,(g=u)&&(x.lineStart(),x.point(a,o));else if(u&&y)x.point(a,o);else{var s=[m=Math.max(UE,Math.min(IE,m)),v=Math.max(UE,Math.min(IE,v))],f=[a=Math.max(UE,Math.min(IE,a)),o=Math.max(UE,Math.min(IE,o))];!function(e,t,n,r,i,a){var o,u=e[0],s=e[1],f=0,c=1,l=t[0]-u,d=t[1]-s;if(o=n-u,l||!(0<o)){if(o/=l,l<0){if(o<f)return;o<c&&(c=o)}else if(0<l){if(c<o)return;f<o&&(f=o)}if(o=i-u,l||!(o<0)){if(o/=l,l<0){if(c<o)return;f<o&&(f=o)}else if(0<l){if(o<f)return;o<c&&(c=o)}if(o=r-s,d||!(0<o)){if(o/=d,d<0){if(o<f)return;o<c&&(c=o)}else if(0<d){if(c<o)return;f<o&&(f=o)}if(o=a-s,d||!(o<0)){if(o/=d,d<0){if(c<o)return;f<o&&(f=o)}else if(0<d){if(o<f)return;o<c&&(c=o)}return 0<f&&(e[0]=u+f*l,e[1]=s+f*d),c<1&&(t[0]=u+c*l,t[1]=s+c*d),!0}}}}}(s,f,e,t,n,r)?u&&(x.lineStart(),x.point(a,o),_=!1):(y||(x.lineStart(),x.point(s[0],s[1])),x.point(f[0],f[1]),u||x.lineEnd(),_=!1)}m=a,v=o,y=u}var c,l,d,h,p,g,m,v,y,b,_,x=o,w=vc(),k={point:s,lineStart:function(){k.point=f,l&&l.push(d=[]),b=!0,y=!1,m=v=NaN},lineEnd:function(){c&&(f(h,p),g&&y&&w.rejoin(),c.push(w.result())),k.point=s,y&&x.lineEnd()},polygonStart:function(){x=w,c=[],l=[],_=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var a,o,u=l[n],s=1,f=u.length,c=u[0],d=c[0],h=c[1];s<f;++s)a=d,o=h,c=u[s],d=c[0],h=c[1],o<=r?r<h&&(h-o)*(e-a)<(d-a)*(r-o)&&++t:h<=r&&(d-a)*(r-o)<(h-o)*(e-a)&&--t;return t}(),n=_&&t,i=(c=Tn(c)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&_c(c,u,t,a,o),o.polygonEnd()),x=o,c=l=d=null}};return k}}function Oc(e,t,n){var r=Mn(e,t-dE,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function Ac(e,t,n){var r=Mn(e,t-dE,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Cc(e){return e}function Rc(){KE.point=Tc}function Tc(e,t){KE.point=zc,BE=GE=e,WE=YE=t}function zc(e,t){QE.add(YE*e-GE*t),GE=e,YE=t}function Nc(){zc(BE,WE)}function Dc(e,t){aO+=e,oO+=t,++uO}function Pc(){pO.point=Lc}function Lc(e,t){pO.point=qc,Dc(XE=e,ZE=t)}function qc(e,t){var n=e-XE,r=t-ZE,i=CE(n*n+r*r);sO+=i*(XE+e)/2,fO+=i*(ZE+t)/2,cO+=i,Dc(XE=e,ZE=t)}function $c(){pO.point=Dc}function jc(){pO.point=Ic}function Fc(){Uc(HE,VE)}function Ic(e,t){pO.point=Uc,Dc(HE=XE=e,VE=ZE=t)}function Uc(e,t){var n=e-XE,r=t-ZE,i=CE(n*n+r*r);sO+=i*(XE+e)/2,fO+=i*(ZE+t)/2,cO+=i,lO+=(i=ZE*e-XE*t)*(XE+e),dO+=i*(ZE+t),hO+=3*i,Dc(XE=e,ZE=t)}function Bc(e){this._context=e}function Wc(e,t){xO.point=Gc,mO=yO=e,vO=bO=t}function Gc(e,t){yO-=e,bO-=t,_O.add(CE(yO*yO+bO*bO)),yO=e,bO=t}function Yc(){this._string=[]}function Hc(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Vc(e,t){function n(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),zf(e,r(i))),i.result()}var r,i,a=4.5;return n.area=function(e){return zf(e,r(KE)),KE.result()},n.measure=function(e){return zf(e,r(xO)),xO.result()},n.bounds=function(e){return zf(e,r(iO)),iO.result()},n.centroid=function(e){return zf(e,r(pO)),pO.result()},n.projection=function(t){return arguments.length?(r=null==t?(e=null,Cc):(e=t).stream,n):e},n.context=function(e){return arguments.length?(i=null==e?(t=null,new Yc):new Bc(t=e),"function"!=typeof a&&i.pointRadius(a),n):t},n.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),n):a},n.projection(e).context(t)}function Xc(e){return function(t){var n=new Zc;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Zc(){}function Jc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),zf(n,e.stream(iO)),t(iO.result()),null!=r&&e.clipExtent(r),e}function Qc(e,t,n){return Jc(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,u])},n)}function Kc(e,t,n){return Qc(e,[[0,0],t],n)}function el(e,t,n){return Jc(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])},n)}function tl(e,t,n){return Jc(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])},n)}function nl(e,t){return+t?function(e,t){function n(r,i,a,o,u,s,f,c,l,d,h,p,g,m){var v=f-r,y=c-i,b=v*v+y*y;if(4*t<b&&g--){var _=o+d,x=u+h,w=s+p,k=CE(_*_+x*x+w*w),M=Of(w/=k),S=bE(bE(w)-1)<dE||bE(a-l)<dE?(a+l)/2:xE(x,_),E=e(S,M),O=E[0],A=E[1],C=O-r,R=A-i,T=y*C-v*R;(t<T*T/b||.3<bE((v*C+y*R)/b-.5)||o*d+u*h+s*p<kO)&&(n(r,i,a,o,u,s,O,A,S,_/=k,x/=k,w,g,m),m.point(O,A),n(O,A,S,_,x,w,f,c,l,d,h,p,g,m))}}return function(t){function r(n,r){n=e(n,r),t.point(n[0],n[1])}function i(){v=NaN,w.point=a,t.lineStart()}function a(r,i){var a=$f([r,i]),o=e(r,i);n(v,y,m,b,_,x,v=o[0],y=o[1],m=r,b=a[0],_=a[1],x=a[2],wO,t),t.point(v,y)}function o(){w.point=r,t.lineEnd()}function u(){i(),w.point=s,w.lineEnd=f}function s(e,t){a(c=e,t),l=v,d=y,h=b,p=_,g=x,w.point=a}function f(){n(v,y,m,b,_,x,l,d,c,h,p,g,wO,t),(w.lineEnd=o)()}var c,l,d,h,p,g,m,v,y,b,_,x,w={point:r,lineStart:i,lineEnd:o,polygonStart:function(){t.polygonStart(),w.lineStart=u},polygonEnd:function(){t.polygonEnd(),w.lineStart=i}};return w}}(e,t):(n=e,Xc({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}));var n}function rl(e,t,n,r){function i(e,r){return[u*e-s*r+t,n-s*e-u*r]}var a=wE(r),o=OE(r),u=a*e,s=o*e,f=a/e,c=o/e,l=(o*n-a*t)/e,d=(o*t+a*n)/e;return i.invert=function(e,t){return[f*e-c*t+l,d-c*e-f*t]},i}function il(e){return al(function(){return e})()}function al(e){function t(e){return d(e[0]*yE,e[1]*yE)}function n(e){return(e=d.invert(e[0],e[1]))&&[e[0]*vE,e[1]*vE]}function r(){var e=rl(g,0,0,k).apply(null,a(y,b)),t=(k?rl:function(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r})(g,m-e[0],v-e[1],k);return o=dc(_,x,w),l=cc(a,t),d=cc(o,l),c=nl(l,A),i()}function i(){return h=p=null,t}var a,o,u,s,f,c,l,d,h,p,g=150,m=480,v=250,y=0,b=0,_=0,x=0,w=0,k=0,M=null,S=FE,E=null,O=Cc,A=.5;return t.stream=function(e){return h&&p===e?h:h=MO((t=o,Xc({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})(S(c(O(p=e))))));var t},t.preclip=function(e){return arguments.length?(S=e,M=void 0,i()):S},t.postclip=function(e){return arguments.length?(O=e,E=u=s=f=null,i()):O},t.clipAngle=function(e){return arguments.length?(S=+e?Sc(M=e*yE):(M=null,FE),i()):M*vE},t.clipExtent=function(e){return arguments.length?(O=null==e?(E=u=s=f=null,Cc):Ec(E=+e[0][0],u=+e[0][1],s=+e[1][0],f=+e[1][1]),i()):null==E?null:[[E,u],[s,f]]},t.scale=function(e){return arguments.length?(g=+e,r()):g},t.translate=function(e){return arguments.length?(m=+e[0],v=+e[1],r()):[m,v]},t.center=function(e){return arguments.length?(y=e[0]%360*yE,b=e[1]%360*yE,r()):[y*vE,b*vE]},t.rotate=function(e){return arguments.length?(_=e[0]%360*yE,x=e[1]%360*yE,w=2<e.length?e[2]%360*yE:0,r()):[_*vE,x*vE,w*vE]},t.angle=function(e){return arguments.length?(k=e%360*yE,r()):k*vE},t.precision=function(e){return arguments.length?(c=nl(l,A=e*e),i()):CE(A)},t.fitExtent=function(e,n){return Qc(t,e,n)},t.fitSize=function(e,n){return Kc(t,e,n)},t.fitWidth=function(e,n){return el(t,e,n)},t.fitHeight=function(e,n){return tl(t,e,n)},function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function ol(e){var t=0,n=hE/3,r=al(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*yE,n=e[1]*yE):[t*vE,n*vE]},i}function ul(e,t){function n(e,t){var n=CE(a-2*i*OE(t))/i;return[n*OE(e*=i),o-n*wE(e)]}var r=OE(e),i=(r+OE(t))/2;if(bE(i)<dE)return function(e){function t(e,t){return[e*n,OE(t)/n]}var n=wE(e);return t.invert=function(e,t){return[e/n,Of(t*n)]},t}(e);var a=1+r*(2*i-r),o=CE(a)/i;return n.invert=function(e,t){var n=o-t;return[xE(e,bE(n))/i*AE(n),Of((a-(e*e+n*n)*i*i)/(2*i))]},n}function sl(){return ol(ul).scale(155.424).center([0,33.6442])}function fl(){return sl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function cl(e){return function(t,n){var r=wE(t),i=wE(n),a=e(r*i);return[a*i*OE(t),a*OE(n)]}}function ll(e){return function(t,n){var r=CE(t*t+n*n),i=e(r),a=OE(i),o=wE(i);return[xE(t*a,r*o),Of(r&&n*a/r)]}}function dl(e,t){return[e,SE(RE((pE+t)/2))]}function hl(e){function t(){var t=hE*u(),o=a(function(e){function t(t){return(t=e(t[0]*yE,t[1]*yE))[0]*=vE,t[1]*=vE,t}return e=dc(e[0]*yE,e[1]*yE,2<e.length?e[2]*yE:0),t.invert=function(t){return(t=e.invert(t[0]*yE,t[1]*yE))[0]*=vE,t[1]*=vE,t},t}(a.rotate()).invert([0,0]));return f(null==c?[[o[0]-t,o[1]-t],[o[0]+t,o[1]+t]]:e===dl?[[Math.max(o[0]-t,c),n],[Math.min(o[0]+t,r),i]]:[[c,Math.max(o[1]-t,n)],[r,Math.min(o[1]+t,i)]])}var n,r,i,a=il(e),o=a.center,u=a.scale,s=a.translate,f=a.clipExtent,c=null;return a.scale=function(e){return arguments.length?(u(e),t()):u()},a.translate=function(e){return arguments.length?(s(e),t()):s()},a.center=function(e){return arguments.length?(o(e),t()):o()},a.clipExtent=function(e){return arguments.length?(null==e?c=n=r=i=null:(c=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),t()):null==c?null:[[c,n],[r,i]]},t()}function pl(e){return RE((pE+e)/2)}function gl(e,t){function n(e,t){0<a?t<-pE+dE&&(t=-pE+dE):pE-dE<t&&(t=pE-dE);var n=a/EE(pl(t),i);return[n*OE(i*e),a-n*wE(i*e)]}var r=wE(e),i=e===t?OE(e):SE(r/wE(t))/SE(pl(t)/pl(e)),a=r*EE(pl(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,r=AE(i)*CE(e*e+n*n);return[xE(e,bE(n))/i*AE(n),2*_E(EE(a/r,1/i))-pE]},n):dl}function ml(e,t){return[e,t]}function vl(e,t){function n(e,t){var n=a-t,r=i*e;return[n*OE(r),a-n*wE(r)]}var r=wE(e),i=e===t?OE(e):(r-wE(t))/(t-e),a=r/i+e;return bE(i)<dE?ml:(n.invert=function(e,t){var n=a-t;return[xE(e,bE(n))/i*AE(n),a-AE(i)*CE(e*e+n*n)]},n)}function yl(e,t){var n=wE(t),r=wE(e)*n;return[n*OE(e)/r,OE(t)/r]}function bl(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?Cc:Xc({point:function(i,a){this.stream.point(i*e+n,a*t+r)}})}function _l(e,t){return[wE(t)*OE(e),OE(t)]}function xl(e,t){var n=wE(t),r=1+wE(e)*n;return[n*OE(e)/r,OE(t)/r]}function wl(e,t){return[SE(RE((pE+t)/2)),-e]}function kl(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),1<arguments.length?(CO[e]=(n=e,r=t,function e(){var t=r();return t.type=n,t.path=Vc().projection(t),t.copy=t.copy||function(){var n=e();return AO.forEach(function(e){t.hasOwnProperty(e)&&n[e](t[e]())}),n.path.pointRadius(t.path.pointRadius()),n},t}),this):CO.hasOwnProperty(e)?CO[e]:null;var n,r}function Ml(e){return e&&e.path||OO}function Sl(e){sn.call(this,null,e)}function El(e){sn.call(this,null,e)}function Ol(e){sn.call(this,null,e)}function Al(e){sn.call(this,[],e),this.generator=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Mn(kE(a/m)*m,i,m).map(d).concat(Mn(kE(f/v)*v,s,v).map(h)).concat(Mn(kE(r/p)*p,n,p).filter(function(e){return bE(e%m)>dE}).map(c)).concat(Mn(kE(u/g)*g,o,g).filter(function(e){return bE(e%v)>dE}).map(l))}var n,r,i,a,o,u,s,f,c,l,d,h,p=10,g=p,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(s).slice(1),d(i).reverse().slice(1),h(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],f=+t[0][1],s=+t[1][1],i<a&&(t=a,a=i,i=t),s<f&&(t=f,f=s,s=t),e.precision(y)):[[a,f],[i,s]]},e.extentMinor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],n<r&&(t=r,r=n,n=t),o<u&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.stepMinor=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(y=+t,c=Oc(u,o,90),l=Ac(r,n,y),d=Oc(f,s,90),h=Ac(a,i,y),e):y},e.extentMajor([[-180,-90+dE],[180,90-dE]]).extentMinor([[-180,-80-dE],[180,80+dE]])}()}function Cl(e){sn.call(this,null,e),this.modified(!0)}function Rl(e,t,n){A(e[t])&&e[t](n)}function Tl(e){return function(){return e}}function zl(){return 1e-6*(Math.random()-.5)}function Nl(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,u,s,f,c,l,d,h=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((f=t>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o,!(h=(i=h)[l=c<<1|f]))return i[l]=p,e;if(u=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===u&&n===s)return p.next=h,i?i[l]=p:e._root=p,e;for(;i=i?i[l]=new Array(4):e._root=new Array(4),(f=t>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o,(l=c<<1|f)==(d=(o<=s)<<1|a<=u););return i[d]=h,i[l]=p,e}function Dl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Pl(e){return e[0]}function Ll(e){return e[1]}function ql(e,t,n){var r=new $l(null==t?Pl:t,null==n?Ll:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function $l(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function jl(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}function Fl(e){return e.x+e.vx}function Il(e){return e.y+e.vy}function Ul(e){return e.index}function Bl(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function Wl(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new Gl(r)}function Gl(e){this._=e}function Yl(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Hl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=NO,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function Vl(){return IO||(WO(Xl),IO=BO.now()+UO)}function Xl(){IO=0}function Zl(){this._call=this._time=this._next=null}function Jl(e,t,n){var r=new Zl;return r.restart(e,t,n),r}function Ql(){IO=(FO=BO.now())+UO,LO=qO=0;try{!function(){Vl(),++LO;for(var e,t=DO;t;)0<=(e=IO-t._time)&&t._call.call(null,e),t=t._next;--LO}()}finally{LO=0,function(){for(var e,t,n=DO,r=1/0;n;)n._call?(r>n._time&&(r=n._time),n=(e=n)._next):(t=n._next,n._next=null,n=e?e._next=t:DO=t);PO=e,ed(r)}(),IO=0}}function Kl(){var e=BO.now(),t=e-FO;jO<t&&(UO-=t,FO=e)}function ed(e){LO||(qO&&(qO=clearTimeout(qO)),24<e-IO?(e<1/0&&(qO=setTimeout(Ql,e-BO.now()-UO)),$O&&($O=clearInterval($O))):($O||(FO=BO.now(),$O=setInterval(Kl,jO)),LO=1,WO(Ql)))}function td(e){return e.x}function nd(e){return e.y}function rd(e){sn.call(this,null,e)}function id(e,t,n,r){var i,a,o,u,s=O(t.forces);for(i=0,a=XO.length;i<a;++i)(o=XO[i])!==VO&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u=VO+i,(o=n||t.modified(VO,i)?od(s[i]):r&&ad(s[i],r)?e.force(u):null)&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force(VO+i,null);return e.numForces=s.length,e}function ad(e,t){var n,r;for(n in e)if(A(r=e[n])&&t.modified(a(r)))return 1;return 0}function od(e){var t,n;for(n in HO.hasOwnProperty(e.force)||o("Unrecognized force: "+e.force),t=HO[e.force](),e)A(t[n])&&ud(t[n],e[n],e);return t}function ud(e,t,n){e(A(t)?function(e){return t(e,n)}:t)}function sd(e,t,n){var r={};return e.each(function(e){var i=e.data;n(i)&&(r[t(i)]=e)}),e.lookup=r,e}function fd(e,t){return e.parent===t.parent?1:2}function cd(e,t){return e+t.x}function ld(e,t){return Math.max(e,t.y)}function dd(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;0<=--r;)t+=n[r].value;else t=1;e.value=t}function hd(e,t){var n,r,i,a,o,u=new vd(e),s=+e.value&&(u.value=e.value),f=[u];for(null==t&&(t=pd);n=f.pop();)if(s&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;0<=a;--a)f.push(r=n.children[a]=new vd(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(md)}function pd(e){return e.children}function gd(e){e.data=e.data.data}function md(e){for(var t=0;e.height=t,(e=e.parent)&&e.height<++t;);}function vd(e){this.data=e,this.depth=this.height=0,this.parent=null}function yd(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(eA.call(e))).length,a=[];r<i;)t=e[r],n&&xd(n,t)?++r:(n=kd(a=bd(a,t)),r=0);return n}function bd(e,t){var n,r;if(wd(t,e))return[t];for(n=0;n<e.length;++n)if(_d(t,e[n])&&wd(Md(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(_d(Md(e[n],e[r]),t)&&_d(Md(e[n],t),e[r])&&_d(Md(e[r],t),e[n])&&wd(Sd(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function _d(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function xd(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return 0<n&&r*r+i*i<n*n}function wd(e,t){for(var n=0;n<t.length;++n)if(!xd(e,t[n]))return!1;return!0}function kd(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return Md(e[0],e[1]);case 3:return Sd(e[0],e[1],e[2])}var t}function Md(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,u=t.r,s=a-n,f=o-r,c=u-i,l=Math.sqrt(s*s+f*f);return{x:(n+a+s/l*c)/2,y:(r+o+f/l*c)/2,r:(l+i+u)/2}}function Sd(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,u=t.y,s=t.r,f=n.x,c=n.y,l=n.r,d=r-o,h=r-f,p=i-u,g=i-c,m=s-a,v=l-a,y=r*r+i*i-a*a,b=y-o*o-u*u+s*s,_=y-f*f-c*c+l*l,x=h*p-d*g,w=(p*_-g*b)/(2*x)-r,k=(g*m-p*v)/x,M=(h*b-d*_)/(2*x)-i,S=(d*v-h*m)/x,E=k*k+S*S-1,O=2*(a+w*k+M*S),A=w*w+M*M-a*a,C=-(E?(O+Math.sqrt(O*O-4*E*A))/(2*E):A/O);return{x:r+w+k*C,y:i+M+S*C,r:C}}function Ed(e,t,n){var r,i,a,o,u=e.x-t.x,s=e.y-t.y,f=u*u+s*s;f?(i=t.r+n.r,i*=i,o=e.r+n.r,(o*=o)<i?(r=(f+o-i)/(2*f),a=Math.sqrt(Math.max(0,o/f-r*r)),n.x=e.x-r*u-a*s,n.y=e.y-r*s+a*u):(r=(f+i-o)/(2*f),a=Math.sqrt(Math.max(0,i/f-r*r)),n.x=t.x+r*u-a*s,n.y=t.y+r*s+a*u)):(n.x=t.x+n.r,n.y=t.y)}function Od(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return 0<n&&r*r+i*i<n*n}function Ad(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function Cd(e){this._=e,this.next=null,this.previous=null}function Rd(e){if("function"!=typeof e)throw new Error;return e}function Td(){return 0}function zd(e){return function(){return e}}function Nd(e){return Math.sqrt(e.value)}function Dd(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Pd(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,u=e(n)*t||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=function(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,u,s,f,c,l;if((t=e[0]).x=0,t.y=0,!(1<i))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(2<i))return t.r+n.r;Ed(n,t,r=e[2]),t=new Cd(t),n=new Cd(n),r=new Cd(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(u=3;u<i;++u){Ed(t._,n._,r=e[u]),r=new Cd(r),s=n.next,f=t.previous,c=n._.r,l=t._.r;do if(c<=l){if(Od(s._,r._)){n=s,(t.next=n).previous=t,--u;continue e}c+=s._.r,s=s.next}else{if(Od(f._,r._)){((t=f).next=n).previous=t,--u;continue e}l+=f._.r,f=f.previous}while(s!==f.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=Ad(t);(r=r.next)!==n;)(o=Ad(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=yd(t),u=0;u<i;++u)(t=e[u]).x-=r.x,t.y-=r.y;return r.r}(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function Ld(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function qd(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function $d(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(r-t)/e.value;++u<s;)(a=o[u]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*f}function jd(e){return e.id}function Fd(e){return e.parentId}function Id(e,t){return e.parent===t.parent?1:2}function Ud(e){var t=e.children;return t?t[0]:e.t}function Bd(e){var t=e.children;return t?t[t.length-1]:e.t}function Wd(e,t){this._=e,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Gd(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,f=e.value&&(i-n)/e.value;++u<s;)(a=o[u]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*f}function Yd(e,t,n,r,i,a){for(var o,u,s,f,c,l,d,h,p,g,m,v=[],y=t.children,b=0,_=0,x=y.length,w=t.value;b<x;){for(s=i-n,f=a-r;!(c=y[_++].value)&&_<x;);for(l=d=c,m=c*c*(g=Math.max(f/s,s/f)/(w*e)),p=Math.max(d/m,m/l);_<x;++_){if(c+=u=y[_].value,u<l&&(l=u),d<u&&(d=u),m=c*c*g,p<(h=Math.max(d/m,m/l))){c-=u;break}p=h}v.push(o={value:c,dice:s<f,children:y.slice(b,_)}),o.dice?$d(o,n,r,i,w?r+=f*c/w:a):Gd(o,n,r,w?n+=s*c/w:i,a),w-=c,b=_}return v}function Hd(e){sn.call(this,null,e)}function Vd(e){return e.values}function Xd(e){sn.call(this,null,e)}function Zd(e){Xd.call(this,e)}function Jd(e){Xd.call(this,e)}function Qd(e){sn.call(this,null,e)}function Kd(e){Xd.call(this,e)}function eh(e){sn.call(this,[],e)}function th(e){Xd.call(this,e)}function nh(e){return function(){return e}}function rh(e){return e[0]}function ih(e){return e[1]}function ah(){this._=null}function oh(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function uh(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function sh(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function fh(e){for(;e.L;)e=e.L;return e}function ch(e,t,n,r){var i=[null,null],a=xA.push(i)-1;return i.left=e,i.right=t,n&&dh(i,e,t,n),r&&dh(i,t,e,r),bA[e.index].halfedges.push(a),bA[t.index].halfedges.push(a),i}function lh(e,t,n){var r=[t,n];return r.left=e,r}function dh(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function hh(e,t,n,r,i){var a,o=e[0],u=e[1],s=o[0],f=o[1],c=0,l=1,d=u[0]-s,h=u[1]-f;if(a=t-s,d||!(0<a)){if(a/=d,d<0){if(a<c)return;a<l&&(l=a)}else if(0<d){if(l<a)return;c<a&&(c=a)}if(a=r-s,d||!(a<0)){if(a/=d,d<0){if(l<a)return;c<a&&(c=a)}else if(0<d){if(a<c)return;a<l&&(l=a)}if(a=n-f,h||!(0<a)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(0<h){if(l<a)return;c<a&&(c=a)}if(a=i-f,h||!(a<0)){if(a/=h,h<0){if(l<a)return;c<a&&(c=a)}else if(0<h){if(a<c)return;a<l&&(l=a)}return(0<c||l<1)&&(0<c&&(e[0]=[s+c*d,f+c*h]),l<1&&(e[1]=[s+l*d,f+l*h])),!0}}}}}function ph(e,t,n,r,i){var a=e[1];if(a)return!0;var o,u,s=e[0],f=e.left,c=e.right,l=f[0],d=f[1],h=c[0],p=c[1],g=(l+h)/2,m=(d+p)/2;if(p===d){if(g<t||r<=g)return;if(h<l){if(s){if(s[1]>=i)return}else s=[g,n];a=[g,i]}else{if(s){if(s[1]<n)return}else s=[g,i];a=[g,n]}}else if(u=m-(o=(l-h)/(p-d))*g,o<-1||1<o)if(h<l){if(s){if(s[1]>=i)return}else s=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/o,i];a=[(n-u)/o,n]}else if(d<p){if(s){if(s[0]>=r)return}else s=[t,o*t+u];a=[r,o*r+u]}else{if(s){if(s[0]<t)return}else s=[r,o*r+u];a=[t,o*t+u]}return e[0]=s,e[1]=a,!0}function gh(e,t){return t[+(t.left!==e.site)]}function mh(){oh(this),this.x=this.y=this.arc=this.site=this.cy=null}function vh(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],u=i[1],s=r[0]-o,f=r[1]-u,c=a[0]-o,l=a[1]-u,d=2*(s*l-f*c);if(!(-SA<=d)){var h=s*s+f*f,p=c*c+l*l,g=(l*h-f*p)/d,m=(s*p-c*h)/d,v=wA.pop()||new mh;v.arc=e,v.site=i,v.x=g+o,v.y=(v.cy=m+u)+Math.sqrt(g*g+m*m),e.circle=v;for(var y=null,b=_A._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}_A.insert(y,v),y||(vA=v)}}}}function yh(e){var t=e.circle;t&&(t.P||(vA=t.N),_A.remove(t),wA.push(t),oh(t),e.circle=null)}function bh(){oh(this),this.edge=this.site=this.circle=null}function _h(e){var t=kA.pop()||new bh;return t.site=e,t}function xh(e){yh(e),yA.remove(e),kA.push(e),oh(e)}function wh(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,u=[e];xh(e);for(var s=a;s.circle&&Math.abs(n-s.circle.x)<MA&&Math.abs(r-s.circle.cy)<MA;)a=s.P,u.unshift(s),xh(s),s=a;u.unshift(s),yh(s);for(var f=o;f.circle&&Math.abs(n-f.circle.x)<MA&&Math.abs(r-f.circle.cy)<MA;)o=f.N,u.push(f),xh(f),f=o;u.push(f),yh(f);var c,l=u.length;for(c=1;c<l;++c)f=u[c],s=u[c-1],dh(f.edge,s.site,f.site,i);s=u[0],(f=u[l-1]).edge=ch(s.site,f.site,null,i),vh(s),vh(f)}function kh(e){for(var t,n,r,i,a,o=e[0],u=e[1],s=yA._;s;)if(r=Mh(s,u)-o,MA<r)s=s.L;else{if(i=o-Sh(s,u),!(MA<i)){-MA<r?(t=s.P,n=s):-MA<i?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}bA[(a=e).index]={site:a,halfedges:[]};var f=_h(e);if(yA.insert(t,f),t||n){if(t===n)return yh(t),n=_h(t.site),yA.insert(f,n),f.edge=n.edge=ch(t.site,f.site),vh(t),void vh(n);if(n){yh(t),yh(n);var c=t.site,l=c[0],d=c[1],h=e[0]-l,p=e[1]-d,g=n.site,m=g[0]-l,v=g[1]-d,y=2*(h*v-p*m),b=h*h+p*p,_=m*m+v*v,x=[(v*b-p*_)/y+l,(h*_-m*b)/y+d];dh(n.edge,c,g,x),f.edge=ch(c,e,null,x),n.edge=ch(e,g,null,x),vh(t),vh(n)}else f.edge=ch(t.site,f.site)}}function Mh(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var u=(n=o.site)[0],s=n[1],f=s-t;if(!f)return u;var c=u-r,l=1/a-1/f,d=c/f;return l?(-d+Math.sqrt(d*d-2*l*(c*c/(-2*f)-s+f/2+i-a/2)))/l+r:(r+u)/2}function Sh(e,t){var n=e.N;if(n)return Mh(n,t);var r=e.site;return r[1]===t?r[0]:1/0}function Eh(e,t){return t[1]-e[1]||t[0]-e[0]}function Oh(e,t){var n,r,i,a=e.sort(Eh).pop();for(xA=[],bA=new Array(e.length),yA=new ah,_A=new ah;;)if(i=vA,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(kh(a),n=a[0],r=a[1]),a=e.pop();else{if(!i)break;wh(i.arc)}if(function(){for(var e,t,n,r,i=0,a=bA.length;i<a;++i)if((e=bA[i])&&(r=(t=e.halfedges).length)){var o=new Array(r),u=new Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=(s=e,f=xA[t[n]],d=l=void 0,c=s.site,l=f.left,d=f.right,c===d&&(d=l,l=c),d?Math.atan2(d[1]-l[1],d[0]-l[0]):(c===l?(l=f[1],d=f[0]):(l=f[0],d=f[1]),Math.atan2(l[0]-d[0],d[1]-l[1])));for(o.sort(function(e,t){
return u[t]-u[e]}),n=0;n<r;++n)u[n]=t[o[n]];for(n=0;n<r;++n)t[n]=u[n]}var s,f,c,l,d}(),t){var o=+t[0][0],u=+t[0][1],s=+t[1][0],f=+t[1][1];!function(e,t,n,r){for(var i,a=xA.length;a--;)ph(i=xA[a],e,t,n,r)&&hh(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>MA||Math.abs(i[0][1]-i[1][1])>MA)||delete xA[a]}(o,u,s,f),function(e,t,n,r){var i,a,o,u,s,f,c,l,d,h,p,g,m,v,y=bA.length,b=!0;for(i=0;i<y;++i)if(a=bA[i]){for(o=a.site,u=(s=a.halfedges).length;u--;)xA[s[u]]||s.splice(u,1);for(u=0,f=s.length;u<f;)m=a,p=(h=(v=xA[s[u]])[+(v.left===m.site)])[0],g=h[1],l=(c=gh(a,xA[s[++u%f]]))[0],d=c[1],(Math.abs(p-l)>MA||Math.abs(g-d)>MA)&&(s.splice(u,0,xA.push(lh(o,h,Math.abs(p-e)<MA&&MA<r-g?[e,Math.abs(l-e)<MA?d:r]:Math.abs(g-r)<MA&&MA<n-p?[Math.abs(d-r)<MA?l:n,r]:Math.abs(p-n)<MA&&MA<g-t?[n,Math.abs(l-n)<MA?d:t]:Math.abs(g-t)<MA&&MA<p-e?[Math.abs(d-t)<MA?l:e,t]:null))-1),++f);f&&(b=!1)}if(b){var _,x,w,k=1/0;for(i=0,b=null;i<y;++i)(a=bA[i])&&(w=(_=(o=a.site)[0]-e)*_+(x=o[1]-t)*x)<k&&(k=w,b=a);if(b){var M=[e,t],S=[e,r],E=[n,r],O=[n,t];b.halfedges.push(xA.push(lh(o=b.site,M,S))-1,xA.push(lh(o,S,E))-1,xA.push(lh(o,E,O))-1,xA.push(lh(o,O,M))-1)}}for(i=0;i<y;++i)(a=bA[i])&&(a.halfedges.length||delete bA[i])}(o,u,s,f)}this.edges=xA,this.cells=bA,yA=_A=xA=bA=null}function Ah(e){sn.call(this,null,e)}function Ch(){function e(e,t,n){for(var r,i,a,o,u,c=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=f(s),g=l()<.5?1:-1,m=-g;(r=p(m+=g))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=h));)if(t.x=c+i,t.y=d+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&Th(t,e,s[0])||n&&(u=n,!((o=t).x+o.x1>u[0].x&&o.x+o.x0<u[1].x&&o.y+o.y1>u[0].y&&o.y+o.y0<u[1].y)))){for(var v,y=t.sprite,b=t.width>>5,_=s[0]>>5,x=t.x-(b<<4),w=127&x,k=32-w,M=t.y1-t.y0,S=(t.y+t.y0)*_+(x>>5),E=0;E<M;E++){for(var O=v=0;O<=b;O++)e[S+O]|=v<<k|(O<b?(v=y[E*b+O])>>>w:0);S+=_}return!(t.sprite=null)}return!1}var t,n,r,i,a,o,u,s=[256,256],f=Nh,c=[],l=Math.random,d={};return d.layout=function(){for(var f=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(RA<<5)/t,e.height=TA/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(Dr()),d=function(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=c.length,g=-1,m=[],v=c.map(function(e){return{text:t(e),font:n(e),style:i(e),weight:a(e),rotate:o(e),size:~~r(e),padding:u(e),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:e}}).sort(function(e,t){return t.size-e.size});++g<p;){var y=v[g];y.x=s[0]*(l()+.5)>>1,y.y=s[1]*(l()+.5)>>1,Rh(f,y,v,g),y.hasText&&e(d,y,h)&&(m.push(y),h?zh(h,y):h=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return m},d.words=function(e){return arguments.length?(c=e,d):c},d.size=function(e){return arguments.length?(s=[+e[0],+e[1]],d):s},d.font=function(e){return arguments.length?(n=Dh(e),d):n},d.fontStyle=function(e){return arguments.length?(i=Dh(e),d):i},d.fontWeight=function(e){return arguments.length?(a=Dh(e),d):a},d.rotate=function(e){return arguments.length?(o=Dh(e),d):o},d.text=function(e){return arguments.length?(t=Dh(e),d):t},d.spiral=function(e){return arguments.length?(f=zA[e]||e,d):f},d.fontSize=function(e){return arguments.length?(r=Dh(e),d):r},d.padding=function(e){return arguments.length?(u=Dh(e),d):u},d.random=function(e){return arguments.length?(l=e,d):l},d}function Rh(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(RA<<5)/a,TA/a);var o,u,s,f,c,l=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,s=t.size<<1,t.rotate){var g=Math.sin(t.rotate*CA),m=Math.cos(t.rotate*CA),v=o*m,y=o*g,b=s*m,_=s*g;o=Math.max(Math.abs(v+_),Math.abs(v-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(h<s&&(h=s),RA<<5<=l+o&&(d+=h,h=l=0),TA<=d+s)break;i.translate((l+(o>>1))/a,(d+(s>>1))/a),t.rotate&&i.rotate(t.rotate*CA),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=s,t.xoff=l,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,l+=o}for(var x=i.getImageData(0,0,(RA<<5)/a,TA/a).data,w=[];0<=--r;)if((t=n[r]).hasText){for(u=(o=t.width)>>5,s=t.y1-t.y0,f=0;f<s*u;f++)w[f]=0;if(null==(l=t.xoff))return;d=t.yoff;var k=0,M=-1;for(c=0;c<s;c++){for(f=0;f<o;f++){var S=u*c+(f>>5),E=x[(d+c)*(RA<<5)+(l+f)<<2]?1<<31-f%32:0;w[S]|=E,k|=E}k?M=c:(t.y0++,s--,c--,d++)}t.y1=t.y0+M,t.sprite=w.slice(0,(t.y1-t.y0)*u)}}}function Th(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=32-u,f=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),l=0;l<f;l++){for(var d=r=0;d<=a;d++)if((r<<s|(d<a?(r=i[l*a+d])>>>u:0))&t[c+d])return!0;c+=n}return!1}function zh(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Nh(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function Dh(e){return"function"==typeof e?e:function(){return e}}function Ph(){function e(){var e,r,l=i().length,d=o[1]<o[0],h=o[d-0],p=o[1-d],g=(r=(e=l)-s+2*f,e?0<r?r:1:0);t=(p-h)/(g||1),u&&(t=Math.floor(t)),h+=(p-h-t*(l-s))*c,n=t*(1-s),u&&(h=Math.round(h),n=Math.round(n));var m=Mn(l).map(function(e){return h+t*e});return a(d?m.reverse():m)}var t,n,r=Go().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,c=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],c=o[1]<o[0],l=c?a().reverse():a(),d=l.length-1;if(s==s&&f==f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return t=Math.max(0,cb(l,s)-1),r=s===f?t:cb(l,f)-1,s-l[t]>n+1e-10&&++t,c&&(u=t,t=d-r,r=d-u),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return Ph().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(c)},e()}function Lh(e){return NA.call(e,function(e){return+e})}function qh(e,t){return 1<arguments.length?(PA[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):PA.hasOwnProperty(e)?PA[e]:void 0;var n,r}function $h(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function jh(e,t){WA[e]=gS["interpolate"+t],BA[e]=gS["scheme"+t]}function Fh(e){sn.call(this,Ch(),e)}function Ih(e){return new Uint32Array(e)}function Uh(e,t,n){var r=(t<257?function(e){return new Uint8Array(e)}:t<65537?function(e){return new Uint16Array(e)}:Ih)(e);return n&&r.set(n),r}function Bh(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this.bisect(this.range,e.value),a=e.index,o=i[0],u=i[1],s=a.length;for(n=0;n<o;++n)t[a[n]]|=r;for(n=u;n<s;++n)t[a[n]]|=r;return this}}}function Wh(){var e=Ih(0),t=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];var o,u,s,f,c,l=n,d=i.length,h=Array(d),p=Ih(d);for(s=0;s<d;++s)h[s]=r(i[s]),p[s]=s;if(c=p,(f=h).sort.call(c,function(e,t){var n=f[e],r=f[t];return n<r?-1:r<n?1:0}),h=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r}(f,c),l)o=t,u=e,t=Array(l+d),e=Ih(l+d),function(e,t,n,r,i,a,o,u,s){var f,c=0,l=0;for(f=0;c<r&&l<o;++f)t[c]<i[l]?(u[f]=t[c],s[f]=n[c++]):(u[f]=i[l],s[f]=a[l++]+e);for(;c<r;++c,++f)u[f]=t[c],s[f]=n[c];for(;l<o;++l,++f)u[f]=i[l],s[f]=a[l]+e}(a,o,u,l,h,p,d,t,e);else{if(0<a)for(s=0;s<d;++s)p[s]+=a;t=h,e=p}return n=l+d,{index:p,value:h}},remove:function(r,i){var a,o,u,s=n;for(o=0;!i[e[o]]&&o<s;++o);for(u=o;o<s;++o)i[a=e[o]]||(e[u]=a,t[u]=t[o],++u);n=s-r},bisect:function(e,r){var i;return r?i=r.length:(r=t,i=n),[lb(r,e[0],0,i),cb(r,e[1],0,i)]},reindex:function(t){for(var r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function Gh(e){var t,n,r,i,a;sn.call(this,(t=8,n=[],r=Ih(0),i=Uh(0,t),a=Uh(0,t),{data:function(){return n},seen:function(){return e=r,t=n.length,r=e.length>=t?e:((i=i||new e.constructor(t)).set(e),i);var e,t,i},add:function(e){for(var t,r=0,i=n.length,a=e.length;r<a;++r)(t=e[r])._index=i++,n.push(t)},remove:function(e,t){var r,o,u,s=n.length,f=Array(s-e),c=n;for(o=0;!t[o]&&o<s;++o)f[o]=n[o],c[o]=o;for(u=o;o<s;++o)r=n[o],t[o]?c[o]=-1:(c[o]=u,i[u]=i[o],a[u]=a[o],(f[u]=r)._index=u++),i[o]=0;return n=f,c},size:function(){return n.length},curr:function(){return i},prev:function(){return a},reset:function(e){a[e]=i[e]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(e,t){i[e]|=t},clear:function(e,t){i[e]&=~t},resize:function(e,n){(i.length<e||t<n)&&(t=Math.max(n,t),i=Uh(e,t,i),a=Uh(e,t))}}),e),this._indices=null,this._dims=null}function Yh(e){sn.call(this,null,e)}function Hh(){function e(){var e,r,l=i().length,d=o[1]<o[0],h=o[d-0],p=o[1-d],g=(r=(e=l)-s+2*f,e?0<r?r:1:0);t=(p-h)/(g||1),u&&(t=Math.floor(t)),h+=(p-h-t*(l-s))*c,n=t*(1-s),u&&(h=Math.round(h),n=Math.round(n));var m=Mn(l).map(function(e){return h+t*e});return a(d?m.reverse():m)}var t,n,r=Go().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,c=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],c=o[1]<o[0],l=c?a().reverse():a(),d=l.length-1;if(s==s&&f==f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return t=Math.max(0,cb(l,s)-1),r=s===f?t:cb(l,f)-1,s-l[t]>n+1e-10&&++t,c&&(u=t,t=d-r,r=d-u),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return Hh().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(c)},e()}function Vh(e){return ZA.call(e,function(e){return+e})}function Xh(e,t){return 1<arguments.length?(QA[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):QA.hasOwnProperty(e)?QA[e]:void 0;var n,r}function Zh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Jh(e,t){uC[e]=gS["interpolate"+t],oC[e]=gS["scheme"+t]}function Qh(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:gC,item:null})),e.on(e.events("view","mousemove"),t,function(e,n){var r=t.value,i=r?f(r)?r:r.user:gC,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),e.add(null,function(e){var t,n=e.cursor,r=this.value;return f(n)||(r=n.item,n=n.user),t=n&&n!==gC?n:r||n,"undefined"!=typeof document&&document.body&&(document.body.style.cursor=t),r},{cursor:t})}function Kh(e,t){var n=e._runtime.data;return n.hasOwnProperty(t)||o("Unrecognized data set: "+t),n[t]}function ep(e,t){ae(t)||o("Second argument to changes must be a changeset.");var n=Kh(this,e);return n.modified=!0,this.pulse(n.input,t)}function tp(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function np(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function rp(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ip(e,t,n){var r,i,a=e._renderer.canvas();return a&&(i=rp(e),(r=Fa(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.vega=function(e,t,n){function r(e){var n,r=a;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(e){if(!e)return n;f(e)&&(e=r(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}var a=t?"group"===t.mark.marktype?t:t.mark.group:null;return{view:R(e),item:R(t||{}),group:r,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}(e,n,r),t.item=n,t}function ap(e){return e.item}function op(e){var t=e.item.mark.source;return t.source||t}function up(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function sp(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function fp(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&(i.source=!0,e.signal(r.signal,t).run())}},r.debounce&&(i.update=T(r.debounce,i.update))),function(e,t,n,r){var i=sp("div",{class:vC});i.appendChild(sp("span",{class:yC},n.name||n.signal)),t.appendChild(i);var a=cp;switch(n.input){case"checkbox":a=lp;break;case"select":a=dp;break;case"radio":a=hp;break;case"range":a=pp}a(e,i,n,r)}(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,function(){i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}}function cp(e,t,n,r){var i=sp("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",function(){e.update(i.value)}),e.elements=[i],e.set=function(e){i.value=e}}function lp(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=sp("input",i);t.appendChild(a),a.addEventListener("change",function(){e.update(a.checked)}),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function dp(e,t,n,r){var i=sp("select",{name:n.signal});n.options.forEach(function(e){var t={value:e};gp(e,r)&&(t.selected=!0),i.appendChild(sp("option",t,e+""))}),t.appendChild(i),i.addEventListener("change",function(){e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(gp(n.options[t],e))return void(i.selectedIndex=t)}}function hp(e,t,n,r){var i=sp("span",{class:bC});t.appendChild(i),e.elements=n.options.map(function(t){var a=_C+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};gp(t,r)&&(o.checked=!0);var u=sp("input",o);return u.addEventListener("change",function(){e.update(t)}),i.appendChild(u),i.appendChild(sp("label",{for:a},t+"")),u}),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)gp(n[r].value,t)&&(n[r].checked=!0)}}function pp(e,t,n,r){function i(){f.textContent=s.value,e.update(+s.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var a=n.min||Math.min(0,+r)||0,o=n.max||Math.max(100,+r)||100,u=n.step||On(a,o,100),s=sp("input",{type:"range",name:n.signal,min:a,max:o,step:u}),f=sp("label",{},+(s.value=r));t.appendChild(s),t.appendChild(f),s.addEventListener("input",i),s.addEventListener("change",i),e.elements=[s],e.set=function(e){s.value=e,f.textContent=e}}function gp(e,t){return e===t||e+""==t+""}function mp(e,t,n,r,i){return(t=t||new r(e.loader())).initialize(n,tp(e),np(e),rp(e),i).background(e._background)}function vp(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function yp(e,t){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}function bp(e,t,n){var r=uo(t),i=r&&r.headless;return i?e.runAsync().then(function(){return mp(e,null,null,i,n).renderAsync(e._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+t)}function _p(e){return+e||0}function xp(e,t){o(e+' for "outer" push: '+c(t))}function wp(e,t){var n=e.name;if(e.push===xC)t.signals[n]||xp("No prior signal definition",n),wC.forEach(function(t){void 0!==e[t]&&xp("Invalid property ",t)});else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function kp(e){this.type=e}function Mp(e,t){if(!e)throw new Error("ASSERT: "+t)}function Sp(e){return 48<=e&&e<=57}function Ep(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function Op(e){return 0<="01234567".indexOf(e)}function Ap(e){return 10===e||13===e||8232===e||8233===e}function Cp(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||92===e||128<=e&&eR.test(String.fromCharCode(e))}function Rp(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||92===e||128<=e&&tR.test(String.fromCharCode(e))}function Tp(){for(var e,t;cC<lC&&(e=fC.charCodeAt(cC),32===(t=e)||9===t||11===t||12===t||160===t||5760<=t&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)||Ap(e));)++cC}function zp(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)cC<lC&&Ep(fC[cC])?(r=fC[cC++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):Hp({},UC,QC);return String.fromCharCode(i)}function Np(){var e,t,n,r;for(t=0,"}"===(e=fC[cC])&&Hp({},UC,QC);cC<lC&&Ep(e=fC[cC++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(1114111<t||"}"!==e)&&Hp({},UC,QC),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function Dp(){var e,t;for(e=fC.charCodeAt(cC++),t=String.fromCharCode(e),92===e&&(117!==fC.charCodeAt(cC)&&Hp({},UC,QC),++cC,(e=zp("u"))&&"\\"!==e&&Cp(e.charCodeAt(0))||Hp({},UC,QC),t=e);cC<lC&&Rp(e=fC.charCodeAt(cC));)++cC,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==fC.charCodeAt(cC)&&Hp({},UC,QC),++cC,(e=zp("u"))&&"\\"!==e&&Rp(e.charCodeAt(0))||Hp({},UC,QC),t+=e);return t}function Pp(){var e,t;return e=cC,{type:1===(t=92===fC.charCodeAt(cC)?Dp():function(){var e,t;for(e=cC++;cC<lC;){if(92===(t=fC.charCodeAt(cC)))return cC=e,Dp();if(!Rp(t))break;++cC}return fC.slice(e,cC)}()).length?SC:nR.hasOwnProperty(t)?EC:"null"===t?OC:"true"===t||"false"===t?kC:SC,value:t,start:e,end:cC}}function Lp(){var e,t,n,r,i=cC,a=fC.charCodeAt(cC),o=fC[cC];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++cC,{type:CC,value:String.fromCharCode(a),start:i,end:cC};default:if(61===(e=fC.charCodeAt(cC+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return cC+=2,{type:CC,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:cC};case 33:case 61:return cC+=2,61===fC.charCodeAt(cC)&&++cC,{type:CC,value:fC.slice(i,cC),start:i,end:cC}}}return">>>="===(r=fC.substr(cC,4))?{type:CC,value:r,start:i,end:cC+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:CC,value:n,start:i,end:cC+=3}:o===(t=n.substr(0,2))[1]&&0<="+-<>&|".indexOf(o)||"=>"===t?{type:CC,value:t,start:i,end:cC+=2}:0<="<>=!+-*%&|^/".indexOf(o)?{type:CC,value:o,start:i,end:++cC}:void Hp({},UC,QC)}function qp(){var e,t,n;if(Mp(Sp((n=fC[cC]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=cC,e="","."!==n){if(e=fC[cC++],n=fC[cC],"0"===e){if("x"===n||"X"===n)return++cC,function(e){for(var t="";cC<lC&&Ep(fC[cC]);)t+=fC[cC++];return 0===t.length&&Hp({},UC,QC),Cp(fC.charCodeAt(cC))&&Hp({},UC,QC),{type:AC,value:parseInt("0x"+t,16),start:e,end:cC}}(t);if(Op(n))return function(e){for(var t="0"+fC[cC++];cC<lC&&Op(fC[cC]);)t+=fC[cC++];return(Cp(fC.charCodeAt(cC))||Sp(fC.charCodeAt(cC)))&&Hp({},UC,QC),{type:AC,value:parseInt(t,8),octal:!0,start:e,end:cC}}(t);n&&Sp(n.charCodeAt(0))&&Hp({},UC,QC)}for(;Sp(fC.charCodeAt(cC));)e+=fC[cC++];n=fC[cC]}if("."===n){for(e+=fC[cC++];Sp(fC.charCodeAt(cC));)e+=fC[cC++];n=fC[cC]}if("e"===n||"E"===n)if(e+=fC[cC++],"+"!==(n=fC[cC])&&"-"!==n||(e+=fC[cC++]),Sp(fC.charCodeAt(cC)))for(;Sp(fC.charCodeAt(cC));)e+=fC[cC++];else Hp({},UC,QC);return Cp(fC.charCodeAt(cC))&&Hp({},UC,QC),{type:AC,value:parseFloat(e),start:t,end:cC}}function $p(){var e,t,n,r;return dC=null,Tp(),e=cC,t=function(){var e,t,n,r;for(Mp("/"===(e=fC[cC]),"Regular expression literal must start with a slash"),t=fC[cC++],r=n=!1;cC<lC;)if(t+=e=fC[cC++],"\\"===e)Ap((e=fC[cC++]).charCodeAt(0))&&Hp({},XC),t+=e;else if(Ap(e.charCodeAt(0)))Hp({},XC);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||Hp({},XC),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(n=t="";cC<lC&&Rp((e=fC[cC]).charCodeAt(0));)++cC,"\\"===e&&cC<lC?Hp({},UC,QC):(n+=e,t+=e);return 0<=n.search(/[^gimuy]/g)&&Hp({},VC,n),{value:n,literal:t}}(),r=function(e,t){var n=e;0<=t.indexOf("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void Hp({},VC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:cC}}function jp(){var e;return Tp(),lC<=cC?{type:MC,start:cC,end:cC}:Cp(e=fC.charCodeAt(cC))?Pp():40===e||41===e||59===e?Lp():39===e||34===e?function(){var e,t,n,r,i="",a=!1;for(Mp("'"===(e=fC[cC])||'"'===e,"String literal must starts with a quote"),t=cC,++cC;cC<lC;){if((n=fC[cC++])===e){e="";break}if("\\"===n)if((n=fC[cC++])&&Ap(n.charCodeAt(0)))"\r"===n&&"\n"===fC[cC]&&++cC;else switch(n){case"u":case"x":"{"===fC[cC]?(++cC,i+=Np()):i+=zp(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:Op(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),cC<lC&&Op(fC[cC])&&(a=!0,r=8*r+"01234567".indexOf(fC[cC++]),0<="0123".indexOf(n)&&cC<lC&&Op(fC[cC])&&(r=8*r+"01234567".indexOf(fC[cC++]))),i+=String.fromCharCode(r)):i+=n}else{if(Ap(n.charCodeAt(0)))break;i+=n}}return""!==e&&Hp({},UC,QC),{type:RC,value:i,octal:a,start:t,end:cC}}():46===e?Sp(fC.charCodeAt(cC+1))?qp():Lp():Sp(e)?qp():Lp()}function Fp(){var e;return cC=(e=dC).end,dC=jp(),cC=e.end,e}function Ip(){var e;e=cC,dC=jp(),cC=e}function Up(e,t,n){var r=new kp("||"===e||"&&"===e?qC:zC);return r.operator=e,r.left=t,r.right=n,r}function Bp(e){var t=new kp(PC);return t.name=e,t}function Wp(e){var t=new kp(LC);return t.value=e.value,t.raw=fC.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Gp(e,t,n){var r=new kp($C);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function Yp(e,t,n){var r=new kp(FC);return r.key=t,r.value=n,r.kind=e,r}function Hp(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return Mp(t<r.length,"Message reference must be in range"),r[t]});throw(n=new Error(i)).index=cC,n.description=i,n}function Vp(e){e.type===MC&&Hp(e,HC),e.type===AC&&Hp(e,BC),e.type===RC&&Hp(e,WC),e.type===SC&&Hp(e,GC),e.type===EC&&Hp(e,YC),Hp(e,UC,e.value)}function Xp(e){var t=Fp();t.type===CC&&t.value===e||Vp(t)}function Zp(e){return dC.type===CC&&dC.value===e}function Jp(e){return dC.type===EC&&dC.value===e}function Qp(){var e,t,n=[];for(cC=dC.start,Xp("[");!Zp("]");)Zp(",")?(Fp(),n.push(null)):(n.push(ug()),Zp("]")||Xp(","));return Fp(),e=n,(t=new kp(TC)).elements=e,t}function Kp(){var e;return cC=dC.start,(e=Fp()).type===RC||e.type===AC?(e.octal&&Hp(e,ZC),Wp(e)):Bp(e.value)}function eg(){var e,t,n,r,i,a,o,u=[],s={},f=String;for(cC=dC.start,Xp("{");!Zp("}");)i=r=n=void 0,cC=dC.start,t="$"+((e=(n=dC).type===SC?(i=Kp(),Xp(":"),Yp("init",i,ug())):n.type!==MC&&n.type!==CC?(r=Kp(),Xp(":"),Yp("init",r,ug())):void Vp(n)).key.type===PC?e.key.name:f(e.key.value)),Object.prototype.hasOwnProperty.call(s,t)?Hp({},JC):s[t]=!0,u.push(e),Zp("}")||Xp(",");return Xp("}"),a=u,(o=new kp(jC)).properties=a,o}function tg(){var e,t,n,r;if(Zp("("))return Xp("("),r=sg(),Xp(")"),r;if(Zp("["))return Qp();if(Zp("{"))return eg();if(e=dC.type,cC=dC.start,e===SC||rR[dC.value])n=Bp(Fp().value);else if(e===RC||e===AC)dC.octal&&Hp(dC,ZC),n=Wp(Fp());else{if(e===EC)throw new Error(KC);e===kC?((t=Fp()).value="true"===t.value,n=Wp(t)):e===OC?((t=Fp()).value=null,n=Wp(t)):Zp("/")||Zp("/=")?(n=Wp($p()),Ip()):Vp(Fp())}return n}function ng(){var e=[];if(Xp("("),!Zp(")"))for(;cC<lC&&(e.push(ug()),!Zp(")"));)Xp(",");return Xp(")"),e}function rg(){var e,t;return cC=dC.start,e=Fp(),(t=e).type!==SC&&t.type!==EC&&t.type!==kC&&t.type!==OC&&Vp(e),Bp(e.value)}function ig(){var e=function(){var e,t,n,r,i,a;for(e=tg();;)if(Zp("."))Xp("."),e=Gp(".",e,rg());else if(Zp("("))t=ng(),r=e,i=t,a=void 0,(a=new kp(NC)).callee=r,a.arguments=i,e=a;else{if(!Zp("["))break;n=void 0,Xp("["),n=sg(),Xp("]"),e=Gp("[",e,n)}return e}();if(dC.type===CC&&(Zp("++")||Zp("--")))throw new Error(KC);return e}function ag(){var e,t,n,r,i;if(dC.type!==CC&&dC.type!==EC)t=ig();else{if(Zp("++")||Zp("--"))throw new Error(KC);if(Zp("+")||Zp("-")||Zp("~")||Zp("!"))e=Fp(),t=ag(),n=e.value,r=t,(i=new kp(IC)).operator=n,i.argument=r,i.prefix=!0,t=i;else{if(Jp("delete")||Jp("void")||Jp("typeof"))throw new Error(KC);t=ig()}}return t}function og(e){var t=0;if(e.type!==CC&&e.type!==EC)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function ug(){var e,t,n,r,i,a,o;return e=function(){var e,t,n,r,i,a,o,u,s,f;if(e=dC,s=ag(),0===(i=og(r=dC)))return s;for(r.prec=i,Fp(),t=[e,dC],a=[s,r,o=ag()];0<(i=og(dC));){for(;2<a.length&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=Up(u,s,o),a.push(n);(r=Fp()).prec=i,a.push(r),t.push(dC),n=ag(),a.push(n)}for(n=a[f=a.length-1],t.pop();1<f;)t.pop(),n=Up(a[f-1].value,a[f-2],n),f-=2;return n}(),Zp("?")&&(Fp(),t=ug(),Xp(":"),n=ug(),r=e,i=t,a=n,(o=new kp(DC)).test=r,o.consequent=i,o.alternate=a,e=o),e}function sg(){var e=ug();if(Zp(","))throw new Error(KC);return e}function fg(e){function t(t,n,r){return function(i){return a=t,u=n,s=r,f=e((o=i)[0]),u&&(f=u+"("+f+")",0===u.lastIndexOf("new ",0)&&(f="("+f+")")),f+"."+a+(s<0?"":0===s?"()":"("+o.slice(1).map(e).join(",")+")");var a,o,u,s,f}}var n="new Date",r="String";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&o("Missing arguments to clamp function."),3<t.length&&o("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),slice:t("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),replace:t("replace",r),regexp:"RegExp",test:t("test","RegExp"),if:function(t){t.length<3&&o("Missing arguments to if function."),3<t.length&&o("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function cg(e,t,n){var r=e+":"+n,i=aR[r];return i&&i[0]===t||(aR[r]=i=[t,t(n)]),i[1]}function lg(e,t){return cg("timeFormat",By,t)(e)}function dg(e,t,n){return oR.setMonth(e),oR.setDate(t),lg(oR,n)}function hg(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function pg(e,t,n){var r=e-t+2*n;return e?0<r?r:1:0}function gg(){function e(){var e=i().length,r=o[1]<o[0],l=o[r-0],d=o[1-r],h=pg(e,s,f);t=(d-l)/(h||1),u&&(t=Math.floor(t)),l+=(d-l-t*(e-s))*c,n=t*(1-s),u&&(l=Math.round(l),n=Math.round(n));var p=Mn(e).map(function(e){return l+t*e});return a(r?p.reverse():p)}var t,n,r=Go().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,c=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),e()):i()},r.range=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o.slice()},r.rangeRound=function(t){return o=[+t[0],+t[1]],u=!0,e()},r.bandwidth=function(){return n},r.step=function(){return t},r.round=function(t){return arguments.length?(u=!!t,e()):u},r.padding=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s=f,e()):s},r.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),e()):s},r.paddingOuter=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},r.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var t,r,u,s=+e[0],f=+e[1],c=o[1]<o[0],l=c?a().reverse():a(),d=l.length-1;if(s==s&&f==f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return t=Math.max(0,cb(l,s)-1),r=s===f?t:cb(l,f)-1,s-l[t]>n+1e-10&&++t,c&&(u=t,t=d-r,r=d-u),r<t?void 0:i().slice(t,r+1)}},r.invert=function(e){var t=r.invertRange([e,e]);return t?t[0]:t},r.copy=function(){return gg().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(c)},e()}function mg(e){return lR.call(e,function(e){return+e})}function vg(e,t){return 1<arguments.length?(hR[e]=(n=e,r=t,function(){var e,t,i=r();return i.invertRange||(i.invertRange=i.invert?(t=i,function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}):i.invertExtent?(e=i,function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=e.invertExtent(o[f]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}):void 0),i.type=n,i}),this):hR.hasOwnProperty(e)?hR[e]:void 0;var n,r}function yg(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function bg(e,t){wR[e]=gS["interpolate"+t],xR[e]=gS["scheme"+t]}function _g(e,t){var n=t-e;return function(t){return e+t*n}}function xg(e,t){var n;return A(e)?e:f(e)?(n=t.scales[e])&&n.value:void 0}function wg(e,t,n){var r=fR+n;if(!t.hasOwnProperty(r))try{t[r]=e.scaleRef(n)}catch(e){}}function kg(e,t,n,r){if(t[0].type===sR)wg(n,r,t[0].value);else if("Identifier"===t[0].type)for(e in n.scales)wg(n,r,e)}function Mg(e,t){return function(n,r,i){
if(n){var a=xg(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}function Sg(e){var t=this.context.data[e];return t?t.values.value:[]}function Eg(e,t,n,r){t[0].type!==sR&&o("First argument to data functions must be a string literal.");var i=t[0].value,a=cR+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function Og(e){return e.data}function Ag(e,t){var n=Sg.call(t,e);return n.root&&n.root.lookup||ER}function Cg(e,t,n,r){var i,a=t[0],o=t[t.length-1];return o<a&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=e:a<e)&&(r?e<=o:e<o)}function Rg(e,t){return e===t||e!=e&&t!=t||!(!Iv(e)||!Iv(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!Rg(e[n],t[n]))return!1;return!0}(e,t)}function Tg(e){return function(t){for(var n in e)if(!Rg(t[n],e[n]))return!1;return!0}}function zg(e,t){for(var n,r=t.fields,i=t.values,a=t.getter||(t.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||l(r[u]),q(n=a[u](e))&&(n=g(n)),q(i[u])&&(i[u]=g(i[u])),t[OR+r[u]]){if(q(i[u][0])&&(i[u]=i[u].map(g)),!Cg(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function Ng(e,t){for(var n,r,i=t.intervals,a=i.length,o=0;o<a;++o){if(n=i[o].extent,r=(i[o].getter||(i[o].getter=l(i[o].field)))(e),!n||n[0]===n[1])return!1;if(q(r)&&(r=g(r)),q(n[0])&&(n=i[o].extent=n.map(g)),$(n[0])&&!Cg(r,n))return!1;if(f(n[0])&&n.indexOf(r)<0)return!1}return!0}function Dg(e,t,n,r){for(var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=f?f[RR]&&f[RR].value:void 0,d=n===AR,h=c.length,p=0;p<h;++p)if(i=c[p],l&&d){if(-1===(o=(a=a||{})[u=i.unit]||0))continue;if(s=r(t,i),a[u]=s?-1:++o,s&&1===l.size)return!0;if(!s&&o===l.get(u).count)return!1}else if(d^(s=r(t,i)))return s;return h&&d}function Pg(e,t,n){return Dg.call(this,e,t,n,zg)}function Lg(e,t,n,r){t[0].type!==sR&&o("First argument to indata must be a string literal.");var i=t[0].value;(2<=t.length&&t[t.length-1].value)!==AR||r.hasOwnProperty("@unit")||(r["@unit"]=n.getData(i).indataRef(n,"unit")),Eg(0,t,n,r)}function qg(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=f?f[RR]&&f[RR].value:void 0,d=c[0],h=0;if(d){for(i=t?d.encodings.length:d.fields.length;h<i;++h)if(t&&d.encodings[h]===t||n&&d.fields[h]===n){a=h,u=d[OR+d.fields[h]];break}return l&&1===l.size&&(r=CR),l&&r===AR?(s=c.reduce(function(e,t){return(e[t.unit]||(e[t.unit]=[])).push({unit:t.unit,value:t.values[a]}),e},{}),o=Object.keys(s).map(function(e){return{unit:e,value:u?jg(s[e],CR):$g(s[e],CR)}})):o=c.map(function(e){return{unit:e.unit,value:e.values[a]}}),u?jg(o,r):$g(o,r)}}function $g(e,t){for(var n,r,i,a,o={},u=0,s={},f=[],c=0,l=e.length;c<l;++c)r=(n=e[c]).unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],t===AR&&i.count!==u||f.push(i.value);return f.length?f:void 0}function jg(e,t){for(var n,r,i,a,o=t===AR?Ig:Fg,u=0,s=e.length;u<s;++u)q((n=e[u].value)[0])&&(n=n.map(g)),i=n[0],(a=n[1])<i&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function Fg(e,t,n){return e[0]>t&&(e[0]=t),e[1]<n&&(e[1]=n),e}function Ig(e,t,n){return n<e[0]||e[1]<t?[]:(e[0]<t&&(e[0]=t),e[1]>n&&(e[1]=n),e)}function Ug(e,t,n){return 1===arguments.length?TR[e]:(TR[e]=t,n&&(NR[e]=n),qR&&(qR.functions[e]="this."+e),this)}function Bg(e,t,n){var r,i,a={};try{r=function(e){cC=0,lC=(fC=e).length,dC=null,Ip();var t=sg();if(dC.type!==MC)throw new Error("Unexpect token after expression.");return t}(e=f(e)?e:c(e)+"")}catch(t){o("Expression parse error: "+e)}return r.visit(function(e){if("CallExpression"===e.type){var n=e.callee.name,r=LR.visitors[n];r&&r(n,e.arguments,t,a)}}),(i=qR(r)).globals.forEach(function(e){var n=$R+e;!a.hasOwnProperty(n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function Wg(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Gg(e,t,n,r){return new Wg(e,t,n,r)}function Yg(e,t){return Gg("operator",e,t)}function Hg(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Vg(e,t){return t?{$field:e,$name:t}:{$field:e}}function Xg(e,t){return{$compare:e,$order:t}}function Zg(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function Jg(e){return e&&e.signal}function Qg(e,t){return null!=e?e:t}function Kg(e){return e&&e.signal||e}function em(e,t){return(e.merge?tm:e.stream?nm:e.type?rm:o("Invalid stream specification: "+c(e)))(e,t)}function tm(e,t){var n=im({merge:e.merge.map(function(e){return em(e,t)})},e,t);return t.addStream(n).id}function nm(e,t){var n=im({stream:em(e.stream,t)},e,t);return t.addStream(n).id}function rm(e,t){var n,r,i;return e.type===WR?(n=t.event(WR,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((i=e.source)===UR?BR:i||BR,e.type),r=im({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function im(e,t,n){var r,i,a,u,s=t.between;return s&&(2!==s.length&&o('Stream "between" parameter must have 2 entries: '+c(t)),e.between=[em(s[0],n),em(s[1],n)]),s=t.filter?O(t.filter):[],(t.marktype||t.markname||t.markrole)&&s.push((r=t.marktype,i=t.markname,a=t.markrole,(u="event.item")+(r&&"*"!==r?"&&"+u+".mark.marktype==='"+r+"'":"")+(a?"&&"+u+".mark.role==='"+a+"'":"")+(i?"&&"+u+".mark.name==='"+i+"'":""))),t.source===UR&&s.push("inScope(event.item)"),s.length&&(e.filter=Bg("("+s.join(")&&(")+")").$expr),null!=(s=t.throttle)&&(e.throttle=+s),null!=(s=t.debounce)&&(e.debounce=+s),t.consume&&(e.consume=!0),e}function am(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&0<=i.indexOf(a)?--o:r&&0<=r.indexOf(a)&&++o}return t}function om(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=am(e,i,JR,YR+VR,HR+XR),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function um(e){return"["===e[0]?function(e){var t,n,r=e.length,i=1;if((i=am(e,i,HR,YR,HR))===r)throw"Empty between selector: "+e;if(2!==(t=om(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if((e=e.slice(i+1).trim())[0]!==KR)throw"Expected '>' after between selector: "+e;return t=t.map(um),(n=um(e.slice(1).trim())).between?{between:t,stream:n}:(n.between=t,n)}(e):function(e){var t,n,r={source:DR},i=[],a=[0,0],o=0,u=0,s=e.length,f=0;if(e[s-1]===XR){if(!(0<=(f=e.lastIndexOf(VR))))throw"Unmatched right brace: "+e;try{a=function(e){var t=e.split(JR);if(!e.length||2<t.length)throw e;return t.map(function(t){var n=+t;if(n!=n)throw e;return n})}(e.substring(f+1,s-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,f).trim(),s=e.length,f=0}if(!s)throw e;if(e[0]===QR&&(o=++f),(t=am(e,f,ZR))<s&&(i.push(e.substring(u,t).trim()),u=f=++t),(f=am(e,f,YR))===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,f).trim()),n=[],(u=++f)===s)throw"Unmatched left bracket: "+e;for(;f<s;){if((f=am(e,f,HR))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,f).trim()),f<s-1&&e[++f]!==YR)throw"Expected left bracket: "+e;u=++f}if(!(s=i.length)||eT.test(i[s-1]))throw"Invalid event selector: "+e;1<s?(r.type=i[1],o?r.markname=i[0].slice(1):(c=i[0],PR.hasOwnProperty(c)?r.marktype=i[0]:r.source=i[0])):r.type=i[0];var c;return"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}(e)}function sm(e,t,n){var r,i,a,u,s,l=e.events,d=e.update,h=e.encode,p=[];l||o("Signal update missing events specification."),f(l)&&(a=l,u=t.isSubscope()?UR:BR,DR=u||GR,PR=s||tT,l=om(a.trim()).map(um)),(l=O(l).filter(function(e){return e.signal||e.scale?(p.push(e),0):1})).length&&p.push(1<l.length?{merge:l}:l[0]),null!=h&&(d&&o("Signal encode and update are mutually exclusive."),d="encode(item(),"+c(h)+")"),r=f(d)?Bg(d,t,nT):null!=d.expr?Bg(d.expr,t,nT):null!=d.value?d.value:null!=d.signal?{$expr:"_.value",$params:{value:t.signalRef(d.signal)}}:o("Invalid signal update specification."),i={target:n,update:r},e.force&&(i.options={force:!0}),p.forEach(function(e){var n,r;t.addUpdate(z((r=t,{source:(n=e).signal?r.signalRef(n.signal):n.scale?r.scaleRef(n.scale):em(n,r)}),i))})}function fm(e){return function(t,n,r){return Gg(e,n,t||void 0,r)}}function cm(e){return DT.hasOwnProperty(e)}function lm(e){return zT.hasOwnProperty(e)}function dm(e){return"quantile"===e}function hm(e,t){var n,r,i,a,u=t.getScale(e.name).params;for(n in u.domain=mm(e.domain,e,t),null!=e.range&&(u.range=function e(t,n,r){var i=t.range,a=n.config.range;if(i.signal)return n.signalRef(i.signal);if(f(i)){if(a&&a.hasOwnProperty(i))return t=z({},t,{range:a[i]}),e(t,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=cm(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:o("Unrecognized scale range value: "+c(i))}else{if(i.scheme)return r.scheme=pm(i.scheme,n),i.extent&&(r.schemeExtent=(u=i.extent,s=n,u.signal?s.signalRef(u.signal):u.map(function(e){return pm(e,s)}))),void(i.count&&(r.schemeCount=pm(i.count,n)));if(i.step)return void(r.rangeStep=pm(i.step,n));if(cm(t.type)&&!Iv(i))return mm(i,t,n);Iv(i)||o("Unsupported range type: "+c(i))}var u,s;return i.map(function(e){return pm(e,n)})}(e,t,u)),null!=e.interpolate&&(r=e.interpolate,(i=u).interpolate=pm(r.type||r),null!=r.gamma&&(i.interpolateGamma=pm(r.gamma))),null!=e.nice&&(a=e.nice,u.nice=s(a)?{interval:pm(a.interval),step:pm(a.step)}:pm(a)),e)u.hasOwnProperty(n)||"name"===n||(u[n]=pm(e[n],t))}function pm(e,t){return s(e)?e.signal?t.signalRef(e.signal):o("Unsupported object: "+c(e)):e}function gm(e){o("Can not find data set: "+c(e))}function mm(e,t,n){return e?e.signal?n.signalRef(e.signal):(Iv(e)?function(e,t,n){return e.map(function(e){return pm(e,n)})}:e.fields?function(e,t,n){var r=e.data,i=e.fields.reduce(function(e,t){return t=f(t)?{data:r,field:t}:Iv(t)||t.signal?function(e,t){var n="_:vega:_"+CT++,r=oT({});if(Iv(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+c(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,ST({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e},[]);return(cm(t.type)?function(e,t,n){var r,i,a;return r=n.map(function(e){var n=t.getData(e.data);return n||gm(e.data),n.countsRef(t,e.field)}),i=t.add(rT({groupby:FR,ops:["sum"],fields:[t.fieldRef("count")],as:["count"],pulse:r})),a=t.add(oT({pulse:Hg(i)})),Hg(t.add(AT({field:FR,sort:t.sortRef(vm(e.sort,!0)),pulse:Hg(a)})))}:dm(t.type)?function(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||gm(e.data),n.domainRef(t,e.field)});return Hg(t.add(mT({values:r})))}:function(e,t,n){var r=n.map(function(e){var n=t.getData(e.data);return n||gm(e.data),n.extentRef(t,e.field)});return Hg(t.add(gT({extents:r})))})(e,n,i)}:function(e,t,n){var r=n.getData(e.data);return r||gm(e.data),cm(t.type)?r.valuesRef(n,e.field,vm(e.sort,!1)):dm(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)})(e,t,n):void(null==t.domainMin&&null==t.domainMax||o("No scale domain defined for domainMin/domainMax to override."))}function vm(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field?o("Multiple domain scales can not sort by field."):t&&e.op&&"count"!==e.op&&o("Multiple domain scales support op count only."):o("No field provided for sort aggregate op: "+e.op):s(e)?e.field="key":e={field:"key"}),e}function ym(e,t,n){return Iv(e)?e.map(function(e){return ym(e,t,n)}):s(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:o("Unsupported parameter object: "+c(e)):e}function bm(e,t,n,r){var i=Bg(e,t);return i.$fields.forEach(function(e){r[e]=1}),z(n,i.$params),i.$expr}function _m(e,t,n,r){return function e(t,n,r,i){var a,s,l;if(t.signal)a="datum",l=bm(t.signal,n,r,i);else if(t.group||t.parent){for(s=Math.max(1,t.level||1),a="item";0<s--;)a+=".mark.group";t.parent?(l=t.parent,a+=".datum"):l=t.group}else t.datum?(a="datum",l=t.datum):o("Invalid field reference: "+c(t));return t.signal||(f(l)?(i[l]=1,l=u(l).map(c).join("][")):l=e(l,n,r,i)),a+"["+l+"]"}(s(e)?e:{datum:e},t,n,r)}function xm(e,t,n,r,i){var a,o,u,s=wm(e.scale,n,r,i);return null!=e.range?(o=s+".range()",t=0===(a=+e.range)?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=function(e,t){if(!f(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}(e.scale,n))&&(a=(o=s+".bandwidth")+"()"+(1===(a=+e.band)?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t}function wm(e,t,n,r){var i;if(f(e))i=fR+e,n.hasOwnProperty(i)||(n[i]=t.scaleRef(e)),i=c(i);else{for(i in t.scales)n[fR+i]=t.scaleRef(i);i=c(fR)+"+"+(e.signal?"("+bm(e.signal,t,n,r)+")":_m(e,t,n,r))}return"_["+i+"]"}function km(e,t,n,r){return s(e)?"("+Mm(null,e,t,n,r)+")":e}function Mm(e,t,n,r,i){if(null!=t.gradient)return o=n,u=r,s=i,"this.gradient("+wm((a=t).gradient,o,u,s)+","+c(a.start)+","+c(a.stop)+","+c(a.count)+")";var a,o,u,s,f=t.signal?bm(t.signal,n,r,i):t.color?function(e,t,n,r){function i(e,i,a,o){return"this."+e+"("+[Mm(null,i,t,n,r),Mm(null,a,t,n,r),Mm(null,o,t,n,r)].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}(t.color,n,r,i):null!=t.field?_m(t.field,n,r,i):void 0!==t.value?c(t.value):void 0;return null!=t.scale&&(f=xm(t,f,n,r,i)),void 0===f&&(f=null),null!=t.exponent&&(f="Math.pow("+f+","+km(t.exponent,n,r,i)+")"),null!=t.mult&&(f+="*"+km(t.mult,n,r,i)),null!=t.offset&&(f+="+"+km(t.offset,n,r,i)),t.round&&(f="Math.round("+f+")"),f}function Sm(e,t,n){return e+"["+c(t)+"]="+n+";"}function Em(e,t,n,r,i){var a="";return t.forEach(function(e){var t=Mm(0,e,n,r,i);a+=e.test?bm(e.test,n,r,i)+"?"+t+":":t}),Sm("o",e,a)}function Om(e,t,n,r){var i,a,o,u,s,f={},c="var o=item,datum=o.datum,$;";for(i in e)a=e[i],c+=Iv(a)?Em(i,a,r,n,f):Sm("o",i,Mm(0,a,r,n,f));return o=e,s="",tz[u=t]||(o.x2&&(o.x?(nz[u]&&(s+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),s+="o.width=o.x2-o.x;"):s+="o.x=o.x2-(o.width||0);"),o.xc&&(s+="o.x=o.xc-(o.width||0)/2;"),o.y2&&(o.y?(nz[u]&&(s+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),s+="o.height=o.y2-o.y;"):s+="o.y=o.y2-(o.height||0);"),o.yc&&(s+="o.y=o.yc-(o.height||0)/2;")),c+=s,{$expr:c+="return 1;",$fields:Object.keys(f),$output:Object.keys(e)}}function Am(e){return s(e)?z({},e):{value:e}}function Cm(e,t,n){return null!=n?(e[t]=s(n)&&!Iv(n)?n:{value:n},1):0}function Rm(e,t,n){for(var r in t)n&&n.hasOwnProperty(r)||(e[r]=z(e[r]||{},t[r]));return e}function Tm(e,t,n,r,i,a){var o,u;for(u in(a=a||{}).encoders={$encode:o={}},e=function(e,t,n,r,i){var a,o,u={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null);for(a in o=n===iz?i.group:n===rz?z({},i.mark,i[t]):null)Nm(a,e)||("fill"===a||"stroke"===a)&&(Nm("fill",e)||Nm("stroke",e))||(u[a]=zm(o[a]));return O(r).forEach(function(t){var n=i.style&&i.style[t];for(var r in n)Nm(r,e)||(u[r]=zm(n[r]))}),(e=z({},e)).enter=z(u,e.enter),e}(e,t,n,r,i.config))o[u]=Om(e[u],t,a,i);return a}function zm(e){return e&&e.signal?{signal:e.signal}:{value:e}}function Nm(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}function Dm(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:Rm(a,o,ez)}}function Pm(e,t,n){return Qg(t[e],n[e])}function Lm(e,t){return Qg(e.direction,t)===jT}function qm(e,t){return Qg(e.gradientLength,t.gradientLength||t.gradientWidth)}function $m(e,t){return Qg(e.gradientThickness,t.gradientThickness||t.gradientHeight)}function jm(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Fm(e,t,n,r){var i,a,o,u,s={value:0},f=Lm(e,t.gradientDirection),c=Am($m(e,t)),l=qm(e,t),d=Pm("labelOverlap",e,t),h={},p="";return h.enter=i={opacity:s},Cm(i,"fill",Pm("labelColor",e,t)),Cm(i,"font",Pm("labelFont",e,t)),Cm(i,"fontSize",Pm("labelFontSize",e,t)),Cm(i,"fontWeight",Pm("labelFontWeight",e,t)),Cm(i,"limit",Qg(e.labelLimit,t.gradientLabelLimit)),h.exit={opacity:s},h.update=a={opacity:{value:1},text:{field:IT}},f?(i.align={value:"left"},i.baseline=a.baseline={signal:Ez},o="y",u="x",p="1-"):(i.align=a.align={signal:Sz},i.baseline={value:"top"},o="x",u="y"),i[o]=a[o]={signal:p+"datum."+BT,mult:l},i[u]=a[u]=c,c.offset=Qg(e.labelOffset,t.gradientLabelOffset)||0,e=Dm(Mz,mz,HT,YT,r,h,n),d&&(e.overlap={method:d,order:"datum."+FT}),e}function Im(e,t,n,r,i,a,o,u){return{type:_z,name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}}function Um(e,t){return{align:Pm("gridAlign",e,t),center:{row:!0,column:!1},columns:(n=e,r=t,Qg(n.columns,Qg(r.columns,+Lm(n,r.symbolDirection)))),padding:{row:Pm("rowPadding",e,t),column:Pm("columnPadding",e,t)}};var n,r}function Bm(e){return s(e)&&e.signal?e.signal:c(e)}function Wm(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===_z?az:t||rz:t}function Gm(e,t){var n=fn(e.type);n||o("Unrecognized transform type: "+c(e.type));var r=Gg(n.type.toLowerCase(),null,Ym(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Ym(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)o[(r=e.params[i]).name]=Hm(r,t,n);return o}function Hm(e,t,n){var r,i,a,u=e.type,s=t[e.name];return"index"===u?function(e,t,n){return f(t.from)||o('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==s?"param"===u?(i=n,a=t[(r=e).name],r.array?(Iv(a)||o("Expected an array of sub-parameters. Instead: "+c(a)),a.map(function(e){return Xm(r,e,i)})):Xm(r,a,i)):"projection"===u?n.projectionRef(t[e.name]):e.array&&!Jg(s)?s.map(function(t){return Vm(e,t,n)}):Vm(e,s,n):void(e.required&&o("Missing required "+c(t.type)+" parameter: "+c(e.name)))}function Vm(e,t,n){var r=e.type;if(Jg(t))return Zm(r)?o("Expression references can not be signals."):Jm(r)?n.fieldRef(t):Qm(r)?n.compareRef(t):n.signalRef(t.signal);var i,a,u=e.expr||Jm(r);return u&&(a=t)&&a.expr?Bg(t.expr,n):u&&(i=t)&&i.field?Vg(t.field):Zm(r)?Bg(t,n):"data"===r?Hg(n.getData(t).values):Jm(r)?Vg(t):Qm(r)?n.compareRef(t):t}function Xm(e,t,n){var r,i,a,u,s;for(u=0,s=e.params.length;u<s;++u){for(a in(i=e.params[u]).key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||o("Unsupported parameter: "+c(t)),r=z(Ym(i,t,n),i.key),Hg(n.add(yT(r)))}function Zm(e){return"expr"===e}function Jm(e){return"field"===e}function Qm(e){return"compare"===e}function Km(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Hg(t.getData(e.data).output)}function ev(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function tv(e){return f(e)?e:null}function nv(e,t,n){var r,i=Zg(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function rv(e,t,n,r,i,a,o){var u,f,c,l=t[n]||(t[n]={}),d=s(c=a)?(c.order===IR?"-":"+")+Zg(c.op,c.field):"",h=tv(i);if(null!=h&&(e=t.scope,u=l[h+=d?"|"+d:""]),!u){var p=a?{field:FR,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:Hg(t.output)};d&&(p.sort=e.sortRef(a)),f=e.add(Gg(r,void 0,p)),o&&(t.index[i]=f),u=Hg(f),null!=h&&(l[h]=u)}return u}function iv(e,t,n){var r,i=e.remove,a=e.insert,o=e.toggle,u=e.modify,s=e.values,f=t.add(Yg());r=Bg("if("+e.trigger+',modify("'+n+'",'+[a,i,o,u,s].map(function(e){return null==e?"null":e}).join(",")+"),0)",t),f.update=r.$expr,f.params=r.$params}function av(e,t){var n,r,i,a,u,f,l,d,h,p,g,m,v,y,b,_,x,w,k,M,S,E,A,C,R,T,N,D,P,L,q,$,j,F,I,U,B,W,G,Y,H,V,X=Wm(e),Z=e.type===_z,J=e.from&&e.from.facet,Q=e.layout||X===az||X===iz,K=X===rz||Q||J,ee=e.overlap;y=e.from,b=Z,_=t,y?(x=y.facet)&&(b||o("Only group marks can be faceted."),null!=x.field?M=S=Km(x,_):(y.data?S=Hg(_.getData(y.data).aggregate):((k=Gm(z({type:"aggregate",groupby:O(x.groupby)},x.aggregate),_)).params.key=_.keyRef(x.groupby),k.params.pulse=Km(x,_),M=S=Hg(_.add(k))),w=_.keyRef(x.groupby,!0))):M=Hg(_.add(oT(null,[{}]))),M||(M=Km(y,_)),i={key:w,pulse:M,parent:S},h=Hg(r=t.add(sT({key:i.key||(e.key?Vg(e.key):void 0),pulse:i.pulse,clean:!Z}))),r=a=t.add(oT({pulse:h})),p=Hg(r=t.add(pT({markdef:(N=e,{marktype:N.type,name:N.name||void 0,role:N.role||Wm(N),zindex:+N.zindex||void 0}),interactive:(R=e.interactive,T=t,R&&R.signal?T.signalRef(R.signal):!1!==R),clip:(E=e.clip,A=t,s(E)&&(E.signal?C=E.signal:E.path?C="pathShape("+Bm(E.path)+")":E.sphere&&(C="geoShape("+Bm(E.sphere)+', {type: "Sphere"})')),C?A.signalRef(C):!!E),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Hg(r)}))),(r=t.add(fT(Tm(e.encode,e.type,X,e.style,t,{pulse:p})))).params.parent=t.encode(),e.transform&&e.transform.forEach(function(e){var n=Gm(e,t);(n.metadata.generates||n.metadata.changes)&&o("Mark transforms should not generate new data."),n.params.pulse=Hg(r),t.add(r=n)}),e.sort&&(r=t.add(ET({sort:t.compareRef(e.sort,!0),pulse:Hg(r)}))),g=Hg(r),(J||Q)&&(m=Hg(Q=t.add(OT({layout:t.objectProperty(e.layout),legendMargin:t.config.legendMargin,mark:p,pulse:g})))),v=Hg(u=t.add(aT({mark:p,pulse:m||g}))),Z&&(K&&((n=t.operators).pop(),Q&&n.pop()),t.pushState(g,m||v,h),J?(F=t,I=i,Y=(j=e).from.facet,H=Y.name,V=Km(Y,F),Y.name||o("Facet must have a name: "+c(Y)),Y.data||o("Facet must reference a data set: "+c(Y)),Y.field?G=F.add(bT({field:F.fieldRef(Y.field),pulse:V})):Y.groupby?G=F.add(cT({key:F.keyRef(Y.groupby),group:Hg(F.proxy(I.parent)),pulse:V})):o("Facet must specify groupby or field: "+c(Y)),B=(U=F.fork()).add(oT()),W=U.add(ST({pulse:Hg(B)})),U.addData(H,new ev(U,B,B,W)),U.addSignal("parent",null),G.params.subflow={$subflow:pv(j,U).toRuntime()}):K?(D=e,L=i,q=(P=t).add(bT({pulse:L.pulse})),($=P.fork()).add(ST()),$.addSignal("parent",null),q.params.subflow={$subflow:pv(D,$).toRuntime()}):pv(e,t),t.popState(),K&&(Q&&n.push(Q),n.push(u))),ee&&(r={method:!0===ee.method?"parity":ee.method,pulse:v},ee.order&&(r.sort=t.compareRef({field:ee.order})),ee.bound&&(r.boundScale=t.scaleRef(ee.bound.scale),r.boundOrient=ee.bound.orient,r.boundTolerance=ee.bound.tolerance),v=Hg(t.add(vT(r)))),f=t.add(kT({pulse:v})),l=t.add(ST({pulse:Hg(f)},void 0,t.parent())),null!=e.name&&(d=e.name,t.addData(d,new ev(t,a,f,l)),e.on&&e.on.forEach(function(e){(e.insert||e.remove||e.toggle)&&o("Marks only support modify triggers."),iv(e,t,d)}))}function ov(e,t){var n,r,i,a,u,s,f,c,l,d,h,p,g,m,v,y,b,_,x,w,k,M,S,E,O,A,C,R,T,z,N,D,P,L,q,$,j,F,I,U,B,W,G,Y,H,V,X,Z,J,Q,K,ee,te,ne,re,ie,ae,oe,ue,se,fe,ce,le,de,he,pe,ge,me,ve,ye,be,_e,xe,we,ke,Me,Se,Ee,Oe,Ae,Ce,Re,Te,ze,Ne,De,Pe=t.config.legend,Le=e.encode||{},qe=Le.legend||{},$e=qe.name||void 0,je=qe.interactive,Fe=qe.style,Ie=KT.reduce(function(t,n){return t||e[n]},0);return Ie||o("Missing valid scale for legend."),u=function(e,t){var n=e.type||ZT;e.type||1!==(i=e,KT.reduce(function(e,t){return e+(i[t]?1:0)},0))||!e.fill&&!e.stroke||(r=t,n=NT.hasOwnProperty(r)?JT:lm(t)?QT:ZT);var r,i;return n!==JT?n:lm(t)?QT:JT}(e,t.scaleType(Ie)),s={orient:Pm("orient",e,Pe),title:null!=e.title,type:u},f=Hg(t.add(oT(null,[s]))),qe=Rm({enter:(d=e,h=Pe,p={},Cm(p,"fill",Pm("fillColor",d,h))+Cm(p,"stroke",Pm("strokeColor",d,h))+Cm(p,"strokeWidth",Pm("strokeWidth",d,h))+Cm(p,"cornerRadius",Pm("cornerRadius",d,h))+Cm(p,"strokeDash",h.strokeDash)?p:void 0),update:{offset:Am(Pm("offset",e,Pe)),padding:Am(Pm("padding",e,Pe)),titlePadding:Am(Pm("titlePadding",e,Pe))}},qe,ez),n={enter:{x:{value:0},y:{value:0}}},c=Hg(t.add(hT(i={type:u,scale:t.scaleRef(Ie),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u===JT?(a=[(he=e,pe=Ie,ge=Pe,me=Le.gradient,ke={value:0},Me=Lm(he,ge.gradientDirection),Se=$m(he,ge),Ee=qm(he,ge),Oe={},Me?(be=[0,1],_e=[0,0],xe=Se,we=Ee):(be=[0,0],_e=[1,0],xe=Ee,we=Se),Oe.enter=ve={opacity:ke,x:ke,y:ke},Cm(ve,"stroke",Pm("gradientStrokeColor",he,ge)),Cm(ve,"strokeWidth",Pm("gradientStrokeWidth",he,ge)),Oe.exit={opacity:ke},Oe.update=ye={x:ke,y:ke,fill:{gradient:pe,start:be,stop:_e},opacity:{value:1}},ve.width=ye.width=Am(xe),ve.height=ye.height=Am(we),Dm(xz,gz,null,void 0,void 0,Oe,me)),Fm(e,Pe,Le.labels,c)],i.count=i.count||t.signalRef("max(2,2*floor(("+Kg(qm(e,Pe))+")/100))")):u===QT?a=[(Z=e,J=Ie,Q=Pe,K=Le.gradient,ee=c,ue={value:0},se=Lm(Z,Q.gradientDirection),fe=$m(Z,Q),ce=qm(Z,Q),le={},de="",se?(re="y",ae="y2",ie="x",oe="width",de="1-"):(re="x",ae="x2",ie="y",oe="height"),le.enter=te={opacity:ue},Cm(te,"stroke",Pm("gradientStrokeColor",Z,Q)),Cm(te,"strokeWidth",Pm("gradientStrokeWidth",Z,Q)),le.exit={opacity:ue},le.update=ne={opacity:{value:1}},te.fill=ne.fill={scale:J,field:YT},te[re]=ne[re]={signal:de+"datum."+BT,mult:ce},te[ie]=ne[ie]={value:0},te[ae]=ne[ae]={signal:de+"datum."+WT,mult:ce},te[oe]=ne[oe]=Am(fe),Dm(xz,hz,null,YT,ee,le,K)),Fm(e,Pe,Le.labels,c)]:(r=Um(e,Pe),a=[(O=e,A=Pe,C=Le,R=c,T=Kg(r.columns),j=C.entries,F=!(!j||!j.interactive),I=j?j.name:void 0,U=Pm("clipHeight",O,A),B=Pm("symbolOffset",O,A),W={data:"value"},G={},Y=T+"?datum."+UT+":datum."+GT,H=U?Am(U):{field:GT},V="datum."+FT,X="max(1,"+T+")",G={enter:z={opacity:Oz},exit:{opacity:Oz},update:N={opacity:{value:1}}},O.fill||(Cm(z,"fill",A.symbolBaseFillColor),Cm(z,"stroke",A.symbolBaseStrokeColor)),Cm(z,"shape",Pm("symbolType",O,A)),Cm(z,"size",Pm("symbolSize",O,A)),Cm(z,"strokeWidth",Pm("symbolStrokeWidth",O,A)),Cm(z,"fill",Pm("symbolFillColor",O,A)),Cm(z,"stroke",Pm("symbolStrokeColor",O,A)),z.x=N.x={signal:Y,mult:.5,offset:B},H.mult=.5,z.y=N.y=H,KT.forEach(function(e){O[e]&&(N[e]=z[e]={scale:O[e],field:YT})}),P=Dm(kz,vz,null,YT,W,G,C.symbols),U&&(P.clip=!0),G={enter:z={opacity:Oz},exit:{opacity:Oz},update:N={opacity:{value:1},text:{field:IT}}},Cm(z,"align",Pm("labelAlign",O,A)),Cm(z,"baseline",Pm("labelBaseline",O,A)),Cm(z,"fill",Pm("labelColor",O,A)),Cm(z,"font",Pm("labelFont",O,A)),Cm(z,"fontSize",Pm("labelFontSize",O,A)),Cm(z,"fontWeight",Pm("labelFontWeight",O,A)),Cm(z,"limit",Pm("labelLimit",O,A)),(D=Am(B)).offset=Pm("labelOffset",O,A),z.x=N.x={signal:Y,offset:D},z.y=N.y=H,L=Dm(Mz,mz,HT,YT,W,G,C.labels),G={enter:{width:Oz,height:U?Am(U):Oz,opacity:Oz},exit:{opacity:Oz},update:N={opacity:{value:1},row:{signal:null},column:{signal:null}}},Lm(O,A.symbolDirection)?(q="ceil(item.mark.items.length/"+X+")",N.row.signal=V+"%"+q,N.column.signal="floor("+V+"/"+q+")",$={field:["row",V]}):(N.row.signal="floor("+V+"/"+X+")",N.column.signal=V+"%"+X,$={field:V}),N.column.signal=T+"?"+N.column.signal+":"+V,(O=Im(az,null,I,R={facet:{data:R,name:"value",groupby:FT}},F,Rm(G,j,ez),[P,L])).sort=$,O)],i.size=(g=e,m=t,v=a[0].marks,_=jm("strokeWidth",v[0].encode),b=g.size?'scale("'+g.size+'",datum)':jm("size",v[0].encode),x=v[1].encode,w=m,k=HT,y=jm("fontSize",x)||(M="fontSize",S=k,(E=w.config.style[S])&&E[M]),Bg("max(ceil(sqrt("+Kg(b)+")+"+Kg(_)+"),"+Kg(y)+")",m))),a=[Im(pz,null,null,f,je,n,a,r)],s.title&&a.push((Ae=e,Ce=Pe,Re=Le.title,Te=f,(De={}).enter=ze={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:Ne={value:0}},Cm(ze,"align",Pm("titleAlign",Ae,Ce)),Cm(ze,"baseline",Pm("titleBaseline",Ae,Ce)),Cm(ze,"fill",Pm("titleColor",Ae,Ce)),Cm(ze,"font",Pm("titleFont",Ae,Ce)),Cm(ze,"fontSize",Pm("titleFontSize",Ae,Ce)),Cm(ze,"fontWeight",Pm("titleFontWeight",Ae,Ce)),Cm(ze,"limit",Pm("titleLimit",Ae,Ce)),De.exit={opacity:Ne},De.update={opacity:{value:1},text:Am(Ae.title)},Dm(Mz,yz,VT,null,Te,De,Re))),l=Im(dz,Fe,$e,f,je,qe,a),e.zindex&&(l.zindex=e.zindex),av(l,t)}function uv(e,t,n){return'item.anchor==="start"?'+e+':item.anchor==="end"?'+t+":"+n}function sv(e,t){e=f(e)?{text:e}:e;var n,r,i,a=t.config.title,o=z({},e.encode);return n={orient:Pm("orient",e,a)},r=Hg(t.add(oT(null,[n]))),o.name=e.name,o.interactive=e.interactive,i=function(e,t,n,r){var i,a,o,u,s={value:0},f=e.text,c=Pm("orient",e,t),l=Pm("anchor",e,t),d=c===LT||c===PT?-1:1,h=c===PT||c===$T,p={group:h?"width":"height"},g={};return o={field:p,mult:{signal:Rz}},u=d<0?s:h?{field:{group:"height"}}:{field:{group:"width"}},g.enter=i={opacity:s},Cm(i,"fill",Pm("color",e,t)),Cm(i,"font",Pm("font",e,t)),Cm(i,"fontSize",Pm("fontSize",e,t)),Cm(i,"fontWeight",Pm("fontWeight",e,t)),g.exit={opacity:s},g.update=a={opacity:{value:1},text:Am(f),anchor:Am(l),orient:Am(c),extent:{field:p},align:{signal:Cz}},h?(a.x=o,a.y=u,a.angle=s,a.baseline={value:c===PT?$T:PT}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:$T}),Cm(a,"offset",Pm("offset",e,t)||0),Cm(a,"frame",Pm("frame",e,t)),Cm(a,"angle",Pm("angle",e,t)),Cm(a,"baseline",Pm("baseline",e,t)),Cm(a,"limit",Pm("limit",e,t)),Dm(Mz,bz,e.style||XT,null,r,g,n)}(e,a,o,r),e.zindex&&(i.zindex=e.zindex),av(i,t)}function fv(e,t){var n=[];e.transform&&e.transform.forEach(function(e){n.push(Gm(e,t))}),e.on&&e.on.forEach(function(n){iv(n,t,e.name)}),t.addDataPipeline(e.name,function(e,t,n){var r,i,a,o,u,s=[],f=null,c=!1,l=!1;for(e.values?s.push(f=cv({$ingest:e.values,$format:e.format})):e.url?s.push(f=cv({$request:e.url,$format:e.format})):e.source&&(f=r=O(e.source).map(function(e){return Hg(t.getData(e).output)}),s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,f||u.source||s.push(f=cv()),s.push(o),u.generates&&(l=!0),u.modifies&&!l&&(c=!0),u.source?f=o:u.changes&&(f=null);return r&&(a=r.length-1,s[0]=wT({derive:c,pulse:a?r:r[0]}),(c||a)&&s.splice(1,0,cv())),f||s.push(cv()),s.push(ST({})),s}(e,t,n))}function cv(e){var t=oT({},e);return t.metadata={source:!0},t}function lv(e,t){return{scale:e.scale,range:t}}function dv(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function hv(e,t){var n,r,i,a,o,u,s,f,c,l,d,h,p,g,m,v,y,b,_,x,w,k,M,S,E,O,A,C,R,T,N,D,P,L,q,$,j,F,I,U,B,W,G,Y,H,V,X,Z,J,Q,K,ee,te,ne,re,ie,ae,oe,ue,se,fe,ce,le,de,he,pe,ge,me,ve,ye,be,_e,xe,we,ke,Me,Se,Ee,Oe,Ae,Ce,Re,Te,ze,Ne,De,Pe,Le,qe=(s=e,c=(f=t).config,l=s.orient,d=l===PT||l===$T?c.axisX:c.axisY,h=c["axis"+l[0].toUpperCase()+l.slice(1)],p="band"===f.scaleType(s.scale)&&c.axisBand,d||h||p?z({},c.axis,d,h,p):c.axis),$e=e.encode||{},je=$e.axis||{},Fe=je.name||void 0,Ie=je.interactive,Ue=je.style;return n={orient:e.orient,ticks:!!Pm("ticks",e,qe),labels:!!Pm("labels",e,qe),grid:!!Pm("grid",e,qe),domain:!!Pm("domain",e,qe),title:!!Qg(e.title,!1)},r=Hg(t.add(oT({},[n]))),je=Rm({update:{range:{signal:'abs(span(range("'+e.scale+'")))'},offset:Am(Qg(e.offset,0)),position:Am(Qg(e.position,0)),titlePadding:Am(Pm("titlePadding",e,qe)),minExtent:Am(Pm("minExtent",e,qe)),maxExtent:Am(Pm("maxExtent",e,qe))}},$e.axis,ez),i=Hg(t.add(iT({scale:t.scaleRef(e.scale),extra:t.property(Pm("tickExtra",e,qe)),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push((g=e,m=qe,v=$e.grid,y=i,O=g.orient,A=g.gridScale,R=(C=O===LT||O===PT?1:-1)*g.offset||0,(N={}).enter=b={opacity:T={value:0}},Cm(b,"stroke",Pm("gridColor",g,m)),Cm(b,"strokeWidth",Pm("gridWidth",g,m)),Cm(b,"strokeDash",Pm("gridDash",g,m)),N.exit=_={opacity:T},N.update=x={},Cm(x,"opacity",Pm("gridOpacity",g,m)),w={scale:g.scale,field:YT,band:Pm("bandPosition",g,m),round:Pm("tickRound",g,m),extra:Pm("tickExtra",g,m),offset:Pm("tickOffset",g,m)},O===PT||O===$T?(k="x",M="y",E="height"):(k="y",M="x",E="width"),S=M+"2",x[k]=b[k]=_[k]=w,A?(b[M]={scale:A,range:0,mult:C,offset:R},x[S]=b[S]={scale:A,range:1,mult:C,offset:R}):(b[M]={value:R},x[S]=b[S]={signal:E,mult:C,offset:R}),Dm(wz,sz,null,YT,y,N,v))),n.ticks&&(a=Pm("tickSize",e,qe),u.push((D=e,P=qe,L=$e.ticks,q=i,$=a,W=D.orient,G=W===LT||W===PT?-1:1,(H={}).enter=j={opacity:Y={value:0}},Cm(j,"stroke",Pm("tickColor",D,P)),Cm(j,"strokeWidth",Pm("tickWidth",D,P)),H.exit=F={opacity:Y},H.update=I={opacity:{value:1}},(U=Am($)).mult=G,B={scale:D.scale,field:YT,band:Pm("bandPosition",D,P),round:Pm("tickRound",D,P),extra:Pm("tickExtra",D,P),offset:Pm("tickOffset",D,P)},W===PT||W===$T?(I.y=j.y=Y,I.y2=j.y2=U,I.x=j.x=F.x=B):(I.x=j.x=Y,I.x2=j.x2=U,I.y=j.y=F.y=B),Dm(wz,cz,null,YT,q,H,L)))),n.labels&&(a=n.ticks?a:0,u.push((V=e,X=qe,Z=$e.labels,J=i,Q=a,ie=V.orient,ae=ie===LT||ie===PT?-1:1,oe=V.scale,ue=Pm("labelBound",V,X),se=Pm("labelFlush",V,X),
fe=null!=se&&!1!==se&&(se=+se)===se,ce=+Pm("labelFlushOffset",V,X),le=Pm("labelOverlap",V,X),(he={}).enter=K={opacity:de={value:0}},Cm(K,"angle",Pm("labelAngle",V,X)),Cm(K,"fill",Pm("labelColor",V,X)),Cm(K,"font",Pm("labelFont",V,X)),Cm(K,"fontSize",Pm("labelFontSize",V,X)),Cm(K,"fontWeight",Pm("labelFontWeight",V,X)),Cm(K,"limit",Pm("labelLimit",V,X)),he.exit=ee={opacity:de},he.update=te={opacity:{value:1},text:{field:IT}},(ne=Am(Q)).mult=ae,ne.offset=Am(Pm("labelPadding",V,X)||0),ne.offset.mult=ae,re={scale:oe,field:YT,band:.5,offset:Pm("tickOffset",V,X)},ie===PT||ie===$T?(te.y=K.y=ne,te.x=K.x=ee.x=re,Cm(te,"align",fe?dv(oe,se,'"left"','"right"','"center"'):"center"),fe&&ce&&Cm(te,"dx",dv(oe,se,-ce,ce,0)),Cm(te,"baseline",ie===PT?"bottom":"top")):(te.x=K.x=ne,te.y=K.y=ee.y=re,Cm(te,"align",ie===qT?"left":"right"),Cm(te,"baseline",fe?dv(oe,se,'"bottom"','"top"','"middle"'):"middle"),fe&&ce&&Cm(te,"dy",dv(oe,se,ce,-ce,0))),V=Dm(Mz,fz,HT,YT,J,he,Z),(le||ue)&&(V.overlap={method:le,order:"datum.index",bound:ue?{scale:oe,orient:ie,tolerance:+ue}:null}),V))),n.domain&&u.push((pe=e,ge=qe,me=$e.domain,ve=r,ke=pe.orient,(Se={}).enter=ye={opacity:Me={value:0}},Cm(ye,"stroke",Pm("domainColor",pe,ge)),Cm(ye,"strokeWidth",Pm("domainWidth",pe,ge)),Se.exit={opacity:Me},Se.update=be={opacity:{value:1}},ke===PT||ke===$T?(_e="x",we="y"):(_e="y",we="x"),xe=_e+"2",ye[we]=Me,be[_e]=ye[_e]=lv(pe,0),be[xe]=ye[xe]=lv(pe,1),Dm(wz,uz,null,null,ve,Se,me))),n.title&&u.push((Ee=e,Oe=qe,Ae=$e.title,Ce=r,Ne=Ee.orient,De=Ne===LT||Ne===PT?-1:1,Pe=Ne===PT||Ne===$T,(Le={}).enter=Re={opacity:{value:0}},Cm(Re,"align",Pm("titleAlign",Ee,Oe)),Cm(Re,"fill",Pm("titleColor",Ee,Oe)),Cm(Re,"font",Pm("titleFont",Ee,Oe)),Cm(Re,"fontSize",Pm("titleFontSize",Ee,Oe)),Cm(Re,"fontWeight",Pm("titleFontWeight",Ee,Oe)),Cm(Re,"limit",Pm("titleLimit",Ee,Oe)),Le.exit={opacity:{value:0}},Le.update=Te={opacity:{value:1},text:Am(Ee.title)},ze={scale:Ee.scale,range:.5},Pe?(Te.x=ze,Te.angle={value:0},Te.baseline={value:Ne===PT?"bottom":"top"}):(Te.y=ze,Te.angle={value:90*De},Te.baseline={value:"bottom"}),Cm(Te,"angle",Pm("titleAngle",Ee,Oe)),Cm(Te,"baseline",Pm("titleBaseline",Ee,Oe)),!Cm(Te,"x",Pm("titleX",Ee,Oe))&&Pe&&!Nm("x",Ae)&&(Le.enter.auto={value:!0}),!Cm(Te,"y",Pm("titleY",Ee,Oe))&&!Pe&&!Nm("y",Ae)&&(Le.enter.auto={value:!0}),Dm(Mz,lz,VT,null,Ce,Le,Ae))),o=Im(oz,Ue,Fe,r,Ie,je,u),e.zindex&&(o.zindex=e.zindex),av(o,t)}function pv(e,t,n){var r=O(e.signals),i=O(e.scales);return n||r.forEach(function(e){wp(e,t)}),O(e.projections).forEach(function(e){!function(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=ym(e[r],r,t));t.addProjection(e.name,n)}(e,t)}),i.forEach(function(e){var n,r,i;r=t,i=(n=e).type||"linear",TT.hasOwnProperty(i)||o("Unrecognized scale type: "+c(i)),r.addScale(n.name,{type:i,domain:void 0})}),O(e.data).forEach(function(e){fv(e,t)}),i.forEach(function(e){hm(e,t)}),r.forEach(function(e){!function(e,t){var n=t.getSignal(e.name);if(e.update){var r=Bg(e.update,t);n.update=r.$expr,n.params=r.$params}e.on&&e.on.forEach(function(e){sm(e,t,n.id)})}(e,t)}),O(e.axes).forEach(function(e){hv(e,t)}),O(e.marks).forEach(function(e){av(e,t)}),O(e.legends).forEach(function(e){ov(e,t)}),e.title&&sv(e.title,t),t.parseLambdas(),t}function gv(e,t){var n,r,i,a,o,u,f,c,l,d,h=t.config;return t.background=e.background||h.background,t.eventConfig=h.events,o=Hg(t.root=t.add(Yg())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",(u=e.padding,f=h,s(u=u||f.padding)?{top:_p(u.top),bottom:_p(u.bottom),left:_p(u.left),right:_p(u.right)}:{top:c=_p(u),bottom:c,left:c,right:c})),t.addSignal("autosize",(l=e.autosize,d=h,s(l=l||d.autosize)?l:{type:l=l||"pad"})),O(e.signals).forEach(function(e){Tz[e.name]||wp(e,t)}),r=t.add(oT()),i=Rm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(fT(Tm(i,_z,iz,e.style,t,{pulse:Hg(r)}))),a=t.add(OT({layout:t.objectProperty(e.layout),legendMargin:h.legendMargin,autosize:t.signalRef("autosize"),mark:o,pulse:Hg(i)})),t.operators.pop(),t.pushState(Hg(i),Hg(a),null),pv(e,t,!0),t.operators.push(a),n=t.add(aT({mark:o,pulse:Hg(a)})),n=t.add(kT({pulse:Hg(n)})),n=t.add(ST({pulse:Hg(n)})),t.addData("root",new ev(t,r,r,n)),t}function mv(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function vv(e){this.config=e.config,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function yv(e){return(Iv(e)?function(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(0<r?",":"")+(s(t)?t.signal||yv(t):c(t));return n+"]"}:function(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(1<++i?",":"")+c(t)+":"+(s(n)?n.signal||yv(n):c(n));return r+"}"})(e)}function bv(e){var t={padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:Lz},area:{fill:Lz},image:null,line:{stroke:Lz,strokeWidth:Pz},path:{stroke:Lz},rect:{fill:Lz},rule:{stroke:qz},shape:{stroke:Lz},symbol:{fill:Lz,size:64},text:{fill:qz,font:Nz,fontSize:11},style:{"guide-label":{fill:qz,font:Nz,fontSize:10},"guide-title":{fill:qz,font:Nz,fontSize:11,fontWeight:"bold"},"group-title":{fill:qz,font:Nz,fontSize:13,fontWeight:"bold"},point:{size:Dz,strokeWidth:Pz,shape:"circle"},circle:{size:Dz,strokeWidth:Pz},square:{size:Dz,strokeWidth:Pz,shape:"square"},cell:{fill:"transparent",stroke:jz}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:$z,grid:!1,gridWidth:1,gridColor:jz,gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:$z,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:jz,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:$z,titleAlign:"left",titleBaseline:"top",titleLimit:180,titlePadding:5},title:{orient:"top",anchor:"middle",offset:4},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};return(e||[]).forEach(function(e){var n,r,i;if(e)for(n in e)if("style"===n)for(n in i=t.style||(t.style={}),e.style)i[n]=z(i[n]||{},e.style[n]);else r=e[n],t[n]=s(r)&&!Iv(r)?z(s(t[n])?t[n]:{},r):r}),t}function _v(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function xv(e,t){return _v(["event"],e,t)}function wv(e,t,n){var r,i;for(r in n=n||{},e)(i=e[r])&&i.$expr&&i.$params&&wv(i.$params,t,n),n[r]=Iv(i)?i.map(function(e){return kv(e,t)}):kv(i,t);return n}function kv(e,t){if(!e||!s(e))return e;for(var n,r=0,i=Fz.length;r<i;++r)if(n=Fz[r],e.hasOwnProperty(n.key))return n.parse(e,t);return e}function Mv(e){return(e+"").toLowerCase()}function Sv(e,t){"operator"!==Mv(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?_v(["_"],e.update,t):null)}function Ev(e,t){var n=s(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,u=void 0;r||o("Source not defined: "+e.source),i=e.target&&e.target.$expr?xv(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(u=wv(a.$params,t)),a=_v(["_","event"],a.$expr,t)),t.update(e,r,i,a,u)}function Ov(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach(function(e){Sv(e,t)}),n.forEach(function(e){var n,r,i,a;r=t,(n=e).params&&((i=r.get(n.id))||o("Invalid operator id: "+n.id),a=wv(n.params,r),r.dataflow.connect(i,i.parameters(a)))}),(e.streams||[]).forEach(function(e){var n,r,i,a,u;r=t,a=null!=(n=e).filter?xv(n.filter,r):void 0,u=null!=n.stream?r.get(n.stream):void 0,n.source?u=r.events(n.source,n.type,a):n.merge&&(u=(i=n.merge.map(r.get.bind(r)))[0].merge.apply(i[0],i.slice(1))),n.between&&(i=n.between.map(r.get.bind(r)),u=u.between(i[0],i[1])),n.filter&&(u=u.filter(a)),null!=n.throttle&&(u=u.throttle(+n.throttle)),null!=n.debounce&&(u=u.debounce(+n.debounce)),null==u&&o("Invalid stream definition: "+JSON.stringify(n)),n.consume&&u.consume(!0),r.stream(n,u)}),(e.updates||[]).forEach(function(e){Ev(e,t)}),t.resolve()}function Av(e,t,n){return new Cv(e,t,n)}function Cv(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Rv(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function Tv(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Wz?r.left+r.right:0)}function zv(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Wz?r.top+r.bottom:0)}function Nv(e,t){return t.modified&&Iv(t.input.value)&&e.indexOf("_:vega:_")}function Dv(e,t){return!("parent"===e||t instanceof ob.proxy)}function Pv(e,t,n,r){var i,a,o=e.element();o&&o.setAttribute("title",null==(i=r)?"":Iv(i)?Lv(i):s(i)&&!q(i)?(a=i,Object.keys(a).map(function(e){var t=a[e];return e+": "+(Iv(t)?Lv(t):qv(t))}).join("\n")):i+"")}function Lv(e){return"["+e.map(qv).join(", ")+"]"}function qv(e){return Iv(e)?"[]":s(e)&&!q(e)?"{}":e}function $v(e,t){var n=this;t=t||{},on.call(n),n.loader(t.loader||n._loader),n.logLevel(t.logLevel||0),n._el=null,n._renderType=t.renderer||ew.Canvas,n._scenegraph=new Na;var r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Pv,n._redraw=!0,n._handler=(new Wa).scene(r),n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[];var i,a,o,u,s,f=(i=n,a=e,o=t.functions,Ov(a,Av(i,ob,o||TR)));n._runtime=f,n._signals=f.signals,n._bind=(e.bindings||[]).map(function(e){return{state:null,param:z({},e)}}),f.root&&f.root.set(r),r.source=f.data.root.input,n.pulse(f.data.root.input,n.changeset().insert(r.items)),n._background=f.background||null,n._eventConfig=(u=f.eventConfig,(s=(u=z({},u)).defaults)&&(Iv(s.prevent)&&(s.prevent=V(s.prevent)),Iv(s.allow)&&(s.allow=V(s.allow))),u),n._width=n.width(),n._height=n.height(),n._viewWidth=Tv(n,n._width),n._viewHeight=zv(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){function t(){e._autosize=e._resize=1}var n=e._signals,r=n[Uz],i=n[Bz],a=n[Wz];e._resizeWidth=e.add(null,function(n){e._width=n.size,e._viewWidth=Tv(e,n.size),t()},{size:r}),e._resizeHeight=e.add(null,function(n){e._height=n.size,e._viewHeight=zv(e,n.size),t()},{size:i});var o=e.add(null,t,{pad:a});e._resizeWidth.rank=r.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}(n),Qh(n)}function jv(e,t){return e._signals.hasOwnProperty(t)?e._signals[t]:o("Unrecognized signal name: "+c(t))}function Fv(e,t){var n=(e._targets||[]).filter(function(e){var n=e._update;return n&&n.handler===t});return n.length?n[0]:null}var Iv=Array.isArray,Uv=[],Bv=l("id"),Wv=r(function(e){return e},Uv,"identity"),Gv=r(function(){return 0},Uv,"zero"),Yv=r(function(){return 1},Uv,"one"),Hv=r(function(){return!0},Uv,"true"),Vv=r(function(){return!1},Uv,"false"),Xv=0,Zv=1,Jv=2,Qv=3,Kv=4,ey={},ty=Symbol("vega_id"),ny=1,ry="_:mod:_";(OS=ue.prototype).set=function(e,t,n,r){var i=this[e],a=this[ry];return null!=t&&0<=t?(i[t]!==n||r)&&(i[t]=n,a[t+":"+e]=-1,a[e]=-1):(i!==n||r)&&(this[e]=n,a[e]=Iv(n)?1+n.length:-1),this},OS.modified=function(e,t){var n,r=this[ry];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Iv(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&0<=t?t+1<r[e]||!!r[t+":"+e]:!!r[e]},OS.clear=function(){return this[ry]={},this};var iy=0,ay=new ue,oy=se.prototype;oy.targets=function(){return this._targets||(this._targets=J(Bv))},oy.set=function(e){return this.value!==e?(this.value=e,1):0},oy.skip=fe(1),oy.modified=fe(2),oy.parameters=function(e,t){function n(e,n,r){r instanceof se?(r!==s&&(t&&r.targets().add(s),l.push(r)),c.push({op:r,name:e,index:n})):f.set(e,n,r)}t=!1!==t;var r,i,a,u,s=this,f=s._argval=s._argval||new ue,c=s._argops=s._argops||[],l=[];for(r in e)if(i=e[r],"pulse"===r)O(i).forEach(function(e){e instanceof se?e!==s&&(e.targets().add(s),l.push(e)):o("Pulse parameters must be operator instances.")}),s.source=i;else if(Iv(i))for(f.set(r,-1,Array(a=i.length)),u=0;u<a;++u)n(r,u,i[u]);else n(r,-1,i);return this.marshall().clear(),l},oy.marshall=function(e){var t,n,r,i,a,o=this._argval||ay,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)a=(i=(t=u[n]).op).modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);return o},oy.evaluate=function(e){if(this._update){var t=this.marshall(e.stamp),n=this._update(t,e);if(t.clear(),n!==this.value)this.value=n;else if(!this.modified())return e.StopPropagation}},oy.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.stamp=e.stamp,(this.pulse=t)||e);var t};var uy=0,sy=ce.prototype;sy._filter=Hv,sy._apply=Wv,sy.targets=function(){return this._targets||(this._targets=J(Bv))},sy.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},sy.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},sy.filter=function(e){var t=le(e);return this.targets().add(t),t},sy.apply=function(e){var t=le(null,e);return this.targets().add(t),t},sy.merge=function(){var e=le();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},sy.throttle=function(e){var t=-1;return this.filter(function(){var n=Date.now();return e<n-t?(t=n,1):0})},sy.debounce=function(e){var t=le();return this.targets().add(le(null,null,T(e,function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},sy.between=function(e,t){var n=!1;return e.targets().add(le(null,null,function(){n=!0})),t.targets().add(le(null,null,function(){n=!1})),this.filter(function(){return n})};var fy=/^([A-Za-z]+:)?\/\//,cy="file://",ly={boolean:W,integer:g,number:g,date:Y,string:H,unknown:Wv},dy=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return xe(e)&&(e=+e)==~~e},xe,function(e){return!isNaN(Date.parse(e))}],hy=["boolean","integer","number","date"],py={},gy={},my=34,vy=10,yy=13;ke(","),ke("\t");var by={dsv:Se,csv:Me(","),tsv:Me("\t"),json:Ee,topojson:function(e,t){var n,r,i;return e=Ee(e,t),n=t&&(i=t.feature)?Ae:t&&(i=t.mesh)?ze:o("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r):o("Invalid TopoJSON object: "+i))&&r.features||[r]}},_y=new Date,xy=new Date,wy=De(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});wy.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?De(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):wy:null};var ky=6e4,My=36e5,Sy=De(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),Ey=De(function(e){e.setTime(Math.floor(e/ky)*ky)},function(e,t){e.setTime(+e+t*ky)},function(e,t){return(t-e)/ky},function(e){return e.getMinutes()}),Oy=De(function(e){var t=e.getTimezoneOffset()*ky%My;t<0&&(t+=My),e.setTime(Math.floor((+e-t)/My)*My+t)},function(e,t){e.setTime(+e+t*My)},function(e,t){return(t-e)/My},function(e){return e.getHours()}),Ay=De(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ky)/864e5},function(e){return e.getDate()-1}),Cy=Pe(0),Ry=Pe(1),Ty=(Pe(2),Pe(3),Pe(4)),zy=(Pe(5),Pe(6),De(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),Ny=De(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Ny.every=function(e){return isFinite(e=Math.floor(e))&&0<e?De(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var Dy=De(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*ky)},function(e,t){return(t-e)/ky},function(e){return e.getUTCMinutes()}),Py=De(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*My)},function(e,t){return(t-e)/My},function(e){return e.getUTCHours()}),Ly=De(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),qy=Le(0),$y=Le(1),jy=(Le(2),Le(3),Le(4)),Fy=(Le(5),Le(6),De(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()})),Iy=De(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Iy.every=function(e){return isFinite(e=Math.floor(e))&&0<e?De(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var Uy,By,Wy,Gy,Yy,Hy={"-":"",_:" ",0:"0"},Vy=/^\s*\d+/,Xy=/^%/,Zy=/[\\^$*+?|[\]().{}]/g;Yt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Jy="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Gy(Jy),+new Date("2000-01-01T00:00:00.000Z")||Yy(Jy);var Qy={skip:!0},Ky={},eb=Zt.prototype;eb.StopPropagation=Ky,eb.ADD=1,eb.REM=2,eb.MOD=4,eb.ADD_REM=3,eb.ADD_MOD=5,eb.ALL=7,eb.REFLOW=8,eb.SOURCE=16,eb.NO_SOURCE=32,eb.NO_FIELDS=64,eb.fork=function(e){return new Zt(this.dataflow).init(this,e)},eb.clone=function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},eb.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length&&((e=new Zt(this.dataflow).init(this)).add=e.source),e},eb.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},eb.runAfter=function(e){this.dataflow.runAfter(e)},eb.changed=function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},eb.reflow=function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,Kt(this,1))),this},eb.modifies=function(e){var t=O(e),n=this.fields||(this.fields={});return t.forEach(function(e){n[e]=!0}),this},eb.modified=function(e){var t=this.fields;return!(!this.mod.length||!t)&&(arguments.length?Iv(e)?e.some(function(e){return t[e]}):t[e]:!!t)},eb.filter=function(e,t){return 1&e&&(this.addF=Jt(this.addF,t)),2&e&&(this.remF=Jt(this.remF,t)),4&e&&(this.modF=Jt(this.modF,t)),16&e&&(this.srcF=Jt(this.srcF,t)),this},eb.materialize=function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=Qt(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=Qt(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=Qt(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},eb.visit=function(e,t){var n,r,i=this,a=t;return 16&e?Z(i.source,i.srcF,a):(1&e&&Z(i.add,i.addF,a),2&e&&Z(i.rem,i.remF,a),4&e&&Z(i.mod,i.modF,a),8&e&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||Z(n,r?Kt(i,5):i.srcF,a))),i};var tb=P(en,Zt);tb.fork=function(e){var t=new Zt(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,function(e){return t.add.push(e)}),e&t.REM&&this.visit(t.REM,function(e){return t.rem.push(e)}),e&t.MOD&&this.visit(t.MOD,function(e){return t.mod.push(e)})),t},tb.changed=function(e){return this.changes&e},tb.modified=function(e){var t=this.fields;return t&&this.changes&this.MOD?Iv(e)?e.some(function(e){return t[e]}):t[e]:0},tb.filter=function(){o("MultiPulse does not support filtering.")},tb.materialize=function(){o("MultiPulse does not support materialization.")};var nb={skip:!(tb.visit=function(e,t){var n=this.pulses,r=n.length,i=0;if(e&this.SOURCE)for(;i<r;++i)n[i].visit(e,t);else for(;i<r;++i)n[i].stamp===this.stamp&&n[i].visit(e,t);return this}),force:!1},rb=nn.prototype;rb.size=function(){return this.nodes.length},rb.clear=function(){return this.nodes=[],this},rb.peek=function(){return this.nodes[0]},rb.push=function(e){var t=this.nodes;return t.push(e),rn(t,0,t.length-1,this.cmp)},rb.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,an(t,0,this.cmp)):e=n,e},rb.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,an(t,0,this.cmp),n},rb.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,an(t,0,this.cmp)),e};var ib=on.prototype;ib.stamp=function(){return this._clock},ib.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},ib.cleanThreshold=1e4,ib.add=function(e,t,n,r){var i,a=1;return e instanceof se?i=e:e&&e.prototype instanceof se?i=new e:A(e)?i=new se(null,e):(a=0,i=new se(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},ib.connect=function(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)},ib.rank=function(e){e.rank=++this._rank},ib.rerank=function(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;0<=--r;)i.push(t=n[r]),t===e&&o("Cycle detected in dataflow graph.")},ib.pulse=function(e,t,n){this.touch(e,n||nb);var r=new Zt(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._pulses[e.id]=t.pulse(r,i),this},ib.touch=function(e,t){var n=t||nb;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},ib.update=function(e,t,n){var r=n||nb;return(e.set(t)||r.force)&&this.touch(e,r),this},ib.changeset=oe,ib.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(Ht(t,n)))},ib.request=function(e,t,n){var r,i,a,o,u=this,s=u._pending||(r=u,(o=new Promise(function(e,t){i=e,a=t})).requests=0,o.done=function(){0==--o.requests&&r.runAfter(function(){r._pending=null;try{r.run(),i(r)}catch(e){a(e)}})},r._pending=o);s.requests+=1,u.loader().load(t,{context:"dataflow"}).then(function(t){u.ingest(e,t,n)},function(e){u.error("Loading failed",t,e)}).catch(function(e){u.error("Data ingestion failed",t,e)}).then(s.done,s.done)},ib.events=function(e,t,n,r){for(var i,a=this,o=le(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(e){a.error(e)}finally{a.run()}},s=0,f=(i="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):O(e)).length;s<f;++s)i[s].addEventListener(t,u);return o},ib.on=function(e,t,n,r,i){return(e instanceof se?Xt:Vt)(this,e,t,n,r,i),this},ib.run=function(e){var t,n,r,i,a=this,o=0,u=a.logLevel();if(a._pending)return a.info("Awaiting requests, delaying dataflow run."),0;if(a._pulse)return a.error("Dataflow invoked recursively. Use the runAfter method to queue invocation."),0;if(!a._touched.length)return a.info("Dataflow invoked, but nothing to do."),0;a._pulse=new Zt(a,++a._clock,e),Qv<=u&&(r=Date.now(),a.debug("-- START PROPAGATION ("+a._clock+") -----")),a._touched.forEach(function(e){a._enqueue(e,!0)}),a._touched=J(Bv);try{for(;0<a._heap.size();)(t=a._heap.pop()).rank===t.qrank?(n=t.run(a._getPulse(t,e)),Kv<=u&&a.debug(t.id,n===Ky?"STOP":n,t),n!==Ky&&(a._pulse=n,t._targets&&t._targets.forEach(function(e){a._enqueue(e)})),++o):a._enqueue(t,!0)}catch(e){i=e}if(a._pulses={},a._pulse=null,Qv<=u&&(r=Date.now()-r,a.info("> Pulse "+a._clock+": "+o+" operators; "+r+"ms")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,o,i)}catch(e){a.error(e)}if(a._postrun.length){var s=a._postrun;a._postrun=[],s.sort(function(e,t){return t.priority-e.priority}).forEach(function(e){tn(a,e.callback)})}return o},ib.runAsync=function(){return this._pending||Promise.resolve(this.run())},ib.runAfter=function(e,t,n){this._pulse||t?this._postrun.push({priority:n||0,callback:e}):tn(this,e)},ib._enqueue=function(e,t){var n=!this._pulses[e.id];n&&(this._pulses[e.id]=this._pulse),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},ib._getPulse=function(e,t){var n,r=e.source,i=this._clock;return r&&Iv(r)?new en(this,i,n=r.map(function(e){return e.pulse}),t):(n=this._pulses[e.id],r&&((r=r.pulse)&&r!==Ky?r.stamp===i&&n.target!==e?n=r:n.source=r.source:n.source=[]),n)},ib.error=un("error"),ib.warn=un("warn"),ib.info=un("info"),ib.debug=un("debug"),ib.logLevel=un("level");var ab=P(sn,se);ab.run=function(e){return e.stamp<=this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e)!==e.StopPropagation&&(this.pulse=t),this.stamp=e.stamp,t);var t},ab.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},ab.transform=function(){};var ob={},ub={values:pn({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:pn({name:"count",set:"cell.num"}),__count__:pn({name:"count",set:"this.missing + this.valid"}),missing:pn({name:"missing",set:"this.missing"}),valid:pn({name:"valid",set:"this.valid"}),sum:pn({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:pn({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:pn({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:pn({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:pn({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:pn({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:pn({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:pn({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:pn({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:pn({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:pn({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:pn({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:pn({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:pn({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:pn({name:"argmin",init:"this.argmin = null;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:pn({name:"argmax",init:"this.argmax = null;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:pn({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:pn({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},sb=Object.keys(ub);t.random=Math.random;var fb=xn(_n),cb=fb.right,lb=fb.left,db=Math.sqrt(50),hb=Math.sqrt(10),pb=Math.sqrt(2),gb=$n.prototype;gb.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},gb.add=function(e){this._add.push(e)},gb.rem=function(e){this._rem.push(e)},gb.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(e=0;e<u;++e)f[a(i[e])]=1;for(t=e=0;e<o;++e)f[a(n=r[e])]?f[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},gb.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;0<=--r;)t=e(n[r])+"",i.hasOwnProperty(t)||(i[t]=1,++a);return a},gb.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=N(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},gb.argmin=function(e){return this.extent(e)[0]||{}},gb.argmax=function(e){return this.extent(e)[1]||{}},gb.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):1/0},gb.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):-1/0},gb.quartile=function(e){return this._get===e&&this._q||(this._q=Nn(this.values(),e),this._get=e),this._q},gb.q1=function(e){return this.quartile(e)[0]},gb.q2=function(e){return this.quartile(e)[1]},gb.q3=function(e){return this.quartile(e)[2]},gb.ci=function(e){return this._get===e&&this._ci||(this._ci=zn(this.values(),1e3,.05,e),this._get=e),this._ci},gb.ci0=function(e){return this.ci(e)[0]},gb.ci1=function(e){return this.ci(e)[1]},jn.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:sb},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var mb=P(jn,sn);mb.transform=function(e,t){var n,r=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=e.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(this.value=this.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),i.modifies(this._outputs),r._drop=!1!==e.drop,e.cross&&1<r._dims.length&&(r._drop=!1,this.cross()),r.changes(i)},mb.cross=function(){function e(e){var t,n,o,u;for(t in e)for(o=e[t].tuple,n=0;n<a;++n)i[n][u=o[r[n]]]=u}var t=this,n=t.value,r=t._dnames,i=r.map(function(){
return{}}),a=r.length;e(t._prev),e(n),function e(o,u,s){var f,c,l=r[s],d=i[s++];for(f in d)u[l]=d[f],c=o?o+"|"+f:f,s<a?e(c,u,s):n[c]||t.cell(c,u)}("",{},0)},mb.init=function(e){function t(e){for(var t,r=O(a(e)),i=0,o=r.length;i<o;++i)u[t=r[i]]||(u[t]=1,n.push(t))}var n=this._inputs=[],r=this._outputs=[],u={};this._dims=O(e.groupby),this._dnames=this._dims.map(function(e){var n=i(e);return t(e),r.push(n),n}),this.cellkey=e.key?e.key:ln(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var s,f,c,l,d,h,p=e.fields||[null],g=e.ops||["count"],m=e.as||[],v=p.length,y={};for(v!==g.length&&o("Unmatched number of fields and aggregate ops."),h=0;h<v;++h)s=p[h],f=g[h],null==s&&"count"!==f&&o("Null aggregate field specified."),d=dn(f,l=i(s),m[h]),r.push(d),"count"!==f?((c=y[l])||(t(s),(c=y[l]=[]).field=s,this._measures.push(c)),"count"!==f&&(this._countOnly=!1),c.push(hn(f,d))):this._counts.push(d);return this._measures=this._measures.map(function(e){return mn(e,e.field)}),{}},mb.cellkey=ln(),mb.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},mb.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new $n),n},mb.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?ie(t.tuple,o):te(o)},mb.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].add(t[n].get(e),e)},mb.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].rem(t[n].get(e),e)},mb.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(n=0,r=(t=e.agg).length;n<r;++n)t[n].set(i);return i},mb.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=e.add,c=e.rem,l=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||c.push(t.tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(t=o[r]).num&&s?c:l).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e},Fn.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var vb=P(Fn,sn);vb.transform=function(e,t){var n,r=this._bins(e),i=r.start,o=r.step,u=e.as||["bin0","bin1"],s=u[0],f=u[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(a(e.field))?t.ADD_MOD:t.ADD,t.visit(n,function(e){var t=r(e);e[s]=t,e[f]=null==t?null:i+o*(1+(t-i)/o)}),t.modifies(u)},vb._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,o=e.field,u=vn(e),s=u.start,f=u.stop,c=u.step;null!=(t=e.anchor)&&(n=t-(s+c*Math.floor((t-s)/c)),s+=n,f+=n);var l=function(e){var t=o(e);return null==t?null:(t=Math.max(s,Math.min(+t,f-c)),s+c*Math.floor((t-s)/c))};return l.start=s,l.stop=f,l.step=c,this.value=r(l,a(o),e.name||"bin_"+i(o))},Un.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},P(Un,sn).transform=function(e,t){var n=t.fork(t.ALL),r=In(K,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),t.source&&t.source.root&&(this.value.root=t.source.root),n},P(Bn,se),Gn.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var yb=P(Gn,sn);yb.transform=function(e,t){function n(t){return function(n){for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(u(n),e.case,a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],f=n(function(e){i[e]=1+(i[e]||0)}),c=n(function(e){i[e]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,c)),this._finish(t,s)},yb._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},yb._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],f=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=te({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(t)},Yn.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},P(Yn,sn).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1];return!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter")?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,a,o=[],u={},s=e.length,f=0;f<s;++f)for(u[t]=a=e[f],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(te(u)),(u={})[t]=a);return o}(r,a,o,e.filter||Hv)):n.mod=r,n.source=this.value,n.modifies(i)};var bb={kde:Pn,mixture:Ln,normal:Dn,uniform:qn},_b="distributions",xb="function",wb="field",kb=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Mb={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:kb},{name:"weights",type:"number",array:!0}]};Hn.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number",default:100},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:kb.concat(Mb)},{name:"as",type:"string",array:!0,default:["value","density"]}]},P(Hn,sn).transform=function(e,t){var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var i=function e(t,n){var r=t[xb];bb.hasOwnProperty(r)||o("Unknown distribution function: "+r);var i=bb[r]();for(var a in t)a===wb?i.data((t.from||n()).map(t[a])):a===_b?i[a](t[a].map(function(t){return e(t,n)})):typeof i[a]===xb&&i[a](t[a]);return i}(e.distribution,(n=t,function(){return n.materialize(n.SOURCE).source})),a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&o("Invalid density method: "+a),e.extent||i.data||o("Missing density extent parameter."),a=i[a];var u=e.as||["value","density"],s=e.extent||kn(i.data()),f=(s[1]-s[0])/(e.steps||100),c=Mn(s[0],s[1]+f/2,f).map(function(e){var t={};return t[u[0]]=e,t[u[1]]=a(e),te(t)});this.value&&(r.rem=this.value),this.value=r.add=r.source=c}return r},Vn.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},P(Vn,sn).transform=function(e,t){var n=this.value,r=e.field,i=n[0],a=n[1],o=t.ADD;(t.changed()||t.modified(r.fields)||e.modified("field"))&&(o=t.SOURCE,i=1/0,a=-1/0),t.visit(o,function(e){var t=r(e);null!=t&&((t=+t)<i&&(i=t),a<t&&(a=t))}),this.value=[i,a]};var Sb=P(Xn,se);Sb.connect=function(e){return this.targets().add(e),e.source=this},Sb.add=function(e){this.value.add.push(e)},Sb.rem=function(e){this.value.rem.push(e)},Sb.mod=function(e){this.value.mod.push(e)},Sb.init=function(e){this.value.init(e,e.NO_SOURCE)},Sb.evaluate=function(){return this.value};var Eb=P(Zn,sn);Eb.activate=function(e){this._targets[this._targets.active++]=e},Eb.subflow=function(e,t,n,r){var i,a,o=this.value,u=o.hasOwnProperty(e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,u=(i=n.dataflow).add(new Xn(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},Eb.transform=function(e,t){function n(e){return i.subflow(e,o,t)}var r=t.dataflow,i=this,a=e.key,o=e.subflow,u=this._keys,s=e.modified("key");return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,function(e){var t=K(e),r=u.get(t);void 0!==r&&(u.delete(t),n(r).rem(e))}),t.visit(t.ADD,function(e){var t=a(e);u.set(K(e),t),n(t).add(e)}),s||t.modified(a.fields)?t.visit(t.MOD,function(e){var t=K(e),r=u.get(t),i=a(e);r===i?n(i).mod(e):(u.set(t,i),n(r).rem(e),n(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,function(e){n(u.get(K(e))).mod(e)}),s&&t.visit(t.REFLOW,function(e){var t=K(e),r=u.get(t),i=a(e);r!==i&&(u.set(t,i),n(r).rem(e),n(i).add(e))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),t},P(Jn,se),Kn.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},P(Kn,sn).transform=function(e,t){function n(t){var n=K(t),r=f(t,e),a=i.get(n);r&&a?(i.delete(n),o.push(t)):r||a?c&&r&&!a&&s.push(t):(i.set(n,1),u.push(t))}var r=t.dataflow,i=this.value,a=t.fork(),o=a.add,u=a.rem,s=a.mod,f=e.expr,c=!0;return t.visit(t.REM,function(e){var t=K(e);i.has(t)?i.delete(t):u.push(e)}),t.visit(t.ADD,function(t){f(t,e)?o.push(t):i.set(K(t),1)}),t.visit(t.MOD,n),e.modified()&&(c=!1,t.visit(t.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},tr.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},P(tr,sn).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=er(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,o,u,s=r.map(function(t){return t(e)}),f=s.reduce(function(e,t){return Math.max(e,t.length)},0),c=0;c<f;++c){for(o=ne(e),t=0;t<a;++t)o[i[t]]=null==(u=s[t][c])?null:u;n.add.push(o)}}),this.value=n.source=n.add,n.modifies(i)},nr.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},P(nr,sn).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=r.map(i),o=e.as||["key","value"],u=o[0],s=o[1],f=r.length;return n.rem=this.value,t.visit(t.SOURCE,function(e){for(var t,i=0;i<f;++i)(t=ne(e))[u]=a[i],t[s]=r[i](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(o)},rr.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},P(rr,sn).transform=function(e,t){var n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,function(t){t[r]=n(t,e)})},P(ir,sn).transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(0<u){for(n=[];0<=--u;)n.push(i=te(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var Ob={value:"value",median:function(e,t){var n,r=e.length,i=-1,a=[];if(null==t)for(;++i<r;)isNaN(n=wn(e[i]))||a.push(n);else for(;++i<r;)isNaN(n=wn(t(e[i],i,e)))||a.push(n);return Cn(a.sort(_n),.5)},mean:function(e,t){var n,r=e.length,i=r,a=-1,o=0;if(null==t)for(;++a<r;)isNaN(n=wn(e[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=wn(t(e[a],a,e)))?--i:o+=n;if(i)return o/i},min:function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n<=n)for(r=n;++a<i;)null!=(n=e[a])&&n<r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n<=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n<r&&(r=n);return r},max:Rn},Ab=[];ar.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},P(ar,sn).transform=function(e,t){var n,r,a,u,s,f,c,l,d,h,p,g=t.fork(t.ALL),m=function(e){var t,n=e.method||Ob.value;return null!=Ob[n]?n===Ob.value?(t=void 0!==e.value?e.value:0,function(){return t}):Ob[n]:void o("Unrecognized imputation method: "+n)}(e),v=(p=e.field,function(e){return e?p(e):NaN}),y=i(e.field),b=i(e.key),_=(e.groupby||[]).map(i),x=function(e,t,n,r){var i,a,o,u,s,f,c,l,d=function(e){return e(l)},h=[],p=r?r.slice():[],g={},m={};for(p.forEach(function(e,t){g[e]=t+1}),u=0,c=e.length;u<c;++u)l=e[u],f=n(l),s=g[f]||(g[f]=p.push(f)),a=(i=t?t.map(d):Ab)+"",(o=m[a])||(o=m[a]=[],h.push(o),o.values=i),o[s-1]=l;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),w=[],k=this.value,M=x.domain.length;for(s=0,l=x.length;s<l;++s)for(a=(n=x[s]).values,r=NaN,c=0;c<M;++c)if(null==n[c]){for(u=x.domain[c],h={_impute:!0},f=0,d=a.length;f<d;++f)h[_[f]]=a[f];h[b]=u,h[y]=isNaN(r)?r=m(n,v):r,w.push(te(h))}return w.length&&(g.add=g.materialize(g.ADD).add.concat(w)),k.length&&(g.rem=g.materialize(g.REM).rem.concat(k)),this.value=w,g},or.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:sb},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Cb=P(or,jn);Cb.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,function(e){r.add(e)})):(n=r.value=r.value||this.init(e),t.visit(t.REM,function(e){r.rem(e)}),t.visit(t.ADD,function(e){r.add(e)})),r.changes(),t.visit(t.SOURCE,function(e){z(e,n[r.cellkey(e)].tuple)}),t.reflow(i).modifies(this._outputs)},Cb.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},P(ur,se),fr.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},P(fr,sn).transform=function(e,t){var n,r,a=t,u=e.as,s=e.fields,f=e.index,c=e.values,l=null==e.default?null:e.default,d=e.modified(),h=d?t.SOURCE:t.ADD,p=s.length;return c?(r=c.length,1<p&&!u&&o('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==p*r&&o('The "as" parameter has too few output field names.'),u=u||c.map(i),n=function(e){for(var t,n,i=0,a=0;i<p;++i)if(null==(n=f.get(s[i](e))))for(t=0;t<r;++t,++a)e[u[a]]=l;else for(t=0;t<r;++t,++a)e[u[a]]=c[t](n)}):(u||o("Missing output field names."),n=function(e){for(var t,n=0;n<p;++n)t=f.get(s[n](e)),e[u[n]]=null==t?l:t}),d?a=t.reflow(!0):h|=s.some(function(e){return t.modified(e.fields)})?t.MOD:0,t.visit(h,n),a.modifies(u)},P(cr,se),P(dr,se),P(pr,sn),pr.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},gr.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:sb,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var Rb=P(gr,jn);Rb._transform=Rb.transform,Rb.transform=function(e,t){return this._transform((i=t,o=(n=e).field,u=n.value,s=("count"===n.op?"__count__":n.op)||"sum",f=a(o).concat(a(u)),l=o,d=n.limit||0,p={},g=[],(h=i).visit(h.SOURCE,function(e){var t=l(e);p[t]||(p[t]=1,g.push(t))}),g.sort(function(e,t){return(e<t||null==e)&&null!=t?-1:(t<e||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0)}),c=d?g.slice(0,d):g,{key:n.key,groupby:n.groupby,ops:c.map(function(){return s}),fields:c.map(function(e){return n=o,i=u,r(function(e){return n(e)===t?i(e):NaN},f,(t=e)+"");var t,n,i}),as:c.map(function(e){return e+""}),modified:n.modified.bind(n)}),t);var n,i,o,u,s,f,c,l,d,h,p,g},P(mr,Zn).transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(a(i)))&&o("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.mod(e)}):a.mod(e)}),t.visit(t.ADD,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.add(te(e))}):a.add(e)}),t.visit(t.REM,function(e){var a=n.subflow(K(e),r,t,e);i?i(e).forEach(function(e){a.rem(e)}):a.rem(e)}),t},vr.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},P(vr,sn).transform=function(e,t){var n,r,i=e.fields,a=er(e.fields,e.as||[]),o=i?function(e,t){return function(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(e,t,i,a)}:re;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=K(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=o(e,te({}));r[K(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(o(e,r[K(e)]))}),n},P(yr,sn).transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},P(br,sn).transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,function(e){var t=K(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,function(e){var t=ne(e);r[K(e)]=t,n.add.push(t)}),t.visit(t.MOD,function(e){n.mod.push(re(e,r[K(e)]))})),n},_r.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},P(_r,sn).transform=function(e,n){function r(e){var n,r;u.length<o?u.push(e):(r=~~((s+1)*t.random()))<u.length&&f<=r&&(n=u[r],c[K(n)]&&i.rem.push(n),u[r]=e),++s}var i=n.fork(n.NO_SOURCE),a=e.modified("size"),o=e.size,u=this.value,s=this.count,f=0,c=u.reduce(function(e,t){return e[K(t)]=1,e},{});if(n.rem.length&&(n.visit(n.REM,function(e){var t=K(e);c[t]&&(c[t]=-1,i.rem.push(e)),--s}),u=u.filter(function(e){return-1!==c[K(e)]})),(n.rem.length||a)&&u.length<o&&n.source&&(f=s=u.length,n.visit(n.SOURCE,function(e){c[K(e)]||r(e)}),f=-1),a&&u.length>o){for(var l=0,d=u.length-o;l<d;++l)c[K(u[l])]=-1,i.rem.push(u[l]);u=u.slice(d)}return n.mod.length&&n.visit(n.MOD,function(e){c[K(e)]&&i.mod.push(e)}),n.add.length&&n.visit(n.ADD,r),(n.add.length||f<0)&&(i.add=u.filter(function(e){return!c[K(e)]})),this.count=s,this.value=i.source=u,i},xr.Definition={type:"Sequence",metadata:{changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1}],output:["value"]},P(xr,sn).transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD);return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Mn(e.start,e.stop,e.step||1).map(te),n.add=t.add.concat(this.value),n}},P(wr,sn).transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},P(kr,sn).transform=function(e,t){function n(e){a.set(i(e),e)}var r=t.dataflow,i=e.field,a=this.value,o=!0;return e.modified("field")||t.modified(i.fields)?(a.clear(),t.visit(t.SOURCE,n)):t.changed()?(t.visit(t.REM,function(e){a.delete(i(e))}),t.visit(t.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),t.fork()},P(Mr,sn).transform=function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(e.sort):t.source).map(e.field))};var Tb={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=Tb.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){0<(t=+t)||o("ntile num must be greater than zero.");var n=Tb.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return 0<=r?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return 0<(t=+t)||o("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}}},zb=Object.keys(Tb),Nb=Sr.prototype;Nb.init=function(){this.windows.forEach(function(e){e.init()}),this.cell&&this.cell.init()},Nb.update=function(e,t){var n,r=this.cell,i=this.windows,a=e.data,o=i&&i.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(a[n]);for(n=e.p1;n<e.i1;++n)r.add(a[n]);r.set(t)}for(n=0;n<o;++n)i[n].update(e,t)},Er.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:zb.concat(sb)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Db=P(Er,sn);Db.transform=function(e,t){function n(e){return a.group(s(e))}var r,i,a=this,o=a.state,u=e.modified();this.stamp=t.stamp,o&&!u||(o=a.state=new Sr(e));var s=ln(e.groupby);for(u||t.modified(o.inputs)?(a.value={},t.visit(t.SOURCE,function(e){n(e).add(e)})):(t.visit(t.REM,function(e){n(e).remove(e)}),t.visit(t.ADD,function(e){n(e).add(e)})),r=0,i=a._mlen;r<i;++r)Or(a._mods[r],o,e);return a._mlen=0,a._mods=[],t.reflow(u).modifies(o.outputs)},Db.group=function(e){var t=this.value[e];return t||((t=this.value[e]=In(K)).stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t};var Pb=Object.freeze({aggregate:jn,bin:Fn,collect:Un,compare:Bn,countpattern:Gn,cross:Yn,density:Hn,extent:Vn,facet:Zn,field:Jn,filter:Kn,flatten:tr,fold:nr,formula:rr,generate:ir,impute:ar,joinaggregate:or,key:ur,lookup:fr,multiextent:cr,multivalues:dr,params:pr,pivot:gr,prefacet:mr,project:vr,proxy:yr,relay:br,sample:_r,sequence:xr,sieve:wr,subflow:Xn,tupleindex:kr,values:Mr,window:Er}),Lb="top",qb="left",$b="right",jb="bottom",Fb="top-left",Ib="top-right",Ub="bottom-left",Bb="bottom-right",Wb="start",Gb="end",Yb="group",Hb="axis",Vb="legend",Xb="row-header",Zb="row-footer",Jb="row-title",Qb="column-header",Kb="column-footer",e_="column-title",t_="padding",n_="symbol",r_="fit",i_="fit-x",a_="fit-y",o_="pad",u_="none",s_="all",f_="column",c_="row",l_=Rr.prototype;l_.clone=function(){return new Rr(this)},l_.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},l_.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},l_.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},l_.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},l_.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},l_.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},l_.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},l_.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,u=this.x1,s=this.x2,f=this.y1,c=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*c+a,i*u+r*c+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*c+a,i*s+r*c+o)},l_.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},l_.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},l_.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},l_.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},l_.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},l_.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},l_.width=function(){return this.x2-this.x1},l_.height=function(){return this.y2-this.y1};var d_,h_=0;P(Nr,zr),["canvas","canvas-prebuilt"].some(function(e){try{"function"!=typeof(d_=n(29)(e))&&(d_=null)}catch(e){d_=null}return d_});var p_=Lr.prototype;p_.pending=function(){return this._pending},p_.sanitizeURL=function(e){var t=this;return qr(t),t._loader.sanitize(e,{context:"href"}).then(function(e){return $r(t),e}).catch(function(){return $r(t),null})},p_.loadImage=function(e){var t=this,n=Pr();return qr(t),t._loader.sanitize(e,{context:"image"}).then(function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){$r(t),i.loaded=!0},i.onerror=function(){$r(t),i.loaded=!1},i.src=r,i}).catch(function(e){return $r(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}})},p_.ready=function(){var e=this;return new Promise(function(t){!function n(r){e.pending()?setTimeout(function(){n(!0)},10):t(r)}(!1)})};var g_=Math.PI,m_=2*g_,v_=1e-6,y_=m_-v_;jr.prototype=Fr.prototype={constructor:jr,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,u=n-e,s=r-t,f=a-e,c=o-t,l=f*f+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(v_<l)if(Math.abs(c*u-s*f)>v_&&i){var d=n-a,h=r-o,p=u*u+s*s,g=d*d+h*h,m=Math.sqrt(p),v=Math.sqrt(l),y=i*Math.tan((g_-Math.acos((p+l-g)/(2*m*v)))/2),b=y/v,_=y/m;Math.abs(b-1)>v_&&(this._+="L"+(e+b*f)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(f*h<c*d)+","+(this._x1=e+_*u)+","+(this._y1=t+_*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,i,a){e=+e,t=+t;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+o,f=t+u,c=1^a,l=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+f:(Math.abs(this._x1-s)>v_||Math.abs(this._y1-f)>v_)&&(this._+="L"+s+","+f),n&&(l<0&&(l=l%m_+m_),y_<l?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+c+","+(this._x1=s)+","+(this._y1=f):v_<l&&(this._+="A"+n+","+n+",0,"+ +(g_<=l)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var b_=Math.abs,__=Math.atan2,x_=Math.cos,w_=Math.max,k_=Math.min,M_=Math.sin,S_=Math.sqrt,E_=1e-12,O_=Math.PI,A_=O_/2,C_=2*O_;Xr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var R_={draw:function(e,t){var n=Math.sqrt(t/O_);e.moveTo(n,0),e.arc(0,0,n,0,C_)}};ri.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ni(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ni(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ii.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ni(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ai.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ni(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},oi.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(0<n)for(var r,i=e[0],a=t[0],o=e[n]-i,u=t[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+r*o),this._beta*t[s]+(1-this._beta)*(a+r*u));
this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var T_=function e(t){function n(e){return 1===t?new ri(e):new oi(e,t)}return n.beta=function(t){return e(+t)},n}(.85);si.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ui(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ui(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var z_=function e(t){function n(e){return new si(e,t)}return n.tension=function(t){return e(+t)},n}(0);fi.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ui(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var N_=function e(t){function n(e){return new fi(e,t)}return n.tension=function(t){return e(+t)},n}(0);ci.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ui(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var D_=function e(t){function n(e){return new ci(e,t)}return n.tension=function(t){return e(+t)},n}(0);di.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:li(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var P_=function e(t){function n(e){return t?new di(e,t):new si(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);hi.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:li(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var L_=function e(t){function n(e){return t?new hi(e,t):new fi(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);pi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:li(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var q_=function e(t){function n(e){return t?new pi(e,t):new ci(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);gi.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},_i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bi(this,this._t0,yi(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bi(this,yi(this,n=vi(this,e,t)),n);break;default:bi(this,this._t0,n=vi(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(xi.prototype=Object.create(_i.prototype)).point=function(e,t){_i.prototype.point.call(this,t,e)},wi.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},ki.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Mi(e),i=Mi(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Si.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var $_,j_={basis:{curve:function(e){return new ri(e)}},"basis-closed":{curve:function(e){return new ii(e)}},"basis-open":{curve:function(e){return new ai(e)}},bundle:{curve:T_,tension:"beta",value:.85},cardinal:{curve:z_,tension:"tension",value:0},"cardinal-open":{curve:D_,tension:"tension",value:0},"cardinal-closed":{curve:N_,tension:"tension",value:0},"catmull-rom":{curve:P_,tension:"alpha",value:.5},"catmull-rom-closed":{curve:L_,tension:"alpha",value:.5},"catmull-rom-open":{curve:q_,tension:"alpha",value:.5},linear:{curve:Zr},"linear-closed":{curve:function(e){return new gi(e)}},monotone:{horizontal:function(e){return new xi(e)},vertical:function(e){return new _i(e)}},natural:{curve:function(e){return new ki(e)}},step:{curve:function(e){return new Si(e,.5)}},"step-after":{curve:function(e){return new Si(e,1)}},"step-before":{curve:function(e){return new Si(e,0)}}},F_={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},I_=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],U_={},B_={},W_=[].join,G_=["l",0,0,0,0,0,0,0],Y_=2*Math.PI,H_=Math.sqrt(3)/2,V_={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Y_)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=H_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=H_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=H_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=H_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}}},X_={},Z_=Math.PI,J_=function(){function e(){var e,f,c,l,d,h,p,g,m,v,y,b,_=+t.apply(this,arguments),x=+n.apply(this,arguments),w=a.apply(this,arguments)-A_,k=o.apply(this,arguments)-A_,M=b_(k-w),S=w<k;if(s||(s=e=Fr()),x<_&&(f=x,x=_,_=f),E_<x)if(C_-E_<M)s.moveTo(x*x_(w),x*M_(w)),s.arc(0,0,x,w,k,!S),E_<_&&(s.moveTo(_*x_(k),_*M_(k)),s.arc(0,0,_,k,w,S));else{var E,O,A=w,C=k,R=w,T=k,z=M,N=M,D=u.apply(this,arguments)/2,P=E_<D&&(i?+i.apply(this,arguments):S_(_*_+x*x)),L=k_(b_(x-_)/2,+r.apply(this,arguments)),q=L,$=L;if(E_<P){var j=Ur(P/_*M_(D)),F=Ur(P/x*M_(D));(z-=2*j)>E_?(R+=j*=S?1:-1,T-=j):(z=0,R=T=(w+k)/2),(N-=2*F)>E_?(A+=F*=S?1:-1,C-=F):(N=0,A=C=(w+k)/2)}var I=x*x_(A),U=x*M_(A),B=_*x_(T),W=_*M_(T);if(E_<L){var G=x*x_(C),Y=x*M_(C),H=_*x_(R),V=_*M_(R);if(M<O_){var X=E_<z?[(l=I)+(b=((v=B-(h=G))*((d=U)-(p=Y))-(y=W-p)*(l-h))/(y*(g=H-l)-v*(m=V-d)))*g,d+b*m]:[B,W],Z=I-X[0],J=U-X[1],Q=G-X[0],K=Y-X[1],ee=1/M_((1<(c=(Z*Q+J*K)/(S_(Z*Z+J*J)*S_(Q*Q+K*K)))?0:c<-1?O_:Math.acos(c))/2),te=S_(X[0]*X[0]+X[1]*X[1]);q=k_(L,(_-te)/(ee-1)),$=k_(L,(x-te)/(ee+1))}}E_<N?E_<$?(E=Vr(H,V,I,U,x,$,S),O=Vr(G,Y,B,W,x,$,S),s.moveTo(E.cx+E.x01,E.cy+E.y01),$<L?s.arc(E.cx,E.cy,$,__(E.y01,E.x01),__(O.y01,O.x01),!S):(s.arc(E.cx,E.cy,$,__(E.y01,E.x01),__(E.y11,E.x11),!S),s.arc(0,0,x,__(E.cy+E.y11,E.cx+E.x11),__(O.cy+O.y11,O.cx+O.x11),!S),s.arc(O.cx,O.cy,$,__(O.y11,O.x11),__(O.y01,O.x01),!S))):(s.moveTo(I,U),s.arc(0,0,x,A,C,!S)):s.moveTo(I,U),E_<_&&E_<z?E_<q?(E=Vr(B,W,G,Y,_,-q,S),O=Vr(I,U,H,V,_,-q,S),s.lineTo(E.cx+E.x01,E.cy+E.y01),q<L?s.arc(E.cx,E.cy,q,__(E.y01,E.x01),__(O.y01,O.x01),!S):(s.arc(E.cx,E.cy,q,__(E.y01,E.x01),__(E.y11,E.x11),!S),s.arc(0,0,_,__(E.cy+E.y11,E.cx+E.x11),__(O.cy+O.y11,O.cx+O.x11),S),s.arc(O.cx,O.cy,q,__(O.y11,O.x11),__(O.y01,O.x01),!S))):s.arc(0,0,_,T,R,S):s.lineTo(B,W)}else s.moveTo(0,0);if(s.closePath(),e)return s=null,e+""||null}var t=Br,n=Wr,r=Ir(0),i=null,a=Gr,o=Yr,u=Hr,s=null;return e.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-O_/2;return[x_(r)*e,M_(r)*e]},e.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Ir(+n),e):t},e.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Ir(+t),e):n},e.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:Ir(+t),e):r},e.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Ir(+t),e):i},e.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:Ir(+t),e):a},e.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ir(+t),e):o},e.padAngle=function(t){return arguments.length?(u="function"==typeof t?t:Ir(+t),e):u},e.context=function(t){return arguments.length?(s=null==t?null:t,e):s},e}().startAngle(function(e){return e.startAngle||0}).endAngle(function(e){return e.endAngle||0}).padAngle(function(e){return e.padAngle||0}).innerRadius(function(e){return e.innerRadius||0}).outerRadius(function(e){return e.outerRadius||0}).cornerRadius(Ui),Q_=ei().x(Fi).y1(Ii).y0(function(e){return(e.y||0)+(e.height||0)}).defined(Bi),K_=ei().y(Ii).x1(Fi).x0(function(e){return(e.x||0)+(e.width||0)}).defined(Bi),ex=Kr().x(Fi).y(Ii).defined(Bi),tx=$i().x(Fi).y(Ii).width(function(e){return e.width||0}).height(function(e){return e.height||0}).cornerRadius(Ui),nx=function(){function e(){var e;if(r||(r=e=Fr()),t.apply(this,arguments).draw(r,+n.apply(this,arguments)),e)return r=null,e+""||null}var t=Ir(R_),n=Ir(64),r=null;return e.type=function(n){return arguments.length?(t="function"==typeof n?n:Ir(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:Ir(+t),e):n},e.context=function(t){return arguments.length?(r=null==t?null:t,e):r},e}().type(function(e){return zi(e.shape||"circle")}).size(function(e){return null==e.size?64:e.size}),rx=ji().x(Fi).y(Ii).defined(Bi).size(function(e){return e.size||1}),ix=2*Math.PI,ax=ix/4,ox=ix-1e-8;Yi.beginPath=Hi,Yi.closePath=Hi,Yi.moveTo=Vi,Yi.lineTo=Vi,Yi.rect=function(e,t,n,r){Vi(e,t),Vi(e+n,t+r)},Yi.quadraticCurveTo=function(e,t,n,r){Vi(e,t),Vi(n,r)},Yi.bezierCurveTo=function(e,t,n,r,i,a){Vi(e,t),Vi(n,r),Vi(i,a)},Yi.arc=function(e,t,n,r,i,a){function o(e){f=n*Math.cos(e),c=n*Math.sin(e),f<l&&(l=f),d<f&&(d=f),c<h&&(h=c),p<c&&(p=c)}if(Math.abs(i-r)>ox)return Vi(e-n,t-n),void Vi(e+n,t+n);var u,s,f,c,l=1/0,d=-1/0,h=1/0,p=-1/0;if(o(r),o(i),i!==r)if((r%=ix)<0&&(r+=ix),(i%=ix)<0&&(i+=ix),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=ix,u=r-r%ax,s=0;s<4&&i<u;++s,u-=ax)o(u);else for(u=r-r%ax+ax,s=0;s<4&&u<i;++s,u+=ax)o(u);Vi(e+l,t+h),Vi(e+d,t+p)};var ux,sx,fx=[],cx=function(){return!0},lx=fa("arc",function(e,t){return J_.context(e)(t)}),dx=ca("area",function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?K_:Q_).curve(Ei(r,n.orient,n.tension)).context(e)(t)},function(e,t){var n="horizontal"===e[0].orient?t[1]:t[0],r="horizontal"===e[0].orient?"y":"x",i=0,a=e.length;if(1===a)return e[0];for(;i<a;){var o=i+a>>>1;e[o][r]<n?i=o+1:a=o}return i=Math.max(0,i-1),a=Math.min(e.length-1,a),n-e[i][r]<e[a][r]-n?e[i]:e[a]}),hx=1,px=.5,gx=aa(da),mx={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",sa(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&Gi(e.add(0,0).add(t.width||0,t.height||0),t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;ea(t,function(t){var i,a=t.x||0,o=t.y||0,u=t.width||0,s=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&0<(i=null==t.opacity?1:t.opacity)&&(da(e,t),t.fill&&Zi(e,t,i)&&e.fill(),t.stroke&&Ji(e,t,i)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,u,s),e.clip()),n&&n.translate(-a,-o),ea(t,function(t){r.draw(e,t,n)}),n&&n.translate(a,o),e.restore()})},pick:function(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return ta(t,function(f){var c,l,d,h;if(!(h=f.bounds)||h.contains(i,a))return l=f.x||0,d=f.y||0,e.save(),e.translate(l,d),l=i-l,d=a-d,!(c=ta(f,function(e){return i=l,a=d,(!1!==(t=e).interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(i,a)?o.pick(e,n,r,l,d):null;var t,i,a}))&&!1!==t.interactive&&(f.fill||f.stroke)&&gx(e,f,u,s)&&(c=f),e.restore(),c||null})},background:function(e,t){var n=t.stroke?px:0;e("class","background"),e("d",Wi(null,t,n,n))},foreground:function(e,t,n){e("clip-path",t.clip?la(n,t,t):null)}},vx={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=ha(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,u=(null!=t.height?t.height:r.height)||0,s=!1===t.aspect?"none":"xMidYMid";i-=pa(t.align,o),a-=ga(t.baseline,u),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",ua(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)},bound:function(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=pa(t.align,a),i-=ga(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function(e,t,n){var r=this;ea(t,function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=ha(t,r),f=t.x||0,c=t.y||0,l=(null!=t.width?t.width:s.width)||0,d=(null!=t.height?t.height:s.height)||0;f-=pa(t.align,l),c-=ga(t.baseline,d),!1!==t.aspect&&(a=s.width/s.height,o=t.width/t.height,a==a&&o==o&&a!==o&&(o<a?(c+=(d-(u=l/a))/2,d=u):(f+=(l-(u=d*a))/2,l=u))),s.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(s,f,c,l,d))}})},pick:ia(),get:ha,xOffset:pa,yOffset:ga},yx=ca("line",function(e,t){var n=t[0],r=n.interpolate||"linear";return ex.curve(Ei(r,n.orient,n.tension)).context(e)(t)},function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;0<=--a;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}),bx={type:"path",tag:"path",nested:!1,attr:function(e,t){e("transform",sa(t)),e("d",t.path)},bound:function(e,t){return ma(Yi(e),t)?e.set(0,0,0,0):Gi(e,t)},draw:na(ma),pick:oa(ma)},_x={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Wi(null,t))},bound:function(e,t){var n,r;return Gi(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:na(va),pick:oa(va)},xx={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",sa(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return Gi(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){ea(t,function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&ya(e,t,r)&&e.stroke()}})},pick:ia(function(e,t,n,r){return!!e.isPointInStroke&&ya(e,t,1)&&e.isPointInStroke(n,r)})},wx=fa("shape",function(e,t){return(t.mark.shape||t.shape).context(e)(t)}),kx=fa("symbol",function(e,t){return nx.context(e)(t)}),Mx={height:ka,measureWidth:xa,estimateWidth:ba,width:ba,canvas:Ma};Ma(!0);var Sx={left:"start",center:"middle",right:"end"},Ex=new Rr,Ox={arc:lx,area:dx,group:mx,image:vx,line:yx,path:bx,rect:_x,rule:xx,shape:wx,symbol:kx,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+Oa(t),a=t.x||0,o=t.y||0,u=t.angle||0,s=t.radius||0;s&&(n=(t.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),e("text-anchor",Sx[t.align]||"start"),u?(n=ua(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+ua(r,i))):n=ua(a+r,o+i),e("transform",n)},bound:Aa,draw:function(e,t,n){ea(t,function(t){var r,i,a,o,u,s;n&&!n.intersects(t.bounds)||(s=Sa(t))&&0!==(r=null==t.opacity?1:t.opacity)&&(e.font=Ea(t),e.textAlign=t.align||"left",i=t.x||0,a=t.y||0,(o=t.radius)&&(u=(t.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Math.PI/180),i=a=0),i+=t.dx||0,a+=(t.dy||0)+Oa(t),t.fill&&Zi(e,t,r)&&e.fillText(s,i,a),t.stroke&&Ji(e,t,r)&&e.strokeText(s,i,a),t.angle&&e.restore())})},pick:ia(function(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Aa(Ex,t,!0),u=-t.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),c=t.x,l=t.y,d=s*i-f*a+(c-c*s+l*f),h=f*i+s*a+(l-c*f-l*s);return o.contains(d,h)})},trail:ca("trail",function(e,t){return rx.context(e)(t)},function(e,t){for(var n,r,i=e.length;0<=--i;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null})},Ax={mark:null},Cx=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],Rx=Na.prototype;Rx.toJSON=function(e){return Ta(this.root,e||0)},Rx.mark=function(e,t,n){var r=Da(e,t=t||this.root.items[0]);return(t.items[n]=r).zindex&&(r.group.zdirty=!0),r};var Tx=Ia.prototype;Tx.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},Tx.element=function(){return this._el},Tx.canvas=function(){return this._el&&this._el.firstChild},Tx.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},Tx.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},Tx.on=function(){},Tx.off=function(){},Tx._handlerIndex=function(e,t,n){for(var r=e?e.length:0;0<=--r;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},Tx.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},Tx.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},Tx.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then(function(t){var n=new MouseEvent(e.type,e),r=Pa(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)}).catch(function(){})},Tx.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=Ox[o.marktype]).tip){for((a=Fa(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},Tx.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var zx=Ba.prototype;zx.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},zx.element=function(){return this._el},zx.canvas=function(){return this._el&&this._el.firstChild},zx.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},zx.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},zx.dirty=function(){},zx.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},zx._render=function(){},zx.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then(function(){return t}):Promise.resolve(t)},zx._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(e){e&&i(),n._ready=null})}return r},zx.sanitizeURL=function(e){return this._load("sanitizeURL",e)},zx.loadImage=function(e){return this._load("loadImage",e)};var Nx="mousemove",Dx="mouseout",Px="click",Lx=P(Wa,Ia);Lx.initialize=function(e,t,n){var r=this._canvas=e&&La(e,"canvas");if(r){var i=this;this.events.forEach(function(e){r.addEventListener(e,function(t){Lx[e]?Lx[e].call(i,t):i.fire(e,t)})})}return Ia.prototype.initialize.call(this,e,t,n)},Lx.canvas=function(){return this._canvas},Lx.context=function(){return this._canvas.getContext("2d")},Lx.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],Lx.DOMMouseScroll=function(e){this.fire("mousewheel",e)},Lx.mousemove=Ga("mousemove","mouseover","mouseout"),Lx.dragover=Ga("dragover","dragenter","dragleave"),Lx.mouseout=Ya("mouseout"),Lx.dragleave=Ya("dragleave"),Lx.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},Lx.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},Lx.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},Lx.touchmove=function(e){this.fire("touchmove",e,!0)},Lx.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},Lx.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if((t.vegaType=e)===Px&&a&&a.href?this.handleHref(t,a,a.href):e!==Nx&&e!==Dx||this.handleTooltip(t,a,e!==Dx),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},Lx.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},Lx.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&r.splice(i,1),this},Lx.pickEvent=function(e){var t=Fa(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},Lx.pick=function(e,t,n,r,i){var a=this.context();return Ox[e.marktype].pick.call(this,a,e,t,n,r,i)};var qx="undefined"!=typeof window&&window.devicePixelRatio||1,$x=P(Ha,Ba),jx=Ba.prototype,Fx=new Rr;$x.initialize=function(e,t,n,r,i){return this._canvas=Dr(1,1),e&&($a(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),jx.initialize.call(this,e,t,n,r,i)},$x.resize=function(e,t,n,r){var i,a,o,u,s,f,c,l;return jx.resize.call(this,e,t,n,r),i=this._canvas,a=this._width,o=this._height,u=this._origin,s=this._scale,f="undefined"!=typeof HTMLElement&&i instanceof HTMLElement&&null!=i.parentNode,c=i.getContext("2d"),l=f?qx:s,i.width=a*l,i.height=o*l,f&&1!==l&&(i.style.width=a+"px",i.style.height=o+"px"),c.pixelRatio=l,c.setTransform(l,0,0,l,l*u[0],l*u[1]),this._redraw=!0,this},$x.canvas=function(){return this._canvas},$x.context=function(){return this._canvas?this._canvas.getContext("2d"):null},$x.dirty=function(e){var t=function(e,t){if(null==t)return e;for(var n=Fx.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},$x._render=function(e){var t,n,r,i=this.context(),a=this._origin,o=this._width,u=this._height,s=this._dirty;return i.save(),this._redraw||s.empty()?(this._redraw=!1,s=null):(t=i,r=a,(n=s).expand(1).round(),n.translate(-r[0]%1,-r[1]%1),t.beginPath(),t.rect(n.x1,n.y1,n.width(),n.height()),t.clip(),s=n),this.clear(-a[0],-a[1],o,u),this.draw(i,e,s),i.restore(),this._dirty.clear(),this},$x.draw=function(e,t,n){var r=Ox[t.marktype];t.clip&&function(e,t){var n=t.clip;if(e.save(),e.beginPath(),A(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},$x.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var Ix=P(Va,Ia);Ix.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(Px,this._hrefHandler),r.removeEventListener(Nx,this._tooltipHandler),r.removeEventListener(Dx,this._tooltipHandler)),this._svg=r=e&&La(e,"svg"),r&&(r.addEventListener(Px,this._hrefHandler),r.addEventListener(Nx,this._tooltipHandler),r.addEventListener(Dx,this._tooltipHandler)),Ia.prototype.initialize.call(this,e,t,n)},Ix.canvas=function(){return this._svg},Ix.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:Xa(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},Ix.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return 0<=i&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var Ux={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Bx={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Wx=Object.keys(Bx),Gx=Ux.xmlns,Yx=P(Qa,Ba),Hx=Ba.prototype;Yx.initialize=function(e,t,n,r){return e&&(this._svg=qa(e,0,"svg",Gx),this._svg.setAttribute("class","marks"),$a(e,1),this._root=qa(this._svg,0,"g",Gx),$a(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Hx.initialize.call(this,e,t,n,r)},Yx.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Hx.background.apply(this,arguments)},Yx.resize=function(e,t,n,r){return Hx.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Yx.canvas=function(){return this._svg},Yx.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in Ux)e[t]=Ux[t];var n=this._bgcolor?Za("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+Ja("rect"):"";return Za("svg",e)+n+this._svg.innerHTML+Ja("svg")},Yx._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),$a(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Yx.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=qa(t,0,"defs",Gx)),Ka(r,n.gradient[e],i++);for(e in n.clipping)r||(n.el=r=qa(t,0,"defs",Gx)),eo(r,n.clipping[e],i++);r&&(0===i?(t.removeChild(r),n.el=null):$a(r,i))},Yx._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},Yx.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},Yx.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},Yx._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=Ox[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,to(t,s),n.items.forEach(function(e){e.dirty=s})),n.zdirty||(t.exit?(i.nested&&n.items.length?(u=n.items[0])._svg&&this._update(i,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,to(t,s)),t._update=s));return!this._dirtyAll},Yx.draw=function(e,t,n){function r(e){var t=a.isDirty(e),n=no(e,i,c,u.tag,o);
t&&(a._update(u,n,e),f&&function(e,t,n){t=t.lastChild;var r,i=0;ea(n,function(n){r=e.draw(t,n,r),++i}),$a(t,1+i)}(a,n,e)),c=n,++l}if(!this.isDirty(t))return t._svg;var i,a=this,o=this._svg,u=Ox[t.marktype],s=!1===t.interactive?"none":null,f="g"===u.tag,c=null,l=0;return(i=no(t,e,n,"g",o)).setAttribute("class",ja(t)),f||i.style.setProperty("pointer-events",s),t.clip?i.setAttribute("clip-path",la(a,t,t.group)):i.removeAttribute("clip-path"),u.nested?t.items.length&&r(t.items[0]):ea(t,r),$a(i,l),i};var Vx=null,Xx=null,Zx={group:function(e,t,n){Xx=t.__values__,Vx=t.childNodes[1],e.foreground(ro,n,this),Vx=t.childNodes[0],e.background(ro,n,this);var r=!1===n.mark.interactive?"none":null;r!==Xx.events&&(Vx.style.setProperty("pointer-events",r),Xx.events=r)},text:function(e,t,n){var r=Sa(n);r!==Xx.text&&(t.textContent=r,Xx.text=r),(r=Ea(n))!==Xx.font&&(t.style.setProperty("font",r),Xx.font=r)}};Yx._update=function(e,t,n){Xx=(Vx=t).__values__,e.attr(ro,n,this);var r=Zx[e.type];r&&r.call(this,e,t,n),this.style(Vx,n)},Yx.style=function(e,t){var n,r,i,a,o,u;if(null!=t)for(n=0,r=Wx.length;n<r;++n)(o=t[i=Wx[n]])!==Xx[i]&&(a=Bx[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+(u=void 0,"undefined"==typeof window?"":(u=window.location).hash?u.href.slice(0,-u.hash.length):u.href)+"#"+o.id+")"),e.style.setProperty(a,o+"")),Xx[i]=o)};var Jx,Qx=P(io,Ba),Kx=Ba.prototype;Qx.resize=function(e,t,n,r){Kx.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in Ux)o[u]=Ux[u];a.head=Za("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),a.bg=s?Za("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+Ja("rect"):"",a.root=Za("g",{transform:"translate("+i+")"}),a.foot=Ja("g")+Ja("svg"),this},Qx.background=function(){var e=Kx.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},Qx.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},Qx._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},Qx.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(r=(n=i.gradient[t]).stops,a+=Za("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=Za("stop",{offset:r[e].offset,"stop-color":r[e].color})+Ja("stop");a+=Ja("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=Za("clipPath",{id:t}),a+=n.path?Za("path",{d:n.path})+Ja("path"):Za("rect",{x:0,y:0,width:n.width,height:n.height})+Ja("rect"),a+=Ja("clipPath");return 0<a.length?Za("defs")+a+Ja("defs"):""},Qx.attributes=function(e,t){return Jx={},e(ao,t,this),Jx},Qx.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then(function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e})}return null},Qx.mark=function(e){function t(t){var s=r.href(t);s&&(u+=Za("a",s)),n="g"!==a?oo(t,e,a,o):null,u+=Za(a,r.attributes(i.attr,t),n),"text"===a?u+=Sa(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===a&&(u+=Za("path",r.attributes(i.background,t),oo(t,e,"bgrect",o))+Ja("path"),u+=Za("g",r.attributes(i.foreground,t))+r.markGroup(t)+Ja("g")),u+=Ja(a),s&&(u+=Ja("a"))}var n,r=this,i=Ox[e.marktype],a=i.tag,o=this._defs,u="";return"g"!==a&&!1===e.interactive&&(n='style="pointer-events: none;"'),u+=Za("g",{class:ja(e),"clip-path":e.clip?la(r,e,e.group):null},n),i.nested?e.items&&e.items.length&&t(e.items[0]):ea(e,t),u+Ja("g")},Qx.markGroup=function(e){var t=this,n="";return ea(e,function(e){n+=t.mark(e)}),n};var ew={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},tw={};tw.canvas=tw.png={renderer:Ha,headless:Ha,handler:Wa},tw.svg={renderer:Qa,headless:io,handler:Va},tw.none={};var nw=new Rr,rw=1e-9;P(lo,sn).transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=Ox[a],u=o.bound,s=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),s=ho(i,u),i.items.forEach(function(e){e.bounds.clear().union(s)})):a===Yb||e.modified()?(t.visit(t.MOD,function(e){r.dirty(e)}),s.clear(),i.items.forEach(function(e){s.union(ho(e,u))}),i.role===Vb&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,function(e){s.union(ho(e,u))}),t.visit(t.MOD,function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(ho(e,u))}),n&&(s.clear(),i.items.forEach(function(e){s.union(e.bounds)}))),so(i),t.modifies("bounds")};var iw=":vega_identifier:";po.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},P(po,sn).transform=function(e,t){var n=function(e){var t=e._signals[iw];return t||(e._signals[iw]=t=e.add(0)),t}(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,function(e){e[i]||(e[i]=++r)}),n.set(this.value=r),t},P(go,sn).transform=function(e,t){var n,r,i,a=this.value;a||((a=t.dataflow.scenegraph().mark(e.markdef,(r=(n=e).groups,i=n.parent,r&&1===r.size?r.get(Object.keys(r.object)[0]):r&&i?r.lookup(i):null),e.index)).group.context=e.context,e.context.group||(e.context.group=a.group),a.source=this,a.clip=e.clip,a.interactive=e.interactive,this.value=a);var o=a.marktype===Yb?Nr:zr;return t.visit(t.ADD,function(e){o.call(e,a)}),(e.modified("clip")||e.modified("interactive"))&&(a.clip=e.clip,a.interactive=!!e.interactive,a.zdirty=!0,t.reflow()),a.items=t.source,t};var aw=P(mo,sn),ow={parity:function(e){return e.filter(function(e,t){return t%2?e.opacity=0:1})},greedy:function(e){var t;return e.filter(function(e,n){return n&&vo(t.bounds,e.bounds)?e.opacity=0:(t=e,1)})}};aw.transform=function(e,t){var n=ow[e.method]||ow.parity,r=t.materialize(t.SOURCE).source;if(r){e.sort&&(r=r.slice().sort(e.sort)),"greedy"===e.method&&(r=r.filter(bo)),r.forEach(function(e){e.opacity=1});var i,a,o,u,s,f=r;if(3<=f.length&&yo(f)){for(t=t.reflow(e.modified()).modifies("opacity");3<=(f=n(f)).length&&yo(f););f.length<3&&!p(r).opacity&&(1<f.length&&(p(f).opacity=0),p(r).opacity=1)}if(e.boundScale){var c=(i=e.boundScale,a=e.boundOrient,o=e.boundTolerance,u=i.range(),s=new Rr,a===Lb||a===jb?s.set(u[0],-1/0,u[1],1/0):s.set(-1/0,u[0],1/0,u[1]),s.expand(o||1),function(e){return s.encloses(e.bounds)});r.forEach(function(e){c(e)||(e.opacity=0)})}return t}},P(_o,sn).transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,function(e){n.dirty(e)}),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var uw=.5,sw=new Rr;P(To,sn).transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach(function(t){e.layout&&Ao(n,t,e.layout),function(e,t,n){var r,i,a,o,u,s,f=t.items,c=Math.max(0,t.width||0),l=Math.max(0,t.height||0),d=(new Rr).set(0,0,c,l),h=d.clone(),p=d.clone(),g=[];for(u=0,s=f.length;u<s;++u)switch((i=f[u]).role){case Hb:m=i.items[0].datum.orient,(o=m===qb||m===$b?h:p).union(No(e,i,c,l));break;case"title":r=i;break;case Vb:g.push(i);break;case"frame":case"scope":case Xb:case Zb:case Jb:case Qb:case Kb:case e_:h.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}var m;if(g.length)for(a={leftWidth:(y=e,b=g,b.reduce(function(e,t){var n=t.items[0];if(function(e,t,n){var r=t.padding-n.x,i=t.padding-n.y;if(t.datum.title){var a=t.items[1].items[0];i+=t.titlePadding+a.fontSize}(r||i)&&(n.x+=r,n.y+=i,n.bounds.translate(r,i),n.mark.bounds.translate(r,i),e.dirty(n))}(y,n,n.items[0].items[0]),n.datum.orient===qb){var r=sw.clear();n.items.forEach(function(e){r.union(e.bounds)}),e=Math.max(e,Math.round(r.width())+2*n.padding-1)}return e},0)),margin:n.legendMargin||8,left:0,right:0,top:0,bottom:0},u=0,s=g.length;u<s;++u)if(o=Po(e,g[u],a,h,p,c,l),n.autosize&&n.autosize.type===r_){var v=g[u].items[0].datum.orient;v===qb||v===$b?d.add(o.x1,0).add(o.x2,0):v!==Lb&&v!==jb||d.add(0,o.y1).add(0,o.y2)}else d.union(o);var y,b;d.union(h).union(p),r&&d.union(function(e,t,n,r,i){var a,o=t.items[0],u=o.orient,s=o.frame,f=o.anchor,c=o.offset,l=o.bounds,d=0,h=u===qb||u===$b?r:n,p=0,g=0;switch(s!==Yb?u===qb?(d=i.y2,h=i.y1):u===$b?(d=i.y1,h=i.y2):(d=i.x1,h=i.x2):u===qb&&(d=r,h=0),a=f===Wb?d:f===Gb?h:(d+h)/2,sw.clear().union(l),u){case Lb:p=a,g=i.y1-c;break;case qb:p=i.x1-c,g=a;break;case $b:p=i.x2+c,g=a;break;case jb:p=a,g=i.y2+c;break;default:p=o.x,g=o.y}return l.translate(p-o.x,g-o.y),zo(o,"x",p)|zo(o,"y",g)&&(o.bounds=sw,e.dirty(o),o.bounds=l,e.dirty(o)),t.bounds.clear().union(l)}(e,r,c,l,d)),!function(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,u=e._height,s=e.padding();if(!(e._autosize<1)&&a){var f=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,Math.ceil(n.x2-f)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===t_&&(o-=s.left+s.right,u-=s.top+s.bottom),a===u_?(h=c=0,f=o,d=u):a===r_?(f=Math.max(0,o-c-l),d=Math.max(0,u-h-p)):a===i_?(f=Math.max(0,o-c-l),u=d+h+p):a===a_?(o=f+c+l,d=Math.max(0,u-h-p)):a===o_&&(o=f+c+l,u=d+h+p),e._resizeView(o,u,f,d,[c,h],i.resize)}}(e,t,d,n)}(n,t,e)}),e.modified()&&t.reflow(),t};var fw=Object.freeze({bound:lo,identifier:po,mark:go,overlap:mo,render:_o,viewlayout:To}),cw="log",lw="pow",dw="sqrt",hw="band",pw="point",gw="linear",mw="ordinal",vw="quantile",yw="quantize",bw="threshold",_w="bin-ordinal",xw="sequential",ww="$";qo.prototype=$o.prototype={constructor:qo,has:function(e){return ww+e in this},get:function(e){return this[ww+e]},set:function(e,t){return this[ww+e]=t,this},remove:function(e){var t=ww+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===ww&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===ww&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===ww&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===ww&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===ww&&++e;return e},empty:function(){for(var e in this)if(e[0]===ww)return!1;return!0},each:function(e){for(var t in this)t[0]===ww&&e(this[t],t.slice(1),this)}};var kw=$o.prototype;Wo.prototype=function(e,t){var n=new Wo;if(e instanceof Wo)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}.prototype={constructor:Wo,has:kw.has,add:function(e){return this[ww+(e+="")]=e,this},remove:kw.remove,clear:kw.clear,values:kw.keys,size:kw.size,empty:kw.empty,each:kw.each};var Mw=Array.prototype,Sw=Mw.map,Ew=Mw.slice,Ow={name:"implicit"},Aw=1/.7,Cw="\\s*([+-]?\\d+)\\s*",Rw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zw=/^#([0-9a-f]{3})$/,Nw=/^#([0-9a-f]{6})$/,Dw=new RegExp("^rgb\\("+[Cw,Cw,Cw]+"\\)$"),Pw=new RegExp("^rgb\\("+[Tw,Tw,Tw]+"\\)$"),Lw=new RegExp("^rgba\\("+[Cw,Cw,Cw,Rw]+"\\)$"),qw=new RegExp("^rgba\\("+[Tw,Tw,Tw,Rw]+"\\)$"),$w=new RegExp("^hsl\\("+[Rw,Tw,Tw]+"\\)$"),jw=new RegExp("^hsla\\("+[Rw,Tw,Tw,Rw]+"\\)$"),Fw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yo(Vo,Xo,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Yo(eu,Ko,Ho(Vo,{brighter:function(e){return e=null==e?Aw:Math.pow(Aw,e),new eu(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new eu(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+tu(this.r)+tu(this.g)+tu(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),Yo(iu,ru,Ho(Vo,{brighter:function(e){return e=null==e?Aw:Math.pow(Aw,e),new iu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new iu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new eu(au(240<=e?e-240:e+120,i,r),au(e,i,r),au(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Iw=Math.PI/180,Uw=180/Math.PI,Bw=.96422,Ww=1,Gw=.82521,Yw=4/29,Hw=6/29,Vw=3*Hw*Hw,Xw=Hw*Hw*Hw;Yo(su,uu,Ho(Vo,{brighter:function(e){return new su(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new su(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new eu(lu(3.1338561*(t=Bw*cu(t))-1.6168667*(e=Ww*cu(e))-.4906146*(n=Gw*cu(n))),lu(-.9787684*t+1.9161415*e+.033454*n),lu(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Yo(pu,hu,Ho(Vo,{brighter:function(e){return new pu(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new pu(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return ou(this).rgb()}}));var Zw=1.78277,Jw=-.29227,Qw=-.90649,Kw=1.97294,ek=Kw*Qw,tk=Kw*Zw,nk=Zw*Jw- -.14861*Qw;Yo(mu,gu,Ho(Vo,{brighter:function(e){return e=null==e?Aw:Math.pow(Aw,e),new mu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new mu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Iw,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new eu(255*(t+n*(-.14861*r+Zw*i)),255*(t+n*(Jw*r+Qw*i)),255*(t+n*(Kw*r)),this.opacity)}}));var rk,ik,ak,ok,uk,sk=function e(t){function n(e,t){var n=r((e=Ko(e)).r,(t=Ko(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),o=Mu(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}var r=ku(t);return n.gamma=e,n}(1),fk=Su(yu),ck=Su(bu),lk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dk=new RegExp(lk.source,"g"),hk=180/Math.PI,pk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},gk=Du(function(e){return"none"===e?pk:(rk||(rk=document.createElement("DIV"),ik=document.documentElement,ak=document.defaultView),rk.style.transform=e,e=ak.getComputedStyle(ik.appendChild(rk),null).getPropertyValue("transform"),ik.removeChild(rk),Nu(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),mk=Du(function(e){return null==e?pk:(ok||(ok=document.createElementNS("http://www.w3.org/2000/svg","g")),ok.setAttribute("transform",e),(e=ok.transform.baseVal.consolidate())?Nu((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):pk)},", ",")",")"),vk=Math.SQRT2,yk=Lu(wu),bk=Lu(Mu),_k=qu(wu),xk=qu(Mu),wk=$u(wu),kk=$u(Mu),Mk=Object.freeze({interpolate:Tu,interpolateArray:Eu,interpolateBasis:yu,interpolateBasisClosed:bu,interpolateDate:Ou,interpolateNumber:Au,interpolateObject:Cu,interpolateRound:zu,interpolateString:Ru,interpolateTransformCss:gk,interpolateTransformSvg:mk,interpolateZoom:function(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=t[0],s=t[1],f=t[2],c=u-i,l=s-a,d=c*c+l*l;if(d<1e-12)r=Math.log(f/o)/vk,n=function(e){return[i+e*c,a+e*l,o*Math.exp(vk*e*r)]};else{var h=Math.sqrt(d),p=(f*f-o*o+4*d)/(2*o*2*h),g=(f*f-o*o-4*d)/(2*f*2*h),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/vk,n=function(e){var t,n,u=e*r,s=Pu(m),f=o/(2*h)*(s*(n=vk*u+m,((n=Math.exp(2*n))-1)/(n+1))-(t=m,((t=Math.exp(t))-1/t)/2));return[i+f*c,a+f*l,o*s/Pu(vk*u+m)]}}return n.duration=1e3*r,n},interpolateRgb:sk,interpolateRgbBasis:fk,interpolateRgbBasisClosed:ck,interpolateHsl:yk,interpolateHslLong:bk,interpolateLab:function(e,t){var n=Mu((e=uu(e)).l,(t=uu(t)).l),r=Mu(e.a,t.a),i=Mu(e.b,t.b),a=Mu(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}},interpolateHcl:_k,interpolateHclLong:xk,interpolateCubehelix:wk,interpolateCubehelixLong:kk,piecewise:function(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}},quantize:function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}}),Sk=[0,1],Ek=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Vu.prototype=Xu.prototype,Xu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ok,Ak,Ck,Rk={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Zu(100*e,t)},r:Zu,s:function(e,t){var n=Yu(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(uk=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:o<a?r+new Array(a-o+1).join("0"):0<a?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Yu(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},Tk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];Ku({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var zk=1e3,Nk=60*zk,Dk=60*Nk,Pk=24*Dk,Lk=7*Pk,qk=30*Pk,$k=365*Pk,jk=Array.prototype.map,Fk=Array.prototype.slice,Ik={identity:rs,linear:ns,log:ls,ordinal:Go,pow:hs,sqrt:ps,quantile:gs,quantize:ms,threshold:vs,time:xs,utc:ws,band:ks,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(ks().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=p(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=ns(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=ns(),r=[];return t.domain=function(e){return arguments.length?(r=Ms(e),n.domain([r[0],p(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(cb(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=Ms(e),t):n.slice()},t.range=function(e){return arguments.length?(r=Fk.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var Uk in Ik)Ss(Uk,Ik[Uk]);var Bk=Es("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Wk=Es("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Gk=Es("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Yk=Es("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),Hk=Es("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),Vk=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Es),Xk=Os("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Zk=Os("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Jk=Os("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Qk=Os("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Kk=Os("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),eM=Os("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),tM=Os("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),nM=Os("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),rM=Os("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),iM=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Os),aM=As(iM),oM=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Os),uM=As(oM),sM=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Os),fM=As(sM),cM=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Os),lM=As(cM),dM=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Os),hM=As(dM),pM=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Os),gM=As(pM),mM=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Os),vM=As(mM),yM=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Os),bM=As(yM),_M=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Os),xM=As(_M),wM=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Os),kM=As(wM),MM=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Os),SM=As(MM),EM=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Os),OM=As(EM),AM=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Os),CM=As(AM),RM=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Os),TM=As(RM),zM=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Os),NM=As(zM),DM=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Os),PM=As(DM),LM=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Os),qM=As(LM),$M=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Os),jM=As($M),FM=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Os),IM=As(FM),UM=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Os),BM=As(UM),WM=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Os),GM=As(WM),YM=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Os),HM=As(YM),VM=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Os),XM=As(VM),ZM=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Os),JM=As(ZM),QM=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Os),KM=As(QM),eS=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Os),tS=As(eS),nS=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Os),rS=As(nS),iS=kk(gu(300,.5,0),gu(-240,.5,1)),aS=kk(gu(-100,.75,.35),gu(80,1.5,.8)),oS=kk(gu(260,.75,.35),gu(80,1.5,.8)),uS=gu(),sS=Ko(),fS=Math.PI/3,cS=2*Math.PI/3,lS=Ts(Os("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),dS=Ts(Os("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),hS=Ts(Os("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),pS=Ts(Os("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),gS=Object.freeze({
schemeCategory10:Xk,schemeAccent:Zk,schemeDark2:Jk,schemePaired:Qk,schemePastel1:Kk,schemePastel2:eM,schemeSet1:tM,schemeSet2:nM,schemeSet3:rM,interpolateBrBG:aM,schemeBrBG:iM,interpolatePRGn:uM,schemePRGn:oM,interpolatePiYG:fM,schemePiYG:sM,interpolatePuOr:lM,schemePuOr:cM,interpolateRdBu:hM,schemeRdBu:dM,interpolateRdGy:gM,schemeRdGy:pM,interpolateRdYlBu:vM,schemeRdYlBu:mM,interpolateRdYlGn:bM,schemeRdYlGn:yM,interpolateSpectral:xM,schemeSpectral:_M,interpolateBuGn:kM,schemeBuGn:wM,interpolateBuPu:SM,schemeBuPu:MM,interpolateGnBu:OM,schemeGnBu:EM,interpolateOrRd:CM,schemeOrRd:AM,interpolatePuBuGn:TM,schemePuBuGn:RM,interpolatePuBu:NM,schemePuBu:zM,interpolatePuRd:PM,schemePuRd:DM,interpolateRdPu:qM,schemeRdPu:LM,interpolateYlGnBu:jM,schemeYlGnBu:$M,interpolateYlGn:IM,schemeYlGn:FM,interpolateYlOrBr:BM,schemeYlOrBr:UM,interpolateYlOrRd:GM,schemeYlOrRd:WM,interpolateBlues:HM,schemeBlues:YM,interpolateGreens:XM,schemeGreens:VM,interpolateGreys:JM,schemeGreys:ZM,interpolatePurples:KM,schemePurples:QM,interpolateReds:tS,schemeReds:eS,interpolateOranges:rS,schemeOranges:nS,interpolateCubehelixDefault:iS,interpolateRainbow:Cs,interpolateWarm:aS,interpolateCool:oS,interpolateSinebow:Rs,interpolateViridis:lS,interpolateMagma:dS,interpolateInferno:hS,interpolatePlasma:pS}),mS={blueorange:Vk},vS={category10:Xk,accent:Zk,dark2:Jk,paired:Qk,pastel1:Kk,pastel2:eM,set1:tM,set2:nM,set3:rM,category20:Bk,category20b:Wk,category20c:Gk,tableau10:Yk,tableau20:Hk,viridis:lS,magma:dS,inferno:hS,plasma:pS,blueorange:fk(p(Vk))};zs("blues","Blues"),zs("greens","Greens"),zs("greys","Greys"),zs("purples","Purples"),zs("reds","Reds"),zs("oranges","Oranges"),zs("brownbluegreen","BrBG"),zs("purplegreen","PRGn"),zs("pinkyellowgreen","PiYG"),zs("purpleorange","PuOr"),zs("redblue","RdBu"),zs("redgrey","RdGy"),zs("redyellowblue","RdYlBu"),zs("redyellowgreen","RdYlGn"),zs("spectral","Spectral"),zs("bluegreen","BuGn"),zs("bluepurple","BuPu"),zs("greenblue","GnBu"),zs("orangered","OrRd"),zs("purplebluegreen","PuBuGn"),zs("purpleblue","PuBu"),zs("purplered","PuRd"),zs("redpurple","RdPu"),zs("yellowgreenblue","YlGnBu"),zs("yellowgreen","YlGn"),zs("yelloworangebrown","YlOrBr"),zs("yelloworangered","YlOrRd");var yS={millisecond:wy,second:Sy,minute:Ey,hour:Oy,day:Ay,week:Cy,month:zy,year:Ny},bS={millisecond:wy,second:Sy,minute:Dy,hour:Py,day:Ly,week:qy,month:Fy,year:Iy};P(js,sn).transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=null==e.count?e.values?e.values.length:10:Ps(i,e.count),o=e.format||$s(i,a,e.formatSpecifier),u=e.values?Ls(i,e.values,a):qs(i,a);return r&&(n.rem=r),r=u.map(function(e,t){return te({index:t/(u.length-1),value:e,label:o(e)})}),e.extra&&r.push(te({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},P(Fs,sn).transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Is,a=e.key||K,u=this.value;return Iv(r.encode)&&(r.encode=null),u&&(e.modified("key")||t.modified(a))&&o("DataJoin does not support modified key function or fields."),u||(t=t.addAll(),this.value=u=D().test(Us),u.lookup=function(e){return u.get(a(e))}),t.visit(t.ADD,function(e){var t=a(e),n=u.get(t);n?n.exit?(u.empty--,r.add.push(n)):r.mod.push(n):(u.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,function(e){var t=a(e),n=u.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,function(e){var t=a(e),n=u.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++u.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&u.empty>n.cleanThreshold&&n.runAfter(u.clean),r},P(Bs,sn).transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.encoders,i=t.encode;if(Iv(i)){if(!n.changed()&&!i.every(function(e){return r[e]}))return t.StopPropagation;i=i[0],n.encode=null}var a="enter"===i,o=r.update||Vv,u=r.enter||Vv,s=r.exit||Vv,f=(i&&!a?r[i]:o)||Vv;if(t.changed(t.ADD)&&(t.visit(t.ADD,function(t){u(t,e),o(t,e),f!==Vv&&f!==o&&f(t,e)}),n.modifies(u.output),n.modifies(o.output),f!==Vv&&f!==o&&n.modifies(f.output)),t.changed(t.REM)&&s!==Vv&&(t.visit(t.REM,function(t){s(t,e)}),n.modifies(s.output)),a||f!==Vv){var c=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(c,function(t){var r=u(t,e);(f(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(u.output)):t.visit(c,function(t){f(t,e)&&n.mod.push(t)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation};var _S="symbol",xS={};xS[vw]=function(e){var t=[-1/0].concat(e.quantiles());return t.max=1/0,t},xS[yw]=function(e){var t=e.domain(),n=t[0],r=p(t),i=e.range().length,a=new Array(i),o=0;for(a[0]=-1/0;++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=1/0,a},xS[bw]=function(e){var t=[-1/0].concat(e.domain());return t.max=1/0,t},xS["bin-linear"]=xS[_w]=function(e){var t=e.domain();return t.max=t.pop(),t},P(Ys,sn).transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o,u,s,f,c,l,d,h=t.fork(t.NO_SOURCE|t.NO_FIELDS),g=this.value,m=e.type||_S,v=e.scale,y=null==e.count?5:Ps(v,e.count),b=e.format||$s(v,y,e.formatSpecifier),_=e.values||(u=y,(s=xS[(o=v).type])?s(o):qs(o,u));return b=Ws(v,b,m),g&&(h.rem=g),m===_S?(A(i=e.size)?(e.values||0!==v(_[0])||(_=_.slice(1)),a=_.reduce(function(t,n){return Math.max(t,i(n,e))},0)):i=R(a=i||8),g=_.map(function(t,n){return te({index:n,label:b(t,n,_),value:t,offset:a,size:i(t,e)})})):"gradient"===m?(n=e.values?v.domain():_,f=v,c=n[0],l=p(n),r=(d=l-c)?"linear"===f.type||"sequential"===f.type?function(e){return(e-c)/d}:f.copy().domain([c,l]).range([0,1]).interpolate(Ds):R(0),g=_.map(function(e,t){return te({index:t,label:b(e,t,_),value:e,perc:r(e)})})):(i=_.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+p(t),a=i-r;if(e.type===bw){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(e){return(e-r)/a}}(v),g=_.map(function(e,t){return te({index:t,label:b(e,t,_),value:e,perc:t?r(e):0,perc2:t===i?1:r(_[t+1])})})),h.source=g,h.add=g,this.value=g,h};var wS=D({line:Qs,"line-radial":function(e,t,n,r){return Qs(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:Ks,"arc-radial":function(e,t,n,r){return Ks(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:ef,"curve-radial":function(e,t,n,r){return ef(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:e<n;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*i+","+t*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}});Js.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string",default:"path"}]},P(Js,sn).transform=function(e,t){var n=e.sourceX||Hs,r=e.sourceY||Vs,i=e.targetX||Xs,a=e.targetY||Zs,u=e.as||"path",s=e.orient||"vertical",f=e.shape||"line",c=wS.get(f+"-"+s)||wS.get(f);return c||o("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,function(e){e[u]=c(n(e),r(e),i(e),a(e))}),t.reflow(e.modified()).modifies(u)},tf.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},P(tf,sn).transform=function(e,t){var n,r,i,a=e.as||["startAngle","endAngle"],o=a[0],u=a[1],s=e.field||Yv,f=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,l=t.source,d=l.map(s),h=d.length,p=f,g=(c-f)/function(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a}(d),m=Mn(h);for(e.sort&&m.sort(function(e,t){return d[e]-d[t]}),n=0;n<h;++n)i=d[m[n]],(r=l[m[n]])[o]=p,r[u]=p+=i*g;return this.value=d,t.reflow(e.modified()).modifies(a)};var kS=5,MS=V([gw,lw,dw]),SS=V([gw,cw,lw,dw,"time","utc"]),ES=V(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);P(nf,sn).transform=function(e,t){var n,r=t.dataflow,i=this.value;for(n in i&&!e.modified("type")||(this.value=i=Ss((e.type||gw).toLowerCase())()),e)if(!ES[n]){if("padding"===n&&SS[i.type])continue;A(i[n])?i[n](e[n]):r.warn("Unsupported scale property: "+n)}return function(e,t,n){var r=t.round||!1,i=t.range;if(null!=t.rangeStep)i=function(e,t,n){e!==hw&&e!==pw&&o("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===pw?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Lo(n,i,r)]}(e.type,t,n);else if(t.scheme){if(A(i=function(e,t,n){var r,i=t.scheme.toLowerCase(),a=Ns(i),u=t.schemeExtent;return a||o("Unrecognized scheme name: "+t.scheme),n=e===bw?n+1:e===_w?n-1:e===vw||e===yw?+t.schemeCount||kS:n,e===xw?rf(a,u,t.reverse):!u&&(r=Ns(i+"-"+n))?r:A(a)?function(e,t){for(var n=new Array(t),r=t+2,i=0;i<t;)n[i]=e(++i/r);return n}(rf(a,u),n):e===mw?a:a.slice(0,n)}(e.type,t,n)))return e.interpolator(i)}else if(i&&e.type===xw)return e.interpolator(fk(af(i,t.reverse)));i&&t.interpolate&&e.interpolate?e.interpolate((a=t.interpolate,u=t.interpolateGamma,f=Mk[(s=a,"interpolate"+s.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join(""))],null!=u&&f&&f.gamma?f.gamma(u):f)):A(e.round)?e.round(r):A(e.rangeRound)&&e.interpolate(r?zu:Tu);var a,u,s,f;i&&e.range(af(i,t.reverse))}(i,e,function(e,t,n){var r,i,a=(r=e,i=t.domainRaw,i?(r.domain(i),i.length):-1);if(-1<a)return a;var o,u,s=t.domain,f=e.type,c=t.zero||void 0===t.zero&&MS[f];if(!s)return 0;SS[f]&&t.padding&&s[0]!==p(s)&&(l=f,d=s,h=t.range,g=t.padding,m=t.exponent,v=Math.abs(p(h)-h[0]),y=v/(v-2*g),b=l===cw?S(d,null,y):l===dw?E(d,null,y,.5):l===lw?E(d,null,y,m):M(d,null,y),(d=d.slice())[0]=b[0],d[d.length-1]=b[1],s=d);var l,d,h,g,m,v,y,b;return(c||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(o=(s=s.slice()).length-1||1,c&&(0<s[0]&&(s[0]=0),s[o]<0&&(s[o]=0)),null!=t.domainMin&&(s[0]=t.domainMin),null!=t.domainMax&&(s[o]=t.domainMax),null!=t.domainMid&&(((u=t.domainMid)<s[0]||u>s[o])&&n.warn("Scale domainMid exceeds domain min or max.",u),s.splice(o,0,u))),e.domain(s),f===mw&&e.unknown(void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&Ps(e,t.nice)||null),s.length}(i,e,r)),t.fork(t.NO_SOURCE|t.NO_FIELDS)},P(of,sn).transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(e.sort),this.modified(n),t};var OS;uf.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:["y0","y1"]}]},(OS=P(uf,sn)).transform=function(e,t){var n,r,i,a,o=e.as||["y0","y1"],u=o[0],s=o[1],f=e.field||Yv,c="center"===e.offset?sf:"normalize"===e.offset?ff:cf;for(r=0,i=(n=function(e,t,n,r){var i,a,o,u,s,f,c,l,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],f=t.map(p),(c=i[f])||(i[f]=c=[],h.push(c)),c.push(s);for(d=f=0,u=h.length;f<u;++f){for(c=h[f],l=a=0,o=c.length;a<o;++a)l+=Math.abs(r(c[a]));c.sum=l,d<l&&(d=l),n&&c.sort(n)}return h.max=d,h}(t.source,e.groupby,e.sort,f)).length,a=n.max;r<i;++r)c(n[r],a,f,u,s);return t.reflow(e.modified()).modifies(o)};var AS=Object.freeze({axisticks:js,datajoin:Fs,encode:Bs,legendentries:Ys,linkpath:Js,pie:tf,scale:nf,sortitems:of,stack:uf,validTicks:Ls}),CS=Array.prototype.slice,RS=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],TS=["size","smooth"],zS=["x","y","size","cellSize","bandwidth"];xf.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]},P(xf,sn).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i,a,o=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=e.count||10;return e.values?(n=mf(),r=TS,i=e.values):(n=function(){function e(e){var n=new Float32Array(h*p),r=new Float32Array(h*p);e.forEach(function(e,t,r){var i=o(e,t,r)+d>>l,a=u(e,t,r)+d>>l;0<=i&&i<h&&0<=a&&a<p&&++n[i+a*h]}),vf({width:h,height:p,data:n},{width:h,height:p,data:r},c>>l),yf({width:h,height:p,data:r},{width:h,height:p,data:n},c>>l),vf({width:h,height:p,data:n},{width:h,height:p,data:r},c>>l),yf({width:h,height:p,data:r},{width:h,height:p,data:n},c>>l),vf({width:h,height:p,data:n},{width:h,height:p,data:r},c>>l),yf({width:h,height:p,data:r},{width:h,height:p,data:n},c>>l);var i=g(n);if(!Array.isArray(i)){var a=Rn(n);i=On(0,a,i),(i=Mn(0,Math.floor(a/i)*i,i)).shift()}return mf().thresholds(i).size([h,p])(n).map(t)}function t(e){return e.value*=Math.pow(2,-2*l),e.coordinates.forEach(n),e}function n(e){e.forEach(r)}function r(e){e.forEach(i)}function i(e){e[0]=e[0]*Math.pow(2,l)-d,e[1]=e[1]*Math.pow(2,l)-d}function a(){return h=s+2*(d=3*c)>>l,p=f+2*d>>l,e}var o=bf,u=_f,s=960,f=500,c=20,l=2,d=3*c,h=s+2*d>>l,p=f+2*d>>l,g=df(20);return e.x=function(t){return arguments.length?(o="function"==typeof t?t:df(+t),e):o},e.y=function(t){return arguments.length?(u="function"==typeof t?t:df(+t),e):u},e.size=function(e){if(!arguments.length)return[s,f];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(0<=t||0<=t))throw new Error("invalid size");return s=t,f=n,a()},e.cellSize=function(e){if(!arguments.length)return 1<<l;if(!(1<=(e=+e)))throw new Error("invalid cell size");return l=Math.floor(Math.log(e)/Math.LN2),a()},e.thresholds=function(t){return arguments.length?(g="function"==typeof t?t:df(Array.isArray(t)?CS.call(t):t),e):g},e.bandwidth=function(e){if(!arguments.length)return Math.sqrt(c*(c+1));if(!(0<=(e=+e)))throw new Error("invalid bandwidth");return c=Math.round((Math.sqrt(4*e*e+1)-1)/2),a()},e}(),r=zS,i=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?u:(a=u,function(e){for(var t=kn(e),n=t[0],r=t[1]-n,i=[],o=1;o<=a;++o)i.push(n+r*o/(a+1));return i}))),r.forEach(function(t){null!=e[t]&&n[t](e[t])}),this.value&&(o.rem=this.value),i=i&&i.length?n(i).map(te):[],this.value=o.source=o.add=i,o};var NS="FeatureCollection";wf.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},P(wf,sn).transform=function(e,t){var n,r=this._features,i=this._points,o=e.fields,u=o&&o[0],s=o&&o[1],f=e.geojson,c=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(a(f))||u&&t.modified(a(u))||s&&t.modified(a(s)),this.value&&!n||(c=t.SOURCE,this._features=r=[],this._points=i=[]),f&&t.visit(c,function(e){r.push(f(e))}),u&&s&&(t.visit(c,function(e){var t=u(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])}),r=r.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:NS,features:r}},Mf.prototype={constructor:Mf,reset:function(){this.s=this.t=0},add:function(e){Sf(lE,e,this.t),Sf(this,lE.s,this.s),this.s?this.t+=lE.t:this.s=lE.t},valueOf:function(){return this.s}};var DS,PS,LS,qS,$S,jS,FS,IS,US,BS,WS,GS,YS,HS,VS,XS,ZS,JS,QS,KS,eE,tE,nE,rE,iE,aE,oE,uE,sE,fE,cE,lE=new Mf,dE=1e-6,hE=Math.PI,pE=hE/2,gE=hE/4,mE=2*hE,vE=180/hE,yE=hE/180,bE=Math.abs,_E=Math.atan,xE=Math.atan2,wE=Math.cos,kE=Math.ceil,ME=Math.exp,SE=Math.log,EE=Math.pow,OE=Math.sin,AE=Math.sign||function(e){return 0<e?1:e<0?-1:0},CE=Math.sqrt,RE=Math.tan,TE={Feature:function(e,t){Cf(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Cf(n[r].geometry,t)}},zE={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Rf(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Rf(n[r],t,0)},Polygon:function(e,t){Tf(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Tf(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Cf(n[r],t)}},NE=kf(),DE=kf(),PE={point:Af,lineStart:Af,lineEnd:Af,polygonStart:function(){NE.reset(),PE.lineStart=Nf,PE.lineEnd=Df},polygonEnd:function(){var e=+NE;DE.add(e<0?mE+e:e),this.lineStart=this.lineEnd=this.point=Af},sphere:function(){DE.add(mE)}},LE=kf(),qE={point:Wf,lineStart:Yf,lineEnd:Hf,polygonStart:function(){qE.point=Vf,qE.lineStart=Xf,qE.lineEnd=Zf,LE.reset(),PE.polygonStart()},polygonEnd:function(){PE.polygonEnd(),qE.point=Wf,qE.lineStart=Yf,qE.lineEnd=Hf,NE<0?(jS=-(IS=180),FS=-(US=90)):dE<LE?US=90:LE<-dE&&(FS=-90),VS[0]=jS,VS[1]=IS}},$E={sphere:Af,point:ec,lineStart:nc,lineEnd:ac,polygonStart:function(){$E.lineStart=oc,$E.lineEnd=uc},polygonEnd:function(){$E.lineStart=nc,$E.lineEnd=ac}};lc.invert=lc;var jE=kf(),FE=wc(function(){return!0},function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var u,s,f,c,l,d,h,p=0<a?hE:-hE,g=bE(a-n);bE(g-hE)<dE?(e.point(n,r=0<(r+o)/2?pE:-pE),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(p,r),e.point(a,r),t=0):i!==p&&hE<=g&&(bE(n-i)<dE&&(n-=i*dE),bE(a-p)<dE&&(a-=p*dE),s=r,c=o,h=OE((u=n)-(f=a)),r=bE(h)>dE?_E((OE(s)*(d=wE(c))*OE(f)-OE(c)*(l=wE(s))*OE(u))/(l*d*h)):(s+c)/2,e.point(i,r),e.lineEnd(),e.lineStart(),e.point(p,r),t=0),e.point(n=a,r=o),i=p},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var i;if(null==e)i=n*pE,r.point(-hE,i),r.point(0,i),r.point(hE,i),r.point(hE,0),r.point(hE,-i),r.point(0,-i),r.point(-hE,-i),r.point(-hE,0),r.point(-hE,i);else if(bE(e[0]-t[0])>dE){var a=e[0]<t[0]?hE:-hE;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])},[-hE,-pE]),IE=1e9,UE=-IE;kf();var BE,WE,GE,YE,HE,VE,XE,ZE,JE=kf(),QE=kf(),KE={point:Af,lineStart:Af,lineEnd:Af,polygonStart:function(){KE.lineStart=Rc,KE.lineEnd=Nc},polygonEnd:function(){KE.lineStart=KE.lineEnd=KE.point=Af,JE.add(bE(QE)),QE.reset()},result:function(){var e=JE/2;return JE.reset(),e}},eO=1/0,tO=eO,nO=-eO,rO=nO,iO={point:function(e,t){e<eO&&(eO=e),nO<e&&(nO=e),t<tO&&(tO=t),rO<t&&(rO=t)},lineStart:Af,lineEnd:Af,polygonStart:Af,polygonEnd:Af,result:function(){var e=[[eO,tO],[nO,rO]];return nO=rO=-(tO=eO=1/0),e}},aO=0,oO=0,uO=0,sO=0,fO=0,cO=0,lO=0,dO=0,hO=0,pO={point:Dc,lineStart:Pc,lineEnd:$c,polygonStart:function(){pO.lineStart=jc,pO.lineEnd=Fc},polygonEnd:function(){pO.point=Dc,pO.lineStart=Pc,pO.lineEnd=$c},result:function(){var e=hO?[lO/hO,dO/hO]:cO?[sO/cO,fO/cO]:uO?[aO/uO,oO/uO]:[NaN,NaN];return aO=oO=uO=sO=fO=cO=lO=dO=hO=0,e}};Bc.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,mE)}},result:Af};var gO,mO,vO,yO,bO,_O=kf(),xO={point:Af,lineStart:function(){xO.point=Wc},lineEnd:function(){gO&&Gc(mO,vO),xO.point=Af},polygonStart:function(){gO=!0},polygonEnd:function(){gO=null},result:function(){var e=+_O;return _O.reset(),e}};Yc.prototype={_radius:4.5,_circle:Hc(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Hc(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},Zc.prototype={constructor:Zc,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var wO=16,kO=wE(30*yE),MO=Xc({point:function(e,t){this.stream.point(e*yE,t*yE)}}),SO=cl(function(e){return CE(2/(1+e))});SO.invert=ll(function(e){return 2*Of(e/2)});var EO=cl(function(e){return(e=Ef(e))&&e/OE(e)});EO.invert=ll(function(e){return e}),dl.invert=function(e,t){return[e,2*_E(ME(t))-pE]},ml.invert=ml,yl.invert=ll(_E),_l.invert=ll(Of),xl.invert=ll(function(e){return 2*_E(e)}),wl.invert=function(e,t){return[-t,2*_E(ME(e))-pE]};var OO=Vc(),AO=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],CO={albers:fl,albersusa:function(){function e(e){var t=e[0],n=e[1];return u=null,i.point(t,n),u||(a.point(t,n),u)||(o.point(t,n),u)}function t(){return n=r=null,e}var n,r,i,a,o,u,s=fl(),f=sl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=sl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){u=[e,t]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(.12<=i&&i<.234&&-.425<=r&&r<-.214?f:.166<=i&&i<.234&&-.214<=r&&r<-.115?c:s).invert(e)},e.stream=function(e){return n&&r===e?n:(t=[s.stream(r=e),f.stream(e),c.stream(e)],i=t.length,n={point:function(e,n){for(var r=-1;++r<i;)t[r].point(e,n)},sphere:function(){for(var e=-1;++e<i;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)t[e].polygonEnd()}});var t,i},e.precision=function(e){return arguments.length?(s.precision(e),f.precision(e),c.precision(e),t()):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),f.scale(.35*t),c.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(e){if(!arguments.length)return s.translate();var n=s.scale(),r=+e[0],u=+e[1];return i=s.translate(e).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(l),a=f.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+dE,u+.12*n+dE],[r-.214*n-dE,u+.234*n-dE]]).stream(l),o=c.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+dE,u+.166*n+dE],[r-.115*n-dE,u+.234*n-dE]]).stream(l),t()},e.fitExtent=function(t,n){return Qc(e,t,n)},e.fitSize=function(t,n){return Kc(e,t,n)},e.fitWidth=function(t,n){return el(e,t,n)},e.fitHeight=function(t,n){return tl(e,t,n)},e.scale(1070)},azimuthalequalarea:function(){return il(SO).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return il(EO).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return ol(gl).scale(109.5).parallels([30,30])},conicequalarea:sl,conicequidistant:function(){return ol(vl).scale(131.154).center([0,13.9389])},equirectangular:function(){return il(ml).scale(152.63)},gnomonic:function(){return il(yl).scale(144.049).clipAngle(60)},identity:function(){function e(){return i=a=null,o}var t,n,r,i,a,o,u=1,s=0,f=0,c=1,l=1,d=Cc,h=null,p=Cc;return o={stream:function(e){return i&&a===e?i:i=d(p(a=e))},postclip:function(i){return arguments.length?(p=i,h=t=n=r=null,e()):p},clipExtent:function(i){return arguments.length?(p=null==i?(h=t=n=r=null,Cc):Ec(h=+i[0][0],t=+i[0][1],n=+i[1][0],r=+i[1][1]),e()):null==h?null:[[h,t],[n,r]]},scale:function(t){return arguments.length?(d=bl((u=+t)*c,u*l,s,f),e()):u},translate:function(t){return arguments.length?(d=bl(u*c,u*l,s=+t[0],f=+t[1]),e()):[s,f]},reflectX:function(t){return arguments.length?(d=bl(u*(c=t?-1:1),u*l,s,f),e()):c<0},reflectY:function(t){return arguments.length?(d=bl(u*c,u*(l=t?-1:1),s,f),e()):l<0},fitExtent:function(e,t){return Qc(o,e,t)},fitSize:function(e,t){return Kc(o,e,t)},fitWidth:function(e,t){return el(o,e,t)},fitHeight:function(e,t){return tl(o,e,t)}}},mercator:function(){return hl(dl).scale(961/mE)},orthographic:function(){return il(_l).scale(249.5).clipAngle(90+dE)},stereographic:function(){return il(xl).scale(250).clipAngle(142)},transversemercator:function(){var e=hl(wl),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],2<e.length?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var RO in CO)kl(RO,CO[RO]);Sl.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},P(Sl,sn).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Wv,a=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=Ml(e.projection),n.materialize().reflow()):o=i===Wv||t.modified(i.fields)?n.ADD_MOD:n.ADD;var u=function(e,t){var n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}(r,e.pointRadius);return n.visit(o,function(e){e[a]=r(i(e))}),r.pointRadius(u),n.modifies(a)},El.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},P(El,sn).transform=function(e,t){function n(e){var t=i([a(e),o(e)]);t?(e[s]=t[0],e[f]=t[1]):(e[s]=void 0,e[f]=void 0)}var r,i=e.projection,a=e.fields[0],o=e.fields[1],u=e.as||["x","y"],s=u[0],f=u[1];return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,n):(r=t.modified(a.fields)||t.modified(o.fields),t.visit(r?t.ADD_MOD:t.ADD,n)),t.modifies(u)},Ol.Definition={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},P(Ol,sn).transform=function(e,t){var n,r,i,a,o=t.fork(t.ALL),u=this.value,s=e.field||l("datum"),f=e.as||"shape",c=o.ADD_MOD;return u&&!e.modified()||(this.value=(n=Ml(e.projection),r=s,i=e.pointRadius,(a=null==i?function(e){return n(r(e))}:function(e){var t=n.pointRadius(),a=n.pointRadius(i)(r(e));return n.pointRadius(t),a}).context=function(e){return n.context(e),a},u=a),o.materialize().reflow(),c=o.SOURCE),o.visit(c,function(e){e[f]=u}),o.modifies(f)},Al.Definition={type:"Graticule",metadata:{changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},P(Al,sn).transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)A(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(ie(r[0],n)):t.add.push(te(n)),r[0]=n,t},P(Cl,sn).transform=function(e,t){var n,r,i,a,u=this.value;return!u||e.modified("type")?(this.value=u=function(e){var t=kl((e||"mercator").toLowerCase());return t||o("Unrecognized projection type: "+e),t()}(e.type),AO.forEach(function(t){null!=e[t]&&Rl(u,t,e[t])})):AO.forEach(function(t){e.modified(t)&&Rl(u,t,e[t])}),null!=e.pointRadius&&u.path.pointRadius(e.pointRadius),e.fit&&(n=u,a=(r=e).fit,i=1===(a=O(a)).length?a[0]:{type:NS,features:a.reduce(function(e,t){return t&&t.type===NS?e.push.apply(e,t.features):Iv(t)?e.push.apply(e,t):e.push(t),e},[])},r.extent?n.fitExtent(r.extent,i):r.size&&n.fitSize(r.size,i)),t.fork(t.NO_SOURCE|t.NO_FIELDS)};var TO=Object.freeze({contour:xf,geojson:wf,geopath:Sl,geopoint:El,geoshape:Ol,graticule:Al,projection:Cl}),zO=ql.prototype=$l.prototype;zO.copy=function(){var e,t,n=new $l(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=jl(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=jl(t));return n},zO.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return Nl(this.cover(t,n),t,n,e)},zO.addAll=function(e){var t,n,r,i,a=e.length,o=new Array(a),u=new Array(a),s=1/0,f=1/0,c=-1/0,l=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||((o[n]=r)<s&&(s=r),c<r&&(c=r),(u[n]=i)<f&&(f=i),l<i&&(l=i));for(c<s&&(s=this._x0,c=this._x1),l<f&&(f=this._y0,l=this._y1),this.cover(s,f).cover(c,l),n=0;n<a;++n)Nl(this,o[n],u[n],e[n]);return this},zO.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{if(!(e<n||i<e||t<r||a<t))return this;var o,u,s=i-n,f=this._root;switch(u=(t<(r+a)/2)<<1|e<(n+i)/2){case 0:for(;(o=new Array(4))[u]=f,f=o,a=r+(s*=2),(i=n+s)<e||a<t;);break;case 1:for(;(o=new Array(4))[u]=f,f=o,a=r+(s*=2),e<(n=i-s)||a<t;);break;case 2:for(;(o=new Array(4))[u]=f,f=o,r=a-(s*=2),(i=n+s)<e||t<r;);break;case 3:for(;(o=new Array(4))[u]=f,f=o,r=a-(s*=2),e<(n=i-s)||t<r;);}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},zO.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},zO.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},zO.find=function(e,t,n){var r,i,a,o,u,s,f,c=this._x0,l=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new Dl(g,c,l,d,h)),null==n?n=1/0:(c=e-n,l=t-n,d=e+n,h=t+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(i=s.x0)>d||(a=s.y0)>h||(o=s.x1)<c||(u=s.y1)<l))if(g.length){var m=(i+o)/2,v=(a+u)/2;p.push(new Dl(g[3],m,v,o,u),new Dl(g[2],i,v,m,u),new Dl(g[1],m,a,o,v),new Dl(g[0],i,a,m,v)),(f=(v<=t)<<1|m<=e)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=s)}else{var y=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);c=e-x,l=t-x,d=e+x,h=t+x,r=g.data}}return r},zO.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;
var t,n,r,i,a,o,u,s,f,c,l,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((f=a>=(u=(p+m)/2))?p=u:m=u,(c=o>=(s=(g+v)/2))?g=s:v=s,!(h=(t=h)[l=c<<1|f]))return this;if(!h.length)break;(t[l+1&3]||t[l+2&3]||t[l+3&3])&&(n=t,d=l)}for(;h.data!==e;)if(!(h=(r=h).next))return this;return(i=h.next)&&delete h.next,r?i?r.next=i:delete r.next:t?(i?t[l]=i:delete t[l],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h)):this._root=i,this},zO.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},zO.root=function(){return this._root},zO.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},zO.visit=function(e){var t,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new Dl(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&s.length){var f=(r+a)/2,c=(i+o)/2;(n=s[3])&&u.push(new Dl(n,f,c,a,o)),(n=s[2])&&u.push(new Dl(n,r,c,f,o)),(n=s[1])&&u.push(new Dl(n,f,i,a,c)),(n=s[0])&&u.push(new Dl(n,r,i,f,c))}return this},zO.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Dl(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,u=t.y0,s=t.x1,f=t.y1,c=(o+s)/2,l=(u+f)/2;(a=i[0])&&n.push(new Dl(a,o,u,c,l)),(a=i[1])&&n.push(new Dl(a,c,u,s,l)),(a=i[2])&&n.push(new Dl(a,o,l,c,f)),(a=i[3])&&n.push(new Dl(a,c,l,s,f))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},zO.x=function(e){return arguments.length?(this._x=e,this):this._x},zO.y=function(e){return arguments.length?(this._y=e,this):this._y};var NO={value:function(){}};Gl.prototype=Wl.prototype={constructor:Gl,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),o=-1,u=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<u;)if(n=(e=a[o]).type)i[n]=Hl(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Hl(i[n],e.name,null);return this}for(;++o<u;)if((n=(e=a[o]).type)&&(n=Yl(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gl(e)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var DO,PO,LO=0,qO=0,$O=0,jO=1e3,FO=0,IO=0,UO=0,BO="object"==typeof performance&&performance.now?performance:Date,WO="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};Zl.prototype=Jl.prototype={constructor:Zl,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Vl():+n)+(null==t?0:+t),this._next||PO===this||(PO?PO._next=this:DO=this,PO=this),this._call=e,this._time=n,ed()},stop:function(){this._call&&(this._call=null,this._time=1/0,ed())}};var GO=10,YO=Math.PI*(3-Math.sqrt(5)),HO={center:function(e,t){function n(){var n,i,a=r.length,o=0,u=0;for(n=0;n<a;++n)o+=(i=r[n]).x,u+=i.y;for(o=o/a-e,u=u/a-t,n=0;n<a;++n)(i=r[n]).x-=o,i.y-=u}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n},collide:function(e){function t(){function e(e,t,n,r,i){var a=e.data,u=e.r,h=l+u;if(!a)return f+h<t||r<f-h||c+h<n||i<c-h;if(a.index>s.index){var p=f-a.x-a.vx,g=c-a.y-a.vy,m=p*p+g*g;m<h*h&&(0===p&&(m+=(p=zl())*p),0===g&&(m+=(g=zl())*g),m=(h-(m=Math.sqrt(m)))/m*o,s.vx+=(p*=m)*(h=(u*=u)/(d+u)),s.vy+=(g*=m)*h,a.vx-=p*(h=1-h),a.vy-=g*h)}}for(var t,r,s,f,c,l,d,h=i.length,p=0;p<u;++p)for(r=ql(i,Fl,Il).visitAfter(n),t=0;t<h;++t)s=i[t],l=a[s.index],d=l*l,f=s.x+s.vx,c=s.y+s.vy,r.visit(e)}function n(e){if(e.data)return e.r=a[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function r(){if(i){var t,n,r=i.length;for(a=new Array(r),t=0;t<r;++t)n=i[t],a[n.index]=+e(n,t,i)}}var i,a,o=1,u=1;return"function"!=typeof e&&(e=Tl(null==e?1:+e)),t.initialize=function(e){i=e,r()},t.iterations=function(e){return arguments.length?(u=+e,t):u},t.strength=function(e){return arguments.length?(o=+e,t):o},t.radius=function(n){return arguments.length?(e="function"==typeof n?n:Tl(+n),r(),t):e},t},nbody:function(){function e(e){var t,u=i.length,s=ql(i,td,nd).visitAfter(n);for(o=e,t=0;t<u;++t)a=i[t],s.visit(r)}function t(){if(i){var e,t,n=i.length;for(u=new Array(n),e=0;e<n;++e)t=i[e],u[t.index]=+s(t,e,i)}}function n(e){var t,n,r,i,a,o=0,s=0;if(e.length){for(r=i=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else for((t=e).x=t.data.x,t.y=t.data.y;o+=u[t.data.index],t=t.next;);e.value=o}function r(e,t,n,r){if(!e.value)return!0;var i=e.x-a.x,s=e.y-a.y,d=r-t,h=i*i+s*s;if(d*d/l<h)return h<c&&(0===i&&(h+=(i=zl())*i),0===s&&(h+=(s=zl())*s),h<f&&(h=Math.sqrt(f*h)),a.vx+=i*e.value*o/h,a.vy+=s*e.value*o/h),!0;if(!(e.length||c<=h))for((e.data!==a||e.next)&&(0===i&&(h+=(i=zl())*i),0===s&&(h+=(s=zl())*s),h<f&&(h=Math.sqrt(f*h)));e.data!==a&&(d=u[e.data.index]*o/h,a.vx+=i*d,a.vy+=s*d),e=e.next;);}var i,a,o,u,s=Tl(-30),f=1,c=1/0,l=.81;return e.initialize=function(e){i=e,t()},e.strength=function(n){return arguments.length?(s="function"==typeof n?n:Tl(+n),t(),e):s},e.distanceMin=function(t){return arguments.length?(f=t*t,e):Math.sqrt(f)},e.distanceMax=function(t){return arguments.length?(c=t*t,e):Math.sqrt(c)},e.theta=function(t){return arguments.length?(l=t*t,e):Math.sqrt(l)},e},link:function(e){function t(t){for(var n=0,r=e.length;n<h;++n)for(var i,u,s,c,l,d,p,g=0;g<r;++g)u=(i=e[g]).source,c=(s=i.target).x+s.vx-u.x-u.vx||zl(),l=s.y+s.vy-u.y-u.vy||zl(),c*=d=((d=Math.sqrt(c*c+l*l))-o[g])/d*t*a[g],l*=d,s.vx-=c*(p=f[g]),s.vy-=l*p,u.vx+=c*(p=1-p),u.vy+=l*p}function n(){if(u){var t,n,l=u.length,d=e.length,h=$o(u,c);for(t=0,s=new Array(l);t<d;++t)(n=e[t]).index=t,"object"!=typeof n.source&&(n.source=Bl(h,n.source)),"object"!=typeof n.target&&(n.target=Bl(h,n.target)),s[n.source.index]=(s[n.source.index]||0)+1,s[n.target.index]=(s[n.target.index]||0)+1;for(t=0,f=new Array(d);t<d;++t)n=e[t],f[t]=s[n.source.index]/(s[n.source.index]+s[n.target.index]);a=new Array(d),r(),o=new Array(d),i()}}function r(){if(u)for(var t=0,n=e.length;t<n;++t)a[t]=+l(e[t],t,e)}function i(){if(u)for(var t=0,n=e.length;t<n;++t)o[t]=+d(e[t],t,e)}var a,o,u,s,f,c=Ul,l=function(e){return 1/Math.min(s[e.source.index],s[e.target.index])},d=Tl(30),h=1;return null==e&&(e=[]),t.initialize=function(e){u=e,n()},t.links=function(r){return arguments.length?(e=r,n(),t):e},t.id=function(e){return arguments.length?(c=e,t):c},t.iterations=function(e){return arguments.length?(h=+e,t):h},t.strength=function(e){return arguments.length?(l="function"==typeof e?e:Tl(+e),r(),t):l},t.distance=function(e){return arguments.length?(d="function"==typeof e?e:Tl(+e),i(),t):d},t},x:function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)(t=r[n]).vx+=(a[n]-t.x)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=Tl(.1);return"function"!=typeof e&&(e=Tl(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:Tl(+e),n(),t):o},t.x=function(r){return arguments.length?(e="function"==typeof r?r:Tl(+r),n(),t):e},t},y:function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)(t=r[n]).vy+=(a[n]-t.y)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=Tl(.1);return"function"!=typeof e&&(e=Tl(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"==typeof e?e:Tl(+e),n(),t):o},t.y=function(r){return arguments.length?(e="function"==typeof r?r:Tl(+r),n(),t):e},t}},VO="forces",XO=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ZO=["static","iterations"],JO=["x","y","vx","vy"];rd.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:JO}]};var QO=P(rd,sn);QO.transform=function(e,t){var n,r,i,a,o,u,s,f,c=this.value,l=t.changed(t.ADD_REM),d=e.modified(XO),h=e.iterations||300;if(c?(l&&(t.modifies("index"),c.nodes(t.source)),(d||t.changed(t.MOD))&&id(c,e,0,t)):(this.value=(i=t.source,a=e,o=function(e){function t(){n(),h.call("tick",a),o<u&&(d.stop(),h.call("end",a))}function n(){var t,n,r=e.length;for(o+=(f-o)*s,l.each(function(e){e(o)}),t=0;t<r;++t)null==(n=e[t]).fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0)}function r(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,isNaN(t.x)||isNaN(t.y)){var i=GO*Math.sqrt(n),a=n*YO;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function i(t){return t.initialize&&t.initialize(e),t}var a,o=1,u=.001,s=1-Math.pow(u,1/300),f=0,c=.6,l=$o(),d=Jl(t),h=Wl("tick","end");return null==e&&(e=[]),r(),a={tick:n,restart:function(){return d.restart(t),a},stop:function(){return d.stop(),a},nodes:function(t){return arguments.length?(e=t,r(),l.each(i),a):e},alpha:function(e){return arguments.length?(o=+e,a):o},alphaMin:function(e){return arguments.length?(u=+e,a):u},alphaDecay:function(e){return arguments.length?(s=+e,a):+s},alphaTarget:function(e){return arguments.length?(f=+e,a):f},velocityDecay:function(e){return arguments.length?(c=1-e,a):1-c},force:function(e,t){return 1<arguments.length?(null==t?l.remove(e):l.set(e,i(t)),a):l.get(e)},find:function(t,n,r){var i,a,o,u,s,f=0,c=e.length;for(null==r?r=1/0:r*=r,f=0;f<c;++f)(o=(i=t-(u=e[f]).x)*i+(a=n-u.y)*a)<r&&(s=u,r=o);return s},on:function(e,t){return 1<arguments.length?(h.on(e,t),a):h.on(e)}}}(i),u=!1,s=o.stop,f=o.restart,o.stopped=function(){return u},o.restart=function(){return u=!1,f()},o.stop=function(){return u=!0,s()},c=id(o,a,!0).on("end",function(){u=!0})),c.on("tick",(n=t.dataflow,r=this,function(){n.touch(r).run()})),e.static||(l=!0,c.tick()),t.modifies("index")),d||l||e.modified(ZO)||t.changed()&&e.restart)if(c.alpha(Math.max(c.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(c.alphaMin(),1/h)),e.static)for(c.stop();0<=--h;)c.tick();else if(c.stopped()&&c.restart(),!l)return t.StopPropagation;return this.finish(e,t)},QO.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===VO&&"link"===n.op._argval.force)for(var u,s=n.op._argops,f=0,c=s.length;f<c;++f)if("links"===s[f].name&&(u=s[f].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(JO)};var KO=Object.freeze({force:rd});vd.prototype=hd.prototype={constructor:vd,count:function(){return this.eachAfter(dd)},each:function(e){var t,n,r,i,a=this,o=[a];do for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);while(o.length);return this},eachAfter:function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;0<=n;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;0<=--i;)n+=r[i].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return hd(this).eachBefore(gd)}};var eA=Array.prototype.slice,tA={depth:-1},nA={};Wd.prototype=Object.create(vd.prototype);var rA=(1+Math.sqrt(5))/2,iA=function e(t){function n(e,n,r,i,a){Yd(t,e,n,r,i,a)}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(rA),aA=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,f,c,l=-1,d=o.length,h=e.value;++l<d;){for(s=(u=o[l]).children,f=u.value=0,c=s.length;f<c;++f)u.value+=s[f].value;u.dice?$d(u,n,r,i,r+=(a-r)*u.value/h):Gd(u,n,r,n+=(i-n)*u.value/h,a),h-=u.value}else e._squarify=o=Yd(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e(1<(t=+t)?t:1)},n}(rA);Hd.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},P(Hd,sn).transform=function(e,t){t.source||o("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each(function(e){e.children&&Q(e.data)&&i.rem.push(e.data)}),this.value=a=hd({values:O(e.keys).reduce(function(e,t){return e.key(t),e},jo()).entries(i.source)},Vd),n&&a.each(function(e){e.children&&(e=te(e.data),i.add.push(e),i.source.push(e))}),sd(a,K,K)),i.source.root=a,i},P(Xd,sn).transform=function(e,t){t.source&&t.source.root||o(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field&&i.sum(e.field),e.sort&&i.sort(e.sort),function(e,t,n){for(var r,i=0,a=t.length;i<a;++i)(r=t[i])in n&&e[r](n[r])}(n,this.params,e);try{this.value=n(i)}catch(e){o(e)}return i.each(function(e){!function(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,a)}),t.reflow(e.modified()).modifies(a).modifies("leaf")};var oA=["x","y","r","depth","children"];Zd.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,default:oA}]};var uA=P(Zd,Xd);uA.layout=function(){function e(e){return e.x=n/2,e.y=r/2,t?e.eachBefore(Dd(t)).eachAfter(Pd(i,.5)).eachBefore(Ld(1)):e.eachBefore(Dd(Nd)).eachAfter(Pd(Td,1)).eachAfter(Pd(i,e.r/Math.min(n,r))).eachBefore(Ld(Math.min(n,r)/(2*e.r))),e}var t=null,n=1,r=1,i=Td;return e.radius=function(n){return arguments.length?(t=null==(r=n)?null:Rd(r),e):t;var r},e.size=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.padding=function(t){return arguments.length?(i="function"==typeof t?t:zd(+t),e):i},e},uA.params=["size","padding"],uA.fields=oA;var sA=["x0","y0","x1","y1","depth","children"];Jd.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:sA}]};var fA=P(Jd,Xd);fA.layout=function(){function e(e){var a,o,u=e.height+1;return e.x0=e.y0=r,e.x1=t,e.y1=n/u,e.eachBefore((a=n,o=u,function(e){e.children&&$d(e,e.x0,a*(e.depth+1)/o,e.x1,a*(e.depth+2)/o);var t=e.x0,n=e.y0,i=e.x1-r,u=e.y1-r;i<t&&(t=i=(t+i)/2),u<n&&(n=u=(n+u)/2),e.x0=t,e.y0=n,e.x1=i,e.y1=u})),i&&e.eachBefore(qd),e}var t=1,n=1,r=0,i=!1;return e.round=function(t){return arguments.length?(i=!!t,e):i},e.size=function(r){return arguments.length?(t=+r[0],n=+r[1],e):[t,n]},e.padding=function(t){return arguments.length?(r=+t,e):r},e},fA.params=["size","round","padding"],fA.fields=sA,Qd.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},P(Qd,sn).transform=function(e,t){t.source||o("Stratify transform requires an upstream data source.");var n=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),i=!this.value||n||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),i&&(this.value=sd(function(){function e(e){var r,i,a,o,u,s,f,c=e.length,l=new Array(c),d={};for(i=0;i<c;++i)r=e[i],u=l[i]=new vd(r),null!=(s=t(r,i,e))&&(s+="")&&(d[f="$"+(u.id=s)]=f in d?nA:u);for(i=0;i<c;++i)if(u=l[i],null!=(s=n(e[i],i,e))&&(s+="")){if(!(o=d["$"+s]))throw new Error("missing: "+s);if(o===nA)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=tA,a.eachBefore(function(e){e.depth=e.parent.depth+1,--c}).eachBefore(md),a.parent=null,0<c)throw new Error("cycle");return a}var t=jd,n=Fd;return e.id=function(n){return arguments.length?(t=Rd(n),e):t},e.parentId=function(t){return arguments.length?(n=Rd(t),e):n},e}().id(e.key).parentId(e.parentKey)(r.source),e.key,Hv)),r.source.root=this.value,r};var cA={tidy:function(){function e(e){var s=function(e){for(var t,n,r,i,a,o=new Wd(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;0<=i;--i)u.push(n=t.children[i]=new Wd(r[i],i)),n.parent=t;return(o.parent=new Wd(null,0)).children=[o],o}(e);if(s.eachAfter(t),s.parent.m=-s.z,s.eachBefore(n),u)e.eachBefore(r);else{var f=e,c=e,l=e;e.eachBefore(function(e){e.x<f.x&&(f=e),e.x>c.x&&(c=e),e.depth>l.depth&&(l=e)});var d=f===c?1:i(f,c)/2,h=d-f.x,p=a/(c.x+d+h),g=o/(l.depth||1);e.eachBefore(function(e){e.x=(e.x+h)*p,e.y=e.depth*g})}return e}function t(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;0<=--a;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+i(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+i(e._,r._));e.parent.A=function(e,t,n){if(t){for(var r,a=e,o=e,u=t,s=a.parent.children[0],f=a.m,c=o.m,l=u.m,d=s.m;u=Bd(u),a=Ud(a),u&&a;)s=Ud(s),(o=Bd(o)).a=e,0<(r=u.z+l-a.z-f+i(u._,a._))&&(y=e,b=n,h=(v=u).a.parent===y.parent?v.a:b,m=(g=r)/((p=e).i-h.i),p.c-=m,p.s+=g,h.c+=m,p.z+=g,p.m+=g,f+=r,c+=r),l+=u.m,f+=a.m,d+=s.m,c+=o.m;u&&!Bd(o)&&(o.t=u,o.m+=l-c),a&&!Ud(s)&&(s.t=a,s.m+=f-d,n=e)}var h,p,g,m,v,y,b;return n}(e,r,e.parent.A||n[0])}function n(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function r(e){e.x*=a,e.y=e.depth*o}var i=Id,a=1,o=1,u=null;return e.separation=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(u=!1,a=+t[0],o=+t[1],e):u?null:[a,o]},e.nodeSize=function(t){return arguments.length?(u=!0,a=+t[0],o=+t[1],e):u?[a,o]:null},e},cluster:function(){function e(e){var a,o=0;e.eachAfter(function(e){var n,r=e.children;r?(e.x=(n=r).reduce(cd,0)/n.length,e.y=1+r.reduce(ld,0)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)});var u=function(e){for(var t;t=e.children;)e=t[0];return e}(e),s=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(e),f=u.x-t(u,s)/2,c=s.x+t(s,u)/2;return e.eachAfter(i?function(t){t.x=(t.x-e.x)*n,t.y=(e.y-t.y)*r}:function(t){t.x=(t.x-f)/(c-f)*n,t.y=(1-(e.y?t.y/e.y:1))*r})}var t=fd,n=1,r=1,i=!1;return e.separation=function(n){return arguments.length?(t=n,e):t},e.size=function(t){return arguments.length?(i=!1,n=+t[0],r=+t[1],e):i?null:[n,r]},e.nodeSize=function(t){return arguments.length?(i=!0,n=+t[0],r=+t[1],e):i?[n,r]:null},e}},lA=["x","y","depth","children"];Kd.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:lA}]};var dA=P(Kd,Xd);dA.layout=function(e){var t=e||"tidy";return cA.hasOwnProperty(t)?cA[t]():void o("Unrecognized Tree layout method: "+t)},dA.params=["size","nodeSize","separation"],dA.fields=lA,eh.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},P(eh,sn).transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||o("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,function(e){a[K(e)]=1}),r.each(function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[K(t)]&&a[K(n)]&&i.add.push(te({source:n,target:t}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,function(e){a[K(e)]=1}),n.forEach(function(e){(a[K(e.source)]||a[K(e.target)])&&i.mod.push(e)})),i};var hA={binary:function(e,t,n,r,i){var a,o,u=e.children,s=u.length,f=new Array(s+1);for(f[0]=o=a=0;a<s;++a)f[a+1]=o+=u[a].value;!function e(t,n,r,i,a,o,s){if(n-1<=t){var c=u[t];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=s)}for(var l=f[t],d=r/2+l,h=t+1,p=n-1;h<p;){var g=h+p>>>1;f[g]<d?h=g+1:p=g}d-f[h-1]<f[h]-d&&t+1<h&&--h;var m=f[h]-l,v=r-m;if(s-a<o-i){var y=(i*v+o*m)/r;e(t,h,m,i,a,y,s),e(h,n,v,y,a,o,s)}else{var b=(a*v+s*m)/r;e(t,h,m,i,a,o,b),e(h,n,v,i,b,o,s)}}(0,s,e.value,t,n,r,i)},dice:$d,slice:Gd,slicedice:function(e,t,n,r,i){(1&e.depth?Gd:$d)(e,t,n,r,i)},squarify:iA,resquarify:aA},pA=["x0","y0","x1","y1","depth","children"];th.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,default:pA}]};var gA=P(th,Xd);gA.layout=function(){var e=function(){function e(e){return e.x0=e.y0=0,e.x1=i,e.y1=a,e.eachBefore(t),o=[0],r&&e.eachBefore(qd),e}function t(e){var t=o[e.depth],r=e.x0+t,i=e.y0+t,a=e.x1-t,d=e.y1-t;a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),e.x0=r,e.y0=i,e.x1=a,e.y1=d,e.children&&(t=o[e.depth+1]=u(e)/2,r+=l(e)-t,i+=s(e)-t,(a-=f(e)-t)<r&&(r=a=(r+a)/2),(d-=c(e)-t)<i&&(i=d=(i+d)/2),n(e,r,i,a,d))}var n=iA,r=!1,i=1,a=1,o=[0],u=Td,s=Td,f=Td,c=Td,l=Td;return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(i=+t[0],a=+t[1],e):[i,a]},e.tile=function(t){return arguments.length?(n=Rd(t),e):n},e.padding=function(t){return arguments.length?e.paddingInner(t).paddingOuter(t):e.paddingInner()},e.paddingInner=function(t){return arguments.length?(u="function"==typeof t?t:zd(+t),e):u},e.paddingOuter=function(t){return arguments.length?e.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):e.paddingTop()},e.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:zd(+t),e):s},e.paddingRight=function(t){return arguments.length?(f="function"==typeof t?t:zd(+t),e):f},e.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:zd(+t),e):c},e.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:zd(+t),e):l},e}();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){hA.hasOwnProperty(t)?e.tile(hA[t]):o("Unrecognized Treemap layout method: "+t)},e},gA.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],gA.fields=pA;var mA=Object.freeze({nest:Hd,pack:Zd,partition:Jd,stratify:Qd,tree:Kd,treelinks:eh,treemap:th});ah.prototype={constructor:ah,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=fh(this._),t.P=null,(t.N=e).P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(uh(this,n),n=(e=n).U),n.C=!1,r.C=!0,sh(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(sh(this,n),n=(e=n).U),n.C=!1,r.C=!0,uh(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?fh(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,((n.L=a).U=n)!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,(n.R=o).U=n):(n.U=i,e=(i=n).R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,uh(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,sh(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,uh(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,sh(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,uh(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,sh(this,i),e=this._;break}t.C=!0,i=(e=i).U}while(!e.C);e&&(e.C=!1)}}};var vA,yA,bA,_A,xA,wA=[],kA=[],MA=1e-6,SA=1e-12;Oh.prototype={constructor:Oh,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return gh(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u,s,f,c=n.site,l=-1,d=t[i[a-1]],h=d.left===c?d.right:d.left;++l<a;)o=h,h=(d=t[i[l]]).left===c?d.right:d.left,o&&h&&r<o.index&&r<h.index&&(s=o,f=h,((u=c)[0]-f[0])*(s[1]-u[1])-(u[0]-s[0])*(f[1]-u[1])<0)&&e.push([c.data,o.data,h.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;for(var s=e-i.site[0],f=t-i.site[1],c=s*s+f*f;i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=e-u[0],f=t-u[1],l=s*s+f*f;l<c&&(c=l,o=u.index)}}),null!==o;);return a._found=r,null==n||c<=n*n?i.site:null}},Ah.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var EA=P(Ah,sn),OA=[[-1e5,-1e5],[1e5,1e5]];EA.transform=function(e,t){var n,r,i,a,o=e.as||"path",u=t.source;for(n=function(){function e(e){return new Oh(e.map(function(r,i){var a=[Math.round(t(r,i,e)/MA)*MA,Math.round(n(r,i,e)/MA)*MA];return a.index=i,a.data=r,a}),r)}var t=rh,n=ih,r=null;return e.polygons=function(t){return e(t).polygons()},e.links=function(t){return e(t).links()},e.triangles=function(t){return e(t).triangles()},e.x=function(n){return arguments.length?(t="function"==typeof n?n:nh(+n),e):t},e.y=function(t){return arguments.length?(n="function"==typeof t?t:nh(+t),e):n},e.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],e):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},e.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],e):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},e}().x(e.x).y(e.y),e.size?n.size(e.size):n.extent(e.extent||OA),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return t.reflow(e.modified()).modifies(o)};var AA=Object.freeze({voronoi:Ah}),CA=Math.PI/180,RA=64,TA=2048,zA={archimedean:Nh,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},NA=Array.prototype.map,DA=Array.prototype.slice,PA={identity:rs,linear:ns,log:ls,ordinal:Go,pow:hs,sqrt:ps,quantile:gs,quantize:ms,threshold:vs,time:xs,utc:ws,band:Ph,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(Ph().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=p(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=ns(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=ns(),r=[];return t.domain=function(e){return arguments.length?(r=Lh(e),n.domain([r[0],p(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(cb(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=Lh(e),t):n.slice()},t.range=function(e){return arguments.length?(r=DA.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var LA in PA)qh(LA,PA[LA]);var qA=$h("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),$A=$h("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),jA=$h("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),FA=$h("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),IA=$h("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),UA=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map($h),BA={
blueorange:UA},WA={category10:Xk,accent:Zk,dark2:Jk,paired:Qk,pastel1:Kk,pastel2:eM,set1:tM,set2:nM,set3:rM,category20:qA,category20b:$A,category20c:jA,tableau10:FA,tableau20:IA,viridis:lS,magma:dS,inferno:hS,plasma:pS,blueorange:fk(p(UA))};jh("blues","Blues"),jh("greens","Greens"),jh("greys","Greys"),jh("purples","Purples"),jh("reds","Reds"),jh("oranges","Oranges"),jh("brownbluegreen","BrBG"),jh("purplegreen","PRGn"),jh("pinkyellowgreen","PiYG"),jh("purpleorange","PuOr"),jh("redblue","RdBu"),jh("redgrey","RdGy"),jh("redyellowblue","RdYlBu"),jh("redyellowgreen","RdYlGn"),jh("spectral","Spectral"),jh("bluegreen","BuGn"),jh("bluepurple","BuPu"),jh("greenblue","GnBu"),jh("orangered","OrRd"),jh("purplebluegreen","PuBuGn"),jh("purpleblue","PuBu"),jh("purplered","PuRd"),jh("redpurple","RdPu"),jh("yellowgreenblue","YlGnBu"),jh("yellowgreen","YlGn"),jh("yelloworangebrown","YlOrBr"),jh("yelloworangered","YlOrRd");var GA=["x","y","font","fontSize","fontStyle","fontWeight","angle"],YA=["text","font","rotate","fontSize","fontStyle","fontWeight"];Fh.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:GA}]},P(Fh,sn).transform=function(e,n){var r=e.modified();if(r||n.changed(n.ADD_REM)||YA.some(function(t){var r=e[t];return A(r)&&n.modified(r.fields)})){var i,a=n.materialize(n.SOURCE).source,o=this.value,u=e.as||GA,s=e.fontSize||14;if(A(s)?i=e.fontSizeRange:s=R(s),i){var f=s,c=qh("sqrt")().domain(function(e,t){for(var n,r=1/0,i=-1/0,a=0,o=t.length;a<o;++a)(n=e(t[a]))<r&&(r=n),i<n&&(i=n);return[r,i]}(f,a)).range(i);s=function(e){return c(f(e))}}a.forEach(function(e){e[u[0]]=NaN,e[u[1]]=NaN,e[u[3]]=0});for(var l,d,h=o.words(a).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(t.random).layout(),p=o.size(),g=p[0]>>1,m=p[1]>>1,v=0,y=h.length;v<y;++v)(d=(l=h[v]).datum)[u[0]]=l.x+g,d[u[1]]=l.y+m,d[u[2]]=l.font,d[u[3]]=l.size,d[u[4]]=l.style,d[u[5]]=l.weight,d[u[6]]=l.rotate;return n.reflow(r).modifies(u)}};var HA=Object.freeze({wordcloud:Fh});Gh.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var VA=P(Gh,sn);VA.transform=function(e,t){return this._dims?e.modified("fields")||e.fields.some(function(e){return t.modified(e.fields)})?this.reinit(e,t):this.eval(e,t):this.init(e,t)},VA.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)r=o[n=i[f].fname]||(o[n]=Wh()),u.push(Bh(r,f,a[f]));return this.eval(e,t)},VA.reinit=function(e,t){var n,r,i,a,o,u,s,f,c,l=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),b=m.all(),_=l.rem=l.add,x=l.mod,w=h.length,k={};if(y.set(v),t.rem.length&&(o=this.remove(e,t,l)),t.add.length&&m.add(t.add),t.mod.length)for(u={},s=0,f=(a=t.mod).length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)c=d[s],(!g[s]||e.modified("fields",s)||t.modified(c.fields))&&((n=k[i=c.fname])||(p[i]=r=Wh(),k[i]=n=r.insert(c,t.source,0)),g[s]=Bh(r,s,h[s]).onAdd(n,v));for(s=0,f=m.data().length;s<f;++s)o[s]||(y[s]!==v[s]?_.push(s):u[s]&&v[s]!==b&&x.push(s));return m.mask=(1<<w)-1,l},VA.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},VA.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,f=this._indices,c=e.fields,l={},d=n.add,h=u.size(),p=h+o.length,g=s.length;u.resize(p,g),u.add(o);var m=u.curr(),v=u.prev(),y=u.all();for(r=0;r<g;++r)a=l[i=c[r].fname]||(l[i]=f[i].insert(c[r],o,h)),s[r].onAdd(a,m);for(;h<p;++h)v[h]=y,m[h]!==y&&d.push(h)},VA.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),f=e.mod;for(n=0,r=f.length;n<r;++n)u[i=f[n]._index]!==s&&a.push(i)},VA.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),c=s.prev(),l=s.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)d[a=p[r]._index]=1,c[a]=o=f[a],o!==(f[a]=l)&&h.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},VA.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter(function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)})},VA.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,f=0;for(i=n.filters=0;i<s;++i)e.modified("query",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(f=i=0;i<s;++i)e.modified("query",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},VA.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),c=u.prev(),l=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],g=h[1],m=d[0],v=d[1],y=e.one;if(p<m)for(i=p,a=Math.min(m,g);i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(m<p)for(i=m,a=Math.min(p,v);i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(v<g)for(i=Math.max(p,v),a=g;i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<v)for(i=Math.max(m,g),a=v;i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;e.range=t.slice()},VA.incrementOne=function(e,t,n,r){var i,a,o,u=this.value.curr(),s=e.index(),f=e.bisect(e.range),c=e.bisect(t),l=c[0],d=c[1],h=f[0],p=f[1],g=e.one;if(l<h)for(i=l,a=Math.min(h,d);i<a;++i)u[o=s[i]]^=g,n.push(o);else if(h<l)for(i=h,a=Math.min(l,p);i<a;++i)u[o=s[i]]^=g,r.push(o);if(p<d)for(i=Math.max(l,p),a=d;i<a;++i)u[o=s[i]]^=g,n.push(o);else if(d<p)for(i=Math.max(h,d),a=p;i<a;++i)u[o=s[i]]^=g,r.push(o);e.range=t.slice()},Yh.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},P(Yh,sn).transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(e){var t=u[e]&n;return!t&&t^s[e]&n?o[e]:null}),a.filter(a.REM,function(e){var t=u[e]&n;return!t||t^t^s[e]&n?null:o[e]})):(a.filter(a.ADD,f),a.filter(a.REM,function(e){return(u[e]&n)===i?o[e]:null})),a.filter(a.SOURCE,function(e){return f(e._index)})};var XA=Object.freeze({crossfilter:Gh,resolvefilter:Yh}),ZA=Array.prototype.map,JA=Array.prototype.slice,QA={identity:rs,linear:ns,log:ls,ordinal:Go,pow:hs,sqrt:ps,quantile:gs,quantize:ms,threshold:vs,time:xs,utc:ws,band:Hh,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(Hh().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=p(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=ns(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=ns(),r=[];return t.domain=function(e){return arguments.length?(r=Vh(e),n.domain([r[0],p(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(cb(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=Vh(e),t):n.slice()},t.range=function(e){return arguments.length?(r=JA.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var KA in QA)Xh(KA,QA[KA]);var eC=Zh("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),tC=Zh("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),nC=Zh("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),rC=Zh("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),iC=Zh("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),aC=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(Zh),oC={blueorange:aC},uC={category10:Xk,accent:Zk,dark2:Jk,paired:Qk,pastel1:Kk,pastel2:eM,set1:tM,set2:nM,set3:rM,category20:eC,category20b:tC,category20c:nC,tableau10:rC,tableau20:iC,viridis:lS,magma:dS,inferno:hS,plasma:pS,rainbow:Cs,sinebow:Rs,blueorange:fk(p(aC))};Jh("blues","Blues"),Jh("greens","Greens"),Jh("greys","Greys"),Jh("purples","Purples"),Jh("reds","Reds"),Jh("oranges","Oranges"),Jh("brownbluegreen","BrBG"),Jh("purplegreen","PRGn"),Jh("pinkyellowgreen","PiYG"),Jh("purpleorange","PuOr"),Jh("redblue","RdBu"),Jh("redgrey","RdGy"),Jh("redyellowblue","RdYlBu"),Jh("redyellowgreen","RdYlGn"),Jh("spectral","Spectral"),Jh("bluegreen","BuGn"),Jh("bluepurple","BuPu"),Jh("greenblue","GnBu"),Jh("orangered","OrRd"),Jh("purplebluegreen","PuBuGn"),Jh("purpleblue","PuBu"),Jh("purplered","PuRd"),Jh("redpurple","RdPu"),Jh("yellowgreenblue","YlGnBu"),Jh("yellowgreen","YlGn"),Jh("yelloworangebrown","YlOrBr"),Jh("yelloworangered","YlOrRd");var sC,fC,cC,lC,dC,hC={millisecond:wy,second:Sy,minute:Ey,hour:Oy,day:Ay,week:Cy,month:zy,year:Ny},pC={millisecond:wy,second:Sy,minute:Dy,hour:Py,day:Ly,week:qy,month:Fy,year:Iy},gC="default",mC={trap:!1},vC="vega-bind",yC="vega-bind-name",bC="vega-bind-radio",_C="vega-option-",xC="outer",wC=["value","update","react","bind"];kp.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};var kC=1,MC=2,SC=3,EC=4,OC=5,AC=6,CC=7,RC=8;(sC={})[kC]="Boolean",sC[MC]="<end>",sC[SC]="Identifier",sC[EC]="Keyword",sC[OC]="Null",sC[AC]="Numeric",sC[CC]="Punctuator",sC[RC]="String",sC[9]="RegularExpression";var TC="ArrayExpression",zC="BinaryExpression",NC="CallExpression",DC="ConditionalExpression",PC="Identifier",LC="Literal",qC="LogicalExpression",$C="MemberExpression",jC="ObjectExpression",FC="Property",IC="UnaryExpression",UC="Unexpected token %0",BC="Unexpected number",WC="Unexpected string",GC="Unexpected identifier",YC="Unexpected reserved word",HC="Unexpected end of input",VC="Invalid regular expression",XC="Invalid regular expression: missing /",ZC="Octal literals are not allowed in strict mode.",JC="Duplicate data property in object literal not allowed in strict mode",QC="ILLEGAL",KC="Disabled.",eR=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),tR=new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),nR={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},rR={if:1,this:1},iR={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},aR={},oR=new Date(2e3,0,1),uR="undefined"!=typeof window&&window||null,sR="Literal",fR="%",cR=":",lR=Array.prototype.map,dR=Array.prototype.slice,hR={identity:rs,linear:ns,log:ls,ordinal:Go,pow:hs,sqrt:ps,quantile:gs,quantize:ms,threshold:vs,time:xs,utc:ws,band:gg,point:function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}(gg().paddingInner(1))},sequential:function e(t){function n(){var e=i.domain();a=e[0],o=p(e)-a}function r(e){var n=(e-a)/o;return t(u?Math.max(0,Math.min(1,n)):n)}var i=ns(),a=0,o=1,u=!1;return r.clamp=function(e){return arguments.length?(u=!!e,r):u},r.domain=function(e){return arguments.length?(i.domain(e),n(),r):i.domain()},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return e().domain(i.domain()).clamp(u).interpolator(t)},r.ticks=function(e){return i.ticks(e)},r.tickFormat=function(e,t){return i.tickFormat(e,t)},r.nice=function(e){return i.nice(e),n(),r},r},"bin-linear":function e(){function t(e){return n(e)}var n=ns(),r=[];return t.domain=function(e){return arguments.length?(r=mg(e),n.domain([r[0],p(r)]),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(e){return n.invert(e)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(e,t){return!(t%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return e().domain(t.domain()).range(t.range())},t},"bin-ordinal":function e(){function t(e){return null==e||e!=e?void 0:r[(cb(n,e)-1)%r.length]}var n=[],r=[];return t.domain=function(e){return arguments.length?(n=mg(e),t):n.slice()},t.range=function(e){return arguments.length?(r=dR.call(e),t):r.slice()},t.copy=function(){return e().domain(t.domain()).range(t.range())},t}};for(var pR in hR)vg(pR,hR[pR]);var gR=yg("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),mR=yg("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),vR=yg("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),yR=yg("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),bR=yg("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),_R=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(yg),xR={blueorange:_R},wR={category10:Xk,accent:Zk,dark2:Jk,paired:Qk,pastel1:Kk,pastel2:eM,set1:tM,set2:nM,set3:rM,category20:gR,category20b:mR,category20c:vR,tableau10:yR,tableau20:bR,viridis:lS,magma:dS,inferno:hS,plasma:pS,blueorange:fk(p(_R))};bg("blues","Blues"),bg("greens","Greens"),bg("greys","Greys"),bg("purples","Purples"),bg("reds","Reds"),bg("oranges","Oranges"),bg("brownbluegreen","BrBG"),bg("purplegreen","PRGn"),bg("pinkyellowgreen","PiYG"),bg("purpleorange","PuOr"),bg("redblue","RdBu"),bg("redgrey","RdGy"),bg("redyellowblue","RdYlBu"),bg("redyellowgreen","RdYlGn"),bg("spectral","Spectral"),bg("bluegreen","BuGn"),bg("bluepurple","BuPu"),bg("greenblue","GnBu"),bg("orangered","OrRd"),bg("purplebluegreen","PuBuGn"),bg("purpleblue","PuBu"),bg("purplered","PuRd"),bg("redpurple","RdPu"),bg("yellowgreenblue","YlGnBu"),bg("yellowgreen","YlGn"),bg("yelloworangebrown","YlOrBr"),bg("yelloworangered","YlOrRd");var kR=Mg("area",function(e){return DE.reset(),zf(e,PE),2*DE}),MR=Mg("bounds",function(e){var t,n,r,i,a,o,u;if(US=IS=-(jS=FS=1/0),HS=[],zf(e,qE),n=HS.length){for(HS.sort(Qf),t=1,a=[r=HS[0]];t<n;++t)Kf(r,(i=HS[t])[0])||Kf(r,i[1])?(Jf(r[0],i[1])>Jf(r[0],r[1])&&(r[1]=i[1]),Jf(i[0],r[1])>Jf(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)i=a[t],(u=Jf(r[1],i[0]))>o&&(o=u,jS=i[0],IS=r[1])}return HS=VS=null,jS===1/0||FS===1/0?[[NaN,NaN],[NaN,NaN]]:[[jS,FS],[IS,US]]}),SR=Mg("centroid",function(e){XS=ZS=JS=QS=KS=eE=tE=nE=rE=iE=aE=0,zf(e,$E);var t=rE,n=iE,r=aE,i=t*t+n*n+r*r;return i<1e-12&&(t=eE,n=tE,r=nE,ZS<dE&&(t=JS,n=QS,r=KS),(i=t*t+n*n+r*r)<1e-12)?[NaN,NaN]:[xE(n,t)*vE,Of(r/CE(i))*vE]}),ER={},OR="bin_",AR="intersect",CR="union",RR="index:unit",TR={random:function(){return t.random()},isArray:Iv,isBoolean:L,isDate:q,isNumber:$,isObject:s,isRegExp:j,isString:f,isTuple:Q,toBoolean:W,toDate:Y,toNumber:g,toString:H,pad:B,peek:p,truncate:X,rgb:Ko,lab:uu,hcl:hu,hsl:ru,sequence:Mn,format:function(e,t){return cg("format",Ak,t)(e)},utcFormat:function(e,t){return cg("utcFormat",Gy,t)(e)},utcParse:function(e,t){return cg("utcParse",Yy,t)(e)},timeFormat:lg,timeParse:function(e,t){return cg("timeParse",Wy,t)(e)},monthFormat:function(e){return dg(e,1,"%B")},monthAbbrevFormat:function(e){return dg(e,1,"%b")},dayFormat:function(e){return dg(0,2+e,"%A")},dayAbbrevFormat:function(e){return dg(0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},warn:function(){return hg(this.context.dataflow,"warn",arguments)},info:function(){return hg(this.context.dataflow,"info",arguments)},debug:function(){return hg(this.context.dataflow,"debug",arguments)},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},clampRange:function(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),n-t<=(r=a-i)?[t,n]:[Math.min(Math.max(i,t),n-r),Math.min(Math.max(a,r),n)]},pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){return uR?uR.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return uR?[uR.innerWidth,uR.innerHeight]:[void 0,void 0]},span:function(e){return e[e.length-1]-e[0]||0},merge:function(){var e=[].slice.call(arguments);return e.unshift({}),z.apply(null,e)},flush:function(e,t,n,r,i,a){var o,u,s=e[0],f=p(e);return f<s&&(o=s,s=f,f=o),(o=Math.abs(t-s))<(u=Math.abs(f-t))&&o<=n?r:u<=n?i:a},bandspace:function(e,t,n){return pg(e||0,t||0,n||0)},inrange:Cg,setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(Hv).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?Ri(n,t=t||Oi(e)):e}},panLinear:_,panLog:x,panPow:w,zoomLinear:M,zoomLog:S,zoomPow:E,encode:function(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,a){var o,u,s=this.context.dataflow,f=this.context.data[e],c=f.input,l=f.changes,d=s.stamp();if(!1===s._trigger||!(c.value.length||t||r))return 0;if((!l||l.stamp<d)&&(f.changes=l=s.changeset(),l.stamp=d,s.runAfter(function(){f.modified=!0,s.pulse(c,l).run()},!0,1)),n&&(o=!0===n?Hv:Iv(n)||Q(n)?n:Tg(n),l.remove(o)),t&&l.insert(t),r&&(o=Tg(r),c.value.some(o)?l.remove(o):l.insert(r)),i)for(u in a)l.modify(i,u,a[u]);return 1}},zR=["view","item","group","xy","x","y"],NR={};Ug("bandwidth",function(e,t){var n=xg(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},kg),Ug("copy",function(e,t){var n=xg(e,(t||this).context);return n?n.copy():void 0},kg),Ug("domain",function(e,t){var n=xg(e,(t||this).context);return n?n.domain():[]},kg),Ug("range",function(e,t){var n=xg(e,(t||this).context);return n&&n.range?n.range():[]},kg),Ug("invert",function(e,t,n){var r=xg(e,(n||this).context);return r?Iv(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0},kg),Ug("scale",function(e,t,n){var r=xg(e,(n||this).context);return r?r(t):void 0},kg),Ug("gradient",function(e,t,n,r,i){e=xg(e,(i||this).context);var a,o,u,s,f=Tr(t,n),c=e.domain(),l=c[0],d=c[c.length-1],h=(a=e,(s=(u=d)-(o=l))?"linear"===a.type||"sequential"===a.type?function(e){return(e-o)/s}:a.copy().domain([o,u]).range([0,1]).interpolate(_g):R(0));e.ticks&&(l!==(c=e.ticks(+r||15))[0]&&c.unshift(l),d!==c[c.length-1]&&c.push(d));for(var p=0,g=c.length;p<g;++p)f.stop(h(c[p]),e(c[p]));return f},kg),Ug("geoArea",kR,kg),Ug("geoBounds",MR,kg),Ug("geoCentroid",SR,kg),Ug("geoShape",function(e,t,n){var r=xg(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}},kg),Ug("indata",function(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i},function(e,t,n,r){t[0].type!==sR&&o("First argument to indata must be a string literal."),t[1].type!==sR&&o("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,u="@"+a;r.hasOwnProperty(u)||(r[u]=n.getData(i).indataRef(n,a))}),Ug("data",Sg,Eg),Ug("vlSingle",Pg,Eg),Ug("vlSingleDomain",qg,Eg),Ug("vlMulti",Pg,Lg),Ug("vlMultiDomain",qg,Lg),Ug("vlInterval",function(e,t,n){return Dg.call(this,e,t,n,Ng)},Eg),Ug("vlIntervalDomain",function(e,t,n,r){var i,a,o,u,s,f=this.context.data[e],c=f?f.values.value:[],l=c[0],d=0;if(l){for(i=l.intervals.length;d<i;++d)if(a=l.intervals[d],t&&a.encoding===t||n&&a.field===n){if(!a.extent)return;o=d,s=2<a.extent.length;break}return u=c.reduce(function(e,t){var n=t.intervals[o].extent,r=s?n.map(function(e){return{unit:t.unit,value:e}}):{unit:t.unit,value:n};return s?e.push.apply(e,r):e.push(r),e},[]),s?$g(u,r):jg(u,r)}},Eg),Ug("treePath",function(e,t,n){var r=Ag(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(Og):void 0},Eg),Ug("treeAncestors",function(e,t){var n=Ag(e,this)[t];return n?n.ancestors().map(Og):void 0},Eg);var DR,PR,LR={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+c("$"+e)+"]"},functions:function(e){var t=fg(e);for(var n in zR.forEach(function(e){t[e]="event.vega."+e}),TR)t[n]="this."+n;return t},constants:iR,visitors:NR},qR=function(e){function t(e){if(f(e))return e;var t=g[e.type];return null==t&&o("Unsupported type: "+e.type),t(e)}function n(e){var n={code:t(e),globals:Object.keys(l),fields:Object.keys(d)};return l={},d={},n}var r=(e=e||{}).whitelist?V(e.whitelist):{},i=e.blacklist?V(e.blacklist):{},a=e.constants||iR,u=(e.functions||fg)(t),s=e.globalvar,c=e.fieldvar,l={},d={},h=0,p=A(s)?s:function(e){return s+'["'+e+'"]'},g={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;return 0<h?t:i.hasOwnProperty(t)?o("Illegal identifier: "+t):a.hasOwnProperty(t)?a[t]:r.hasOwnProperty(t)?t:(l[t]=1,p(t))},MemberExpression:function(e){var n=!e.computed,r=t(e.object);n&&(h+=1);var i=t(e.property);return r===c&&(d[i]=1),n&&(h-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&o("Illegal callee type: "+e.callee.type);var n=e.callee.name,r=e.arguments,i=u.hasOwnProperty(n)&&u[n];return i||o("Unrecognized function: "+n),A(i)?i(r):i+"("+r.map(t).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(t).join(",")+"]"},BinaryExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+t(e.argument)+")"},ConditionalExpression:function(e){return"("+t(e.test)+"?"+t(e.consequent)+":"+t(e.alternate)+")"},LogicalExpression:function(e){return"("+t(e.left)+e.operator+t(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(t).join(",")+"}"},Property:function(e){h+=1;var n=t(e.key);return h-=1,n+":"+t(e.value)}};return n.functions=u,n.constants=a,n}(LR),$R="$",jR={$tupleid:1,toString:function(){return":_tupleid_:"}},FR=Vg("key"),IR="descending",UR="scope",BR="view",WR="timer",GR="view",YR="[",HR="]",VR="{",XR="}",ZR=":",JR=",",QR="@",KR=">",eT=/[[\]{}]/,tT={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},nT="var datum=event.item&&event.item.datum;",rT=fm("aggregate"),iT=fm("axisticks"),aT=fm("bound"),oT=fm("collect"),uT=fm("compare"),sT=fm("datajoin"),fT=fm("encode"),cT=fm("facet"),lT=fm("field"),dT=fm("key"),hT=fm("legendentries"),pT=fm("mark"),gT=fm("multiextent"),mT=fm("multivalues"),vT=fm("overlap"),yT=fm("params"),bT=fm("prefacet"),_T=fm("projection"),xT=fm("proxy"),wT=fm("relay"),kT=fm("render"),MT=fm("scale"),ST=fm("sieve"),ET=fm("sortitems"),OT=fm("viewlayout"),AT=fm("values"),CT=0,RT=["identity","ordinal","band","point","bin-linear","bin-ordinal","quantize","quantile","threshold","linear","pow","sqrt","log","sequential","time","utc"],TT=V(RT),zT=V(RT.slice(4,9)),NT=V(RT.slice(9)),DT=V(RT.slice(1,6)),PT="top",LT="left",qT="right",$T="bottom",jT="vertical",FT="index",IT="label",UT="offset",BT="perc",WT="perc2",GT="size",YT="value",HT="guide-label",VT="guide-title",XT="group-title",ZT="symbol",JT="gradient",QT="discrete",KT=["size","shape","fill","stroke","strokeDash","opacity"],ez={name:1,interactive:1},tz=V(["rule"]),nz=V(["group","image","rect"]),rz="mark",iz="frame",az="scope",oz="axis",uz="axis-domain",sz="axis-grid",fz="axis-label",cz="axis-tick",lz="axis-title",dz="legend",hz="legend-band",pz="legend-entry",gz="legend-gradient",mz="legend-label",vz="legend-symbol",yz="legend-title",bz="title",_z="group",xz="rect",wz="rule",kz="symbol",Mz="text",Sz="datum."+BT+'<=0?"left":datum.'+BT+'>=1?"right":"center"',Ez="datum."+BT+'<=0?"bottom":datum.'+BT+'>=1?"top":"middle"',Oz={value:0};ev.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(e.add(t[0]);r<n;++r)t[r].params.pulse=Hg(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new ev(e,i,o,a,u)};var Az=ev.prototype;Az.countsRef=function(e,t,n){var r,i,a,o=this.counts||(this.counts={}),u=tv(t);return null!=u&&(e=this.scope,r=o[u]),r?n&&n.field&&nv(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:Hg(this.output)},n&&n.field&&nv(e,a,n),r={agg:i=e.add(rT(a)),ref:Hg(r=e.add(oT({pulse:Hg(i)})))},null!=u&&(o[u]=r)),r.ref},Az.tuplesRef=function(){return Hg(this.values)},Az.extentRef=function(e,t){return rv(e,this,"extent","extent",t,!1)},Az.domainRef=function(e,t){return rv(e,this,"domain","values",t,!1)},Az.valuesRef=function(e,t,n){return rv(e,this,"vals","values",t,n||!0)},Az.lookupRef=function(e,t){return rv(e,this,"lookup","tupleindex",t,!1)},Az.indataRef=function(e,t){return rv(e,this,"indata","tupleindex",t,!0,!0)};var Cz=uv(c(LT),c(qT),c("center")),Rz=uv('+(item.orient==="'+qT+'")','+(item.orient!=="'+LT+'")',"0.5"),Tz=V(["width","height","padding","autosize"]),zz=mv.prototype=vv.prototype;zz.fork=function(){return new vv(this)},zz.isSubscope=function(){return 0<this._subid},zz.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},zz.id=function(){return(this._subid?this._subid+":":0)+this._id++},zz.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(function(t){t.$ref=e.id}),e.refs=null),e},zz.proxy=function(e){var t=e instanceof Wg?Hg(e):e;return this.add(xT({value:t}))},zz.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},zz.addUpdate=function(e){return this.updates.push(e),e},zz.finish=function(){function e(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}var t,n;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;for(t in this.data)for(var r in e((n=this.data[t]).input,t,"input"),e(n.output,t,"output"),e(n.values,t,"values"),n.index)e(n.index[r],t,"index:"+r);return this},zz.pushState=function(e,t,n){this._encode.push(Hg(this.add(ST({pulse:e})))),this._parent.push(t),this._lookup.push(n?Hg(this.proxy(n)):null),this._markpath.push(-1)},zz.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},zz.parent=function(){return p(this._parent)},zz.encode=function(){return p(this._encode);
},zz.lookup=function(){return p(this._lookup)},zz.markpath=function(){var e=this._markpath;return++e[e.length-1]},zz.fieldRef=function(e,t){if(f(e))return Vg(e,t);e.signal||o("Unsupported field reference: "+c(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=Hg(this.add(lT(n)))),i},zz.compareRef=function(e,t){function n(e){return Jg(e)?(i=!0,Hg(r[e.signal])):e}var r=this.signals,i=!1,a=O(e.field).map(n),o=O(e.order).map(n);return t&&a.push(jR),i?Hg(this.add(uT({fields:a,orders:o}))):Xg(a,o)},zz.keyRef=function(e,t){var n,r=this.signals,i=!1;return e=O(e).map(function(e){return Jg(e)?(i=!0,Hg(r[e.signal])):e}),i?Hg(this.add(dT({fields:e,flat:t}))):(n={$key:e},t&&(n.$flat=!0),n)},zz.sortRef=function(e){if(!e)return e;var t=[Zg(e.op,e.field),jR],n=e.order||"ascending";return n.signal?Hg(this.add(uT({fields:t,orders:[n=this.signalRef(n.signal),n]}))):Xg(t,[n,n])},zz.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},zz.addSignal=function(e,t){this.signals.hasOwnProperty(e)&&o("Duplicate signal name: "+c(e));var n=t instanceof Wg?t:this.add(Yg(t));return this.signals[e]=n},zz.getSignal=function(e){return this.signals[e]||o("Unrecognized signal name: "+c(e)),this.signals[e]},zz.signalRef=function(e){return this.signals[e]?Hg(this.signals[e]):(this.lambdas.hasOwnProperty(e)||(this.lambdas[e]=this.add(Yg(null))),Hg(this.lambdas[e]))},zz.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=Bg(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},zz.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},zz.objectProperty=function(e){return e&&s(e)?this.signalRef(e.signal||yv(e)):e},zz.addBinding=function(e,t){this.bindings||o("Nested signals do not support binding: "+c(e)),this.bindings.push(z({signal:e},t))},zz.addScaleProj=function(e,t){this.scales.hasOwnProperty(e)&&o("Duplicate scale or projection name: "+c(e)),this.scales[e]=this.add(t)},zz.addScale=function(e,t){this.addScaleProj(e,MT(t))},zz.addProjection=function(e,t){this.addScaleProj(e,_T(t))},zz.getScale=function(e){return this.scales[e]||o("Unrecognized scale name: "+c(e)),this.scales[e]},zz.projectionRef=zz.scaleRef=function(e){return Hg(this.getScale(e))},zz.projectionType=zz.scaleType=function(e){return this.getScale(e).params.type},zz.addData=function(e,t){return this.data.hasOwnProperty(e)&&o("Duplicate data set name: "+c(e)),this.data[e]=t},zz.getData=function(e){return this.data[e]||o("Undefined data set name: "+c(e)),this.data[e]},zz.addDataPipeline=function(e,t){return this.data.hasOwnProperty(e)&&o("Duplicate data set name: "+c(e)),this.addData(e,ev.fromEntries(this,t))};var Nz="sans-serif",Dz=30,Pz=2,Lz="#4c78a8",qz="#000",$z="#888",jz="#ddd",Fz=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||o("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=F(e.$key,e.$flat))}},{key:"$expr",parse:function(e,t){var n="e:"+e.$expr;return t.fn[n]||(t.fn[n]=r((i=e.$expr,a=t,_v(["datum","_"],i,a)),e.$fields,e.$name));var i,a}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=l(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n,i,a=e.$encode,o={};for(n in a)i=a[n],o[n]=r(_v(["item","_"],i.$expr,t),i.$fields),o[n].output=i.$output;return o}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=O(e.$compare).map(function(e){return e&&e.$tupleid?K:e});return t.fn[n]||(t.fn[n]=C(r,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,i){var a=Ov(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}},{key:"$tupleid",parse:function(){return K}}],Iz={skip:!0};Cv.prototype=Rv.prototype={fork:function(){var e=new Rv(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),"collect"===Mv(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.request(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach(function(e){n[e]=t})},resolve:function(){return(this.unresolved||[]).forEach(function(e){e()}),delete this.unresolved,this},operator:function(e,t,n){this.add(e,this.dataflow.add(e.value,t,n,e.react))},transform:function(e,t,n){this.add(e,this.dataflow.add(this.transforms[Mv(t)],n))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(function(t){return t.getState(e)})),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(function(e){n.update(t.signals[e],i[e],Iz)}),Object.keys(r||{}).forEach(function(e){n.pulse(t.data[e].input,n.changeset().remove(Hv).insert(r[e]))}),(e.subcontext||[]).forEach(function(e,n){var r=t.subcontext[n];r&&r.setState(e)})}};var Uz="width",Bz="height",Wz="padding",Gz={skip:!0},Yz=P($v,on);Yz.run=function(e){if(on.prototype.run.call(this,e),this._redraw||this._resize)try{this.render()}catch(e){this.error(e)}return this},Yz.render=function(){var e,t,n,r;return this._renderer&&(this._resize&&(this._resize=0,t=rp(e=this),n=tp(e),r=np(e),e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(function(t){try{t(n,r)}catch(t){e.error(t)}})),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},Yz.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},Yz.container=function(){return this._el},Yz.scenegraph=function(){return this._scenegraph},Yz.origin=function(){return this._origin.slice()},Yz.signal=function(e,t,n){var r=jv(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},Yz.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},Yz.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},Yz.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},Yz.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},Yz.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},Yz.renderer=function(e){return arguments.length?(uo(e)||o("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},Yz.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},Yz.loader=function(e){return arguments.length?(e!==this._loader&&(on.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},Yz.resize=function(){return this._autosize=1,this},Yz._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el))},Yz._resizeView=function(e,t,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(Uz,n,Gz),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(Bz,r,Gz),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter(function(){o.resize()})},!1,1)},Yz.addEventListener=function(e,t,n){var r=t;return n&&!1===n.trap||((r=vp(this,t)).raw=t),this._handler.on(e,r),this},Yz.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;0<=--a;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},Yz.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},Yz.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return 0<=n&&t.splice(n,1),this},Yz.addSignalListener=function(e,t){var n=jv(this,e),r=Fv(n,t);return r||((r=vp(this,function(){t(e,n.value)})).handler=t,this.on(n,null,r)),this},Yz.removeSignalListener=function(e,t){var n=jv(this,e),r=Fv(n,t);return r&&n._targets.remove(r),this},Yz.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},Yz.timer=function(e,t){var n,r,i,a,o;this._timers.push((n=function(t){e({timestamp:Date.now(),elapsed:t})},r=t,a=new Zl,null==(o=r)?a.restart(n,r,i):(r=+r,i=null==i?Vl():+i,a.restart(function e(t){t+=o,a.restart(e,o+=r,i),n(t)},r,i)),a))},Yz.events=function(e,t,n){var r,i=this,a=new ce(n),o=function(n,r){var o,u,s,f,c;"view"!==e||(u=t,s=(o=i)._eventConfig.defaults,f=s&&s.prevent,c=s&&s.allow,!1===f||!0===c||!0!==f&&!1!==c&&(f?!f[u]:c?c[u]:!o.preventDefault()))||n.preventDefault();try{a.receive(ip(i,n,r))}catch(e){i.error(e)}finally{i.run()}};if("timer"===e)i.timer(o,t);else if("view"===e)i.addEventListener(t,o,mC);else if("window"===e?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a},Yz.finalize=function(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;0<=--e;)i[e].stop();for(e=a.length;0<=--e;)for(t=(n=a[e]).sources.length;0<=--t;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},Yz.hover=function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",ap),op,up(e)),this.on(this.events("view","mouseout",ap),op,up(t)),this},Yz.data=function(e){return Kh(this,e).values.value},Yz.change=ep,Yz.insert=function(e,t){return ep.call(this,e,oe().insert(t))},Yz.remove=function(e,t){return ep.call(this,e,oe().remove(t))},Yz.initialize=function(e,t){var n,r,i,a,o,u,s=this,f=s._renderType,c=uo(f);return e=s._el=e?yp(s,e):null,c||s.error("Unrecognized renderer type: "+f),n=c.handler||Wa,r=e?c.renderer:c.headless,s._renderer=r?mp(s,s._renderer,e,r):null,s._handler=(a=(i=s)._handler,o=e,u=new n(i.loader(),vp(i,i.tooltip())).scene(i.scenegraph().root).initialize(o,rp(i),i),a&&a.handlers().forEach(function(e){u.on(e.type,e.handler)}),u),s._redraw=!0,e&&(t=t?yp(s,t):e.appendChild(sp("div",{class:"vega-bindings"})),s._bind.forEach(function(e){e.param.element&&(e.element=yp(s,e.param.element))}),s._bind.forEach(function(e){fp(s,e.element||t,e)})),s},Yz.toImageURL=function(e,t){return e!==ew.Canvas&&e!==ew.SVG&&e!==ew.PNG?Promise.reject("Unrecognized image type: "+e):bp(this,e,t).then(function(t){return e===ew.SVG?(n=t.svg(),r=new Blob([n],{type:"image/svg+xml"}),window.URL.createObjectURL(r)):t.canvas().toDataURL("image/png");var n,r})},Yz.toCanvas=function(e){return bp(this,ew.Canvas,e).then(function(e){return e.canvas()})},Yz.toSVG=function(e){return bp(this,ew.SVG,e).then(function(e){return e.svg()})},Yz.getState=function(e){return this._runtime.getState(e||{data:Nv,signals:Dv,recurse:!0})},Yz.setState=function(e){var t=this;return t.runAfter(function(){t._trigger=!1,t._runtime.setState(e),t.run().runAfter(function(){t._trigger=!0})}),this},z(ob,Pb,fw,AS,TO,KO,mA,AA,HA,XA),t.version="4.0.0-rc.2",t.Dataflow=on,t.EventStream=ce,t.Parameters=ue,t.Pulse=Zt,t.MultiPulse=en,t.Operator=se,t.Transform=sn,t.changeset=oe,t.ingest=te,t.isTuple=Q,t.definition=fn,t.transform=cn,t.transforms=ob,t.tupleid=K,t.scale=Xh,t.scheme=function(e,t){if(1<arguments.length)return uC[e]=t,this;var n=e.split("-");return e=n[0],(n=+n[1]+1)&&oC.hasOwnProperty(e)?oC[e][n-1]:!n&&uC.hasOwnProperty(e)?uC[e]:void 0},t.interpolate=function(e,t){var n,r=Mk[(n=e,"interpolate"+n.toLowerCase().split("-").map(function(e){return e[0].toUpperCase()+e.slice(1)}).join(""))];return null!=t&&r&&r.gamma?r.gamma(t):r},t.interpolateRange=function(e,t){var n=t[0],r=p(t)-n;return function(t){return e(n+t*r)}},t.timeInterval=function(e){return hC.hasOwnProperty(e)&&hC[e]},t.utcInterval=function(e){return pC.hasOwnProperty(e)&&pC[e]},t.projection=kl,t.View=$v,t.parse=function(e,t){return s(e)||o("Input Vega specification must be an object."),gv(e,new mv(bv([t,e.config]))).toRuntime()},t.expressionFunction=Ug,t.formatLocale=Ku,t.timeFormatLocale=Yt,t.runtime=Ov,t.runtimeContext=Av,t.bin=vn,t.bootstrapCI=zn,t.quartiles=Nn,t.setRandom=function(e){t.random=e},t.randomInteger=function(e,n){null==n&&(n=e,e=0);var r,i,a,o={};return o.min=function(e){return arguments.length?(a=i-(r=e||0),o):r},o.max=function(e){return arguments.length?(a=(i=e||0)-r,o):i},o.sample=function(){return r+Math.floor(a*t.random())},o.pdf=function(e){return e===Math.floor(e)&&r<=e&&e<i?1/a:0},o.cdf=function(e){var t=Math.floor(e);return t<r?0:i<=t?1:(t-r+1)/a},o.icdf=function(e){return 0<=e&&e<=1?r-1+Math.floor(e*a):NaN},o.min(e).max(n)},t.randomKDE=Pn,t.randomMixture=Ln,t.randomNormal=Dn,t.randomUniform=qn,t.accessor=r,t.accessorName=i,t.accessorFields=a,t.id=Bv,t.identity=Wv,t.zero=Gv,t.one=Yv,t.truthy=Hv,t.falsy=Vv,t.logger=h,t.None=Xv,t.Error=Zv,t.Warn=Jv,t.Info=Qv,t.Debug=Kv,t.panLinear=_,t.panLog=x,t.panPow=w,t.zoomLinear=M,t.zoomLog=S,t.zoomPow=E,t.array=O,t.compare=C,t.constant=R,t.debounce=T,t.error=o,t.extend=z,t.extentIndex=N,t.fastmap=D,t.field=l,t.inherits=P,t.isArray=Iv,t.isBoolean=L,t.isDate=q,t.isFunction=A,t.isNumber=$,t.isObject=s,t.isRegExp=j,t.isString=f,t.key=F,t.merge=I,t.pad=B,t.peek=p,t.repeat=U,t.splitAccessPath=u,t.stringValue=c,t.toBoolean=W,t.toDate=Y,t.toNumber=g,t.toString=H,t.toSet=V,t.truncate=X,t.visitArray=Z,t.loader=de,t.read=Ht,t.inferType=be,t.inferTypes=_e,t.typeParsers=ly,t.formats=Ne,t.Bounds=Rr,t.Gradient=Tr,t.GroupItem=Nr,t.ResourceLoader=Lr,t.Item=zr,t.Scenegraph=Na,t.Handler=Ia,t.Renderer=Ba,t.CanvasHandler=Wa,t.CanvasRenderer=Ha,t.SVGHandler=Va,t.SVGRenderer=Qa,t.SVGStringRenderer=io,t.RenderType=ew,t.renderModule=uo,t.Marks=Ox,t.boundClip=so,t.boundContext=Yi,t.boundStroke=Gi,t.boundItem=Ca,t.boundMark=Ra,t.pathCurves=Ei,t.pathSymbols=zi,t.pathRectangle=$i,t.pathTrail=ji,t.pathParse=Oi,t.pathRender=Ri,t.point=Fa,t.domCreate=Pa,t.domFind=La,t.domChild=qa,t.domClear=$a,t.openTag=Za,t.closeTag=Ja,t.font=Ea,t.textMetrics=Mx,t.resetSVGClipId=function(){hx=1},t.sceneEqual=fo,t.pathEqual=co,t.sceneToJSON=Ta,t.sceneFromJSON=za,t.sceneZOrder=Ki,t.sceneVisit=ea,t.scenePickVisit=ta,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,n(1).Buffer)},,,,,,,,,,,,,,,function(e,t,n){(function(t){"use strict";function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function a(e){return Object.prototype.toString.call(e)}function o(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function u(e){if(_.isFunction(e)){if(k)return e.name;var t=e.toString(),n=t.match(S);return n&&n[1]}}function s(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function f(e){if(k||!_.isFunction(e))return _.inspect(e);var t=u(e),n=t?": "+t:"";return"[Function"+n+"]"}function c(e){return s(f(e.actual),128)+" "+e.operator+" "+s(f(e.expected),128)}function l(e,t,n,r,i){throw new M.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function d(e,t){e||l(e,!0,t,"==",M.ok)}function h(e,t,n,u){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(_.isDate(e)&&_.isDate(t))return e.getTime()===t.getTime();if(_.isRegExp(e)&&_.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(o(e)&&o(t)&&a(e)===a(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;u=u||{actual:[],expected:[]};var s=u.actual.indexOf(e);return s!==-1&&s===u.expected.indexOf(t)||(u.actual.push(e),u.expected.push(t),g(e,t,n,u))}return n?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function g(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(_.isPrimitive(e)||_.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=p(e),a=p(t);if(i&&!a||!i&&a)return!1;if(i)return e=w.call(e),t=w.call(t),h(e,t,n);var o,u,s=E(e),f=E(t);if(s.length!==f.length)return!1;for(s.sort(),f.sort(),u=s.length-1;u>=0;u--)if(s[u]!==f[u])return!1;for(u=s.length-1;u>=0;u--)if(o=s[u],!h(e[o],t[o],n,r))return!1;return!0}function m(e,t,n){h(e,t,!0)&&l(e,t,n,"notDeepStrictEqual",m)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&t.call({},e)===!0}function y(e){var t;try{e()}catch(e){t=e}return t}function b(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=y(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&l(i,n,"Missing expected exception"+r);var a="string"==typeof r,o=!e&&_.isError(i),u=!e&&i&&!n;if((o&&a&&v(i,n)||u)&&l(i,n,"Got unwanted exception"+r),e&&i&&n&&!v(i,n)||!e&&i)throw i}var _=n(54),x=Object.prototype.hasOwnProperty,w=Array.prototype.slice,k=function(){return"foo"===function(){}.name}(),M=e.exports=d,S=/\s*function\s+([^\(\s]*)\s*/;M.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=u(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},_.inherits(M.AssertionError,Error),M.fail=l,M.ok=d,M.equal=function(e,t,n){e!=t&&l(e,t,n,"==",M.equal)},M.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",M.notEqual)},M.deepEqual=function(e,t,n){h(e,t,!1)||l(e,t,n,"deepEqual",M.deepEqual)},M.deepStrictEqual=function(e,t,n){h(e,t,!0)||l(e,t,n,"deepStrictEqual",M.deepStrictEqual)},M.notDeepEqual=function(e,t,n){h(e,t,!1)&&l(e,t,n,"notDeepEqual",M.notDeepEqual)},M.notDeepStrictEqual=m,M.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",M.strictEqual)},M.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",M.notStrictEqual)},M.throws=function(e,t,n){b(!0,e,t,n)},M.doesNotThrow=function(e,t,n){b(!1,e,t,n)},M.ifError=function(e){if(e)throw e};var E=Object.keys||function(e){var t=[];for(var n in e)x.call(e,n)&&t.push(n);return t}}).call(t,function(){return this}())},,,,function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function r(e){var t=n(e),r=t[0],i=t[1];return 3*(r+i)/4-i}function i(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,r=n(e),a=r[0],o=r[1],u=new l(i(e,a,o)),s=0,f=o>0?a-4:a,d=0;d<f;d+=4)t=c[e.charCodeAt(d)]<<18|c[e.charCodeAt(d+1)]<<12|c[e.charCodeAt(d+2)]<<6|c[e.charCodeAt(d+3)],u[s++]=t>>16&255,u[s++]=t>>8&255,u[s++]=255&t;return 2===o&&(t=c[e.charCodeAt(d)]<<2|c[e.charCodeAt(d+1)]>>4,u[s++]=255&t),1===o&&(t=c[e.charCodeAt(d)]<<10|c[e.charCodeAt(d+1)]<<4|c[e.charCodeAt(d+2)]>>2,u[s++]=t>>8&255,u[s++]=255&t),u}function o(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function u(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(o(r));return i.join("")}function s(e){for(var t,n=e.length,r=n%3,i=[],a=16383,o=0,s=n-r;o<s;o+=a)i.push(u(e,o,o+a>s?s:o+a));return 1===r?(t=e[n-1],i.push(f[t>>2]+f[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),i.join("")}t.byteLength=r,t.toByteArray=a,t.fromByteArray=s;for(var f=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=d.length;h<p;++h)f[h]=d[h],c[d.charCodeAt(h)]=h;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,n){"use strict";function r(e){for(var t,n=[],r=String(e||s),i=r.indexOf(o),u=0,f=!1;!f;)i===-1&&(i=r.length,f=!0),t=a(r.slice(u,i)),!t&&f||n.push(t),u=i+1,i=r.indexOf(o,u);return n}function i(e,t){var n=t||{},r=n.padLeft===!1?s:u,i=n.padRight?u:s;return e[e.length-1]===s&&(e=e.concat(s)),a(e.join(i+o+r))}t.parse=r,t.stringify=i;var a=n(53),o=",",u=" ",s=""},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){for(var e,t=0,r=arguments.length,i={};t<r;++t){if(!(e=arguments[t]+"")||e in i)throw new Error("illegal type: "+e);i[e]=[]}return new n(i)}function n(e){this._=e}function r(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function i(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function a(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=o,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}var o={value:function(){}};n.prototype=t.prototype={constructor:n,on:function(e,t){var n,o=this._,u=r(e+"",o),s=-1,f=u.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<f;)if(n=(e=u[s]).type)o[n]=a(o[n],e.name,t);else if(null==t)for(n in o)o[n]=a(o[n],e.name,null);return this}for(;++s<f;)if((n=(e=u[s]).type)&&(n=i(o[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new n(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}},e.dispatch=t,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,u,s,f,c,l,d,h=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((f=t>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o,i=h,!(h=h[l=c<<1|f]))return i[l]=p,e;if(u=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===u&&n===s)return p.next=h,i?i[l]=p:e._root=p,e;do i=i?i[l]=new Array(4):e._root=new Array(4),(f=t>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o;while((l=c<<1|f)===(d=(s>=o)<<1|u>=a));return i[d]=h,i[l]=p,e}function n(e){var n,r,i,a,o=e.length,u=new Array(o),s=new Array(o),f=1/0,c=1/0,l=-(1/0),d=-(1/0);for(r=0;r<o;++r)isNaN(i=+this._x.call(null,n=e[r]))||isNaN(a=+this._y.call(null,n))||(u[r]=i,s[r]=a,i<f&&(f=i),i>l&&(l=i),a<c&&(c=a),a>d&&(d=a));for(l<f&&(f=this._x0,l=this._x1),d<c&&(c=this._y0,d=this._y1),this.cover(f,c).cover(l,d),r=0;r<o;++r)t(this,u[r],s[r],e[r]);return this}function r(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function i(e){return e[0]}function a(e){return e[1]}function o(e,t,n){var r=new u(null==t?i:t,null==n?a:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function u(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function s(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var f=function(e){var n=+this._x.call(null,e),r=+this._y.call(null,e);return t(this.cover(n,r),n,r,e)},c=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{if(!(n>e||e>i||r>t||t>a))return this;var o,u,s=i-n,f=this._root;switch(u=(t<(r+a)/2)<<1|e<(n+i)/2){case 0:do o=new Array(4),o[u]=f,f=o;while(s*=2,i=n+s,a=r+s,e>i||t>a);break;case 1:do o=new Array(4),o[u]=f,f=o;while(s*=2,n=i-s,a=r+s,n>e||t>a);break;case 2:do o=new Array(4),o[u]=f,f=o;while(s*=2,i=n+s,r=a-s,e>i||r>t);break;case 3:do o=new Array(4),o[u]=f,f=o;while(s*=2,n=i-s,r=a-s,n>e||r>t)}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},l=function(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e},d=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},h=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i},p=function(e,t,n){var r,i,a,o,u,s,f,c=this._x0,l=this._y0,d=this._x1,p=this._y1,g=[],m=this._root;for(m&&g.push(new h(m,c,l,d,p)),null==n?n=1/0:(c=e-n,l=t-n,d=e+n,p=t+n,n*=n);s=g.pop();)if(!(!(m=s.node)||(i=s.x0)>d||(a=s.y0)>p||(o=s.x1)<c||(u=s.y1)<l))if(m.length){var v=(i+o)/2,y=(a+u)/2;g.push(new h(m[3],v,y,o,u),new h(m[2],i,y,v,u),new h(m[1],v,a,o,y),new h(m[0],i,a,v,y)),(f=(t>=y)<<1|e>=v)&&(s=g[g.length-1],g[g.length-1]=g[g.length-1-f],g[g.length-1-f]=s)}else{var b=e-+this._x.call(null,m.data),_=t-+this._y.call(null,m.data),x=b*b+_*_;if(x<n){var w=Math.sqrt(n=x);c=e-w,l=t-w,d=e+w,p=t+w,r=m.data}}return r},g=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,u,s,f,c,l,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((f=a>=(u=(p+m)/2))?p=u:m=u,(c=o>=(s=(g+v)/2))?g=s:v=s,t=h,!(h=h[l=c<<1|f]))return this;if(!h.length)break;(t[l+1&3]||t[l+2&3]||t[l+3&3])&&(n=t,d=l)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[l]=i:delete t[l],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},m=function(){return this._root},v=function(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e},y=function(e){var t,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new h(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&s.length){var f=(r+a)/2,c=(i+o)/2;(n=s[3])&&u.push(new h(n,f,c,a,o)),(n=s[2])&&u.push(new h(n,r,c,f,o)),(n=s[1])&&u.push(new h(n,f,i,a,c)),(n=s[0])&&u.push(new h(n,r,i,f,c))}return this},b=function(e){var t,n=[],r=[];for(this._root&&n.push(new h(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,u=t.y0,s=t.x1,f=t.y1,c=(o+s)/2,l=(u+f)/2;(a=i[0])&&n.push(new h(a,o,u,c,l)),(a=i[1])&&n.push(new h(a,c,u,s,l)),(a=i[2])&&n.push(new h(a,o,l,c,f)),(a=i[3])&&n.push(new h(a,c,l,s,f))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},_=function(e){return arguments.length?(this._x=e,this):this._x},x=function(e){return arguments.length?(this._y=e,this):this._y},w=o.prototype=u.prototype;w.copy=function(){var e,t,n=new u(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=s(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=s(t));return n},w.add=f,w.addAll=n,w.cover=c,w.data=l,w.extent=d,w.find=p,w.remove=g,w.removeAll=r,w.root=m,w.size=v,w.visit=y,w.visitAfter=b,w.x=_,w.y=x,e.quadtree=o,Object.defineProperty(e,"__esModule",{value:!0})})},,function(e,t,n){function r(e){return n(i(e))}function i(e){return a[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var a={"./encoding":39,"./encoding.js":39,"./iconv-loader":40,"./iconv-loader.js":40};r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=150},,,function(e,t){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,t,i){if("[object Function]"!==r.call(t))throw new TypeError("iterator must be a function");var a=e.length;if(a===+a)for(var o=0;o<a;o++)t.call(i,e[o],o,e);else for(var u in e)n.call(e,u)&&t.call(i,e[u],u,e)}},function(e,t){"use strict";var n="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,i=Object.prototype.toString,a="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||i.call(t)!==a)throw new TypeError(n+t);for(var o,u=r.call(arguments,1),s=function(){if(this instanceof o){var n=t.apply(this,u.concat(r.call(arguments)));return Object(n)===n?n:this}return t.apply(e,u.concat(r.call(arguments)))},f=Math.max(0,t.length-u.length),c=[],l=0;l<f;l++)c.push("$"+l);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var d=function(){};d.prototype=t.prototype,o.prototype=new d,d.prototype=null}return o}},function(e,t,n){"use strict";var r=n(154);e.exports=Function.prototype.bind||r},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{
value:!0}),t.KEY=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),f=r(s),c=n(4),l=r(c),d=n(266),h=r(d),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={spec:e.spec,parsedSpec:JSON.parse(e.spec)},n}return o(t,e),u(t,[{key:"componentDidMount",value:function(){this.rerender()}},{key:"componentDidUpdate",value:function(){this.rerender()}},{key:"componentWillReceiveProps",value:function(e){var t=e.spec;this.state.spec!==t&&this.setState({spec:t,parsedSpec:JSON.parse(t)})}},{key:"rerender",value:function(){(0,h.default)(this.node,JSON.parse(this.state.spec),{actions:!1,padding:0}).catch(console.error)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{ref:function(t){return e.node=t}})}}]),t}(s.Component);p.propTypes={spec:l.default.string.isRequired};t.KEY="vega";t.default=p},function(e,t,n){var r=n(155);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";function r(e,t,n){var r,a;if("function"!=typeof e)throw new Error("h is not a function");if(r=o(e),a=s(e),null!==n&&void 0!==n||(n=(r===!0||a===!0)&&"h-"),b("root",t))t=1===t.children.length&&b("element",t.children[0])?t.children[0]:{type:"element",tagName:"div",properties:{},children:t.children};else if(!b("element",t))throw new Error("Expected root or element, not `"+(t&&t.type||t)+"`");return i(e,t,{prefix:n,key:0,react:r,vdom:a,hyperscript:u(e)})}function i(e,t,n){var r,o,u,s,c,l,d,h,p=t.tagName;r=t.properties,o={};for(s in r)a(o,s,r[s],n);for(n.vdom===!0&&(p=p.toUpperCase()),n.hyperscript===!0&&o.id&&(p+="#"+o.id,delete o.id),n.hyperscript!==!0&&n.vdom!==!0||!o.className||(p+="."+m.parse(o.className).join("."),delete o.className),"string"==typeof o.style&&(n.vdom===!0?(o.attributes||(o.attributes={}),o.attributes.style=o.style,delete o.style):n.react===!0&&(o.style=f(o.style))),n.prefix&&(n.key++,o.key=n.prefix+n.key),c=[],u=t.children||[],l=u.length,d=-1;++d<l;)h=u[d],b("element",h)?c.push(i(e,h,n)):b("text",h)&&c.push(h.value);return 0===c.length?e(p,o):e(p,o,c)}function a(e,t,n,r){var i,a=g(t)||{};if(!(null===n||void 0===n||n===!1||y(n)||a.boolean&&!n))return t=a.name?a.name:r.react&&!c(t)?l(t):p(t),null!==n&&"object"==typeof n&&"length"in n&&(n=(a.commaSeparated?v:m).stringify(n)),a.boolean&&r.hyperscript===!0&&(n=""),"class"===a.name||!a.mustUseAttribute&&a.name||(r.vdom===!0?i="attributes":r.hyperscript===!0&&(i="attrs"),!i)?void(e[a.propertyName||t]=n):(void 0===e[i]&&(e[i]={}),void(e[i][t]=n))}function o(e){var t=e&&e("div");return Boolean(t&&("_owner"in t||"_store"in t)&&null===t.key)}function u(e){return Boolean(e&&e.context&&e.cleanup)}function s(e){try{return"VirtualNode"===e("div").type}catch(e){}return!1}function f(e){for(var t,n,r,i={},a=e.split(";"),o=a.length,u=-1;++u<o;)t=a[u],r=t.indexOf(":"),r!==-1&&(n=l(h(t.slice(0,r))),i[n]=h(t.slice(r+1)));return i}function c(e){var t=e.slice(0,4);return("data"===t||"aria"===t)&&e.length>4}function l(e){return"-ms-"===e.slice(0,4)&&(e="ms-"+e.slice(4)),e.replace(/-([a-z])/g,d)}function d(e,t){return t.toUpperCase()}var h=n(53),p=n(188),g=n(242),m=n(256),v=n(123),y=n(178),b=n(260);e.exports=r},,,,function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";var e={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,r=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,a=Object.getOwnPropertyDescriptor,o=Object.getPrototypeOf,u=o&&o(Object);return function s(f,c,l){if("string"!=typeof c){if(u){var d=o(c);d&&d!==u&&s(f,d,l)}var h=r(c);i&&(h=h.concat(i(c)));for(var p=0;p<h.length;++p){var g=h[p];if(!(e[g]||t[g]||l&&l[g])){var m=a(c,g);try{n(f,g,m)}catch(e){}}}return f}return f}})},function(e,t,n){"use strict";function r(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=e.table();this.decodeTables=[],this.decodeTables[0]=d.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var i={};if(e.encodeSkipVals)for(var r=0;r<e.encodeSkipVals.length;r++){var a=e.encodeSkipVals[r];if("number"==typeof a)i[a]=!0;else for(var o=a.from;o<=a.to;o++)i[o]=!0}if(this._fillEncodeTable(0,0,i),e.encodeAdd)for(var u in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,u)&&this._setEncodeChar(u.charCodeAt(0),e.encodeAdd[u]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===s&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===s&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();for(var c=this.decodeTables.length,h=this.decodeTables[c]=d.slice(0),p=this.decodeTables.length,g=this.decodeTables[p]=d.slice(0),r=129;r<=254;r++)for(var m=l-this.decodeTables[0][r],v=this.decodeTables[m],o=48;o<=57;o++)v[o]=l-c;for(var r=129;r<=254;r++)h[r]=l-p;for(var r=48;r<=57;r++)g[r]=f}}function i(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function a(e,t){this.nodeIdx=0,this.prevBuf=u.alloc(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function o(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length;n<r-1;){var i=n+Math.floor((r-n+1)/2);e[i]<=t?n=i:r=i}return n}var u=n(9).Buffer;t._dbcs=r;for(var s=-1,f=-2,c=-10,l=-1e3,d=new Array(256),h=-1,p=0;p<256;p++)d[p]=s;r.prototype.encoder=i,r.prototype.decoder=a,r.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var n=this.decodeTables[0],r=t.length-1;r>0;r--){var i=n[t[r]];if(i==s)n[t[r]]=l-this.decodeTables.length,this.decodeTables.push(n=d.slice(0));else{if(!(i<=l))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));n=this.decodeTables[l-i]}}return n},r.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),n=this._getDecodeTrieNode(t);t&=255;for(var r=1;r<e.length;r++){var i=e[r];if("string"==typeof i)for(var a=0;a<i.length;){var o=i.charCodeAt(a++);if(55296<=o&&o<56320){var u=i.charCodeAt(a++);if(!(56320<=u&&u<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);n[t++]=65536+1024*(o-55296)+(u-56320)}else if(4080<o&&o<=4095){for(var s=4095-o+2,f=[],l=0;l<s;l++)f.push(i.charCodeAt(a++));n[t++]=c-this.decodeTableSeq.length,this.decodeTableSeq.push(f)}else n[t++]=o}else{if("number"!=typeof i)throw new Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+e[0]);for(var d=n[t-1]+1,a=0;a<i;a++)n[t++]=d++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},r.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=d.slice(0)),this.encodeTable[t]},r.prototype._setEncodeChar=function(e,t){var n=this._getEncodeBucket(e),r=255&e;n[r]<=c?this.encodeTableSeq[c-n[r]][h]=t:n[r]==s&&(n[r]=t)},r.prototype._setEncodeSequence=function(e,t){var n,r=e[0],i=this._getEncodeBucket(r),a=255&r;i[a]<=c?n=this.encodeTableSeq[c-i[a]]:(n={},i[a]!==s&&(n[h]=i[a]),i[a]=c-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var o=1;o<e.length-1;o++){var u=n[r];"object"==typeof u?n=u:(n=n[r]={},void 0!==u&&(n[h]=u))}r=e[e.length-1],n[r]=t},r.prototype._fillEncodeTable=function(e,t,n){for(var r=this.decodeTables[e],i=0;i<256;i++){var a=r[i],o=t+i;n[o]||(a>=0?this._setEncodeChar(a,o):a<=l?this._fillEncodeTable(l-a,o<<8,n):a<=c&&this._setEncodeSequence(this.decodeTableSeq[c-a],o))}},i.prototype.write=function(e){for(var t=u.alloc(e.length*(this.gb18030?4:3)),n=this.leadSurrogate,r=this.seqObj,i=-1,a=0,f=0;;){if(i===-1){if(a==e.length)break;var l=e.charCodeAt(a++)}else{var l=i;i=-1}if(55296<=l&&l<57344)if(l<56320){if(n===-1){n=l;continue}n=l,l=s}else n!==-1?(l=65536+1024*(n-55296)+(l-56320),n=-1):l=s;else n!==-1&&(i=l,l=s,n=-1);var d=s;if(void 0!==r&&l!=s){var p=r[l];if("object"==typeof p){r=p;continue}"number"==typeof p?d=p:void 0==p&&(p=r[h],void 0!==p&&(d=p,i=l)),r=void 0}else if(l>=0){var g=this.encodeTable[l>>8];if(void 0!==g&&(d=g[255&l]),d<=c){r=this.encodeTableSeq[c-d];continue}if(d==s&&this.gb18030){var m=o(this.gb18030.uChars,l);if(m!=-1){var d=this.gb18030.gbChars[m]+(l-this.gb18030.uChars[m]);t[f++]=129+Math.floor(d/12600),d%=12600,t[f++]=48+Math.floor(d/1260),d%=1260,t[f++]=129+Math.floor(d/10),d%=10,t[f++]=48+d;continue}}}d===s&&(d=this.defaultCharSingleByte),d<256?t[f++]=d:d<65536?(t[f++]=d>>8,t[f++]=255&d):(t[f++]=d>>16,t[f++]=d>>8&255,t[f++]=255&d)}return this.seqObj=r,this.leadSurrogate=n,t.slice(0,f)},i.prototype.end=function(){if(this.leadSurrogate!==-1||void 0!==this.seqObj){var e=u.alloc(10),t=0;if(this.seqObj){var n=this.seqObj[h];void 0!==n&&(n<256?e[t++]=n:(e[t++]=n>>8,e[t++]=255&n)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},i.prototype.findIdx=o,a.prototype.write=function(e){var t,n=u.alloc(2*e.length),r=this.nodeIdx,i=this.prevBuf,a=this.prevBuf.length,d=-this.prevBuf.length;a>0&&(i=u.concat([i,e.slice(0,10)]));for(var h=0,p=0;h<e.length;h++){var g=h>=0?e[h]:i[h+a],t=this.decodeTables[r][g];if(t>=0);else if(t===s)h=d,t=this.defaultCharUnicode.charCodeAt(0);else if(t===f){var m=d>=0?e.slice(d,h+1):i.slice(d+a,h+1+a),v=12600*(m[0]-129)+1260*(m[1]-48)+10*(m[2]-129)+(m[3]-48),y=o(this.gb18030.gbChars,v);t=this.gb18030.uChars[y]+v-this.gb18030.gbChars[y]}else{if(t<=l){r=l-t;continue}if(!(t<=c))throw new Error("iconv-lite internal error: invalid decoding table value "+t+" at "+r+"/"+g);for(var b=this.decodeTableSeq[c-t],_=0;_<b.length-1;_++)t=b[_],n[p++]=255&t,n[p++]=t>>8;t=b[b.length-1]}if(t>65535){t-=65536;var x=55296+Math.floor(t/1024);n[p++]=255&x,n[p++]=x>>8,t=56320+t%1024}n[p++]=255&t,n[p++]=t>>8,r=0,d=h+1}return this.nodeIdx=r,this.prevBuf=d>=0?e.slice(d):i.slice(d+a),n.slice(0,p).toString("ucs2")},a.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=u.alloc(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}},function(e,t,n){"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return n(186)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(184)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(42)}},gbk:{type:"_dbcs",table:function(){return n(42).concat(n(85))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(42).concat(n(85))},gb18030:function(){return n(185)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(183)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(84)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(84).concat(n(182))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(e,t,n){"use strict";for(var r=[n(167),n(171),n(172),n(168),n(170),n(169),n(164),n(165)],i=0;i<r.length;i++){var e=r[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}},function(e,t,n){"use strict";function r(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=o:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=u,""!==f.from("eda0bdedb2a9","hex").toString()&&(this.decoder=s,this.defaultCharUnicode=t.defaultCharUnicode))}function i(e,t){c.call(this,t.enc)}function a(e,t){this.enc=t.enc}function o(e,t){this.prevStr=""}function u(e,t){}function s(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}var f=n(9).Buffer;e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:r},r.prototype.encoder=a,r.prototype.decoder=i;var c=n(52).StringDecoder;c.prototype.end||(c.prototype.end=function(){}),i.prototype=c.prototype,a.prototype.write=function(e){return f.from(e,this.enc)},a.prototype.end=function(){},o.prototype.write=function(e){e=this.prevStr+e;var t=e.length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),f.from(e,"base64")},o.prototype.end=function(){return f.from(this.prevStr,"base64")},u.prototype.write=function(e){for(var t=f.alloc(3*e.length),n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=192+(i>>>6),t[n++]=128+(63&i)):(t[n++]=224+(i>>>12),t[n++]=128+(i>>>6&63),t[n++]=128+(63&i))}return t.slice(0,n)},u.prototype.end=function(){},s.prototype.write=function(e){for(var t=this.acc,n=this.contBytes,r=this.accBytes,i="",a=0;a<e.length;a++){var o=e[a];128!==(192&o)?(n>0&&(i+=this.defaultCharUnicode,n=0),o<128?i+=String.fromCharCode(o):o<224?(t=31&o,n=1,r=1):o<240?(t=15&o,n=2,r=1):i+=this.defaultCharUnicode):n>0?(t=t<<6|63&o,n--,r++,0===n&&(i+=2===r&&t<128&&t>0?this.defaultCharUnicode:3===r&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):i+=this.defaultCharUnicode}return this.acc=t,this.contBytes=n,this.accBytes=r,i},s.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var n="",r=0;r<128;r++)n+=String.fromCharCode(r);e.chars=n+e.chars}this.decodeBuf=new o.from(e.chars,"ucs2");for(var i=new o.alloc(65536,t.defaultCharSingleByte.charCodeAt(0)),r=0;r<e.chars.length;r++)i[e.chars.charCodeAt(r)]=r;this.encodeBuf=i}function i(e,t){this.encodeBuf=t.encodeBuf}function a(e,t){this.decodeBuf=t.decodeBuf}var o=n(9).Buffer;t._sbcs=r,r.prototype.encoder=i,r.prototype.decoder=a,i.prototype.write=function(e){for(var t=o.alloc(e.length),n=0;n<e.length;n++)t[n]=this.encodeBuf[e.charCodeAt(n)];return t},i.prototype.end=function(){},a.prototype.write=function(e){for(var t=this.decodeBuf,n=o.alloc(2*e.length),r=0,i=0,a=0;a<e.length;a++)r=2*e[a],i=2*a,n[i]=t[r],n[i+1]=t[r+1];return n.toString("ucs2")},a.prototype.end=function(){}},function(e,t){"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(e,t){"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",
l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",10000:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(e,t,n){"use strict";function r(){}function i(){}function a(){this.overflowByte=-1}function o(e,t){this.iconv=t}function u(e,t){e=e||{},void 0===e.addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function s(e,t){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=t.iconv}function f(e,t){var n=t||"utf-16le";if(e.length>=2)if(254==e[0]&&255==e[1])n="utf-16be";else if(255==e[0]&&254==e[1])n="utf-16le";else{for(var r=0,i=0,a=Math.min(e.length-e.length%2,64),o=0;o<a;o+=2)0===e[o]&&0!==e[o+1]&&i++,0!==e[o]&&0===e[o+1]&&r++;i>r?n="utf-16be":i<r&&(n="utf-16le")}return n}var c=n(9).Buffer;t.utf16be=r,r.prototype.encoder=i,r.prototype.decoder=a,r.prototype.bomAware=!0,i.prototype.write=function(e){for(var t=c.from(e,"ucs2"),n=0;n<t.length;n+=2){var r=t[n];t[n]=t[n+1],t[n+1]=r}return t},i.prototype.end=function(){},a.prototype.write=function(e){if(0==e.length)return"";var t=c.alloc(e.length+1),n=0,r=0;for(this.overflowByte!==-1&&(t[0]=e[0],t[1]=this.overflowByte,n=1,r=2);n<e.length-1;n+=2,r+=2)t[r]=e[n+1],t[r+1]=e[n];return this.overflowByte=n==e.length-1?e[e.length-1]:-1,t.slice(0,r).toString("ucs2")},a.prototype.end=function(){},t.utf16=o,o.prototype.encoder=u,o.prototype.decoder=s,u.prototype.write=function(e){return this.encoder.write(e)},u.prototype.end=function(){return this.encoder.end()},s.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return"";var e=c.concat(this.initialBytes),t=f(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},s.prototype.end=function(){if(!this.decoder){var e=c.concat(this.initialBytes),t=f(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var n=this.decoder.write(e),r=this.decoder.end();return r?n+r:n}return this.decoder.end()}},function(e,t,n){"use strict";function r(e,t){this.iconv=t}function i(e,t){this.iconv=t.iconv}function a(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}function o(e,t){this.iconv=t}function u(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=f.alloc(6),this.base64AccumIdx=0}function s(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}var f=n(9).Buffer;t.utf7=r,t.unicode11utf7="utf7",r.prototype.encoder=i,r.prototype.decoder=a,r.prototype.bomAware=!0;var c=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;i.prototype.write=function(e){return f.from(e.replace(c,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},i.prototype.end=function(){};for(var l=/[A-Za-z0-9\/+]/,d=[],h=0;h<256;h++)d[h]=l.test(String.fromCharCode(h));var p="+".charCodeAt(0),g="-".charCodeAt(0),m="&".charCodeAt(0);a.prototype.write=function(e){for(var t="",n=0,r=this.inBase64,i=this.base64Accum,a=0;a<e.length;a++)if(r){if(!d[e[a]]){if(a==n&&e[a]==g)t+="+";else{var o=i+e.slice(n,a).toString();t+=this.iconv.decode(f.from(o,"base64"),"utf16-be")}e[a]!=g&&a--,n=a+1,r=!1,i=""}}else e[a]==p&&(t+=this.iconv.decode(e.slice(n,a),"ascii"),n=a+1,r=!0);if(r){var o=i+e.slice(n).toString(),u=o.length-o.length%8;i=o.slice(u),o=o.slice(0,u),t+=this.iconv.decode(f.from(o,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=r,this.base64Accum=i,t},a.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(f.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=o,o.prototype.encoder=u,o.prototype.decoder=s,o.prototype.bomAware=!0,u.prototype.write=function(e){for(var t=this.inBase64,n=this.base64Accum,r=this.base64AccumIdx,i=f.alloc(5*e.length+10),a=0,o=0;o<e.length;o++){var u=e.charCodeAt(o);32<=u&&u<=126?(t&&(r>0&&(a+=i.write(n.slice(0,r).toString("base64").replace(/\//g,",").replace(/=+$/,""),a),r=0),i[a++]=g,t=!1),t||(i[a++]=u,u===m&&(i[a++]=g))):(t||(i[a++]=m,t=!0),t&&(n[r++]=u>>8,n[r++]=255&u,r==n.length&&(a+=i.write(n.toString("base64").replace(/\//g,","),a),r=0)))}return this.inBase64=t,this.base64AccumIdx=r,i.slice(0,a)},u.prototype.end=function(){var e=f.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=g,this.inBase64=!1),e.slice(0,t)};var v=d.slice();v[",".charCodeAt(0)]=!0,s.prototype.write=function(e){for(var t="",n=0,r=this.inBase64,i=this.base64Accum,a=0;a<e.length;a++)if(r){if(!v[e[a]]){if(a==n&&e[a]==g)t+="&";else{var o=i+e.slice(n,a).toString().replace(/,/g,"/");t+=this.iconv.decode(f.from(o,"base64"),"utf16-be")}e[a]!=g&&a--,n=a+1,r=!1,i=""}}else e[a]==m&&(t+=this.iconv.decode(e.slice(n,a),"ascii"),n=a+1,r=!0);if(r){var o=i+e.slice(n).toString().replace(/,/g,"/"),u=o.length-o.length%8;i=o.slice(u),o=o.slice(0,u),t+=this.iconv.decode(f.from(o,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=r,this.base64Accum=i,t},s.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(f.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},function(e,t){"use strict";function n(e,t){this.encoder=e,this.addBOM=!0}function r(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}var i="\ufeff";t.PrependBOM=n,n.prototype.write=function(e){return this.addBOM&&(e=i+e,this.addBOM=!1),this.encoder.write(e)},n.prototype.end=function(){return this.encoder.end()},t.StripBOM=r,r.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t?t:(t[0]===i&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0,t)},r.prototype.end=function(){return this.decoder.end()}},function(e,t,n){"use strict";var r=n(1).Buffer;e.exports=function(e){var t=void 0;e.supportsNodeEncodingsExtension=!(r.from||new r(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!t){if(t={},!e.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var i={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};r.isNativeEncoding=function(e){return e&&i[e.toLowerCase()]};var a=n(1).SlowBuffer;if(t.SlowBufferToString=a.prototype.toString,a.prototype.toString=function(n,i,a){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.SlowBufferToString.call(this,n,i,a):("undefined"==typeof i&&(i=0),"undefined"==typeof a&&(a=this.length),e.decode(this.slice(i,a),n))},t.SlowBufferWrite=a.prototype.write,a.prototype.write=function(n,i,a,o){if(isFinite(i))isFinite(a)||(o=a,a=void 0);else{var u=o;o=i,i=a,a=u}i=+i||0;var s=this.length-i;if(a?(a=+a,a>s&&(a=s)):a=s,o=String(o||"utf8").toLowerCase(),r.isNativeEncoding(o))return t.SlowBufferWrite.call(this,n,i,a,o);if(n.length>0&&(a<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var f=e.encode(n,o);return f.length<a&&(a=f.length),f.copy(this,i,0,a),a},t.BufferIsEncoding=r.isEncoding,r.isEncoding=function(t){return r.isNativeEncoding(t)||e.encodingExists(t)},t.BufferByteLength=r.byteLength,r.byteLength=a.byteLength=function(n,i){return i=String(i||"utf8").toLowerCase(),r.isNativeEncoding(i)?t.BufferByteLength.call(this,n,i):e.encode(n,i).length},t.BufferToString=r.prototype.toString,r.prototype.toString=function(n,i,a){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.BufferToString.call(this,n,i,a):("undefined"==typeof i&&(i=0),"undefined"==typeof a&&(a=this.length),e.decode(this.slice(i,a),n))},t.BufferWrite=r.prototype.write,r.prototype.write=function(n,i,a,o){var u=i,s=a,f=o;if(isFinite(i))isFinite(a)||(o=a,a=void 0);else{var c=o;o=i,i=a,a=c}if(o=String(o||"utf8").toLowerCase(),r.isNativeEncoding(o))return t.BufferWrite.call(this,n,u,s,f);i=+i||0;var l=this.length-i;if(a?(a=+a,a>l&&(a=l)):a=l,n.length>0&&(a<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var d=e.encode(n,o);return d.length<a&&(a=d.length),d.copy(this,i,0,a),a},e.supportsStreams){var o=n(13).Readable;t.ReadableSetEncoding=o.prototype.setEncoding,o.prototype.setEncoding=function(t,n){this._readableState.decoder=e.getDecoder(t,n),this._readableState.encoding=t},o.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!t)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete r.isNativeEncoding;var i=n(1).SlowBuffer;if(i.prototype.toString=t.SlowBufferToString,i.prototype.write=t.SlowBufferWrite,r.isEncoding=t.BufferIsEncoding,r.byteLength=t.BufferByteLength,r.prototype.toString=t.BufferToString,r.prototype.write=t.BufferWrite,e.supportsStreams){var a=n(13).Readable;a.prototype.setEncoding=t.ReadableSetEncoding,delete a.prototype.collect}t=void 0}}}},function(e,t,n){(function(t){"use strict";var r=n(9).Buffer,i=n(173),a=e.exports;a.encodings=null,a.defaultCharUnicode="",a.defaultCharSingleByte="?",a.encode=function(e,t,n){e=""+(e||"");var i=a.getEncoder(t,n),o=i.write(e),u=i.end();return u&&u.length>0?r.concat([o,u]):o},a.decode=function(e,t,n){"string"==typeof e&&(a.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),a.skipDecodeWarning=!0),e=r.from(""+(e||""),"binary"));var i=a.getDecoder(t,n),o=i.write(e),u=i.end();return u?o+u:o},a.encodingExists=function(e){try{return a.getCodec(e),!0}catch(e){return!1}},a.toEncoding=a.encode,a.fromEncoding=a.decode,a._codecDataCache={},a.getCodec=function(e){a.encodings||(a.encodings=n(166));for(var t=a._canonicalizeEncoding(e),r={};;){var i=a._codecDataCache[t];if(i)return i;var o=a.encodings[t];switch(typeof o){case"string":t=o;break;case"object":for(var u in o)r[u]=o[u];r.encodingName||(r.encodingName=t),t=o.type;break;case"function":return r.encodingName||(r.encodingName=t),i=new o(r,a),a._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},a._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},a.getEncoder=function(e,t){var n=a.getCodec(e),r=new n.encoder(t,n);return n.bomAware&&t&&t.addBOM&&(r=new i.PrependBOM(r,t)),r},a.getDecoder=function(e,t){var n=a.getCodec(e),r=new n.decoder(t,n);return!n.bomAware||t&&t.stripBOM===!1||(r=new i.StripBOM(r,t)),r};var o="undefined"!=typeof t&&t.versions&&t.versions.node;if(o){var u=o.split(".").map(Number);(u[0]>0||u[1]>=10)&&n(176)(a),n(174)(a)}}).call(t,n(2))},function(e,t,n){"use strict";function r(e,t){this.conv=e,t=t||{},t.decodeStrings=!1,o.call(this,t)}function i(e,t){this.conv=e,t=t||{},t.encoding=this.encoding="utf8",o.call(this,t)}var a=n(1).Buffer,o=n(13).Transform;e.exports=function(e){e.encodeStream=function(t,n){return new r(e.getEncoder(t,n),n)},e.decodeStream=function(t,n){return new i(e.getDecoder(t,n),n)},e.supportsStreams=!0,e.IconvLiteEncoderStream=r,e.IconvLiteDecoderStream=i,e._collect=i.prototype.collect},r.prototype=Object.create(o.prototype,{constructor:{value:r}}),r.prototype._transform=function(e,t,n){if("string"!=typeof e)return n(new Error("Iconv encoding stream needs strings as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r),n()}catch(e){n(e)}},r.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},r.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",function(e){t.push(e)}),this.on("end",function(){e(null,a.concat(t))}),this},i.prototype=Object.create(o.prototype,{constructor:{value:i}}),i.prototype._transform=function(e,t,n){if(!a.isBuffer(e))return n(new Error("Iconv decoding stream needs buffers as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r,this.encoding),n()}catch(e){n(e)}},i.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},i.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",function(e){t+=e}),this.on("end",function(){e(null,t)}),this}},function(e,t){t.read=function(e,t,n,r,i){var a,o,u=8*i-r-1,s=(1<<u)-1,f=s>>1,c=-7,l=n?i-1:0,d=n?-1:1,h=e[t+l];for(l+=d,a=h&(1<<-c)-1,h>>=-c,c+=u;c>0;a=256*a+e[t+l],l+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+l],l+=d,c-=8);if(0===a)a=1-f;else{if(a===s)return o?NaN:(h?-1:1)*(1/0);o+=Math.pow(2,r),a-=f}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,u,s,f=8*a-i-1,c=(1<<f)-1,l=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),t+=o+l>=1?d/s:d*Math.pow(2,1-l),t*s>=2&&(o++,s/=2),o+l>=c?(u=0,o=c):o+l>=1?(u=(t*s-1)*Math.pow(2,i),o+=l):(u=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&u,h+=p,u/=256,i-=8);for(o=o<<i|u,f+=i;f>0;e[n+h]=255&o,h+=p,o/=256,f-=8);e[n+h-p]|=128*g}},function(e,t,n){"use strict";var r=n(80),i=n(81),a=n(82),o=n(179);r(i,{getPolyfill:a,implementation:i,shim:o}),e.exports=i},function(e,t,n){"use strict";var r=n(80),i=n(82);e.exports=function(){var e=i();return r(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},function(e,t){"use strict";var n=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};n.writable=function(e){return n(e)&&e.writable!==!1&&"function"==typeof e._write&&"object"==typeof e._writableState},n.readable=function(e){return n(e)&&e.readable!==!1&&"function"==typeof e._read&&"object"==typeof e._readableState},n.duplex=function(e){return n.writable(e)&&n.readable(e)},n.transform=function(e){return n.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}},,function(e,t){e.exports=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]},function(e,t){e.exports=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]];
},function(e,t){e.exports=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]},function(e,t){e.exports={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]}},function(e,t){e.exports=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]},function(e,t){e.exports={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{autosize:{oneOf:[{enum:["pad","fit","fit-x","fit-y","none"]},{type:"object",properties:{type:{enum:["pad","fit","fit-x","fit-y","none"]},resize:{type:"boolean"},contains:{enum:["content","padding"]}},required:["type"],additionalProperties:!1}],default:"pad"},axis:{type:"object",properties:{orient:{enum:["top","bottom","left","right"]},scale:{type:"string"},format:{$ref:"#/refs/stringOrSignal"},minExtent:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},maxExtent:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},offset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},position:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},bandPosition:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},values:{$ref:"#/refs/arrayOrSignal"},zindex:{type:"number"},title:{$ref:"#/refs/stringOrSignal"},titlePadding:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleAlign:{oneOf:[{enum:["left","right","center"]},{$ref:"#/refs/alignValue"}]},titleAngle:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleX:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleY:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleBaseline:{oneOf:[{enum:["top","middle","bottom","alphabetic"]},{$ref:"#/refs/baselineValue"}]},titleColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},titleFont:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},titleFontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleFontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},titleLimit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},domain:{type:"boolean"},domainColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},domainWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},ticks:{type:"boolean"},tickCount:{$ref:"#/refs/tickCount"},tickColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},tickExtra:{$ref:"#/refs/numberOrSignal"},tickOffset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},tickRound:{oneOf:[{type:"boolean"},{$ref:"#/refs/booleanValue"}]},tickSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},tickWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},grid:{type:"boolean"},gridScale:{type:"string"},gridColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},gridDash:{oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/arrayValue"}]},gridOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},gridWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labels:{type:"boolean"},labelBound:{oneOf:[{type:"boolean"},{type:"number"}]},labelFlush:{oneOf:[{type:"boolean"},{type:"number"}]},labelFlushOffset:{type:"number"},labelOverlap:{$ref:"#/refs/labelOverlap"},labelAngle:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},labelFont:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},labelFontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelFontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},labelLimit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelPadding:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},encode:{type:"object",properties:{axis:{$ref:"#/defs/guideEncode"},ticks:{$ref:"#/defs/guideEncode"},labels:{$ref:"#/defs/guideEncode"},title:{$ref:"#/defs/guideEncode"},grid:{$ref:"#/defs/guideEncode"},domain:{$ref:"#/defs/guideEncode"}},additionalProperties:!1}},additionalProperties:!1,required:["orient","scale"]},background:{type:"string"},bind:{oneOf:[{type:"object",properties:{input:{enum:["checkbox"]},element:{$ref:"#/refs/element"},debounce:{type:"number"},name:{type:"string"}},required:["input"]},{type:"object",properties:{input:{enum:["radio","select"]},element:{$ref:"#/refs/element"},options:{type:"array"},debounce:{type:"number"},name:{type:"string"}},additionalProperties:!1,required:["input","options"]},{type:"object",properties:{input:{enum:["range"]},element:{$ref:"#/refs/element"},min:{type:"number"},max:{type:"number"},step:{type:"number"},debounce:{type:"number"},name:{type:"string"}},additionalProperties:!1,required:["input"]},{type:"object",properties:{input:{not:{enum:["checkbox","radio","range","select"]}},element:{$ref:"#/refs/element"},debounce:{type:"number"},name:{type:"string"}},additionalProperties:!0}]},dataFormat:{type:"object",anyOf:[{properties:{type:{enum:["json"]},parse:{oneOf:[{enum:["auto"]},{type:"object",additionalProperties:{oneOf:[{enum:["boolean","number","date","string"]},{type:"string",pattern:"^(date|utc):.*$"}]}}]},property:{type:"string"},copy:{type:"boolean"}},additionalProperties:!1},{properties:{type:{enum:["csv","tsv"]},parse:{oneOf:[{enum:["auto"]},{type:"object",additionalProperties:{oneOf:[{enum:["boolean","number","date","string"]},{type:"string",pattern:"^(date|utc):.*$"}]}}]}},additionalProperties:!1},{properties:{
type:{enum:["dsv"]},delimiter:{type:"string"},parse:{oneOf:[{enum:["auto"]},{type:"object",additionalProperties:{oneOf:[{enum:["boolean","number","date","string"]},{type:"string",pattern:"^(date|utc):.*$"}]}}]}},additionalProperties:!1},{oneOf:[{properties:{type:{enum:["topojson"]},feature:{type:"string"},property:{type:"string"}},additionalProperties:!1},{properties:{type:{enum:["topojson"]},mesh:{type:"string"},property:{type:"string"}},additionalProperties:!1}]}]},data:{title:"Input data set definition",type:"object",allOf:[{properties:{name:{type:"string"},transform:{type:"array",items:{$ref:"#/defs/transform"}},on:{$ref:"#/defs/onTrigger"}},required:["name"]},{anyOf:[{required:["name"]},{oneOf:[{properties:{source:{oneOf:[{type:"string"},{type:"array",items:{type:"string"},minItems:1}]}},required:["source"]},{properties:{values:{type:"array"},format:{$ref:"#/defs/dataFormat"}},required:["values"]},{properties:{url:{type:"string"},format:{$ref:"#/defs/dataFormat"}},required:["url"]}]}]}]},rule:{type:"object",properties:{test:{type:"string"}}},encodeEntry:{title:"Mark encode property set",type:"object",properties:{x:{$ref:"#/refs/numberValue"},x2:{$ref:"#/refs/numberValue"},xc:{$ref:"#/refs/numberValue"},width:{$ref:"#/refs/numberValue"},y:{$ref:"#/refs/numberValue"},y2:{$ref:"#/refs/numberValue"},yc:{$ref:"#/refs/numberValue"},height:{$ref:"#/refs/numberValue"},opacity:{$ref:"#/refs/numberValue"},fill:{$ref:"#/refs/colorValue"},fillOpacity:{$ref:"#/refs/numberValue"},stroke:{$ref:"#/refs/colorValue"},strokeWidth:{$ref:"#/refs/numberValue"},strokeOpacity:{$ref:"#/refs/numberValue"},strokeDash:{$ref:"#/refs/arrayValue"},strokeDashOffset:{$ref:"#/refs/numberValue"},cursor:{$ref:"#/refs/stringValue"},clip:{$ref:"#/refs/booleanValue"},size:{$ref:"#/refs/numberValue"},shape:{$ref:"#/refs/stringValue"},path:{$ref:"#/refs/stringValue"},innerRadius:{$ref:"#/refs/numberValue"},outerRadius:{$ref:"#/refs/numberValue"},startAngle:{$ref:"#/refs/numberValue"},endAngle:{$ref:"#/refs/numberValue"},interpolate:{$ref:"#/refs/stringValue"},tension:{$ref:"#/refs/numberValue"},orient:{$ref:"#/refs/orientValue"},url:{$ref:"#/refs/stringValue"},align:{$ref:"#/refs/alignValue"},baseline:{$ref:"#/refs/baselineValue"},text:{$ref:"#/refs/stringValue"},dir:{$ref:"#/refs/stringValue"},ellipsis:{$ref:"#/refs/stringValue"},limit:{$ref:"#/refs/numberValue"},dx:{$ref:"#/refs/numberValue"},dy:{$ref:"#/refs/numberValue"},radius:{$ref:"#/refs/numberValue"},theta:{$ref:"#/refs/numberValue"},angle:{$ref:"#/refs/numberValue"},font:{$ref:"#/refs/stringValue"},fontSize:{$ref:"#/refs/numberValue"},fontWeight:{$ref:"#/refs/fontWeightValue"},fontStyle:{$ref:"#/refs/stringValue"}},additionalProperties:!0},encode:{type:"object",patternProperties:{"^.+$":{$ref:"#/defs/encodeEntry"}},additionalProperties:!1},layout:{oneOf:[{type:"object",properties:{align:{oneOf:[{oneOf:[{enum:["all","each","none"]},{$ref:"#/refs/signal"}]},{type:"object",properties:{row:{oneOf:[{enum:["all","each","none"]},{$ref:"#/refs/signal"}]},column:{oneOf:[{enum:["all","each","none"]},{$ref:"#/refs/signal"}]}},additionalProperties:!1}]},bounds:{oneOf:[{enum:["full","flush"]},{$ref:"#/refs/signal"}]},center:{oneOf:[{$ref:"#/refs/booleanOrSignal"},{type:"object",properties:{row:{$ref:"#/refs/booleanOrSignal"},column:{$ref:"#/refs/booleanOrSignal"}},additionalProperties:!1}]},columns:{$ref:"#/refs/numberOrSignal"},padding:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"object",properties:{row:{$ref:"#/refs/numberOrSignal"},column:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]},offset:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"object",properties:{rowHeader:{$ref:"#/refs/numberOrSignal"},rowFooter:{$ref:"#/refs/numberOrSignal"},rowTitle:{$ref:"#/refs/numberOrSignal"},columnHeader:{$ref:"#/refs/numberOrSignal"},columnFooter:{$ref:"#/refs/numberOrSignal"},columnTitle:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]},headerBand:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"null"},{type:"object",properties:{row:{$ref:"#/refs/numberOrSignal"},column:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]},footerBand:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"null"},{type:"object",properties:{row:{$ref:"#/refs/numberOrSignal"},column:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]},titleBand:{oneOf:[{$ref:"#/refs/numberOrSignal"},{type:"null"},{type:"object",properties:{row:{$ref:"#/refs/numberOrSignal"},column:{$ref:"#/refs/numberOrSignal"}},additionalProperties:!1}]}}},{$ref:"#/refs/signal"}]},guideEncode:{type:"object",properties:{name:{type:"string"},interactive:{type:"boolean",default:!1},style:{$ref:"#/refs/style"}},patternProperties:{"^(?!interactive|name|style).+$":{$ref:"#/defs/encodeEntry"}},additionalProperties:!1},legend:{type:"object",properties:{size:{type:"string"},shape:{type:"string"},fill:{type:"string"},stroke:{type:"string"},opacity:{type:"string"},strokeDash:{type:"string"},type:{enum:["gradient","symbol"]},direction:{enum:["vertical","horizontal"]},orient:{enum:["none","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"right"},format:{$ref:"#/refs/stringOrSignal"},title:{$ref:"#/refs/stringOrSignal"},tickCount:{$ref:"#/refs/tickCount"},values:{$ref:"#/refs/arrayOrSignal"},zindex:{type:"number"},cornerRadius:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},fillColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},offset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},padding:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},strokeColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},strokeWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleAlign:{oneOf:[{enum:["left","right","center"]},{$ref:"#/refs/alignValue"}]},titleBaseline:{oneOf:[{enum:["top","middle","bottom","alphabetic"]},{$ref:"#/refs/baselineValue"}]},titleColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},titleFont:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},titleFontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titleFontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},titleLimit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},titlePadding:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},gradientLength:{$ref:"#/refs/numberOrSignal"},gradientThickness:{$ref:"#/refs/numberOrSignal"},gradientStrokeColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},gradientStrokeWidth:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},clipHeight:{$ref:"#/refs/numberOrSignal"},columns:{$ref:"#/refs/numberOrSignal"},columnPadding:{$ref:"#/refs/numberOrSignal"},rowPadding:{$ref:"#/refs/numberOrSignal"},gridAlign:{oneOf:[{enum:["all","each","none"]},{$ref:"#/refs/signal"}]},symbolFillColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},symbolOffset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},symbolSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},symbolStrokeColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},symbolStrokeWidth:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},symbolType:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},labelAlign:{oneOf:[{enum:["left","right","center"]},{$ref:"#/refs/alignValue"}]},labelBaseline:{oneOf:[{enum:["top","middle","bottom","alphabetic"]},{$ref:"#/refs/baselineValue"}]},labelColor:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},labelFont:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},labelFontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelFontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},labelLimit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelOffset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},labelOverlap:{$ref:"#/refs/labelOverlap"},encode:{type:"object",properties:{title:{$ref:"#/defs/guideEncode"},labels:{$ref:"#/defs/guideEncode"},legend:{$ref:"#/defs/guideEncode"},entries:{$ref:"#/defs/guideEncode"},symbols:{$ref:"#/defs/guideEncode"},gradient:{$ref:"#/defs/guideEncode"}},additionalProperties:!1}},additionalProperties:!1,anyOf:[{required:["size"]},{required:["shape"]},{required:["fill"]},{required:["stroke"]},{required:["opacity"]},{required:["strokeDash"]}]},mark:{type:"object",properties:{type:{$ref:"#/refs/marktype"},role:{type:"string"},name:{type:"string"},style:{$ref:"#/refs/style"},key:{type:"string"},clip:{$ref:"#/refs/markclip"},sort:{$ref:"#/refs/compare"},interactive:{$ref:"#/refs/booleanOrSignal"},encode:{$ref:"#/defs/encode"},transform:{type:"array",items:{$ref:"#/defs/transformMark"}},on:{$ref:"#/defs/onMarkTrigger"}},required:["type"]},markGroup:{allOf:[{properties:{type:{enum:["group"]}},required:["type"]},{$ref:"#/defs/mark"},{$ref:"#/defs/scope"},{type:"object",properties:{from:{oneOf:[{$ref:"#/refs/from"},{$ref:"#/refs/facet"}]}}}]},markVisual:{allOf:[{not:{properties:{type:{enum:["group"]}}}},{$ref:"#/defs/mark"},{type:"object",properties:{from:{$ref:"#/refs/from"}}}]},listener:{oneOf:[{$ref:"#/refs/signal"},{type:"object",properties:{scale:{type:"string"}},required:["scale"]},{$ref:"#/defs/stream"}]},onEvents:{type:"array",items:{allOf:[{type:"object",properties:{events:{oneOf:[{$ref:"#/refs/selector"},{$ref:"#/defs/listener"},{type:"array",minItems:1,items:{$ref:"#/defs/listener"}}]},force:{type:"boolean"}},required:["events"]},{oneOf:[{type:"object",properties:{encode:{type:"string"}},required:["encode"]},{type:"object",properties:{update:{oneOf:[{$ref:"#/refs/exprString"},{$ref:"#/refs/expr"},{$ref:"#/refs/signal"},{type:"object",properties:{value:{}},required:["value"]}]}},required:["update"]}]}]}},onTrigger:{type:"array",items:{type:"object",properties:{trigger:{$ref:"#/refs/exprString"},insert:{$ref:"#/refs/exprString"},remove:{oneOf:[{type:"boolean"},{$ref:"#/refs/exprString"}]},toggle:{$ref:"#/refs/exprString"},modify:{$ref:"#/refs/exprString"},values:{$ref:"#/refs/exprString"}},required:["trigger"]}},onMarkTrigger:{type:"array",items:{type:"object",properties:{trigger:{$ref:"#/refs/exprString"},modify:{$ref:"#/refs/exprString"},values:{$ref:"#/refs/exprString"}},required:["trigger"]}},padding:{oneOf:[{type:"number"},{type:"object",properties:{top:{type:"number"},bottom:{type:"number"},left:{type:"number"},right:{type:"number"}},additionalProperties:!1}]},projection:{type:"object",properties:{name:{type:"string"},type:{$ref:"#/refs/stringOrSignal"},clipAngle:{$ref:"#/refs/numberOrSignal"},clipExtent:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]}}]},scale:{$ref:"#/refs/numberOrSignal"},translate:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]},center:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]},rotate:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:3}]},parallels:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]},precision:{$ref:"#/refs/numberOrSignal"},pointRadius:{$ref:"#/refs/numberOrSignal"},fit:{oneOf:[{type:"object"},{type:"array"}]},extent:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]},minItems:2,maxItems:2}]},size:{oneOf:[{$ref:"#/refs/signal"},{type:"array",items:{$ref:"#/refs/numberOrSignal"},minItems:2,maxItems:2}]}},additionalProperties:!0,required:["name"]},scale:{title:"Scale mapping",type:"object",allOf:[{properties:{name:{type:"string"},type:{type:"string",default:"linear"},domain:{oneOf:[{type:"array",items:{oneOf:[{type:"null"},{type:"string"},{type:"number"},{type:"boolean"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/scaleData"},{$ref:"#/refs/signal"}]},domainMin:{$ref:"#/refs/numberOrSignal"},domainMax:{$ref:"#/refs/numberOrSignal"},domainMid:{$ref:"#/refs/numberOrSignal"},domainRaw:{oneOf:[{type:"null"},{type:"array"},{$ref:"#/refs/signal"}]},reverse:{$ref:"#/refs/booleanOrSignal"},round:{$ref:"#/refs/booleanOrSignal"}},required:["name"]},{oneOf:[{properties:{type:{enum:["ordinal"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1},{$ref:"#/refs/scaleData"}]}},required:["type"]},{properties:{type:{enum:["band"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{step:{$ref:"#/refs/numberOrSignal"}},required:["step"],additionalProperties:!1}]},padding:{$ref:"#/refs/numberOrSignal"},paddingInner:{$ref:"#/refs/numberOrSignal"},paddingOuter:{$ref:"#/refs/numberOrSignal"},align:{$ref:"#/refs/numberOrSignal"}},required:["type"]},{properties:{type:{enum:["point"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{step:{$ref:"#/refs/numberOrSignal"}},required:["step"],additionalProperties:!1}]},padding:{$ref:"#/refs/numberOrSignal"},paddingOuter:{$ref:"#/refs/numberOrSignal"},align:{$ref:"#/refs/numberOrSignal"}},required:["type"]},{properties:{type:{enum:["sequential"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},clamp:{$ref:"#/refs/booleanOrSignal"}},required:["type","range"]},{properties:{type:{enum:["time","utc"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},clamp:{$ref:"#/refs/booleanOrSignal"},padding:{type:"number"},nice:{oneOf:[{type:"boolean"},{type:"string",enum:["millisecond","second","minute","hour","day","week","month","year"]},{type:"object",properties:{interval:{oneOf:[{type:"string",enum:["millisecond","second","minute","hour","day","week","month","year"]},{$ref:"#/refs/signal"}]},step:{$ref:"#/refs/numberOrSignal"}},required:["interval"]},{$ref:"#/refs/signal"}]}},required:["type"]},{properties:{type:{enum:["identity"]},nice:{$ref:"#/refs/booleanOrSignal"}},required:["type"]},{description:"Discretizing scales",properties:{type:{enum:["quantile","quantize","threshold","bin-ordinal"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},nice:{oneOf:[{type:"boolean"},{type:"number"},{$ref:"#/refs/signal"}]},zero:{$ref:"#/refs/booleanOrSignal"}},required:["type"]},{description:"Default numeric scale",not:{properties:{type:{enum:["ordinal","band","point","quantile","quantize","threshold","sequential","pow","log","time","utc","identity","bin-ordinal","bin-linear"]}},required:["type"]},properties:{range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},interpolate:{$ref:"#/refs/scaleInterpolate"},clamp:{$ref:"#/refs/booleanOrSignal"},padding:{type:"number"},nice:{oneOf:[{type:"boolean"},{type:"number"},{$ref:"#/refs/signal"}]},zero:{$ref:"#/refs/booleanOrSignal"}}},{properties:{type:{enum:["log"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},interpolate:{$ref:"#/refs/scaleInterpolate"},base:{$ref:"#/refs/numberOrSignal"},clamp:{$ref:"#/refs/booleanOrSignal"},padding:{type:"number"},nice:{oneOf:[{type:"boolean"},{type:"number"},{$ref:"#/refs/signal"}]},zero:{$ref:"#/refs/booleanOrSignal"}},required:["type"]},{properties:{type:{enum:["pow"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},interpolate:{$ref:"#/refs/scaleInterpolate"},clamp:{$ref:"#/refs/booleanOrSignal"},exponent:{$ref:"#/refs/numberOrSignal"},padding:{type:"number"},nice:{oneOf:[{type:"boolean"},{type:"number"},{$ref:"#/refs/signal"}]},zero:{$ref:"#/refs/booleanOrSignal"}},required:["type"]},{properties:{type:{enum:["bin-linear"]},range:{oneOf:[{enum:["width","height","symbol","category","ordinal","ramp","diverging","heatmap"]},{type:"array",items:{oneOf:[{type:"null"},{type:"boolean"},{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"object",properties:{scheme:{$ref:"#/refs/stringOrSignal"},count:{$ref:"#/refs/numberOrSignal"},extent:{oneOf:[{type:"array",items:{$ref:"#/refs/numberOrSignal"},numItems:2},{$ref:"#/refs/signal"}]}},required:["scheme"],additionalProperties:!1}]},interpolate:{$ref:"#/refs/scaleInterpolate"}},required:["type"]}]}]},scope:{type:"object",properties:{encode:{$ref:"#/defs/encode"},layout:{$ref:"#/defs/layout"},signals:{type:"array",items:{$ref:"#/defs/signal"}},data:{type:"array",items:{$ref:"#/defs/data"}},scales:{type:"array",items:{$ref:"#/defs/scale"}},projections:{type:"array",items:{$ref:"#/defs/projection"}},axes:{type:"array",items:{$ref:"#/defs/axis"}},legends:{type:"array",items:{$ref:"#/defs/legend"}},title:{$ref:"#/defs/title"},marks:{type:"array",items:{oneOf:[{$ref:"#/defs/markGroup"},{$ref:"#/defs/markVisual"}]}}}},signal:{oneOf:[{$ref:"#/defs/signalPush"},{$ref:"#/defs/signalNew"}]},signalName:{type:"string",not:{enum:["parent","datum","event","item"]}},signalNew:{type:"object",properties:{name:{$ref:"#/defs/signalName"},description:{type:"string"},value:{},react:{type:"boolean",default:!0},update:{$ref:"#/refs/exprString"},on:{$ref:"#/defs/onEvents"},bind:{$ref:"#/defs/bind"}},additionalProperties:!1,required:["name"]},signalPush:{type:"object",properties:{name:{$ref:"#/defs/signalName"},push:{enum:["outer"]},description:{type:"string"},on:{$ref:"#/defs/onEvents"}},additionalProperties:!1,required:["name","push"]},streamParams:{properties:{between:{type:"array",minItems:2,maxItems:2,items:{$ref:"#/defs/stream"}},marktype:{type:"string"},markname:{type:"string"},filter:{oneOf:[{$ref:"#/refs/exprString"},{type:"array",minItems:1,items:{$ref:"#/refs/exprString"}}]},throttle:{type:"number"},debounce:{type:"number"},consume:{type:"boolean"}}},streamEvents:{properties:{source:{type:"string"},type:{type:"string"}},required:["type"]},stream:{title:"Input event stream definition",type:"object",allOf:[{$ref:"#/defs/streamParams"},{oneOf:[{$ref:"#/defs/streamEvents"},{type:"object",properties:{stream:{$ref:"#/defs/stream"}},required:["stream"]},{type:"object",properties:{merge:{type:"array",minItems:1,items:{$ref:"#/defs/stream"}}},required:["merge"]}]}]},titleEncode:{type:"object",patternProperties:{"^(?!interactive|name|style).+$":{$ref:"#/defs/encodeEntry"}},additionalProperties:!1},title:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"},orient:{enum:["none","left","right","top","bottom"],default:"top"},anchor:{oneOf:[{enum:["start","middle","end"],default:"middle"},{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["start","middle","end"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["start","middle","end"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}]},style:{$ref:"#/refs/style"},text:{$ref:"#/refs/stringOrSignal"},zindex:{type:"number"},interactive:{type:"boolean"},color:{oneOf:[{type:"null"},{type:"string"},{$ref:"#/refs/colorValue"}]},font:{oneOf:[{type:"string"},{$ref:"#/refs/stringValue"}]},fontSize:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},fontWeight:{oneOf:[{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]},{$ref:"#/refs/fontWeightValue"}]},offset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},frame:{oneOf:[{enum:["group","bounds"]},{$ref:"#/refs/stringValue"}]},angle:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},baseline:{oneOf:[{enum:["top","middle","bottom","alphabetic"]},{$ref:"#/refs/baselineValue"}]},limit:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},encode:{$ref:"#/defs/titleEncode"}},required:["text"],additionalProperties:!1}]},transform:{oneOf:[{$ref:"#/defs/aggregateTransform"},{$ref:"#/defs/binTransform"},{$ref:"#/defs/collectTransform"},{$ref:"#/defs/countpatternTransform"},{$ref:"#/defs/crossTransform"},{$ref:"#/defs/densityTransform"},{$ref:"#/defs/extentTransform"},{$ref:"#/defs/filterTransform"},{$ref:"#/defs/flattenTransform"},{$ref:"#/defs/foldTransform"},{$ref:"#/defs/formulaTransform"},{$ref:"#/defs/imputeTransform"},{$ref:"#/defs/joinaggregateTransform"},{$ref:"#/defs/lookupTransform"},{$ref:"#/defs/pivotTransform"},{$ref:"#/defs/projectTransform"},{$ref:"#/defs/sampleTransform"},{$ref:"#/defs/sequenceTransform"},{$ref:"#/defs/windowTransform"},{$ref:"#/defs/identifierTransform"},{$ref:"#/defs/linkpathTransform"},{$ref:"#/defs/pieTransform"},{$ref:"#/defs/stackTransform"},{$ref:"#/defs/contourTransform"},{$ref:"#/defs/geojsonTransform"},{$ref:"#/defs/geopathTransform"},{$ref:"#/defs/geopointTransform"},{$ref:"#/defs/geoshapeTransform"},{$ref:"#/defs/graticuleTransform"},{$ref:"#/defs/forceTransform"},{$ref:"#/defs/nestTransform"},{$ref:"#/defs/packTransform"},{$ref:"#/defs/partitionTransform"},{$ref:"#/defs/stratifyTransform"},{$ref:"#/defs/treeTransform"},{$ref:"#/defs/treelinksTransform"},{$ref:"#/defs/treemapTransform"},{$ref:"#/defs/voronoiTransform"},{$ref:"#/defs/wordcloudTransform"},{$ref:"#/defs/crossfilterTransform"},{$ref:"#/defs/resolvefilterTransform"}]},transformMark:{oneOf:[{$ref:"#/defs/binTransform"},{$ref:"#/defs/collectTransform"},{$ref:"#/defs/extentTransform"},{$ref:"#/defs/formulaTransform"},{$ref:"#/defs/joinaggregateTransform"},{$ref:"#/defs/lookupTransform"},{$ref:"#/defs/sampleTransform"},{$ref:"#/defs/windowTransform"},{$ref:"#/defs/identifierTransform"},{$ref:"#/defs/linkpathTransform"},{$ref:"#/defs/pieTransform"},{$ref:"#/defs/stackTransform"},{$ref:"#/defs/geojsonTransform"},{$ref:"#/defs/geopathTransform"},{$ref:"#/defs/geopointTransform"},{$ref:"#/defs/geoshapeTransform"},{$ref:"#/defs/forceTransform"},{$ref:"#/defs/packTransform"},{$ref:"#/defs/partitionTransform"},{$ref:"#/defs/stratifyTransform"},{$ref:"#/defs/treeTransform"},{$ref:"#/defs/treemapTransform"},{$ref:"#/defs/voronoiTransform"},{$ref:"#/defs/wordcloudTransform"},{$ref:"#/defs/crossfilterTransform"},{$ref:"#/defs/resolvefilterTransform"}]},aggregateTransform:{type:"object",properties:{type:{enum:["aggregate"]},signal:{type:"string"},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},ops:{oneOf:[{type:"array",items:{anyOf:[{enum:["values","count","__count__","missing","valid","sum","mean","average","variance","variancep","stdev","stdevp","stderr","distinct","ci0","ci1","median","q1","q3","argmin","argmax","min","max"]},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"},{type:"null"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]},drop:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:!0},cross:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type"]},binTransform:{type:"object",properties:{type:{enum:["bin"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},anchor:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},maxbins:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:20},base:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:10},divide:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:[5,2]},extent:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},step:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},steps:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},minstep:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},nice:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:!0},name:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["bin0","bin1"]}},additionalProperties:!1,required:["type","field","extent"]},collectTransform:{type:"object",properties:{type:{enum:["collect"]},signal:{type:"string"},sort:{$ref:"#/refs/compare"}},additionalProperties:!1,required:["type"]},countpatternTransform:{type:"object",properties:{type:{enum:["countpattern"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},case:{anyOf:[{enum:["upper","lower","mixed"]},{$ref:"#/refs/signal"}],default:"mixed"},pattern:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:'[\\w"]+'},stopwords:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["text","count"]}},additionalProperties:!1,required:["type","field"]},crossTransform:{type:"object",properties:{type:{enum:["cross"]},signal:{type:"string"},filter:{$ref:"#/refs/exprString"},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["a","b"]}},additionalProperties:!1,required:["type"]},densityTransform:{type:"object",properties:{type:{enum:["density"]},signal:{type:"string"},extent:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},steps:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:100},method:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"pdf"},distribution:{oneOf:[{type:"object",properties:{function:{enum:["normal"]},mean:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},stdev:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["function"]},{type:"object",properties:{function:{enum:["uniform"]},min:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},max:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["function"]},{type:"object",properties:{function:{enum:["kde"]},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},from:{type:"string"},bandwidth:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["function","field"]},{type:"object",properties:{function:{enum:["mixture"]},distributions:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}]},weights:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["function"]}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:["value","density"]}},additionalProperties:!1,required:["type"]},extentTransform:{type:"object",properties:{type:{enum:["extent"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type","field"]},filterTransform:{type:"object",properties:{type:{enum:["filter"]},signal:{type:"string"},expr:{$ref:"#/refs/exprString"}},additionalProperties:!1,required:["type","expr"]},flattenTransform:{type:"object",properties:{type:{enum:["flatten"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","fields"]},foldTransform:{type:"object",properties:{type:{enum:["fold"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"
}],maxItems:2,minItems:2,default:["key","value"]}},additionalProperties:!1,required:["type","fields"]},formulaTransform:{type:"object",properties:{type:{enum:["formula"]},signal:{type:"string"},expr:{$ref:"#/refs/exprString"},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]},initonly:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","expr","as"]},imputeTransform:{type:"object",properties:{type:{enum:["impute"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},keyvals:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}]},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},method:{anyOf:[{enum:["value","mean","median","max","min"]},{$ref:"#/refs/signal"}],default:"value"},value:{}},additionalProperties:!1,required:["type","field","key"]},joinaggregateTransform:{type:"object",properties:{type:{enum:["joinaggregate"]},signal:{type:"string"},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"},{type:"null"}]}},{$ref:"#/refs/signal"}]},ops:{oneOf:[{type:"array",items:{anyOf:[{enum:["values","count","__count__","missing","valid","sum","mean","average","variance","variancep","stdev","stdevp","stderr","distinct","ci0","ci1","median","q1","q3","argmin","argmax","min","max"]},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type"]},lookupTransform:{type:"object",properties:{type:{enum:["lookup"]},signal:{type:"string"},from:{type:"string"},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},values:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},default:{}},additionalProperties:!1,required:["type","from","key","fields"]},pivotTransform:{type:"object",properties:{type:{enum:["pivot"]},signal:{type:"string"},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},value:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},op:{anyOf:[{enum:["values","count","__count__","missing","valid","sum","mean","average","variance","variancep","stdev","stdevp","stderr","distinct","ci0","ci1","median","q1","q3","argmin","argmax","min","max"]},{$ref:"#/refs/signal"}],default:"sum"},limit:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type","field","value"]},projectTransform:{type:"object",properties:{type:{enum:["project"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type"]},sampleTransform:{type:"object",properties:{type:{enum:["sample"]},signal:{type:"string"},size:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1e3}},additionalProperties:!1,required:["type"]},sequenceTransform:{type:"object",properties:{type:{enum:["sequence"]},signal:{type:"string"},start:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},stop:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},step:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["type","start","stop"]},windowTransform:{type:"object",properties:{type:{enum:["window"]},signal:{type:"string"},sort:{$ref:"#/refs/compare"},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},ops:{oneOf:[{type:"array",items:{anyOf:[{enum:["row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","values","count","__count__","missing","valid","sum","mean","average","variance","variancep","stdev","stdevp","stderr","distinct","ci0","ci1","median","q1","q3","argmin","argmax","min","max"]},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},params:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"},{type:"null"}]}},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}]},frame:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{type:"null"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:[null,0]},ignorePeers:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type"]},identifierTransform:{type:"object",properties:{type:{enum:["identifier"]},signal:{type:"string"},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","as"]},linkpathTransform:{type:"object",properties:{type:{enum:["linkpath"]},signal:{type:"string"},sourceX:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"source.x"},sourceY:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"source.y"},targetX:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"target.x"},targetY:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"target.y"},orient:{anyOf:[{enum:["horizontal","vertical","radial"]},{$ref:"#/refs/signal"}],default:"vertical"},shape:{anyOf:[{enum:["line","arc","curve","diagonal","orthogonal"]},{$ref:"#/refs/signal"}],default:"line"},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"path"}},additionalProperties:!1,required:["type"]},pieTransform:{type:"object",properties:{type:{enum:["pie"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},startAngle:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},endAngle:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:6.283185307179586},sort:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["startAngle","endAngle"]}},additionalProperties:!1,required:["type"]},stackTransform:{type:"object",properties:{type:{enum:["stack"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},groupby:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},sort:{$ref:"#/refs/compare"},offset:{anyOf:[{enum:["zero","center","normalize"]},{$ref:"#/refs/signal"}],default:"zero"},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["y0","y1"]}},additionalProperties:!1,required:["type"]},contourTransform:{type:"object",properties:{type:{enum:["contour"]},signal:{type:"string"},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},values:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},x:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},y:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},cellSize:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},bandwidth:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},count:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},smooth:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},thresholds:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","size"]},geojsonTransform:{type:"object",properties:{type:{enum:["geojson"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},geojson:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type"]},geopathTransform:{type:"object",properties:{type:{enum:["geopath"]},signal:{type:"string"},projection:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},pointRadius:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"path"}},additionalProperties:!1,required:["type"]},geopointTransform:{type:"object",properties:{type:{enum:["geopoint"]},signal:{type:"string"},projection:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:["x","y"]}},additionalProperties:!1,required:["type","projection","fields"]},geoshapeTransform:{type:"object",properties:{type:{enum:["geoshape"]},signal:{type:"string"},projection:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}],default:"datum"},pointRadius:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"shape"}},additionalProperties:!1,required:["type"]},graticuleTransform:{type:"object",properties:{type:{enum:["graticule"]},signal:{type:"string"},extent:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},extentMajor:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},extentMinor:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},step:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},stepMajor:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:[90,360]},stepMinor:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:[10,10]},precision:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:2.5}},additionalProperties:!1,required:["type"]},forceTransform:{type:"object",properties:{type:{enum:["force"]},signal:{type:"string"},static:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},restart:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},iterations:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:300},alpha:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1},alphaMin:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.001},alphaTarget:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},velocityDecay:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.4},forces:{type:"array",items:{oneOf:[{type:"object",properties:{force:{enum:["center"]},x:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},y:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["collide"]},radius:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.7},iterations:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["nbody"]},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:-30},theta:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.9},distanceMin:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1},distanceMax:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["link"]},links:{type:"string"},id:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},distance:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:30},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},iterations:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["x"]},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},x:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["force"]},{type:"object",properties:{force:{enum:["y"]},strength:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},y:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["force"]}]}},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:["x","y","vx","vy"]}},additionalProperties:!1,required:["type"]},nestTransform:{type:"object",properties:{type:{enum:["nest"]},signal:{type:"string"},keys:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},generate:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type"]},packTransform:{type:"object",properties:{type:{enum:["pack"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},sort:{$ref:"#/refs/compare"},padding:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},radius:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:3,minItems:3,default:["x","y","r","depth","children"]}},additionalProperties:!1,required:["type"]},partitionTransform:{type:"object",properties:{type:{enum:["partition"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},sort:{$ref:"#/refs/compare"},padding:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},round:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:4,minItems:4,default:["x0","y0","x1","y1","depth","children"]}},additionalProperties:!1,required:["type"]},stratifyTransform:{type:"object",properties:{type:{enum:["stratify"]},signal:{type:"string"},key:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},parentKey:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},additionalProperties:!1,required:["type","key","parentKey"]},treeTransform:{type:"object",properties:{type:{enum:["tree"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},sort:{$ref:"#/refs/compare"},method:{anyOf:[{enum:["tidy","cluster"]},{$ref:"#/refs/signal"}],default:"tidy"},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},nodeSize:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:4,minItems:4,default:["x","y","depth","children"]}},additionalProperties:!1,required:["type"]},treelinksTransform:{type:"object",properties:{type:{enum:["treelinks"]},signal:{type:"string"}},additionalProperties:!1,required:["type"]},treemapTransform:{type:"object",properties:{type:{enum:["treemap"]},signal:{type:"string"},field:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},sort:{$ref:"#/refs/compare"},method:{anyOf:[{enum:["squarify","resquarify","binary","dice","slice","slicedice"]},{$ref:"#/refs/signal"}],default:"squarify"},padding:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingInner:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingOuter:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingTop:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingRight:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingBottom:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},paddingLeft:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},ratio:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}],default:1.618033988749895},round:{anyOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:4,minItems:4,default:["x0","y0","x1","y1","depth","children"]}},additionalProperties:!1,required:["type"]},voronoiTransform:{type:"object",properties:{type:{enum:["voronoi"]},signal:{type:"string"},x:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},y:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},extent:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2,default:[[-1e5,-1e5],[1e5,1e5]]},as:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"path"}},additionalProperties:!1,required:["type","x","y"]},wordcloudTransform:{type:"object",properties:{type:{enum:["wordcloud"]},signal:{type:"string"},size:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:2,minItems:2},font:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:"sans-serif"},fontStyle:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:"normal"},fontWeight:{anyOf:[{type:"string"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:"normal"},fontSize:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}],default:14},fontSizeRange:{oneOf:[{type:"array",items:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"},{type:"null"}],default:[10,50]},rotate:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},text:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]},spiral:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]},padding:{anyOf:[{type:"number"},{$ref:"#/refs/signal"},{$ref:"#/refs/expr"},{$ref:"#/refs/paramField"}]},as:{oneOf:[{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],maxItems:7,minItems:7,default:["x","y","font","fontSize","fontStyle","fontWeight","angle"]}},additionalProperties:!1,required:["type"]},crossfilterTransform:{type:"object",properties:{type:{enum:["crossfilter"]},signal:{type:"string"},fields:{oneOf:[{type:"array",items:{oneOf:[{$ref:"#/refs/scaleField"},{$ref:"#/refs/paramField"},{$ref:"#/refs/expr"}]}},{$ref:"#/refs/signal"}]},query:{oneOf:[{type:"array",items:{}},{$ref:"#/refs/signal"}]}},additionalProperties:!1,required:["type","fields","query"]},resolvefilterTransform:{type:"object",properties:{type:{enum:["resolvefilter"]},signal:{type:"string"},ignore:{anyOf:[{type:"number"},{$ref:"#/refs/signal"}]},filter:{}},additionalProperties:!1,required:["type","ignore","filter"]}},refs:{labelOverlap:{oneOf:[{type:"boolean"},{enum:["parity","greedy"],type:"string"}]},tickCount:{oneOf:[{type:"number"},{type:"string",enum:["millisecond","second","minute","hour","day","week","month","year"]},{type:"object",properties:{interval:{oneOf:[{type:"string",enum:["millisecond","second","minute","hour","day","week","month","year"]},{$ref:"#/refs/signal"}]},step:{$ref:"#/refs/numberOrSignal"}},required:["interval"]},{$ref:"#/refs/signal"}]},element:{type:"string"},paramField:{type:"object",properties:{field:{type:"string"}},additionalProperties:!1,required:["field"]},field:{title:"FieldRef",oneOf:[{type:"string"},{oneOf:[{$ref:"#/refs/signal"},{type:"object",properties:{datum:{$ref:"#/refs/field"}},required:["datum"],additionalProperties:!1},{type:"object",properties:{group:{$ref:"#/refs/field"},level:{type:"number"}},required:["group"],additionalProperties:!1},{type:"object",properties:{parent:{$ref:"#/refs/field"},level:{type:"number"}},required:["parent"],additionalProperties:!1}]}]},scale:{$ref:"#/refs/field"},stringModifiers:{properties:{scale:{$ref:"#/refs/scale"}}},numberModifiers:{properties:{exponent:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},mult:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},offset:{oneOf:[{type:"number"},{$ref:"#/refs/numberValue"}]},round:{type:"boolean",default:!1},scale:{$ref:"#/refs/scale"},band:{type:["number","boolean"]},extra:{type:"boolean"}}},value:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{oneOf:[{type:{}},{type:"null"}]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{oneOf:[{type:{}},{type:"null"}]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},numberValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/numberModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"number"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/numberModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"number"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},stringValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"string"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"string"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},booleanValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"boolean"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"boolean"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},arrayValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"array"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{type:"array"}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},nullableStringValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{oneOf:[{type:"string"},{type:"null"}]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{oneOf:[{type:"string"},{type:"null"}]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},fontWeightValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:[null,"normal","bold","lighter","bolder","100","200","300","400","500","600","700","800","900",100,200,300,400,500,600,700,800,900]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},alignValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["left","right","center"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["left","right","center"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},baselineValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["top","middle","bottom","alphabetic"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["top","middle","bottom","alphabetic"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},orientValue:{oneOf:[{type:"array",items:{allOf:[{$ref:"#/defs/rule"},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["horizontal","vertical"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]}},{type:"object",allOf:[{$ref:"#/refs/stringModifiers"},{anyOf:[{oneOf:[{$ref:"#/refs/signal"},{properties:{value:{enum:["horizontal","vertical"]}},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{range:{type:["number","boolean"]}},required:["range"]}]},{required:["scale","value"]},{required:["scale","band"]},{required:["offset"]}]}]}]},colorRGB:{type:"object",properties:{r:{$ref:"#/refs/numberValue"},g:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["r","g","b"]},colorHSL:{type:"object",properties:{h:{$ref:"#/refs/numberValue"},s:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","s","l"]},colorLAB:{type:"object",properties:{l:{$ref:"#/refs/numberValue"},a:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["l","a","b"]},colorHCL:{type:"object",properties:{h:{$ref:"#/refs/numberValue"},c:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","c","l"]},colorValue:{title:"ColorRef",oneOf:[{$ref:"#/refs/nullableStringValue"},{type:"object",properties:{gradient:{$ref:"#/refs/scale"}},additionalProperties:!1,required:["gradient"]},{type:"object",properties:{color:{
oneOf:[{$ref:"#/refs/colorRGB"},{$ref:"#/refs/colorHSL"},{$ref:"#/refs/colorLAB"},{$ref:"#/refs/colorHCL"}]}},additionalProperties:!1,required:["color"]}]},expr:{title:"ExpressionRef",type:"object",properties:{expr:{type:"string"}},required:["expr"]},exprString:{title:"Expression String",type:"string"},compare:{oneOf:[{type:"object",properties:{field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},order:{$ref:"#/refs/sortOrder"}}},{type:"object",properties:{field:{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/refs/signal"}]}},order:{type:"array",items:{$ref:"#/refs/sortOrder"}}}}]},from:{type:"object",properties:{data:{type:"string"}},additionalProperties:!1},facet:{type:"object",properties:{data:{type:"string"},facet:{oneOf:[{type:"object",properties:{name:{type:"string"},data:{type:"string"},field:{type:"string"}},additionalProperties:!1,required:["name","data","field"]},{type:"object",properties:{name:{type:"string"},data:{type:"string"},groupby:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},aggregate:{type:"object",properties:{cross:{type:"boolean"},fields:{type:"array",items:{type:"string"}},ops:{type:"array",items:{type:"string"}},as:{type:"array",items:{type:"string"}}}}},additionalProperties:!1,required:["name","data","groupby"]}]}},additionalProperties:!1,required:["facet"]},markclip:{oneOf:[{$ref:"#/refs/booleanOrSignal"},{type:"object",properties:{path:{$ref:"#/refs/stringOrSignal"}},required:["path"],additionalProperties:!1},{type:"object",properties:{sphere:{$ref:"#/refs/stringOrSignal"}},required:["sphere"],additionalProperties:!1}]},style:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},marktype:{title:"Mark Type definition",type:"string"},sortOrder:{oneOf:[{enum:["ascending","descending"]},{$ref:"#/refs/signal"}]},scaleField:{$ref:"#/refs/stringOrSignal"},scaleInterpolate:{oneOf:[{type:"string"},{$ref:"#/refs/signal"},{type:"object",properties:{type:{$ref:"#/refs/stringOrSignal"},gamma:{$ref:"#/refs/numberOrSignal"}},required:["type"]}]},scaleData:{oneOf:[{type:"object",properties:{data:{type:"string"},field:{$ref:"#/refs/scaleField"},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{field:{$ref:"#/refs/scaleField"},op:{$ref:"#/refs/scaleField"},order:{$ref:"#/refs/sortOrder"}},additionalProperties:!1}]}},required:["data","field"],additionalProperties:!1},{type:"object",properties:{data:{type:"string"},fields:{type:"array",items:{$ref:"#/refs/scaleField"},minItems:1},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{op:{enum:["count"]},order:{$ref:"#/refs/sortOrder"}},additionalProperties:!1}]}},required:["data","fields"],additionalProperties:!1},{type:"object",properties:{fields:{type:"array",items:{oneOf:[{type:"object",properties:{data:{type:"string"},field:{$ref:"#/refs/scaleField"}},required:["data","field"],additionalProperties:!1},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"}]}},{$ref:"#/refs/signal"}]},minItems:1},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{op:{enum:["count"]},order:{$ref:"#/refs/sortOrder"}},additionalProperties:!1}]}},required:["fields"],additionalProperties:!1}]},selector:{title:"Event Selector String",type:"string"},signal:{title:"SignalRef",type:"object",properties:{signal:{type:"string"}},required:["signal"]},arrayOrSignal:{oneOf:[{type:"array"},{$ref:"#/refs/signal"}]},booleanOrSignal:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},numberOrSignal:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},stringOrSignal:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},type:"object",allOf:[{$ref:"#/defs/scope"},{properties:{$schema:{type:"string",format:"uri"},usermeta:{type:"object"},config:{type:"object"},description:{type:"string"},width:{type:"number"},height:{type:"number"},padding:{$ref:"#/defs/padding"},autosize:{$ref:"#/defs/autosize"},background:{$ref:"#/defs/background"}}}]}},function(e,t){"use strict";var n=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,r=/-[a-z\u00E0-\u00F6\u00F8-\u00FE]/g;e.exports=t=function(e){return e.replace(n,function(e){return"-"+e.toLowerCase()})},t.reverse=function(e){return e.replace(r,function(e){return e.slice(1).toUpperCase()})}},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(202),a=n(203),o=n(204),u=n(205),s=n(206);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=u,r.prototype.set=s,e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(210),a=n(211),o=n(212),u=n(213),s=n(214);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=u,r.prototype.set=s,e.exports=r},function(e,t,n){var r=n(87),i=n(44),a=r(i,"Map");e.exports=a},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var i=n(215),a=n(216),o=n(217),u=n(218),s=n(219);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=u,r.prototype.set=s,e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}e.exports=n},function(e,t,n){function r(e,t){t=i(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[a(t[n++])];return n&&n==r?e:void 0}var i=n(197),a=n(223);e.exports=r},function(e,t,n){function r(e){if(!o(e)||a(e))return!1;var t=i(e)?p:f;return t.test(u(e))}var i=n(227),a=n(209),o=n(88),u=n(224),s=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,d=c.toString,h=l.hasOwnProperty,p=RegExp("^"+d.call(h).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(o(e))return a(e,r)+"";if(u(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var i=n(43),a=n(193),o=n(45),u=n(46),s=1/0,f=i?i.prototype:void 0,c=f?f.toString:void 0;e.exports=r},function(e,t,n){function r(e,t){return i(e)?e:a(e,t)?[e]:o(u(e))}var i=n(45),a=n(207),o=n(222),u=n(230);e.exports=r},function(e,t,n){var r=n(44),i=r["__core-js_shared__"];e.exports=i},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function r(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=u.call(e);return r&&(t?e[s]=n:delete e[s]),i}var i=n(43),a=Object.prototype,o=a.hasOwnProperty,u=a.toString,s=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(24);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(i){var n=t[e];return n===a?void 0:n}return u.call(t,e)?t[e]:void 0}var i=n(24),a="__lodash_hash_undefined__",o=Object.prototype,u=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return i?void 0!==t[e]:o.call(t,e)}var i=n(24),a=Object.prototype,o=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?a:t,this}var i=n(24),a="__lodash_hash_undefined__";e.exports=r},function(e,t,n){function r(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(u.test(e)||!o.test(e)||null!=t&&e in Object(t))}var i=n(45),a=n(46),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return!!a&&a in e}var i=n(198),a=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():o.call(t,n,1),--this.size,!0}var i=n(22),a=Array.prototype,o=a.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}var i=n(22);e.exports=r},function(e,t,n){function r(e){return i(this.__data__,e)>-1}var i=n(22);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var i=n(22);e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new i,map:new(o||a),string:new i}}var i=n(189),a=n(190),o=n(191);e.exports=r},function(e,t,n){function r(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}var i=n(23);e.exports=r},function(e,t,n){function r(e){return i(this,e).get(e)}var i=n(23);e.exports=r},function(e,t,n){function r(e){return i(this,e).has(e)}var i=n(23);e.exports=r},function(e,t,n){function r(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var i=n(23);e.exports=r},function(e,t,n){function r(e){var t=i(e,function(e){return n.size===a&&n.clear(),e}),n=t.cache;return t}var i=n(229),a=500;e.exports=r},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t,n){var r=n(220),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)}),t});e.exports=o},function(e,t,n){function r(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}var i=n(46),a=1/0;e.exports=r},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,i=r.toString;e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}var i=n(194);e.exports=r},function(e,t,n){function r(e){if(!a(e))return!1;var t=i(e);return t==u||t==s||t==o||t==f}var i=n(86),a=n(88),o="[object AsyncFunction]",u="[object Function]",s="[object GeneratorFunction]",f="[object Proxy]";e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(r.Cache||i),n}var i=n(192),a="Expected a function";r.Cache=i,e.exports=r},function(e,t,n){function r(e){return null==e?"":i(e)}var i=n(196);e.exports=r},function(e,t,n){function r(e,t){var n,u;e instanceof r?(n=e.url,u=i(n)):(n=e,u=i(n),e={}),t=t||{},this.method=t.method||e.method||"GET",this.redirect=t.redirect||e.redirect||"follow",this.headers=new a(t.headers||e.headers||{}),this.url=n,this.follow=void 0!==t.follow?t.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==t.compress?t.compress:void 0===e.compress||e.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,o.call(this,t.body||this._clone(e),{timeout:t.timeout||e.timeout||0,size:t.size||e.size||0}),this.protocol=u.protocol,this.hostname=u.hostname,this.port=u.port,this.path=u.path,this.auth=u.auth}var i=n(28).parse,a=n(48),o=n(47);e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.clone=function(){return new r(this)}},function(e,t,n){function r(e,t){t=t||{},this.url=t.url,this.status=t.status||200,this.statusText=t.statusText||i.STATUS_CODES[this.status],this.headers=new a(t.headers),this.ok=this.status>=200&&this.status<300,o.call(this,e,t)}var i=n(51),a=n(48),o=n(47);e.exports=r,r.prototype=Object.create(o.prototype),r.prototype.clone=function(){return new r(this._clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=Array.prototype.slice,o=n(234),u=Object.prototype.propertyIsEnumerable,s=!u.call({toString:null},"toString"),f=u.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t=e.constructor;return t&&t.prototype===e},d={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&r.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{l(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),p=function(e){if("undefined"==typeof window||!h)return l(e);try{return l(e)}catch(e){return!1}},g=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===i.call(e),a=o(e),u=t&&"[object String]"===i.call(e),l=[];if(!t&&!n&&!a)throw new TypeError("Object.keys called on a non-object");var d=f&&n;if(u&&e.length>0&&!r.call(e,0))for(var h=0;h<e.length;++h)l.push(String(h));if(a&&e.length>0)for(var g=0;g<e.length;++g)l.push(String(g));else for(var m in e)d&&"prototype"===m||!r.call(e,m)||l.push(String(m));if(s)for(var v=p(e),y=0;y<c.length;++y)v&&"constructor"===c[y]||!r.call(e,c[y])||l.push(c[y]);return l};g.shim=function(){if(Object.keys){var e=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!e){var t=Object.keys;Object.keys=function(e){return t(o(e)?a.call(e):e)}}}else Object.keys=g;return Object.keys||g},e.exports=g},function(e,t){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t=n.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),r}},function(e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";function r(e,t){return e.msg=D[t],t}function i(e){return(e<<1)-(e>4?9:0)}function a(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(R.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function u(e,t){T._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function s(e,t){e.pending_buf[e.pending++]=t}function f(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,R.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=z(e.adler,t,i,n):2===e.state.wrap&&(e.adler=N(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function l(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,u=e.nice_match,s=e.strstart>e.w_size-le?e.strstart-(e.w_size-le):0,f=e.window,c=e.w_mask,l=e.prev,d=e.strstart+ce,h=f[a+o-1],p=f[a+o];e.prev_length>=e.good_match&&(i>>=2),u>e.lookahead&&(u=e.lookahead);do if(n=t,f[n+o]===p&&f[n+o-1]===h&&f[n]===f[a]&&f[++n]===f[a+1]){a+=2,n++;do;while(f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&f[++a]===f[++n]&&a<d);if(r=ce-(d-a),a=d-ce,r>o){if(e.match_start=t,o=r,r>=u)break;h=f[a+o-1],p=f[a+o]}}while((t=l[t&c])>s&&0!==--i);return o<=e.lookahead?o:e.lookahead}function d(e){var t,n,r,i,a,o=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-le)){R.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=o?r-o:0;while(--n);n=o,t=n;do r=e.prev[--t],e.prev[t]=r>=o?r-o:0;while(--n);i+=o}if(0===e.strm.avail_in)break;if(n=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=fe)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+fe-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<fe)););}while(e.lookahead<le&&0!==e.strm.avail_in)}function h(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===P)return _e;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,u(e,!1),0===e.strm.avail_out))return _e;if(e.strstart-e.block_start>=e.w_size-le&&(u(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===$?(u(e,!0),0===e.strm.avail_out?we:ke):e.strstart>e.block_start&&(u(e,!1),0===e.strm.avail_out)?_e:_e}function p(e,t){for(var n,r;;){if(e.lookahead<le){if(d(e),e.lookahead<le&&t===P)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=fe&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+fe-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-le&&(e.match_length=l(e,n)),e.match_length>=fe)if(r=T._tr_tally(e,e.strstart-e.match_start,e.match_length-fe),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=fe){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+fe-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=T._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(u(e,!1),0===e.strm.avail_out))return _e}return e.insert=e.strstart<fe-1?e.strstart:fe-1,t===$?(u(e,!0),0===e.strm.avail_out?we:ke):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?_e:xe}function g(e,t){for(var n,r,i;;){if(e.lookahead<le){if(d(e),e.lookahead<le&&t===P)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=fe&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+fe-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=fe-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-le&&(e.match_length=l(e,n),e.match_length<=5&&(e.strategy===Y||e.match_length===fe&&e.strstart-e.match_start>4096)&&(e.match_length=fe-1)),e.prev_length>=fe&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-fe,r=T._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-fe),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+fe-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=fe-1,e.strstart++,r&&(u(e,!1),0===e.strm.avail_out))return _e}else if(e.match_available){if(r=T._tr_tally(e,0,e.window[e.strstart-1]),r&&u(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return _e}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=T._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<fe-1?e.strstart:fe-1,t===$?(u(e,!0),0===e.strm.avail_out?we:ke):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?_e:xe}function m(e,t){for(var n,r,i,a,o=e.window;;){if(e.lookahead<=ce){if(d(e),e.lookahead<=ce&&t===P)return _e;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=fe&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+ce;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=ce-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=fe?(n=T._tr_tally(e,1,e.match_length-fe),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=T._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(u(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===$?(u(e,!0),0===e.strm.avail_out?we:ke):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?_e:xe}function v(e,t){for(var n;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===P)return _e;break}if(e.match_length=0,n=T._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(u(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===$?(u(e,!0),0===e.strm.avail_out?we:ke):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?_e:xe}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function b(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=C[e.level].max_lazy,e.good_match=C[e.level].good_length,e.nice_match=C[e.level].nice_length,e.max_chain_length=C[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=fe-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(2*ue),this.dyn_dtree=new R.Buf16(2*(2*ae+1)),this.bl_tree=new R.Buf16(2*(2*oe+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(se+1),this.heap=new R.Buf16(2*ie+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(2*ie+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=J,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?he:ye,e.adler=2===t.wrap?0:1,t.last_flush=P,T._tr_init(t),F):r(e,U)}function w(e){var t=x(e);return t===F&&b(e.state),t}function k(e,t){return e&&e.state?2!==e.state.wrap?U:(e.state.gzhead=t,F):U}function M(e,t,n,i,a,o){if(!e)return U;var u=1;if(t===G&&(t=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),a<1||a>K||n!==Q||i<8||i>15||t<0||t>9||o<0||o>X)return r(e,U);8===i&&(i=9);var s=new _;return e.state=s,s.strm=e,s.wrap=u,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+fe-1)/fe),s.window=new R.Buf8(2*s.w_size),s.head=new R.Buf16(s.hash_size),s.prev=new R.Buf16(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new R.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,w(e)}function S(e,t){return M(e,t,Q,ee,te,Z)}function E(e,t){var n,u,c,l;if(!e||!e.state||t>j||t<0)return e?r(e,U):U;if(u=e.state,!e.output||!e.input&&0!==e.avail_in||u.status===be&&t!==$)return r(e,0===e.avail_out?W:U);if(u.strm=e,n=u.last_flush,u.last_flush=t,u.status===he)if(2===u.wrap)e.adler=0,s(u,31),s(u,139),s(u,8),u.gzhead?(s(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),s(u,255&u.gzhead.time),s(u,u.gzhead.time>>8&255),s(u,u.gzhead.time>>16&255),s(u,u.gzhead.time>>24&255),s(u,9===u.level?2:u.strategy>=H||u.level<2?4:0),s(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(s(u,255&u.gzhead.extra.length),s(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(e.adler=N(e.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=pe):(s(u,0),s(u,0),s(u,0),s(u,0),s(u,0),s(u,9===u.level?2:u.strategy>=H||u.level<2?4:0),s(u,Me),u.status=ye);else{var d=Q+(u.w_bits-8<<4)<<8,h=-1;h=u.strategy>=H||u.level<2?0:u.level<6?1:6===u.level?2:3,d|=h<<6,0!==u.strstart&&(d|=de),d+=31-d%31,u.status=ye,f(u,d),0!==u.strstart&&(f(u,e.adler>>>16),f(u,65535&e.adler)),e.adler=1}if(u.status===pe)if(u.gzhead.extra){for(c=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>c&&(e.adler=N(e.adler,u.pending_buf,u.pending-c,c)),o(e),c=u.pending,u.pending!==u.pending_buf_size));)s(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>c&&(e.adler=N(e.adler,u.pending_buf,u.pending-c,c)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=ge)}else u.status=ge;if(u.status===ge)if(u.gzhead.name){c=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>c&&(e.adler=N(e.adler,u.pending_buf,u.pending-c,c)),o(e),c=u.pending,u.pending===u.pending_buf_size)){l=1;break}l=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,s(u,l)}while(0!==l);u.gzhead.hcrc&&u.pending>c&&(e.adler=N(e.adler,u.pending_buf,u.pending-c,c)),0===l&&(u.gzindex=0,u.status=me)}else u.status=me;if(u.status===me)if(u.gzhead.comment){c=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>c&&(e.adler=N(e.adler,u.pending_buf,u.pending-c,c)),o(e),c=u.pending,u.pending===u.pending_buf_size)){l=1;break}l=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,s(u,l)}while(0!==l);u.gzhead.hcrc&&u.pending>c&&(e.adler=N(e.adler,u.pending_buf,u.pending-c,c)),0===l&&(u.status=ve)}else u.status=ve;if(u.status===ve&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&o(e),u.pending+2<=u.pending_buf_size&&(s(u,255&e.adler),s(u,e.adler>>8&255),e.adler=0,u.status=ye)):u.status=ye),0!==u.pending){if(o(e),0===e.avail_out)return u.last_flush=-1,F}else if(0===e.avail_in&&i(t)<=i(n)&&t!==$)return r(e,W);if(u.status===be&&0!==e.avail_in)return r(e,W);if(0!==e.avail_in||0!==u.lookahead||t!==P&&u.status!==be){var p=u.strategy===H?v(u,t):u.strategy===V?m(u,t):C[u.level].func(u,t);if(p!==we&&p!==ke||(u.status=be),p===_e||p===we)return 0===e.avail_out&&(u.last_flush=-1),F;if(p===xe&&(t===L?T._tr_align(u):t!==j&&(T._tr_stored_block(u,0,0,!1),t===q&&(a(u.head),0===u.lookahead&&(u.strstart=0,u.block_start=0,u.insert=0))),o(e),0===e.avail_out))return u.last_flush=-1,F}return t!==$?F:u.wrap<=0?I:(2===u.wrap?(s(u,255&e.adler),s(u,e.adler>>8&255),s(u,e.adler>>16&255),s(u,e.adler>>24&255),s(u,255&e.total_in),s(u,e.total_in>>8&255),s(u,e.total_in>>16&255),s(u,e.total_in>>24&255)):(f(u,e.adler>>>16),f(u,65535&e.adler)),o(e),u.wrap>0&&(u.wrap=-u.wrap),0!==u.pending?F:I)}function O(e){var t;return e&&e.state?(t=e.state.status,t!==he&&t!==pe&&t!==ge&&t!==me&&t!==ve&&t!==ye&&t!==be?r(e,U):(e.state=null,t===ye?r(e,B):F)):U}function A(e,t){var n,r,i,o,u,s,f,c,l=t.length;if(!e||!e.state)return U;if(n=e.state,o=n.wrap,2===o||1===o&&n.status!==he||n.lookahead)return U;for(1===o&&(e.adler=z(e.adler,t,l,0)),n.wrap=0,l>=n.w_size&&(0===o&&(a(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new R.Buf8(n.w_size),R.arraySet(c,t,l-n.w_size,n.w_size,0),t=c,l=n.w_size),u=e.avail_in,s=e.next_in,f=e.input,e.avail_in=l,e.next_in=0,e.input=t,d(n);n.lookahead>=fe;){r=n.strstart,i=n.lookahead-(fe-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+fe-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--i);n.strstart=r,n.lookahead=fe-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=fe-1,n.match_available=0,e.next_in=s,e.input=f,e.avail_in=u,n.wrap=o,F}var C,R=n(26),T=n(240),z=n(90),N=n(91),D=n(92),P=0,L=1,q=3,$=4,j=5,F=0,I=1,U=-2,B=-3,W=-5,G=-1,Y=1,H=2,V=3,X=4,Z=0,J=2,Q=8,K=9,ee=15,te=8,ne=29,re=256,ie=re+1+ne,ae=30,oe=19,ue=2*ie+1,se=15,fe=3,ce=258,le=ce+fe+1,de=32,he=42,pe=69,ge=73,me=91,ve=103,ye=113,be=666,_e=1,xe=2,we=3,ke=4,Me=3;C=[new y(0,0,0,0,h),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,g),new y(8,16,32,32,g),new y(8,16,128,128,g),new y(8,32,128,256,g),new y(32,128,258,1024,g),new y(32,258,258,4096,g)],t.deflateInit=S,t.deflateInit2=M,t.deflateReset=w,t.deflateResetKeep=x,t.deflateSetHeader=k,t.deflate=E,t.deflateEnd=O,t.deflateSetDictionary=A,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t){"use strict";var n=30,r=12;e.exports=function(e,t){var i,a,o,u,s,f,c,l,d,h,p,g,m,v,y,b,_,x,w,k,M,S,E,O,A;i=e.state,a=e.next_in,O=e.input,o=a+(e.avail_in-5),u=e.next_out,A=e.output,s=u-(t-e.avail_out),f=u+(e.avail_out-257),c=i.dmax,l=i.wsize,d=i.whave,h=i.wnext,p=i.window,g=i.hold,m=i.bits,v=i.lencode,y=i.distcode,b=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;e:do{m<15&&(g+=O[a++]<<m,m+=8,g+=O[a++]<<m,m+=8),x=v[g&b];t:for(;;){if(w=x>>>24,g>>>=w,m-=w,w=x>>>16&255,0===w)A[u++]=65535&x;else{if(!(16&w)){if(0===(64&w)){x=v[(65535&x)+(g&(1<<w)-1)];continue t}if(32&w){i.mode=r;break e}e.msg="invalid literal/length code",i.mode=n;break e}k=65535&x,w&=15,w&&(m<w&&(g+=O[a++]<<m,m+=8),k+=g&(1<<w)-1,g>>>=w,m-=w),m<15&&(g+=O[a++]<<m,m+=8,g+=O[a++]<<m,m+=8),x=y[g&_];n:for(;;){if(w=x>>>24,g>>>=w,m-=w,w=x>>>16&255,!(16&w)){if(0===(64&w)){x=y[(65535&x)+(g&(1<<w)-1)];continue n}e.msg="invalid distance code",i.mode=n;break e}if(M=65535&x,w&=15,m<w&&(g+=O[a++]<<m,m+=8,m<w&&(g+=O[a++]<<m,m+=8)),M+=g&(1<<w)-1,M>c){e.msg="invalid distance too far back",i.mode=n;break e}if(g>>>=w,m-=w,w=u-s,M>w){if(w=M-w,w>d&&i.sane){e.msg="invalid distance too far back",i.mode=n;break e}if(S=0,E=p,0===h){if(S+=l-w,w<k){k-=w;do A[u++]=p[S++];while(--w);S=u-M,E=A}}else if(h<w){if(S+=l+h-w,w-=h,w<k){k-=w;do A[u++]=p[S++];while(--w);if(S=0,h<k){w=h,k-=w;do A[u++]=p[S++];while(--w);S=u-M,E=A}}}else if(S+=h-w,w<k){k-=w;do A[u++]=p[S++];while(--w);S=u-M,E=A}for(;k>2;)A[u++]=E[S++],A[u++]=E[S++],A[u++]=E[S++],k-=3;k&&(A[u++]=E[S++],k>1&&(A[u++]=E[S++]))}else{S=u-M;do A[u++]=A[S++],A[u++]=A[S++],A[u++]=A[S++],k-=3;while(k>2);k&&(A[u++]=A[S++],k>1&&(A[u++]=A[S++]))}break}}break}}while(a<o&&u<f);k=m>>3,a-=k,m-=k<<3,g&=(1<<m)-1,e.next_in=a,e.next_out=u,e.avail_in=a<o?5+(o-a):5-(a-o),e.avail_out=u<f?257+(f-u):257-(u-f),i.hold=g,i.bits=m}},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=q,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(ge),t.distcode=t.distdyn=new y.Buf32(me),t.sane=1,t.back=-1,C):z}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,a(e)):z}function u(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?z:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,o(e))):z}function s(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=u(e,t),n!==C&&(e.state=null),n):z;
}function f(e){return s(e,ye)}function c(e){if(be){var t;for(m=new y.Buf32(512),v=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(w(M,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;w(S,e.lens,0,32,v,0,e.work,{bits:5}),be=!1}e.lencode=m,e.lenbits=9,e.distcode=v,e.distbits=5}function l(e,t,n,r){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new y.Buf8(a.wsize)),r>=a.wsize?(y.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),y.arraySet(a.window,t,n-r,i,a.wnext),r-=i,r?(y.arraySet(a.window,t,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function d(e,t){var n,i,a,o,u,s,f,d,h,p,g,m,v,ge,me,ve,ye,be,_e,xe,we,ke,Me,Se,Ee=0,Oe=new y.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return z;n=e.state,n.mode===V&&(n.mode=X),u=e.next_out,a=e.output,f=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,d=n.hold,h=n.bits,p=s,g=f,ke=C;e:for(;;)switch(n.mode){case q:if(0===n.wrap){n.mode=X;break}for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,Oe[0]=255&d,Oe[1]=d>>>8&255,n.check=_(n.check,Oe,2,0),d=0,h=0,n.mode=$;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&d)!==L){e.msg="unknown compression method",n.mode=de;break}if(d>>>=4,h-=4,we=(15&d)+8,0===n.wbits)n.wbits=we;else if(we>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<we,e.adler=n.check=1,n.mode=512&d?Y:V,d=0,h=0;break;case $:for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==L){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Oe[0]=255&d,Oe[1]=d>>>8&255,n.check=_(n.check,Oe,2,0)),d=0,h=0,n.mode=j;case j:for(;h<32;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(Oe[0]=255&d,Oe[1]=d>>>8&255,Oe[2]=d>>>16&255,Oe[3]=d>>>24&255,n.check=_(n.check,Oe,4,0)),d=0,h=0,n.mode=F;case F:for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(Oe[0]=255&d,Oe[1]=d>>>8&255,n.check=_(n.check,Oe,2,0)),d=0,h=0,n.mode=I;case I:if(1024&n.flags){for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(Oe[0]=255&d,Oe[1]=d>>>8&255,n.check=_(n.check,Oe,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=U;case U:if(1024&n.flags&&(m=n.length,m>s&&(m=s),m&&(n.head&&(we=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,i,o,m,we)),512&n.flags&&(n.check=_(n.check,i,m,o)),s-=m,o+=m,n.length-=m),n.length))break e;n.length=0,n.mode=B;case B:if(2048&n.flags){if(0===s)break e;m=0;do we=i[o+m++],n.head&&we&&n.length<65536&&(n.head.name+=String.fromCharCode(we));while(we&&m<s);if(512&n.flags&&(n.check=_(n.check,i,m,o)),s-=m,o+=m,we)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=W;case W:if(4096&n.flags){if(0===s)break e;m=0;do we=i[o+m++],n.head&&we&&n.length<65536&&(n.head.comment+=String.fromCharCode(we));while(we&&m<s);if(512&n.flags&&(n.check=_(n.check,i,m,o)),s-=m,o+=m,we)break e}else n.head&&(n.head.comment=null);n.mode=G;case G:if(512&n.flags){for(;h<16;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=V;break;case Y:for(;h<32;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}e.adler=n.check=r(d),d=0,h=0,n.mode=H;case H:if(0===n.havedict)return e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=d,n.bits=h,T;e.adler=n.check=1,n.mode=V;case V:if(t===O||t===A)break e;case X:if(n.last){d>>>=7&h,h-=7&h,n.mode=fe;break}for(;h<3;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}switch(n.last=1&d,d>>>=1,h-=1,3&d){case 0:n.mode=Z;break;case 1:if(c(n),n.mode=ne,t===A){d>>>=2,h-=2;break e}break;case 2:n.mode=K;break;case 3:e.msg="invalid block type",n.mode=de}d>>>=2,h-=2;break;case Z:for(d>>>=7&h,h-=7&h;h<32;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&d,d=0,h=0,n.mode=J,t===A)break e;case J:n.mode=Q;case Q:if(m=n.length){if(m>s&&(m=s),m>f&&(m=f),0===m)break e;y.arraySet(a,i,o,m,u),s-=m,o+=m,f-=m,u+=m,n.length-=m;break}n.mode=V;break;case K:for(;h<14;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(n.nlen=(31&d)+257,d>>>=5,h-=5,n.ndist=(31&d)+1,d>>>=5,h-=5,n.ncode=(15&d)+4,d>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;h<3;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.lens[Ae[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[Ae[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Me={bits:n.lenbits},ke=w(k,n.lens,0,19,n.lencode,0,n.work,Me),n.lenbits=Me.bits,ke){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Ee=n.lencode[d&(1<<n.lenbits)-1],me=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(ye<16)d>>>=me,h-=me,n.lens[n.have++]=ye;else{if(16===ye){for(Se=me+2;h<Se;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(d>>>=me,h-=me,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}we=n.lens[n.have-1],m=3+(3&d),d>>>=2,h-=2}else if(17===ye){for(Se=me+3;h<Se;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}d>>>=me,h-=me,we=0,m=3+(7&d),d>>>=3,h-=3}else{for(Se=me+7;h<Se;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}d>>>=me,h-=me,we=0,m=11+(127&d),d>>>=7,h-=7}if(n.have+m>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;m--;)n.lens[n.have++]=we}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,Me={bits:n.lenbits},ke=w(M,n.lens,0,n.nlen,n.lencode,0,n.work,Me),n.lenbits=Me.bits,ke){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,Me={bits:n.distbits},ke=w(S,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Me),n.distbits=Me.bits,ke){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ne,t===A)break e;case ne:n.mode=re;case re:if(s>=6&&f>=258){e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=d,n.bits=h,x(e,g),u=e.next_out,a=e.output,f=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,d=n.hold,h=n.bits,n.mode===V&&(n.back=-1);break}for(n.back=0;Ee=n.lencode[d&(1<<n.lenbits)-1],me=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(ve&&0===(240&ve)){for(be=me,_e=ve,xe=ye;Ee=n.lencode[xe+((d&(1<<be+_e)-1)>>be)],me=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(be+me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}d>>>=be,h-=be,n.back+=be}if(d>>>=me,h-=me,n.back+=me,n.length=ye,0===ve){n.mode=se;break}if(32&ve){n.back=-1,n.mode=V;break}if(64&ve){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ve,n.mode=ie;case ie:if(n.extra){for(Se=n.extra;h<Se;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ae;case ae:for(;Ee=n.distcode[d&(1<<n.distbits)-1],me=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(0===(240&ve)){for(be=me,_e=ve,xe=ye;Ee=n.distcode[xe+((d&(1<<be+_e)-1)>>be)],me=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(be+me<=h);){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}d>>>=be,h-=be,n.back+=be}if(d>>>=me,h-=me,n.back+=me,64&ve){e.msg="invalid distance code",n.mode=de;break}n.offset=ye,n.extra=15&ve,n.mode=oe;case oe:if(n.extra){for(Se=n.extra;h<Se;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=ue;case ue:if(0===f)break e;if(m=g-f,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}m>n.wnext?(m-=n.wnext,v=n.wsize-m):v=n.wnext-m,m>n.length&&(m=n.length),ge=n.window}else ge=a,v=u-n.offset,m=n.length;m>f&&(m=f),f-=m,n.length-=m;do a[u++]=ge[v++];while(--m);0===n.length&&(n.mode=re);break;case se:if(0===f)break e;a[u++]=n.length,f--,n.mode=re;break;case fe:if(n.wrap){for(;h<32;){if(0===s)break e;s--,d|=i[o++]<<h,h+=8}if(g-=f,e.total_out+=g,n.total+=g,g&&(e.adler=n.check=n.flags?_(n.check,a,g,u-g):b(n.check,a,g,u-g)),g=f,(n.flags?d:r(d))!==n.check){e.msg="incorrect data check",n.mode=de;break}d=0,h=0}n.mode=ce;case ce:if(n.wrap&&n.flags){for(;h<32;){if(0===s)break e;s--,d+=i[o++]<<h,h+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}d=0,h=0}n.mode=le;case le:ke=R;break e;case de:ke=N;break e;case he:return D;case pe:default:return z}return e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=s,n.hold=d,n.bits=h,(n.wsize||g!==e.avail_out&&n.mode<de&&(n.mode<fe||t!==E))&&l(e,e.output,e.next_out,g-e.avail_out)?(n.mode=he,D):(p-=e.avail_in,g-=e.avail_out,e.total_in+=p,e.total_out+=g,n.total+=g,n.wrap&&g&&(e.adler=n.check=n.flags?_(n.check,a,g,e.next_out-g):b(n.check,a,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===V?128:0)+(n.mode===ne||n.mode===J?256:0),(0===p&&0===g||t===E)&&ke===C&&(ke=P),ke)}function h(e){if(!e||!e.state)return z;var t=e.state;return t.window&&(t.window=null),e.state=null,C}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?z:(n.head=t,t.done=!1,C)):z}function g(e,t){var n,r,i,a=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==H?z:n.mode===H&&(r=1,r=b(r,t,a,0),r!==n.check)?N:(i=l(e,t,a,a))?(n.mode=he,D):(n.havedict=1,C)):z}var m,v,y=n(26),b=n(90),_=n(91),x=n(237),w=n(239),k=0,M=1,S=2,E=4,O=5,A=6,C=0,R=1,T=2,z=-2,N=-3,D=-4,P=-5,L=8,q=1,$=2,j=3,F=4,I=5,U=6,B=7,W=8,G=9,Y=10,H=11,V=12,X=13,Z=14,J=15,Q=16,K=17,ee=18,te=19,ne=20,re=21,ie=22,ae=23,oe=24,ue=25,se=26,fe=27,ce=28,le=29,de=30,he=31,pe=32,ge=852,me=592,ve=15,ye=ve,be=!0;t.inflateReset=o,t.inflateReset2=u,t.inflateResetKeep=a,t.inflateInit=f,t.inflateInit2=s,t.inflate=d,t.inflateEnd=h,t.inflateGetHeader=p,t.inflateSetDictionary=g,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(26),i=15,a=852,o=592,u=0,s=1,f=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,p,g,m,v,y){var b,_,x,w,k,M,S,E,O,A=y.bits,C=0,R=0,T=0,z=0,N=0,D=0,P=0,L=0,q=0,$=0,j=null,F=0,I=new r.Buf16(i+1),U=new r.Buf16(i+1),B=null,W=0;for(C=0;C<=i;C++)I[C]=0;for(R=0;R<p;R++)I[t[n+R]]++;for(N=A,z=i;z>=1&&0===I[z];z--);if(N>z&&(N=z),0===z)return g[m++]=20971520,g[m++]=20971520,y.bits=1,0;for(T=1;T<z&&0===I[T];T++);for(N<T&&(N=T),L=1,C=1;C<=i;C++)if(L<<=1,L-=I[C],L<0)return-1;if(L>0&&(e===u||1!==z))return-1;for(U[1]=0,C=1;C<i;C++)U[C+1]=U[C]+I[C];for(R=0;R<p;R++)0!==t[n+R]&&(v[U[t[n+R]]++]=R);if(e===u?(j=B=v,M=19):e===s?(j=c,F-=257,B=l,W-=257,M=256):(j=d,B=h,M=-1),$=0,R=0,C=T,k=m,D=N,P=0,x=-1,q=1<<N,w=q-1,e===s&&q>a||e===f&&q>o)return 1;for(;;){S=C-P,v[R]<M?(E=0,O=v[R]):v[R]>M?(E=B[W+v[R]],O=j[F+v[R]]):(E=96,O=0),b=1<<C-P,_=1<<D,T=_;do _-=b,g[k+($>>P)+_]=S<<24|E<<16|O|0;while(0!==_);for(b=1<<C-1;$&b;)b>>=1;if(0!==b?($&=b-1,$+=b):$=0,R++,0===--I[C]){if(C===z)break;C=t[n+v[R]]}if(C>N&&($&w)!==x){for(0===P&&(P=N),k+=T,D=C-P,L=1<<D;D+P<z&&(L-=I[D+P],!(L<=0));)D++,L<<=1;if(q+=1<<D,e===s&&q>a||e===f&&q>o)return 1;x=$&w,g[x]=N<<24|D<<16|k-m|0}}return 0!==$&&(g[k+$]=C-P<<24|64<<16|0),y.bits=N,0}},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function a(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function o(e){return e<256?se[e]:se[256+(e>>>7)]}function u(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function s(e,t,n){e.bi_valid>X-n?(e.bi_buf|=t<<e.bi_valid&65535,u(e,e.bi_buf),e.bi_buf=t>>X-e.bi_valid,e.bi_valid+=n-X):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function f(e,t,n){s(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function l(e){16===e.bi_valid?(u(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function d(e,t){var n,r,i,a,o,u,s=t.dyn_tree,f=t.max_code,c=t.stat_desc.static_tree,l=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(a=0;a<=V;a++)e.bl_count[a]=0;for(s[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<H;n++)r=e.heap[n],a=s[2*s[2*r+1]+1]+1,a>p&&(a=p,g++),s[2*r+1]=a,r>f||(e.bl_count[a]++,o=0,r>=h&&(o=d[r-h]),u=s[2*r],e.opt_len+=u*(a+o),l&&(e.static_len+=u*(c[2*r+1]+o)));if(0!==g){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(a=p;0!==a;a--)for(r=e.bl_count[a];0!==r;)i=e.heap[--n],i>f||(s[2*i+1]!==a&&(e.opt_len+=(a-s[2*i+1])*s[2*i],s[2*i+1]=a),r--)}}function h(e,t,n){var r,i,a=new Array(V+1),o=0;for(r=1;r<=V;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var u=e[2*i+1];0!==u&&(e[2*i]=c(a[u]++,u))}}function p(){var e,t,n,r,a,o=new Array(V+1);for(n=0,r=0;r<U-1;r++)for(ce[r]=n,e=0;e<1<<te[r];e++)fe[n++]=r;for(fe[n-1]=r,a=0,r=0;r<16;r++)for(le[r]=a,e=0;e<1<<ne[r];e++)se[a++]=r;for(a>>=7;r<G;r++)for(le[r]=a<<7,e=0;e<1<<ne[r]-7;e++)se[256+a++]=r;for(t=0;t<=V;t++)o[t]=0;for(e=0;e<=143;)oe[2*e+1]=8,e++,o[8]++;for(;e<=255;)oe[2*e+1]=9,e++,o[9]++;for(;e<=279;)oe[2*e+1]=7,e++,o[7]++;for(;e<=287;)oe[2*e+1]=8,e++,o[8]++;for(h(oe,W+1,o),e=0;e<G;e++)ue[2*e+1]=5,ue[2*e]=c(e,5);de=new i(oe,te,B+1,W,V),he=new i(ue,ne,0,G,V),pe=new i(new Array(0),re,0,Y,Z)}function g(e){var t;for(t=0;t<W;t++)e.dyn_ltree[2*t]=0;for(t=0;t<G;t++)e.dyn_dtree[2*t]=0;for(t=0;t<Y;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*J]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m(e){e.bi_valid>8?u(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){m(e),r&&(u(e,n),u(e,~n)),z.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function b(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function _(e,t,n){var r,i,a,u,c=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?f(e,i,t):(a=fe[i],f(e,a+B+1,t),u=te[a],0!==u&&(i-=ce[a],s(e,i,u)),r--,a=o(r),f(e,a,n),u=ne[a],0!==u&&(r-=le[a],s(e,r,u)));while(c<e.last_lit);f(e,J,t)}function x(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,u=t.stat_desc.has_stree,s=t.stat_desc.elems,f=-1;for(e.heap_len=0,e.heap_max=H,n=0;n<s;n++)0!==a[2*n]?(e.heap[++e.heap_len]=f=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=f<2?++f:0,a[2*i]=1,e.depth[i]=0,e.opt_len--,u&&(e.static_len-=o[2*i+1]);for(t.max_code=f,n=e.heap_len>>1;n>=1;n--)b(e,a,n);i=s;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,b(e,a,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],d(e,t),h(a,f,e.bl_count)}function w(e,t,n){var r,i,a=-1,o=t[1],u=0,s=7,f=4;for(0===o&&(s=138,f=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++u<s&&i===o||(u<f?e.bl_tree[2*i]+=u:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*Q]++):u<=10?e.bl_tree[2*K]++:e.bl_tree[2*ee]++,u=0,a=i,0===o?(s=138,f=3):i===o?(s=6,f=3):(s=7,f=4))}function k(e,t,n){var r,i,a=-1,o=t[1],u=0,c=7,l=4;for(0===o&&(c=138,l=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++u<c&&i===o)){if(u<l){do f(e,i,e.bl_tree);while(0!==--u)}else 0!==i?(i!==a&&(f(e,i,e.bl_tree),u--),f(e,Q,e.bl_tree),s(e,u-3,2)):u<=10?(f(e,K,e.bl_tree),s(e,u-3,3)):(f(e,ee,e.bl_tree),s(e,u-11,7));u=0,a=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}}function M(e){var t;for(w(e,e.dyn_ltree,e.l_desc.max_code),w(e,e.dyn_dtree,e.d_desc.max_code),x(e,e.bl_desc),t=Y-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function S(e,t,n,r){var i;for(s(e,t-257,5),s(e,n-1,5),s(e,r-4,4),i=0;i<r;i++)s(e,e.bl_tree[2*ie[i]+1],3);k(e,e.dyn_ltree,t-1),k(e,e.dyn_dtree,n-1)}function E(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return D;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return P;for(t=32;t<B;t++)if(0!==e.dyn_ltree[2*t])return P;return D}function O(e){ge||(p(),ge=!0),e.l_desc=new a(e.dyn_ltree,de),e.d_desc=new a(e.dyn_dtree,he),e.bl_desc=new a(e.bl_tree,pe),e.bi_buf=0,e.bi_valid=0,g(e)}function A(e,t,n,r){s(e,(q<<1)+(r?1:0),3),v(e,t,n,!0)}function C(e){s(e,$<<1,3),f(e,J,oe),l(e)}function R(e,t,n,r){var i,a,o=0;e.level>0?(e.strm.data_type===L&&(e.strm.data_type=E(e)),x(e,e.l_desc),x(e,e.d_desc),o=M(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&t!==-1?A(e,t,n,r):e.strategy===N||a===i?(s(e,($<<1)+(r?1:0),3),_(e,oe,ue)):(s(e,(j<<1)+(r?1:0),3),S(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),_(e,e.dyn_ltree,e.dyn_dtree)),g(e),r&&m(e)}function T(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(fe[n]+B+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1}var z=n(26),N=4,D=0,P=1,L=2,q=0,$=1,j=2,F=3,I=258,U=29,B=256,W=B+1+U,G=30,Y=19,H=2*W+1,V=15,X=16,Z=7,J=256,Q=16,K=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=512,oe=new Array(2*(W+2));r(oe);var ue=new Array(2*G);r(ue);var se=new Array(ae);r(se);var fe=new Array(I-F+1);r(fe);var ce=new Array(U);r(ce);var le=new Array(G);r(le);var de,he,pe,ge=!1;t._tr_init=O,t._tr_stored_block=A,t._tr_flush_block=R,t._tr_tally=T,t._tr_align=C},function(e,t){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},function(e,t){"use strict";function n(e){var t=i(e);return y[v[t]||t]}function r(e,t){return(e&t)===t}function i(e){return e.toLowerCase()}e.exports=n;var a,o,u,s=1,f=2,c=8,l=16,d=48,h=64,p=128,g=256,m={abbr:null,accept:g,acceptCharset:p,accessKey:p,action:null,allowFullScreen:s|c,allowTransparency:s,alt:null,as:null,async:c,autoComplete:p,autoFocus:c,autoPlay:c,capture:s|c,cellPadding:null,cellSpacing:null,challenge:s,charSet:s,checked:f|c,cite:null,className:s|p,cols:s|d,colSpan:null,command:null,content:null,contentEditable:null,contextMenu:s,controls:f|c,controlsList:p,coords:l|g,crossOrigin:null,data:null,dateTime:s,default:c,defer:c,dir:null,dirName:null,disabled:s|c,download:h,draggable:null,dropzone:p,encType:null,form:s,formAction:s,formEncType:s,formMethod:s,formNoValidate:c,formTarget:s,frameBorder:s,headers:p,height:s|d,hidden:s|c,high:l,href:null,hrefLang:null,htmlFor:p,httpEquiv:p,id:f,inputMode:s,is:s,isMap:c,keyParams:s,keyType:s,kind:null,label:null,lang:null,list:s,loop:f|c,low:l,manifest:s,marginHeight:l,marginWidth:l,max:null,maxLength:s|d,media:s,mediaGroup:null,menu:null,method:null,min:null,minLength:s|d,multiple:f|c,muted:f|c,name:null,nonce:null,noValidate:c,open:c,optimum:l,pattern:null,ping:p,placeholder:null,playsInline:c,poster:null,preload:null,profile:null,radioGroup:null,readOnly:f|c,referrerPolicy:null,rel:p|s,required:c,reversed:c,role:s,rows:s|d,rowSpan:d,sandbox:p,scope:null,scoped:c,scrolling:null,seamless:s|c,selected:f|c,shape:null,size:s|d,sizes:s|p,slot:null,sortable:c,sorted:p,span:d,spellCheck:null,src:null,srcDoc:f,srcLang:null,srcSet:s|g,start:l,step:null,style:null,summary:null,tabIndex:l,target:null,title:null,translate:null,type:null,typeMustMatch:c,useMap:null,value:f,volume:d,width:s|l,wmode:s,wrap:null,autoCapitalize:null,autoCorrect:null,autoSave:null,itemProp:s|p,itemScope:s|c,itemType:s|p,itemID:s,itemRef:s|p,property:null,results:null,security:s,unselectable:s,xmlLang:s,xmlBase:s},v={xmlbase:"xml:base",xmllang:"xml:lang",classname:"class",htmlfor:"for",httpequiv:"http-equiv",acceptcharset:"accept-charset"},y={};n.all=y;for(a in m)o=i(a),o=v[o]||o,u=m[a],y[o]={name:o,propertyName:a,mustUseAttribute:r(u,s),mustUseProperty:r(u,f),boolean:r(u,c),overloadedBoolean:r(u,h),numeric:r(u,l),positiveNumeric:r(u,d),commaSeparated:r(u,g),spaceSeparated:r(u,p)}},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var s=e.length;u>0&&s>u&&(s=u);for(var f=0;f<s;++f){var c,l,d,h,p=e[f].replace(o,"%20"),g=p.indexOf(r);g>=0?(c=p.substr(0,g),l=p.substr(g+1)):(c=p,l=""),d=decodeURIComponent(c),h=decodeURIComponent(l),n(a,d)?Array.isArray(a[d])?a[d].push(h):a[d]=[a[d],h]:a[d]=h}return a}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var a=encodeURIComponent(n(i))+r;return Array.isArray(e[i])?e[i].map(function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[i]))}).join(t):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(e)):""}},function(e,t,n){"use strict";t.decode=t.parse=n(243),t.encode=t.stringify=n(244)},,,,function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";function r(e){return this instanceof r?void i.call(this,e):new r(e)}e.exports=r;var i=n(94),a=n(11);a.inherits=n(5),a.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var a=n(50).Buffer,o=n(274);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var t=a.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,n){e.exports=n(12).PassThrough},function(e,t,n){e.exports=n(49)},function(e,t,n){"use strict";function r(e){function t(e){return"root"===e.type&&(e=1===e.children.length&&"element"===e.children[0].type?e.children[0]:{type:"element",tagName:"div",properties:{},children:e.children}),a(n,e,r.prefix)}function n(e,t,n){var r=i(u,e)?u[e]:e;return o(r,t,n)}var r=e||{},o=r.createElement,u=r.components||{};this.Compiler=t}var i=n(158),a=n(159);e.exports=r},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return g[p]=r,h(p),p++}function i(e){delete g[e]}function a(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function o(e){if(m)setTimeout(o,0,e);else{var t=g[e];if(t){m=!0;try{a(t)}finally{i(e),m=!1}}}}function u(){h=function(e){t.nextTick(function(){o(e)})}}function s(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function f(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),h=function(n){e.postMessage(t+n,"*")}}function c(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},h=function(t){e.port2.postMessage(t)}}function l(){var e=v.documentElement;h=function(t){var n=v.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function d(){h=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var h,p=1,g={},m=!1,v=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?u():s()?f():e.MessageChannel?c():v&&"onreadystatechange"in v.createElement("script")?l():d(),y.setImmediate=r,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(2))},function(e,t,n){"use strict";function r(e){var t=a(String(e||o));return t===o?[]:t.split(s)}function i(e){return a(e.join(u))}var a=n(53);t.parse=r,t.stringify=i;var o="",u=" ",s=/[ \t\n\r\f]+/g},function(e,t,n){(function(t,r,i){function a(e,t){return u.fetch&&t?"fetch":u.mozchunkedarraybuffer?"moz-chunked-arraybuffer":u.msstream?"ms-stream":u.arraybuffer&&e?"arraybuffer":u.vbArray&&e?"text:vbarray":"text"}function o(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}var u=n(98),s=n(5),f=n(99),c=n(12),l=n(259),d=f.IncomingMessage,h=f.readyStates,p=e.exports=function(e){var n=this;c.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){n.setHeader(t,e.headers[t])});var r,i=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!u.abortController)i=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!u.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=a(r,i),n._fetchTimer=null,n.on("finish",function(){n._onFinish()})};s(p,c.Writable),p.prototype.setHeader=function(e,t){var n=this,r=e.toLowerCase();g.indexOf(r)===-1&&(n._headers[r]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},p.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var n=e._opts,a=e._headers,o=null;"GET"!==n.method&&"HEAD"!==n.method&&(o=u.arraybuffer?l(t.concat(e._body)):u.blobConstructor?new r.Blob(e._body.map(function(e){return l(e)}),{type:(a["content-type"]||{}).value||""}):t.concat(e._body).toString());var s=[];if(Object.keys(a).forEach(function(e){var t=a[e].name,n=a[e].value;Array.isArray(n)?n.forEach(function(e){s.push([t,e])}):s.push([t,n])}),"fetch"===e._mode){var f=null;if(u.abortController){var c=new AbortController;f=c.signal,e._fetchAbortController=c,"requestTimeout"in n&&0!==n.requestTimeout&&(e._fetchTimer=r.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},n.requestTimeout))}r.fetch(e._opts.url,{method:e._opts.method,headers:s,body:o||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:f}).then(function(t){e._fetchResponse=t,e._connect()},function(t){r.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var d=e._xhr=new r.XMLHttpRequest;try{d.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}"responseType"in d&&(d.responseType=e._mode.split(":")[0]),"withCredentials"in d&&(d.withCredentials=!!n.withCredentials),"text"===e._mode&&"overrideMimeType"in d&&d.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(d.timeout=n.requestTimeout,d.ontimeout=function(){e.emit("requestTimeout")}),s.forEach(function(e){d.setRequestHeader(e[0],e[1])}),e._response=null,d.onreadystatechange=function(){switch(d.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(d.onprogress=function(){e._onXHRProgress()}),d.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{d.send(o)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}}}},p.prototype._onXHRProgress=function(){var e=this;o(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new d(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},p.prototype._write=function(e,t,n){var r=this;r._body.push(e),n()},p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=!0,r.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},p.prototype.end=function(e,t,n){var r=this;"function"==typeof e&&(n=e,e=void 0),c.Writable.prototype.end.call(r,e,t,n)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(t,n(1).Buffer,function(){return this}(),n(2))},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(255),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t,n){var r=n(1).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;
if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(r.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,i=0;i<n;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){"use strict";function n(e,t,i,a,o){var u=null!==a&&void 0!==a,s=null!==i&&void 0!==i,f=r(e);if(s&&("number"!=typeof i||i<0||i===1/0))throw new Error("Expected positive finite index or child node");if(u&&(!n(null,a)||!a.children))throw new Error("Expected parent node");if(!t||!t.type||"string"!=typeof t.type)return!1;if(u!==s)throw new Error("Expected both parent and index");return Boolean(f.call(o,t,i,a))}function r(e){if("string"==typeof e)return u(e);if(null===e||void 0===e)return s;if("object"==typeof e)return("length"in e?o:a)(e);if("function"==typeof e)return e;throw new Error("Expected function, string, or object as test")}function i(e){for(var t=[],n=e.length,i=-1;++i<n;)t[i]=r(e[i]);return t}function a(e){function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}return t}function o(e){function t(){for(var e=-1;++e<r;)if(n[e].apply(this,arguments))return!0;return!1}var n=i(e),r=n.length;return t}function u(e){function t(t){return Boolean(t&&t.type===e)}return t}function s(){return!0}e.exports=n},function(e,t,n){var r;(function(e,i){!function(a){function o(e){throw RangeError(z[e])}function u(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function s(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(T,".");var i=e.split("."),a=u(i,t).join(".");return r+a}function f(e){for(var t,n,r=[],i=0,a=e.length;i<a;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<a?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function c(e){return u(e,function(e){var t="";return e>65535&&(e-=65536,t+=P(e>>>10&1023|55296),e=56320|1023&e),t+=P(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?D(e/S):e>>1,e+=D(e/t);e>N*k>>1;r+=x)e=D(e/N);return D(r+(N+1)*e/(e+M))}function p(e){var t,n,r,i,a,u,s,f,d,p,g=[],m=e.length,v=0,y=O,b=E;for(n=e.lastIndexOf(A),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&o("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(a=v,u=1,s=x;i>=m&&o("invalid-input"),f=l(e.charCodeAt(i++)),(f>=x||f>D((_-v)/u))&&o("overflow"),v+=f*u,d=s<=b?w:s>=b+k?k:s-b,!(f<d);s+=x)p=x-d,u>D(_/p)&&o("overflow"),u*=p;t=g.length+1,b=h(v-a,t,0==a),D(v/t)>_-y&&o("overflow"),y+=D(v/t),v%=t,g.splice(v++,0,y)}return c(g)}function g(e){var t,n,r,i,a,u,s,c,l,p,g,m,v,y,b,M=[];for(e=f(e),m=e.length,t=O,n=0,a=E,u=0;u<m;++u)g=e[u],g<128&&M.push(P(g));for(r=i=M.length,i&&M.push(A);r<m;){for(s=_,u=0;u<m;++u)g=e[u],g>=t&&g<s&&(s=g);for(v=r+1,s-t>D((_-n)/v)&&o("overflow"),n+=(s-t)*v,t=s,u=0;u<m;++u)if(g=e[u],g<t&&++n>_&&o("overflow"),g==t){for(c=n,l=x;p=l<=a?w:l>=a+k?k:l-a,!(c<p);l+=x)b=c-p,y=x-p,M.push(P(d(p+b%y,0))),c=D(b/y);M.push(P(d(c,0))),a=h(n,v,r==i),n=0,++r}++n,++t}return M.join("")}function m(e){return s(e,function(e){return C.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return s(e,function(e){return R.test(e)?"xn--"+g(e):e})}var y=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof i&&i);y.global!==y&&y.window!==y&&y.self!==y||(a=y);var b,_=2147483647,x=36,w=1,k=26,M=38,S=700,E=72,O=128,A="-",C=/^xn--/,R=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=x-w,D=Math.floor,P=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:f,encode:c},decode:p,encode:g,toASCII:v,toUnicode:m},r=function(){return b}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(268)(e),function(){return this}())},function(e,t){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t){(function(t){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,function(){return this}())},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){(function(t){!function(t,r){e.exports=r(n(55),n(267))}(this,function(e,n){"use strict";function r(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),mt.hasOwnProperty(t)?{space:mt[t],local:e}:e}function i(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gt&&t.documentElement.namespaceURI===gt?t.createElement(e):t.createElementNS(n,e)}}function a(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o(e){var t=r(e);return(t.local?a:i)(t)}function u(){}function s(e){return null==e?u:function(){return this.querySelector(e)}}function f(e){"function"!=typeof e&&(e=s(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,u=t[i],f=u.length,c=r[i]=new Array(f),l=0;l<f;++l)(a=u[l])&&(o=e.call(a,a.__data__,l,u))&&("__data__"in a&&(o.__data__=a.__data__),c[l]=o);return new Pe(r,this._parents)}function c(){return[]}function l(e){return null==e?c:function(){return this.querySelectorAll(e)}}function d(e){"function"!=typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,u=t[a],s=u.length,f=0;f<s;++f)(o=u[f])&&(r.push(e.call(o,o.__data__,f,u)),i.push(o));return new Pe(r,i)}function h(e){"function"!=typeof e&&(e=_t(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],u=o.length,s=r[i]=[],f=0;f<u;++f)(a=o[f])&&e.call(a,a.__data__,f,o)&&s.push(a);return new Pe(r,this._parents)}function p(e){return new Array(e.length)}function g(){return new Pe(this._enter||this._groups.map(p),this._parents)}function m(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function v(e){return function(){return e}}function y(e,t,n,r,i,a){for(var o,u=0,s=t.length,f=a.length;u<f;++u)(o=t[u])?(o.__data__=a[u],r[u]=o):n[u]=new m(e,a[u]);for(;u<s;++u)(o=t[u])&&(i[u]=o)}function b(e,t,n,r,i,a,o){var u,s,f,c={},l=t.length,d=a.length,h=new Array(l);for(u=0;u<l;++u)(s=t[u])&&(h[u]=f=xt+o.call(s,s.__data__,u,t),f in c?i[u]=s:c[f]=s);for(u=0;u<d;++u)f=xt+o.call(e,a[u],u,a),(s=c[f])?(r[u]=s,s.__data__=a[u],c[f]=null):n[u]=new m(e,a[u]);for(u=0;u<l;++u)(s=t[u])&&c[h[u]]===s&&(i[u]=s)}function _(e,t){if(!e)return h=new Array(this.size()),f=-1,this.each(function(e){h[++f]=e}),h;var n=t?b:y,r=this._parents,i=this._groups;"function"!=typeof e&&(e=v(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),f=0;f<a;++f){var c=r[f],l=i[f],d=l.length,h=e.call(c,c&&c.__data__,f,r),p=h.length,g=u[f]=new Array(p),m=o[f]=new Array(p),_=s[f]=new Array(d);n(c,l,g,m,_,h,t);for(var x,w,k=0,M=0;k<p;++k)if(x=g[k]){for(k>=M&&(M=k+1);!(w=m[M])&&++M<p;);x._next=w||null}}return o=new Pe(o,r),o._enter=u,o._exit=s,o}function x(){return new Pe(this._exit||this._groups.map(p),this._parents)}function w(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s,f=t[u],c=n[u],l=f.length,d=o[u]=new Array(l),h=0;h<l;++h)(s=f[h]||c[h])&&(d[h]=s);for(;u<r;++u)o[u]=t[u];return new Pe(o,this._parents)}function k(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this}function M(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=S);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,u=n[a],s=u.length,f=i[a]=new Array(s),c=0;c<s;++c)(o=u[c])&&(f[c]=o);f.sort(t)}return new Pe(i,this._parents).order()}function S(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function E(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function O(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function A(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function C(){var e=0;return this.each(function(){++e}),e}function R(){return!this.node()}function T(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,u=a.length;o<u;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this}function z(e){return function(){this.removeAttribute(e)}}function N(e){return function(){this.removeAttributeNS(e.space,e.local)}}function D(e,t){return function(){this.setAttribute(e,t)}}function P(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function L(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function q(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $(e,t){var n=r(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?N:z:"function"==typeof t?n.local?q:L:n.local?P:D)(n,t))}function j(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function F(e){return function(){this.style.removeProperty(e)}}function I(e,t,n){return function(){this.style.setProperty(e,t,n)}}function U(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function B(e,t,n){return arguments.length>1?this.each((null==t?F:"function"==typeof t?U:I)(e,t,null==n?"":n)):W(this.node(),e)}function W(e,t){return e.style.getPropertyValue(t)||j(e).getComputedStyle(e,null).getPropertyValue(t)}function G(e){return function(){delete this[e]}}function Y(e,t){return function(){this[e]=t}}function H(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function V(e,t){return arguments.length>1?this.each((null==t?G:"function"==typeof t?H:Y)(e,t)):this.node()[e]}function X(e){return e.trim().split(/^|\s+/)}function Z(e){return e.classList||new J(e)}function J(e){this._node=e,this._names=X(e.getAttribute("class")||"")}function Q(e,t){for(var n=Z(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function K(e,t){for(var n=Z(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ee(e){return function(){Q(this,e)}}function te(e){return function(){K(this,e)}}function ne(e,t){return function(){(t.apply(this,arguments)?Q:K)(this,e)}}function re(e,t){var n=X(e+"");if(arguments.length<2){for(var r=Z(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?ne:t?ee:te)(n,t))}function ie(){this.textContent=""}function ae(e){return function(){this.textContent=e}}function oe(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ue(e){return arguments.length?this.each(null==e?ie:("function"==typeof e?oe:ae)(e)):this.node().textContent}function se(){this.innerHTML=""}function fe(e){return function(){this.innerHTML=e}}function ce(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function le(e){return arguments.length?this.each(null==e?se:("function"==typeof e?ce:fe)(e)):this.node().innerHTML}function de(){this.nextSibling&&this.parentNode.appendChild(this)}function he(){return this.each(de)}function pe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ge(){return this.each(pe)}function me(e){var t="function"==typeof e?e:o(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ve(){return null}function ye(e,t){var n="function"==typeof e?e:o(e),r=null==t?ve:"function"==typeof t?t:s(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function be(){var e=this.parentNode;e&&e.removeChild(this)}function _e(){return this.each(be)}function xe(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function we(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function ke(e){return this.select(e?we:xe)}function Me(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Se(e,t,n){return e=Ee(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function Ee(e,t,n){return function(r){var i=kt;kt=r;try{e.call(this,this.__data__,t,n)}finally{kt=i}}}function Oe(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function Ae(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function Ce(e,t,n){var r=wt.hasOwnProperty(e.type)?Se:Ee;return function(i,a,o){var u,s=this.__on,f=r(t,a,o);if(s)for(var c=0,l=s.length;c<l;++c)if((u=s[c]).type===e.type&&u.name===e.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=f,u.capture=n),void(u.value=t);this.addEventListener(e.type,f,n),u={type:e.type,name:e.name,value:t,listener:f,capture:n},s?s.push(u):this.__on=[u]}}function Re(e,t,n){var r,i,a=Oe(e+""),o=a.length;{if(!(arguments.length<2)){for(u=t?Ce:Ae,null==n&&(n=!1),r=0;r<o;++r)this.each(u(a[r],t,n));return this}var u=this.node().__on;if(u)for(var s,f=0,c=u.length;f<c;++f)for(r=0,s=u[f];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value}}function Te(e,t,n){var r=j(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ze(e,t){return function(){return Te(this,e,t)}}function Ne(e,t){return function(){return Te(this,e,t.apply(this,arguments))}}function De(e,t){return this.each(("function"==typeof t?Ne:ze)(e,t))}function Pe(e,t){this._groups=e,this._parents=t}function Le(){return new Pe([[document.documentElement]],St)}function qe(e){return"string"==typeof e?new Pe([[document.querySelector(e)]],[document.documentElement]):new Pe([[e]],St)}function $e(e,t,n){return e.fields=t||[],e.fname=n,e}function je(e){throw Error(e)}function Fe(e){function t(){a.push(f+e.substring(n,r)),f="",n=r+1}var n,r,i,a=[],o=null,u=0,s=e.length,f="";for(e+="",n=r=0;r<s;++r)if(i=e[r],"\\"===i)f+=e.substring(n,r),n=++r;else if(i===o)t(),o=null,u=-1;else{if(o)continue;n===u&&'"'===i?(n=r+1,o=i):n===u&&"'"===i?(n=r+1,o=i):"."!==i||u?"["===i?(r>n&&t(),u=n=r+1):"]"===i&&(u||je("Access path missing open bracket: "+e),u>0&&t(),u=0,n=r+1):r>n?t():n=r+1}return u&&je("Access path missing closing bracket: "+e),o&&je("Access path missing closing quote: "+e),r>n&&(r++,t()),a}function Ie(e){return e===Object(e)}function Ue(e){return"string"==typeof e}function Be(e){return Et(e)?"["+e.map(Be)+"]":Ie(e)||Ue(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function We(e,t){var n=Fe(e),r="return _["+n.map(Be).join("][")+"];";return $e(Function("_",r),[e=1===n.length?n[0]:e],t||e)}function Ge(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function Ye(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,u)}s((r=r.apply(e,t||[])).next())})}function He(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(o=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(o=o.call(a,n[1])).done)return o;switch(a=0,o&&(n=[0,o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,a=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],a=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,a,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function Ve(e,t){t=t||{};var n=JSON.stringify([1],null,Ze(t,"indent",2)).slice(2,-3),r=Ze(t,"margins",!1),i=""===n?1/0:Ze(t,"maxLength",80);return function e(t,a,o){t&&"function"==typeof t.toJSON&&(t=t.toJSON());var u=JSON.stringify(t);if(void 0===u)return u;var s=i-a.length-o;if(u.length<=s){var f=Xe(u,r);if(f.length<=s)return f}if("object"==typeof t&&null!==t){var c,l=a+n,d=[],h=function(e,t){return t===e.length-1?0:1};if(Array.isArray(t)){for(var p=0;p<t.length;p++)d.push(e(t[p],l,h(t,p))||"null");c="[]"}else Object.keys(t).forEach(function(n,r,i){var a=JSON.stringify(n)+": ",o=e(t[n],l,a.length+h(i,r));void 0!==o&&d.push(a+o)}),c="{}";if(d.length>0)return[c[0],n+d.join(",\n"+l),c[1]].join("\n"+a)}return u}(e,"",0)}function Xe(e,t){var n=t?" ":"",r={"{":"{"+n,"[":"["+n,"}":n+"}","]":n+"]",",":", ",":":": "};return e.replace(Ct,function(e,t){return t?e:r[e]})}function Ze(e,t,n){return t in e?e[t]:n}function Je(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Qe(e,t){return t={exports:{}},e(t,t.exports),t.exports}function Ke(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function et(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Xt.replace(Zt,e)}function tt(e,t,n){if(Et(e))return"["+e.map(function(e){return t(Ue(e)?e:rt(e,n))}).join(", ")+"]";if(Ie(e)){var r="",i=e,a=i.title,o=Ge(i,["title"]);a&&(r+="<h2>"+t(a)+"</h2>");var u=Object.keys(o);if(u.length>0){r+="<table>";for(var s=0,f=u;s<f.length;s++){var c=f[s],l=o[c];Ie(l)&&(l=rt(l,n)),r+='<tr><td class="key">'+t(c)+':</td><td class="value">'+t(l)+"</td></tr>"}r+="</table>"}return r||"{}"}return t(e)}function nt(e){var t=[];return function(n,r){if("object"!=typeof r||null===r)return r;var i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function rt(e,t){return JSON.stringify(e,nt(t))}function it(e,t,n,r){var i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);var a=e.clientY+r;return a+t.height>window.innerHeight&&(a=+e.clientY-r-t.height),{x:i,y:a}}function at(e,t,n){function r(t){t.source===a&&(s=0,e.removeEventListener("message",r,!1))}function i(){s<=0||(a.postMessage(n,"*"),setTimeout(i,u),s-=1)}var a=e.open(t),o=1e4,u=250,s=~~(o/u);e.addEventListener("message",r,!1),setTimeout(i,u)}function ot(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];e=ut(e,a)}return e}function ut(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||Et(t[n])||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=ot(Et(t[n].constructor)?[]:{},t[n]):ot(e[n],t[n]));return e}function st(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")}function ft(e){return"function"==typeof e}function ct(e,t,n,r){var i="<html><head>"+t+'</head><body><pre><code class="json">',a="</code></pre>"+n+"</body></html>",o=window.open("");o.document.write(i+e+a),o.document.title=rn[r]+" JSON Source"}function lt(e,t){var n;if(e.$schema){n=Pt(e.$schema),t&&t!==n.library&&console.warn("The given visualization spec is written in "+rn[n.library]+", but mode argument sets "+rn[t]+".");var r=n.library;return Nt(an[r],"^"+n.version.slice(1))||console.warn("The input spec uses "+r+" "+n.version+", but the current version of "+rn[r]+" is "+an[r]+"."),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t||"vega"}function dt(e,t,n){return void 0===n&&(n={}),Ye(this,void 0,void 0,function(){var r,i,a,o,u,s,u,f,c,l,d,h,p,g,m,v,y,b,_,x,w,k,M;return He(this,function(S){switch(S.label){case 0:return n=n||{},r=n.actions===!0||n.actions===!1?n.actions:ot({},{export:{svg:!0,png:!0},source:!0,compiled:!1,editor:!0},n.actions||{}),i=n.loader||tn.loader(),a=n.renderer||"canvas",o=n.logLevel||tn.Warn,tn.isString(t)?[4,i.load(t)]:[3,2];case 1:return u=S.sent(),[2,dt(e,JSON.parse(u),n)];case 2:return s=n.config||{},tn.isString(s)?[4,i.load(s)]:[3,4];case 3:return u=S.sent(),[2,dt(e,t,At({},n,{config:JSON.parse(u)}))];case 4:return n.defaultStyle&&(f="vega-embed-style",document.getElementById(f)||(c=document.createElement("style"),c.id=f,c.innerText=n.defaultStyle===!0?(Kt||"").toString():n.defaultStyle,document.getElementsByTagName("head")[0].appendChild(c))),n.theme&&(s=ot({},Vt[n.theme],s)),l=lt(t,n.mode),d=on[l](t,s),"vega-lite"===l&&d.$schema&&(h=Pt(d.$schema),Nt(an.vega,"^"+h.version.slice(1))||console.warn("The compiled spec uses Vega "+h.version+", but current version is "+an.vega+".")),p=qe(e).classed("vega-embed",!0).html(""),n.onBeforeParse&&(d=n.onBeforeParse(d)),g=tn.parse(d,"vega-lite"===l?{}:s),m=new tn.View(g,{loader:i,logLevel:o,renderer:a}).initialize(e),n.tooltip!==!1&&(v=void 0,v=ft(n.tooltip)?n.tooltip:new Qt(n.tooltip===!0?{}:n.tooltip).call,m.tooltip(v)),(void 0===n.hover?"vega-lite"!==l:n.hover)&&m.hover(),n&&(n.width&&m.width(n.width),n.height&&m.height(n.height),n.padding&&m.padding(n.padding)),n.runAsync?[4,m.runAsync()]:[3,6];case 5:return S.sent(),[3,7];case 6:m.run(),S.label=7;case 7:if(r!==!1){if(y=p.append("div").attr("class","vega-actions-wrapper"),n.defaultStyle===!0&&y.html(un),b=y.insert("div").attr("class","vega-actions"),r===!0||r.export!==!1)for(_=function(e){(r===!0||r.export===!0||r.export[e])&&b.append("a").text("Export as "+e.toUpperCase()).attr("href","#").attr("target","_blank").attr("download","visualization."+e).on("mousedown",function(){var t=this;m.toImageURL(e,n.scaleFactor).then(function(e){t.href=e}).catch(function(e){throw e}),kt.preventDefault()})},x=0,w=["svg","png"];x<w.length;x++)k=w[x],_(k);r!==!0&&r.source===!1||b.append("a").text("View Source").attr("href","#").on("click",function(){ct(en(t),n.sourceHeader||"",n.sourceFooter||"",l),kt.preventDefault()}),"vega-lite"!==l||r!==!0&&r.compiled===!1||b.append("a").text("View Vega").attr("href","#").on("click",function(){ct(en(d),n.sourceHeader||"",n.sourceFooter||"","vega"),kt.preventDefault()}),r!==!0&&r.editor===!1||(M=n.editorUrl||"https://vega.github.io/editor/",b.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){at(window,M,{config:s,mode:l,renderer:a,spec:en(t)}),kt.preventDefault()}))}return[2,{view:m,spec:t}]}})})}function ht(e,t){return void 0===t&&(t={}),Ye(this,void 0,void 0,function(){var n,r;return He(this,function(i){return n=document.createElement("div"),r=t.actions===!0||t.actions===!1?t.actions:At({export:!0,source:!1,compiled:!0,editor:!0},t.actions||{}),[2,dt(n,e,At({actions:r,defaultStyle:!0,runAsync:!0},t||{})).then(function(e){return n.value=e.view,n})]})})}function pt(e){return e instanceof Le||"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}var gt="http://www.w3.org/1999/xhtml",mt={svg:"http://www.w3.org/2000/svg",xhtml:gt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},vt=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var yt=document.documentElement;if(!yt.matches){var bt=yt.webkitMatchesSelector||yt.msMatchesSelector||yt.mozMatchesSelector||yt.oMatchesSelector;vt=function(e){return function(){return bt.call(this,e)}}}}var _t=vt;m.prototype={constructor:m,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var xt="$";J.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var wt={},kt=null;if("undefined"!=typeof document){var Mt=document.documentElement;"onmouseenter"in Mt||(wt={mouseenter:"mouseover",mouseleave:"mouseout"})}var St=[null];Pe.prototype=Le.prototype={constructor:Pe,select:f,selectAll:d,filter:h,data:_,enter:g,exit:x,merge:w,order:k,sort:M,call:E,nodes:O,node:A,size:C,empty:R,each:T,attr:$,style:B,property:V,classed:re,text:ue,html:le,raise:he,lower:ge,append:me,insert:ye,remove:_e,clone:ke,datum:Me,on:Re,dispatch:De};var Et=Array.isArray,Ot=[],At=(We("id"),$e(function(e){return e},Ot,"identity"),$e(function(){return 0},Ot,"zero"),$e(function(){return 1},Ot,"one"),$e(function(){return!0},Ot,"true"),$e(function(){return!1},Ot,"false"),Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}),Ct=/("(?:[^\\"]|\\.)*")|[:,\][}{]/g,Rt=Ve,Tt=Object.freeze({default:Rt,__moduleExports:Rt}),zt=Qe(function(e,n){function r(e,t){if(e instanceof o)return e;if("string"!=typeof e)return null;if(e.length>J)return null;var n=t?ee[ve]:ee[pe];if(!n.test(e))return null;try{return new o(e,t)}catch(e){return null}}function i(e,t){var n=r(e,t);return n?n.version:null}function a(e,t){var n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}function o(e,t){if(e instanceof o){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>J)throw new TypeError("version is longer than "+J+" characters");if(!(this instanceof o))return new o(e,t);Z("SemVer",e,t),this.loose=t;var n=e.trim().match(t?ee[ve]:ee[pe]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Q||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Q||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Q||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<Q)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}function u(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new o(e,n).inc(t,r).version}catch(e){return null}}function s(e,t){if(x(e,t))return null;var n=r(e),i=r(t);if(n.prerelease.length||i.prerelease.length){for(var a in n)if(("major"===a||"minor"===a||"patch"===a)&&n[a]!==i[a])return"pre"+a;return"prerelease"}for(var a in n)if(("major"===a||"minor"===a||"patch"===a)&&n[a]!==i[a])return a}function f(e,t){var n=We.test(e),r=We.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}function c(e,t){return f(t,e)}function l(e,t){return new o(e,t).major}function d(e,t){return new o(e,t).minor}function h(e,t){return new o(e,t).patch}function p(e,t,n){return new o(e,n).compare(new o(t,n))}function g(e,t){return p(e,t,!0)}function m(e,t,n){return p(t,e,n)}function v(e,t){return e.sort(function(e,r){return n.compare(e,r,t)})}function y(e,t){return e.sort(function(e,r){return n.rcompare(e,r,t)})}function b(e,t,n){return p(e,t,n)>0}function _(e,t,n){return p(e,t,n)<0}function x(e,t,n){return 0===p(e,t,n)}function w(e,t,n){return 0!==p(e,t,n)}function k(e,t,n){return p(e,t,n)>=0}function M(e,t,n){return p(e,t,n)<=0}function S(e,t,n,r){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e!==n;break;case"":case"=":case"==":i=x(e,n,r);break;case"!=":i=w(e,n,r);break;case">":i=b(e,n,r);break;case">=":i=k(e,n,r);break;case"<":i=_(e,n,r);break;case"<=":i=M(e,n,r);break;default:throw new TypeError("Invalid operator: "+t)}return i}function E(e,t){if(e instanceof E){if(e.loose===t)return e;e=e.value}return this instanceof E?(Z("comparator",e,t),this.loose=t,this.parse(e),this.semver===Ge?this.value="":this.value=this.operator+this.semver.version,void Z("comp",this)):new E(e,t)}function O(e,t){if(e instanceof O)return e.loose===t?e:new O(e.raw,t);if(e instanceof E)return new O(e.value,t);if(!(this instanceof O))return new O(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function A(e,t){return new O(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})}function C(e,t){return Z("comp",e),e=N(e,t),Z("caret",e),e=T(e,t),Z("tildes",e),e=P(e,t),Z("xrange",e),e=q(e,t),Z("stars",e),e}function R(e){return!e||"x"===e.toLowerCase()||"*"===e}function T(e,t){return e.trim().split(/\s+/).map(function(e){return z(e,t)}).join(" ")}function z(e,t){var n=t?ee[Re]:ee[Ce];return e.replace(n,function(t,n,r,i,a){Z("tilde",e,t,n,r,i,a);var o;return R(n)?o="":R(r)?o=">="+n+".0.0 <"+(+n+1)+".0.0":R(i)?o=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":a?(Z("replaceTilde pr",a),"-"!==a.charAt(0)&&(a="-"+a),o=">="+n+"."+r+"."+i+a+" <"+n+"."+(+r+1)+".0"):o=">="+n+"."+r+"."+i+" <"+n+"."+(+r+1)+".0",Z("tilde return",o),o})}function N(e,t){return e.trim().split(/\s+/).map(function(e){return D(e,t)}).join(" ")}function D(e,t){Z("caret",e,t);var n=t?ee[Pe]:ee[De];return e.replace(n,function(t,n,r,i,a){Z("caret",e,t,n,r,i,a);var o;return R(n)?o="":R(r)?o=">="+n+".0.0 <"+(+n+1)+".0.0":R(i)?o="0"===n?">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":">="+n+"."+r+".0 <"+(+n+1)+".0.0":a?(Z("replaceCaret pr",a),"-"!==a.charAt(0)&&(a="-"+a),o="0"===n?"0"===r?">="+n+"."+r+"."+i+a+" <"+n+"."+r+"."+(+i+1):">="+n+"."+r+"."+i+a+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+i+a+" <"+(+n+1)+".0.0"):(Z("no pr"),o="0"===n?"0"===r?">="+n+"."+r+"."+i+" <"+n+"."+r+"."+(+i+1):">="+n+"."+r+"."+i+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+i+" <"+(+n+1)+".0.0"),Z("caret return",o),o})}function P(e,t){return Z("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return L(e,t)}).join(" ")}function L(e,t){e=e.trim();var n=t?ee[Me]:ee[ke];return e.replace(n,function(t,n,r,i,a,o){Z("xRange",e,t,n,r,i,a,o);var u=R(r),s=u||R(i),f=s||R(a),c=f;return"="===n&&c&&(n=""),u?t=">"===n||"<"===n?"<0.0.0":"*":n&&c?(s&&(i=0),f&&(a=0),">"===n?(n=">=",s?(r=+r+1,i=0,a=0):f&&(i=+i+1,a=0)):"<="===n&&(n="<",s?r=+r+1:i=+i+1),t=n+r+"."+i+"."+a):s?t=">="+r+".0.0 <"+(+r+1)+".0.0":f&&(t=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0"),
Z("xRange return",t),t})}function q(e,t){return Z("replaceStars",e,t),e.trim().replace(ee[Ue],"")}function $(e,t,n,r,i,a,o,u,s,f,c,l,d){return t=R(n)?"":R(r)?">="+n+".0.0":R(i)?">="+n+"."+r+".0":">="+t,u=R(s)?"":R(f)?"<"+(+s+1)+".0.0":R(c)?"<"+s+"."+(+f+1)+".0":l?"<="+s+"."+f+"."+c+"-"+l:"<="+u,(t+" "+u).trim()}function j(e,t){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length){for(var n=0;n<e.length;n++)if(Z(e[n].semver),e[n].semver!==Ge&&e[n].semver.prerelease.length>0){var r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}function F(e,t,n){try{t=new O(t,n)}catch(e){return!1}return t.test(e)}function I(e,t,n){var r=null,i=null;try{var a=new O(t,n)}catch(e){return null}return e.forEach(function(e){a.test(e)&&(r&&i.compare(e)!==-1||(r=e,i=new o(r,n)))}),r}function U(e,t,n){var r=null,i=null;try{var a=new O(t,n)}catch(e){return null}return e.forEach(function(e){a.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new o(r,n)))}),r}function B(e,t){try{return new O(e,t).range||"*"}catch(e){return null}}function W(e,t,n){return Y(e,t,"<",n)}function G(e,t,n){return Y(e,t,">",n)}function Y(e,t,n,r){e=new o(e,r),t=new O(t,r);var i,a,u,s,f;switch(n){case">":i=b,a=M,u=_,s=">",f=">=";break;case"<":i=_,a=k,u=b,s="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(F(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],d=null,h=null;if(l.forEach(function(e){e.semver===Ge&&(e=new E(">=0.0.0")),d=d||e,h=h||e,i(e.semver,d.semver,r)?d=e:u(e.semver,h.semver,r)&&(h=e)}),d.operator===s||d.operator===f)return!1;if((!h.operator||h.operator===s)&&a(e,h.semver))return!1;if(h.operator===f&&u(e,h.semver))return!1}return!0}function H(e,t){var n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}function V(e,t,n){return e=new O(e,n),t=new O(t,n),e.intersects(t)}function X(e){if(e instanceof o)return e;if("string"!=typeof e)return null;var t=e.match(ee[Se]);return null==t?null:r((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}n=e.exports=o;var Z;Z="object"==typeof t&&{NODE_ENV:"production",PUBLIC_DIR:"/www/gatsby-remark-vega-example/public"}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",PUBLIC_DIR:"/www/gatsby-remark-vega-example/public"}.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},n.SEMVER_SPEC_VERSION="2.0.0";var J=256,Q=Number.MAX_SAFE_INTEGER||9007199254740991,K=16,ee=n.re=[],te=n.src=[],ne=0,re=ne++;te[re]="0|[1-9]\\d*";var ie=ne++;te[ie]="[0-9]+";var ae=ne++;te[ae]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var oe=ne++;te[oe]="("+te[re]+")\\.("+te[re]+")\\.("+te[re]+")";var ue=ne++;te[ue]="("+te[ie]+")\\.("+te[ie]+")\\.("+te[ie]+")";var se=ne++;te[se]="(?:"+te[re]+"|"+te[ae]+")";var fe=ne++;te[fe]="(?:"+te[ie]+"|"+te[ae]+")";var ce=ne++;te[ce]="(?:-("+te[se]+"(?:\\."+te[se]+")*))";var le=ne++;te[le]="(?:-?("+te[fe]+"(?:\\."+te[fe]+")*))";var de=ne++;te[de]="[0-9A-Za-z-]+";var he=ne++;te[he]="(?:\\+("+te[de]+"(?:\\."+te[de]+")*))";var pe=ne++,ge="v?"+te[oe]+te[ce]+"?"+te[he]+"?";te[pe]="^"+ge+"$";var me="[v=\\s]*"+te[ue]+te[le]+"?"+te[he]+"?",ve=ne++;te[ve]="^"+me+"$";var ye=ne++;te[ye]="((?:<|>)?=?)";var be=ne++;te[be]=te[ie]+"|x|X|\\*";var _e=ne++;te[_e]=te[re]+"|x|X|\\*";var xe=ne++;te[xe]="[v=\\s]*("+te[_e]+")(?:\\.("+te[_e]+")(?:\\.("+te[_e]+")(?:"+te[ce]+")?"+te[he]+"?)?)?";var we=ne++;te[we]="[v=\\s]*("+te[be]+")(?:\\.("+te[be]+")(?:\\.("+te[be]+")(?:"+te[le]+")?"+te[he]+"?)?)?";var ke=ne++;te[ke]="^"+te[ye]+"\\s*"+te[xe]+"$";var Me=ne++;te[Me]="^"+te[ye]+"\\s*"+te[we]+"$";var Se=ne++;te[Se]="(?:^|[^\\d])(\\d{1,"+K+"})(?:\\.(\\d{1,"+K+"}))?(?:\\.(\\d{1,"+K+"}))?(?:$|[^\\d])";var Ee=ne++;te[Ee]="(?:~>?)";var Oe=ne++;te[Oe]="(\\s*)"+te[Ee]+"\\s+",ee[Oe]=new RegExp(te[Oe],"g");var Ae="$1~",Ce=ne++;te[Ce]="^"+te[Ee]+te[xe]+"$";var Re=ne++;te[Re]="^"+te[Ee]+te[we]+"$";var Te=ne++;te[Te]="(?:\\^)";var ze=ne++;te[ze]="(\\s*)"+te[Te]+"\\s+",ee[ze]=new RegExp(te[ze],"g");var Ne="$1^",De=ne++;te[De]="^"+te[Te]+te[xe]+"$";var Pe=ne++;te[Pe]="^"+te[Te]+te[we]+"$";var Le=ne++;te[Le]="^"+te[ye]+"\\s*("+me+")$|^$";var qe=ne++;te[qe]="^"+te[ye]+"\\s*("+ge+")$|^$";var $e=ne++;te[$e]="(\\s*)"+te[ye]+"\\s*("+me+"|"+te[xe]+")",ee[$e]=new RegExp(te[$e],"g");var je="$1$2$3",Fe=ne++;te[Fe]="^\\s*("+te[xe]+")\\s+-\\s+("+te[xe]+")\\s*$";var Ie=ne++;te[Ie]="^\\s*("+te[we]+")\\s+-\\s+("+te[we]+")\\s*$";var Ue=ne++;te[Ue]="(<|>)?=?\\s*\\*";for(var Be=0;Be<ne;Be++)Z(Be,te[Be]),ee[Be]||(ee[Be]=new RegExp(te[Be]));n.parse=r,n.valid=i,n.clean=a,n.SemVer=o,o.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},o.prototype.toString=function(){return this.version},o.prototype.compare=function(e){return Z("SemVer.compare",this.version,this.loose,e),e instanceof o||(e=new o(e,this.loose)),this.compareMain(e)||this.comparePre(e)},o.prototype.compareMain=function(e){return e instanceof o||(e=new o(e,this.loose)),f(this.major,e.major)||f(this.minor,e.minor)||f(this.patch,e.patch)},o.prototype.comparePre=function(e){if(e instanceof o||(e=new o(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(Z("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return f(n,r)}while(++t)},o.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},n.inc=u,n.diff=s,n.compareIdentifiers=f;var We=/^[0-9]+$/;n.rcompareIdentifiers=c,n.major=l,n.minor=d,n.patch=h,n.compare=p,n.compareLoose=g,n.rcompare=m,n.sort=v,n.rsort=y,n.gt=b,n.lt=_,n.eq=x,n.neq=w,n.gte=k,n.lte=M,n.cmp=S,n.Comparator=E;var Ge={};E.prototype.parse=function(e){var t=this.loose?ee[Le]:ee[qe],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new o(n[2],this.loose):this.semver=Ge},E.prototype.toString=function(){return this.value},E.prototype.test=function(e){return Z("Comparator.test",e,this.loose),this.semver===Ge||("string"==typeof e&&(e=new o(e,this.loose)),S(e,this.operator,this.semver,this.loose))},E.prototype.intersects=function(e,t){if(!(e instanceof E))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new O(e.value,t),F(this.value,n,t);if(""===e.operator)return n=new O(this.value,t),F(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),a=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),u=S(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=S(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||a&&o||u||s},n.Range=O,O.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},O.prototype.toString=function(){return this.range},O.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),Z("range",e,t);var n=t?ee[Ie]:ee[Fe];e=e.replace(n,$),Z("hyphen replace",e),e=e.replace(ee[$e],je),Z("comparator trim",e,ee[$e]),e=e.replace(ee[Oe],Ae),e=e.replace(ee[ze],Ne),e=e.split(/\s+/).join(" ");var r=t?ee[Le]:ee[qe],i=e.split(" ").map(function(e){return C(e,t)}).join(" ").split(/\s+/);return this.loose&&(i=i.filter(function(e){return!!e.match(r)})),i=i.map(function(e){return new E(e,t)})},O.prototype.intersects=function(e,t){if(!(e instanceof O))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},n.toComparators=A,O.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new o(e,this.loose));for(var t=0;t<this.set.length;t++)if(j(this.set[t],e))return!0;return!1},n.satisfies=F,n.maxSatisfying=I,n.minSatisfying=U,n.validRange=B,n.ltr=W,n.gtr=G,n.outside=Y,n.prerelease=H,n.intersects=V,n.coerce=X}),Nt=(zt.SEMVER_SPEC_VERSION,zt.re,zt.src,zt.parse,zt.valid,zt.clean,zt.SemVer,zt.inc,zt.diff,zt.compareIdentifiers,zt.rcompareIdentifiers,zt.major,zt.minor,zt.patch,zt.compare,zt.compareLoose,zt.rcompare,zt.sort,zt.rsort,zt.gt,zt.lt,zt.eq,zt.neq,zt.gte,zt.lte,zt.cmp,zt.Comparator,zt.Range,zt.toComparators,zt.satisfies),Dt=(zt.maxSatisfying,zt.minSatisfying,zt.validRange,zt.ltr,zt.gtr,zt.outside,zt.prerelease,zt.intersects,zt.coerce,Qe(function(e,t){function n(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g,n=t.exec(e).slice(1,3),r=n[0],i=n[1];return{library:r,version:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n})),Pt=Je(Dt),Lt="#4572a7",qt={background:"#fff",arc:{fill:Lt},area:{fill:Lt},line:{stroke:Lt,strokeWidth:2},path:{stroke:Lt},rect:{fill:Lt},shape:{stroke:Lt},symbol:{fill:Lt,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},$t="#000",jt={group:{fill:"#e5e5e5"},arc:{fill:$t},area:{fill:$t},line:{stroke:$t},path:{stroke:$t},rect:{fill:$t},shape:{stroke:$t},symbol:{fill:$t,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Ft="#ab5787",It="#979797",Ut={background:"#f9f9f9",arc:{fill:Ft},area:{fill:Ft},line:{stroke:Ft},path:{stroke:Ft},rect:{fill:Ft},shape:{stroke:Ft},symbol:{fill:Ft,size:30},axis:{domainColor:It,domainWidth:.5,gridWidth:.2,labelColor:It,tickColor:It,tickWidth:.2,titleColor:It},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Bt="#3e5c69",Wt={background:"#fff",arc:{fill:Bt},area:{fill:Bt},line:{stroke:Bt},path:{stroke:Bt},rect:{fill:Bt},shape:{stroke:Bt},symbol:{fill:Bt},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Gt="#fff",Yt="#aaa",Ht={background:"#333",title:{color:Gt},style:{"guide-label":{fill:Gt},"guide-title":{fill:Gt}},axis:{domainColor:Gt,gridColor:Yt,tickColor:Gt}},Vt=Object.freeze({excel:qt,ggplot2:jt,quartz:Ut,vox:Wt,dark:Ht}),Xt="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0,0,0,0.1);\n\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.visible {\n  visibility: visible;\n}\n#vg-tooltip-element h2 {\n  margin-top: 0;\n  margin-bottom: 10px;\n  font-size: 13px;\n}\n#vg-tooltip-element table {\n  border-spacing: 0;\n}\n#vg-tooltip-element td {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n#vg-tooltip-element td.key {\n  color: #808080;\n  max-width: 150px;\n  text-align: right;\n  padding-right: 4px;\n}\n#vg-tooltip-element td.value {\n  display: block;\n  max-width: 300px;\n  max-height: 7em;\n  text-align: left;\n}\n\n/* Dark and light color themes */\n#vg-tooltip-element.dark-theme {\n  background-color: rgba(32, 32, 32, 0.9);\n  border: 1px solid #f5f5f5;\n  color: white;\n}\n#vg-tooltip-element.dark-theme td.key {\n  color: #bfbfbf;\n}\n\n#vg-tooltip-element.light-theme {\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black;\n}\n#vg-tooltip-element.light-theme td.key {\n  color: #808080;\n}\n",Zt="vg-tooltip-element",Jt={offsetX:10,offsetY:10,id:Zt,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Ke,maxDepth:2},Qt=function(){function e(e){this.options=At({},Jt,e);var t=this.options.id;if(this.call=this.tooltip_handler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var n=document.createElement("style");n.setAttribute("id",this.options.styleId),n.innerHTML=et(t),document.head.childNodes.length>0?document.head.insertBefore(n,document.head.childNodes[0]):document.head.appendChild(n)}this.el=document.getElementById(t),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",t),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return e.prototype.tooltip_handler=function(e,t,n,r){if(null==r||""===r)return void this.el.classList.remove("visible",this.options.theme+"-theme");this.el.innerHTML=tt(r,Ke,this.options.maxDepth),this.el.classList.add("visible",this.options.theme+"-theme");var i=it(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),a=i.x,o=i.y;this.el.setAttribute("style","top: "+o+"px; left: "+a+"px")},e}(),Kt=".vega-embed {\n  position: relative;\n  display: inline-block;\n  padding-right: 38px;\n}\n\n.vega-embed .vega-actions-wrapper {\n  display: inline-flex;\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 6px;\n\n  opacity: 0.2;\n  background: white;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n  color: #1b1e23;\n  border: 1px solid #aaa;\n  border-radius: 999px;\n  transition: opacity 0.4s ease-in;\n}\n\n.vega-embed:hover .vega-actions-wrapper {\n  transition: opacity 0.2s ease;\n  opacity: 1;\n}\n\n.vega-embed .vega-actions {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: none;\n  flex-direction: column;\n\n  padding-bottom: 8px;\n  padding-top: 8px;\n  border-radius: 4px;\n  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n  border: 1px solid #d9d9d9;\n  background: white;\n}\n\n.vega-embed .vega-actions-wrapper:hover {\n  background: transparent;\n  color: transparent;\n  border: none;\n  box-shadow: none;\n}\n\n.vega-embed .vega-actions-wrapper:hover .vega-actions {\n  display: flex;\n}\n\n.vega-embed .vega-actions a {\n  padding: 8px 16px;\n  font-family: sans-serif;\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  color: #434a56;\n  text-decoration: none;\n}\n\n.vega-embed .vega-actions a:hover {\n  background-color: #f7f7f9;\n  color: #1b1e23;\n}\n",en=Rt||Tt,tn=e,nn=n,rn={vega:"Vega","vega-lite":"Vega-Lite"},an={vega:tn.version,"vega-lite":nn?nn.version:"not available"},on={vega:function(e,t){return e},"vega-lite":function(e,t){return nn.compile(e,{config:t}).spec}},un='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',sn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length>1&&(Ue(e[0])&&!st(e[0])||pt(e[0])||3===e.length)?dt(e[0],e[1],e[2]):ht(e[0],e[1])};return sn.vl=nn,sn.container=ht,sn.embed=dt,sn.vega=tn,sn.default=dt,sn})}).call(t,n(2))},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t,n){return e.fields=t||[],e.fname=n,e}function n(e){throw Error(e)}function r(e){function t(){o.push(c+e.substring(r,i)),c="",r=i+1}var r,i,a,o=[],u=null,s=0,f=e.length,c="";for(e+="",r=i=0;i<f;++i)if(a=e[i],"\\"===a)c+=e.substring(r,i),r=++i;else if(a===u)t(),u=null,s=-1;else{if(u)continue;r===s&&'"'===a?(r=i+1,u=a):r===s&&"'"===a?(r=i+1,u=a):"."!==a||s?"["===a?(i>r&&t(),s=r=i+1):"]"===a&&(s||n("Access path missing open bracket: "+e),s>0&&t(),s=0,r=i+1):i>r?t():r=i+1}return s&&n("Access path missing closing bracket: "+e),u&&n("Access path missing closing quote: "+e),i>r&&(i++,t()),o}function i(e){return e===Object(e)}function a(e){return"string"==typeof e}function o(e){return Eu(e)?"["+e.map(o)+"]":i(e)||a(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function u(e,n){var i=r(e),a="return _["+i.map(o).join("][")+"];";return t(Function("_",a),[e=1===i.length?i[0]:e],n||e)}function s(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function f(e){var t=e||Au;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=Cu&&s("error","ERROR",arguments),this},warn:function(){return t>=Ru&&s("warn","WARN",arguments),this},info:function(){return t>=Tu&&s("log","INFO",arguments),this},debug:function(){return t>=zu&&s("log","DEBUG",arguments),this}}}function c(e){return"boolean"==typeof e}function l(e){return"number"==typeof e}function d(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function h(e){return Hu.lastIndex=0,Hu.test(e)?'"'+e.replace(Hu,function(e){var t=Vu[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function p(e,t){var n,r,i,a,o,u=Uu,s=t[e];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof Wu&&(s=Wu.call(t,e,s)),typeof s){case"string":return h(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(Uu+=Bu,o=[],"[object Array]"===Object.prototype.toString.apply(s)){for(a=s.length,n=0;n<a;n+=1)o[n]=p(n,s)||"null";return i=0===o.length?"[]":Uu?"[\n"+Uu+o.join(",\n"+Uu)+"\n"+u+"]":"["+o.join(",")+"]",Uu=u,i}if(Wu&&"object"==typeof Wu)for(a=Wu.length,n=0;n<a;n+=1)r=Wu[n],"string"==typeof r&&(i=p(r,s),i&&o.push(h(r)+(Uu?": ":":")+i));else for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i=p(r,s),i&&o.push(h(r)+(Uu?": ":":")+i));return i=0===o.length?"{}":Uu?"{\n"+Uu+o.join(",\n"+Uu)+"\n"+u+"}":"{"+o.join(",")+"}",Uu=u,i}}function g(e){return!!e.or}function m(e){return!!e.and}function v(e){return!!e.not}function y(e,t){if(v(e))y(e.not,t);else if(m(e))for(var n=0,r=e.and;n<r.length;n++){var i=r[n];y(i,t)}else if(g(e))for(var a=0,o=e.or;a<o.length;a++){var i=o[a];y(i,t)}else t(e)}function b(e,t){return v(e)?{not:b(e.not,t)}:m(e)?{and:e.and.map(function(e){return b(e,t)})}:g(e)?{or:e.or.map(function(e){return b(e,t)})}:t(e)}function _(e,t){for(var n={},r=0,i=t;r<i.length;r++){var a=i[r];e.hasOwnProperty(a)&&(n[a]=e[a])}return n}function x(e,t){for(var n=$(e),r=0,i=t;r<i.length;r++){var a=i[r];delete n[a]}return n}function w(e){if(l(e))return e;var t=a(e)?e:is(e);if(t.length<100)return t;for(var n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);n=(n<<5)-n+i,n&=n}return n}function k(e,t){return e.indexOf(t)>-1}function M(e,t){return e.filter(function(e){return!k(t,e)})}function S(e,t){return e.concat(M(t,e))}function E(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1}function O(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0}function A(e){return[].concat.apply([],e)}function C(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];e=R(e,a)}return e}function R(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||Eu(t[n])||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=C(Eu(t[n].constructor)?[]:{},t[n]):C(e[n],t[n]));return e}function T(e,t){for(var n,r=[],i={},a=0,o=e;a<o.length;a++){var u=o[a];n=t(u),n in i||(i[n]=1,r.push(u))}return r}function z(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1}function N(e,t){for(var n in e)if(n in t)return!0;return!1}function D(e){return!isNaN(e)}function P(e,t){if(e.length!==t.length)return!0;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!0;return!1}function L(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function q(e){return os(e)}function $(e){return JSON.parse(JSON.stringify(e))}function j(e){return e===!0||e===!1}function F(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function I(e,t){return v(e)?"!("+I(e.not,t)+")":m(e)?"("+e.and.map(function(e){return I(e,t)}).join(") && (")+")":g(e)?"("+e.or.map(function(e){return I(e,t)}).join(") || (")+")":t(e)}function U(e,t){if(0===t.length)return!0;var n=t.shift();return U(e[n],t)&&delete e[n],0===Object.keys(e).length}function B(e){return e.charAt(0).toUpperCase()+e.substr(1)}function W(e,t){void 0===t&&(t="datum");for(var n=r(e),i=[],a=1;a<=n.length;a++){var u="["+n.slice(0,a).map(o).join("][")+"]";i.push(""+t+u)}return i.join(" && ")}function G(e,t){return void 0===t&&(t="datum"),t+"["+o(r(e).join("."))+"]"}function Y(e){return""+r(e).map(function(e){return e.replace(".","\\.")}).join("\\.")}function H(e){return""+r(e).join(".")}function V(e){return r(e).length}function X(e){return!!ss[e]}function Z(e){return e&&k(cs,e)}function J(e,t){function n(){this.constructor=e}gs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Q(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function K(e){return!!_s[e]}function ee(e){return"color"===e||"fill"===e||"stroke"===e}function te(e){return!!Qs[e]}function ne(e){return!!cf[e]}function re(e,t){return t in ie(e)}function ie(e){switch(e){case $s:case js:case Fs:case Us:case Bs:case Ys:case Hs:case Ws:case Gs:case Ds:case Ps:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,trail:!0,area:!0,text:!0,geoshape:!0};case Es:case Os:case Rs:case zs:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,trail:!0,area:!0,text:!0};case As:case Cs:case Ts:case Ns:return{rule:!0,bar:!0,rect:!0,area:!0};case qs:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0,trail:!0};case Ls:return{point:!0,geoshape:!0};case Is:return{text:!0}}}function ae(e){switch(e){case Es:case Os:case qs:case Gs:case As:case Cs:return"continuous";case Ds:case Ps:case Ls:case Is:case Ys:case Hs:return"discrete";case $s:case js:case Fs:return"flexible";case Rs:case zs:case Ts:case Ns:case Us:case Bs:case Ws:return}throw new Error("rangeType not implemented for "+e)}function oe(e){return c(e)?"bin":"bin"+os(e).map(function(t){return F("_"+t+"_"+e[t])}).join("")}function ue(e){return e&&!c(e)}function se(e){switch(e){case Ds:case Ps:case qs:case $s:case js:case Fs:case Gs:case Ls:return 6;default:return 10}}function fe(e){return!!Of[e]}function ce(e){return k(["line","area","trail"],e)}function le(e){return e.type}function de(e){var t=le(e)?e.type:e;return t in Cf}function he(e){return Ff=e}function pe(){return Ff=jf}function ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ff.warn.apply(Ff,arguments)}function me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ff.debug.apply(Ff,arguments)}function ve(e){return!!(e&&(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds))}function ye(e){if(l(e))return e>4&&ge(pf.invalidTimeUnit("quarter",e)),e-1+"";throw new Error(pf.invalidTimeUnit("quarter",e))}function be(e){if(l(e))return e-1+"";var t=e.toLowerCase(),n=Bf.indexOf(t);if(n!==-1)return n+"";var r=t.substr(0,3),i=Wf.indexOf(r);if(i!==-1)return i+"";throw new Error(pf.invalidTimeUnit("month",e))}function _e(e){if(l(e))return e%7+"";var t=e.toLowerCase(),n=Gf.indexOf(t);if(n!==-1)return n+"";var r=t.substr(0,3),i=Yf.indexOf(r);if(i!==-1)return i+"";throw new Error(pf.invalidTimeUnit("day",e))}function xe(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day&&os(e).length>1&&(ge(pf.droppedDay(e)),e=$(e),delete e.day),void 0!==e.year?n.push(e.year):void 0!==e.day?n.push(Uf):n.push(0),void 0!==e.month){var r=t?be(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){var i=t?ye(e.quarter):e.quarter;n.push(i+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var a=t?_e(e.day):e.day;n.push(a+"+1")}else n.push(1);for(var o=0,u=["hours","minutes","seconds","milliseconds"];o<u.length;o++){var s=u[o];void 0!==e[s]?n.push(e[s]):n.push(0)}return e.utc?"utc("+n.join(", ")+")":"datetime("+n.join(", ")+")"}function we(e){return!!Xf[e]}function ke(e){return!!Jf[e]}function Me(e){return!!ec[e]}function Se(e){return e.substr(3)}function Ee(e){return!!tc[e]}function Oe(e,t){for(var n=Me(e),r=n?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0),i=0,a=Zf;i<a.length;i++){var o=a[i];if(Re(e,o))switch(o){case If.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case If.QUARTER:var u=Ae("month",n),s=u.getDateMethod,f=u.setDateMethod;r[f](3*Math.floor(t[s]()/3));break;default:var c=Ae(o,n),l=c.getDateMethod,d=c.setDateMethod;r[d](t[l]())}}return r}function Ae(e,t){var n=rc[e],r=t?"setUTC"+n.substr(3):n,i="get"+(t?"UTC":"")+n.substr(3);return{setDateMethod:r,getDateMethod:i}}function Ce(e){return Zf.reduce(function(t,n){return Re(e,n)?t.concat(n):t},[])}function Re(e,t){var n=e.indexOf(t);return n>-1&&(t!==If.SECONDS||0===n||"i"!==e.charAt(n-1))}function Te(e,t){function n(e){return e===If.QUARTER?"("+i+"quarter("+r+")-1)":""+i+e+"("+r+")"}var r=W(t),i=Me(e)?"utc":"",a=Zf.reduce(function(t,r){return Re(e,r)&&(t[r]=n(r)),t},{});return xe(a)}function ze(e,t,n,r){if(e){var i=[],a="",o=Re(e,If.YEAR);Re(e,If.QUARTER)&&(a="'Q' + quarter("+t+")"),Re(e,If.MONTH)&&i.push(n!==!1?"%b":"%B"),Re(e,If.DAY)?i.push(n?"%a":"%A"):Re(e,If.DATE)&&i.push("%d"+(o?",":"")),o&&i.push(n?"%y":"%Y");var u=[];Re(e,If.HOURS)&&u.push("%H"),Re(e,If.MINUTES)&&u.push("%M"),Re(e,If.SECONDS)&&u.push("%S"),Re(e,If.MILLISECONDS)&&u.push("%L");var s=[];return i.length>0&&s.push(i.join(" ")),u.length>0&&s.push(u.join(":")),s.length>0&&(a&&(a+=" + ' ' + "),a+=r?"utcFormat("+t+", '"+s.join(" ")+"')":"timeFormat("+t+", '"+s.join(" ")+"')"),a||void 0}}function Ne(e){return"day"!==e&&e.indexOf("day")>=0?(ge(pf.dayReplacedWithDate(e)),e.replace("day","date")):e}function De(e){return!!ac[e]}function Pe(e){if(e)switch(e=e.toLowerCase()){case"q":case oc:return"quantitative";case"t":case sc:return"temporal";case"o":case uc:return"ordinal";case"n":case fc:return"nominal";case Vf.LATITUDE:return"latitude";case Vf.LONGITUDE:return"longitude";case cc:return"geojson"}}function Le(e){return e.selection}function qe(e){return e&&!a(e)&&"repeat"in e}function $e(e){var t=e.field,n=e.timeUnit,r=e.bin,i=e.aggregate;return ms({},n?{timeUnit:n}:{},r?{bin:r}:{},i?{aggregate:i}:{},{field:t})}function je(e){return!!e&&!!e.condition}function Fe(e){return!!e&&!!e.condition&&!Eu(e.condition)&&Ue(e.condition)}function Ie(e){return!!e&&!!e.condition&&(Eu(e.condition)||We(e.condition))}function Ue(e){return!(!e||!e.field&&"count"!==e.aggregate)}function Be(e){return Ue(e)&&a(e.field)}function We(e){return e&&"value"in e&&void 0!==e.value}function Ge(e){return!(!e||!e.scale&&!e.sort)}function Ye(e,t){void 0===t&&(t={});var n=e.field,r=t.prefix,i=t.suffix;if(Xe(e))n="count_*";else{var a=void 0;t.nofn||(e.bin?(a=oe(e.bin),i=t.binSuffix||""):e.aggregate?a=String(t.aggregate||e.aggregate):e.timeUnit&&(a=String(e.timeUnit))),a&&(n=a+"_"+n)}return i&&(n=n+"_"+i),r&&(n=r+"_"+n),t.expr?G(n,t.expr):Y(n)}function He(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!e.bin;case"latitude":case"longitude":case"temporal":return!1}throw new Error(pf.invalidFieldType(e.type))}function Ve(e){return!He(e)}function Xe(e){return"count"===e.aggregate}function Ze(e,t){var n=e.field,r=e.bin,i=e.timeUnit,a=e.aggregate;if("count"===a)return t.countTitle;if(r)return n+" (binned)";if(i){var o=Ce(i).join("-");return n+" ("+o+")"}return a?B(a)+" of "+n:n}function Je(e,t){var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toUpperCase()+"("+e.field+")":e.field}function Qe(e){hc=e}function Ke(){Qe(dc)}function et(e,t){return hc(e,t)}function tt(e,t){if(e.timeUnit)return"temporal";if(e.bin)return"quantitative";switch(ae(t)){case"continuous":return"quantitative";case"discrete":return"nominal";case"flexible":return"nominal";default:return"quantitative"}}function nt(e){return Ue(e)?e:Fe(e)?e.condition:void 0}function rt(e,t){if(a(e)||l(e)||c(e)){var n=a(e)?"string":l(e)?"number":"boolean";return ge(pf.primitiveChannelDef(t,n,e)),{value:e}}return Ue(e)?it(e,t):Fe(e)?ms({},e,{condition:it(e.condition,t)}):e}function it(e,t){if(e.aggregate&&!X(e.aggregate)){var n=(e.aggregate,Q(e,["aggregate"]));ge(pf.invalidAggregate(e.aggregate)),e=n}if(e.timeUnit&&(e=ms({},e,{timeUnit:Ne(e.timeUnit)})),e.bin&&(e=ms({},e,{bin:at(e.bin,t)})),e.type){var r=Pe(e.type);e.type!==r&&(e=ms({},e,{type:r})),"quantitative"!==e.type&&Z(e.aggregate)&&(ge(pf.invalidFieldTypeForCountAggregate(e.type,e.aggregate)),e=ms({},e,{type:"quantitative"}))}else{var i=tt(e,t);ge(pf.emptyOrInvalidFieldType(e.type,t,i)),e=ms({},e,{type:i})}var a=ot(e,t),o=a.compatible,u=a.warning;return o||ge(u),e}function at(e,t){return c(e)?{maxbins:se(t)}:e.maxbins||e.step?e:ms({},e,{maxbins:se(t)})}function ot(e,t){switch(t){case"row":case"column":return Ve(e)&&!e.timeUnit?{compatible:!1,warning:pf.facetChannelShouldBeDiscrete(t)}:pc;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":return pc;case"longitude":case"longitude2":case"latitude":case"latitude2":return e.type!==oc?{compatible:!1,warning:"Channel "+t+" should not be used with "+e.type+" field."}:pc;case"opacity":case"size":case"x2":case"y2":return He(e)&&!e.bin?{compatible:!1,warning:"Channel "+t+" should not be used with discrete field."}:pc;case"shape":return"nominal"!==e.type&&"geojson"!==e.type?{compatible:!1,warning:"Shape channel should be used with nominal data or geojson only"}:pc;case"order":return"nominal"===e.type?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:pc}throw new Error("channelCompatability not implemented for channel "+t)}function ut(e){return"quantitative"===e.type||!!e.bin}function st(e){return"temporal"===e.type||!!e.timeUnit}function ft(e,t){var n=e&&e[t];return!!n&&(Eu(n)?E(n,function(e){return!!e.field}):Ue(n)||Fe(n));
}function ct(e){return E(Ks,function(t){if(ft(e,t)){var n=e[t];if(Eu(n))return E(n,function(e){return!!e.aggregate});var r=nt(n);return r&&!!r.aggregate}return!1})}function lt(e,t){return os(e).reduce(function(n,r){if(!te(r))return ge(pf.invalidEncodingChannel(r)),n;if(!re(r,t))return ge(pf.incompatibleChannel(r,t)),n;if("size"===r&&"line"===t){var i=nt(e[r]);if(i&&i.aggregate)return ge(pf.LINE_WITH_VARYING_SIZE),n}if("color"===r&&("fill"in e||"stroke"in e))return ge(pf.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),n;var a=e[r];if("detail"===r||"order"===r&&!Eu(a)&&!We(a)||"tooltip"===r&&Eu(a))a&&(n[r]=(Eu(a)?a:[a]).reduce(function(e,t){return Ue(t)?e.push(it(t,r)):ge(pf.emptyFieldDef(t,r)),e},[]));else{var i=nt(e[r]);if(i&&k([Vf.LATITUDE,Vf.LONGITUDE],i.type)){var o=r,u=(n[o],Q(n,["symbol"==typeof o?o:o+""])),s="x"===r?"longitude":"y"===r?"latitude":"x2"===r?"longitude2":"y2"===r?"latitude2":void 0;return ge(pf.latLongDeprecated(r,i.type,s)),ms({},u,(f={},f[s]=ms({},rt(i,r),{type:"quantitative"}),f))}if(!Ue(a)&&!We(a)&&!je(a))return ge(pf.emptyFieldDef(a,r)),n;n[r]=rt(a,r)}return n;var f},{})}function dt(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)}function ht(e){var t=[];return Ks.forEach(function(n){if(ft(e,n)){var r=e[n];(Eu(r)?r:[r]).forEach(function(e){Ue(e)?t.push(e):Fe(e)&&t.push(e.condition)})}}),t}function pt(e,t,n){if(e)for(var r=function(r){Eu(e[r])?e[r].forEach(function(e){t.call(n,e,r)}):t.call(n,e[r],r)},i=0,a=os(e);i<a.length;i++){var o=a[i];r(o)}}function gt(e,t,n,r){return e?os(e).reduce(function(n,i){var a=e[i];return Eu(a)?a.reduce(function(e,n){return t.call(r,e,n,i)},n):t.call(r,n,a,i)},n):n}function mt(e,t){var n=e[t];return void 0!==n?(r={},r[t]={value:n},r):{};var r}function vt(e){return!!e.type}function yt(e){return ms({},e,{encoding:gt(e.encoding,function(e,t,n){return _c.indexOf(n)>-1?e[n]=t:ge(pf.incompatibleChannel(n,vc)),e},{})})}function bt(e,t){e=yt(e);var n=e.mark,r=(e.encoding,e.selection),i=(e.projection,Q(e,["mark","encoding","selection","projection"])),a=void 0;l(t.box.extent)&&(a=t.box.extent),vt(n)&&n.extent&&"min-max"===n.extent&&(a=void 0);var o=_t(e),u=wt(e,o,a),s=u.transform,f=u.continuousAxisChannelDef,c=u.continuousAxis,d=u.encodingWithoutContinuousAxis,h=d.size,p=Q(d,["color","size"]),g=h?{size:h}:mt(t.box,"size"),m={};return f.scale&&(m.scale=f.scale),f.axis&&(m.axis=f.axis),ms({},i,{transform:s,layer:[{mark:{type:"rule",style:"boxWhisker"},encoding:ms((v={},v[c]=ms({field:"lower_whisker_"+f.field,type:f.type},m),v[c+"2"]={field:"lower_box_"+f.field,type:f.type},v),p,mt(t.boxWhisker,"color"))},{mark:{type:"rule",style:"boxWhisker"},encoding:ms((y={},y[c]={field:"upper_box_"+f.field,type:f.type},y[c+"2"]={field:"upper_whisker_"+f.field,type:f.type},y),p,mt(t.boxWhisker,"color"))},ms({},r?{selection:r}:{},{mark:{type:"bar",style:"box"},encoding:ms((b={},b[c]={field:"lower_box_"+f.field,type:f.type},b[c+"2"]={field:"upper_box_"+f.field,type:f.type},b),d,d.color?{}:mt(t.box,"color"),g)}),{mark:{type:"tick",style:"boxMid"},encoding:ms((_={},_[c]={field:"mid_box_"+f.field,type:f.type},_),p,mt(t.boxMid,"color"),g)}]});var v,y,b,_}function _t(e){var t=e.mark,n=e.encoding;e.projection,Q(e,["mark","encoding","projection"]);if(Ue(n.x)&&Ve(n.x)){if(Ue(n.y)&&Ve(n.y)){if(void 0===n.x.aggregate&&n.y.aggregate===vc)return"vertical";if(void 0===n.y.aggregate&&n.x.aggregate===vc)return"horizontal";if(n.x.aggregate===vc&&n.y.aggregate===vc)throw new Error("Both x and y cannot have aggregate");return vt(t)&&t.orient?t.orient:"vertical"}return"horizontal"}if(Ue(n.y)&&Ve(n.y))return"vertical";throw new Error("Need a valid continuous axis for boxplots")}function xt(e,t){var n,r,i=(e.mark,e.encoding);e.projection,Q(e,["mark","encoding","projection"]);if("vertical"===t?(r="y",n=i.y):(r="x",n=i.x),n&&n.aggregate){var a=n.aggregate,o=Q(n,["aggregate"]);a!==vc&&ge("Continuous axis should not have customized aggregation function "+a),n=o}return{continuousAxisChannelDef:n,continuousAxis:r}}function wt(e,t,n){var r=xt(e,t),i=r.continuousAxisChannelDef,a=r.continuousAxis,o=e.encoding,u=void 0===n,s=[{op:"q1",field:i.field,as:"lower_box_"+i.field},{op:"q3",field:i.field,as:"upper_box_"+i.field},{op:"median",field:i.field,as:"mid_box_"+i.field}],f=[];s.push({op:"min",field:i.field,as:(u?"lower_whisker_":"min_")+i.field}),s.push({op:"max",field:i.field,as:(u?"upper_whisker_":"max_")+i.field}),u||(f=[{calculate:"datum.upper_box_"+i.field+" - datum.lower_box_"+i.field,as:"iqr_"+i.field},{calculate:"min(datum.upper_box_"+i.field+" + datum.iqr_"+i.field+" * "+n+", datum.max_"+i.field+")",as:"upper_whisker_"+i.field},{calculate:"max(datum.lower_box_"+i.field+" - datum.iqr_"+i.field+" * "+n+", datum.min_"+i.field+")",as:"lower_whisker_"+i.field}]);var c=[],l=[],d=[],h={};return pt(o,function(e,t){if(t!==a)if(Ue(e)){if(e.aggregate&&e.aggregate!==vc)s.push({op:e.aggregate,field:e.field,as:Ye(e)});else if(void 0===e.aggregate){var n=Ye(e),r=e.bin;if(r){var i=e.field;l.push({bin:r,field:i,as:n})}else if(e.timeUnit){var u=e.timeUnit,i=e.field;d.push({timeUnit:u,field:i,as:n})}c.push(n)}h[t]={field:Ye(e),type:e.type}}else h[t]=o[t]}),{transform:[].concat(l,d,[{aggregate:s,groupby:c}],f),continuousAxisChannelDef:i,continuousAxis:a,encodingWithoutContinuousAxis:h}}function kt(e){var t=(e.mark,e.selection,e.projection,e.encoding),n=Q(e,["mark","selection","projection","encoding"]),r=(t.size,Q(t,["size"])),i=(t.x2,t.y2,Q(t,["x2","y2"])),a=Q(i,["x","y"]);if(!t.x2&&!t.y2)throw new Error("Neither x2 or y2 provided");return ms({},n,{layer:[{mark:"rule",encoding:r},{mark:"tick",encoding:i},{mark:"tick",encoding:t.x2?ms({x:t.x2,y:t.y},a):ms({x:t.x,y:t.y2},a)}]})}function Mt(e,t){wc[e]=t}function St(e){delete wc[e]}function Et(e,t){var n=le(e.mark)?e.mark.type:e.mark,r=wc[n];if(r)return r(e,t);throw new Error('Invalid mark type "'+n+'"')}function Ot(e,t){var n=Lc[e],r=Lc[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}function At(e){return $c[e]}function Ct(e){return e in Wc}function Rt(e){return e in Gc}function Tt(e){return e in Uc}function zt(e){return e in Fc}function Nt(e){return e&&!!e.name}function Dt(e){return e&&e.selection}function Pt(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":return k(["sequential","ordinal","bin-ordinal","quantile","quantize"],e);case"interpolate":return k(["linear","bin-linear","pow","log","sqrt","utc","time"],e);case"round":return zt(e)||"band"===e||"point"===e;case"padding":return zt(e)||k(["point","band"],e);case"paddingOuter":case"rangeStep":return k(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return zt(e)||"sequential"===e;case"nice":return zt(e)||"sequential"===e||"quantize"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"zero":return Tt(e)&&!k(["log","time","utc","bin-linear","threshold","quantile"],e)}throw new Error("Invalid scale property "+t+".")}function Lt(e,t){switch(t){case"interpolate":case"scheme":if(!ee(e))return pf.cannotUseScalePropertyWithNonColor(e);return;case"type":case"domain":case"range":case"base":case"exponent":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}throw new Error('Invalid scale property "'+t+'".')}function qt(e,t){switch(e){case Gu.X:case Gu.Y:case Gu.SIZE:case Gu.OPACITY:return zt(t)||k(["band","point"],t);case Gu.COLOR:case Gu.FILL:case Gu.STROKE:return"band"!==t;case Gu.SHAPE:return"ordinal"===t}return!1}function $t(e){var t=e.anchor,n=e.offset,r=e.orient,i=e.color,a=Q(e,["anchor","offset","orient","color"]),o=ms({},a,i?{fill:i}:{}),u=ms({},t?{anchor:t}:{},n?{offset:n}:{},r?{orient:r}:{});return{mark:o,nonMark:u}}function jt(e){return C($(nl),e)}function Ft(e){e=$(e);for(var t=0,n=il;t<n.length;t++){var r=n[t];delete e[r]}if(e.axis)for(var a=0,o=Oc;a<o.length;a++){var r=o[a];delete e.axis[r]}if(e.legend)for(var u=0,s=Oc;u<s.length;u++){var r=s[u];delete e.legend[r]}if(e.mark)for(var f=0,c=Nf;f<c.length;f++){var r=c[f];delete e.mark[r]}for(var l=0,d=rl;l<d.length;l++){for(var h=d[l],p=0,g=Nf;p<g.length;p++){var r=g[p];delete e[h][r]}var m=al[h];if(m)for(var v=0,y=m;v<y.length;v++){var r=y[v];delete e[h][r]}It(e,h)}It(e,"title","group-title");for(var r in e)i(e[r])&&0===os(e[r]).length&&delete e[r];return os(e).length>0?e:void 0}function It(e,t,n){var r="title"===t?$t(e.title).mark:e[t];"view"===t&&(n="cell");var i=ms({},r,e.style[t]);os(i).length>0&&(e.style[n||t]=i),delete e[t]}function Ut(e){return!!ul[e]}function Bt(e){var t=e.x,n=e.y;if(Ue(t)&&Ue(n))if("quantitative"===t.type&&"quantitative"===n.type){if(t.stack)return"x";if(n.stack)return"y";if(!!t.aggregate!=!!n.aggregate)return t.aggregate?"x":"y"}else{if("quantitative"===t.type)return"x";if("quantitative"===n.type)return"y"}else{if(Ue(t)&&"quantitative"===t.type)return"x";if(Ue(n)&&"quantitative"===n.type)return"y"}}function Wt(e,t,n){var r=le(e)?e.type:e;if(!k(sl,r))return null;var i=Bt(t);if(!i)return null;var a=t[i],o=Be(a)?Ye(a,{}):void 0,u="x"===i?"y":"x",s=t[u],f=Be(s)?Ye(s,{}):void 0,c=af.reduce(function(e,n){if(ft(t,n)){var r=t[n];(Eu(r)?r:[r]).forEach(function(t){var r=nt(t);if(!r.aggregate){var i=Be(r)?Ye(r,{}):void 0;(!i||i!==f&&i!==o)&&e.push({channel:n,fieldDef:r})}})}return e},[]);if(0===c.length)return null;var l=void 0;return l=void 0!==a.stack?a.stack:k(fl,r)&&void 0===n?"zero":n,l&&Ut(l)?(a.scale&&a.scale.type&&a.scale.type!==Sc.LINEAR&&ge(pf.cannotStackNonLinearScale(a.scale.type)),ft(t,i===Es?As:Cs)?(ge(pf.cannotStackRangedMark(i)),null):(a.aggregate&&!k(ls,a.aggregate)&&ge(pf.stackNonSummativeAggregate(a.aggregate)),{groupbyChannel:s?u:void 0,fieldChannel:i,impute:ce(r),stackBy:c,offset:l})):null}function Gt(e){return void 0!==e.facet}function Yt(e){return!!e.mark}function Ht(e){return void 0!==e.layer}function Vt(e){return void 0!==e.repeat}function Xt(e){return Zt(e)||Jt(e)}function Zt(e){return void 0!==e.vconcat}function Jt(e){return void 0!==e.hconcat}function Qt(e,t){if(Gt(e))return Kt(e,t);if(Ht(e))return nn(e,t);if(Vt(e))return rn(e,t);if(Zt(e))return an(e,t);if(Jt(e))return on(e,t);if(Yt(e)){var n=ft(e.encoding,Ds),r=ft(e.encoding,Ps);return n||r?un(e,t):ln(e,t)}throw new Error(pf.INVALID_SPEC)}function Kt(e,t){var n=e.spec,r=Q(e,["spec"]);return ms({},r,{spec:Qt(n,t)})}function en(e){var t=e.parentEncoding,n=e.encoding;if(t&&n){var r=os(t).reduce(function(e,t){return n[t]&&e.push(t),e},[]);r.length>0&&ge(pf.encodingOverridden(r))}var i=ms({},t||{},n||{});return os(i).length>0?i:void 0}function tn(e){var t=e.parentProjection,n=e.projection;return t&&n&&ge(pf.projectionOverridden({parentProjection:t,projection:n})),n||t}function nn(e,t,n,r){var i=e.layer,a=e.encoding,o=e.projection,u=Q(e,["layer","encoding","projection"]),s=en({parentEncoding:n,encoding:a}),f=tn({parentProjection:r,projection:o});return ms({},u,{layer:i.map(function(e){return Ht(e)?nn(e,t,s,f):ln(e,t,s,f)})})}function rn(e,t){var n=e.spec,r=Q(e,["spec"]);return ms({},r,{spec:Qt(n,t)})}function an(e,t){var n=e.vconcat,r=Q(e,["vconcat"]);return ms({},r,{vconcat:n.map(function(e){return Qt(e,t)})})}function on(e,t){var n=e.hconcat,r=Q(e,["hconcat"]);return ms({},r,{hconcat:n.map(function(e){return Qt(e,t)})})}function un(e,t){var n=e.encoding,r=n.row,i=n.column,a=Q(n,["row","column"]),o=e.mark,u=e.width,s=e.projection,f=e.height,c=e.selection,l=(e.encoding,Q(e,["mark","width","projection","height","selection","encoding"]));return ms({},l,{facet:ms({},r?{row:r}:{},i?{column:i}:{}),spec:ln(ms({},s?{projection:s}:{},{mark:o},u?{width:u}:{},f?{height:f}:{},{encoding:a},c?{selection:c}:{}),t)})}function sn(e){return de(e.mark)}function fn(e,t,n){return"transparent"===e.point?{opacity:0}:e.point?i(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?i(t.point)?t.point:{}:null}function cn(e,t){return e.line?e.line===!0?{}:e.line:void 0!==e.line?null:t.line?t.line===!0?{}:t.line:null}function ln(e,t,n,r){var i=e.encoding,a=e.projection,o=le(e.mark)?e.mark.type:e.mark;if(n||r){var u=tn({parentProjection:r,projection:a}),s=en({parentEncoding:n,encoding:i});return ln(ms({},e,u?{projection:u}:{},s?{encoding:s}:{}),t)}return sn(e)?dt(i)?dn(e):"line"===o&&(i.x2||i.y2)?(ge(pf.lineWithRange(!!i.x2,!!i.y2)),ln(ms({mark:"rule"},e),t,n,r)):ce(o)?pn(e,t):e:Et(e,t)}function dn(e){var t=ft(e.encoding,Es),n=ft(e.encoding,Os),r=ft(e.encoding,As),i=ft(e.encoding,Cs);if(r&&!t||i&&!n){var a=$(e);return r&&!t&&(a.encoding.x=a.encoding.x2,delete a.encoding.x2),i&&!n&&(a.encoding.y=a.encoding.y2,delete a.encoding.y2),a}return e}function hn(e){var t=(e.point,e.line,Q(e,["point","line"]));return os(t).length>1?t:t.type}function pn(e,t){void 0===t&&(t={});var n=e.selection,r=e.projection,i=e.encoding,a=e.mark,o=Q(e,["selection","projection","encoding","mark"]),u=le(a)?a:{type:a},s=fn(u,t[u.type],i),f="area"===u.type&&cn(u,t[u.type]);if(!s&&!f)return ms({},e,{mark:hn(u)});var c=[{mark:hn(ms({},u,"area"===u.type?{opacity:.7}:{})),encoding:i}],l=Wt(u,i,t?t.stack:void 0),d=i;if(l){var h=l.fieldChannel,p=l.offset;d=ms({},i,(g={},g[h]=ms({},i[h],p?{stack:p}:{}),g))}return f&&c.push(ms({},r?{projection:r}:{},{mark:ms({type:"line"},f)},n?{selection:n}:{},{encoding:d})),s&&c.push(ms({},r?{projection:r}:{},{mark:ms({type:"point",opacity:1,filled:!0},s)},n?{selection:n}:{},{encoding:d})),ms({},o,{layer:c});var g}function gn(e,t){return t.forEach(function(t){var n=["field","type","value","timeUnit","bin","aggregate"].reduce(function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e},{}),r=w(n);e[r]=e[r]||t}),e}function mn(e,t){if(void 0===t&&(t={}),Ht(e))e.layer.forEach(function(e){Yt(e)?gn(t,ht(e.encoding)):mn(e,t)});else if(Gt(e))gn(t,ht(e.facet)),mn(e.spec,t);else if(Vt(e))mn(e.spec,t);else if(Xt(e)){var n=Zt(e)?e.vconcat:e.hconcat;n.forEach(function(e){return mn(e,t)})}else gn(t,ht(e.encoding));return t}function vn(e){return L(mn(e))}function yn(e,t){return t=t||e.config,!!de(e.mark)&&null!==Wt(e.mark,e.encoding,t?t.stack:void 0)}function bn(e){return a(e)?{type:e}:e||{}}function _n(e,t,n){void 0===n&&(n=!0);var r=ms({type:"pad"},bn(t),bn(e));return"fit"===r.type&&(n||(ge(pf.FIT_NON_SINGLE),r.type="pad")),r}function xn(e){return dl.reduce(function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t},{})}function wn(e){return!!e.url}function kn(e){return!!e.values}function Mn(e){return!!e.name}function Sn(e,t,n){return Dc=t||ml,Pc=n||El,An(e.trim()).map(Cn)}function En(e){return Pc.hasOwnProperty(e)}function On(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function An(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=On(e,i,wl,vl+bl,yl+_l),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function Cn(e){return"["===e[0]?Rn(e):Tn(e)}function Rn(e){var t,n,r=e.length,i=1;if(i=On(e,i,yl,vl,yl),i===r)throw"Empty between selector: "+e;if(t=An(e.substring(1,i)),2!==t.length)throw"Between selector must have two elements: "+e;if(e=e.slice(i+1).trim(),e[0]!==Ml)throw"Expected '>' after between selector: "+e;return t=t.map(Cn),n=Cn(e.slice(1).trim()),n.between?{between:t,stream:n}:(n.between=t,n)}function Tn(e){var t,n,r={source:Dc},i=[],a=[0,0],o=0,u=0,s=e.length,f=0;if(e[s-1]===_l){if(f=e.lastIndexOf(bl),!(f>=0))throw"Unmatched right brace: "+e;try{a=zn(e.substring(f+1,s-1))}catch(t){throw"Invalid throttle specification: "+e}e=e.slice(0,f).trim(),s=e.length,f=0}if(!s)throw e;if(e[0]===kl&&(o=++f),t=On(e,f,xl),t<s&&(i.push(e.substring(u,t).trim()),u=f=++t),f=On(e,f,vl),f===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,f).trim()),n=[],u=++f,u===s)throw"Unmatched left bracket: "+e;for(;f<s;){if(f=On(e,f,yl),f===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,f).trim()),f<s-1&&e[++f]!==vl)throw"Expected left bracket: "+e;u=++f}if(!(s=i.length)||Sl.test(i[s-1]))throw"Invalid event selector: "+e;return s>1?(r.type=i[1],o?r.markname=i[0].slice(1):En(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}function zn(e){var t=e.split(wl);if(!e.length||t.length>2)throw e;return t.map(function(t){var n=+t;if(n!==n)throw e;return n})}function Nn(e){return void 0!==e.filter}function Dn(e){return void 0!==e.lookup}function Pn(e){return void 0!==e.window}function Ln(e){return void 0!==e.calculate}function qn(e){return!!e.bin}function $n(e){return void 0!==e.timeUnit}function jn(e){return void 0!==e.aggregate}function Fn(e){return e.map(function(e){return Nn(e)?{filter:b(e.filter,uo)}:e})}function In(e){return!!e.signal}function Un(e){return!!e.step}function Bn(e){return!Eu(e)&&("fields"in e&&!("data"in e))}function Wn(e){return!Eu(e)&&("fields"in e&&"data"in e)}function Gn(e){return!Eu(e)&&("field"in e&&"data"in e)}function Yn(e,t){return Eu(e)?e.map(function(e){return et(e,t)}).join(", "):e}function Hn(e,t,n,r){void 0===r&&(r={header:!1});var i=e.combine(),a=i.orient,o=i.scale,u=i.title,s=i.zindex,f=Q(i,["orient","scale","title","zindex"]);if(os(f).forEach(function(e){var n=ys[e];n&&n!==t&&"both"!==n&&delete f[e]}),"grid"===t){if(!f.grid)return;if(f.encode){var c=f.encode.grid;f.encode=ms({},c?{grid:c}:{}),0===os(f.encode).length&&delete f.encode}return ms({scale:o,orient:a},f,{domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:void 0!==s?s:0})}if(r.header||!e.mainExtracted){if(f.encode){for(var l=0,d=vs;l<d.length;l++){var h=d[l];e.hasAxisPart(h)||delete f.encode[h]}0===os(f.encode).length&&delete f.encode}var p=Yn(u,n);return ms({scale:o,orient:a},p?{title:p}:{},f,{zindex:void 0!==s?s:1})}}function Vn(e,t){var n=e.x,r=void 0===n?[]:n,i=e.y,a=void 0===i?[]:i;return r.map(function(e){return Hn(e,"main",t)}).concat(r.map(function(e){return Hn(e,"grid",t)}),a.map(function(e){return Hn(e,"main",t)}),a.map(function(e){return Hn(e,"grid",t)})).filter(function(e){return e})}function Xn(e,t,n){for(var r=0,i=n;r<i.length;r++){var a=i[r],o=Jn(a,t.markDef,t.config);void 0!==o&&(e[a]={value:o})}return e}function Zn(e){return[].concat(e.type,e.style||[])}function Jn(e,t,n){var r=n.mark[e],i=n[t.type];void 0!==i[e]&&(r=i[e]);for(var a=Zn(t),o=0,u=a;o<u.length;o++){var s=u[o],f=n.style[s],c=e;f&&void 0!==f[c]&&(r=f[c])}return r}function Qn(e,t,n,r){var i=er(e,t,r);if(e.bin){var a=Ye(e,{expr:n}),o=Ye(e,{expr:n,binSuffix:"end"});return{signal:rr(a,o,i,r)}}if("quantitative"===e.type)return{signal:""+tr(Ye(e,{expr:n,binSuffix:"range"}),i)};if(st(e)){var u=Ge(e)&&e.scale&&e.scale.type===Sc.UTC;return{signal:ir(Ye(e,{expr:n}),e.timeUnit,t,r.text.shortTimeLabels,r.timeFormat,u)}}return{signal:"''+"+Ye(e,{expr:n})}}function Kn(e,t){return void 0!==e?e:t}function er(e,t,n){if(e.type===oc)return t?t:n.numberFormat}function tr(e,t){return"format("+e+', "'+(t||"")+'")'}function nr(e,t,n){return tr(e,t||n.numberFormat)}function rr(e,t,n,r){return e+" === null || isNaN("+e+') ? "null" : '+nr(e,n,r)+' + " - " + '+nr(t,n,r)}function ir(e,t,n,r,i,a){if(!t||n){var o=n||i;return a?"utcFormat("+e+", '"+o+"')":"timeFormat("+e+", '"+o+"')"}return ze(t,e,r,a)}function ar(e,t){return(Eu(e)?e:[e]).reduce(function(e,n){return e.field.push(Ye(n,t)),e.order.push(n.sort||"ascending"),e},{field:[],order:[]})}function or(e,t){var n=e.slice();return t.forEach(function(e){for(var t=0,r=n;t<r.length;t++){var i=r[t];if(as(i)===as(e))return}n.push(e)}),n}function ur(e,t){if(Eu(e.value)&&Eu(t.value))return{explicit:e.explicit,value:or(e.value,t.value)};if(!Eu(e.value)&&!Eu(t.value))return{explicit:e.explicit,value:e.value===t.value?e.value:e.value+", "+t.value};throw new Error("It should never reach here")}function sr(e,t){return e.bin?ne(t)&&k(["ordinal","nominal"],e.type):(console.warn("Only use this method with binned field defs"),!1)}function fr(e){return"top"===e||"left"===e?"header":"footer"}function cr(e,t){var n=e.component.layoutHeaders[t].title,r="row"===t?"vertical":void 0,i=ms({align:{value:"center"},text:{value:n}},"vertical"===r?{angle:{value:270}}:{});return{name:e.getName(t+"_title"),role:t+"-title",type:"group",marks:[ms({type:"text",role:t+"-title-text",style:"guide-title"},os(i).length>0?{encode:{update:i}}:{})]}}function lr(e,t){for(var n=e.component.layoutHeaders[t],r=[],i=0,a=Tl;i<a.length;i++){var o=a[i];if(n[o])for(var u=0,s=n[o];u<s.length;u++){var f=s[u];r.push(pr(e,t,o,n,f))}}return r}function dr(e){return e=(e%360+360)%360,(e+90)%180===0?{}:e<90||270<e?{align:{value:"right"}}:135<=e&&e<225?{align:{value:"left"}}:{}}function hr(e){return e=(e%360+360)%360,45<=e&&e<=135?{baseline:{value:"top"}}:{}}function pr(e,t,n,r,i){if(i){var a=null,o=r.facetFieldDef;if(o&&i.labels){var u=o.header,s=void 0===u?{}:u,f=s.format,c=s.labelAngle,l=ms({},void 0!==c?{angle:{value:c}}:{},dr(c),hr(c));a=ms({text:Qn(o,f,"parent",e.config),offset:10,orient:"row"===t?"left":"top",style:"guide-label"},os(l).length>0?{encode:{update:l}}:{})}var d=i.axes,h=d&&d.length>0;if(a||h){var p="row"===t?"height":"width";return ms({name:e.getName(t+"_"+n),type:"group",role:t+"-"+n},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:{field:Ye(o,{expr:"datum"}),order:o.sort||"ascending"}}:{},a?{title:a}:{},i.sizeSignal?{encode:{update:(g={},g[p]=i.sizeSignal,g)}}:{},h?{axes:d}:{})}}return null;var g}function gr(e){return[].concat(mr(e,"width"),mr(e,"height"))}function mr(e,t){var n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];var i=e.getSizeSignalRef(t).signal;if("range-step"===r){var a=e.getScaleComponent(n);if(a){var o=a.get("type"),u=a.get("range");if(Ct(o)&&Un(u)){var s=e.scaleName(n);if(Ea(e.parent)){var f=e.parent.component.resolve;if("independent"===f.scale[n])return[vr(s,u)]}return[vr(s,u),{name:i,update:yr(s,a,"domain('"+s+"').length")}]}}throw new Error("layout size is range step although there is no rangeStep.")}return[{name:i,value:r}]}function vr(e,t){return{name:e+"_step",value:t.step}}function yr(e,t,n){var r=t.get("type"),i=t.get("padding"),a=t.get("paddingOuter");a=void 0!==a?a:i;var o=t.get("paddingInner");return o="band"===r?void 0!==o?o:i:1,"bandspace("+n+", "+o+", "+a+") * "+e+"_step"}function br(e,t){if(Ca(t)||Ea(t))return"shared";if(Aa(t)||Oa(t))return k(uf,e)?"independent":"shared";throw new Error("invalid model type for resolve")}function _r(e,t){var n=e.scale[t],r=k(uf,t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&ge(pf.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}function xr(e){return{explicit:!0,value:e}}function wr(e){return{explicit:!1,value:e}}function kr(e){return function(t,n,r,i){var a=e(t.value,n.value);return a>0?t:a<0?n:Mr(t,n,r,i)}}function Mr(e,t,n,r){return e.explicit&&t.explicit&&ge(pf.mergeConflictingProperty(n,r,e.value,t.value)),e}function Sr(e,t,n,r,i){return void 0===i&&(i=Mr),void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:as(e.value)===as(t.value)?e:i(e,t,n,r)}function Er(e,t,n,r,i,a){return Ue(t)&&i&&e===i.fieldChannel?Cr(t,n,{suffix:"end"}):zr(e,t,n,r,i,a)}function Or(e,t,n,r,i,a,o){return Ue(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Cr(t,r,{suffix:"start"}):zr(e,n,r,i,a,o)}function Ar(e,t,n,r){var i="start"===n?void 0:"end";return Cr(e,t,{binSuffix:i},r?{offset:r}:{})}function Cr(e,t,n,r){var i=ms({},t?{scale:t}:{},{field:Ye(e,n)});return r?ms({},i,r):i}function Rr(e,t){return void 0===t&&(t=!0),{scale:e,band:t}}function Tr(e,t){return{signal:"("+('scale("'+t+'", '+Ye(e,{expr:"datum"})+")")+" + "+('scale("'+t+'", '+Ye(e,{binSuffix:"end",expr:"datum"})+")")+")/2"}}function zr(e,t,n,r,i,a){if(t){if(Ue(t)){if(t.bin)return k([Es,Os],e)&&t.type===oc?i&&i.impute?Cr(t,n,{binSuffix:"mid"}):Tr(t,n):Cr(t,n,sr(t,e)?{binSuffix:"range"}:{});if(r){var o=r.get("type");if(Ct(o))return"band"===o?Cr(t,n,{binSuffix:"range"},{band:.5}):Cr(t,n,{binSuffix:"range"})}return Cr(t,n,{})}if(We(t))return{value:t.value}}return a}function Nr(e,t){if(e){if(Ue(e))return Qn(e,e.format,"datum",t);if(We(e))return{value:e.value}}}function Dr(e){return ms({},e,{mult:.5})}function Pr(e){if(e.get("zero")!==!1)return!0;var t=e.domains;return!!Eu(t)&&E(t,function(e){return Eu(e)&&2===e.length&&e[0]<=0&&e[1]>=0})}function Lr(e,t,n,r,i){if(a(e)){if(n){var o=r.get("type");if(k([Sc.LOG,Sc.TIME,Sc.UTC],o))"bar"!==i&&"area"!==i||ge(pf.nonZeroScaleUsedWithLengthMark(i,t,{scaleType:o}));else{if(Pr(r))return{scale:n,value:0};"bar"!==i&&"area"!==i||ge(pf.nonZeroScaleUsedWithLengthMark(i,t,{zeroFalse:r.explicit.zero===!1}))}}return"zeroOrMin"===e?"x"===t?{value:0}:{field:{group:"height"}}:"x"===t?{field:{group:"width"}}:{value:0}}return e}function qr(e,t){void 0===t&&(t={valueOnly:!1});var n=e.markDef,r=e.encoding,i=e.config,a=n.filled,o=n.type,u={fill:Jn("fill",n,i),stroke:Jn("stroke",n,i),color:Jn("color",n,i)},s=k(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,f={fill:n.fill||u.fill||s,stroke:n.stroke||u.stroke},c=a?"fill":"stroke",l=ms({},f.fill?{fill:{value:f.fill}}:{},f.stroke?{stroke:{value:f.stroke}}:{});return r.fill||r.stroke?(n.color&&ge(pf.droppingColor("property",{fill:"fill"in r,stroke:"stroke"in r})),ms({},Br("fill",e,{defaultValue:f.fill||s}),Br("stroke",e,{defaultValue:f.stroke}))):r.color?ms({},l,Br("color",e,{vgChannel:c,defaultValue:n[c]||n.color||u[c]||u.color||(a?s:void 0)})):n.fill||n.stroke?(n.color&&ge(pf.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),l):n.color?ms({},l,(d={},d[c]={value:n.color},d)):u.fill||u.stroke?l:u.color?ms({},s?{fill:{value:"transparent"}}:{},(h={},h[c]={value:u.color},h)):{};var d,h}function $r(e,t){return ms({},jr(e.markDef,t),qr(e),Br("opacity",e),Gr(e),Yr(e,"href"))}function jr(e,t){return Cl.reduce(function(n,r){return void 0!==e[r]&&"ignore"!==t[r]&&(n[r]={value:e[r]}),n},{})}function Fr(e,t){if(void 0!==t)return n={},n[e]={value:t},n;return;var n}function Ir(e){return e+" !== null && !isNaN("+e+")"}function Ur(e){if("filter"===e.config.invalidValues){var t=["x","y"].map(function(t){var n=e.getScaleComponent(t);if(n){var r=n.get("type");if(Tt(r))return e.vgField(t,{expr:"datum"})}}).filter(function(e){return!!e}).map(Ir);if(t.length>0)return{defined:{signal:t.join(" && ")}}}return{}}function Br(e,t,n){void 0===n&&(n={});var r=n.defaultValue,i=n.vgChannel,a=n.defaultRef||(void 0!==r?{value:r}:void 0),o=t.encoding[e];return Wr(t,o,i||e,function(n){return zr(e,n,t.scaleName(e),t.getScaleComponent(e),null,a)})}function Wr(e,t,n,r){var i=t&&t.condition,a=r(t);if(i){var o=Eu(i)?i:[i],u=o.map(function(t){var n=r(t),i=Le(t)?Ba(e,t.selection):io(e,t.test);return ms({test:i},n)});return s={},s[n]=u.concat(void 0!==a?[a]:[]),s}return void 0!==a?(f={},f[n]=a,f):{};var s,f}function Gr(e){var t="tooltip",n=e.encoding[t];if(Eu(n)){var r=n.map(function(t){var n=void 0!==t.title?t.title:Ye(t,{binSuffix:"range"}),r=Nr(t,e.config).signal;return'"'+n+'": '+r});return{tooltip:{signal:"{"+r.join(", ")+"}"}}}return Hr(e,t,n)}function Yr(e,t){void 0===t&&(t="text");var n=e.encoding[t];return Hr(e,t,n)}function Hr(e,t,n){return Wr(e,n,t,function(t){return Nr(t,e.config)})}function Vr(e,t,n){var r=n.scaleName(t),i="x"===t?"width":"height";if(n.encoding.size||void 0!==n.markDef.size){var a=n.markDef.orient;if(a){var o=(u={},u[t+"c"]=Cr(e,r,{},{band:.5}),u);if(nt(n.encoding.size))ge(pf.cannotUseSizeFieldWithBandSize(t));else{if(We(n.encoding.size))return ms({},o,Br("size",n,{vgChannel:i}));if(void 0!==n.markDef.size)return ms({},o,(s={},s[i]={value:n.markDef.size},s))}}else ge(pf.cannotApplySizeToNonOrientedMark(n.markDef.type))}return f={},f[t]=Cr(e,r,{binSuffix:"range"}),f[i]=Rr(r),f;var u,s,f}function Xr(e,t,n,r){var i="x"===e?"xc":"yc",a="x"===e?"width":"height";return ms({},Jr(e,t,n,i),Br("size",t,{defaultRef:r,vgChannel:a}))}function Zr(e,t,n,r,i){return"x"===t?{x2:Ar(e,n,"start",i?0:r),x:Ar(e,n,"end",i?r:0)}:{y2:Ar(e,n,"start",i?r:0),y:Ar(e,n,"end",i?0:r)}}function Jr(e,t,n,r){var i=t.encoding,a=t.mark,o=t.stack,u=i[e],s=t.scaleName(e),f=t.getScaleComponent(e),c=u||!i.latitude&&!i.longitude?Er(e,i[e],s,f,o,Lr(n,e,s,f,a)):{field:t.getName(e)};return l={},l[r||e]=c,l;var l}function Qr(e,t,n){var r=e.encoding,i=e.mark,a=e.markDef,o=e.stack;n=n||("horizontal"===a.orient?"x2":"y2");var u="x2"===n?"x":"y",s=r[u],f=e.scaleName(u),c=e.getScaleComponent(u),l=s||!r.latitude&&!r.longitude?Or(n,s,r[n],f,c,o,Lr(t,u,f,c,i)):{field:e.getName(n)};return d={},d[n]=l,d;var d}function Kr(e,t,n,r,i){if("gradient"!==i){var a=ms({},Xn({},n,zf),qr(n));switch(n.mark){case mf:case _f:case bf:a.shape={value:"square"};break;case Sf:case Ef:a.shape={value:n.mark};break;case yf:case vf:case Mf:case gf:}var o=n.markDef,u=n.encoding,s=o.filled;if(a.fill)if("fill"===r||s&&r===$s)delete a.fill;else if(a.fill.field)delete a.fill;else if(Eu(a.fill)){var f=ri(u.fill||u.color)||o.fill||s&&o.color;f&&(a.fill={value:f})}if(a.stroke)if("stroke"===r||!s&&r===$s)delete a.stroke;else if(a.stroke.field)delete a.stroke;else if(Eu(a.stroke)){var c=ri(u.stroke||u.color)||o.stroke||!s&&o.color;c&&(a.stroke={value:c})}if(a.fill&&"transparent"!==a.fill.value&&!a.stroke&&(a.stroke={value:"transparent"}),r!==Ls){var l=ri(u.shape)||o.shape;l&&(a.shape={value:l})}if(r!==Gs){var d=ni(u.opacity)||o.opacity;d&&(a.opacity={value:d})}return a=ms({},a,t),os(a).length>0?a:void 0}}function ei(e,t,n,r,i){var a={};if("gradient"===i){var o=ni(n.encoding.opacity)||n.markDef.opacity;o&&(a.opacity={value:o})}return a=ms({},a,t),os(a).length>0?a:void 0}function ti(e,t,n,r,i){var a=n.legend(r),o=n.config,u={};if(st(e)){var s=n.getScaleComponent(r).get("type")===Sc.UTC;t=ms({text:{signal:ir("datum.value",e.timeUnit,a.format,o.legend.shortTimeLabels,o.timeFormat,s)}},t)}return u=ms({},u,t),os(u).length>0?u:void 0}function ni(e){return ii(e,function(e,t){return Math.max(e,t.value)})}function ri(e){return ii(e,function(e,t){return void 0!==e?e:t.value})}function ii(e,t){return Ie(e)?(Eu(e.condition)?e.condition:[e.condition]).reduce(t,e.value):We(e)?e.value:void 0}function ai(e){var t=e.values;return t&&ve(t[0])?t.map(function(e){return{signal:xe(e,!0)}}):t}function oi(e,t,n){if(ee(t)&&("quantitative"===e&&!Rt(n)||"temporal"===e&&k(["time","utc"],n)))return"gradient"}function ui(e){Sa(e)?e.component.legends=si(e):e.component.legends=di(e)}function si(e){var t=e.encoding;return[$s,js,Fs,qs,Ls,Gs].reduce(function(n,r){var i=t[r];return!e.legend(r)||!e.getScaleComponent(r)||Ue(i)&&r===Ls&&i.type===cc||(n[r]=ci(e,r)),n},{})}function fi(e,t){switch(t){case $s:var n=e.scaleName($s);return e.markDef.filled?{fill:n}:{stroke:n};case js:case Fs:case qs:case Ls:case Gs:return r={},r[t]=e.scaleName(t),r}var r}function ci(e,t){var n=e.fieldDef(t),r=e.legend(t),i=new Nl({},fi(e,t));Tc.forEach(function(n){var a=li(n,r,t,e);if(void 0!==a){var o="values"===n?!!r.values:a===r[n];(o||void 0===e.config.legend[n])&&i.set(n,a,o)}});var a=r.encoding||{},o=["labels","legend","title","symbols","gradient"].reduce(function(r,o){var u=Dl[o]?Dl[o](n,a[o],e,t,i.get("type")):a[o];return void 0!==u&&os(u).length>0&&(r[o]={update:u}),r},{});return os(o).length>0&&i.set("encode",o,!!r.encoding),i}function li(e,t,n,r){var i=r.fieldDef(n);switch(e){case"format":return er(i,t.format,r.config);case"title":var a=void 0!==i.title?i.title:t.title||(void 0===t.title?void 0:null);return Kn(a,et(i,r.config))||void 0;case"values":return ai(t);case"type":return Kn(t.type,oi(i.type,n,r.getScaleComponent(n).get("type")))}return t[e]}function di(e){for(var t=e.component,n=t.legends,r=t.resolve,i=function(t){ui(t),os(t.component.legends).forEach(function(i){r.legend[i]=_r(e.component.resolve,i),"shared"===r.legend[i]&&(n[i]=hi(n[i],t.component.legends[i]),n[i]||(r.legend[i]="independent",delete n[i]))})},a=0,o=e.children;a<o.length;a++){var u=o[a];i(u)}return os(n).forEach(function(t){for(var n=0,i=e.children;n<i.length;n++){var a=i[n];a.component.legends[t]&&"shared"===r.legend[t]&&delete a.component.legends[t]}}),n}function hi(e,t){if(!e)return t.clone();var n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");
if(!n.explicit||!r.explicit||n.value===r.value){for(var i=!1,a=function(n){var r=Sr(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",function(e,t){switch(n){case"title":return ur(e,t);case"type":return i=!0,wr("symbol")}return Mr(e,t,n,"legend")});e.setWithExplicit(n,r)},o=0,u=zc;o<u.length;o++){var s=u[o];a(s)}return i&&(((e.implicit||{}).encode||{}).gradient&&U(e.implicit,["encode","gradient"]),((e.explicit||{}).encode||{}).gradient&&U(e.explicit,["encode","gradient"])),e}}function pi(e){for(var t=e.component.legends,n={},r=0,i=os(t);r<i.length;r++){var a=i[r],o=e.getScaleComponent(a),u=as(o.domains);if(n[u])for(var s=0,f=n[u];s<f.length;s++){var c=f[s],l=hi(c,t[a]);l||n[u].push(t[a])}else n[u]=[t[a].clone()]}return A(L(n)).map(function(e){return e.combine()})}function gi(e){return Ca(e)||Aa(e)||Oa(e)?mi(e):vi(e)}function mi(e){return e.children.reduce(function(e,t){return e.concat(t.assembleProjections())},vi(e))}function vi(e){var t=e.component.projection;if(!t||t.merged)return[];var n=t.combine(),r=n.name,i=Q(n,["name"]),a={signal:"["+t.size.map(function(e){return e.signal}).join(", ")+"]"},o=t.data.reduce(function(t,n){var r=In(n)?n.signal:"data('"+e.lookupDataSource(n)+"')";return k(t,r)||t.push(r),t},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[ms({name:r,size:a,fit:{signal:o.length>1?"["+o.join(", ")+"]":o[0]}},i)]}function yi(e){Sa(e)?e.component.projection=bi(e):e.component.projection=xi(e)}function bi(e){var t=e.specifiedProjection,n=e.markDef,r=e.config,i=e.encoding,a=n&&n.type===Mf,o=i&&Xs.some(function(e){return Ue(i[e])});if(a||o){var u=[];return[[zs,Rs],[Ns,Ts]].forEach(function(t){(e.channelHasField(t[0])||e.channelHasField(t[1]))&&u.push({signal:e.getName("geojson_"+u.length)})}),e.channelHasField(Ls)&&e.fieldDef(Ls).type===cc&&u.push({signal:e.getName("geojson_"+u.length)}),0===u.length&&u.push(e.requestDataName(hl)),new Ll(e.projectionName(!0),ms({},r.projection||{},t||{}),[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")],u)}}function _i(e,t){var n=O(Pl,function(n){return!e.explicit.hasOwnProperty(n)&&!t.explicit.hasOwnProperty(n)||!(!e.explicit.hasOwnProperty(n)||!t.explicit.hasOwnProperty(n)||as(e.get(n))!==as(t.get(n)))}),r=as(e.size)===as(t.size);if(r){if(n)return e;if(as(e.explicit)===as({}))return t;if(as(t.explicit)===as({}))return e}return null}function xi(e){if(0!==e.children.length){var t,n=O(e.children,function(e){yi(e);var n=e.component.projection;if(n){if(t){var r=_i(t,n);return r&&(t=r),!!r}return t=n,!0}return!0});if(t&&n){var r=e.projectionName(!0),i=new Ll(r,t.specifiedProjection,t.size,$(t.data));return e.children.forEach(function(e){e.component.projection&&(i.data=i.data.concat(e.component.projection.data),e.renameProjection(e.component.projection.get("name"),r),e.component.projection.merged=!0)}),i}}}function wi(e){return!(!e||"count"!==e.op&&!e.field||!e.op)}function ki(e){return!!e&&Eu(e)&&e.every(function(e){return a(e)})}function Mi(e,t){var n=e.fieldDef(t);return t+"_"+Ye(n)+"_sort_index"}function Si(e,t,n){return n.bin?(e[Ye(n,{})]=!0,e[Ye(n,{binSuffix:"end"})]=!0,sr(n,t)&&(e[Ye(n,{binSuffix:"range"})]=!0)):e[Ye(n)]=!0,e}function Ei(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];for(var i in r)r.hasOwnProperty(i)&&(n in e?e[n][i]=r[i]:e[n]={op:r[i]})}}function Oi(e,t){var n=W(e);if("number"===t)return"toNumber("+n+")";if("boolean"===t)return"toBoolean("+n+")";if("string"===t)return"toString("+n+")";if("date"===t)return"toDate("+n+")";if("flatten"===t)return n;if(0===t.indexOf("date:")){var r=t.slice(5,t.length);return"timeParse("+n+","+r+")"}if(0===t.indexOf("utc:")){var r=t.slice(4,t.length);return"utcParse("+n+","+r+")"}return ge(pf.unrecognizedParse(t)),null}function Ai(e){function t(n){if(!(n instanceof Gl)){var r=n.parent;e(n)&&t(r)}}return t}function Ci(e){var t=e.parent;if(e instanceof Wl){if(t instanceof Gl)return!1;if(t.numChildren()>1)return!0;if(t instanceof Wl)t.merge(e);else{if(N(t.producedFields(),e.dependentFields()))return!0;e.swapWithParent()}}return!0}function Ri(e){return!(e instanceof jl||e.numChildren()>0||e instanceof Ul)&&(e.remove(),!0)}function Ti(e){var t={};return Ai(function(e){if(e instanceof Yl){var n=e.producedFields(),r=os(n).every(function(e){return!!t[e]});r?e.remove():t=ms({},t,n)}return!0})(e)}function zi(e){return e.stack.stackBy.reduce(function(e,t){var n=t.fieldDef,r=Ye(n);return r&&e.push(r),e},[])}function Ni(e){function t(n){if(!(n instanceof Ul)){var r=n.clone();if(r instanceof jl){var i=Vl+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Il||r instanceof Hl)&&r.addDimensions(e.fields);return A(n.children.map(t)).forEach(function(e){return e.parent=r}),[r]}return A(n.children.map(t))}return t}function Di(e){if(e instanceof Ul)if(1!==e.numChildren()||e.children[0]instanceof jl){Pi(e.model.component.data.main);var t=A(e.children.map(Ni(e)));t.forEach(function(t){return t.parent=e.model.component.data.main})}else{var n=e.children[0];(n instanceof Il||n instanceof Hl)&&n.addDimensions(e.fields),n.swapWithParent(),Di(e)}else e.children.forEach(Di)}function Pi(e){if(e instanceof jl&&e.type===hl&&1===e.numChildren()){var t=e.children[0];t instanceof Ul||(t.swapWithParent(),Pi(e))}}function Li(e){e instanceof Bl&&O(L(e.filter),function(e){return null===e})&&e.remove(),e instanceof jl&&!e.isRequired()&&e.remove(),e.children.forEach(Li)}function qi(e){function t(e){0===e.numChildren()?n.push(e):e.children.forEach(t)}var n=[];return e.forEach(t),n}function $i(e){var t=L(e.sources);t.forEach(Li),t=t.filter(function(e){return e.numChildren()>0}),qi(t).forEach(Ai(Ri)),t=t.filter(function(e){return e.numChildren()>0}),qi(t).forEach(Ai(Ci)),qi(t).forEach(Ti),t.forEach(Di),os(e.sources).forEach(function(t){0===e.sources[t].numChildren()&&delete e.sources[t]})}function ji(e){Sa(e)?Fi(e):Ii(e)}function Fi(e){var t=e.specifiedScales,n=e.component.scales;os(n).forEach(function(r){var i=t[r],a=i?i.domain:void 0,o=Bi(e,r),u=n[r];if(u.domains=o,Dt(a)&&u.set("domainRaw",{signal:kd+w(a)},!0),e.component.data.isFaceted){for(var s=e;!Ea(s)&&s.parent;)s=s.parent;var f=s.component.resolve.scale[r];if("shared"===f)for(var c=0,l=o;c<l.length;c++){var d=l[c];Gn(d)&&(d.data=Vl+d.data.replace(Vl,""))}}})}function Ii(e){for(var t=0,n=e.children;t<n.length;t++){var r=n[t];ji(r)}var i=e.component.scales;os(i).forEach(function(t){for(var n,r=null,a=0,o=e.children;a<o.length;a++){var u=o[a],s=u.component.scales[t];if(s){n=void 0===n?s.domains:n.concat(s.domains);var f=s.get("domainRaw");r&&f&&r.signal!==f.signal&&ge("The same selection must be used to override scale domains in a layered view."),r=f}}i[t].domains=n,r&&i[t].set("domainRaw",r,!0)})}function Ui(e,t,n,r){if("unaggregated"===e){var i=Yi(t,n),a=i.valid,o=i.reason;if(!a)return void ge(o)}else if(void 0===e&&r.useUnaggregatedDomain){var a=Yi(t,n).valid;if(a)return"unaggregated"}return e}function Bi(e,t){var n=e.getScaleComponent(t).get("type"),r=Ui(e.scaleDomain(t),e.fieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]=ms({},e.specifiedScales[t],{domain:r})),"x"===t&&e.channelHasField("x2")?e.channelHasField("x")?Wi(n,r,e,"x").concat(Wi(n,r,e,"x2")):Wi(n,r,e,"x2"):"y"===t&&e.channelHasField("y2")?e.channelHasField("y")?Wi(n,r,e,"y").concat(Wi(n,r,e,"y2")):Wi(n,r,e,"y2"):Wi(n,r,e,t)}function Wi(e,t,n,r){var i=n.fieldDef(r);if(t&&"unaggregated"!==t&&!Dt(t))return ve(t[0])?t.map(function(e){return{signal:"{data: "+xe(e,!0)+"}"}}):[t];var a=n.stack;if(a&&r===a.fieldChannel){if("normalize"===a.offset)return[[0,1]];var o=n.requestDataName(hl);return[{data:o,field:n.vgField(r,{suffix:"start"})},{data:o,field:n.vgField(r,{suffix:"end"})}]}var u=ne(r)?Gi(n,r,e):void 0;if("unaggregated"===t){var o=n.requestDataName(hl);return[{data:o,field:n.vgField(r,{aggregate:"min"})},{data:o,field:n.vgField(r,{aggregate:"max"})}]}if(i.bin){if(Rt(e)){var s=n.getName(oe(i.bin)+"_"+i.field+"_bins");return[{signal:"sequence("+s+".start, "+s+".stop + "+s+".step, "+s+".step)"}]}if(Ct(e))return[{data:j(u)?n.requestDataName(hl):n.requestDataName(pl),field:n.vgField(r,sr(i,r)?{binSuffix:"range"}:{}),sort:u!==!0&&wi(u)?u:{field:n.vgField(r,{}),op:"min"}}];if("x"===r||"y"===r){if(ue(i.bin)&&i.bin.extent)return[i.bin.extent];var o=n.requestDataName(hl);return[{data:o,field:n.vgField(r,{})},{data:o,field:n.vgField(r,{binSuffix:"end"})}]}return[{data:n.requestDataName(hl),field:n.vgField(r,{})}]}return u?[{data:j(u)?n.requestDataName(hl):n.requestDataName(pl),field:n.vgField(r),sort:u}]:[{data:n.requestDataName(hl),field:n.vgField(r)}]}function Gi(e,t,n){if(Ct(n)){var r=e.sort(t);return ki(r)?{op:"min",field:Mi(e,t),order:"ascending"}:wi(r)?r:"descending"===r?{op:"min",field:e.vgField(t),order:"descending"}:!!k(["ascending",void 0],r)||void 0}}function Yi(e,t){return e.aggregate?hs[e.aggregate]?"quantitative"===e.type&&"log"===t?{valid:!1,reason:pf.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:pf.unaggregateDomainWithNonSharedDomainOp(e.aggregate)}:{valid:!1,reason:pf.unaggregateDomainHasNoEffectForRawField(e)}}function Hi(e){var t=T(e.map(function(e){if(Gn(e)){var t=(e.sort,Q(e,["sort"]));return t}return e}),w),n=T(e.map(function(e){if(Gn(e)){var t=e.sort;return void 0===t||j(t)||("count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}}).filter(function(e){return void 0!==e}),w);if(1===t.length){var r=e[0];if(Gn(r)&&n.length>0){var i=n[0];return n.length>1&&(ge(pf.MORE_THAN_ONE_SORT),i=!0),ms({},r,{sort:i})}return r}var a=T(n.map(function(e){return e===!0?e:"count"===e.op?e:(ge(pf.domainSortDropped(e)),!0)}),w),o=void 0;1===a.length?o=a[0]:a.length>1&&(ge(pf.MORE_THAN_ONE_SORT),o=!0);var u=T(e.map(function(e){return Gn(e)?e.data:null}),function(e){return e});if(1===u.length&&null!==u[0]){var r=ms({data:u[0],fields:t.map(function(e){return e.field})},o?{sort:o}:{});return r}return ms({fields:t},o?{sort:o}:{})}function Vi(e){if(Gn(e)&&a(e.field))return e.field;if(Bn(e)){for(var t=void 0,n=0,r=e.fields;n<r.length;n++){var i=r[n];if(Gn(i)&&a(i.field))if(t){if(t!==i.field)return ge("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),t}else t=i.field}return ge("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),t}if(Wn(e)){ge("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.");var t=e.fields[0];return a(t)?t:void 0}}function Xi(e,t){var n=e.component.scales[t],r=n.domains.map(function(t){return Gn(t)&&(t.data=e.lookupDataSource(t.data)),t});return Hi(r)}function Zi(e){return Ca(e)||Aa(e)||Oa(e)?e.children.reduce(function(e,t){return e.concat(Zi(t))},Ji(e)):Ji(e)}function Ji(e){return os(e.component.scales).reduce(function(t,n){var r=e.component.scales[n];if(r.merged)return t;var i=r.combine(),a=i.domainRaw,o=i.range,u=i.name,s=i.type,f=(i.domainRaw,i.range,Q(i,["name","type","domainRaw","range"]));return o=Qi(o,u,e,n),a&&Wa(a)&&(a=Ga(e,a)),t.push(ms({name:u,type:s,domain:Xi(e,n)},a?{domainRaw:a}:{},{range:o},f)),t},[])}function Qi(e,t,n,r){if("x"===r||"y"===r){if(Un(e))return{step:{signal:t+"_step"}};if(Eu(e)&&2===e.length){var i=e[0],a=e[1];if(0===i&&In(a))return[0,{signal:n.getSizeName(a.signal)}];if(In(i)&&0===a)return[{signal:n.getSizeName(i.signal)},0]}}return e}function Ki(e){Sa(e)?ea(e):la(e,"range")}function ea(e){var t=e.component.scales;lf.forEach(function(n){var r=t[n];if(r){var i=e.getScaleComponent(n),a=e.specifiedScales[n],o=e.fieldDef(n),u="x"===n?"width":"y"===n?"height":void 0,s=u?!!e.component.layoutSize.get(u):void 0,f=i.get("type"),c=k(["point","band"],f)||!!a.rangeStep;u&&e.fit&&!s&&c&&(ge(pf.CANNOT_FIX_RANGE_STEP_WITH_FIT),s=!0);var l=ta(e),d=na(n,f,o.type,a,e.config,r.get("zero"),e.mark,s,e.getName(u),l);r.setWithExplicit("range",d)}})}function ta(e){var t=[],n=e.getScaleComponent("x"),r=n&&n.get("range");r&&Un(r)&&l(r.step)&&t.push(r.step);var i=e.getScaleComponent("y"),a=i&&i.get("range");return a&&Un(a)&&l(a.step)&&t.push(a.step),t}function na(e,t,n,r,i,a,o,u,s,f){for(var c=u||null===r.rangeStep,l=0,d=Zl;l<d.length;l++){var h=d[l];if(void 0!==r[h]){var p=Pt(t,h),g=Lt(e,h);if(p)if(g)ge(g);else switch(h){case"range":return xr(r[h]);case"scheme":return xr(ra(r[h]));case"rangeStep":var m=r[h];if(null!==m){if(!u)return xr({step:m});ge(pf.rangeStepDropped(e))}}else ge(pf.scalePropertyNotWorkWithScaleType(t,h,e))}}return wr(ia(e,t,n,i,a,o,s,f,c))}function ra(e){if(Nt(e)){var t={scheme:e.name};return e.count&&(t.count=e.count),e.extent&&(t.extent=e.extent),t}return{scheme:e}}function ia(e,t,n,r,i,a,o,u,s){switch(e){case Es:case Os:if(k(["point","band"],t)&&!s)if(e===Es&&"text"===a){if(r.scale.textXRangeStep)return{step:r.scale.textXRangeStep}}else if(r.scale.rangeStep)return{step:r.scale.rangeStep};return e===Os&&Tt(t)?[{signal:o},0]:[0,{signal:o}];case qs:var f=aa(a,i,r),c=oa(a,u,r);return[f,c];case Ls:return"symbol";case $s:case js:case Fs:return"ordinal"===t?"nominal"===n?"category":"ordinal":"rect"===a||"geoshape"===a?"heatmap":"ramp";case Gs:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel "+e)}function aa(e,t,n){if(t)return 0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(pf.incompatibleChannel("size",e))}function oa(e,t,n){var r=n.scale;switch(e){case"bar":case"tick":return void 0!==n.scale.maxBandSize?n.scale.maxBandSize:ua(t,n.scale)-1;case"line":case"trail":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var i=ua(t,r);return(i-2)*(i-2)}throw new Error(pf.incompatibleChannel("size",e))}function ua(e,t){return e.length>0?Math.min.apply(null,e):t.rangeStep?t.rangeStep:21}function sa(e,t){Sa(e)?fa(e,t):la(e,t)}function fa(e,t){var n=e.component.scales;os(n).forEach(function(r){var i=e.specifiedScales[r],a=n[r],o=e.getScaleComponent(r),u=e.fieldDef(r),s=e.sort(r),f=e.config,c=i[t],l=o.get("type"),d=Pt(l,t),h=Lt(r,t);if(void 0!==c&&(d?h&&ge(h):ge(pf.scalePropertyNotWorkWithScaleType(l,t,r))),d&&void 0===h)if(void 0!==c)a.copyKeyFromObject(t,i);else{var p=ca(t,r,u,s,o.get("type"),o.get("padding"),o.get("paddingInner"),i.domain,e.markDef,f);void 0!==p&&a.set(t,p,!1)}})}function ca(e,t,n,r,i,a,o,u,s,f){var c=f.scale;switch(e){case"nice":return da(i,t,n);case"padding":return ha(t,i,c,n,s,f.bar);case"paddingInner":return pa(a,t,c);case"paddingOuter":return ga(a,t,i,o,c);case"reverse":return ma(i,r);case"zero":return va(t,n,u,s)}return c[e]}function la(e,t){for(var n=e.component.scales,r=0,i=e.children;r<i.length;r++){var a=i[r];"range"===t?Ki(a):sa(a,t)}os(n).forEach(function(r){for(var i,a=0,o=e.children;a<o.length;a++){var u=o[a],s=u.component.scales[r];if(s){var f=s.getWithExplicit(t);i=Sr(i,f,t,"scale",kr(function(e,n){switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0}))}}n[r].setWithExplicit(t,i)})}function da(e,t,n){if(!n.bin&&!k([Sc.TIME,Sc.UTC],e))return k([Es,Os],t)}function ha(e,t,n,r,i,a){if(k([Es,Os],e)){if(zt(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;var o=i.type,u=i.orient;if("bar"===o&&!r.bin&&("vertical"===u&&"x"===e||"horizontal"===u&&"y"===e))return a.continuousBandSize}if(t===Sc.POINT)return n.pointPadding}}function pa(e,t,n){if(void 0===e)return k([Es,Os],t)?n.bandPaddingInner:void 0}function ga(e,t,n,r,i){if(void 0===e)return k([Es,Os],t)&&n===Sc.BAND?void 0!==i.bandPaddingOuter?i.bandPaddingOuter:r/2:void 0}function ma(e,t){if(Tt(e)&&"descending"===t)return!0}function va(e,t,n,r){var i=!!n&&"unaggregated"!==n;if(i)return!1;if("size"===e&&"quantitative"===t.type)return!0;if(!t.bin&&k([Es,Os],e)){var a=r.orient,o=r.type;return!k(["bar","area","line","trail"],o)||!("horizontal"===a&&"y"===e||"vertical"===a&&"x"===e)}return!1}function ya(e,t,n,r,i){var a=ba(t,n,r,i);return ne(t)?void 0!==e?qt(t,e)?_a(e,n)?e:(ge(pf.scaleTypeNotWorkWithFieldDef(e,a)),a):(ge(pf.scaleTypeNotWorkWithChannel(t,e,a)),a):a:null}function ba(e,t,n,r){switch(t.type){case"nominal":case"ordinal":if(ee(e)||"discrete"===ae(e))return"shape"===e&&"ordinal"===t.type&&ge(pf.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(k(["x","y"],e)){if(k(["rect","bar","rule"],n))return"band";if("bar"===n)return"band"}return"point";case"temporal":return ee(e)?"sequential":"discrete"===ae(e)?(ge(pf.discreteChannelCannotEncode(e,"temporal")),"ordinal"):"time";case"quantitative":return ee(e)?t.bin?"bin-ordinal":"sequential":"discrete"===ae(e)?(ge(pf.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):t.bin&&"x"!==e&&"y"!==e?"bin-linear":"linear";case"latitude":case"longitude":case"geojson":return}throw new Error(pf.invalidFieldType(t.type))}function _a(e,t){var n=t.type;return k([Vf.ORDINAL,Vf.NOMINAL],n)?void 0===e||Ct(e):n===Vf.TEMPORAL?k([Sc.TIME,Sc.UTC,Sc.SEQUENTIAL,void 0],e):n!==Vf.QUANTITATIVE||(t.bin?k([Sc.BIN_LINEAR,Sc.BIN_ORDINAL,Sc.LINEAR],e):k([Sc.LOG,Sc.POW,Sc.SQRT,Sc.QUANTILE,Sc.QUANTIZE,Sc.LINEAR,Sc.SEQUENTIAL,void 0],e))}function xa(e){wa(e),ji(e);for(var t=0,n=Jc;t<n.length;t++){var r=n[t];sa(e,r)}Ki(e)}function wa(e){Sa(e)?e.component.scales=ka(e):e.component.scales=Ma(e)}function ka(e){var t=e.encoding,n=e.config,r=e.mark;return lf.reduce(function(i,a){var o,u=void 0,s=t[a];if(Ue(s)&&r===Mf&&a===Ls&&s.type===cc)return i;if(Ue(s)?(o=s,u=s.scale):Fe(s)?(o=s.condition,u=s.condition.scale):a===Es?o=nt(t.x2):a===Os&&(o=nt(t.y2)),o&&null!==u&&u!==!1){u=u||{};var f=u.type,c=ya(u.type,a,o,r,n.scale);i[a]=new Xl(e.scaleName(a+"",!0),{value:c,explicit:f===c})}return i},{})}function Ma(e){for(var t=e.component.scales={},n={},r=e.component.resolve,i=function(t){wa(t),os(t.component.scales).forEach(function(i){if(r.scale[i]=r.scale[i]||br(i,e),"shared"===r.scale[i]){var a=n[i],o=t.component.scales[i].getWithExplicit("type");a?Ot(a.value,o.value)?n[i]=Sr(a,o,"type","scale",Jl):(r.scale[i]="independent",delete n[i]):n[i]=o}})},a=0,o=e.children;a<o.length;a++){var u=o[a];i(u)}return os(n).forEach(function(r){var i=e.scaleName(r,!0),a=n[r];t[r]=new Xl(i,a);for(var o=0,u=e.children;o<u.length;o++){var s=u[o],f=s.component.scales[r];f&&(s.renameScale(f.get("name"),i),f.merged=!0)}}),t}function Sa(e){return e&&"unit"===e.type}function Ea(e){return e&&"facet"===e.type}function Oa(e){return e&&"repeat"===e.type}function Aa(e){return e&&"concat"===e.type}function Ca(e){return e&&"layer"===e.type}function Ra(e,t){var n=o(e.scaleName(t));return"domain("+n+")"}function Ta(e,t,n){var r=Ja(t,n,"visual"),i=Ja(t,n,"data"),a=td.has(t),u=e.scaleName(n),s=o(u),f=e.getScaleComponent(n),c=f?f.get("type"):void 0,l=e.getSizeSignalRef(n===Es?"width":"height").signal,d=n+"(unit)",h=za(t,function(e,t){return e.concat({events:t.between[0],update:"["+d+", "+d+"]"},{events:t,update:"["+r+"[0], clamp("+d+", 0, "+l+")]"})});return h.push({events:{signal:t.name+rd},update:Tt(c)&&!Rt(c)?"[scale("+s+", "+i+"[0]), scale("+s+", "+i+"[1])]":"[0, 0]"}),a?[{name:i,on:[]}]:[{name:r,value:[],on:h},{name:i,on:[{events:{signal:r},update:r+"[0] === "+r+"[1] ? null : invert("+s+", "+r+")"}]}]}function za(e,t){return e.events.reduce(function(e,n){return n.between?t(e,n):(ge(n+" is not an ordered event stream for interval selections"),e)},[])}function Na(e,t){var n=t.project,r=od.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum",i=[],a=n.map(function(e){return o(e.channel)}).filter(function(e){return e}).join(", "),u=n.map(function(e){return o(e.field)}).join(", "),s=n.map(function(t){var n=t.channel,a=e.fieldDef(n);return a&&a.bin?(i.push(t.field),"["+W(e.vgField(n,{}),r)+", "+(W(e.vgField(n,{binSuffix:"end"}),r)+"]")):""+W(t.field,r)}).join(", ");return[{name:t.name+xd,value:{},on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? "+("{unit: "+Xa(e)+", encodings: ["+a+"], ")+("fields: ["+u+"], values: ["+s+"]")+(i.length?", "+i.map(function(e){return o("bin_"+e)+": 1"}).join(", "):"")+"} : null",force:!0}]}]}function Da(e,t,n,r,i){var a=t.name,o=td.has(t),u=i.filter(function(e){return e.name===Ja(t,n,o?"data":"visual")})[0],s=a+hd,f=a+pd,c=e.getSizeSignalRef(r).signal,l=e.getScaleComponent(n),d=l.get("type"),h=o&&n===Es?"-":"",p=s+".extent_"+n,g=""+h+f+"."+n+" / "+(o?""+c:"span("+p+")"),m=o?"log"===d?"panLog":"pow"===d?"panPow":"panLinear":"panLinear",v=m+"("+p+", "+g+(o&&"pow"===d?", "+(l.get("exponent")||1):"")+")";u.on.push({events:{signal:f},update:o?v:"clampRange("+v+", 0, "+c+")"})}function Pa(e,t,n,r,i){var a=t.name,o=td.has(t),u=i.filter(function(e){return e.name===Ja(t,n,o?"data":"visual")})[0],s=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(n),c=f.get("type"),l=o?Ra(e,n):u.name,d=a+vd,h=""+a+md+"."+n,p=o?"log"===c?"zoomLog":"pow"===c?"zoomPow":"zoomLinear":"zoomLinear",g=p+"("+l+", "+h+", "+d+(o&&"pow"===c?", "+(f.get("exponent")||1):"")+")";u.on.push({events:{signal:d},update:o?g:"clampRange("+g+", 0, "+s+")"})}function La(e,t){for(var n in bd)bd[n].has(e)&&t(bd[n])}function qa(e,t){var n={},r=e.config.selection,i=function(i){if(!t.hasOwnProperty(i))return"continue";var o=t[i],u=r[o.type];for(var s in u)"encodings"===s&&o.fields||"fields"===s&&o.encodings||("mark"===s&&(o[s]=ms({},u[s],o[s])),void 0!==o[s]&&o[s]!==!0||(o[s]=u[s]||o[s]));i=F(i);var f=n[i]=ms({},o,{name:i,events:a(o.on)?Sn(o.on,"scope"):o.on});La(f,function(t){t.parse&&t.parse(e,o,f)})};for(var o in t)i(o);return n}function $a(e,t){Ya(e,function(n,r){var i=n.name,a=r.modifyExpr(e,n);t.push.apply(t,r.signals(e,n)),La(n,function(r){r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(a=r.modifyExpr(e,n,a))}),t.push({name:i+wd,on:[{events:{signal:i+xd},update:"modify("+o(n.name+_d)+", "+a+")"}]})});var n=Va(e);if(t.length&&n){var r=o(n.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Sn("mousemove","scope"),update:"isTuple(facet) ? facet : group("+r+").datum"}]})}return t}function ja(e,t){var n=!1;if(Ya(e,function(r,i){i.topLevelSignals&&(t=i.topLevelSignals(e,r,t)),La(r,function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}),n=!0}),n){var r=t.filter(function(e){return"unit"===e.name});r.length||t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})}return t}function Fa(e,t){return Ya(e,function(e){var n=t.filter(function(t){return t.name===e.name+_d});n.length||t.push({name:e.name+_d})}),t}function Ia(e,t){return Ya(e,function(n,r){t=r.marks?r.marks(e,n,t):t,La(n,function(r){r.marks&&(t=r.marks(e,n,t))})}),t}function Ua(e,t){return e.children.forEach(function(e){Sa(e)&&(t=Ia(e,t))}),t}function Ba(e,t,n){function r(t){var r=F(t),a=e.getSelectionComponent(r,t),u=o(r+_d);if(a.timeUnit){var s=n||e.component.data.raw,f=a.timeUnit.clone();s.parent?f.insertAsParentOf(s):s.parent=f}return"none"!==a.empty&&i.push(u),Ha(a.type).predicate+("("+u+", datum")+("global"===a.resolve?")":", "+o(a.resolve)+")")}var i=[],a=I(t,r);return(i.length?"!("+i.map(function(e){return"length(data("+e+"))"}).join(" || ")+") || ":"")+("("+a+")")}function Wa(e){return e.signal.indexOf(kd)>=0}function Ga(e,t){var n=JSON.parse(t.signal.replace(kd,"")),r=F(n.selection),i=e.component.selection&&e.component.selection[r];return i?(ge('Use "bind": "scales" to setup a binding for scales and selections within the same view.'),{signal:"null"}):(i=e.getSelectionComponent(r,n.selection),n.encoding||n.field||(n.field=i.project[0].field,i.project.length>1&&ge('A "field" or "encoding" must be specified when using a selection as a scale domain. '+('Using "field": '+o(n.field)+"."))),{signal:Ha(i.type).scaleDomain+("("+o(r+_d)+", "+o(n.encoding||null)+", ")+o(n.field||null)+("global"===i.resolve?")":", "+o(i.resolve)+")")})}function Ya(e,t){var n=e.component.selection;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];t(i,Ha(i.type))}}function Ha(e){switch(e){case"single":return sd;case"multi":return ud;case"interval":return id}return null}function Va(e){for(var t=e.parent;t&&!Ea(t);)t=t.parent;return t}function Xa(e){var t=o(e.name),n=Va(e);return n&&(t+=(n.facet.row?" + '_' + ("+W(n.vgField("row"),"facet")+")":"")+(n.facet.column?" + '_' + ("+W(n.vgField("column"),"facet")+")":"")),t}function Za(e){var t=!1;return Ya(e,function(e){t=t||e.project.some(function(e){return e.field===Kc})}),t}function Ja(e,t,n){var r=e._signalNames||(e._signalNames={});if(r[t]&&r[t][n])return r[t][n];r[t]=r[t]||{};for(var i=F(e.name+"_"+("visual"===n?t:e.fields[t])),a=i,o=1;r[a];)a=i+"_"+o++;return r[a]=r[t][n]=a}function Qa(e){var t=null,n=null,r=null,i=null;return e.project.forEach(function(e,a){e.channel===Es?(t=e,n=a):e.channel===Os&&(r=e,i=a)}),{x:t,xi:n,y:r,yi:i}}function Ka(e){return e&&e.selection}function eo(e){return e&&!!e.field&&void 0!==e.equal}function to(e){return!!(e&&e.field&&Eu(e.range)&&2===e.range.length)}function no(e){return e&&!!e.field&&(Eu(e.oneOf)||Eu(e.in))}function ro(e){return no(e)||eo(e)||to(e)}function io(e,t,n){return I(t,function(t){return a(t)?t:Ka(t)?Ba(e,t.selection,n):ao(t)})}function ao(e,t){void 0===t&&(t=!0);var n=e.timeUnit?"time("+Te(e.timeUnit,e.field)+")":Ye(e,{expr:"datum"});if(eo(e))return n+"==="+oo(e.equal,e.timeUnit);if(no(e)){var r=e.oneOf||e.in;return"indexof(["+r.map(function(t){return oo(t,e.timeUnit)}).join(",")+"], "+n+") !== -1"}if(to(e)){var i=e.range[0],a=e.range[1];if(null!==i&&null!==a&&t)return"inrange("+n+", ["+oo(i,e.timeUnit)+", "+oo(a,e.timeUnit)+"])";var o=[];return null!==i&&o.push(n+" >= "+oo(i,e.timeUnit)),null!==a&&o.push(n+" <= "+oo(a,e.timeUnit)),o.length>0?o.join(" && "):"true"}throw new Error("Invalid field predicate: "+JSON.stringify(e))}function oo(e,t){if(ve(e)){var n=xe(e,!0);return"time("+n+")"}if(we(t)){var r={};r[t]=e;var n=xe(r,!0);return"time("+n+")"}return ke(t)?oo(e,Se(t)):JSON.stringify(e)}function uo(e){return ro(e)&&e.timeUnit?ms({},e,{timeUnit:Ne(e.timeUnit)}):e}function so(e,t,n,r){if(sr(t,n)){var i=Sa(e)?e.axis(n)||e.legend(n)||{}:{},a=Ye(t,{expr:"datum"}),o=Ye(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ye(t,{binSuffix:"range"}),formula:rr(a,o,i.format,r)}}return{}}function fo(e,t){return oe(e)+"_"+t}function co(e,t){return{signal:e.getName(t+"_bins"),extentSignal:e.getName(t+"_extent")}}function lo(e){return"as"in e}function ho(e,t){var n;n=lo(e)?[e.as,e.as+"_end"]:[Ye(e,{}),Ye(e,{binSuffix:"end"})];var r=at(e.bin,void 0)||{},i=fo(r,e.field),a=co(t,i),o=a.signal,u=a.extentSignal,s=ms({bin:r,field:e.field,as:n},o?{signal:o}:{},u?{extentSignal:u}:{});return{key:i,binComponent:s}}function po(e,t){if(e.data||!e.parent){var n=new Gl(e.data),r=n.hash();return r in t?t[r]:(t[r]=n,n)}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function go(e,t){var n=0;return t.transforms.forEach(function(r){if(Ln(r))e=new Fl(e,r);else if(Nn(r)){var i={},o=r.filter,u=null;eo(o)?u=o.equal:to(o)?u=o.range[0]:no(o)&&(u=(o.oneOf||o.in)[0]),u&&(ve(u)?i[o.field]="date":l(u)?i[o.field]="number":a(u)&&(i[o.field]="string")),os(i).length>0&&(e=new Wl(e,i)),e=new Sd(e,t,r.filter)}else if(qn(r))e=Md.makeFromTransform(e,r,t);else if($n(r))e=Yl.makeFromTransform(e,r);else if(jn(r))e=Il.makeFromTransform(e,r),Za(t)&&(e=new Ad(e));else if(Dn(r))e=Cd.make(e,t,r,n++);else{if(!Pn(r))return void ge(pf.invalidTransformIgnored(r));e=new Rd(e,r)}}),e}function mo(e){var t=po(e,e.component.data.sources),n=e.component.data.outputNodes,r=e.component.data.outputNodeRefCounts;Za(e)&&(Sa(e)||Ca(e))&&(t=new Ad(t));var i=e.parent&&Ca(e.parent);(Sa(e)||Ea(e))&&i&&(t=Md.makeFromEncoding(t,e)||t),e.transforms.length>0&&(t=go(t,e));var a=Wl.make(t,e);a&&(t=a),Sa(e)&&(t=Ed.parseAll(t,e),t=Od.parseAll(t,e)),(Sa(e)||Ea(e))&&(i||(t=Md.makeFromEncoding(t,e)||t),t=Yl.makeFromEncoding(t,e)||t,t=Fl.parseAllForSortIndex(t,e));var o=e.getName(pl),u=new jl(t,o,pl,r);if(n[o]=u,t=u,Sa(e)){var s=Il.makeFromEncoding(t,e);s&&(t=s,Za(e)&&(t=new Ad(t))),t=Hl.make(t,e)||t}Sa(e)&&(t=Bl.make(t,e)||t);var f=e.getName(hl),c=new jl(t,f,hl,r);n[f]=c,t=c;var l=null;if(Ea(e)){var d=e.getName("facet");l=new Ul(t,e,d,c.getSource()),n[d]=l,t=l}var h=ms({},e.component.data.ancestorParse,a?a.parse:{});return ms({},e.component.data,{outputNodes:n,outputNodeRefCounts:r,raw:u,main:c,facetRoot:l,ancestorParse:h})}function vo(e){bo(e);var t=e.component.layoutSize;t.setWithExplicit("width",_o(e,"width")),t.setWithExplicit("height",_o(e,"height"))}function yo(e){bo(e);var t=e.component.layoutSize,n=e.isVConcat?"width":"height";t.setWithExplicit(n,_o(e,n))}function bo(e){for(var t=0,n=e.children;t<n.length;t++){var r=n[t];r.parseLayoutSize()}}function _o(e,t){for(var n,r="width"===t?"x":"y",i=e.component.resolve,a=0,o=e.children;a<o.length;a++){var u=o[a],s=u.component.layoutSize.getWithExplicit(t),f=i.scale[r];if("independent"===f&&"range-step"===s.value){n=void 0;break}if(n){if("independent"===f&&n.value!==s.value){n=void 0;break}n=Sr(n,s,t,"")}else n=s}if(n){for(var c=0,l=e.children;c<l.length;c++){var u=l[c];e.renameLayoutSize(u.getName(t),e.getName(t)),u.component.layoutSize.set(t,"merged",!1)}return n}return{explicit:!1,value:void 0}}function xo(e){var t=e.component.layoutSize;if(!t.explicit.width){var n=wo(e,"width");t.set("width",n,!1)}if(!t.explicit.height){var r=wo(e,"height");t.set("height",r,!1)}}function wo(e,t){var n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){var a=i.get("type"),o=i.get("range");return Ct(a)&&Un(o)?"range-step":r.view[t]}return"width"===t&&"text"===e.mark?r.scale.textXRangeStep:r.scale.rangeStep||Hc.rangeStep}function ko(e){function t(r,i){if(r instanceof Gl&&!wn(r.data)){e.push(i);var a={name:null,source:i.name,transform:[]};i=a}if(r instanceof Wl&&(r.parent instanceof Gl&&!i.source?(i.format=ms({},i.format||{},{parse:r.assembleFormatParse()}),i.transform=i.transform.concat(r.assembleTransforms(!0))):i.transform=i.transform.concat(r.assembleTransforms())),r instanceof Ul)return i.name||(i.name="data_"+n++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void r.assemble().forEach(function(t){return e.push(t)});if((r instanceof Sd||r instanceof Fl||r instanceof Od||r instanceof Ed||r instanceof Il||r instanceof Cd||r instanceof Rd||r instanceof Ad)&&i.transform.push(r.assemble()),(r instanceof Bl||r instanceof Md||r instanceof Yl||r instanceof Hl)&&(i.transform=i.transform.concat(r.assemble())),r instanceof Il&&(i.name||(i.name="data_"+n++)),r instanceof jl)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof jl)r.setSource(i.name);else if(i.name||(i.name="data_"+n++),r.setSource(i.name),1===r.numChildren()){e.push(i);var a={name:null,source:i.name,transform:[]};i=a}switch(r.numChildren()){case 0:r instanceof jl&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:t(r.children[0],i);break;default:i.name||(i.name="data_"+n++);var o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source,r.children.forEach(function(e){var n={name:null,source:o,transform:[]};t(e,n)})}}var n=0;return t}function Mo(e){var t=[],n=ko(t);return e.children.forEach(function(t){return n(t,{source:e.name,name:null,transform:[]})}),t}function So(e,t){var n=L(e.sources),r=[],i=ko(r),a=0;n.forEach(function(e){e.hasName()||(e.dataName="source_"+a++);var t=e.assemble();i(e,t)}),r.forEach(function(e){0===e.transform.length&&delete e.transform});for(var o=0,u=0;u<r.length;u++){var s=r[u];0!==(s.transform||[]).length||s.source||r.splice(o++,0,r.splice(u,1)[0])}for(var f=0,c=r;f<c.length;f++)for(var s=c[f],l=0,d=s.transform||[];l<d.length;l++){var h=d[l];"lookup"===h.type&&(h.from=e.outputNodes[h.from].getSource())}for(var p=0,g=r;p<g.length;p++){
var s=g[p];s.name in t&&(s.values=t[s.name])}return r}function Eo(e,t){return To(e,t)}function Oo(e,t){return To(e,t)}function Ao(e,t){return qe(e.field)?e.field.repeat in t?ms({},e,{field:t[e.field.repeat]}):void ge(pf.noSuchRepeatedValue(e.field.repeat)):e}function Co(e,t){if(e=Ao(e,t),void 0!==e){if(e.sort&&wi(e.sort)){var n=Ao(e.sort,t);e=ms({},e,n?{sort:n}:{})}return e}}function Ro(e,t){if(!Ue(e)){if(Fe(e)){var n=Co(e.condition,t);if(n)return ms({},e,{condition:n});var r=(e.condition,Q(e,["condition"]));return r}return e}var n=Co(e,t);return n?n:je(e)?{condition:e.condition}:void 0}function To(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(Eu(i))n[r]=i.map(function(e){return Ro(e,t)}).filter(function(e){return e});else{var a=Ro(i,t);a&&(n[r]=a)}}return n}function zo(e){return e===!1||null===e}function No(e,t,n,r,i){void 0===r&&(r="");for(var a=("band"===i?["axisBand"]:[]).concat(["x"===n?"axisX":"axisY","axis"+r.substr(0,1).toUpperCase()+r.substr(1),"axis"]),o=0,u=a;o<u.length;o++){var s=u[o];if(t[s]&&void 0!==t[s][e])return t[s][e]}}function Do(e,t,n,r){var i=e.fieldDef(t)||("x"===t?e.fieldDef("x2"):"y"===t?e.fieldDef("y2"):void 0),a=e.axis(t),o=e.config,u={};if(st(i)){var s=e.getScaleComponent(t).get("type")===Sc.UTC;u.text={signal:ir("datum.value",i.timeUnit,a.format,o.axis.shortTimeLabels,o.timeFormat,s)}}var f=No("labelAngle",e.config,t,r,e.getScaleComponent(t).get("type"));if(void 0===f&&(f=Lo(a,t,i),f&&(u.angle={value:f})),void 0!==f){var c=qo(f,r);c&&(u.align={value:c}),u.baseline=Po(f,r)}return u=ms({},u,n),0===os(u).length?void 0:u}function Po(e,t){return"top"===t||"bottom"===t?e<=45||315<=e?{value:"top"===t?"bottom":"top"}:135<=e&&e<=225?{value:"top"===t?"top":"bottom"}:{value:"middle"}:e<=45||315<=e||135<=e&&e<=225?{value:"middle"}:45<=e&&e<=135?{value:"left"===t?"top":"bottom"}:{value:"left"===t?"bottom":"top"}}function Lo(e,t,n){return void 0!==e.labelAngle?(e.labelAngle%360+360)%360:t===Es&&k([fc,uc],n.type)?270:void 0}function qo(e,t){return e=(e%360+360)%360,"top"===t||"bottom"===t?e%180===0?"center":0<e&&e<180?"top"===t?"right":"left":"top"===t?"left":"right":(e+90)%180===0?"center":90<=e&&e<270?"left"===t?"left":"right":"left"===t?"right":"left"}function $o(e,t){return!Ct(e)&&!t.bin}function jo(e,t){var n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Fo(e,t,n){return void 0!==n.labelFlush?n.labelFlush:!("x"!==t||!k(["quantitative","temporal"],e.type))||void 0}function Io(e,t,n,r){return void 0!==t.labelOverlap?t.labelOverlap:"nominal"!==e.type?"log"!==r||"greedy":void 0}function Uo(e){switch(e){case Es:return"bottom";case Os:return"left"}throw new Error(pf.INVALID_CHANNEL_FOR_AXIS)}function Bo(e,t,n,r){if(!Ct(n)&&"log"!==n&&!k(["month","hours","day","quarter"],t.timeUnit))return t.bin?{signal:"ceil("+r.signal+"/20)"}:{signal:"ceil("+r.signal+"/40)"}}function Wo(e,t,n,r){var i=e.values;if(e.values&&ve(i[0]))return i.map(function(e){return{signal:xe(e,!0)}});if(!i&&n.bin&&n.type===oc){var a=t.scaleDomain(r);if(a&&"unaggregated"!==a&&!Dt(a))return i;var o=t.getName(oe(n.bin)+"_"+n.field+"_bins");return{signal:"sequence("+o+".start, "+o+".stop + "+o+".step, "+o+".step)"}}return i}function Go(e){return uf.reduce(function(t,n){return e.component.scales[n]&&e.axis(n)&&(t[n]=[Xo(n,e)]),t},{})}function Yo(e){for(var t=e.component,n=t.axes,r=t.resolve,i={top:0,bottom:0,right:0,left:0},a=0,o=e.children;a<o.length;a++){var u=o[a];u.parseAxisAndHeader();for(var s=0,f=os(u.component.axes);s<f.length;s++){var c=f[s];r.axis[c]=_r(e.component.resolve,c),"shared"===r.axis[c]&&(n[c]=Ho(n[c],u.component.axes[c]),n[c]||(r.axis[c]="independent",delete n[c]))}}for(var l=0,d=[Es,Os];l<d.length;l++)for(var c=d[l],h=0,p=e.children;h<p.length;h++){var u=p[h];if(u.component.axes[c]){if("independent"===r.axis[c]){n[c]=(n[c]||[]).concat(u.component.axes[c]);for(var g=0,m=u.component.axes[c];g<m.length;g++){var v=m[g],y=v.getWithExplicit("orient"),b=y.value,_=y.explicit;if(i[b]>0&&!_){var x=Ld[b];i[b]>i[x]&&v.set("orient",x,!1)}i[b]++}}delete u.component.axes[c]}}}function Ho(e,t){if(!e)return t.map(function(e){return e.clone()});if(e.length===t.length){for(var n=e.length,r=0;r<n;r++){var i=e[r],a=t[r];if(!!i!=!!a)return;if(i&&a){var o=i.getWithExplicit("orient"),u=a.getWithExplicit("orient");if(o.explicit&&u.explicit&&o.value!==u.value)return;e[r]=Vo(i,a)}}return e}}function Vo(e,t){for(var n=function(n){var r=Sr(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",function(e,t){switch(n){case"title":return ur(e,t);case"gridScale":return{explicit:e.explicit,value:e.value||t.value}}return Mr(e,t,n,"axis")});e.setWithExplicit(n,r)},r=0,i=ws;r<i.length;r++){var a=i[r];n(a)}return e}function Xo(e,t){var n=t.axis(e),r=new Pd;ws.forEach(function(i){var a=Zo(i,n,e,t);if(void 0!==a){var o="values"===i?!!n.values:"encode"===i?!!n.encoding||!!n.labelAngle:a===n[i],u=No(i,t.config,e,r.get("orient"),t.getScaleComponent(e).get("type"));(o||void 0===u)&&r.set(i,a,o)}});var i=n.encoding||{},a=vs.reduce(function(n,a){if(!r.hasAxisPart(a))return n;var o="labels"===a?Do(t,e,i.labels||{},r.get("orient")):i[a]||{};return void 0!==o&&os(o).length>0&&(n[a]={update:o}),n},{});return os(a).length>0&&r.set("encode",a,!!n.encoding||void 0!==n.labelAngle),r}function Zo(e,t,n,r){var i=r.fieldDef(n);switch(e){case"scale":return r.scaleName(n);case"gridScale":return jo(r,n);case"format":return er(i,t.format,r.config);case"grid":var a=r.getScaleComponent(n).get("type");return Kn(t.grid,$o(a,i));case"labelFlush":return Fo(i,n,t);case"labelOverlap":var a=r.getScaleComponent(n).get("type");return Io(i,t,n,a);case"orient":return Kn(t.orient,Uo(n));case"tickCount":var a=r.getScaleComponent(n).get("type"),o="x"===n?"width":"y"===n?"height":void 0,u=o?r.getSizeSignalRef(o):void 0;return Kn(t.tickCount,Bo(n,i,a,u));case"title":var s="x"===n?"x2":"y2",f=r.fieldDef(s),c=void 0!==i.title?i.title:void 0===t.title?void 0:t.title;return Kn(c,or([$e(i)],f?[$e(f)]:[]));case"values":return Wo(t,r,i,n)}return K(e)?t[e]:void 0}function Jo(e,t,n){var r=le(e)?ms({},e):{type:e},i=r.orient||Jn("orient",r,n);r.orient=eu(r.type,t,i),void 0!==i&&i!==r.orient&&ge(pf.orientOverridden(r.orient,i));var a=void 0!==r.opacity?r.opacity:Jn("opacity",r,n);void 0===a&&(r.opacity=Qo(r.type,t));var o=r.filled;return void 0===o&&(r.filled=Ko(r,n)),r}function Qo(e,t){if(k([yf,_f,Sf,Ef],e)&&!ct(t))return.7}function Ko(e,t){var n=Jn("filled",e,t),r=e.type;return void 0!==n?n:r!==yf&&r!==vf&&r!==kf}function eu(e,t,n){switch(e){case yf:case Sf:case Ef:case bf:case wf:return}var r=t.y2,i=t.x2;switch(e){case kf:if(i&&r)return;case mf:case gf:if(r)return"vertical";if(i)return"horizontal";if(e===kf){if(t.x&&!t.y)return"vertical";if(t.y&&!t.x)return"horizontal"}case vf:case _f:var a=Ue(t.x)&&Ve(t.x),o=Ue(t.y)&&Ve(t.y);if(a&&!o)return"tick"!==e?"horizontal":"vertical";if(!a&&o)return"tick"!==e?"vertical":"horizontal";if(a&&o){var u=t.x,s=t.y,f=u.type===sc,c=s.type===sc;return f&&!c?"tick"!==e?"vertical":"horizontal":!f&&c?"tick"!==e?"horizontal":"vertical":!u.aggregate&&s.aggregate?"tick"!==e?"vertical":"horizontal":u.aggregate&&!s.aggregate?"tick"!==e?"horizontal":"vertical":n?n:(e===vf&&t.order||ge(pf.unclearOrientContinuous(e)),"vertical")}return void ge(pf.unclearOrientDiscreteOrEmpty(e))}return"vertical"}function tu(e){var t=e.config,n=e.encoding,r=e.markDef,i=e.width,a=r.orient,o=n.size,u=n.x,s=e.scaleName(Es),f=e.getScaleComponent(Es);if("horizontal"===a)return ms({},Jr("x",e,"zeroOrMin"),Qr(e,"zeroOrMin"));if(Ue(u)){var c=f.get("type");if(u.bin&&!o&&!Ct(c))return Zr(u,"x",e.scaleName("x"),void 0===r.binSpacing?t.bar.binSpacing:r.binSpacing,f.get("reverse"));if(c===Sc.BAND)return Vr(u,"x",e)}return Xr("x",e,ms({},Dr(i)),ru(r,s,f,t))}function nu(e){var t=e.config,n=e.encoding,r=e.height,i=e.markDef,a=i.orient,o=n.size,u=n.y,s=e.scaleName(Os),f=e.getScaleComponent(Os);if("vertical"===a)return ms({},Jr("y",e,"zeroOrMin"),Qr(e,"zeroOrMin"));if(Ue(u)){var c=f.get("type");if(u.bin&&!o&&!Ct(c))return Zr(u,"y",e.scaleName("y"),void 0===i.binSpacing?t.bar.binSpacing:i.binSpacing,f.get("reverse"));if(c===Sc.BAND)return Vr(u,"y",e)}return Xr("y",e,Dr(r),ru(i,s,f,t))}function ru(e,t,n,r){if(void 0!==e.size)return{value:e.size};if(r.bar.discreteBandSize)return{value:r.bar.discreteBandSize};if(n){var i=n.get("type");if(i!==Sc.POINT)return i===Sc.BAND?Rr(t):{value:r.bar.continuousBandSize};var a=n.get("range");if(Un(a)&&l(a.step))return{value:a.step-1};ge(pf.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}else if(r.scale.rangeStep&&null!==r.scale.rangeStep)return{value:r.scale.rangeStep-1};return{value:20}}function iu(e,t){var n=e.config,r=e.width,i=e.height;return ms({},$r(e,{size:"include",orient:"ignore"}),Jr("x",e,Dr(r)),Jr("y",e,Dr(i)),Br("size",e),au(e,n,t))}function au(e,t,n){return n?{shape:{value:n}}:Br("shape",e,{defaultValue:Jn("shape",e.markDef,t)})}function ou(e){var t=e.encoding.x,n=e.encoding.x2,r=e.getScaleComponent(Es),i=r?r.get("type"):void 0;if(Ue(t)&&t.bin&&!n)return Zr(t,"x",e.scaleName("x"),0,r.get("reverse"));if(Ue(t)&&r&&Ct(i)){if(i===Sc.BAND)return Vr(t,"x",e);throw new Error(pf.scaleTypeNotWorkWithMark(wf,i))}return ms({},Jr("x",e,"zeroOrMax"),Qr(e,"zeroOrMin","x2"))}function uu(e){var t=e.encoding.y,n=e.encoding.y2,r=e.getScaleComponent(Os),i=r?r.get("type"):void 0;if(Ue(t)&&t.bin&&!n)return Zr(t,"y",e.scaleName("y"),0,r.get("reverse"));if(Ue(t)&&r&&Ct(i)){if(i===Sc.BAND)return Vr(t,"y",e);throw new Error(pf.scaleTypeNotWorkWithMark(wf,i))}return ms({},Jr("y",e,"zeroOrMax"),Qr(e,"zeroOrMin","y2"))}function su(e,t){return Ue(t)&&t.type===oc?{field:{group:"width"},offset:-5}:{value:e.scale.textXRangeStep/2}}function fu(e,t,n){var r=e.align||Jn("align",e,n);if(void 0===r)return ft(t,Es)||ft(t,zs)?"center":"right"}function cu(e){var t=e.config,n=e.markDef,r=n.orient,i=e.getScaleComponent("horizontal"===r?"x":"y");if(void 0!==n.size)return n.size;if(void 0!==t.tick.bandSize)return t.tick.bandSize;var a=i?i.get("range"):void 0,o=a&&Un(a)?a.step:t.scale.rangeStep;if("number"!=typeof o)throw new Error("Function does not handle non-numeric rangeStep");return o/1.5}function lu(e){return k([vf,gf,xf],e.mark)?du(e):pu(e)}function du(e){var t=gu(e.mark,e.encoding),n=pu(e,{fromPrefix:t.length>0?Zd:""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Zd+e.requestDataName(hl),data:e.requestDataName(hl),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}function hu(e){var t=e.encoding.order;if(Eu(t)||!We(t)){if((Eu(t)||Ue(t))&&!e.stack)return ar(t,{expr:"datum"});if(ce(e.mark)){var n="horizontal"===e.markDef.orient?"y":"x",r=e.sort(n),i=wi(r)?Ye({aggregate:ct(e.encoding)?r.op:void 0,field:r.field},{expr:"datum"}):e.vgField(n,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"});return i?{field:i,order:"descending"}:void 0}}}function pu(e,t){void 0===t&&(t={fromPrefix:""});var n=e.mark,r=void 0!==e.markDef.clip?!!e.markDef.clip:mu(e),i=Zn(e.markDef),a=e.encoding.key,o=hu(e),u=Xd[n].postEncodingTransform?Xd[n].postEncodingTransform(e):null;return[ms({name:e.getName("marks"),type:Xd[n].vgMark},r?{clip:!0}:{},i?{style:i}:{},a?{key:{field:a.field}}:{},o?{sort:o}:{},{from:{data:t.fromPrefix+e.requestDataName(hl)},encode:{update:Xd[n].encodeEntry(e)}},u?{transform:u}:{})]}function gu(e,t){return os(t).reduce(function(n,r){switch(r){case"x":case"y":case"order":case"tooltip":case"href":case"x2":case"y2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case"shape":return n;case"detail":case"key":var i=t[r];return i&&(Eu(i)?i:[i]).forEach(function(e){e.aggregate||n.push(Ye(e,{}))}),n;case"size":if("trail"===e)return n;case"color":case"fill":case"stroke":case"opacity":var a=nt(t[r]);return a&&!a.aggregate&&n.push(Ye(a,{})),n;default:throw new Error("Bug: Channel "+r+" unimplemented for line mark")}},[])}function mu(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("domainRaw")||n&&n.get("domainRaw"))}function vu(e,t,n,r,i,a,o){if(Gt(e))return new Dd(e,t,n,i,a);if(Ht(e))return new Qd(e,t,n,r,i,a,o);if(Yt(e))return new Jd(e,t,n,r,i,a,o);if(Vt(e))return new Kd(e,t,n,i,a);if(Xt(e))return new Nd(e,t,n,i,a);throw new Error(pf.INVALID_SPEC)}function yu(e,t){void 0===t&&(t={}),t.logger&&he(t.logger),t.fieldTitle&&Qe(t.fieldTitle);try{var n=jt(C({},t.config,e.config)),r=Qt(e,n),i=_n(e.autosize,n.autosize,Ht(r)||Yt(r)),a=vu(r,null,"",void 0,void 0,n,"fit"===i.type);return a.parse(),$i(a.component.data),_u(a,bu(e,n,i))}finally{t.logger&&pe(),t.fieldTitle&&Ke()}}function bu(e,t,n){return ms({autosize:1===os(n).length&&n.type?n.type:n},xn(t),xn(e))}function _u(e,t){var n=e.config?Ft(e.config):void 0,r=[].concat(e.assembleSelectionData([]),So(e.component.data,t.datasets||{}));delete t.datasets;var i=e.assembleProjections(),a=e.assembleTitle(),o=e.assembleGroupStyle(),u=e.assembleLayoutSignals();u=u.filter(function(e){return"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)});var s=ms({$schema:"https://vega.github.io/schema/vega/v3.0.json"},e.description?{description:e.description}:{},t,a?{title:a}:{},o?{style:o}:{},{data:r},i.length>0?{projections:i}:{},e.assembleGroup(u.concat(e.assembleSelectionTopLevelSignals([]))),n?{config:n}:{});return{spec:s}}function xu(e,t,n){void 0===t&&(t=th),void 0===n&&(n=nh);var r=le(e.mark)?e.mark.type:e.mark,i=e.encoding,a=t[r],o=n[r];for(var u in a)if(!(a[u]in i))return'Missing encoding channel "'+a[u]+'" for mark "'+r+'"';for(var s in i)if(!o[s])return'Encoding channel "'+s+'" is not supported by mark type "'+r+'"';return r!==mf||i.x||i.y?null:"Missing both x and y for bar"}var wu,ku,Mu,Su,Eu=Array.isArray,Ou=[],Au=(u("id"),t(function(e){return e},Ou,"identity"),t(function(){return 0},Ou,"zero"),t(function(){return 1},Ou,"one"),t(function(){return!0},Ou,"true"),t(function(){return!1},Ou,"false"),0),Cu=1,Ru=2,Tu=3,zu=4,Nu={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},Du=function(e){throw{name:"SyntaxError",message:e,at:wu,text:Mu}},Pu=function(e){return e&&e!==ku&&Du("Expected '"+e+"' instead of '"+ku+"'"),ku=Mu.charAt(wu),wu+=1,ku},Lu=function(){var e,t="";for("-"===ku&&(t="-",Pu("-"));ku>="0"&&ku<="9";)t+=ku,Pu();if("."===ku)for(t+=".";Pu()&&ku>="0"&&ku<="9";)t+=ku;if("e"===ku||"E"===ku)for(t+=ku,Pu(),"-"!==ku&&"+"!==ku||(t+=ku,Pu());ku>="0"&&ku<="9";)t+=ku,Pu();return e=+t,isFinite(e)?e:void Du("Bad number")},qu=function(){var e,t,n,r="";if('"'===ku)for(;Pu();){if('"'===ku)return Pu(),r;if("\\"===ku)if(Pu(),"u"===ku){for(n=0,t=0;t<4&&(e=parseInt(Pu(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof Nu[ku])break;r+=Nu[ku]}else r+=ku}Du("Bad string")},$u=function(){for(;ku&&ku<=" ";)Pu()},ju=function(){switch(ku){case"t":return Pu("t"),Pu("r"),Pu("u"),Pu("e"),!0;case"f":return Pu("f"),Pu("a"),Pu("l"),Pu("s"),Pu("e"),!1;case"n":return Pu("n"),Pu("u"),Pu("l"),Pu("l"),null}Du("Unexpected '"+ku+"'")},Fu=function(){var e=[];if("["===ku){if(Pu("["),$u(),"]"===ku)return Pu("]"),e;for(;ku;){if(e.push(Su()),$u(),"]"===ku)return Pu("]"),e;Pu(","),$u()}}Du("Bad array")},Iu=function(){var e,t={};if("{"===ku){if(Pu("{"),$u(),"}"===ku)return Pu("}"),t;for(;ku;){if(e=qu(),$u(),Pu(":"),Object.hasOwnProperty.call(t,e)&&Du('Duplicate key "'+e+'"'),t[e]=Su(),$u(),"}"===ku)return Pu("}"),t;Pu(","),$u()}}Du("Bad object")};Su=function(){switch($u(),ku){case"{":return Iu();case"[":return Fu();case'"':return qu();case"-":return Lu();default:return ku>="0"&&ku<="9"?Lu():ju()}};var Uu,Bu,Wu,Gu,Yu=function(e,t){var n;return Mu=e,wu=0,ku=" ",n=Su(),$u(),ku&&Du("Syntax error"),"function"==typeof t?function e(n,r){var i,a,o=n[r];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(a=e(o,i),void 0!==a?o[i]=a:delete o[i]);return t.call(n,r,o)}({"":n},""):n},Hu=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Vu={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},Xu=function(e,t,n){var r;if(Uu="",Bu="","number"==typeof n)for(r=0;r<n;r+=1)Bu+=" ";else"string"==typeof n&&(Bu=n);if(Wu=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return p("",{"":e})},Zu=Yu,Ju=Xu,Qu={parse:Zu,stringify:Ju},Ku="undefined"!=typeof JSON?JSON:Qu,es=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var r="boolean"==typeof t.cycles&&t.cycles,i=t.replacer||function(e,t){return t},a=t.cmp&&function(e){return function(t){return function(n,r){var i={key:n,value:t[n]},a={key:r,value:t[r]};return e(i,a)}}}(t.cmp),o=[];return function e(t,u,s,f){var c=n?"\n"+new Array(f+1).join(n):"",l=n?": ":":";if(s&&s.toJSON&&"function"==typeof s.toJSON&&(s=s.toJSON()),s=i.call(t,u,s),void 0!==s){if("object"!=typeof s||null===s)return Ku.stringify(s);if(ts(s)){for(var d=[],h=0;h<s.length;h++){var p=e(s,h,s[h],f+1)||Ku.stringify(null);d.push(c+n+p)}return"["+d.join(",")+c+"]"}if(o.indexOf(s)!==-1){if(r)return Ku.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}o.push(s);for(var g=ns(s).sort(a&&a(s)),d=[],h=0;h<g.length;h++){var u=g[h],m=e(s,u,s[u],f+1);if(m){var v=Ku.stringify(u)+l+m;d.push(c+n+v)}}return o.splice(o.indexOf(s),1),"{"+d.join(",")+c+"}"}}({"":e},"",e,0)},ts=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},ns=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n},rs=Object.freeze({default:es,__moduleExports:es}),is=es||rs,as=is,os=Object.keys,us=Object.freeze({pick:_,omit:x,stringify:as,hash:w,contains:k,without:M,union:S,some:E,every:O,flatten:A,mergeDeep:C,unique:T,differ:z,hasIntersection:N,isNumeric:D,differArray:P,keys:os,vals:L,flagKeys:q,duplicate:$,isBoolean:j,varName:F,logicalExpr:I,deleteNestedProperty:U,titlecase:B,accessPathWithDatum:W,flatAccessWithDatum:G,replacePathInField:Y,removePathFromField:H,accessPathDepth:V}),ss={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},fs=q(ss),cs=["count","valid","missing","distinct"],ls=["count","sum","distinct","valid","missing"],ds=["mean","average","median","q1","q3","min","max"],hs=d(ds),ps=Object.freeze({AGGREGATE_OPS:fs,isAggregateOp:X,COUNTING_OPS:cs,isCountingAggregateOp:Z,SUM_OPS:ls,SHARED_DOMAIN_OPS:ds,SHARED_DOMAIN_OP_INDEX:hs}),gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ms=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vs=["domain","grid","labels","ticks","title"],ys={grid:"grid",gridScale:"grid",domain:"main",labels:"main",labelFlush:"main",labelOverlap:"main",minExtent:"main",maxExtent:"main",offset:"main",ticks:"main",title:"main",values:"both",scale:"both",zindex:"both"},bs={orient:1,domain:1,format:1,grid:1,labelBound:1,labelFlush:1,labelPadding:1,labels:1,labelOverlap:1,maxExtent:1,minExtent:1,offset:1,position:1,tickCount:1,ticks:1,tickSize:1,title:1,titlePadding:1,values:1,zindex:1},_s=ms({},bs,{encoding:1,labelAngle:1,titleMaxLength:1}),xs=ms({scale:1},bs,{gridScale:1,encode:1}),ws=q(xs),ks=q(_s),Ms=Object.freeze({AXIS_PARTS:vs,AXIS_PROPERTY_TYPE:ys,isAxisProperty:K,VG_AXIS_PROPERTIES:ws,AXIS_PROPERTIES:ks});!function(e){e.ROW="row",e.COLUMN="column",e.X="x",e.Y="y",e.X2="x2",e.Y2="y2",e.LATITUDE="latitude",e.LONGITUDE="longitude",e.LATITUDE2="latitude2",e.LONGITUDE2="longitude2",e.COLOR="color",e.FILL="fill",e.STROKE="stroke",e.SHAPE="shape",e.SIZE="size",e.OPACITY="opacity",e.TEXT="text",e.ORDER="order",e.DETAIL="detail",e.KEY="key",e.TOOLTIP="tooltip",e.HREF="href"}(Gu||(Gu={}));var Ss,Es=Gu.X,Os=Gu.Y,As=Gu.X2,Cs=Gu.Y2,Rs=Gu.LATITUDE,Ts=Gu.LATITUDE2,zs=Gu.LONGITUDE,Ns=Gu.LONGITUDE2,Ds=Gu.ROW,Ps=Gu.COLUMN,Ls=Gu.SHAPE,qs=Gu.SIZE,$s=Gu.COLOR,js=Gu.FILL,Fs=Gu.STROKE,Is=Gu.TEXT,Us=Gu.DETAIL,Bs=Gu.KEY,Ws=Gu.ORDER,Gs=Gu.OPACITY,Ys=Gu.TOOLTIP,Hs=Gu.HREF,Vs={longitude:1,longitude2:1,latitude:1,latitude2:1},Xs=q(Vs),Zs=ms({x:1,y:1,x2:1,y2:1},Vs,{color:1,fill:1,stroke:1,opacity:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1}),Js={row:1,column:1},Qs=ms({},Zs,Js),Ks=q(Qs),ef=(Qs.order,Qs.detail,Q(Qs,["order","detail"])),tf=q(ef),nf=q(Zs),rf=(Zs.x,Zs.y,Zs.x2,Zs.y2,Zs.latitude,Zs.longitude,Zs.latitude2,Zs.longitude2,Q(Zs,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"])),af=q(rf),of={x:1,y:1},uf=q(of),sf=Q(rf,["text","tooltip","href","detail","key","order"]),ff=q(sf),cf=ms({},of,sf),lf=q(cf),df=Object.freeze({get Channel(){return Gu},X:Es,Y:Os,X2:As,Y2:Cs,LATITUDE:Rs,LATITUDE2:Ts,LONGITUDE:zs,LONGITUDE2:Ns,ROW:Ds,COLUMN:Ps,SHAPE:Ls,SIZE:qs,COLOR:$s,FILL:js,STROKE:Fs,TEXT:Is,DETAIL:Us,KEY:Bs,ORDER:Ws,OPACITY:Gs,TOOLTIP:Ys,HREF:Hs,GEOPOSITION_CHANNEL_INDEX:Vs,GEOPOSITION_CHANNELS:Xs,isColorChannel:ee,CHANNELS:Ks,SINGLE_DEF_CHANNELS:tf,isChannel:te,UNIT_CHANNELS:nf,NONPOSITION_CHANNELS:af,POSITION_SCALE_CHANNELS:uf,NONPOSITION_SCALE_CHANNELS:ff,SCALE_CHANNELS:lf,isScaleChannel:ne,supportMark:re,getSupportedMark:ie,rangeType:ae}),hf=Object.freeze({binToString:oe,isBinParams:ue,autoMaxBins:se});!function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.POINT="point",e.RECT="rect",e.RULE="rule",e.TEXT="text",e.TICK="tick",e.TRAIL="trail",e.CIRCLE="circle",e.SQUARE="square",e.GEOSHAPE="geoshape"}(Ss||(Ss={}));var pf,gf=Ss.AREA,mf=Ss.BAR,vf=Ss.LINE,yf=Ss.POINT,bf=Ss.TEXT,_f=Ss.TICK,xf=Ss.TRAIL,wf=Ss.RECT,kf=Ss.RULE,Mf=Ss.GEOSHAPE,Sf=Ss.CIRCLE,Ef=Ss.SQUARE,Of={area:1,bar:1,line:1,point:1,text:1,tick:1,trail:1,rect:1,geoshape:1,rule:1,circle:1,square:1},Af=q(Of),Cf=d(Af),Rf=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity"],Tf=["fill","fillOpacity"],zf=[].concat(Rf,Tf),Nf=["filled","color"],Df={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],text:["shortTimeLabels"],tick:["bandSize","thickness"]},Pf={color:"#4c78a8"},Lf={binSpacing:1,continuousBandSize:5},qf={thickness:1},$f=Object.freeze({get Mark(){return Ss},AREA:gf,BAR:mf,LINE:vf,POINT:yf,TEXT:bf,TICK:_f,TRAIL:xf,RECT:wf,RULE:kf,GEOSHAPE:Mf,CIRCLE:Sf,SQUARE:Ef,isMark:fe,isPathMark:ce,PRIMITIVE_MARKS:Af,isMarkDef:le,isPrimitiveMark:de,STROKE_CONFIG:Rf,FILL_CONFIG:Tf,FILL_STROKE_CONFIG:zf,VL_ONLY_MARK_CONFIG_PROPERTIES:Nf,VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX:Df,defaultMarkConfig:Pf,defaultBarConfig:Lf,defaultTickConfig:qf}),jf=f(Ru),Ff=jf;!function(e){function t(e){return'Cannot project a selection on encoding channel "'+e+'", which has no field.'}function n(e){return'The "nearest" transform is not supported for '+e+" marks."}function r(e){return'Cannot find a selection named "'+e+'"'}function i(e){return'Unknown repeated value "'+e+'".'}function a(e){return'Cannot set title "anchor" for a '+e+" spec"}function o(e){return'Unrecognized parse "'+e+'".'}function u(e,t,n){return'An ancestor parsed field "'+e+'" as '+n+" but a child wants to parse the field as "+t+"."}function s(e){return"Ignoring an invalid transform: "+as(e)+"."}function f(e){return"Layer's shared "+e.join(",")+" channel "+(1===e.length?"is":"are")+" overriden"}function c(e){var t=e.parentProjection,n=e.projection;return"Layer's shared projection "+as(t)+" is overridden by a child projection "+as(n)+"."}function l(e,t,n){return"Channel "+e+" is a "+t+". Converted to {value: "+as(n)+"}."}function d(e){return'Invalid field type "'+e+'"'}function h(e,t,n){var r=n.scaleType?n.scaleType+" scale":n.zeroFalse?"scale with zero=false":"scale with custom domain that excludes zero";return"A "+r+" is used with "+e+" mark. This can be misleading as the "+("x"===t?"width":"height")+" of the "+e+" can be arbitrary based on the scale domain. You may want to use point mark instead."}function p(e,t){return'Invalid field type "'+e+'" for aggregate: "'+t+'", using "quantitative" instead.'}function g(e){return'Invalid aggregation operator "'+e+'"'}function m(e,t,n){return'Invalid field type "'+e+'" for channel "'+t+'", using "'+n+'" instead.'}function v(e,t){var n=t.fill,r=t.stroke;return"Dropping color "+e+" as the plot also has "+(n&&r?"fill and stroke":n?"fill":"stroke")}function y(e,t){return"Dropping "+as(e)+' from channel "'+t+'" since it does not contain data field or value.'}function b(e,t,n){return e+"-encoding with type "+t+" is deprecated. Replacing with "+n+"-encoding."}function _(e,t,n){return e+' dropped as it is incompatible with "'+t+'"'+(n?" when "+n:"")+"."}function x(e){return e+"-encoding is dropped as "+e+" is not a valid encoding channel."}function w(e){return e+" encoding should be discrete (ordinal / nominal / binned)."}function k(e,t){return'Using discrete channel "'+e+'" to encode "'+t+'" field can be misleading as it does not encode '+("ordinal"===t?"order":"magnitude")+"."}function M(e,t){var n=e&&t?"x2 and y2":e?"x2":"y2";return"Line mark is for continuous lines and thus cannot be used with "+n+". We will use the rule mark (line segments) instead."}function S(e){return'Cannot clearly determine orientation for "'+e+'" since both x and y channel encode continuous fields. In this case, we use vertical by default'}function E(e){return'Cannot clearly determine orientation for "'+e+'" since both x and y channel encode discrete or empty fields.'}function O(e,t){return'Specified orient "'+e+'" overridden with "'+t+'"'}function A(e){return'Cannot use the scale property "'+e+'" with non-color channel.'}function C(e){return"Using unaggregated domain with raw field has no effect ("+as(e)+")."}function R(e){return'Unaggregated domain not applicable for "'+e+'" since it produces values outside the origin domain of the source data.'}function T(e){return"Unaggregated domain is currently unsupported for log scale ("+as(e)+")."}function z(e){return"Using size field when "+e+"-channel has a band scale is not supported."}function N(e){return'Cannot apply size to non-oriented mark "'+e+'".'}function D(e){return'rangeStep for "'+e+'" is dropped as top-level '+("x"===e?"width":"height")+" is provided."}function P(e,t,n){return'Channel "'+e+'" does not work with "'+t+'" scale. We are using "'+n+'" scale instead.'}function L(e,t){return'FieldDef does not work with "'+e+'" scale. We are using "'+t+'" scale instead.'}function q(e,t,n){return n+"-scale's \""+t+'" is dropped as it does not work with '+e+" scale."}function $(e,t){return'Scale type "'+t+'" does not work with mark "'+e+'".'}function j(e,t,n,r){return"Conflicting "+t+' property "'+e+'" ('+as(n)+" and "+as(r)+").  Using "+as(n)+"."}function F(e){return'Setting the scale to be independent for "'+e+'" means we also have to set the guide (axis or legend) to be independent.'}function I(e){return"Dropping sort property "+as(e)+" as unioned domains only support boolean or op 'count'."}function U(e){return'Cannot stack "'+e+'" if there is already "'+e+'2"'}function B(e){return"Cannot stack non-linear scale ("+e+")"}function W(e){return'Stacking is applied even though the aggregate function is non-summative ("'+e+'")'}function G(e,t){return"Invalid "+e+": "+as(t)}function Y(e){return'Time unit "'+e+'" is not supported. We are replacing it with '+e.replace("day","date")+"."}function H(e){return"Dropping day from datetime "+as(e)+" as day cannot be combined with other units."}e.INVALID_SPEC="Invalid spec",e.FIT_NON_SINGLE='Autosize "fit" only works for single views and layered views.',e.CANNOT_FIX_RANGE_STEP_WITH_FIT='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".',e.cannotProjectOnChannelWithoutField=t,e.nearestNotSupportForContinuous=n,e.selectionNotFound=r,e.SCALE_BINDINGS_CONTINUOUS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",e.noSuchRepeatedValue=i,e.CONCAT_CANNOT_SHARE_AXIS="Axes cannot be shared in concatenated views.",e.REPEAT_CANNOT_SHARE_AXIS="Axes cannot be shared in repeated views.",e.cannotSetTitleAnchor=a,e.unrecognizedParse=o,e.differentParse=u,e.invalidTransformIgnored=s,e.NO_FIELDS_NEEDS_AS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.',e.encodingOverridden=f,e.projectionOverridden=c,e.primitiveChannelDef=l,e.invalidFieldType=d,e.nonZeroScaleUsedWithLengthMark=h,e.invalidFieldTypeForCountAggregate=p,e.invalidAggregate=g,e.emptyOrInvalidFieldType=m,e.droppingColor=v,e.emptyFieldDef=y,e.latLongDeprecated=b,e.LINE_WITH_VARYING_SIZE="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.",e.incompatibleChannel=_,e.invalidEncodingChannel=x,e.facetChannelShouldBeDiscrete=w,e.discreteChannelCannotEncode=k,e.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.",e.lineWithRange=M,e.unclearOrientContinuous=S,e.unclearOrientDiscreteOrEmpty=E,e.orientOverridden=O,e.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN="custom domain scale cannot be unioned with default field-based domain",e.cannotUseScalePropertyWithNonColor=A,e.unaggregateDomainHasNoEffectForRawField=C,e.unaggregateDomainWithNonSharedDomainOp=R,e.unaggregatedDomainWithLogScale=T,e.cannotUseSizeFieldWithBandSize=z,e.cannotApplySizeToNonOrientedMark=N,e.rangeStepDropped=D,e.scaleTypeNotWorkWithChannel=P,e.scaleTypeNotWorkWithFieldDef=L,e.scalePropertyNotWorkWithScaleType=q,e.scaleTypeNotWorkWithMark=$,e.mergeConflictingProperty=j,e.independentScaleMeansIndependentGuide=F,e.domainSortDropped=I,e.UNABLE_TO_MERGE_DOMAINS="Unable to merge domains",e.MORE_THAN_ONE_SORT="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",e.INVALID_CHANNEL_FOR_AXIS="Invalid channel for axis.",e.cannotStackRangedMark=U,e.cannotStackNonLinearScale=B,e.stackNonSummativeAggregate=W,e.invalidTimeUnit=G,e.dayReplacedWithDate=Y,e.droppedDay=H}(pf||(pf={}));var If,Uf=2006,Bf=["january","february","march","april","may","june","july","august","september","october","november","december"],Wf=Bf.map(function(e){return e.substr(0,3)}),Gf=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Yf=Gf.map(function(e){return e.substr(0,3)}),Hf=Object.freeze({isDateTime:ve,MONTHS:Bf,SHORT_MONTHS:Wf,DAYS:Gf,SHORT_DAYS:Yf,dateTimeExpr:xe});!function(e){e.YEAR="year",e.MONTH="month",e.DAY="day",e.DATE="date",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.MILLISECONDS="milliseconds",e.YEARMONTH="yearmonth",e.YEARMONTHDATE="yearmonthdate",e.YEARMONTHDATEHOURS="yearmonthdatehours",e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",e.MONTHDATE="monthdate",e.HOURSMINUTES="hoursminutes",e.HOURSMINUTESSECONDS="hoursminutesseconds",e.MINUTESSECONDS="minutesseconds",e.SECONDSMILLISECONDS="secondsmilliseconds",e.QUARTER="quarter",e.YEARQUARTER="yearquarter",e.QUARTERMONTH="quartermonth",e.YEARQUARTERMONTH="yearquartermonth",e.UTCYEAR="utcyear",e.UTCMONTH="utcmonth",e.UTCDAY="utcday",e.UTCDATE="utcdate",e.UTCHOURS="utchours",e.UTCMINUTES="utcminutes",e.UTCSECONDS="utcseconds",e.UTCMILLISECONDS="utcmilliseconds",e.UTCYEARMONTH="utcyearmonth",e.UTCYEARMONTHDATE="utcyearmonthdate",e.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",e.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",e.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",e.UTCMONTHDATE="utcmonthdate",e.UTCHOURSMINUTES="utchoursminutes",e.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",e.UTCMINUTESSECONDS="utcminutesseconds",e.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",e.UTCQUARTER="utcquarter",e.UTCYEARQUARTER="utcyearquarter",e.UTCQUARTERMONTH="utcquartermonth",e.UTCYEARQUARTERMONTH="utcyearquartermonth";
}(If||(If={}));var Vf,Xf={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Zf=q(Xf),Jf={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1},Qf={yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},Kf={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},ec=ms({},Jf,Kf),tc=ms({},Xf,Jf,Qf,Kf),nc=q(tc),rc={year:"setFullYear",month:"setMonth",date:"setDate",hours:"setHours",minutes:"setMinutes",seconds:"setSeconds",milliseconds:"setMilliseconds",quarter:null,day:null},ic=Object.freeze({get TimeUnit(){return If},TIMEUNIT_PARTS:Zf,isLocalSingleTimeUnit:we,isUtcSingleTimeUnit:ke,isUTCTimeUnit:Me,getLocalTimeUnit:Se,TIMEUNITS:nc,isTimeUnit:Ee,convert:Oe,getTimeUnitParts:Ce,containsTimeUnit:Re,fieldExpr:Te,formatExpression:ze,normalizeTimeUnit:Ne});!function(e){e.QUANTITATIVE="quantitative",e.ORDINAL="ordinal",e.TEMPORAL="temporal",e.NOMINAL="nominal",e.LATITUDE="latitude",e.LONGITUDE="longitude",e.GEOJSON="geojson"}(Vf||(Vf={}));var ac={quantitative:1,ordinal:1,temporal:1,nominal:1,latitude:1,longitude:1,geojson:1},oc=Vf.QUANTITATIVE,uc=Vf.ORDINAL,sc=Vf.TEMPORAL,fc=Vf.NOMINAL,cc=Vf.GEOJSON,lc=Object.freeze({get Type(){return Vf},isType:De,QUANTITATIVE:oc,ORDINAL:uc,TEMPORAL:sc,NOMINAL:fc,GEOJSON:cc,getFullName:Pe}),dc=function(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return Je(e,t);default:return Ze(e,t)}},hc=dc,pc={compatible:!0},gc=Object.freeze({isConditionalSelection:Le,isRepeatRef:qe,toFieldDefBase:$e,isConditionalDef:je,hasConditionalFieldDef:Fe,hasConditionalValueDef:Ie,isFieldDef:Ue,isStringFieldDef:Be,isValueDef:We,isScaleFieldDef:Ge,vgField:Ye,isDiscrete:He,isContinuous:Ve,isCount:Xe,verbalTitleFormatter:Ze,functionalTitleFormatter:Je,defaultTitleFormatter:dc,setTitleFormatter:Qe,resetTitleFormatter:Ke,title:et,defaultType:tt,getFieldDef:nt,normalize:rt,normalizeFieldDef:it,normalizeBin:at,channelCompatibility:ot,isNumberFieldDef:ut,isTimeFieldDef:st}),mc=Object.freeze({channelHasField:ft,isAggregate:ct,normalizeEncoding:lt,isRanged:dt,fieldDefs:ht,forEach:pt,reduce:gt}),vc="box-plot",yc=["boxWhisker","box","boxMid"],bc={box:["size","color","extent"],boxWhisker:["color"],boxMid:["color"]},_c=["x","y","color","detail","opacity","size"],xc="error-bar",wc={},kc=yc,Mc=ms({},bc);Mt(vc,bt),Mt(xc,kt);var Sc,Ec=Object.freeze({add:Mt,remove:St,COMPOSITE_MARK_STYLES:kc,VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX:Mc,normalize:Et}),Oc=["shortTimeLabels"],Ac={},Cc={entryPadding:1,format:1,offset:1,orient:1,padding:1,tickCount:1,title:1,type:1,values:1,zindex:1},Rc=ms({},Cc,{opacity:1,shape:1,stroke:1,fill:1,size:1,encode:1}),Tc=q(Cc),zc=q(Rc),Nc=Object.freeze({defaultLegendConfig:Ac,LEGEND_PROPERTIES:Tc,VG_LEGEND_PROPERTIES:zc});!function(e){e.LINEAR="linear",e.BIN_LINEAR="bin-linear",e.LOG="log",e.POW="pow",e.SQRT="sqrt",e.TIME="time",e.UTC="utc",e.SEQUENTIAL="sequential",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.ORDINAL="ordinal",e.BIN_ORDINAL="bin-ordinal",e.POINT="point",e.BAND="band"}(Sc||(Sc={}));var Dc,Pc,Lc={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric","bin-linear":"bin-linear",time:"time",utc:"time",sequential:"sequential",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position"},qc=os(Lc),$c={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,"bin-linear":0,sequential:0,ordinal:0,"bin-ordinal":0},jc=["linear","bin-linear","log","pow","sqrt","time","utc"],Fc=d(jc),Ic=jc.concat(["sequential"]),Uc=d(Ic),Bc=["ordinal","bin-ordinal","point","band"],Wc=d(Bc),Gc=d(["bin-linear","bin-ordinal"]),Yc=["time","utc"],Hc={textXRangeStep:90,rangeStep:21,pointPadding:.5,bandPaddingInner:.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},Vc={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Xc=q(Vc),Zc=Q(Vc,["type","domain","range","rangeStep","scheme"]),Jc=q(Zc),Qc=Object.freeze({get ScaleType(){return Sc},SCALE_TYPES:qc,scaleCompatible:Ot,scaleTypePrecedence:At,CONTINUOUS_TO_CONTINUOUS_SCALES:jc,CONTINUOUS_DOMAIN_SCALES:Ic,DISCRETE_DOMAIN_SCALES:Bc,TIME_SCALE_TYPES:Yc,hasDiscreteDomain:Ct,isBinScale:Rt,hasContinuousDomain:Tt,isContinuousToContinuous:zt,defaultScaleConfig:Hc,isExtendedScheme:Nt,isSelectionDomain:Dt,SCALE_PROPERTIES:Xc,NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES:Jc,scaleTypeSupportProperty:Pt,channelScalePropertyIncompatability:Lt,channelSupportScaleType:qt}),Kc="_vgsid_",el={single:{on:"click",fields:[Kc],resolve:"global",empty:"all"},multi:{on:"click",fields:[Kc],toggle:"event.shiftKey",resolve:"global",empty:"all"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global"}},tl={width:200,height:200},nl={padding:5,timeFormat:"%b %d, %Y",countTitle:"Number of Records",invalidValues:"filter",view:tl,mark:Pf,area:{},bar:Lf,circle:{},geoshape:{},line:{},point:{},rect:{},rule:{color:"black"},square:{},text:{color:"black"},tick:qf,trail:{},box:{size:14,extent:1.5},boxWhisker:{},boxMid:{color:"white"},scale:Hc,projection:{},axis:{},axisX:{},axisY:{minExtent:30},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:Ac,selection:el,style:{},title:{}},rl=["view"].concat(Af,kc),il=["padding","numberFormat","timeFormat","countTitle","stack","scale","selection","invalidValues","overlay"],al=ms({view:["width","height"]},Df,Mc),ol=Object.freeze({defaultViewConfig:tl,defaultConfig:nl,initConfig:jt,stripAndRedirectConfig:Ft}),ul={zero:1,center:1,normalize:1},sl=[mf,gf,kf,yf,Sf,Ef,vf,bf,_f],fl=[mf,gf],cl=Object.freeze({isStackOffset:Ut,STACKABLE_MARKS:sl,STACK_BY_DEFAULT_MARKS:fl,stack:Wt}),ll=Object.freeze({isFacetSpec:Gt,isUnitSpec:Yt,isLayerSpec:Ht,isRepeatSpec:Vt,isConcatSpec:Xt,isVConcatSpec:Zt,isHConcatSpec:Jt,normalize:Qt,fieldDefs:vn,isStacked:yn}),dl=["background","padding","datasets"],hl="main",pl="raw",gl=Object.freeze({isUrlData:wn,isInlineData:kn,isNamedData:Mn,MAIN:hl,RAW:pl}),ml="view",vl="[",yl="]",bl="{",_l="}",xl=":",wl=",",kl="@",Ml=">",Sl=/[[\]{}]/,El={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Ol=Object.freeze({isFilter:Nn,isLookup:Dn,isWindow:Pn,isCalculate:Ln,isBin:qn,isTimeUnit:$n,isAggregate:jn,normalizeTransform:Fn}),Al={opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,limit:1,dx:1,dy:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,cursor:1,href:1},Cl=q(Al),Rl=["row","column"],Tl=["header","footer"],zl=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.explicit=e,this.implicit=t}return e.prototype.clone=function(){return new e($(this.explicit),$(this.implicit))},e.prototype.combine=function(){return ms({},this.explicit,this.implicit)},e.prototype.get=function(e){return void 0!==this.explicit[e]?this.explicit[e]:this.implicit[e]},e.prototype.getWithExplicit=function(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}},e.prototype.setWithExplicit=function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)},e.prototype.set=function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this},e.prototype.copyKeyFromSplit=function(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)},e.prototype.copyKeyFromObject=function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)},e}(),Nl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return J(t,e),t}(zl),Dl=Object.freeze({symbols:Kr,gradient:ei,labels:ti}),Pl=["type","clipAngle","clipExtent","center","rotate","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],Ll=function(e){function t(t,n,r,i){var a=e.call(this,ms({},n),{name:t})||this;return a.specifiedProjection=n,a.size=r,a.data=i,a.merged=!1,a}return J(t,e),t}(zl),ql=Object.freeze({isSortField:wi,isSortArray:ki}),$l=function(){function e(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}return e.prototype.clone=function(){throw new Error("Cannot clone node")},e.prototype.producedFields=function(){return{}},e.prototype.dependentFields=function(){return{}},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(e){this._parent=e,e.addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return this._children.length},e.prototype.addChild=function(e){this._children.push(e)},e.prototype.removeChild=function(e){this._children.splice(this._children.indexOf(e),1)},e.prototype.remove=function(){for(var e=0,t=this._children;e<t.length;e++){var n=t[e];n.parent=this._parent}this._parent.removeChild(this)},e.prototype.insertAsParentOf=function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this},e.prototype.swapWithParent=function(){for(var e=this._parent,t=e.parent,n=0,r=this._children;n<r.length;n++){var i=r[n];i.parent=e}this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this},e}(),jl=function(e){function t(t,n,r,i){var a=e.call(this,t,n)||this;return a.type=r,a.refCounts=i,a._source=a._name=n,!a.refCounts||a._name in a.refCounts||(a.refCounts[a._name]=0),a}return J(t,e),t.prototype.clone=function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e},t.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},t.prototype.isRequired=function(){return!!this.refCounts[this._name]},t.prototype.setSource=function(e){this._source=e},t}($l),Fl=function(e){function t(t,n){var r=e.call(this,t)||this;return r.transform=n,r}return J(t,e),t.prototype.clone=function(){return new t(null,$(this.transform))},t.parseAllForSortIndex=function(e,n){return n.forEachFieldDef(function(r,i){if(Ge(r)&&ki(r.sort)){var a={calculate:t.calculateExpressionFromSortField(r.field,r.sort),as:Mi(n,i)};e=new t(e,a)}}),e},t.calculateExpressionFromSortField=function(e,t){var n,r="";for(n=0;n<t.length;n++)r+="datum."+e+" === '"+t[n]+"' ? "+n+" : ";return r+=n},t.prototype.producedFields=function(){var e={};return e[this.transform.as]=!0,e},t.prototype.assemble=function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}},t}($l),Il=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dimensions=n,i.measures=r,i}return J(t,e),t.prototype.clone=function(){return new t(null,ms({},this.dimensions),$(this.measures))},t.makeFromEncoding=function(e,n){var r=!1;n.forEachFieldDef(function(e){e.aggregate&&(r=!0)});var i={},a={};return r?(n.forEachFieldDef(function(e,t){e.aggregate?"count"===e.aggregate?(i["*"]=i["*"]||{},i["*"].count=Ye(e,{aggregate:"count"})):(i[e.field]=i[e.field]||{},i[e.field][e.aggregate]=Ye(e),ne(t)&&"unaggregated"===n.scaleDomain(t)&&(i[e.field].min=Ye(e,{aggregate:"min"}),i[e.field].max=Ye(e,{aggregate:"max"}))):Si(a,t,e)}),os(a).length+os(i).length===0?null:new t(e,a,i)):null},t.makeFromTransform=function(e,n){for(var r={},i={},a=0,o=n.aggregate;a<o.length;a++){var u=o[a];u.op&&("count"===u.op?(i["*"]=i["*"]||{},i["*"].count=u.as||Ye(u)):(i[u.field]=i[u.field]||{},i[u.field][u.op]=u.as||Ye(u)))}for(var s=0,f=n.groupby||[];s<f.length;s++){var u=f[s];r[u]=!0}return os(r).length+os(i).length===0?null:new t(e,r,i)},t.prototype.merge=function(e){z(this.dimensions,e.dimensions)?me("different dimensions, cannot merge"):(Ei(this.measures,e.measures),e.remove())},t.prototype.addDimensions=function(e){var t=this;e.forEach(function(e){return t.dimensions[e]=!0})},t.prototype.dependentFields=function(){var e={};return os(this.dimensions).forEach(function(t){return e[t]=!0}),os(this.measures).forEach(function(t){return e[t]=!0}),e},t.prototype.producedFields=function(){var e=this,t={};return os(this.measures).forEach(function(n){os(e.measures[n]).forEach(function(e){t[e+"_"+n]=!0})}),t},t.prototype.assemble=function(){for(var e=[],t=[],n=[],r=0,i=os(this.measures);r<i.length;r++)for(var a=i[r],o=0,u=os(this.measures[a]);o<u.length;o++){var s=u[o];n.push(this.measures[a][s]),e.push(s),t.push(a)}var f={type:"aggregate",groupby:os(this.dimensions),ops:e,fields:t,as:n};return f},t}($l),Ul=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.model=n,a.name=r,a.data=i,n.facet.column&&(a.columnFields=[n.vgField(Ps)],a.columnName=n.getName("column_domain"),n.fieldDef(Ps).bin&&a.columnFields.push(n.vgField(Ps,{binSuffix:"end"}))),n.facet.row&&(a.rowFields=[n.vgField(Ds)],a.rowName=n.getName("row_domain"),n.fieldDef(Ds).bin&&a.rowFields.push(n.vgField(Ds,{binSuffix:"end"}))),a.childModel=n.child,a}return J(t,e),Object.defineProperty(t.prototype,"fields",{get:function(){var e=[];return this.columnFields&&(e=e.concat(this.columnFields)),this.rowFields&&(e=e.concat(this.rowFields)),e},enumerable:!0,configurable:!0}),t.prototype.getSource=function(){return this.name},t.prototype.getChildIndependentFieldsWithStep=function(){for(var e={},t=0,n=["x","y"];t<n.length;t++){var r=n[t],i=this.childModel.component.scales[r];if(i&&!i.merged){var a=i.get("type"),o=i.get("range");if(Ct(a)&&Un(o)){var u=Xi(this.childModel,r),s=Vi(u);s?e[r]=s:ge("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e},t.prototype.assembleRowColumnData=function(e,t,n){var r={},i="row"===e?"y":"x";return n[i]&&(r=t?{fields:["distinct_"+n[i]],ops:["max"],as:["distinct_"+n[i]]}:{fields:[n[i]],ops:["distinct"]}),{name:"row"===e?this.rowName:this.columnName,source:t||this.data,transform:[ms({type:"aggregate",groupby:"row"===e?this.rowFields:this.columnFields},r)]}},t.prototype.assemble=function(){var e=[],t=null,n=this.getChildIndependentFieldsWithStep();if(this.columnName&&this.rowName&&(n.x||n.y)){t="cross_"+this.columnName+"_"+this.rowName;var r=[].concat(n.x?[n.x]:[],n.y?[n.y]:[]),i=r.map(function(){return"distinct"});e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.columnFields.concat(this.rowFields),fields:r,ops:i}]})}return this.columnName&&e.push(this.assembleRowColumnData("column",t,n)),this.rowName&&e.push(this.assembleRowColumnData("row",t,n)),e},t}($l),Bl=function(e){function t(t,n){var r=e.call(this,t)||this;return r.fieldDefs=n,r}return J(t,e),t.prototype.clone=function(){return new t(null,ms({},this.fieldDefs))},t.make=function(e,n){var r=n.config,i=n.mark;if("filter"!==r.invalidValues)return null;var a=n.reduceFieldDef(function(e,t,r){var a=ne(r)&&n.getScaleComponent(r);if(a){var o=a.get("type");!Tt(o)||t.aggregate||ce(i)||(e[t.field]=t)}return e},{});return os(a).length?new t(e,a):null},Object.defineProperty(t.prototype,"filter",{get:function(){return this.fieldDefs},enumerable:!0,configurable:!0}),t.prototype.assemble=function(){var e=this,t=os(this.filter).reduce(function(t,n){var r=e.fieldDefs[n],i=Ye(r,{expr:"datum"});return null!==r&&(t.push(i+" !== null"),t.push("!isNaN("+i+")")),t},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null},t}($l),Wl=function(e){function t(t,n){var r=e.call(this,t)||this;return r._parse={},r._parse=n,r}return J(t,e),t.prototype.clone=function(){return new t(null,$(this.parse))},t.make=function(e,n){var r={},i={};(n.transforms||[]).forEach(function(e){Ln(e)?i[e.as]=!0:Nn(e)&&y(e.filter,function(e){ro(e)&&e.timeUnit&&(r[e.field]="date")})},{}),(Sa(n)||Ea(n))&&n.forEachFieldDef(function(e){if(st(e))r[e.field]="date";else if(ut(e)){if(i[e.field]||Z(e.aggregate))return;r[e.field]="number"}else V(e.field)>1&&(r[e.field]="flatten")});var a=n.data;if(a&&a.format&&a.format.parse){var o=a.format.parse;os(o).forEach(function(e){r[e]=o[e]})}var u=n.component.data.ancestorParse;return os(u).forEach(function(e){r[e]!==u[e]?ge(pf.differentParse(e,r[e],u[e])):delete r[e]}),0===os(r).length?null:new t(e,r)},Object.defineProperty(t.prototype,"parse",{get:function(){return this._parse},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){this._parse=ms({},this._parse,e.parse),e.remove()},t.prototype.assembleFormatParse=function(){for(var e={},t=0,n=os(this._parse);t<n.length;t++){var r=n[t];1===V(r)&&(e[r]=this._parse[r])}return e},t.prototype.producedFields=function(){return d(os(this.parse))},t.prototype.dependentFields=function(){return d(os(this.parse))},t.prototype.assembleTransforms=function(e){var t=this;return void 0===e&&(e=!1),os(this._parse).filter(function(t){return!e||V(t)>1}).map(function(e){var n=Oi(e,t._parse[e]);if(!n)return null;var r={type:"formula",expr:n,as:H(e)};return r}).filter(function(e){return null!==e})},t}($l),Gl=function(e){function t(t){var n=e.call(this,null)||this;if(t=t||{name:"source"},kn(t))n._data={values:t.values};else if(wn(t)){if(n._data={url:t.url},t.format||(t.format={}),!t.format||!t.format.type){var r=/(?:\.([^.]+))?$/.exec(t.url)[1];k(["json","csv","tsv","topojson"],r)||(r="json"),t.format.type=r}}else Mn(t)&&(n._name=t.name,n._data={});if(!Mn(t)&&t.format){var i=t.format,a=(i.parse,Q(i,["parse"]));n._data.format=a}return n}return J(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.hasName=function(){return!!this._name},Object.defineProperty(t.prototype,"dataName",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{set:function(e){throw new Error("Source nodes have to be roots.")},enumerable:!0,configurable:!0}),t.prototype.remove=function(){throw new Error("Source nodes are roots and cannot be removed.")},t.prototype.hash=function(){return kn(this._data)?(this._hash||(this._hash=w(this._data)),this._hash):wn(this._data)?w([this._data.url,this._data.format]):this._name},t.prototype.assemble=function(){return ms({name:this._name},this._data,{transform:[]})},t}($l),Yl=function(e){function t(t,n){var r=e.call(this,t)||this;return r.formula=n,r}return J(t,e),t.prototype.clone=function(){return new t(null,$(this.formula))},t.makeFromEncoding=function(e,n){var r=n.reduceFieldDef(function(e,t){if(t.timeUnit){var n=Ye(t);e[n]={as:n,timeUnit:t.timeUnit,field:t.field}}return e},{});return 0===os(r).length?null:new t(e,r)},t.makeFromTransform=function(e,n){return new t(e,(r={},r[n.field]={as:n.as,timeUnit:n.timeUnit,field:n.field},r));var r},t.prototype.merge=function(e){this.formula=ms({},this.formula,e.formula),e.remove()},t.prototype.producedFields=function(){var e={};return L(this.formula).forEach(function(t){e[t.as]=!0}),e},t.prototype.dependentFields=function(){var e={};return L(this.formula).forEach(function(t){e[t.field]=!0}),e},t.prototype.assemble=function(){return L(this.formula).map(function(e){return{type:"formula",as:e.as,expr:Te(e.timeUnit,e.field)}})},t}($l),Hl=function(e){function t(t,n){var r=e.call(this,t)||this;return r._stack=n,r}return J(t,e),t.prototype.clone=function(){return new t(null,$(this._stack))},t.make=function(e,n){var r=n.stack;if(!r)return null;var i;r.groupbyChannel&&(i=n.fieldDef(r.groupbyChannel));var a,o=zi(n),u=n.encoding.order;return a=Eu(u)||Ue(u)?ar(u):o.reduce(function(e,t){return e.field.push(t),e.order.push("descending"),e},{field:[],order:[]}),new t(e,{dimensionFieldDef:i,field:n.vgField(r.fieldChannel),facetby:[],stackby:o,sort:a,offset:r.offset,impute:r.impute})},Object.defineProperty(t.prototype,"stack",{get:function(){return this._stack},enumerable:!0,configurable:!0}),t.prototype.addDimensions=function(e){this._stack.facetby=this._stack.facetby.concat(e)},t.prototype.dependentFields=function(){var e={};e[this._stack.field]=!0,this.getGroupbyFields().forEach(function(t){return e[t]=!0}),this._stack.facetby.forEach(function(t){return e[t]=!0});var t=this._stack.sort.field;return Eu(t)?t.forEach(function(t){return e[t]=!0}):e[t]=!0,e},t.prototype.producedFields=function(){var e={};return e[this._stack.field+"_start"]=!0,e[this._stack.field+"_end"]=!0,e},t.prototype.getGroupbyFields=function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute;return t?t.bin?n?[Ye(t,{binSuffix:"mid"})]:[Ye(t,{}),Ye(t,{binSuffix:"end"})]:[Ye(t)]:[]},t.prototype.assemble=function(){var e=[],t=this._stack,n=t.facetby,r=t.field,i=t.dimensionFieldDef,a=t.impute,o=t.offset,u=t.sort,s=t.stackby;if(a&&i){var f=i?Ye(i,{binSuffix:"mid"}):void 0;i.bin&&e.push({type:"formula",expr:"("+Ye(i,{expr:"datum"})+"+"+Ye(i,{expr:"datum",binSuffix:"end"})+")/2",as:f}),e.push({type:"impute",field:r,groupby:s,key:f,method:"value",value:0})}return e.push({type:"stack",groupby:this.getGroupbyFields().concat(n),field:r,sort:u,as:[r+"_start",r+"_end"],offset:o}),e},t}($l),Vl="scale_",Xl=function(e){function t(t,n){var r=e.call(this,{},{name:t})||this;return r.merged=!1,r.domains=[],r.setWithExplicit("type",n),r}return J(t,e),t}(zl),Zl=["range","rangeStep","scheme"],Jl=kr(function(e,t){return At(e)-At(t)}),Ql=function(){function e(){this.nameMap={}}return e.prototype.rename=function(e,t){this.nameMap[e]=t},e.prototype.has=function(e){return void 0!==this.nameMap[e]},e.prototype.get=function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e},e}(),Kl=function(){function e(e,t,n,r,i,o){var u=this;this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=u.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=u.lookupDataSource(e.from.facet.data)),e},this.parent=t,this.config=r,this.repeater=i,this.name=e.name||n,this.title=a(e.title)?{text:e.title}:e.title,this.scaleNameMap=t?t.scaleNameMap:new Ql,this.projectionNameMap=t?t.projectionNameMap:new Ql,this.layoutSizeNameMap=t?t.layoutSizeNameMap:new Ql,this.data=e.data,this.description=e.description,this.transforms=Fn(e.transform||[]),this.component={data:{sources:t?t.component.data.sources:{},outputNodes:t?t.component.data.outputNodes:{},outputNodeRefCounts:t?t.component.data.outputNodeRefCounts:{},ancestorParse:t?ms({},t.component.data.ancestorParse):{},isFaceted:Gt(e)||t&&t.component.data.isFaceted&&!e.data},layoutSize:new zl,layoutHeaders:{row:{},column:{}},mark:null,resolve:ms({scale:{},axis:{},legend:{}},o||{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object.defineProperty(e.prototype,"width",{get:function(){return this.getSizeSignalRef("width")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getSizeSignalRef("height")},enumerable:!0,configurable:!0}),e.prototype.initSize=function(e){var t=e.width,n=e.height;t&&this.component.layoutSize.set("width",t,!0),n&&this.component.layoutSize.set("height",n,!0)},e.prototype.parse=function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseProjection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},e.prototype.parseScale=function(){xa(this)},e.prototype.parseProjection=function(){yi(this)},e.prototype.renameTopLevelLayoutSize=function(){"width"!==this.getName("width")&&this.renameLayoutSize(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameLayoutSize(this.getName("height"),"height")},e.prototype.parseLegend=function(){ui(this)},e.prototype.assembleGroupStyle=function(){if("unit"===this.type||"layer"===this.type)return"cell"},e.prototype.assembleLayoutSize=function(){if("unit"===this.type||"layer"===this.type)return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},e.prototype.assembleHeaderMarks=function(){for(var e=this.component.layoutHeaders,t=[],n=0,r=Rl;n<r.length;n++){var i=r[n];e[i].title&&t.push(cr(this,i))}for(var a=0,o=Rl;a<o.length;a++){var i=o[a];t=t.concat(lr(this,i))}return t},e.prototype.assembleAxes=function(){return Vn(this.component.axes,this.config)},e.prototype.assembleLegends=function(){return pi(this)},e.prototype.assembleProjections=function(){return gi(this)},e.prototype.assembleTitle=function(){var e=ms({},$t(this.config.title).nonMark,this.title);if(e.text)return k(["unit","layer"],this.type)||(e.anchor&&"start"!==e.anchor&&ge(pf.cannotSetTitleAnchor(this.type)),e.anchor="start"),os(e).length>0?e:void 0},e.prototype.assembleGroup=function(e){void 0===e&&(e=[]);var t={};e=e.concat(this.assembleSelectionSignals()),e.length>0&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||Ea(this.parent)?Zi(this):[];r.length>0&&(t.scales=r);var i=this.assembleAxes();i.length>0&&(t.axes=i);var a=this.assembleLegends();return a.length>0&&(t.legends=a),t},e.prototype.hasDescendantWithFieldOnChannel=function(e){for(var t=0,n=this.children;t<n.length;t++){var r=n[t];if(Sa(r)){if(r.channelHasField(e))return!0}else if(r.hasDescendantWithFieldOnChannel(e))return!0}return!1},e.prototype.getName=function(e){return F((this.name?this.name+"_":"")+e)},e.prototype.requestDataName=function(e){var t=this.getName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t},e.prototype.getSizeSignalRef=function(e){if(Ea(this.parent)){var t="width"===e?"x":"y",n=this.component.scales[t];if(n&&!n.merged){var r=n.get("type"),i=n.get("range");if(Ct(r)&&Un(i)){var a=n.get("name"),o=Xi(this,t),u=Vi(o);if(u){var s=Ye({aggregate:"distinct",field:u},{expr:"datum"});return{signal:yr(a,n,s)}}return ge("Unknown field for ${channel}.  Cannot calculate view size."),null}}}return{signal:this.layoutSizeNameMap.get(this.getName(e))}},e.prototype.lookupDataSource=function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e},e.prototype.getSizeName=function(e){return this.layoutSizeNameMap.get(e)},e.prototype.renameLayoutSize=function(e,t){this.layoutSizeNameMap.rename(e,t)},e.prototype.renameScale=function(e,t){this.scaleNameMap.rename(e,t)},e.prototype.renameProjection=function(e,t){this.projectionNameMap.rename(e,t)},e.prototype.scaleName=function(e,t){return t?this.getName(e):te(e)&&ne(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0},e.prototype.projectionName=function(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0},e.prototype.getScaleComponent=function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0},e.prototype.getSelectionComponent=function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(pf.selectionNotFound(t));return n},e}(),ed=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return J(t,e),t.prototype.vgField=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);if(n)return Ye(n,t)},t.prototype.reduceFieldDef=function(e,t,n){return gt(this.getMapping(),function(t,n,r){var i=nt(n);return i?e(t,i,r):t},t,n)},t.prototype.forEachFieldDef=function(e,t){pt(this.getMapping(),function(t,n){var r=nt(t);r&&e(r,n)},t)},t}(Kl),td={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t,n){var r=n.scales=[];n.project.forEach(function(t){var i=t.channel,a=e.getScaleComponent(i),o=a?a.get("type"):void 0;if(!a||!Tt(o)||Rt(o))return void ge(pf.SCALE_BINDINGS_CONTINUOUS);if(a.set("domainRaw",{signal:Ja(n,i,"data")},!0),r.push(i),e.repeater&&e.repeater.row===e.repeater.column){var u=e.getScaleComponent(i===Es?Os:Es);u.set("domainRaw",{signal:Ja(n,i,"data")},!0)}})},topLevelSignals:function(e,t,n){if(!e.parent)return n;var r=t.scales.filter(function(e){return!n.filter(function(n){return n.name===Ja(t,e,"data")}).length});return n.concat(r.map(function(e){return{name:Ja(t,e,"data")}}))},signals:function(e,t,n){return e.parent&&t.scales.forEach(function(e){var r=n.filter(function(n){return n.name===Ja(t,e,"data")})[0];r.push="outer",delete r.value,delete r.update}),n}},nd="_brush",rd="_scale_trigger",id={predicate:"vlInterval",scaleDomain:"vlIntervalDomain",signals:function(e,t){var n=t.name,r=td.has(t),i=[],a=[],u=[],s=[];if(t.translate&&!r){var f="!event.item || event.item.mark.name !== "+o(n+nd);za(t,function(e,t){var n=t.between[0].filter||(t.between[0].filter=[]);n.indexOf(f)<0&&n.push(f)})}return t.project.forEach(function(n){var r=n.channel;if(r!==Es&&r!==Os)return void ge("Interval selections only support x and y encoding channels.");var f=Ta(e,t,r),c=Ja(t,r,"data"),l=Ja(t,r,"visual"),d=o(e.scaleName(r)),h=e.getScaleComponent(r).get("type"),p=Tt(h)?"+":"";i.push.apply(i,f),u.push(c),a.push("{encoding: "+o(r)+", "+("field: "+o(n.field)+", extent: "+c+"}")),s.push({scaleName:e.scaleName(r),expr:"(!isArray("+c+") || "+("("+p+"invert("+d+", "+l+")[0] === "+p+c+"[0] && ")+(p+"invert("+d+", "+l+")[1] === "+p+c+"[1]))")})}),r||i.push({name:n+rd,update:s.map(function(e){return e.expr}).join(" && ")+(" ? "+(n+rd)+" : {}")}),i.concat({name:n+xd,on:[{events:u.map(function(e){return{signal:e}}),update:u.join(" && ")+(" ? {unit: "+Xa(e)+", intervals: ["+a.join(", ")+"]} : null")}]})},modifyExpr:function(e,t){var n=t.name+xd;return n+", "+("global"===t.resolve?"true":"{unit: "+Xa(e)+"}")},marks:function(e,t,n){var r=t.name,i=Qa(t),a=i.xi,u=i.yi,s="data("+o(t.name+_d)+")";if(td.has(t))return n;var f={x:null!==a?{signal:r+"_x[0]"}:{value:0},y:null!==u?{signal:r+"_y[0]"}:{value:0},x2:null!==a?{signal:r+"_x[1]"}:{field:{group:"width"}},y2:null!==u?{signal:r+"_y[1]"}:{field:{group:"height"}}};if("global"===t.resolve)for(var c=0,l=os(f);c<l.length;c++){var d=l[c];f[d]=[ms({test:s+".length && "+s+"[0].unit === "+Xa(e)},f[d]),{value:0}]}var h=t.mark,p=h.fill,g=h.fillOpacity,m=Q(h,["fill","fillOpacity"]),v=os(m).reduce(function(e,t){return e[t]=[{test:[null!==a&&r+"_x[0] !== "+r+"_x[1]",null!=u&&r+"_y[0] !== "+r+"_y[1]"].filter(function(e){return e}).join(" && "),value:m[t]},{value:null}],e},{});return[{name:r+nd+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:p},fillOpacity:{value:g}},update:f}}].concat(n,{name:r+nd,type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:ms({},f,v)}})}},ad="voronoi",od={has:function(e){return"interval"!==e.type&&e.nearest},marks:function(e,t,n){var r=Qa(t),i=r.x,a=r.y,o=e.mark;if(ce(o))return ge(pf.nearestNotSupportForContinuous(o)),n;var u={name:e.getName(ad),type:"path",from:{data:e.getName("marks")},encode:{enter:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}}},transform:[{type:"voronoi",x:{expr:i||!i&&!a?"datum.datum.x || 0":"0"},y:{expr:a||!i&&!a?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,f=!1;return n.forEach(function(t,n){var r=t.name||"";r===e.component.mark[0].name?s=n:r.indexOf(ad)>=0&&(f=!0);
}),f||n.splice(s+1,0,u),n}},ud={predicate:"vlMulti",scaleDomain:"vlMultiDomain",signals:Na,modifyExpr:function(e,t){var n=t.name+xd;return n+", "+("global"===t.resolve?"null":"{unit: "+Xa(e)+"}")}},sd={predicate:"vlSingle",scaleDomain:"vlSingleDomain",signals:Na,topLevelSignals:function(e,t,n){var r=n.filter(function(e){return e.name===t.name}),i="data("+o(t.name+_d)+")",a=i+"[0].values";return r.length?n:n.concat({name:t.name,update:i+".length && {"+t.project.map(function(e,t){return e.field+": "+a+"["+t+"]"}).join(", ")+"}"})},modifyExpr:function(e,t){var n=t.name+xd;return n+", "+("global"===t.resolve?"true":"{unit: "+Xa(e)+"}")}},fd={has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind},topLevelSignals:function(e,t,n){var r=t.name,i=t.project,a=t.bind,o=od.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.forEach(function(e){var i=F(r+"_"+e.field),u=n.filter(function(e){return e.name===i});u.length||n.unshift({name:i,value:"",on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? "+W(e.field,o)+" : null"}],bind:a[e.field]||a[e.channel]||a})}),n},signals:function(e,t,n){var r=t.name,i=t.project,a=n.filter(function(e){return e.name===r+xd})[0],u=i.map(function(e){return o(e.field)}).join(", "),s=i.map(function(e){return F(r+"_"+e.field)});return s.length&&(a.update=s.join(" && ")+" ? {fields: ["+u+"], values: ["+s.join(", ")+"]} : null"),delete a.value,delete a.on,n}},cd={has:function(e){var t=e;return void 0!==t.fields||void 0!==t.encodings},parse:function(e,t,n){var r={},i={};(t.fields||[]).forEach(function(e){return r[e]=null}),(t.encodings||[]).forEach(function(t){var n=e.fieldDef(t);if(n)if(n.timeUnit){var a=e.vgField(t);r[a]=t,i[a]={as:a,field:n.field,timeUnit:n.timeUnit}}else r[n.field]=t;else ge(pf.cannotProjectOnChannelWithoutField(t))});var a=n.project||(n.project=[]);for(var o in r)r.hasOwnProperty(o)&&a.push({field:o,channel:r[o]});var u=n.fields||(n.fields={});a.filter(function(e){return e.channel}).forEach(function(e){return u[e.channel]=e.field}),os(i).length&&(n.timeUnit=new Yl(null,i))}},ld="_toggle",dd={has:function(e){return"multi"===e.type&&e.toggle},signals:function(e,t,n){return n.concat({name:t.name+ld,value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t,n){var r=t.name+xd,i=t.name+ld;return i+" ? null : "+r+", "+("global"===t.resolve?i+" ? null : true, ":i+" ? null : {unit: "+Xa(e)+"}, ")+(i+" ? "+r+" : null")}},hd="_translate_anchor",pd="_translate_delta",gd={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var r=t.name,i=td.has(t),a=r+hd,o=Qa(t),u=o.x,s=o.y,f=Sn(t.translate,"scope");return i||(f=f.map(function(e){return e.between[0].markname=r+nd,e})),n.push({name:a,value:{},on:[{events:f.map(function(e){return e.between[0]}),update:"{x: x(unit), y: y(unit)"+(null!==u?", extent_x: "+(i?Ra(e,Es):"slice("+Ja(t,"x","visual")+")"):"")+(null!==s?", extent_y: "+(i?Ra(e,Os):"slice("+Ja(t,"y","visual")+")"):"")+"}"}]},{name:r+pd,value:{},on:[{events:f,update:"{x: "+a+".x - x(unit), y: "+a+".y - y(unit)}"}]}),null!==u&&Da(e,t,Es,"width",n),null!==s&&Da(e,t,Os,"height",n),n}},md="_zoom_anchor",vd="_zoom_delta",yd={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var r=t.name,i=td.has(t),a=r+vd,u=Qa(t),s=u.x,f=u.y,c=o(e.scaleName(Es)),l=o(e.scaleName(Os)),d=Sn(t.zoom,"scope");return i||(d=d.map(function(e){return e.markname=r+nd,e})),n.push({name:r+md,on:[{events:d,update:i?"{"+[c?"x: invert("+c+", x(unit))":"",l?"y: invert("+l+", y(unit))":""].filter(function(e){return!!e}).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),null!==s&&Pa(e,t,"x","width",n),null!==f&&Pa(e,t,"y","height",n),n}},bd={project:cd,toggle:dd,scales:td,translate:gd,zoom:yd,inputs:fd,nearest:od},_d="_store",xd="_tuple",wd="_modify",kd="_selection_domain_",Md=function(e){function t(t,n){var r=e.call(this,t)||this;return r.bins=n,r}return J(t,e),t.prototype.clone=function(){return new t(null,$(this.bins))},t.makeFromEncoding=function(e,n){var r=n.reduceFieldDef(function(e,t,r){if(t.bin){var i=ho(t,n),a=i.key,o=i.binComponent;e[a]=ms({},o,e[a],so(n,t,r,n.config))}return e},{});return 0===os(r).length?null:new t(e,r)},t.makeFromTransform=function(e,n,r){var i=ho(n,r),a=i.key,o=i.binComponent;return new t(e,(u={},u[a]=o,u));var u},t.prototype.merge=function(e){this.bins=ms({},this.bins,e.bins),e.remove()},t.prototype.producedFields=function(){var e={};return L(this.bins).forEach(function(t){t.as.forEach(function(t){return e[t]=!0})}),e},t.prototype.dependentFields=function(){var e={};return L(this.bins).forEach(function(t){e[t.field]=!0}),e},t.prototype.assemble=function(){return A(L(this.bins).map(function(e){var t=[],n=ms({type:"bin",field:e.field,as:e.as,signal:e.signal},e.bin);return!e.bin.extent&&e.extentSignal&&(t.push({type:"extent",field:e.field,signal:e.extentSignal}),n.extent={signal:e.extentSignal}),t.push(n),e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))},t}($l),Sd=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.model=n,i.filter=r,i.expr=io(i.model,i.filter,i),i}return J(t,e),t.prototype.clone=function(){return new t(null,this.model,$(this.filter))},t.prototype.assemble=function(){return{type:"filter",expr:this.expr}},t}($l),Ed=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.fields=n,a.geojson=r,a.signal=i,a}return J(t,e),t.prototype.clone=function(){return new t(null,$(this.fields),this.geojson,this.signal)},t.parseAll=function(e,n){var r=0;if([[zs,Rs],[Ns,Ts]].forEach(function(i){var a=i.map(function(e){return n.channelHasField(e)?n.fieldDef(e).field:void 0});(a[0]||a[1])&&(e=new t(e,a,null,n.getName("geojson_"+r++)))}),n.channelHasField(Ls)){var i=n.fieldDef(Ls);i.type===cc&&(e=new t(e,null,i.field,n.getName("geojson_"+r++)))}return e},t.prototype.assemble=function(){return ms({type:"geojson"},this.fields?{fields:this.fields}:{},this.geojson?{geojson:this.geojson}:{},{signal:this.signal})},t}($l),Od=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.projection=n,a.fields=r,a.as=i,a}return J(t,e),t.prototype.clone=function(){return new t(null,this.projection,$(this.fields),$(this.as))},t.parseAll=function(e,n){return n.projectionName()?([[zs,Rs],[Ns,Ts]].forEach(function(r){var i=r.map(function(e){return n.channelHasField(e)?n.fieldDef(e).field:void 0}),a=r[0]===Ns?"2":"";(i[0]||i[1])&&(e=new t(e,n.projectionName(),i,[n.getName("x"+a),n.getName("y"+a)]))}),e):e},t.prototype.assemble=function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}},t}($l),Ad=function(e){function t(t){return e.call(this,t)||this}return J(t,e),t.prototype.clone=function(){return new t(null)},t.prototype.producedFields=function(){return e={},e[Kc]=!0,e;var e},t.prototype.assemble=function(){return{type:"identifier",as:Kc}},t}($l),Cd=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.transform=n,i.secondary=r,i}return J(t,e),t.make=function(e,n,r,i){var a=n.component.data.sources,o=new Gl(r.from.data),u=a[o.hash()];u||(a[o.hash()]=o,u=o);var s=n.getName("lookup_"+i),f=new jl(u,s,"lookup",n.component.data.outputNodeRefCounts);return n.component.data.outputNodes[s]=f,new t(e,r,f.getSource())},t.prototype.producedFields=function(){return d(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))},t.prototype.assemble=function(){var e;if(this.transform.from.fields)e=ms({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var t=this.transform.as;a(t)||(ge(pf.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return ms({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e,this.transform.default?{default:this.transform.default}:{})},t}($l),Rd=function(e){function t(t,n){var r=e.call(this,t)||this;return r.transform=n,r}return J(t,e),t.prototype.clone=function(){return new t(this.parent,$(this.transform))},t.prototype.producedFields=function(){var e=this,t={};return this.transform.window.forEach(function(n){t[e.getDefaultName(n)]=!0}),t},t.prototype.getDefaultName=function(e){return void 0===e.as?String(e.op)+"_field":e.as},t.prototype.assemble=function(){for(var e=[],t=[],n=[],r=[],i=0,a=this.transform.window;i<a.length;i++){var o=a[i];t.push(o.op),n.push(this.getDefaultName(o)),r.push(void 0===o.param?null:o.param),e.push(void 0===o.field?null:o.field)}var u=this.transform.frame,s=this.transform.groupby,f=[],c=[];if(void 0!==this.transform.sort)for(var l=0,d=this.transform.sort;l<d.length;l++){var h=d[l];f.push(h.field),c.push(void 0===h.order?null:h.order)}var p={field:f,order:c},g=this.transform.ignorePeers,m={type:"window",params:r,as:n,ops:t,fields:e,sort:p};return void 0!==g&&(m.ignorePeers=g),void 0!==s&&(m.groupby=s),void 0!==u&&(m.frame=u),m},t}($l),Td=function(e){function t(t,n,r,i,a,o){return e.call(this,t,n,r,i,a,o)||this}return J(t,e),t.prototype.parseData=function(){this.component.data=mo(this),this.children.forEach(function(e){e.parseData()})},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),os(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,r=this.children;n<r.length;n++){var i=r[n];t(i)}},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children;e<t.length;e++){var n=t[e];n.parseMarkGroup()}},t.prototype.parseAxisAndHeader=function(){for(var e=0,t=this.children;e<t.length;e++){var n=t[e];n.parseAxisAndHeader()}},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.forEach(function(e){return e.assembleSelectionSignals()}),[]},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},gr(this))},t.prototype.assembleSelectionData=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},e)},t.prototype.assembleMarks=function(){return this.children.map(function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleLayoutSize();return ms({type:"group",name:e.getName("group")},t?{title:t}:{},n?{style:n}:{},r?{encode:{update:r}}:{},e.assembleGroup())})},t}(Kl),zd=vo,Nd=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,a,i,t.resolve)||this;return o.type="concat",t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&ge(pf.CONCAT_CANNOT_SHARE_AXIS),o.isVConcat=Zt(t),o.children=(Zt(t)?t.vconcat:t.hconcat).map(function(e,t){return vu(e,o,o.getName("concat_"+t),void 0,i,a,!1)}),o}return J(t,e),t.prototype.parseLayoutSize=function(){yo(this)},t.prototype.parseAxisGroup=function(){return null},t.prototype.assembleLayout=function(){return ms({padding:{row:10,column:10},offset:10},this.isVConcat?{columns:1}:{},{bounds:"full",align:"each"})},t}(Td),Dd=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,a,i,t.resolve)||this;o.type="facet",o.child=vu(t.spec,o,o.getName("child"),void 0,i,a,!1),o.children=[o.child];var u=Eo(t.facet,i);return o.facet=o.initFacet(u),o}return J(t,e),t.prototype.initFacet=function(e){return gt(e,function(e,t,n){return k([Ds,Ps],n)?void 0===t.field?(ge(pf.emptyFieldDef(t,n)),e):(e[n]=rt(t,n),e):(ge(pf.incompatibleChannel(n,"facet")),e)},{})},t.prototype.channelHasField=function(e){return!!this.facet[e]},t.prototype.fieldDef=function(e){return this.facet[e]},t.prototype.parseData=function(){this.component.data=mo(this),this.child.parseData()},t.prototype.parseLayoutSize=function(){bo(this)},t.prototype.parseSelection=function(){this.child.parseSelection(),this.component.selection=this.child.component.selection},t.prototype.parseMarkGroup=function(){this.child.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){this.child.parseAxisAndHeader(),this.parseHeader("column"),this.parseHeader("row"),this.mergeChildAxis("x"),this.mergeChildAxis("y")},t.prototype.parseHeader=function(e){if(this.channelHasField(e)){var t=this.facet[e],n=t.header||{},r=void 0!==t.title?t.title:void 0!==n.title?n.title:et(t,this.config);this.child.component.layoutHeaders[e].title&&(r+=" / "+this.child.component.layoutHeaders[e].title,this.child.component.layoutHeaders[e].title=null),this.component.layoutHeaders[e]={title:r,facetFieldDef:t,header:[this.makeHeaderComponent(e,!0)]}}},t.prototype.makeHeaderComponent=function(e,t){var n="row"===e?"height":"width";return{labels:t,sizeSignal:this.child.component.layoutSize.get(n)?this.child.getSizeSignalRef(n):void 0,axes:[]}},t.prototype.mergeChildAxis=function(e){var t=this.child;if(t.component.axes[e]){var n=this.component,r=n.layoutHeaders,i=n.resolve;if(i.axis[e]=_r(i,e),"shared"===i.axis[e])for(var a="x"===e?"column":"row",o=r[a],u=0,s=t.component.axes[e];u<s.length;u++){var f=s[u],c=fr(f.get("orient"));o[c]=o[c]||[this.makeHeaderComponent(a,!1)];var l=Hn(f,"main",this.config,{header:!0});o[c][0].axes.push(l),f.mainExtracted=!0}}},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.child.assembleSelectionTopLevelSignals(e)},t.prototype.assembleSelectionSignals=function(){return this.child.assembleSelectionSignals(),[]},t.prototype.assembleSelectionData=function(e){return this.child.assembleSelectionData(e)},t.prototype.getLayoutBandMixins=function(e){for(var t={},n="header"===e?"headerBand":"footerBand",r=0,i=["row","column"];r<i.length;r++){var a=i[r],o=this.component.layoutHeaders[a],u=o[e];if(u&&u[0]){var s="row"===a?"height":"width";this.child.component.layoutSize.get(s)||(t[n]=t[n]||{},t[n][a]=.5)}}return t},t.prototype.assembleLayout=function(){var e=this.channelHasField("column")?this.columnDistinctSignal():1;return ms({padding:{row:10,column:10}},this.getLayoutBandMixins("header"),this.getLayoutBandMixins("footer"),{offset:10,columns:e,bounds:"full",align:"all"})},t.prototype.assembleLayoutSignals=function(){return this.child.assembleLayoutSignals()},t.prototype.columnDistinctSignal=function(){if(!(this.parent&&this.parent instanceof t)){var e=this.getName("column_domain");return{signal:"length(data('"+e+"'))"}}},t.prototype.assembleGroup=function(n){return this.parent&&this.parent instanceof t?ms({},this.channelHasField("column")?{encode:{update:{columns:{field:Ye(this.facet.column,{prefix:"distinct"})}}}}:{},e.prototype.assembleGroup.call(this,n)):e.prototype.assembleGroup.call(this,n)},t.prototype.getCardinalityAggregateForChild=function(){var e=[],n=[];if(this.child instanceof t)this.child.channelHasField("column")&&(e.push(Ye(this.child.facet.column)),n.push("distinct"));else for(var r=0,i=["x","y"];r<i.length;r++){var a=i[r],o=this.child.component.scales[a];if(o&&!o.merged){var u=o.get("type"),s=o.get("range");if(Ct(u)&&Un(s)){var f=Xi(this.child,a),c=Vi(f);c?(e.push(c),n.push("distinct")):ge("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e.length?{fields:e,ops:n}:void 0},t.prototype.assembleMarks=function(){var e=this,t=e.child,n=e.facet,r=this.component.data.facetRoot,i=Mo(r),a=this.channelHasField(Ds),o=this.channelHasField(Ps),u=t.assembleLayoutSize(),s={};a&&o&&(s.aggregate={cross:!0});var f=this.getCardinalityAggregateForChild();f&&(s.aggregate=ms({},s.aggregate,f));var c=t.assembleTitle(),l=t.assembleGroupStyle(),d=ms({name:this.getName("cell"),type:"group"},c?{title:c}:{},l?{style:l}:{},{from:{facet:ms({name:r.name,data:r.data,groupby:[].concat(a?[this.vgField(Ds)]:[],o?[this.vgField(Ps)]:[])},s)},sort:{field:[].concat(a?[this.vgField(Ds,{expr:"datum"})]:[],o?[this.vgField(Ps,{expr:"datum"})]:[]),order:[].concat(a?[n.row.sort||"ascending"]:[],o?[n.column.sort||"ascending"]:[])}},i.length>0?{data:i}:{},u?{encode:{update:u}}:{},t.assembleGroup());return[d]},t.prototype.getMapping=function(){return this.facet},t}(ed),Pd=function(e){function t(t,n,r){void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r=!1);var i=e.call(this)||this;return i.explicit=t,i.implicit=n,i.mainExtracted=r,i}return J(t,e),t.prototype.clone=function(){return new t($(this.explicit),$(this.implicit),this.mainExtracted)},t.prototype.hasAxisPart=function(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!zo(this.get(e)))},t}(zl),Ld={bottom:"top",top:"bottom",left:"right",right:"left"},qd={vgMark:"area",encodeEntry:function(e){return ms({},$r(e,{size:"ignore",orient:"include"}),Jr("x",e,"zeroOrMin"),Jr("y",e,"zeroOrMin"),Qr(e,"zeroOrMin"),Ur(e))}},$d={vgMark:"rect",encodeEntry:function(e){return ms({},$r(e,{size:"ignore",orient:"ignore"}),tu(e),nu(e))}},jd={vgMark:"shape",encodeEntry:function(e){return ms({},$r(e,{size:"ignore",orient:"ignore"}))},postEncodingTransform:function(e){var t=e.encoding,n=t.shape,r=ms({type:"geoshape",projection:e.projectionName()},n&&Ue(n)&&n.type===cc?{field:Ye(n,{expr:"datum"})}:{});return[r]}},Fd={vgMark:"line",encodeEntry:function(e){var t=e.width,n=e.height;return ms({},$r(e,{size:"ignore",orient:"ignore"}),Jr("x",e,Dr(t)),Jr("y",e,Dr(n)),Br("size",e,{vgChannel:"strokeWidth"}),Ur(e))}},Id={vgMark:"trail",encodeEntry:function(e){var t=e.width,n=e.height;return ms({},$r(e,{size:"include",orient:"ignore"}),Jr("x",e,Dr(t)),Jr("y",e,Dr(n)),Br("size",e),Ur(e))}},Ud={vgMark:"symbol",encodeEntry:function(e){return iu(e)}},Bd={vgMark:"symbol",encodeEntry:function(e){return iu(e,"circle")}},Wd={vgMark:"symbol",encodeEntry:function(e){return iu(e,"square")}},Gd={vgMark:"rect",encodeEntry:function(e){return ms({},$r(e,{size:"ignore",orient:"ignore"}),ou(e),uu(e))}},Yd={vgMark:"rule",encodeEntry:function(e){var t=(e.config,e.markDef),n=e.width,r=e.height,i=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?ms({},$r(e,{size:"ignore",orient:"ignore"}),Jr("x",e,"horizontal"===i?"zeroOrMin":Dr(n)),Jr("y",e,"vertical"===i?"zeroOrMin":Dr(r)),"vertical"!==i?Qr(e,"zeroOrMax","x2"):{},"horizontal"!==i?Qr(e,"zeroOrMax","y2"):{},Br("size",e,{vgChannel:"strokeWidth",defaultValue:t.size})):{}}},Hd={vgMark:"text",encodeEntry:function(e){var t=e.config,n=e.encoding,r=e.height,i=e.markDef,a=n.text;return ms({},$r(e,{size:"ignore",orient:"ignore"}),Jr("x",e,su(t,a)),Jr("y",e,Dr(r)),Yr(e),Br("size",e,ms({},i.size?{defaultValue:i.size}:{},{vgChannel:"fontSize"})),Fr("align",fu(e.markDef,n,t)))}},Vd={vgMark:"rect",encodeEntry:function(e){var t=e.config,n=e.markDef,r=e.width,i=e.height,a=n.orient,o="horizontal"===a?"width":"height",u="horizontal"===a?"height":"width";return ms({},$r(e,{size:"ignore",orient:"ignore"}),Jr("x",e,Dr(r),"xc"),Jr("y",e,Dr(i),"yc"),Br("size",e,{defaultValue:cu(e),vgChannel:o}),(s={},s[u]={value:t.tick.thickness},s));var s}},Xd={area:qd,bar:$d,circle:Bd,geoshape:jd,line:Fd,point:Ud,rect:Gd,rule:Yd,square:Wd,text:Hd,tick:Vd,trail:Id},Zd="faceted_path_",Jd=function(e){function t(t,n,r,i,a,o,u){void 0===i&&(i={});var s=e.call(this,t,n,r,o,a,void 0)||this;s.fit=u,s.type="unit",s.specifiedScales={},s.specifiedAxes={},s.specifiedLegends={},s.specifiedProjection={},s.selection={},s.children=[],s.initSize(ms({},i,t.width?{width:t.width}:{},t.height?{height:t.height}:{}));var f=le(t.mark)?t.mark.type:t.mark,c=s.encoding=lt(Oo(t.encoding||{},a),f);return s.markDef=Jo(t.mark,c,o),s.stack=Wt(f,c,s.config.stack),s.specifiedScales=s.initScales(f,c),s.specifiedAxes=s.initAxes(c),s.specifiedLegends=s.initLegend(c),s.specifiedProjection=t.projection,s.selection=t.selection,s}return J(t,e),t.prototype.scaleDomain=function(e){var t=this.specifiedScales[e];return t?t.domain:void 0},t.prototype.sort=function(e){return(this.getMapping()[e]||{}).sort},t.prototype.axis=function(e){return this.specifiedAxes[e]},t.prototype.legend=function(e){return this.specifiedLegends[e]},t.prototype.initScales=function(e,t){return lf.reduce(function(e,n){var r,i,a=t[n];return Ue(a)?(r=a,i=a.scale):Fe(a)?(r=a.condition,i=a.condition.scale):"x"===n?r=nt(t.x2):"y"===n&&(r=nt(t.y2)),r&&(e[n]=i||{}),e},{})},t.prototype.initAxes=function(e){return[Es,Os].reduce(function(t,n){var r=e[n];if(Ue(r)||n===Es&&Ue(e.x2)||n===Os&&Ue(e.y2)){var i=Ue(r)?r.axis:null;null!==i&&i!==!1&&(t[n]=ms({},i))}return t},{})},t.prototype.initLegend=function(e){return ff.reduce(function(t,n){var r=e[n];if(r){var i=Ue(r)?r.legend:Fe(r)?r.condition.legend:null;null!==i&&i!==!1&&(t[n]=ms({},i))}return t},{})},t.prototype.parseData=function(){this.component.data=mo(this)},t.prototype.parseLayoutSize=function(){xo(this)},t.prototype.parseSelection=function(){this.component.selection=qa(this,this.selection)},t.prototype.parseMarkGroup=function(){this.component.mark=lu(this)},t.prototype.parseAxisAndHeader=function(){this.component.axes=Go(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return ja(this,e)},t.prototype.assembleSelectionSignals=function(){return $a(this,[])},t.prototype.assembleSelectionData=function(e){return Fa(this,e)},t.prototype.assembleLayout=function(){return null},t.prototype.assembleLayoutSignals=function(){return gr(this)},t.prototype.assembleMarks=function(){var e=this.component.mark||[];return this.parent&&Ca(this.parent)||(e=Ia(this,e)),e.map(this.correctDataNames)},t.prototype.assembleLayoutSize=function(){return{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")}},t.prototype.getMapping=function(){return this.encoding},t.prototype.toSpec=function(e,t){var n,r=$(this.encoding);return n={mark:this.markDef,encoding:r},e||(n.config=$(this.config)),t||(n.data=$(this.data)),n},Object.defineProperty(t.prototype,"mark",{get:function(){return this.markDef.type},enumerable:!0,configurable:!0}),t.prototype.channelHasField=function(e){return ft(this.encoding,e)},t.prototype.fieldDef=function(e){var t=this.encoding[e];return nt(t)},t}(ed),Qd=function(e){function t(n,r,i,a,o,u,s){var f=e.call(this,n,r,i,u,o,n.resolve)||this;f.type="layer";var c=ms({},a,n.width?{width:n.width}:{},n.height?{height:n.height}:{});return f.initSize(c),f.children=n.layer.map(function(e,n){if(Ht(e))return new t(e,f,f.getName("layer_"+n),c,o,u,s);if(Yt(e))return new Jd(e,f,f.getName("layer_"+n),c,o,u,s);throw new Error(pf.INVALID_SPEC)}),f}return J(t,e),t.prototype.parseData=function(){this.component.data=mo(this);for(var e=0,t=this.children;e<t.length;e++){var n=t[e];n.parseData()}},t.prototype.parseLayoutSize=function(){vo(this)},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=function(t){t.parseSelection(),os(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})},n=0,r=this.children;n<r.length;n++){var i=r[n];t(i)}},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children;e<t.length;e++){var n=t[e];n.parseMarkGroup()}},t.prototype.parseAxisAndHeader=function(){Yo(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleSelectionSignals())},[])},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},gr(this))},t.prototype.assembleSelectionData=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},e)},t.prototype.assembleTitle=function(){var t=e.prototype.assembleTitle.call(this);if(t)return t;for(var n=0,r=this.children;n<r.length;n++){var i=r[n];if(t=i.assembleTitle())return t}},t.prototype.assembleLayout=function(){return null},t.prototype.assembleMarks=function(){return Ua(this,A(this.children.map(function(e){return e.assembleMarks()})))},t.prototype.assembleLegends=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLegends())},pi(this))},t}(Kl),Kd=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,a,i,t.resolve)||this;return o.type="repeat",t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&ge(pf.REPEAT_CANNOT_SHARE_AXIS),o.repeat=t.repeat,o.children=o._initChildren(t,o.repeat,i,a),o}return J(t,e),t.prototype._initChildren=function(e,t,n,r){for(var i=[],a=t.row||[n?n.row:null],o=t.column||[n?n.column:null],u=0,s=a;u<s.length;u++)for(var f=s[u],c=0,l=o;c<l.length;c++){var d=l[c],h=(f?"_"+f:"")+(d?"_"+d:""),p={row:f,column:d};i.push(vu(e.spec,this,this.getName("child"+h),void 0,p,r,!1))}return i},t.prototype.parseLayoutSize=function(){zd(this)},t.prototype.assembleLayout=function(){return{padding:{row:10,column:10},offset:10,columns:this.repeat&&this.repeat.column?this.repeat.column.length:1,bounds:"full",align:"all"}},t}(Td),eh=Object.freeze({}),th={text:["text"],line:["x","y"],trail:["x","y"],area:["x","y"]},nh={bar:d(["row","column","x","y","size","color","fill","stroke","detail"]),line:d(["row","column","x","y","color","fill","stroke","color","detail"]),trail:d(["row","column","x","y","color","fill","stroke","color","detail","size"]),area:d(["row","column","x","y","color","fill","stroke","detail"]),tick:d(["row","column","x","y","color","fill","stroke","detail"]),circle:d(["row","column","x","y","color","fill","stroke","size","detail"]),square:d(["row","column","x","y","color","fill","stroke","size","detail"]),point:d(["row","column","x","y","color","fill","stroke","size","detail","shape"]),geoshape:d(["row","column","color","fill","stroke","detail","shape"]),text:d(["row","column","size","color","fill","stroke","text"])},rh=Object.freeze({DEFAULT_REQUIRED_CHANNEL_MAP:th,DEFAULT_SUPPORTED_CHANNEL_TYPE:nh,getEncodingMappingError:xu}),ih="2.4.3";e.aggregate=ps,e.axis=Ms,e.bin=hf,e.channel=df,e.compositeMark=Ec,e.config=ol,e.data=gl,e.datetime=Hf,e.encoding=mc,e.facet=eh,e.fieldDef=gc,e.legend=Nc,e.mark=$f,e.scale=Qc,e.sort=ql,e.spec=ll,e.stack=cl,e.timeUnit=ic,e.transform=Ol,e.type=lc,e.util=us,e.validate=rh,e.compile=yu,e.version=ih,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){(function(e,r){function i(e){if(e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function a(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}var o=n(92),u=n(241),s=n(236),f=n(238),c=n(235);for(var l in c)t[l]=c[l];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,i.prototype.init=function(e,n,r,i,a){switch(this.windowBits=e,this.level=n,this.memLevel=r,this.strategy=i,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new u,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var o=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:var o=f.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return o!==t.Z_OK?void this._error(o):(this.write_in_progress=!1,void(this.init_done=!0))},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===t.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},i.prototype.write=function(t,n,r,i,a,o,u){this._writeCheck(),this.write_in_progress=!0;var s=this;return e.nextTick(function(){s.write_in_progress=!1;var e=s._write(t,n,r,i,a,o,u);s.callback(e[0],e[1]),s.pending_close&&s.close()}),this},i.prototype.writeSync=function(e,t,n,r,i,a,o){return this._writeCheck(),this._write(e,t,n,r,i,a,o)},i.prototype._write=function(e,n,i,o,u,c,l){if(this.write_in_progress=!0,e!==t.Z_NO_FLUSH&&e!==t.Z_PARTIAL_FLUSH&&e!==t.Z_SYNC_FLUSH&&e!==t.Z_FULL_FLUSH&&e!==t.Z_FINISH&&e!==t.Z_BLOCK)throw new Error("Invalid flush value");null==n&&(n=new r(0),o=0,i=0),u._set?u.set=u._set:u.set=a;var d=this.strm;switch(d.avail_in=o,d.input=n,d.next_in=i,d.avail_out=l,d.output=u,d.next_out=c,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var h=s.deflate(d,e);break;case t.UNZIP:case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:var h=f.inflate(d,e);break;default:throw new Error("Unknown mode "+this.mode)}return h!==t.Z_STREAM_END&&h!==t.Z_OK&&this._error(h),this.write_in_progress=!1,[d.avail_in,d.avail_out]},i.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):f.inflateEnd(this.strm),void(this.mode=t.NONE))},i.prototype.reset=function(){switch(this.mode){case t.DEFLATE:case t.DEFLATERAW:var e=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:var e=f.inflateReset(this.strm)}e!==t.Z_OK&&this._error(e)},i.prototype._error=function(e){this.onerror(o[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},t.Zlib=i}).call(t,n(2),n(1).Buffer)},function(e,t,n){(function(e,r){function i(t,n,r){function i(){for(var e;null!==(e=t.read());)u.push(e),s+=e.length;t.once("readable",i)}function a(e){t.removeListener("end",o),t.removeListener("readable",i),r(e)}function o(){var n=e.concat(u,s);u=[],r(null,n),t.close()}var u=[],s=0;t.on("error",a),t.on("end",o),t.end(n),i()}function a(t,n){if("string"==typeof n&&(n=new e(n)),!e.isBuffer(n))throw new TypeError("Not a string or buffer");var r=g.Z_FINISH;return t._processChunk(n,r)}function o(e){return this instanceof o?void h.call(this,e,g.DEFLATE):new o(e)}function u(e){return this instanceof u?void h.call(this,e,g.INFLATE):new u(e)}function s(e){return this instanceof s?void h.call(this,e,g.GZIP):new s(e)}function f(e){return this instanceof f?void h.call(this,e,g.GUNZIP):new f(e)}function c(e){return this instanceof c?void h.call(this,e,g.DEFLATERAW):new c(e)}function l(e){return this instanceof l?void h.call(this,e,g.INFLATERAW):new l(e)}function d(e){return this instanceof d?void h.call(this,e,g.UNZIP):new d(e)}function h(n,r){if(this._opts=n=n||{},this._chunkSize=n.chunkSize||t.Z_DEFAULT_CHUNK,p.call(this,n),n.flush&&n.flush!==g.Z_NO_FLUSH&&n.flush!==g.Z_PARTIAL_FLUSH&&n.flush!==g.Z_SYNC_FLUSH&&n.flush!==g.Z_FULL_FLUSH&&n.flush!==g.Z_FINISH&&n.flush!==g.Z_BLOCK)throw new Error("Invalid flush flag: "+n.flush);if(this._flushFlag=n.flush||g.Z_NO_FLUSH,n.chunkSize&&(n.chunkSize<t.Z_MIN_CHUNK||n.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+n.chunkSize);if(n.windowBits&&(n.windowBits<t.Z_MIN_WINDOWBITS||n.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+n.windowBits);if(n.level&&(n.level<t.Z_MIN_LEVEL||n.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+n.level);if(n.memLevel&&(n.memLevel<t.Z_MIN_MEMLEVEL||n.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+n.memLevel);if(n.strategy&&n.strategy!=t.Z_FILTERED&&n.strategy!=t.Z_HUFFMAN_ONLY&&n.strategy!=t.Z_RLE&&n.strategy!=t.Z_FIXED&&n.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+n.strategy);if(n.dictionary&&!e.isBuffer(n.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new g.Zlib(r);var i=this;this._hadError=!1,this._binding.onerror=function(e,n){i._binding=null,i._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],i.emit("error",r)};var a=t.Z_DEFAULT_COMPRESSION;"number"==typeof n.level&&(a=n.level);var o=t.Z_DEFAULT_STRATEGY;"number"==typeof n.strategy&&(o=n.strategy),
this._binding.init(n.windowBits||t.Z_DEFAULT_WINDOWBITS,a,n.memLevel||t.Z_DEFAULT_MEMLEVEL,o,n.dictionary),this._buffer=new e(this._chunkSize),this._offset=0,this._closed=!1,this._level=a,this._strategy=o,this.once("end",this.close)}var p=n(97),g=n(269),m=n(54),v=n(117).ok;g.Z_MIN_WINDOWBITS=8,g.Z_MAX_WINDOWBITS=15,g.Z_DEFAULT_WINDOWBITS=15,g.Z_MIN_CHUNK=64,g.Z_MAX_CHUNK=1/0,g.Z_DEFAULT_CHUNK=16384,g.Z_MIN_MEMLEVEL=1,g.Z_MAX_MEMLEVEL=9,g.Z_DEFAULT_MEMLEVEL=8,g.Z_MIN_LEVEL=-1,g.Z_MAX_LEVEL=9,g.Z_DEFAULT_LEVEL=g.Z_DEFAULT_COMPRESSION,Object.keys(g).forEach(function(e){e.match(/^Z/)&&(t[e]=g[e])}),t.codes={Z_OK:g.Z_OK,Z_STREAM_END:g.Z_STREAM_END,Z_NEED_DICT:g.Z_NEED_DICT,Z_ERRNO:g.Z_ERRNO,Z_STREAM_ERROR:g.Z_STREAM_ERROR,Z_DATA_ERROR:g.Z_DATA_ERROR,Z_MEM_ERROR:g.Z_MEM_ERROR,Z_BUF_ERROR:g.Z_BUF_ERROR,Z_VERSION_ERROR:g.Z_VERSION_ERROR},Object.keys(t.codes).forEach(function(e){t.codes[t.codes[e]]=e}),t.Deflate=o,t.Inflate=u,t.Gzip=s,t.Gunzip=f,t.DeflateRaw=c,t.InflateRaw=l,t.Unzip=d,t.createDeflate=function(e){return new o(e)},t.createInflate=function(e){return new u(e)},t.createDeflateRaw=function(e){return new c(e)},t.createInflateRaw=function(e){return new l(e)},t.createGzip=function(e){return new s(e)},t.createGunzip=function(e){return new f(e)},t.createUnzip=function(e){return new d(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new o(t),e,n)},t.deflateSync=function(e,t){return a(new o(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new s(t),e,n)},t.gzipSync=function(e,t){return a(new s(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new c(t),e,n)},t.deflateRawSync=function(e,t){return a(new c(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new d(t),e,n)},t.unzipSync=function(e,t){return a(new d(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new u(t),e,n)},t.inflateSync=function(e,t){return a(new u(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new f(t),e,n)},t.gunzipSync=function(e,t){return a(new f(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),i(new l(t),e,n)},t.inflateRawSync=function(e,t){return a(new l(t),e)},m.inherits(h,p),h.prototype.params=function(e,n,i){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var a=this;this.flush(g.Z_SYNC_FLUSH,function(){a._binding.params(e,n),a._hadError||(a._level=e,a._strategy=n,i&&i())})}else r.nextTick(i)},h.prototype.reset=function(){return this._binding.reset()},h.prototype._flush=function(t){this._transform(new e(0),"",t)},h.prototype.flush=function(t,n){var i=this._writableState;if(("function"==typeof t||void 0===t&&!n)&&(n=t,t=g.Z_FULL_FLUSH),i.ended)n&&r.nextTick(n);else if(i.ending)n&&this.once("end",n);else if(i.needDrain){var a=this;this.once("drain",function(){a.flush(n)})}else this._flushFlag=t,this.write(new e(0),"",n)},h.prototype.close=function(e){if(e&&r.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;r.nextTick(function(){t.emit("close")})}},h.prototype._transform=function(t,n,r){var i,a=this._writableState,o=a.ending||a.ended,u=o&&(!t||a.length===t.length);if(null===!t&&!e.isBuffer(t))return r(new Error("invalid input"));u?i=g.Z_FINISH:(i=this._flushFlag,t.length>=a.length&&(this._flushFlag=this._opts.flush||g.Z_NO_FLUSH));this._processChunk(t,i,r)},h.prototype._processChunk=function(t,n,r){function i(c,h){if(!s._hadError){var p=o-h;if(v(p>=0,"have should not go down"),p>0){var g=s._buffer.slice(s._offset,s._offset+p);s._offset+=p,f?s.push(g):(l.push(g),d+=g.length)}if((0===h||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=new e(s._chunkSize)),0===h){if(u+=a-c,a=c,!f)return!0;var m=s._binding.write(n,t,u,a,s._buffer,s._offset,s._chunkSize);return m.callback=i,void(m.buffer=t)}return!!f&&void r()}}var a=t&&t.length,o=this._chunkSize-this._offset,u=0,s=this,f="function"==typeof r;if(!f){var c,l=[],d=0;this.on("error",function(e){c=e});do var h=this._binding.writeSync(n,t,u,a,this._buffer,this._offset,o);while(!this._hadError&&i(h[0],h[1]));if(this._hadError)throw c;var p=e.concat(l,d);return this.close(),p}var g=this._binding.write(n,t,u,a,this._buffer,this._offset,o);g.buffer=t,g.callback=i},m.inherits(o,h),m.inherits(u,h),m.inherits(s,h),m.inherits(f,h),m.inherits(c,h),m.inherits(l,h),m.inherits(d,h)}).call(t,n(1).Buffer,n(2))},function(e,t,n){var r=n(51),i=e.exports;for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);i.request=function(e,t){return e||(e={}),e.scheme="https",e.protocol="https:",r.request.call(this,e,t)}},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.pageQuery=void 0;var u,s=n(3),f=r(s),c=n(156),l=(r(c),n(226)),d=r(l),h=n(254),p=r(h),g=n(157),m=r(g),v=new p.default({createElement:f.default.createElement,components:(u={},u[g.KEY]=m.default,u)}).Compiler,y=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this.props.data.markdownRemark,t=((0,d.default)(this.props,"data.site.siteMetadata.title"),this.props.pathContext);t.previous,t.next;return f.default.createElement("div",null,f.default.createElement("h1",null,e.frontmatter.title),f.default.createElement("div",null,v(e.htmlAst)))},t}(f.default.Component);t.default=y;t.pageQuery="** extracted graphql fragment **"}]);
//# sourceMappingURL=component---src-templates-blog-post-js-f1e8de0dad6ef4f395fb.js.map